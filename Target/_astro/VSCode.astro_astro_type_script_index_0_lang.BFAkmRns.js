import{_ as cO}from"./preload-helper.CLcXU_4U.js";let var_d1c327a3_222e_5848_9624_72a5b2936f12;let __tla=(async()=>{var lde=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var QUe=lde((fo,ade)=>{var cde=Object.defineProperty,pd=(i,e)=>cde(i,"name",{value:e,configurable:!0}),IM;(i=>{function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}i.isThemeColor=e,pd(e,"isThemeColor")})(IM||(IM={}));function dde(i){return{id:i}}pd(dde,"themeColorFromId");var Ne;(i=>{i.iconNameSegment="[A-Za-z0-9]+",i.iconNameExpression="[A-Za-z0-9-]+",i.iconModifierExpression="~[A-Za-z]+",i.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${i.iconNameExpression})(${i.iconModifierExpression})?$`);function t(u){const f=e.exec(u.id);if(!f)return t(ee.error);const[,p,m]=f,_=["codicon","codicon-"+p];return m&&_.push("codicon-modifier-"+m.substring(1)),_}i.asClassNameArray=t,pd(t,"asClassNameArray");function n(u){return t(u).join(" ")}i.asClassName=n,pd(n,"asClassName");function s(u){return"."+t(u).join(".")}i.asCSSSelector=s,pd(s,"asCSSSelector");function o(u){return u&&typeof u=="object"&&typeof u.id=="string"&&(typeof u.color>"u"||IM.isThemeColor(u.color))}i.isThemeIcon=o,pd(o,"isThemeIcon");const r=new RegExp(`^\\$\\((${i.iconNameExpression}(?:${i.iconModifierExpression})?)\\)$`);function a(u){const f=r.exec(u);if(!f)return;const[,p]=f;return{id:p}}i.fromString=a,pd(a,"fromString");function l(u){return{id:u}}i.fromId=l,pd(l,"fromId");function c(u,f){let p=u.id;const m=p.lastIndexOf("~");return m!==-1&&(p=p.substring(0,m)),f&&(p=`${p}~${f}`),{id:p}}i.modify=c,pd(c,"modify");function d(u){const f=u.id.lastIndexOf("~");if(f!==-1)return u.id.substring(f+1)}i.getModifier=d,pd(d,"getModifier");function h(u,f){return u.id===f.id&&u.color?.id===f.color?.id}i.isEqual=h,pd(h,"isEqual")})(Ne||(Ne={}));var hde=Object.defineProperty,Ko=(i,e)=>hde(i,"name",{value:e,configurable:!0});function hn(i){return typeof i=="string"}Ko(hn,"isString");function VW(i){return Array.isArray(i)&&i.every(e=>hn(e))}Ko(VW,"isStringArray");function On(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&!(i instanceof RegExp)&&!(i instanceof Date)}Ko(On,"isObject");function G$(i){const e=Object.getPrototypeOf(Uint8Array);return typeof i=="object"&&i instanceof e}Ko(G$,"isTypedArray");function Gc(i){return typeof i=="number"&&!isNaN(i)}Ko(Gc,"isNumber");function TM(i){return!!i&&typeof i[Symbol.iterator]=="function"}Ko(TM,"isIterable");function WW(i){return i===!0||i===!1}Ko(WW,"isBoolean");function oo(i){return typeof i>"u"}Ko(oo,"isUndefined");function vb(i){return!Ls(i)}Ko(vb,"isDefined");function Ls(i){return oo(i)||i===null}Ko(Ls,"isUndefinedOrNull");function MC(i,e){if(!i)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}Ko(MC,"assertType");function pt(i){if(Ls(i))throw new Error("Assertion Failed: argument is undefined or null");return i}Ko(pt,"assertIsDefined");function Rd(...i){const e=[];for(let t=0;t<i.length;t++){const n=i[t];if(Ls(n))throw new Error(`Assertion Failed: argument at index ${t} is undefined or null`);e.push(n)}return e}Ko(Rd,"assertAllDefined");const ude=Object.prototype.hasOwnProperty;function R0(i){if(!On(i))return!1;for(const e in i)if(ude.call(i,e))return!1;return!0}Ko(R0,"isEmptyObject");function zg(i){return typeof i=="function"}Ko(zg,"isFunction");function K$(...i){return i.length>0&&i.every(zg)}Ko(K$,"areFunctions");function j$(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)q$(i[n],e[n])}Ko(j$,"validateConstraints");function q$(i,e){if(hn(e)){if(typeof i!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(zg(e)){try{if(i instanceof e)return}catch{}if(!Ls(i)&&i.constructor===e||e.length===1&&e.call(void 0,i)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}Ko(q$,"validateConstraint");function gde(i){return i}Ko(gde,"upcast");var fde=Object.defineProperty,Y$=(i,e)=>fde(i,"name",{value:e,configurable:!0});const AM=Object.create(null);function y(i,e){if(hn(e)){const t=AM[e];if(t===void 0)throw new Error(`${i} references an unknown codicon: ${e}`);e=t}return AM[i]=e,{id:i}}Y$(y,"register");function HW(){return AM}Y$(HW,"getCodiconFontCharacters");const pde={add:y("add",6e4),plus:y("plus",6e4),gistNew:y("gist-new",6e4),repoCreate:y("repo-create",6e4),lightbulb:y("lightbulb",60001),lightBulb:y("light-bulb",60001),repo:y("repo",60002),repoDelete:y("repo-delete",60002),gistFork:y("gist-fork",60003),repoForked:y("repo-forked",60003),gitPullRequest:y("git-pull-request",60004),gitPullRequestAbandoned:y("git-pull-request-abandoned",60004),recordKeys:y("record-keys",60005),keyboard:y("keyboard",60005),tag:y("tag",60006),gitPullRequestLabel:y("git-pull-request-label",60006),tagAdd:y("tag-add",60006),tagRemove:y("tag-remove",60006),person:y("person",60007),personFollow:y("person-follow",60007),personOutline:y("person-outline",60007),personFilled:y("person-filled",60007),gitBranch:y("git-branch",60008),gitBranchCreate:y("git-branch-create",60008),gitBranchDelete:y("git-branch-delete",60008),sourceControl:y("source-control",60008),mirror:y("mirror",60009),mirrorPublic:y("mirror-public",60009),star:y("star",60010),starAdd:y("star-add",60010),starDelete:y("star-delete",60010),starEmpty:y("star-empty",60010),comment:y("comment",60011),commentAdd:y("comment-add",60011),alert:y("alert",60012),warning:y("warning",60012),search:y("search",60013),searchSave:y("search-save",60013),logOut:y("log-out",60014),signOut:y("sign-out",60014),logIn:y("log-in",60015),signIn:y("sign-in",60015),eye:y("eye",60016),eyeUnwatch:y("eye-unwatch",60016),eyeWatch:y("eye-watch",60016),circleFilled:y("circle-filled",60017),primitiveDot:y("primitive-dot",60017),closeDirty:y("close-dirty",60017),debugBreakpoint:y("debug-breakpoint",60017),debugBreakpointDisabled:y("debug-breakpoint-disabled",60017),debugHint:y("debug-hint",60017),terminalDecorationSuccess:y("terminal-decoration-success",60017),primitiveSquare:y("primitive-square",60018),edit:y("edit",60019),pencil:y("pencil",60019),info:y("info",60020),issueOpened:y("issue-opened",60020),gistPrivate:y("gist-private",60021),gitForkPrivate:y("git-fork-private",60021),lock:y("lock",60021),mirrorPrivate:y("mirror-private",60021),close:y("close",60022),removeClose:y("remove-close",60022),x:y("x",60022),repoSync:y("repo-sync",60023),sync:y("sync",60023),clone:y("clone",60024),desktopDownload:y("desktop-download",60024),beaker:y("beaker",60025),microscope:y("microscope",60025),vm:y("vm",60026),deviceDesktop:y("device-desktop",60026),file:y("file",60027),fileText:y("file-text",60027),more:y("more",60028),ellipsis:y("ellipsis",60028),kebabHorizontal:y("kebab-horizontal",60028),mailReply:y("mail-reply",60029),reply:y("reply",60029),organization:y("organization",60030),organizationFilled:y("organization-filled",60030),organizationOutline:y("organization-outline",60030),newFile:y("new-file",60031),fileAdd:y("file-add",60031),newFolder:y("new-folder",60032),fileDirectoryCreate:y("file-directory-create",60032),trash:y("trash",60033),trashcan:y("trashcan",60033),history:y("history",60034),clock:y("clock",60034),folder:y("folder",60035),fileDirectory:y("file-directory",60035),symbolFolder:y("symbol-folder",60035),logoGithub:y("logo-github",60036),markGithub:y("mark-github",60036),github:y("github",60036),terminal:y("terminal",60037),console:y("console",60037),repl:y("repl",60037),zap:y("zap",60038),symbolEvent:y("symbol-event",60038),error:y("error",60039),stop:y("stop",60039),variable:y("variable",60040),symbolVariable:y("symbol-variable",60040),array:y("array",60042),symbolArray:y("symbol-array",60042),symbolModule:y("symbol-module",60043),symbolPackage:y("symbol-package",60043),symbolNamespace:y("symbol-namespace",60043),symbolObject:y("symbol-object",60043),symbolMethod:y("symbol-method",60044),symbolFunction:y("symbol-function",60044),symbolConstructor:y("symbol-constructor",60044),symbolBoolean:y("symbol-boolean",60047),symbolNull:y("symbol-null",60047),symbolNumeric:y("symbol-numeric",60048),symbolNumber:y("symbol-number",60048),symbolStructure:y("symbol-structure",60049),symbolStruct:y("symbol-struct",60049),symbolParameter:y("symbol-parameter",60050),symbolTypeParameter:y("symbol-type-parameter",60050),symbolKey:y("symbol-key",60051),symbolText:y("symbol-text",60051),symbolReference:y("symbol-reference",60052),goToFile:y("go-to-file",60052),symbolEnum:y("symbol-enum",60053),symbolValue:y("symbol-value",60053),symbolRuler:y("symbol-ruler",60054),symbolUnit:y("symbol-unit",60054),activateBreakpoints:y("activate-breakpoints",60055),archive:y("archive",60056),arrowBoth:y("arrow-both",60057),arrowDown:y("arrow-down",60058),arrowLeft:y("arrow-left",60059),arrowRight:y("arrow-right",60060),arrowSmallDown:y("arrow-small-down",60061),arrowSmallLeft:y("arrow-small-left",60062),arrowSmallRight:y("arrow-small-right",60063),arrowSmallUp:y("arrow-small-up",60064),arrowUp:y("arrow-up",60065),bell:y("bell",60066),bold:y("bold",60067),book:y("book",60068),bookmark:y("bookmark",60069),debugBreakpointConditionalUnverified:y("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:y("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:y("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:y("debug-breakpoint-data-unverified",60072),debugBreakpointData:y("debug-breakpoint-data",60073),debugBreakpointDataDisabled:y("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:y("debug-breakpoint-log-unverified",60074),debugBreakpointLog:y("debug-breakpoint-log",60075),debugBreakpointLogDisabled:y("debug-breakpoint-log-disabled",60075),briefcase:y("briefcase",60076),broadcast:y("broadcast",60077),browser:y("browser",60078),bug:y("bug",60079),calendar:y("calendar",60080),caseSensitive:y("case-sensitive",60081),check:y("check",60082),checklist:y("checklist",60083),chevronDown:y("chevron-down",60084),chevronLeft:y("chevron-left",60085),chevronRight:y("chevron-right",60086),chevronUp:y("chevron-up",60087),chromeClose:y("chrome-close",60088),chromeMaximize:y("chrome-maximize",60089),chromeMinimize:y("chrome-minimize",60090),chromeRestore:y("chrome-restore",60091),circleOutline:y("circle-outline",60092),circle:y("circle",60092),debugBreakpointUnverified:y("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:y("terminal-decoration-incomplete",60092),circleSlash:y("circle-slash",60093),circuitBoard:y("circuit-board",60094),clearAll:y("clear-all",60095),clippy:y("clippy",60096),closeAll:y("close-all",60097),cloudDownload:y("cloud-download",60098),cloudUpload:y("cloud-upload",60099),code:y("code",60100),collapseAll:y("collapse-all",60101),colorMode:y("color-mode",60102),commentDiscussion:y("comment-discussion",60103),creditCard:y("credit-card",60105),dash:y("dash",60108),dashboard:y("dashboard",60109),database:y("database",60110),debugContinue:y("debug-continue",60111),debugDisconnect:y("debug-disconnect",60112),debugPause:y("debug-pause",60113),debugRestart:y("debug-restart",60114),debugStart:y("debug-start",60115),debugStepInto:y("debug-step-into",60116),debugStepOut:y("debug-step-out",60117),debugStepOver:y("debug-step-over",60118),debugStop:y("debug-stop",60119),debug:y("debug",60120),deviceCameraVideo:y("device-camera-video",60121),deviceCamera:y("device-camera",60122),deviceMobile:y("device-mobile",60123),diffAdded:y("diff-added",60124),diffIgnored:y("diff-ignored",60125),diffModified:y("diff-modified",60126),diffRemoved:y("diff-removed",60127),diffRenamed:y("diff-renamed",60128),diff:y("diff",60129),diffSidebyside:y("diff-sidebyside",60129),discard:y("discard",60130),editorLayout:y("editor-layout",60131),emptyWindow:y("empty-window",60132),exclude:y("exclude",60133),extensions:y("extensions",60134),eyeClosed:y("eye-closed",60135),fileBinary:y("file-binary",60136),fileCode:y("file-code",60137),fileMedia:y("file-media",60138),filePdf:y("file-pdf",60139),fileSubmodule:y("file-submodule",60140),fileSymlinkDirectory:y("file-symlink-directory",60141),fileSymlinkFile:y("file-symlink-file",60142),fileZip:y("file-zip",60143),files:y("files",60144),filter:y("filter",60145),flame:y("flame",60146),foldDown:y("fold-down",60147),foldUp:y("fold-up",60148),fold:y("fold",60149),folderActive:y("folder-active",60150),folderOpened:y("folder-opened",60151),gear:y("gear",60152),gift:y("gift",60153),gistSecret:y("gist-secret",60154),gist:y("gist",60155),gitCommit:y("git-commit",60156),gitCompare:y("git-compare",60157),compareChanges:y("compare-changes",60157),gitMerge:y("git-merge",60158),githubAction:y("github-action",60159),githubAlt:y("github-alt",60160),globe:y("globe",60161),grabber:y("grabber",60162),graph:y("graph",60163),gripper:y("gripper",60164),heart:y("heart",60165),home:y("home",60166),horizontalRule:y("horizontal-rule",60167),hubot:y("hubot",60168),inbox:y("inbox",60169),issueReopened:y("issue-reopened",60171),issues:y("issues",60172),italic:y("italic",60173),jersey:y("jersey",60174),json:y("json",60175),kebabVertical:y("kebab-vertical",60176),key:y("key",60177),law:y("law",60178),lightbulbAutofix:y("lightbulb-autofix",60179),linkExternal:y("link-external",60180),link:y("link",60181),listOrdered:y("list-ordered",60182),listUnordered:y("list-unordered",60183),liveShare:y("live-share",60184),loading:y("loading",60185),location:y("location",60186),mailRead:y("mail-read",60187),mail:y("mail",60188),markdown:y("markdown",60189),megaphone:y("megaphone",60190),mention:y("mention",60191),milestone:y("milestone",60192),gitPullRequestMilestone:y("git-pull-request-milestone",60192),mortarBoard:y("mortar-board",60193),move:y("move",60194),multipleWindows:y("multiple-windows",60195),mute:y("mute",60196),noNewline:y("no-newline",60197),note:y("note",60198),octoface:y("octoface",60199),openPreview:y("open-preview",60200),package:y("package",60201),paintcan:y("paintcan",60202),pin:y("pin",60203),play:y("play",60204),run:y("run",60204),plug:y("plug",60205),preserveCase:y("preserve-case",60206),preview:y("preview",60207),project:y("project",60208),pulse:y("pulse",60209),question:y("question",60210),quote:y("quote",60211),radioTower:y("radio-tower",60212),reactions:y("reactions",60213),references:y("references",60214),refresh:y("refresh",60215),regex:y("regex",60216),remoteExplorer:y("remote-explorer",60217),remote:y("remote",60218),remove:y("remove",60219),replaceAll:y("replace-all",60220),replace:y("replace",60221),repoClone:y("repo-clone",60222),repoForcePush:y("repo-force-push",60223),repoPull:y("repo-pull",60224),repoPush:y("repo-push",60225),report:y("report",60226),requestChanges:y("request-changes",60227),rocket:y("rocket",60228),rootFolderOpened:y("root-folder-opened",60229),rootFolder:y("root-folder",60230),rss:y("rss",60231),ruby:y("ruby",60232),saveAll:y("save-all",60233),saveAs:y("save-as",60234),save:y("save",60235),screenFull:y("screen-full",60236),screenNormal:y("screen-normal",60237),searchStop:y("search-stop",60238),server:y("server",60240),settingsGear:y("settings-gear",60241),settings:y("settings",60242),shield:y("shield",60243),smiley:y("smiley",60244),sortPrecedence:y("sort-precedence",60245),splitHorizontal:y("split-horizontal",60246),splitVertical:y("split-vertical",60247),squirrel:y("squirrel",60248),starFull:y("star-full",60249),starHalf:y("star-half",60250),symbolClass:y("symbol-class",60251),symbolColor:y("symbol-color",60252),symbolConstant:y("symbol-constant",60253),symbolEnumMember:y("symbol-enum-member",60254),symbolField:y("symbol-field",60255),symbolFile:y("symbol-file",60256),symbolInterface:y("symbol-interface",60257),symbolKeyword:y("symbol-keyword",60258),symbolMisc:y("symbol-misc",60259),symbolOperator:y("symbol-operator",60260),symbolProperty:y("symbol-property",60261),wrench:y("wrench",60261),wrenchSubaction:y("wrench-subaction",60261),symbolSnippet:y("symbol-snippet",60262),tasklist:y("tasklist",60263),telescope:y("telescope",60264),textSize:y("text-size",60265),threeBars:y("three-bars",60266),thumbsdown:y("thumbsdown",60267),thumbsup:y("thumbsup",60268),tools:y("tools",60269),triangleDown:y("triangle-down",60270),triangleLeft:y("triangle-left",60271),triangleRight:y("triangle-right",60272),triangleUp:y("triangle-up",60273),twitter:y("twitter",60274),unfold:y("unfold",60275),unlock:y("unlock",60276),unmute:y("unmute",60277),unverified:y("unverified",60278),verified:y("verified",60279),versions:y("versions",60280),vmActive:y("vm-active",60281),vmOutline:y("vm-outline",60282),vmRunning:y("vm-running",60283),watch:y("watch",60284),whitespace:y("whitespace",60285),wholeWord:y("whole-word",60286),window:y("window",60287),wordWrap:y("word-wrap",60288),zoomIn:y("zoom-in",60289),zoomOut:y("zoom-out",60290),listFilter:y("list-filter",60291),listFlat:y("list-flat",60292),listSelection:y("list-selection",60293),selection:y("selection",60293),listTree:y("list-tree",60294),debugBreakpointFunctionUnverified:y("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:y("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:y("debug-breakpoint-function-disabled",60296),debugStackframeActive:y("debug-stackframe-active",60297),circleSmallFilled:y("circle-small-filled",60298),debugStackframeDot:y("debug-stackframe-dot",60298),terminalDecorationMark:y("terminal-decoration-mark",60298),debugStackframe:y("debug-stackframe",60299),debugStackframeFocused:y("debug-stackframe-focused",60299),debugBreakpointUnsupported:y("debug-breakpoint-unsupported",60300),symbolString:y("symbol-string",60301),debugReverseContinue:y("debug-reverse-continue",60302),debugStepBack:y("debug-step-back",60303),debugRestartFrame:y("debug-restart-frame",60304),debugAlt:y("debug-alt",60305),callIncoming:y("call-incoming",60306),callOutgoing:y("call-outgoing",60307),menu:y("menu",60308),expandAll:y("expand-all",60309),feedback:y("feedback",60310),gitPullRequestReviewer:y("git-pull-request-reviewer",60310),groupByRefType:y("group-by-ref-type",60311),ungroupByRefType:y("ungroup-by-ref-type",60312),account:y("account",60313),gitPullRequestAssignee:y("git-pull-request-assignee",60313),bellDot:y("bell-dot",60314),debugConsole:y("debug-console",60315),library:y("library",60316),output:y("output",60317),runAll:y("run-all",60318),syncIgnored:y("sync-ignored",60319),pinned:y("pinned",60320),githubInverted:y("github-inverted",60321),serverProcess:y("server-process",60322),serverEnvironment:y("server-environment",60323),pass:y("pass",60324),issueClosed:y("issue-closed",60324),stopCircle:y("stop-circle",60325),playCircle:y("play-circle",60326),record:y("record",60327),debugAltSmall:y("debug-alt-small",60328),vmConnect:y("vm-connect",60329),cloud:y("cloud",60330),merge:y("merge",60331),export:y("export",60332),graphLeft:y("graph-left",60333),magnet:y("magnet",60334),notebook:y("notebook",60335),redo:y("redo",60336),checkAll:y("check-all",60337),pinnedDirty:y("pinned-dirty",60338),passFilled:y("pass-filled",60339),circleLargeFilled:y("circle-large-filled",60340),circleLarge:y("circle-large",60341),circleLargeOutline:y("circle-large-outline",60341),combine:y("combine",60342),gather:y("gather",60342),table:y("table",60343),variableGroup:y("variable-group",60344),typeHierarchy:y("type-hierarchy",60345),typeHierarchySub:y("type-hierarchy-sub",60346),typeHierarchySuper:y("type-hierarchy-super",60347),gitPullRequestCreate:y("git-pull-request-create",60348),runAbove:y("run-above",60349),runBelow:y("run-below",60350),notebookTemplate:y("notebook-template",60351),debugRerun:y("debug-rerun",60352),workspaceTrusted:y("workspace-trusted",60353),workspaceUntrusted:y("workspace-untrusted",60354),workspaceUnknown:y("workspace-unknown",60355),terminalCmd:y("terminal-cmd",60356),terminalDebian:y("terminal-debian",60357),terminalLinux:y("terminal-linux",60358),terminalPowershell:y("terminal-powershell",60359),terminalTmux:y("terminal-tmux",60360),terminalUbuntu:y("terminal-ubuntu",60361),terminalBash:y("terminal-bash",60362),arrowSwap:y("arrow-swap",60363),copy:y("copy",60364),personAdd:y("person-add",60365),filterFilled:y("filter-filled",60366),wand:y("wand",60367),debugLineByLine:y("debug-line-by-line",60368),inspect:y("inspect",60369),layers:y("layers",60370),layersDot:y("layers-dot",60371),layersActive:y("layers-active",60372),compass:y("compass",60373),compassDot:y("compass-dot",60374),compassActive:y("compass-active",60375),azure:y("azure",60376),issueDraft:y("issue-draft",60377),gitPullRequestClosed:y("git-pull-request-closed",60378),gitPullRequestDraft:y("git-pull-request-draft",60379),debugAll:y("debug-all",60380),debugCoverage:y("debug-coverage",60381),runErrors:y("run-errors",60382),folderLibrary:y("folder-library",60383),debugContinueSmall:y("debug-continue-small",60384),beakerStop:y("beaker-stop",60385),graphLine:y("graph-line",60386),graphScatter:y("graph-scatter",60387),pieChart:y("pie-chart",60388),bracket:y("bracket",60175),bracketDot:y("bracket-dot",60389),bracketError:y("bracket-error",60390),lockSmall:y("lock-small",60391),azureDevops:y("azure-devops",60392),verifiedFilled:y("verified-filled",60393),newline:y("newline",60394),layout:y("layout",60395),layoutActivitybarLeft:y("layout-activitybar-left",60396),layoutActivitybarRight:y("layout-activitybar-right",60397),layoutPanelLeft:y("layout-panel-left",60398),layoutPanelCenter:y("layout-panel-center",60399),layoutPanelJustify:y("layout-panel-justify",60400),layoutPanelRight:y("layout-panel-right",60401),layoutPanel:y("layout-panel",60402),layoutSidebarLeft:y("layout-sidebar-left",60403),layoutSidebarRight:y("layout-sidebar-right",60404),layoutStatusbar:y("layout-statusbar",60405),layoutMenubar:y("layout-menubar",60406),layoutCentered:y("layout-centered",60407),target:y("target",60408),indent:y("indent",60409),recordSmall:y("record-small",60410),errorSmall:y("error-small",60411),terminalDecorationError:y("terminal-decoration-error",60411),arrowCircleDown:y("arrow-circle-down",60412),arrowCircleLeft:y("arrow-circle-left",60413),arrowCircleRight:y("arrow-circle-right",60414),arrowCircleUp:y("arrow-circle-up",60415),layoutSidebarRightOff:y("layout-sidebar-right-off",60416),layoutPanelOff:y("layout-panel-off",60417),layoutSidebarLeftOff:y("layout-sidebar-left-off",60418),blank:y("blank",60419),heartFilled:y("heart-filled",60420),map:y("map",60421),mapHorizontal:y("map-horizontal",60421),foldHorizontal:y("fold-horizontal",60421),mapFilled:y("map-filled",60422),mapHorizontalFilled:y("map-horizontal-filled",60422),foldHorizontalFilled:y("fold-horizontal-filled",60422),circleSmall:y("circle-small",60423),bellSlash:y("bell-slash",60424),bellSlashDot:y("bell-slash-dot",60425),commentUnresolved:y("comment-unresolved",60426),gitPullRequestGoToChanges:y("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:y("git-pull-request-new-changes",60428),searchFuzzy:y("search-fuzzy",60429),commentDraft:y("comment-draft",60430),send:y("send",60431),sparkle:y("sparkle",60432),insert:y("insert",60433),mic:y("mic",60434),thumbsdownFilled:y("thumbsdown-filled",60435),thumbsupFilled:y("thumbsup-filled",60436),coffee:y("coffee",60437),snake:y("snake",60438),game:y("game",60439),vr:y("vr",60440),chip:y("chip",60441),piano:y("piano",60442),music:y("music",60443),micFilled:y("mic-filled",60444),repoFetch:y("repo-fetch",60445),copilot:y("copilot",60446),lightbulbSparkle:y("lightbulb-sparkle",60447),robot:y("robot",60448),sparkleFilled:y("sparkle-filled",60449),diffSingle:y("diff-single",60450),diffMultiple:y("diff-multiple",60451),surroundWith:y("surround-with",60452),share:y("share",60453),gitStash:y("git-stash",60454),gitStashApply:y("git-stash-apply",60455),gitStashPop:y("git-stash-pop",60456),vscode:y("vscode",60457),vscodeInsiders:y("vscode-insiders",60458),codeOss:y("code-oss",60459),runCoverage:y("run-coverage",60460),runAllCoverage:y("run-all-coverage",60461),coverage:y("coverage",60462),githubProject:y("github-project",60463),mapVertical:y("map-vertical",60464),foldVertical:y("fold-vertical",60464),mapVerticalFilled:y("map-vertical-filled",60465),foldVerticalFilled:y("fold-vertical-filled",60465),goToSearch:y("go-to-search",60466),percentage:y("percentage",60467),sortPercentage:y("sort-percentage",60467),attach:y("attach",60468)};var mde=Object.defineProperty,_de=(i,e)=>mde(i,"name",{value:e,configurable:!0});function bde(){return Object.values(ee)}_de(bde,"getAllCodicons");const vde={dialogError:y("dialog-error","error"),dialogWarning:y("dialog-warning","warning"),dialogInfo:y("dialog-info","info"),dialogClose:y("dialog-close","close"),treeItemExpanded:y("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:y("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:y("tree-filter-on-type-off","list-selection"),treeFilterClear:y("tree-filter-clear","close"),treeItemLoading:y("tree-item-loading","loading"),menuSelection:y("menu-selection","check"),menuSubmenu:y("menu-submenu","chevron-right"),menuBarMore:y("menubar-more","more"),scrollbarButtonLeft:y("scrollbar-button-left","triangle-left"),scrollbarButtonRight:y("scrollbar-button-right","triangle-right"),scrollbarButtonUp:y("scrollbar-button-up","triangle-up"),scrollbarButtonDown:y("scrollbar-button-down","triangle-down"),toolBarMore:y("toolbar-more","more"),quickInputBack:y("quick-input-back","arrow-left"),dropDownButton:y("drop-down-button",60084),symbolCustomColor:y("symbol-customcolor",60252),exportIcon:y("export",60332),workspaceUnspecified:y("workspace-unspecified",60355),newLine:y("newline",60394),thumbsDownFilled:y("thumbsdown-filled",60435),thumbsUpFilled:y("thumbsup-filled",60436),gitFetch:y("git-fetch",60445),lightbulbSparkleAutofix:y("lightbulb-sparkle-autofix",60447),debugBreakpointPending:y("debug-breakpoint-pending",60377)},ee={...pde,...vde};var A=(i=>(i[i.Null=0]="Null",i[i.Backspace=8]="Backspace",i[i.Tab=9]="Tab",i[i.LineFeed=10]="LineFeed",i[i.CarriageReturn=13]="CarriageReturn",i[i.Space=32]="Space",i[i.ExclamationMark=33]="ExclamationMark",i[i.DoubleQuote=34]="DoubleQuote",i[i.Hash=35]="Hash",i[i.DollarSign=36]="DollarSign",i[i.PercentSign=37]="PercentSign",i[i.Ampersand=38]="Ampersand",i[i.SingleQuote=39]="SingleQuote",i[i.OpenParen=40]="OpenParen",i[i.CloseParen=41]="CloseParen",i[i.Asterisk=42]="Asterisk",i[i.Plus=43]="Plus",i[i.Comma=44]="Comma",i[i.Dash=45]="Dash",i[i.Period=46]="Period",i[i.Slash=47]="Slash",i[i.Digit0=48]="Digit0",i[i.Digit1=49]="Digit1",i[i.Digit2=50]="Digit2",i[i.Digit3=51]="Digit3",i[i.Digit4=52]="Digit4",i[i.Digit5=53]="Digit5",i[i.Digit6=54]="Digit6",i[i.Digit7=55]="Digit7",i[i.Digit8=56]="Digit8",i[i.Digit9=57]="Digit9",i[i.Colon=58]="Colon",i[i.Semicolon=59]="Semicolon",i[i.LessThan=60]="LessThan",i[i.Equals=61]="Equals",i[i.GreaterThan=62]="GreaterThan",i[i.QuestionMark=63]="QuestionMark",i[i.AtSign=64]="AtSign",i[i.A=65]="A",i[i.B=66]="B",i[i.C=67]="C",i[i.D=68]="D",i[i.E=69]="E",i[i.F=70]="F",i[i.G=71]="G",i[i.H=72]="H",i[i.I=73]="I",i[i.J=74]="J",i[i.K=75]="K",i[i.L=76]="L",i[i.M=77]="M",i[i.N=78]="N",i[i.O=79]="O",i[i.P=80]="P",i[i.Q=81]="Q",i[i.R=82]="R",i[i.S=83]="S",i[i.T=84]="T",i[i.U=85]="U",i[i.V=86]="V",i[i.W=87]="W",i[i.X=88]="X",i[i.Y=89]="Y",i[i.Z=90]="Z",i[i.OpenSquareBracket=91]="OpenSquareBracket",i[i.Backslash=92]="Backslash",i[i.CloseSquareBracket=93]="CloseSquareBracket",i[i.Caret=94]="Caret",i[i.Underline=95]="Underline",i[i.BackTick=96]="BackTick",i[i.a=97]="a",i[i.b=98]="b",i[i.c=99]="c",i[i.d=100]="d",i[i.e=101]="e",i[i.f=102]="f",i[i.g=103]="g",i[i.h=104]="h",i[i.i=105]="i",i[i.j=106]="j",i[i.k=107]="k",i[i.l=108]="l",i[i.m=109]="m",i[i.n=110]="n",i[i.o=111]="o",i[i.p=112]="p",i[i.q=113]="q",i[i.r=114]="r",i[i.s=115]="s",i[i.t=116]="t",i[i.u=117]="u",i[i.v=118]="v",i[i.w=119]="w",i[i.x=120]="x",i[i.y=121]="y",i[i.z=122]="z",i[i.OpenCurlyBrace=123]="OpenCurlyBrace",i[i.Pipe=124]="Pipe",i[i.CloseCurlyBrace=125]="CloseCurlyBrace",i[i.Tilde=126]="Tilde",i[i.NoBreakSpace=160]="NoBreakSpace",i[i.U_Combining_Grave_Accent=768]="U_Combining_Grave_Accent",i[i.U_Combining_Acute_Accent=769]="U_Combining_Acute_Accent",i[i.U_Combining_Circumflex_Accent=770]="U_Combining_Circumflex_Accent",i[i.U_Combining_Tilde=771]="U_Combining_Tilde",i[i.U_Combining_Macron=772]="U_Combining_Macron",i[i.U_Combining_Overline=773]="U_Combining_Overline",i[i.U_Combining_Breve=774]="U_Combining_Breve",i[i.U_Combining_Dot_Above=775]="U_Combining_Dot_Above",i[i.U_Combining_Diaeresis=776]="U_Combining_Diaeresis",i[i.U_Combining_Hook_Above=777]="U_Combining_Hook_Above",i[i.U_Combining_Ring_Above=778]="U_Combining_Ring_Above",i[i.U_Combining_Double_Acute_Accent=779]="U_Combining_Double_Acute_Accent",i[i.U_Combining_Caron=780]="U_Combining_Caron",i[i.U_Combining_Vertical_Line_Above=781]="U_Combining_Vertical_Line_Above",i[i.U_Combining_Double_Vertical_Line_Above=782]="U_Combining_Double_Vertical_Line_Above",i[i.U_Combining_Double_Grave_Accent=783]="U_Combining_Double_Grave_Accent",i[i.U_Combining_Candrabindu=784]="U_Combining_Candrabindu",i[i.U_Combining_Inverted_Breve=785]="U_Combining_Inverted_Breve",i[i.U_Combining_Turned_Comma_Above=786]="U_Combining_Turned_Comma_Above",i[i.U_Combining_Comma_Above=787]="U_Combining_Comma_Above",i[i.U_Combining_Reversed_Comma_Above=788]="U_Combining_Reversed_Comma_Above",i[i.U_Combining_Comma_Above_Right=789]="U_Combining_Comma_Above_Right",i[i.U_Combining_Grave_Accent_Below=790]="U_Combining_Grave_Accent_Below",i[i.U_Combining_Acute_Accent_Below=791]="U_Combining_Acute_Accent_Below",i[i.U_Combining_Left_Tack_Below=792]="U_Combining_Left_Tack_Below",i[i.U_Combining_Right_Tack_Below=793]="U_Combining_Right_Tack_Below",i[i.U_Combining_Left_Angle_Above=794]="U_Combining_Left_Angle_Above",i[i.U_Combining_Horn=795]="U_Combining_Horn",i[i.U_Combining_Left_Half_Ring_Below=796]="U_Combining_Left_Half_Ring_Below",i[i.U_Combining_Up_Tack_Below=797]="U_Combining_Up_Tack_Below",i[i.U_Combining_Down_Tack_Below=798]="U_Combining_Down_Tack_Below",i[i.U_Combining_Plus_Sign_Below=799]="U_Combining_Plus_Sign_Below",i[i.U_Combining_Minus_Sign_Below=800]="U_Combining_Minus_Sign_Below",i[i.U_Combining_Palatalized_Hook_Below=801]="U_Combining_Palatalized_Hook_Below",i[i.U_Combining_Retroflex_Hook_Below=802]="U_Combining_Retroflex_Hook_Below",i[i.U_Combining_Dot_Below=803]="U_Combining_Dot_Below",i[i.U_Combining_Diaeresis_Below=804]="U_Combining_Diaeresis_Below",i[i.U_Combining_Ring_Below=805]="U_Combining_Ring_Below",i[i.U_Combining_Comma_Below=806]="U_Combining_Comma_Below",i[i.U_Combining_Cedilla=807]="U_Combining_Cedilla",i[i.U_Combining_Ogonek=808]="U_Combining_Ogonek",i[i.U_Combining_Vertical_Line_Below=809]="U_Combining_Vertical_Line_Below",i[i.U_Combining_Bridge_Below=810]="U_Combining_Bridge_Below",i[i.U_Combining_Inverted_Double_Arch_Below=811]="U_Combining_Inverted_Double_Arch_Below",i[i.U_Combining_Caron_Below=812]="U_Combining_Caron_Below",i[i.U_Combining_Circumflex_Accent_Below=813]="U_Combining_Circumflex_Accent_Below",i[i.U_Combining_Breve_Below=814]="U_Combining_Breve_Below",i[i.U_Combining_Inverted_Breve_Below=815]="U_Combining_Inverted_Breve_Below",i[i.U_Combining_Tilde_Below=816]="U_Combining_Tilde_Below",i[i.U_Combining_Macron_Below=817]="U_Combining_Macron_Below",i[i.U_Combining_Low_Line=818]="U_Combining_Low_Line",i[i.U_Combining_Double_Low_Line=819]="U_Combining_Double_Low_Line",i[i.U_Combining_Tilde_Overlay=820]="U_Combining_Tilde_Overlay",i[i.U_Combining_Short_Stroke_Overlay=821]="U_Combining_Short_Stroke_Overlay",i[i.U_Combining_Long_Stroke_Overlay=822]="U_Combining_Long_Stroke_Overlay",i[i.U_Combining_Short_Solidus_Overlay=823]="U_Combining_Short_Solidus_Overlay",i[i.U_Combining_Long_Solidus_Overlay=824]="U_Combining_Long_Solidus_Overlay",i[i.U_Combining_Right_Half_Ring_Below=825]="U_Combining_Right_Half_Ring_Below",i[i.U_Combining_Inverted_Bridge_Below=826]="U_Combining_Inverted_Bridge_Below",i[i.U_Combining_Square_Below=827]="U_Combining_Square_Below",i[i.U_Combining_Seagull_Below=828]="U_Combining_Seagull_Below",i[i.U_Combining_X_Above=829]="U_Combining_X_Above",i[i.U_Combining_Vertical_Tilde=830]="U_Combining_Vertical_Tilde",i[i.U_Combining_Double_Overline=831]="U_Combining_Double_Overline",i[i.U_Combining_Grave_Tone_Mark=832]="U_Combining_Grave_Tone_Mark",i[i.U_Combining_Acute_Tone_Mark=833]="U_Combining_Acute_Tone_Mark",i[i.U_Combining_Greek_Perispomeni=834]="U_Combining_Greek_Perispomeni",i[i.U_Combining_Greek_Koronis=835]="U_Combining_Greek_Koronis",i[i.U_Combining_Greek_Dialytika_Tonos=836]="U_Combining_Greek_Dialytika_Tonos",i[i.U_Combining_Greek_Ypogegrammeni=837]="U_Combining_Greek_Ypogegrammeni",i[i.U_Combining_Bridge_Above=838]="U_Combining_Bridge_Above",i[i.U_Combining_Equals_Sign_Below=839]="U_Combining_Equals_Sign_Below",i[i.U_Combining_Double_Vertical_Line_Below=840]="U_Combining_Double_Vertical_Line_Below",i[i.U_Combining_Left_Angle_Below=841]="U_Combining_Left_Angle_Below",i[i.U_Combining_Not_Tilde_Above=842]="U_Combining_Not_Tilde_Above",i[i.U_Combining_Homothetic_Above=843]="U_Combining_Homothetic_Above",i[i.U_Combining_Almost_Equal_To_Above=844]="U_Combining_Almost_Equal_To_Above",i[i.U_Combining_Left_Right_Arrow_Below=845]="U_Combining_Left_Right_Arrow_Below",i[i.U_Combining_Upwards_Arrow_Below=846]="U_Combining_Upwards_Arrow_Below",i[i.U_Combining_Grapheme_Joiner=847]="U_Combining_Grapheme_Joiner",i[i.U_Combining_Right_Arrowhead_Above=848]="U_Combining_Right_Arrowhead_Above",i[i.U_Combining_Left_Half_Ring_Above=849]="U_Combining_Left_Half_Ring_Above",i[i.U_Combining_Fermata=850]="U_Combining_Fermata",i[i.U_Combining_X_Below=851]="U_Combining_X_Below",i[i.U_Combining_Left_Arrowhead_Below=852]="U_Combining_Left_Arrowhead_Below",i[i.U_Combining_Right_Arrowhead_Below=853]="U_Combining_Right_Arrowhead_Below",i[i.U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below=854]="U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below",i[i.U_Combining_Right_Half_Ring_Above=855]="U_Combining_Right_Half_Ring_Above",i[i.U_Combining_Dot_Above_Right=856]="U_Combining_Dot_Above_Right",i[i.U_Combining_Asterisk_Below=857]="U_Combining_Asterisk_Below",i[i.U_Combining_Double_Ring_Below=858]="U_Combining_Double_Ring_Below",i[i.U_Combining_Zigzag_Above=859]="U_Combining_Zigzag_Above",i[i.U_Combining_Double_Breve_Below=860]="U_Combining_Double_Breve_Below",i[i.U_Combining_Double_Breve=861]="U_Combining_Double_Breve",i[i.U_Combining_Double_Macron=862]="U_Combining_Double_Macron",i[i.U_Combining_Double_Macron_Below=863]="U_Combining_Double_Macron_Below",i[i.U_Combining_Double_Tilde=864]="U_Combining_Double_Tilde",i[i.U_Combining_Double_Inverted_Breve=865]="U_Combining_Double_Inverted_Breve",i[i.U_Combining_Double_Rightwards_Arrow_Below=866]="U_Combining_Double_Rightwards_Arrow_Below",i[i.U_Combining_Latin_Small_Letter_A=867]="U_Combining_Latin_Small_Letter_A",i[i.U_Combining_Latin_Small_Letter_E=868]="U_Combining_Latin_Small_Letter_E",i[i.U_Combining_Latin_Small_Letter_I=869]="U_Combining_Latin_Small_Letter_I",i[i.U_Combining_Latin_Small_Letter_O=870]="U_Combining_Latin_Small_Letter_O",i[i.U_Combining_Latin_Small_Letter_U=871]="U_Combining_Latin_Small_Letter_U",i[i.U_Combining_Latin_Small_Letter_C=872]="U_Combining_Latin_Small_Letter_C",i[i.U_Combining_Latin_Small_Letter_D=873]="U_Combining_Latin_Small_Letter_D",i[i.U_Combining_Latin_Small_Letter_H=874]="U_Combining_Latin_Small_Letter_H",i[i.U_Combining_Latin_Small_Letter_M=875]="U_Combining_Latin_Small_Letter_M",i[i.U_Combining_Latin_Small_Letter_R=876]="U_Combining_Latin_Small_Letter_R",i[i.U_Combining_Latin_Small_Letter_T=877]="U_Combining_Latin_Small_Letter_T",i[i.U_Combining_Latin_Small_Letter_V=878]="U_Combining_Latin_Small_Letter_V",i[i.U_Combining_Latin_Small_Letter_X=879]="U_Combining_Latin_Small_Letter_X",i[i.LINE_SEPARATOR=8232]="LINE_SEPARATOR",i[i.PARAGRAPH_SEPARATOR=8233]="PARAGRAPH_SEPARATOR",i[i.NEXT_LINE=133]="NEXT_LINE",i[i.U_CIRCUMFLEX=94]="U_CIRCUMFLEX",i[i.U_GRAVE_ACCENT=96]="U_GRAVE_ACCENT",i[i.U_DIAERESIS=168]="U_DIAERESIS",i[i.U_MACRON=175]="U_MACRON",i[i.U_ACUTE_ACCENT=180]="U_ACUTE_ACCENT",i[i.U_CEDILLA=184]="U_CEDILLA",i[i.U_MODIFIER_LETTER_LEFT_ARROWHEAD=706]="U_MODIFIER_LETTER_LEFT_ARROWHEAD",i[i.U_MODIFIER_LETTER_RIGHT_ARROWHEAD=707]="U_MODIFIER_LETTER_RIGHT_ARROWHEAD",i[i.U_MODIFIER_LETTER_UP_ARROWHEAD=708]="U_MODIFIER_LETTER_UP_ARROWHEAD",i[i.U_MODIFIER_LETTER_DOWN_ARROWHEAD=709]="U_MODIFIER_LETTER_DOWN_ARROWHEAD",i[i.U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING=722]="U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING",i[i.U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING=723]="U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING",i[i.U_MODIFIER_LETTER_UP_TACK=724]="U_MODIFIER_LETTER_UP_TACK",i[i.U_MODIFIER_LETTER_DOWN_TACK=725]="U_MODIFIER_LETTER_DOWN_TACK",i[i.U_MODIFIER_LETTER_PLUS_SIGN=726]="U_MODIFIER_LETTER_PLUS_SIGN",i[i.U_MODIFIER_LETTER_MINUS_SIGN=727]="U_MODIFIER_LETTER_MINUS_SIGN",i[i.U_BREVE=728]="U_BREVE",i[i.U_DOT_ABOVE=729]="U_DOT_ABOVE",i[i.U_RING_ABOVE=730]="U_RING_ABOVE",i[i.U_OGONEK=731]="U_OGONEK",i[i.U_SMALL_TILDE=732]="U_SMALL_TILDE",i[i.U_DOUBLE_ACUTE_ACCENT=733]="U_DOUBLE_ACUTE_ACCENT",i[i.U_MODIFIER_LETTER_RHOTIC_HOOK=734]="U_MODIFIER_LETTER_RHOTIC_HOOK",i[i.U_MODIFIER_LETTER_CROSS_ACCENT=735]="U_MODIFIER_LETTER_CROSS_ACCENT",i[i.U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR=741]="U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR",i[i.U_MODIFIER_LETTER_HIGH_TONE_BAR=742]="U_MODIFIER_LETTER_HIGH_TONE_BAR",i[i.U_MODIFIER_LETTER_MID_TONE_BAR=743]="U_MODIFIER_LETTER_MID_TONE_BAR",i[i.U_MODIFIER_LETTER_LOW_TONE_BAR=744]="U_MODIFIER_LETTER_LOW_TONE_BAR",i[i.U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR=745]="U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR",i[i.U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK=746]="U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK",i[i.U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK=747]="U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK",i[i.U_MODIFIER_LETTER_UNASPIRATED=749]="U_MODIFIER_LETTER_UNASPIRATED",i[i.U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD=751]="U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD",i[i.U_MODIFIER_LETTER_LOW_UP_ARROWHEAD=752]="U_MODIFIER_LETTER_LOW_UP_ARROWHEAD",i[i.U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD=753]="U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD",i[i.U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD=754]="U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD",i[i.U_MODIFIER_LETTER_LOW_RING=755]="U_MODIFIER_LETTER_LOW_RING",i[i.U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT=756]="U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT",i[i.U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT=757]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT",i[i.U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT=758]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT",i[i.U_MODIFIER_LETTER_LOW_TILDE=759]="U_MODIFIER_LETTER_LOW_TILDE",i[i.U_MODIFIER_LETTER_RAISED_COLON=760]="U_MODIFIER_LETTER_RAISED_COLON",i[i.U_MODIFIER_LETTER_BEGIN_HIGH_TONE=761]="U_MODIFIER_LETTER_BEGIN_HIGH_TONE",i[i.U_MODIFIER_LETTER_END_HIGH_TONE=762]="U_MODIFIER_LETTER_END_HIGH_TONE",i[i.U_MODIFIER_LETTER_BEGIN_LOW_TONE=763]="U_MODIFIER_LETTER_BEGIN_LOW_TONE",i[i.U_MODIFIER_LETTER_END_LOW_TONE=764]="U_MODIFIER_LETTER_END_LOW_TONE",i[i.U_MODIFIER_LETTER_SHELF=765]="U_MODIFIER_LETTER_SHELF",i[i.U_MODIFIER_LETTER_OPEN_SHELF=766]="U_MODIFIER_LETTER_OPEN_SHELF",i[i.U_MODIFIER_LETTER_LOW_LEFT_ARROW=767]="U_MODIFIER_LETTER_LOW_LEFT_ARROW",i[i.U_GREEK_LOWER_NUMERAL_SIGN=885]="U_GREEK_LOWER_NUMERAL_SIGN",i[i.U_GREEK_TONOS=900]="U_GREEK_TONOS",i[i.U_GREEK_DIALYTIKA_TONOS=901]="U_GREEK_DIALYTIKA_TONOS",i[i.U_GREEK_KORONIS=8125]="U_GREEK_KORONIS",i[i.U_GREEK_PSILI=8127]="U_GREEK_PSILI",i[i.U_GREEK_PERISPOMENI=8128]="U_GREEK_PERISPOMENI",i[i.U_GREEK_DIALYTIKA_AND_PERISPOMENI=8129]="U_GREEK_DIALYTIKA_AND_PERISPOMENI",i[i.U_GREEK_PSILI_AND_VARIA=8141]="U_GREEK_PSILI_AND_VARIA",i[i.U_GREEK_PSILI_AND_OXIA=8142]="U_GREEK_PSILI_AND_OXIA",i[i.U_GREEK_PSILI_AND_PERISPOMENI=8143]="U_GREEK_PSILI_AND_PERISPOMENI",i[i.U_GREEK_DASIA_AND_VARIA=8157]="U_GREEK_DASIA_AND_VARIA",i[i.U_GREEK_DASIA_AND_OXIA=8158]="U_GREEK_DASIA_AND_OXIA",i[i.U_GREEK_DASIA_AND_PERISPOMENI=8159]="U_GREEK_DASIA_AND_PERISPOMENI",i[i.U_GREEK_DIALYTIKA_AND_VARIA=8173]="U_GREEK_DIALYTIKA_AND_VARIA",i[i.U_GREEK_DIALYTIKA_AND_OXIA=8174]="U_GREEK_DIALYTIKA_AND_OXIA",i[i.U_GREEK_VARIA=8175]="U_GREEK_VARIA",i[i.U_GREEK_OXIA=8189]="U_GREEK_OXIA",i[i.U_GREEK_DASIA=8190]="U_GREEK_DASIA",i[i.U_IDEOGRAPHIC_FULL_STOP=12290]="U_IDEOGRAPHIC_FULL_STOP",i[i.U_LEFT_CORNER_BRACKET=12300]="U_LEFT_CORNER_BRACKET",i[i.U_RIGHT_CORNER_BRACKET=12301]="U_RIGHT_CORNER_BRACKET",i[i.U_LEFT_BLACK_LENTICULAR_BRACKET=12304]="U_LEFT_BLACK_LENTICULAR_BRACKET",i[i.U_RIGHT_BLACK_LENTICULAR_BRACKET=12305]="U_RIGHT_BLACK_LENTICULAR_BRACKET",i[i.U_OVERLINE=8254]="U_OVERLINE",i[i.UTF8_BOM=65279]="UTF8_BOM",i[i.U_FULLWIDTH_SEMICOLON=65307]="U_FULLWIDTH_SEMICOLON",i[i.U_FULLWIDTH_COMMA=65292]="U_FULLWIDTH_COMMA",i))(A||{}),wde=Object.defineProperty,wa=(i,e)=>wde(i,"name",{value:e,configurable:!0});function Eg(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}wa(Eg,"roundFloat");class Wt{static{wa(this,"RGBA")}_rgbaBrand=void 0;r;g;b;a;constructor(e,t,n,s=1){this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=Eg(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Ed{static{wa(this,"HSLA")}_hslaBrand=void 0;h;s;l;a;constructor(e,t,n,s){this.h=Math.max(Math.min(360,e),0)|0,this.s=Eg(Math.max(Math.min(1,t),0),3),this.l=Eg(Math.max(Math.min(1,n),0),3),this.a=Eg(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,s=e.b/255,o=e.a,r=Math.max(t,n,s),a=Math.min(t,n,s);let l=0,c=0;const d=(a+r)/2,h=r-a;if(h>0){switch(c=Math.min(d<=.5?h/(2*d):h/(2-2*d),1),r){case t:l=(n-s)/h+(n<s?6:0);break;case n:l=(s-t)/h+2;break;case s:l=(t-n)/h+4;break}l*=60,l=Math.round(l)}return new Ed(l,c,d,o)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:s,a:o}=e;let r,a,l;if(n===0)r=a=l=s;else{const c=s<.5?s*(1+n):s+n-s*n,d=2*s-c;r=Ed._hue2rgb(d,c,t+1/3),a=Ed._hue2rgb(d,c,t),l=Ed._hue2rgb(d,c,t-1/3)}return new Wt(Math.round(r*255),Math.round(a*255),Math.round(l*255),o)}}class cw{static{wa(this,"HSVA")}_hsvaBrand=void 0;h;s;v;a;constructor(e,t,n,s){this.h=Math.max(Math.min(360,e),0)|0,this.s=Eg(Math.max(Math.min(1,t),0),3),this.v=Eg(Math.max(Math.min(1,n),0),3),this.a=Eg(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,s=e.b/255,o=Math.max(t,n,s),r=Math.min(t,n,s),a=o-r,l=o===0?0:a/o;let c;return a===0?c=0:o===t?c=((n-s)/a%6+6)%6:o===n?c=(s-t)/a+2:c=(t-n)/a+4,new cw(Math.round(c*60),l,o,e.a)}static toRGBA(e){const{h:t,s:n,v:s,a:o}=e,r=s*n,a=r*(1-Math.abs(t/60%2-1)),l=s-r;let[c,d,h]=[0,0,0];return t<60?(c=r,d=a):t<120?(c=a,d=r):t<180?(d=r,h=a):t<240?(d=a,h=r):t<300?(c=a,h=r):t<=360&&(c=r,h=a),c=Math.round((c+l)*255),d=Math.round((d+l)*255),h=Math.round((h+l)*255),new Wt(c,d,h,o)}}class U{static{wa(this,"Color")}static fromHex(e){return U.Format.CSS.parseHex(e)||U.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}rgba;_hsla;get hsla(){return this._hsla?this._hsla:Ed.fromRGBA(this.rgba)}_hsva;get hsva(){return this._hsva?this._hsva:cw.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof Wt)this.rgba=e;else if(e instanceof Ed)this._hsla=e,this.rgba=Ed.toRGBA(e);else if(e instanceof cw)this._hsva=e,this.rgba=cw.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&Wt.equals(this.rgba,e.rgba)&&Ed.equals(this.hsla,e.hsla)&&cw.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=U._relativeLuminanceForComponent(this.rgba.r),t=U._relativeLuminanceForComponent(this.rgba.g),n=U._relativeLuminanceForComponent(this.rgba.b),s=.2126*e+.7152*t+.0722*n;return Eg(s,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}getContrastRatio(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)}isDarker(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3<128}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new U(new Ed(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new U(new Ed(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:s,a:o}=this.rgba;return new U(new Wt(t,n,s,o*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new U(new Wt(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(e){const t=e.rgba,n=this.rgba.a,s=t.a,o=n+s*(1-n);if(o<1e-6)return U.transparent;const r=this.rgba.r*n/o+t.r*s*(1-n)/o,a=this.rgba.g*n/o+t.g*s*(1-n)/o,l=this.rgba.b*n/o+t.b*s*(1-n)/o;return new U(new Wt(r,a,l,o))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:n,b:s,a:o}=this.rgba;return new U(new Wt(e.rgba.r-o*(e.rgba.r-t),e.rgba.g-o*(e.rgba.g-n),e.rgba.b-o*(e.rgba.b-s),1))}flatten(...e){const t=e.reduceRight((n,s)=>U._flatten(s,n));return U._flatten(this,t)}static _flatten(e,t){const n=1-e.rgba.a;return new U(new Wt(n*t.rgba.r+e.rgba.a*e.rgba.r,n*t.rgba.g+e.rgba.a*e.rgba.g,n*t.rgba.b+e.rgba.a*e.rgba.b))}_toString;toString(){return this._toString||(this._toString=U.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const s=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(o-s)/o,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const s=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(s-o)/s,e.darken(n)}static white=new U(new Wt(255,255,255,1));static black=new U(new Wt(0,0,0,1));static red=new U(new Wt(255,0,0,1));static blue=new U(new Wt(0,0,255,1));static green=new U(new Wt(0,255,0,1));static cyan=new U(new Wt(0,255,255,1));static lightgrey=new U(new Wt(211,211,211,1));static transparent=new U(new Wt(0,0,0,0))}(i=>{(e=>{(t=>{function n(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:i.Format.CSS.formatRGBA(f)}t.formatRGB=n,wa(n,"formatRGB");function s(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}t.formatRGBA=s,wa(s,"formatRGBA");function o(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:i.Format.CSS.formatHSLA(f)}t.formatHSL=o,wa(o,"formatHSL");function r(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}t.formatHSLA=r,wa(r,"formatHSLA");function a(f){const p=f.toString(16);return p.length!==2?"0"+p:p}wa(a,"_toTwoDigitHex");function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}t.formatHex=l,wa(l,"formatHex");function c(f,p=!1){return p&&f.rgba.a===1?i.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}t.formatHexA=c,wa(c,"formatHexA");function d(f){return f.isOpaque()?i.Format.CSS.formatHex(f):i.Format.CSS.formatRGBA(f)}t.format=d,wa(d,"format");function h(f){const p=f.length;if(p===0||f.charCodeAt(0)!==A.Hash)return null;if(p===7){const m=16*u(f.charCodeAt(1))+u(f.charCodeAt(2)),_=16*u(f.charCodeAt(3))+u(f.charCodeAt(4)),w=16*u(f.charCodeAt(5))+u(f.charCodeAt(6));return new i(new Wt(m,_,w,1))}if(p===9){const m=16*u(f.charCodeAt(1))+u(f.charCodeAt(2)),_=16*u(f.charCodeAt(3))+u(f.charCodeAt(4)),w=16*u(f.charCodeAt(5))+u(f.charCodeAt(6)),v=16*u(f.charCodeAt(7))+u(f.charCodeAt(8));return new i(new Wt(m,_,w,v/255))}if(p===4){const m=u(f.charCodeAt(1)),_=u(f.charCodeAt(2)),w=u(f.charCodeAt(3));return new i(new Wt(16*m+m,16*_+_,16*w+w))}if(p===5){const m=u(f.charCodeAt(1)),_=u(f.charCodeAt(2)),w=u(f.charCodeAt(3)),v=u(f.charCodeAt(4));return new i(new Wt(16*m+m,16*_+_,16*w+w,(16*v+v)/255))}return null}t.parseHex=h,wa(h,"parseHex");function u(f){switch(f){case A.Digit0:return 0;case A.Digit1:return 1;case A.Digit2:return 2;case A.Digit3:return 3;case A.Digit4:return 4;case A.Digit5:return 5;case A.Digit6:return 6;case A.Digit7:return 7;case A.Digit8:return 8;case A.Digit9:return 9;case A.a:return 10;case A.A:return 10;case A.b:return 11;case A.B:return 11;case A.c:return 12;case A.C:return 12;case A.d:return 13;case A.D:return 13;case A.e:return 14;case A.E:return 14;case A.f:return 15;case A.F:return 15}return 0}wa(u,"_parseHexDigit")})(e.CSS||(e.CSS={}))})(i.Format||(i.Format={}))})(U||(U={}));var Cde=Object.defineProperty,rc=(i,e)=>Cde(i,"name",{value:e,configurable:!0});function O0(i,e){const t=Z$(i,e);if(t!==-1)return i[t]}rc(O0,"findLast");function Z$(i,e,t=i.length-1){for(let n=t;n>=0;n--){const s=i[n];if(e(s))return n}return-1}rc(Z$,"findLastIdx");function wb(i,e){const t=Cb(i,e);return t===-1?void 0:i[t]}rc(wb,"findLastMonotonous");function Cb(i,e,t=0,n=i.length){let s=t,o=n;for(;s<o;){const r=Math.floor((s+o)/2);e(i[r])?s=r+1:o=r}return s-1}rc(Cb,"findLastIdxMonotonous");function X$(i,e){const t=BC(i,e);return t===i.length?void 0:i[t]}rc(X$,"findFirstMonotonous");function BC(i,e,t=0,n=i.length){let s=t,o=n;for(;s<o;){const r=Math.floor((s+o)/2);e(i[r])?o=r:s=r+1}return s}rc(BC,"findFirstIdxMonotonousOrArrLen");function yde(i,e,t=0,n=i.length){const s=BC(i,e,t,n);return s===i.length?-1:s}rc(yde,"findFirstIdxMonotonous");class _N{constructor(e){this._array=e}static{rc(this,"MonotonousArray")}static assertInvariants=!1;_findLastMonotonousLastIdx=0;_prevFindLastPredicate;findLastMonotonous(e){if(_N.assertInvariants){if(this._prevFindLastPredicate){for(const n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}const t=Cb(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}}function Q$(i,e){if(i.length===0)return;let t=i[0];for(let n=1;n<i.length;n++){const s=i[n];e(s,t)>0&&(t=s)}return t}rc(Q$,"findFirstMax");function J$(i,e){if(i.length===0)return;let t=i[0];for(let n=1;n<i.length;n++){const s=i[n];e(s,t)>=0&&(t=s)}return t}rc(J$,"findLastMax");function eG(i,e){return Q$(i,(t,n)=>-e(t,n))}rc(eG,"findFirstMin");function tG(i,e){if(i.length===0)return-1;let t=0;for(let n=1;n<i.length;n++){const s=i[n];e(s,i[t])>0&&(t=n)}return t}rc(tG,"findMaxIdx");function Sde(i,e){for(const t of i){const n=e(t);if(n!==void 0)return n}}rc(Sde,"mapFindFirst");var Ede=Object.defineProperty,ko=(i,e)=>Ede(i,"name",{value:e,configurable:!0});class Lde{static{ko(this,"ErrorHandler")}unexpectedErrorHandler;listeners;constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?Da.isErrorNoTelemetry(e)?new Da(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const bN=new Lde;function iG(i){bN.setUnexpectedErrorHandler(i)}ko(iG,"setUnexpectedErrorHandler");function Dde(i){if(!i||typeof i!="object")return!1;const e=i;return e.code==="EPIPE"&&e.syscall?.toUpperCase()==="WRITE"}ko(Dde,"isSigPipeError");function M0(i){bN.onUnexpectedError(i)}ko(M0,"onBugIndicatingError");function Kt(i){lf(i)||bN.onUnexpectedError(i)}ko(Kt,"onUnexpectedError");function Ide(i){lf(i)||bN.onUnexpectedExternalError(i)}ko(Ide,"onUnexpectedExternalError");function Tde(i){if(i instanceof Error){const{name:e,message:t}=i,n=i.stacktrace||i.stack;return{$isError:!0,name:e,message:t,stack:n,noTelemetry:Da.isErrorNoTelemetry(i)}}return i}ko(Tde,"transformErrorForSerialization");function Ade(i){let e;return i.noTelemetry?e=new Da:(e=new Error,e.name=i.name),e.message=i.message,e.stack=i.stack,e}ko(Ade,"transformErrorFromSerialization");const EA="Canceled";function lf(i){return i instanceof ar?!0:i instanceof Error&&i.name===EA&&i.message===EA}ko(lf,"isCancellationError");class ar extends Error{static{ko(this,"CancellationError")}constructor(){super(EA),this.name=this.message}}function xde(){const i=new Error(EA);return i.name=i.message,i}ko(xde,"canceled");function SL(i){return i?new Error(`Illegal argument: ${i}`):new Error("Illegal argument")}ko(SL,"illegalArgument");function UW(i){return i?new Error(`Illegal state: ${i}`):new Error("Illegal state")}ko(UW,"illegalState");class ize extends TypeError{static{ko(this,"ReadonlyError")}constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}}function vN(i){return i?i.message?i.message:i.stack?i.stack.split(`
`)[0]:String(i):"Error"}ko(vN,"getErrorMessage");class nze extends Error{static{ko(this,"NotImplementedError")}constructor(e){super("NotImplemented"),e&&(this.message=e)}}class kde extends Error{static{ko(this,"NotSupportedError")}constructor(e){super("NotSupported"),e&&(this.message=e)}}class sze extends Error{static{ko(this,"ExpectedError")}isExpected=!0}class Da extends Error{static{ko(this,"ErrorNoTelemetry")}name;constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof Da)return e;const t=new Da;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}class Et extends Error{static{ko(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,Et.prototype)}}var Nde=Object.defineProperty,Pde=(i,e)=>Nde(i,"name",{value:e,configurable:!0});class oze{static{Pde(this,"Sequence")}elements=[];_onDidSplice=new x;onDidSplice=this._onDidSplice.event;splice(e,t,n=[]){this.elements.splice(e,t,...n),this._onDidSplice.fire({start:e,deleteCount:t,toInsert:n})}}var Rde=Object.defineProperty,Ct=(i,e)=>Rde(i,"name",{value:e,configurable:!0});function Ur(i,e=0){return i[i.length-(1+e)]}Ct(Ur,"tail");function cs(i){if(i.length===0)throw new Error("Invalid tail call");return[i.slice(0,i.length-1),i[i.length-1]]}Ct(cs,"tail2");function ks(i,e,t=(n,s)=>n===s){if(i===e)return!0;if(!i||!e||i.length!==e.length)return!1;for(let n=0,s=i.length;n<s;n++)if(!t(i[n],e[n]))return!1;return!0}Ct(ks,"equals");function nG(i,e){const t=i.length-1;e<t&&(i[e]=i[t]),i.pop()}Ct(nG,"removeFastWithoutKeepingOrder");function sG(i,e,t){return oG(i.length,n=>t(i[n],e))}Ct(sG,"binarySearch");function oG(i,e){let t=0,n=i-1;for(;t<=n;){const s=(t+n)/2|0,o=e(s);if(o<0)t=s+1;else if(o>0)n=s-1;else return s}return-(t+1)}Ct(oG,"binarySearch2");function xM(i,e,t){if(i=i|0,i>=e.length)throw new TypeError("invalid index");const n=e[Math.floor(e.length*Math.random())],s=[],o=[],r=[];for(const a of e){const l=t(a,n);l<0?s.push(a):l>0?o.push(a):r.push(a)}return i<s.length?xM(i,s,t):i<s.length+r.length?r[0]:xM(i-(s.length+r.length),o,t)}Ct(xM,"quickSelect");function Ode(i,e){const t=[];let n;for(const s of i.slice(0).sort(e))!n||e(n[0],s)!==0?(n=[s],t.push(n)):n.push(s);return t}Ct(Ode,"groupBy");function*wN(i,e){let t,n;for(const s of i)n!==void 0&&e(n,s)?t.push(s):(t&&(yield t),t=[s]),n=s;t&&(yield t)}Ct(wN,"groupAdjacentBy");function zW(i,e){for(let t=0;t<=i.length;t++)e(t===0?void 0:i[t-1],t===i.length?void 0:i[t])}Ct(zW,"forEachAdjacent");function rG(i,e){for(let t=0;t<i.length;t++)e(t===0?void 0:i[t-1],i[t],t+1===i.length?void 0:i[t+1])}Ct(rG,"forEachWithNeighbors");function aG(i,e,t){const n=[];function s(a,l,c){if(l===0&&c.length===0)return;const d=n[n.length-1];d&&d.start+d.deleteCount===a?(d.deleteCount+=l,d.toInsert.push(...c)):n.push({start:a,deleteCount:l,toInsert:c})}Ct(s,"pushSplice");let o=0,r=0;for(;;){if(o===i.length){s(o,0,e.slice(r));break}if(r===e.length){s(o,i.length-o,[]);break}const a=i[o],l=e[r],c=t(a,l);c===0?(o+=1,r+=1):c<0?(s(o,1,[]),o+=1):c>0&&(s(o,0,[l]),r+=1)}return n}Ct(aG,"sortedDiff");function Mde(i,e,t){const n=aG(i,e,t),s=[],o=[];for(const r of n)s.push(...i.slice(r.start,r.start+r.deleteCount)),o.push(...r.toInsert);return{removed:s,added:o}}Ct(Mde,"delta");function Bde(i,e,t){if(t===0)return[];const n=i.slice(0,t).sort(e);return $W(i,e,n,t,i.length),n}Ct(Bde,"top");function Fde(i,e,t,n,s){return t===0?Promise.resolve([]):new Promise((o,r)=>{(async()=>{const a=i.length,l=i.slice(0,t).sort(e);for(let c=t,d=Math.min(t+n,a);c<a;c=d,d=Math.min(d+n,a)){if(c>t&&await new Promise(h=>setTimeout(h)),s&&s.isCancellationRequested)throw new ar;$W(i,e,l,c,d)}return l})().then(o,r)})}Ct(Fde,"topAsync");function $W(i,e,t,n,s){for(const o=t.length;n<s;n++){const r=i[n];if(e(r,t[o-1])<0){t.pop();const a=BC(t,l=>e(r,l)<0);t.splice(a,0,r)}}}Ct($W,"topStep");function To(i){return i.filter(e=>!!e)}Ct(To,"coalesce");function kM(i){let e=0;for(let t=0;t<i.length;t++)i[t]&&(i[e]=i[t],e+=1);i.length=e}Ct(kM,"coalesceInPlace");function Vde(i,e,t){i.splice(t,0,i.splice(e,1)[0])}Ct(Vde,"move");function Wde(i){return!Array.isArray(i)||i.length===0}Ct(Wde,"isFalsyOrEmpty");function B0(i){return Array.isArray(i)&&i.length>0}Ct(B0,"isNonEmptyArray");function yb(i,e=t=>t){const t=new Set;return i.filter(n=>{const s=e(n);return t.has(s)?!1:(t.add(s),!0)})}Ct(yb,"distinct");function Hde(i){const e=new Set;return t=>{const n=i(t);return e.has(n)?!1:(e.add(n),!0)}}Ct(Hde,"uniqueFilter");function lG(i,e,t=(n,s)=>n===s){let n=0;for(let s=0,o=Math.min(i.length,e.length);s<o&&t(i[s],e[s]);s++)n++;return n}Ct(lG,"commonPrefixLength");function nr(i,e){let t=typeof e=="number"?i:0;typeof e=="number"?t=i:(t=0,e=i);const n=[];if(t<=e)for(let s=t;s<e;s++)n.push(s);else for(let s=t;s>e;s--)n.push(s);return n}Ct(nr,"range");function Ude(i,e,t){return i.reduce((n,s)=>(n[e(s)]=t?t(s):s,n),Object.create(null))}Ct(Ude,"index");function CN(i,e){return i.push(e),()=>cG(i,e)}Ct(CN,"insert");function cG(i,e){const t=i.indexOf(e);if(t>-1)return i.splice(t,1),e}Ct(cG,"remove");function Py(i,e,t){const n=i.slice(0,e),s=i.slice(e);return n.concat(t,s)}Ct(Py,"arrayInsert");function NM(i,e){let t;if(typeof e=="number"){let n=e;t=Ct(()=>{const s=Math.sin(n++)*0xab1d4f5;return s-Math.floor(s)},"rand")}else t=Math.random;for(let n=i.length-1;n>0;n-=1){const s=Math.floor(t()*(n+1)),o=i[n];i[n]=i[s],i[s]=o}}Ct(NM,"shuffle");function qI(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.unshift(e))}Ct(qI,"pushToStart");function e1(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.push(e))}Ct(e1,"pushToEnd");function LA(i,e){for(const t of e)i.push(t)}Ct(LA,"pushMany");function zde(i,e){return Array.isArray(i)?i.map(e):e(i)}Ct(zde,"mapArrayOrNot");function dG(i){return Array.isArray(i)?i:[i]}Ct(dG,"asArray");function hG(i){return i[Math.floor(Math.random()*i.length)]}Ct(hG,"getRandomElement");function uG(i,e,t){const n=GW(i,e),s=i.length,o=t.length;i.length=s+o;for(let r=s-1;r>=n;r--)i[r+o]=i[r];for(let r=0;r<o;r++)i[r+n]=t[r]}Ct(uG,"insertInto");function PM(i,e,t,n){const s=GW(i,e);let o=i.splice(s,t);return o===void 0&&(o=[]),uG(i,s,n),o}Ct(PM,"splice");function GW(i,e){return e<0?Math.max(e+i.length,0):Math.min(e,i.length)}Ct(GW,"getActualStartIndex");var F0;(i=>{function e(o){return o<0}i.isLessThan=e,Ct(e,"isLessThan");function t(o){return o<=0}i.isLessThanOrEqual=t,Ct(t,"isLessThanOrEqual");function n(o){return o>0}i.isGreaterThan=n,Ct(n,"isGreaterThan");function s(o){return o===0}i.isNeitherLessOrGreaterThan=s,Ct(s,"isNeitherLessOrGreaterThan"),i.greaterThan=1,i.lessThan=-1,i.neitherLessOrGreaterThan=0})(F0||(F0={}));function zl(i,e){return(t,n)=>e(i(t),i(n))}Ct(zl,"compareBy");function gG(...i){return(e,t)=>{for(const n of i){const s=n(e,t);if(!F0.isNeitherLessOrGreaterThan(s))return s}return F0.neitherLessOrGreaterThan}}Ct(gG,"tieBreakComparators");const xp=Ct((i,e)=>i-e,"numberComparator"),$de=Ct((i,e)=>xp(i?1:0,e?1:0),"booleanComparator");function fG(i){return(e,t)=>-i(e,t)}Ct(fG,"reverseOrder");class $g{constructor(e){this.items=e}static{Ct(this,"ArrayQueue")}firstIdx=0;lastIdx=this.items.length-1;get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){const e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}class Lg{constructor(e){this.iterate=e}static{Ct(this,"CallbackIterable")}static empty=new Lg(e=>{});forEach(e){this.iterate(t=>(e(t),!0))}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new Lg(t=>this.iterate(n=>e(n)?t(n):!0))}map(e){return new Lg(t=>this.iterate(n=>t(e(n))))}some(e){let t=!1;return this.iterate(n=>(t=e(n),!t)),t}findFirst(e){let t;return this.iterate(n=>e(n)?(t=n,!1):!0),t}findLast(e){let t;return this.iterate(n=>(e(n)&&(t=n),!0)),t}findLastMaxBy(e){let t,n=!0;return this.iterate(s=>((n||F0.isGreaterThan(e(s,t)))&&(n=!1,t=s),!0)),t}}class RM{constructor(e){this._indexMap=e}static{Ct(this,"Permutation")}static createSortPermutation(e,t){const n=Array.from(e.keys()).sort((s,o)=>t(e[s],e[o]));return new RM(n)}apply(e){return e.map((t,n)=>e[this._indexMap[n]])}inverse(){const e=this._indexMap.slice();for(let t=0;t<this._indexMap.length;t++)e[this._indexMap[t]]=t;return new RM(e)}}async function Gde(i,e){return(await Promise.all(i.map(async(n,s)=>({element:n,ok:await e(n,s)})))).find(n=>n.ok)?.element}Ct(Gde,"findAsync");var Kde=Object.defineProperty,EL=(i,e)=>Kde(i,"name",{value:e,configurable:!0});function pG(i,e){const t=Object.create(null);for(const n of i){const s=e(n);let o=t[s];o||(o=t[s]=[]),o.push(n)}return t}EL(pG,"groupBy");function mG(i,e){const t=[],n=[];for(const s of i)e.has(s)||t.push(s);for(const s of e)i.has(s)||n.push(s);return{removed:t,added:n}}EL(mG,"diffSets");function jde(i,e){const t=[],n=[];for(const[s,o]of i)e.has(s)||t.push(o);for(const[s,o]of e)i.has(s)||n.push(o);return{removed:t,added:n}}EL(jde,"diffMaps");function _G(i,e){const t=new Set;for(const n of e)i.has(n)&&t.add(n);return t}EL(_G,"intersection");class qde{constructor(e,t){this.toKey=t;for(const n of e)this.add(n)}static{EL(this,"SetWithKey")}_map=new Map;get size(){return this._map.size}add(e){const t=this.toKey(e);return this._map.set(t,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(const e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,t){this._map.forEach(n=>e.call(t,n,n,this))}[Symbol.iterator](){return this.values()}[Symbol.toStringTag]="SetWithKey"}var zw=(i=>(i[i.Uri=1]="Uri",i[i.Regexp=2]="Regexp",i[i.ScmResource=3]="ScmResource",i[i.ScmResourceGroup=4]="ScmResourceGroup",i[i.ScmProvider=5]="ScmProvider",i[i.CommentController=6]="CommentController",i[i.CommentThread=7]="CommentThread",i[i.CommentThreadInstance=8]="CommentThreadInstance",i[i.CommentThreadReply=9]="CommentThreadReply",i[i.CommentNode=10]="CommentNode",i[i.CommentThreadNode=11]="CommentThreadNode",i[i.TimelineActionContext=12]="TimelineActionContext",i[i.NotebookCellActionContext=13]="NotebookCellActionContext",i[i.NotebookActionContext=14]="NotebookActionContext",i[i.TerminalContext=15]="TerminalContext",i[i.TestItemContext=16]="TestItemContext",i[i.Date=17]="Date",i[i.TestMessageMenuArgs=18]="TestMessageMenuArgs",i))(zw||{}),Yde=Object.defineProperty,bG=(i,e)=>Yde(i,"name",{value:e,configurable:!0});function vG(){return globalThis._VSCODE_NLS_MESSAGES}bG(vG,"getNLSMessages");function KW(){return globalThis._VSCODE_NLS_LANGUAGE}bG(KW,"getNLSLanguage");var Zde=Object.defineProperty,yN=(i,e)=>Zde(i,"name",{value:e,configurable:!0});const Xde=KW()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function V0(i,e){let t;return e.length===0?t=i:t=i.replace(/\{(\d+)\}/g,(n,s)=>{const o=s[0],r=e[o];let a=n;return typeof r=="string"?a=r:(typeof r=="number"||typeof r=="boolean"||r===void 0||r===null)&&(a=String(r)),a}),Xde&&(t=""+t.replace(/[aouei]/g,"$&$&")+""),t}yN(V0,"_format");function g(i,e,...t){return V0(typeof i=="number"?jW(i,e):e,t)}yN(g,"localize");function jW(i,e){const t=vG()?.[i];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${i} !!!`)}return t}yN(jW,"lookupMessage");function W(i,e,...t){let n;typeof i=="number"?n=jW(i,e):n=e;const s=V0(n,t);return{value:s,original:e===n?s:V0(e,t)}}yN(W,"localize2");var Qde=Object.defineProperty,$w=(i,e)=>Qde(i,"name",{value:e,configurable:!0});const dw="en";let W0=!1,H0=!1,B1=!1,wG=!1,CG=!1,qW=!1,YW=!1,yG=!1,t1,YI=dw,OM=dw,Jde,Mu;const Dg=globalThis;let Cl;typeof Dg.vscode<"u"&&typeof Dg.vscode.process<"u"?Cl=Dg.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Cl=process);const ehe=typeof Cl?.versions?.electron=="string",the=ehe&&Cl?.type==="renderer";if(typeof Cl=="object"){W0=Cl.platform==="win32",H0=Cl.platform==="darwin",B1=Cl.platform==="linux",wG=B1&&!!Cl.env.SNAP&&!!Cl.env.SNAP_REVISION,Cl.env.CI||Cl.env.BUILD_ARTIFACTSTAGINGDIRECTORY,t1=dw,YI=dw;const i=Cl.env.VSCODE_NLS_CONFIG;if(i)try{const e=JSON.parse(i);t1=e.userLocale,OM=e.osLocale,YI=e.resolvedLanguage||dw,Jde=e.languagePack?.translationsConfigFile}catch{}CG=!0}else typeof navigator=="object"&&!the?(Mu=navigator.userAgent,W0=Mu.indexOf("Windows")>=0,H0=Mu.indexOf("Macintosh")>=0,YW=(Mu.indexOf("Macintosh")>=0||Mu.indexOf("iPad")>=0||Mu.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,B1=Mu.indexOf("Linux")>=0,yG=Mu?.indexOf("Mobi")>=0,qW=!0,YI=KW()||dw,t1=navigator.language.toLowerCase(),OM=t1):console.error("Unable to resolve platform.");var hw=(i=>(i[i.Web=0]="Web",i[i.Mac=1]="Mac",i[i.Linux=2]="Linux",i[i.Windows=3]="Windows",i))(hw||{});function SG(i){switch(i){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}$w(SG,"PlatformToString");let ZI=0;H0?ZI=1:W0?ZI=3:B1&&(ZI=2);const Nt=W0,Ue=H0,Gi=B1,ihe=wG,ao=CG,ui=qW,nhe=qW&&typeof Dg.importScripts=="function",she=nhe?Dg.origin:void 0,ol=YW,EG=yG,ZW=ZI,ou=Mu,Bu=YI;var B9;(i=>{function e(){return Bu}i.value=e,$w(e,"value");function t(){return Bu.length===2?Bu==="en":Bu.length>=3?Bu[0]==="e"&&Bu[1]==="n"&&Bu[2]==="-":!1}i.isDefaultVariant=t,$w(t,"isDefaultVariant");function n(){return Bu==="en"}i.isDefault=n,$w(n,"isDefault")})(B9||(B9={}));const ohe=t1,rhe=OM,ahe=typeof Dg.postMessage=="function"&&!Dg.importScripts,LG=(()=>{if(ahe){const i=[];Dg.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,s=i.length;n<s;n++){const o=i[n];if(o.id===t.data.vscodeScheduleAsyncWork){i.splice(n,1),o.callback();return}}});let e=0;return t=>{const n=++e;i.push({id:n,callback:t}),Dg.postMessage({vscodeScheduleAsyncWork:n},"*")}}return i=>setTimeout(i)})();var Ts=(i=>(i[i.Windows=1]="Windows",i[i.Macintosh=2]="Macintosh",i[i.Linux=3]="Linux",i))(Ts||{});const gp=H0||YW?2:W0?1:3;let F9=!0,V9=!1;function DG(){if(!V9){V9=!0;const i=new Uint8Array(2);i[0]=1,i[1]=2,F9=new Uint16Array(i.buffer)[0]===513}return F9}$w(DG,"isLittleEndian");const IG=!!(ou&&ou.indexOf("Chrome")>=0),TG=!!(ou&&ou.indexOf("Firefox")>=0),lhe=!!(!IG&&ou&&ou.indexOf("Safari")>=0),che=!!(ou&&ou.indexOf("Edg/")>=0),dhe=!!(ou&&ou.indexOf("Android")>=0);function hhe(i){return parseFloat(i)>=20}$w(hhe,"isBigSurOrNewer");var W9={};let j_;const dO=globalThis.vscode;if(typeof dO<"u"&&typeof dO.process<"u"){const i=dO.process;j_={get platform(){return i.platform},get arch(){return i.arch},get env(){return i.env},cwd(){return i.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?j_={get platform(){return process.platform},get arch(){return process.arch},get env(){return W9},cwd(){return W9.VSCODE_CWD||process.cwd()}}:j_={get platform(){return Nt?"win32":Ue?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const DA=j_.cwd,s_=j_.env,AG=j_.platform,uhe=j_.arch;var ghe=Object.defineProperty,cf=(i,e)=>ghe(i,"name",{value:e,configurable:!0});const fhe=65,phe=97,mhe=90,_he=122,kp=46,tr=47,Va=92,Af=58,bhe=63;class xG extends Error{static{cf(this,"ErrorInvalidArgType")}code;constructor(e,t,n){let s;typeof t=="string"&&t.indexOf("not ")===0?(s="must not be",t=t.replace(/^not /,"")):s="must be";const o=e.indexOf(".")!==-1?"property":"argument";let r=`The "${e}" ${o} ${s} of type ${t}`;r+=`. Received type ${typeof n}`,super(r),this.code="ERR_INVALID_ARG_TYPE"}}function kG(i,e){if(i===null||typeof i!="object")throw new xG(e,"Object",i)}cf(kG,"validateObject");function ws(i,e){if(typeof i!="string")throw new xG(e,"string",i)}cf(ws,"validateString");const ul=AG==="win32";function si(i){return i===tr||i===Va}cf(si,"isPathSeparator");function IA(i){return i===tr}cf(IA,"isPosixPathSeparator");function Fu(i){return i>=fhe&&i<=mhe||i>=phe&&i<=_he}cf(Fu,"isWindowsDeviceRoot");function U0(i,e,t,n){let s="",o=0,r=-1,a=0,l=0;for(let c=0;c<=i.length;++c){if(c<i.length)l=i.charCodeAt(c);else{if(n(l))break;l=tr}if(n(l)){if(!(r===c-1||a===1))if(a===2){if(s.length<2||o!==2||s.charCodeAt(s.length-1)!==kp||s.charCodeAt(s.length-2)!==kp){if(s.length>2){const d=s.lastIndexOf(t);d===-1?(s="",o=0):(s=s.slice(0,d),o=s.length-1-s.lastIndexOf(t)),r=c,a=0;continue}else if(s.length!==0){s="",o=0,r=c,a=0;continue}}e&&(s+=s.length>0?`${t}..`:"..",o=2)}else s.length>0?s+=`${t}${i.slice(r+1,c)}`:s=i.slice(r+1,c),o=c-r-1;r=c,a=0}else l===kp&&a!==-1?++a:a=-1}return s}cf(U0,"normalizeString");function NG(i){return i?`${i[0]==="."?"":"."}${i}`:""}cf(NG,"formatExt");function XW(i,e){kG(e,"pathObject");const t=e.dir||e.root,n=e.base||`${e.name||""}${NG(e.ext)}`;return t?t===e.root?`${t}${n}`:`${t}${i}${n}`:n}cf(XW,"_format");const Jn={resolve(...i){let e="",t="",n=!1;for(let s=i.length-1;s>=-1;s--){let o;if(s>=0){if(o=i[s],ws(o,`paths[${s}]`),o.length===0)continue}else e.length===0?o=DA():(o=s_[`=${e}`]||DA(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Va)&&(o=`${e}\\`));const r=o.length;let a=0,l="",c=!1;const d=o.charCodeAt(0);if(r===1)si(d)&&(a=1,c=!0);else if(si(d))if(c=!0,si(o.charCodeAt(1))){let h=2,u=h;for(;h<r&&!si(o.charCodeAt(h));)h++;if(h<r&&h!==u){const f=o.slice(u,h);for(u=h;h<r&&si(o.charCodeAt(h));)h++;if(h<r&&h!==u){for(u=h;h<r&&!si(o.charCodeAt(h));)h++;(h===r||h!==u)&&(l=`\\\\${f}\\${o.slice(u,h)}`,a=h)}}}else a=1;else Fu(d)&&o.charCodeAt(1)===Af&&(l=o.slice(0,2),a=2,r>2&&si(o.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${o.slice(a)}\\${t}`,n=c,c&&e.length>0)break}return t=U0(t,!n,"\\",si),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(i){ws(i,"path");const e=i.length;if(e===0)return".";let t=0,n,s=!1;const o=i.charCodeAt(0);if(e===1)return IA(o)?"\\":i;if(si(o))if(s=!0,si(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!si(i.charCodeAt(a));)a++;if(a<e&&a!==l){const c=i.slice(l,a);for(l=a;a<e&&si(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!si(i.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${i.slice(l)}\\`;a!==l&&(n=`\\\\${c}\\${i.slice(l,a)}`,t=a)}}}else t=1;else Fu(o)&&i.charCodeAt(1)===Af&&(n=i.slice(0,2),t=2,e>2&&si(i.charCodeAt(2))&&(s=!0,t=3));let r=t<e?U0(i.slice(t),!s,"\\",si):"";return r.length===0&&!s&&(r="."),r.length>0&&si(i.charCodeAt(e-1))&&(r+="\\"),n===void 0?s?`\\${r}`:r:s?`${n}\\${r}`:`${n}${r}`},isAbsolute(i){ws(i,"path");const e=i.length;if(e===0)return!1;const t=i.charCodeAt(0);return si(t)||e>2&&Fu(t)&&i.charCodeAt(1)===Af&&si(i.charCodeAt(2))},join(...i){if(i.length===0)return".";let e,t;for(let o=0;o<i.length;++o){const r=i[o];ws(r,"path"),r.length>0&&(e===void 0?e=t=r:e+=`\\${r}`)}if(e===void 0)return".";let n=!0,s=0;if(typeof t=="string"&&si(t.charCodeAt(0))){++s;const o=t.length;o>1&&si(t.charCodeAt(1))&&(++s,o>2&&(si(t.charCodeAt(2))?++s:n=!1))}if(n){for(;s<e.length&&si(e.charCodeAt(s));)s++;s>=2&&(e=`\\${e.slice(s)}`)}return Jn.normalize(e)},relative(i,e){if(ws(i,"from"),ws(e,"to"),i===e)return"";const t=Jn.resolve(i),n=Jn.resolve(e);if(t===n||(i=t.toLowerCase(),e=n.toLowerCase(),i===e))return"";let s=0;for(;s<i.length&&i.charCodeAt(s)===Va;)s++;let o=i.length;for(;o-1>s&&i.charCodeAt(o-1)===Va;)o--;const r=o-s;let a=0;for(;a<e.length&&e.charCodeAt(a)===Va;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===Va;)l--;const c=l-a,d=r<c?r:c;let h=-1,u=0;for(;u<d;u++){const p=i.charCodeAt(s+u);if(p!==e.charCodeAt(a+u))break;p===Va&&(h=u)}if(u!==d){if(h===-1)return n}else{if(c>d){if(e.charCodeAt(a+u)===Va)return n.slice(a+u+1);if(u===2)return n.slice(a+u)}r>d&&(i.charCodeAt(s+u)===Va?h=u:u===2&&(h=3)),h===-1&&(h=0)}let f="";for(u=s+h+1;u<=o;++u)(u===o||i.charCodeAt(u)===Va)&&(f+=f.length===0?"..":"\\..");return a+=h,f.length>0?`${f}${n.slice(a,l)}`:(n.charCodeAt(a)===Va&&++a,n.slice(a,l))},toNamespacedPath(i){if(typeof i!="string"||i.length===0)return i;const e=Jn.resolve(i);if(e.length<=2)return i;if(e.charCodeAt(0)===Va){if(e.charCodeAt(1)===Va){const t=e.charCodeAt(2);if(t!==bhe&&t!==kp)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Fu(e.charCodeAt(0))&&e.charCodeAt(1)===Af&&e.charCodeAt(2)===Va)return`\\\\?\\${e}`;return i},dirname(i){ws(i,"path");const e=i.length;if(e===0)return".";let t=-1,n=0;const s=i.charCodeAt(0);if(e===1)return si(s)?i:".";if(si(s)){if(t=n=1,si(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!si(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&si(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!si(i.charCodeAt(a));)a++;if(a===e)return i;a!==l&&(t=n=a+1)}}}}else Fu(s)&&i.charCodeAt(1)===Af&&(t=e>2&&si(i.charCodeAt(2))?3:2,n=t);let o=-1,r=!0;for(let a=e-1;a>=n;--a)if(si(i.charCodeAt(a))){if(!r){o=a;break}}else r=!1;if(o===-1){if(t===-1)return".";o=t}return i.slice(0,o)},basename(i,e){e!==void 0&&ws(e,"suffix"),ws(i,"path");let t=0,n=-1,s=!0,o;if(i.length>=2&&Fu(i.charCodeAt(0))&&i.charCodeAt(1)===Af&&(t=2),e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let r=e.length-1,a=-1;for(o=i.length-1;o>=t;--o){const l=i.charCodeAt(o);if(si(l)){if(!s){t=o+1;break}}else a===-1&&(s=!1,a=o+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(n=o):(r=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(o=i.length-1;o>=t;--o)if(si(i.charCodeAt(o))){if(!s){t=o+1;break}}else n===-1&&(s=!1,n=o+1);return n===-1?"":i.slice(t,n)},extname(i){ws(i,"path");let e=0,t=-1,n=0,s=-1,o=!0,r=0;i.length>=2&&i.charCodeAt(1)===Af&&Fu(i.charCodeAt(0))&&(e=n=2);for(let a=i.length-1;a>=e;--a){const l=i.charCodeAt(a);if(si(l)){if(!o){n=a+1;break}continue}s===-1&&(o=!1,s=a+1),l===kp?t===-1?t=a:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||s===-1||r===0||r===1&&t===s-1&&t===n+1?"":i.slice(t,s)},format:XW.bind(null,"\\"),parse(i){ws(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.length;let n=0,s=i.charCodeAt(0);if(t===1)return si(s)?(e.root=e.dir=i,e):(e.base=e.name=i,e);if(si(s)){if(n=1,si(i.charCodeAt(1))){let h=2,u=h;for(;h<t&&!si(i.charCodeAt(h));)h++;if(h<t&&h!==u){for(u=h;h<t&&si(i.charCodeAt(h));)h++;if(h<t&&h!==u){for(u=h;h<t&&!si(i.charCodeAt(h));)h++;h===t?n=h:h!==u&&(n=h+1)}}}}else if(Fu(s)&&i.charCodeAt(1)===Af){if(t<=2)return e.root=e.dir=i,e;if(n=2,si(i.charCodeAt(2))){if(t===3)return e.root=e.dir=i,e;n=3}}n>0&&(e.root=i.slice(0,n));let o=-1,r=n,a=-1,l=!0,c=i.length-1,d=0;for(;c>=n;--c){if(s=i.charCodeAt(c),si(s)){if(!l){r=c+1;break}continue}a===-1&&(l=!1,a=c+1),s===kp?o===-1?o=c:d!==1&&(d=1):o!==-1&&(d=-1)}return a!==-1&&(o===-1||d===0||d===1&&o===a-1&&o===r+1?e.base=e.name=i.slice(r,a):(e.name=i.slice(r,o),e.base=i.slice(r,a),e.ext=i.slice(o,a))),r>0&&r!==n?e.dir=i.slice(0,r-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},vhe=(()=>{if(ul){const i=/\\/g;return()=>{const e=DA().replace(i,"/");return e.slice(e.indexOf("/"))}}return()=>DA()})(),kt={resolve(...i){let e="",t=!1;for(let n=i.length-1;n>=-1&&!t;n--){const s=n>=0?i[n]:vhe();ws(s,`paths[${n}]`),s.length!==0&&(e=`${s}/${e}`,t=s.charCodeAt(0)===tr)}return e=U0(e,!t,"/",IA),t?`/${e}`:e.length>0?e:"."},normalize(i){if(ws(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===tr,t=i.charCodeAt(i.length-1)===tr;return i=U0(i,!e,"/",IA),i.length===0?e?"/":t?"./":".":(t&&(i+="/"),e?`/${i}`:i)},isAbsolute(i){return ws(i,"path"),i.length>0&&i.charCodeAt(0)===tr},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const n=i[t];ws(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":kt.normalize(e)},relative(i,e){if(ws(i,"from"),ws(e,"to"),i===e||(i=kt.resolve(i),e=kt.resolve(e),i===e))return"";const t=1,n=i.length,s=n-t,o=1,r=e.length-o,a=s<r?s:r;let l=-1,c=0;for(;c<a;c++){const h=i.charCodeAt(t+c);if(h!==e.charCodeAt(o+c))break;h===tr&&(l=c)}if(c===a)if(r>a){if(e.charCodeAt(o+c)===tr)return e.slice(o+c+1);if(c===0)return e.slice(o+c)}else s>a&&(i.charCodeAt(t+c)===tr?l=c:c===0&&(l=0));let d="";for(c=t+l+1;c<=n;++c)(c===n||i.charCodeAt(c)===tr)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+l)}`},toNamespacedPath(i){return i},dirname(i){if(ws(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===tr;let t=-1,n=!0;for(let s=i.length-1;s>=1;--s)if(i.charCodeAt(s)===tr){if(!n){t=s;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":i.slice(0,t)},basename(i,e){e!==void 0&&ws(e,"ext"),ws(i,"path");let t=0,n=-1,s=!0,o;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let r=e.length-1,a=-1;for(o=i.length-1;o>=0;--o){const l=i.charCodeAt(o);if(l===tr){if(!s){t=o+1;break}}else a===-1&&(s=!1,a=o+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(n=o):(r=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(o=i.length-1;o>=0;--o)if(i.charCodeAt(o)===tr){if(!s){t=o+1;break}}else n===-1&&(s=!1,n=o+1);return n===-1?"":i.slice(t,n)},extname(i){ws(i,"path");let e=-1,t=0,n=-1,s=!0,o=0;for(let r=i.length-1;r>=0;--r){const a=i.charCodeAt(r);if(a===tr){if(!s){t=r+1;break}continue}n===-1&&(s=!1,n=r+1),a===kp?e===-1?e=r:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===t+1?"":i.slice(e,n)},format:XW.bind(null,"/"),parse(i){ws(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.charCodeAt(0)===tr;let n;t?(e.root="/",n=1):n=0;let s=-1,o=0,r=-1,a=!0,l=i.length-1,c=0;for(;l>=n;--l){const d=i.charCodeAt(l);if(d===tr){if(!a){o=l+1;break}continue}r===-1&&(a=!1,r=l+1),d===kp?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}if(r!==-1){const d=o===0&&t?1:o;s===-1||c===0||c===1&&s===r-1&&s===o+1?e.base=e.name=i.slice(d,r):(e.name=i.slice(d,s),e.base=i.slice(d,r),e.ext=i.slice(s,r))}return o>0?e.dir=i.slice(0,o-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};kt.win32=Jn.win32=Jn;kt.posix=Jn.posix=kt;const Np=ul?Jn.normalize:kt.normalize,SN=ul?Jn.isAbsolute:kt.isAbsolute,yl=ul?Jn.join:kt.join,XI=ul?Jn.resolve:kt.resolve,PG=ul?Jn.relative:kt.relative,RG=ul?Jn.dirname:kt.dirname,EN=ul?Jn.basename:kt.basename,LL=ul?Jn.extname:kt.extname;ul?Jn.format:kt.format;ul?Jn.parse:kt.parse;ul?Jn.toNamespacedPath:kt.toNamespacedPath;const $s=ul?Jn.sep:kt.sep;ul?Jn.delimiter:kt.delimiter;var whe=Object.defineProperty,Kc=(i,e)=>whe(i,"name",{value:e,configurable:!0});const Che=/^\w[\w\d+.-]*$/,yhe=/^\//,She=/^\/\//;function OG(i,e){if(!i.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${i.authority}", path: "${i.path}", query: "${i.query}", fragment: "${i.fragment}"}`);if(i.scheme&&!Che.test(i.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(i.path){if(i.authority){if(!yhe.test(i.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(She.test(i.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}Kc(OG,"_validateUri");function MG(i,e){return!i&&!e?"file":i}Kc(MG,"_schemeFix");function BG(i,e){switch(i){case"https":case"http":case"file":e?e[0]!==Ld&&(e=Ld+e):e=Ld;break}return e}Kc(BG,"_referenceResolution");const Vn="",Ld="/",Ehe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class ne{static{Kc(this,"URI")}static isUri(e){return e instanceof ne?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,t,n,s,o,r=!1){typeof e=="object"?(this.scheme=e.scheme||Vn,this.authority=e.authority||Vn,this.path=e.path||Vn,this.query=e.query||Vn,this.fragment=e.fragment||Vn):(this.scheme=MG(e,r),this.authority=t||Vn,this.path=BG(this.scheme,n||Vn),this.query=s||Vn,this.fragment=o||Vn,OG(this,r))}get fsPath(){return z0(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:s,query:o,fragment:r}=e;return t===void 0?t=this.scheme:t===null&&(t=Vn),n===void 0?n=this.authority:n===null&&(n=Vn),s===void 0?s=this.path:s===null&&(s=Vn),o===void 0?o=this.query:o===null&&(o=Vn),r===void 0?r=this.fragment:r===null&&(r=Vn),t===this.scheme&&n===this.authority&&s===this.path&&o===this.query&&r===this.fragment?this:new Hv(t,n,s,o,r)}static parse(e,t=!1){const n=Ehe.exec(e);return n?new Hv(n[2]||Vn,i1(n[4]||Vn),i1(n[5]||Vn),i1(n[7]||Vn),i1(n[9]||Vn),t):new Hv(Vn,Vn,Vn,Vn,Vn)}static file(e){let t=Vn;if(Nt&&(e=e.replace(/\\/g,Ld)),e[0]===Ld&&e[1]===Ld){const n=e.indexOf(Ld,2);n===-1?(t=e.substring(2),e=Ld):(t=e.substring(2,n),e=e.substring(n)||Ld)}return new Hv("file",t,e,Vn,Vn)}static from(e,t){return new Hv(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Nt&&e.scheme==="file"?n=ne.file(Jn.join(z0(e,!0),...t)).path:n=kt.join(e.path,...t),e.with({path:n})}toString(e=!1){return TA(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof ne)return e;{const t=new Hv(e);return t._formatted=e.external??null,t._fsPath=e._sep===FG?e.fsPath??null:null,t}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}}function Lhe(i){return!i||typeof i!="object"?!1:typeof i.scheme=="string"&&(typeof i.authority=="string"||typeof i.authority>"u")&&(typeof i.path=="string"||typeof i.path>"u")&&(typeof i.query=="string"||typeof i.query>"u")&&(typeof i.fragment=="string"||typeof i.fragment>"u")}Kc(Lhe,"isUriComponents");const FG=Nt?1:void 0;class Hv extends ne{static{Kc(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=z0(this,!1)),this._fsPath}toString(e=!1){return e?TA(this,!0):(this._formatted||(this._formatted=TA(this,!1)),this._formatted)}toJSON(){const e={$mid:zw.Uri};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=FG),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const VG={[A.Colon]:"%3A",[A.Slash]:"%2F",[A.QuestionMark]:"%3F",[A.Hash]:"%23",[A.OpenSquareBracket]:"%5B",[A.CloseSquareBracket]:"%5D",[A.AtSign]:"%40",[A.ExclamationMark]:"%21",[A.DollarSign]:"%24",[A.Ampersand]:"%26",[A.SingleQuote]:"%27",[A.OpenParen]:"%28",[A.CloseParen]:"%29",[A.Asterisk]:"%2A",[A.Plus]:"%2B",[A.Comma]:"%2C",[A.Semicolon]:"%3B",[A.Equals]:"%3D",[A.Space]:"%20"};function MM(i,e,t){let n,s=-1;for(let o=0;o<i.length;o++){const r=i.charCodeAt(o);if(r>=A.a&&r<=A.z||r>=A.A&&r<=A.Z||r>=A.Digit0&&r<=A.Digit9||r===A.Dash||r===A.Period||r===A.Underline||r===A.Tilde||e&&r===A.Slash||t&&r===A.OpenSquareBracket||t&&r===A.CloseSquareBracket||t&&r===A.Colon)s!==-1&&(n+=encodeURIComponent(i.substring(s,o)),s=-1),n!==void 0&&(n+=i.charAt(o));else{n===void 0&&(n=i.substr(0,o));const a=VG[r];a!==void 0?(s!==-1&&(n+=encodeURIComponent(i.substring(s,o)),s=-1),n+=a):s===-1&&(s=o)}}return s!==-1&&(n+=encodeURIComponent(i.substring(s))),n!==void 0?n:i}Kc(MM,"encodeURIComponentFast");function WG(i){let e;for(let t=0;t<i.length;t++){const n=i.charCodeAt(t);n===A.Hash||n===A.QuestionMark?(e===void 0&&(e=i.substr(0,t)),e+=VG[n]):e!==void 0&&(e+=i[t])}return e!==void 0?e:i}Kc(WG,"encodeURIComponentMinimal");function z0(i,e){let t;return i.authority&&i.path.length>1&&i.scheme==="file"?t=`//${i.authority}${i.path}`:i.path.charCodeAt(0)===A.Slash&&(i.path.charCodeAt(1)>=A.A&&i.path.charCodeAt(1)<=A.Z||i.path.charCodeAt(1)>=A.a&&i.path.charCodeAt(1)<=A.z)&&i.path.charCodeAt(2)===A.Colon?e?t=i.path.substr(1):t=i.path[1].toLowerCase()+i.path.substr(2):t=i.path,Nt&&(t=t.replace(/\//g,"\\")),t}Kc(z0,"uriToFsPath");function TA(i,e){const t=e?WG:MM;let n="",{scheme:s,authority:o,path:r,query:a,fragment:l}=i;if(s&&(n+=s,n+=":"),(o||s==="file")&&(n+=Ld,n+=Ld),o){let c=o.indexOf("@");if(c!==-1){const d=o.substr(0,c);o=o.substr(c+1),c=d.lastIndexOf(":"),c===-1?n+=t(d,!1,!1):(n+=t(d.substr(0,c),!1,!1),n+=":",n+=t(d.substr(c+1),!1,!0)),n+="@"}o=o.toLowerCase(),c=o.lastIndexOf(":"),c===-1?n+=t(o,!1,!0):(n+=t(o.substr(0,c),!1,!0),n+=o.substr(c))}if(r){if(r.length>=3&&r.charCodeAt(0)===A.Slash&&r.charCodeAt(2)===A.Colon){const c=r.charCodeAt(1);c>=A.A&&c<=A.Z&&(r=`/${String.fromCharCode(c+32)}:${r.substr(3)}`)}else if(r.length>=2&&r.charCodeAt(1)===A.Colon){const c=r.charCodeAt(0);c>=A.A&&c<=A.Z&&(r=`${String.fromCharCode(c+32)}:${r.substr(2)}`)}n+=t(r,!0,!1)}return a&&(n+="?",n+=t(a,!1,!1)),l&&(n+="#",n+=e?l:MM(l,!1,!1)),n}Kc(TA,"_asFormatted");function QW(i){try{return decodeURIComponent(i)}catch{return i.length>3?i.substr(0,3)+QW(i.substr(3)):i}}Kc(QW,"decodeURIComponentGraceful");const H9=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function i1(i){return i.match(H9)?i.replace(H9,e=>QW(e)):i}Kc(i1,"percentDecode");var Dhe=Object.defineProperty,Go=(i,e)=>Dhe(i,"name",{value:e,configurable:!0});function q_(i,e,t){let n=i.get(e);return n===void 0&&(n=t,i.set(e,n)),n}Go(q_,"getOrSet");function Ihe(i){const e=[];return i.forEach((t,n)=>{e.push(`${n} => ${t}`)}),`Map(${i.size}) {${e.join(", ")}}`}Go(Ihe,"mapToString");function The(i){const e=[];return i.forEach(t=>{e.push(t)}),`Set(${i.size}) {${e.join(", ")}}`}Go(The,"setToString");class Ahe{constructor(e,t){this.uri=e,this.value=t}static{Go(this,"ResourceMapEntry")}}function HG(i){return Array.isArray(i)}Go(HG,"isEntries");class ro{static{Go(this,"ResourceMap")}static defaultToKey=Go(e=>e.toString(),"defaultToKey");[Symbol.toStringTag]="ResourceMap";map;toKey;constructor(e,t){if(e instanceof ro)this.map=new Map(e.map),this.toKey=t??ro.defaultToKey;else if(HG(e)){this.map=new Map,this.toKey=t??ro.defaultToKey;for(const[n,s]of e)this.set(n,s)}else this.map=new Map,this.toKey=e??ro.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new Ahe(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[n,s]of this.map)e(s.value,s.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[Symbol.iterator](){for(const[,e]of this.map)yield[e.uri,e.value]}}class xhe{static{Go(this,"ResourceSet")}[Symbol.toStringTag]="ResourceSet";_map;constructor(e,t){!e||typeof e=="function"?this._map=new ro(e):(this._map=new ro(t),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach((n,s)=>e.call(t,s,s,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[Symbol.iterator](){return this.keys()}}var UG=(i=>(i[i.None=0]="None",i[i.AsOld=1]="AsOld",i[i.AsNew=2]="AsNew",i))(UG||{});class khe{static{Go(this,"LinkedMap")}[Symbol.toStringTag]="LinkedMap";_map;_head;_tail;_size;_state;constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let s=this._map.get(e);if(s)s.value=t,n!==0&&this.touch(s,n);else{switch(s={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(s);break;case 1:this.addItemFirst(s);break;case 2:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(e,s),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let s=this._head;for(;s;){if(t?e.bind(t)(s.value,s.key,this):e(s.value,s.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return s}values(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return s}entries(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return s}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.previous,n--;this._tail=t,this._size=n,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(n.previous=s,s.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,s=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=s,s.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}let zG=class extends khe{static{Go(this,"Cache")}_limit;_ratio;constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}};class Ry extends zG{static{Go(this,"LRUCache")}constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}}class aze extends zG{static{Go(this,"MRUCache")}constructor(e,t=1){super(e,t)}trim(e){this.trimNew(e)}set(e,t){return this._limit<=this.size&&!this.has(e)&&this.trim(Math.round(this._limit*this._ratio)-1),super.set(e,t),this}}class lze{static{Go(this,"CounterSet")}map=new Map;add(e){return this.map.set(e,(this.map.get(e)||0)+1),this}delete(e){let t=this.map.get(e)||0;return t===0?!1:(t--,t===0?this.map.delete(e):this.map.set(e,t),!0)}has(e){return this.map.has(e)}}class cze{static{Go(this,"BidirectionalMap")}_m1=new Map;_m2=new Map;constructor(e){if(e)for(const[t,n]of e)this.set(t,n)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return t===void 0?!1:(this._m1.delete(e),this._m2.delete(t),!0)}forEach(e,t){this._m1.forEach((n,s)=>{e.call(t,n,s,this)})}keys(){return this._m1.keys()}values(){return this._m1.values()}}class LN{static{Go(this,"SetMap")}map=new Map;add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}function $G(i,e){if(i===e)return!0;if(i.size!==e.size)return!1;for(const[t,n]of i)if(!e.has(t)||e.get(t)!==n)return!1;for(const[t]of e)if(!i.has(t))return!1;return!0}Go($G,"mapsStrictEqualIgnoreOrder");class AA{static{Go(this,"TwoKeyMap")}_data={};set(e,t,n){this._data[e]||(this._data[e]={}),this._data[e][t]=n}get(e,t){return this._data[e]?.[t]}clear(){this._data={}}*values(){for(const e in this._data)for(const t in this._data[e]){const n=this._data[e][t];n&&(yield n)}}}class GG{static{Go(this,"ThreeKeyMap")}_data={};set(e,t,n,s){this._data[e]||(this._data[e]=new AA),this._data[e].set(t,n,s)}get(e,t,n){return this._data[e]?.get(t,n)}clear(){this._data={}}*values(){for(const e in this._data)for(const t of this._data[e].values())t&&(yield t)}}class dze{static{Go(this,"FourKeyMap")}_data=new AA;set(e,t,n,s,o){this._data.get(e,t)||this._data.set(e,t,new AA),this._data.get(e,t).set(n,s,o)}get(e,t,n,s){return this._data.get(e,t)?.get(n,s)}clear(){this._data.clear()}}var Nhe=Object.defineProperty,Phe=(i,e)=>Nhe(i,"name",{value:e,configurable:!0});function Bp(i,e){const t=this;let n=!1,s;return function(){if(n)return s;if(n=!0,e)try{s=i.apply(t,arguments)}finally{e()}else s=i.apply(t,arguments);return s}}Phe(Bp,"createSingleCallFunction");var Rhe=Object.defineProperty,Xo=(i,e)=>Rhe(i,"name",{value:e,configurable:!0}),Zt;(i=>{function e(C){return C&&typeof C=="object"&&typeof C[Symbol.iterator]=="function"}i.is=e,Xo(e,"is");const t=Object.freeze([]);function n(){return t}i.empty=n,Xo(n,"empty");function*s(C){yield C}i.single=s,Xo(s,"single");function o(C){return e(C)?C:s(C)}i.wrap=o,Xo(o,"wrap");function r(C){return C||t}i.from=r,Xo(r,"from");function*a(C){for(let S=C.length-1;S>=0;S--)yield C[S]}i.reverse=a,Xo(a,"reverse");function l(C){return!C||C[Symbol.iterator]().next().done===!0}i.isEmpty=l,Xo(l,"isEmpty");function c(C){return C[Symbol.iterator]().next().value}i.first=c,Xo(c,"first");function d(C,S){let D=0;for(const T of C)if(S(T,D++))return!0;return!1}i.some=d,Xo(d,"some");function h(C,S){for(const D of C)if(S(D))return D}i.find=h,Xo(h,"find");function*u(C,S){for(const D of C)S(D)&&(yield D)}i.filter=u,Xo(u,"filter");function*f(C,S){let D=0;for(const T of C)yield S(T,D++)}i.map=f,Xo(f,"map");function*p(C,S){let D=0;for(const T of C)yield*S(T,D++)}i.flatMap=p,Xo(p,"flatMap");function*m(...C){for(const S of C)yield*S}i.concat=m,Xo(m,"concat");function _(C,S,D){let T=D;for(const I of C)T=S(T,I);return T}i.reduce=_,Xo(_,"reduce");function*w(C,S,D=C.length){for(S<0&&(S+=C.length),D<0?D+=C.length:D>C.length&&(D=C.length);S<D;S++)yield C[S]}i.slice=w,Xo(w,"slice");function v(C,S=Number.POSITIVE_INFINITY){const D=[];if(S===0)return[D,C];const T=C[Symbol.iterator]();for(let I=0;I<S;I++){const R=T.next();if(R.done)return[D,i.empty()];D.push(R.value)}return[D,{[Symbol.iterator](){return T}}]}i.consume=v,Xo(v,"consume");async function b(C){const S=[];for await(const D of C)S.push(D);return Promise.resolve(S)}i.asyncToArray=b,Xo(b,"asyncToArray")})(Zt||(Zt={}));var Ohe=Object.defineProperty,Tn=(i,e)=>Ohe(i,"name",{value:e,configurable:!0});let Sb=null;class KG{static{Tn(this,"DisposableTracker")}static idx=0;livingDisposables=new Map;getDisposableData(e){let t=this.livingDisposables.get(e);return t||(t={parent:null,source:null,isSingleton:!1,value:e,idx:KG.idx++},this.livingDisposables.set(e,t)),t}trackDisposable(e){const t=this.getDisposableData(e);t.source||(t.source=new Error().stack)}setParent(e,t){const n=this.getDisposableData(e);n.parent=t}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,t){const n=t.get(e);if(n)return n;const s=e.parent?this.getRootParent(this.getDisposableData(e.parent),t):e;return t.set(e,s),s}getTrackedDisposables(){const e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,t){let n;if(t)n=t;else{const l=new Map,c=[...this.livingDisposables.values()].filter(h=>h.source!==null&&!this.getRootParent(h,l).isSingleton);if(c.length===0)return;const d=new Set(c.map(h=>h.value));if(n=c.filter(h=>!(h.parent&&d.has(h.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function s(l){function c(h,u){for(;h.length>0&&u.some(f=>typeof f=="string"?f===h[0]:h[0].match(f));)h.shift()}Tn(c,"removePrefix");const d=l.source.split(`
`).map(h=>h.trim().replace("at ","")).filter(h=>h!=="");return c(d,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),d.reverse()}Tn(s,"getStackTracePath");const o=new LN;for(const l of n){const c=s(l);for(let d=0;d<=c.length;d++)o.add(c.slice(0,d).join(`
`),l)}n.sort(zl(l=>l.idx,xp));let r="",a=0;for(const l of n.slice(0,e)){a++;const c=s(l),d=[];for(let h=0;h<c.length;h++){let u=c[h];u=`(shared with ${o.get(c.slice(0,h+1).join(`
`)).size}/${n.length} leaks) at ${u}`;const p=o.get(c.slice(0,h).join(`
`)),m=pG([...p].map(_=>s(_)[h]),_=>_);delete m[c[h]];for(const[_,w]of Object.entries(m))d.unshift(`    - stacktraces of ${w.length} other leaks continue with ${_}`);d.unshift(u)}r+=`


==================== Leaking disposable ${a}/${n.length}: ${l.value.constructor.name} ====================
${d.join(`
`)}
============================================================

`}return n.length>e&&(r+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:r}}}function Mhe(i){Sb=i}Tn(Mhe,"setDisposableTracker");function em(i){return Sb?.trackDisposable(i),i}Tn(em,"trackDisposable");function tm(i){Sb?.markAsDisposed(i)}Tn(tm,"markAsDisposed");function FC(i,e){Sb?.setParent(i,e)}Tn(FC,"setParentOfDisposable");function jG(i,e){if(Sb)for(const t of i)Sb.setParent(t,e)}Tn(jG,"setParentOfDisposables");function Eb(i){return Sb?.markAsSingleton(i),i}Tn(Eb,"markAsSingleton");function DL(i){return typeof i=="object"&&i!==null&&typeof i.dispose=="function"&&i.dispose.length===0}Tn(DL,"isDisposable");function ii(i){if(Zt.is(i)){const e=[];for(const t of i)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(i)?[]:i}else if(i)return i.dispose(),i}Tn(ii,"dispose");function qG(i){for(const e of i)DL(e)&&e.dispose();return[]}Tn(qG,"disposeIfDisposable");function Ia(...i){const e=ye(()=>ii(i));return jG(i,e),e}Tn(Ia,"combinedDisposable");function ye(i){const e=em({dispose:Bp(()=>{tm(e),i()})});return e}Tn(ye,"toDisposable");class te{static{Tn(this,"DisposableStore")}static DISABLE_DISPOSED_WARNING=!1;_toDispose=new Set;_isDisposed=!1;constructor(){em(this)}dispose(){this._isDisposed||(tm(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{ii(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return FC(e,this),this._isDisposed?te.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),FC(e,null))}}class ${static{Tn(this,"Disposable")}static None=Object.freeze({dispose(){}});_store=new te;constructor(){em(this),FC(this._store,this)}dispose(){tm(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}class Yi{static{Tn(this,"MutableDisposable")}_value;_isDisposed=!1;constructor(){em(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),e&&FC(e,this),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,tm(this),this._value?.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e&&FC(e,null),e}}class hze{static{Tn(this,"MandatoryMutableDisposable")}_disposable=new Yi;_isDisposed=!1;constructor(e){this._disposable.value=e}get value(){return this._disposable.value}set value(e){this._isDisposed||e===this._disposable.value||(this._disposable.value=e)}dispose(){this._isDisposed=!0,this._disposable.dispose()}}class uze{constructor(e){this._disposable=e}static{Tn(this,"RefCountedDisposable")}_counter=1;acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}}class gze{static{Tn(this,"SafeDisposable")}dispose=Tn(()=>{},"dispose");unset=Tn(()=>{},"unset");isset=Tn(()=>!1,"isset");constructor(){em(this)}set(e){let t=e;return this.unset=()=>t=void 0,this.isset=()=>t!==void 0,this.dispose=()=>{t&&(t(),t=void 0,tm(this))},this}}class fze{static{Tn(this,"ReferenceCollection")}references=new Map;acquire(e,...t){let n=this.references.get(e);n||(n={counter:0,object:this.createReferencedObject(e,...t)},this.references.set(e,n));const{object:s}=n,o=Bp(()=>{--n.counter===0&&(this.destroyReferencedObject(e,n.object),this.references.delete(e))});return n.counter++,{object:s,dispose:o}}}class pze{constructor(e){this.referenceCollection=e}static{Tn(this,"AsyncReferenceCollection")}async acquire(e,...t){const n=this.referenceCollection.acquire(e,...t);try{return{object:await n.object,dispose:Tn(()=>n.dispose(),"dispose")}}catch(s){throw n.dispose(),s}}}class mze{constructor(e){this.object=e}static{Tn(this,"ImmortalReference")}dispose(){}}function Bhe(i){const e=new te;try{i(e)}finally{e.dispose()}}Tn(Bhe,"disposeOnReturn");class ah{static{Tn(this,"DisposableMap")}_store=new Map;_isDisposed=!1;constructor(){em(this)}dispose(){tm(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{ii(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get size(){return this._store.size}get(e){return this._store.get(e)}set(e,t,n=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||this._store.get(e)?.dispose(),this._store.set(e,t)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}deleteAndLeak(e){const t=this._store.get(e);return this._store.delete(e),t}keys(){return this._store.keys()}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}}var Fhe=Object.defineProperty,DN=(i,e)=>Fhe(i,"name",{value:e,configurable:!0});const YG=Object.freeze(function(i,e){const t=setTimeout(i.bind(e),0);return{dispose(){clearTimeout(t)}}});var Ws;(i=>{function e(t){return t===i.None||t===i.Cancelled||t instanceof QI?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}i.isCancellationToken=e,DN(e,"isCancellationToken"),i.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:H.None}),i.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:YG})})(Ws||(Ws={}));class QI{static{DN(this,"MutableToken")}_isCancelled=!1;_emitter=null;cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?YG:(this._emitter||(this._emitter=new x),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class xr{static{DN(this,"CancellationTokenSource")}_token=void 0;_parentListener=void 0;constructor(e){this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new QI),this._token}cancel(){this._token?this._token instanceof QI&&this._token.cancel():this._token=Ws.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof QI&&this._token.dispose():this._token=Ws.None}}function Vhe(i){const e=new xr;return i.add({dispose(){e.cancel()}}),e.token}DN(Vhe,"cancelOnDispose");var Whe=Object.defineProperty,ZG=(i,e)=>Whe(i,"name",{value:e,configurable:!0});let _s=class JI{static{ZG(this,"Node")}static Undefined=new JI(void 0);element;next;prev;constructor(e){this.element=e,this.next=JI.Undefined,this.prev=JI.Undefined}};class ru{static{ZG(this,"LinkedList")}_first=_s.Undefined;_last=_s.Undefined;_size=0;get size(){return this._size}isEmpty(){return this._first===_s.Undefined}clear(){let e=this._first;for(;e!==_s.Undefined;){const t=e.next;e.prev=_s.Undefined,e.next=_s.Undefined,e=t}this._first=_s.Undefined,this._last=_s.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new _s(e);if(this._first===_s.Undefined)this._first=n,this._last=n;else if(t){const o=this._last;this._last=n,n.prev=o,o.next=n}else{const o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(n))}}shift(){if(this._first!==_s.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==_s.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==_s.Undefined&&e.next!==_s.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===_s.Undefined&&e.next===_s.Undefined?(this._first=_s.Undefined,this._last=_s.Undefined):e.next===_s.Undefined?(this._last=this._last.prev,this._last.next=_s.Undefined):e.prev===_s.Undefined&&(this._first=this._first.next,this._first.prev=_s.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==_s.Undefined;)yield e.element,e=e.next}}var Hhe=Object.defineProperty,sv=(i,e)=>Hhe(i,"name",{value:e,configurable:!0});class uo{constructor(e,t,n){this.owner=e,this.debugNameSource=t,this.referenceFn=n}static{sv(this,"DebugNameData")}getDebugName(e){return JW(e,this)}}const U9=new Map,BM=new WeakMap;function JW(i,e){const t=BM.get(i);if(t)return t;const n=XG(i,e);if(n){let s=U9.get(n)??0;s++,U9.set(n,s);const o=s===1?n:`${n}#${s}`;return BM.set(i,o),o}}sv(JW,"getDebugName");function XG(i,e){const t=BM.get(i);if(t)return t;const n=e.owner?JG(e.owner)+".":"";let s;const o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(s=o(),s!==void 0)return n+s}else return n+o;const r=e.referenceFn;if(r!==void 0&&(s=IN(r),s!==void 0))return n+s;if(e.owner!==void 0){const a=QG(e.owner,i);if(a!==void 0)return n+a}}sv(XG,"computeDebugName");function QG(i,e){for(const t in i)if(i[t]===e)return t}sv(QG,"findKey");const z9=new Map,$9=new WeakMap;function JG(i){const e=$9.get(i);if(e)return e;const t=eK(i);let n=z9.get(t)??0;n++,z9.set(t,n);const s=n===1?t:`${t}#${n}`;return $9.set(i,s),s}sv(JG,"formatOwner");function eK(i){const e=i.constructor;return e?e.name:"Object"}sv(eK,"getClassName");function IN(i){const e=i.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}sv(IN,"getFunctionName");var Uhe=Object.defineProperty,Oy=(i,e)=>Uhe(i,"name",{value:e,configurable:!0});function eT(i,e){if(!i)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}Oy(eT,"ok");function TN(i,e="Unreachable"){throw new Error(e)}Oy(TN,"assertNever");function tK(i,e="unexpected state"){if(!i)throw new Et(`Assertion Failed: ${e}`)}Oy(tK,"assert");function FM(i){i||Kt(new Et("Soft Assertion Failed"))}Oy(FM,"softAssert");function Fp(i){if(!i()){debugger;i(),Kt(new Et("Assertion Failed"))}}Oy(Fp,"assertFn");function AN(i,e){let t=0;for(;t<i.length-1;){const n=i[t],s=i[t+1];if(!e(n,s))return!1;t++}return!0}Oy(AN,"checkAdjacentItems");var zhe=Object.defineProperty,im=(i,e)=>zhe(i,"name",{value:e,configurable:!0});const Aa=im((i,e)=>i===e,"strictEquals");function VM(i=Aa){return(e,t)=>ks(e,t,i)}im(VM,"itemsEquals");function $he(){return(i,e)=>JSON.stringify(i)===JSON.stringify(e)}im($he,"jsonStringifyEquals");function Ghe(){return(i,e)=>i.equals(e)}im(Ghe,"itemEquals");function tT(i,e,t){if(t!==void 0){const n=i;return n==null||e===void 0||e===null?e===n:t(n,e)}else{const n=i;return(s,o)=>s==null||o===void 0||o===null?o===s:n(s,o)}}im(tT,"equalsIfDefined");function WM(i,e){if(i===e)return!0;if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(!WM(i[t],e[t]))return!1;return!0}if(i&&typeof i=="object"&&e&&typeof e=="object"&&Object.getPrototypeOf(i)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const t=i,n=e,s=Object.keys(t),o=Object.keys(n),r=new Set(o);if(s.length!==o.length)return!1;for(const a of s)if(!r.has(a)||!WM(t[a],n[a]))return!1;return!0}return!1}im(WM,"structuralEquals");function iK(i){return JSON.stringify(xA(i))}im(iK,"getStructuralKey");let Khe=0;const G9=new WeakMap;function xA(i){if(Array.isArray(i))return i.map(xA);if(i&&typeof i=="object")if(Object.getPrototypeOf(i)===Object.prototype){const e=i,t=Object.create(null);for(const n of Object.keys(e).sort())t[n]=xA(e[n]);return t}else{let e=G9.get(i);return e===void 0&&(e=Khe++,G9.set(i,e)),e+"----2b76a038c20c4bcc"}return i}im(xA,"toNormalizedJsonStructure");var jhe=Object.defineProperty,Vp=(i,e)=>jhe(i,"name",{value:e,configurable:!0});function Li(i){return new xN(new uo(void 0,void 0,i),i,void 0,void 0)}Vp(Li,"autorun");function ov(i,e){return new xN(new uo(i.owner,i.debugName,i.debugReferenceFn??e),e,void 0,void 0)}Vp(ov,"autorunOpts");function My(i,e){return new xN(new uo(i.owner,i.debugName,i.debugReferenceFn??e),e,i.createEmptyChangeSummary,i.handleChange)}Vp(My,"autorunHandleChanges");function nK(i,e){const t=new te,n=My({owner:i.owner,debugName:i.debugName,debugReferenceFn:i.debugReferenceFn??e,createEmptyChangeSummary:i.createEmptyChangeSummary,handleChange:i.handleChange},(s,o)=>{t.clear(),e(s,o,t)});return ye(()=>{n.dispose(),t.dispose()})}Vp(nK,"autorunWithStoreHandleChanges");function Ud(i){const e=new te,t=ov({owner:void 0,debugName:void 0,debugReferenceFn:i},n=>{e.clear(),i(n,e)});return ye(()=>{t.dispose(),e.dispose()})}Vp(Ud,"autorunWithStore");function qhe(i,e){let t;return ov({debugReferenceFn:e},n=>{const s=i.read(n),o=t;t=s,e({lastValue:o,newValue:s})})}Vp(qhe,"autorunDelta");class xN{constructor(e,t,n,s){this._debugNameData=e,this._runFn=t,this.createChangeSummary=n,this._handleChange=s,this.changeSummary=this.createChangeSummary?.(),zd()?.handleAutorunCreated(this),this._runIfNeeded(),em(this)}static{Vp(this,"AutorunObserver")}state=2;updateCount=0;disposed=!1;dependencies=new Set;dependenciesToBeRemoved=new Set;changeSummary;get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),tm(this)}_runIfNeeded(){if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;const t=this.disposed;try{if(!t){zd()?.handleAutorunTriggered(this);const n=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._runFn(this,n)}catch(s){M0(s)}}}finally{t||zd()?.handleAutorunFinished(this);for(const n of this.dependenciesToBeRemoved)n.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}Fp(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e))try{(this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:Vp(s=>s===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(n){M0(n)}}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}(i=>{i.Observer=xN})(Li||(Li={}));var Yhe=Object.defineProperty,Gg=(i,e)=>Yhe(i,"name",{value:e,configurable:!0});function ft(i,e){return e!==void 0?new Wp(new uo(i,void 0,e),e,void 0,void 0,void 0,Aa):new Wp(new uo(void 0,void 0,i),i,void 0,void 0,void 0,Aa)}Gg(ft,"derived");function kN(i,e,t){return new Xhe(new uo(i,void 0,e),e,void 0,void 0,void 0,Aa,t)}Gg(kN,"derivedWithSetter");function Ig(i,e){return new Wp(new uo(i.owner,i.debugName,i.debugReferenceFn),e,void 0,void 0,i.onLastObserverRemoved,i.equalsFn??Aa)}Gg(Ig,"derivedOpts");wK(Ig);function Zhe(i,e){return new Wp(new uo(i.owner,i.debugName,void 0),e,i.createEmptyChangeSummary,i.handleChange,void 0,i.equalityComparer??Aa)}Gg(Zhe,"derivedHandleChanges");function IL(i,e){let t,n;e===void 0?(t=i,n=void 0):(n=i,t=e);const s=new te;return new Wp(new uo(n,void 0,t),o=>(s.clear(),t(o,s)),void 0,void 0,()=>s.dispose(),Aa)}Gg(IL,"derivedWithStore");function Cd(i,e){let t,n;e===void 0?(t=i,n=void 0):(n=i,t=e);let s;return new Wp(new uo(n,void 0,t),o=>{s?s.clear():s=new te;const r=t(o);return r&&s.add(r),r},void 0,void 0,()=>{s&&(s.dispose(),s=void 0)},Aa)}Gg(Cd,"derivedDisposable");class Wp extends By{constructor(e,t,n,s,o=void 0,r){super(),this._debugNameData=e,this._computeFn=t,this.createChangeSummary=n,this._handleChange=s,this._handleLastObserverRemoved=o,this._equalityComparator=r,this.changeSummary=this.createChangeSummary?.(),zd()?.handleDerivedCreated(this)}static{Gg(this,"Derived")}state=0;value=void 0;updateCount=0;dependencies=new Set;dependenciesToBeRemoved=new Set;changeSummary=void 0;get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this.observers.size===0){const e=this._computeFn(this,this.createChangeSummary?.());return this.onLastObserverRemoved(),e}else{do{if(this.state===1){for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e;const t=this.state!==0,n=this.value;this.state=3;let s=!1;try{const o=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this.value=this._computeFn(this,o)}finally{for(const r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}s=t&&!this._equalityComparator(n,this.value),zd()?.handleDerivedRecomputed(this,{oldValue:n,newValue:this.value,change:void 0,didChange:s,hadValue:t})}catch(o){M0(o)}if(s)for(const o of this.observers)o.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=this.updateCount===1;if(this.state===3&&(this.state=1,!t))for(const n of this.observers)n.handlePossibleChange(this);if(t)for(const n of this.observers)n.beginUpdate(this)}endUpdate(e){if(this.updateCount--,this.updateCount===0){const t=[...this.observers];for(const n of t)n.endUpdate(this)}Fp(()=>this.updateCount>=0)}handlePossibleChange(e){if(this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const t of this.observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){let n=!1;try{n=this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:Gg(o=>o===e,"didChange")},this.changeSummary):!0}catch(o){M0(o)}const s=this.state===3;if(n&&(this.state===1||s)&&(this.state=2,s))for(const o of this.observers)o.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}class Xhe extends Wp{constructor(e,t,n,s,o=void 0,r,a){super(e,t,n,s,o,r),this.set=a}static{Gg(this,"DerivedWithSetter")}}var Qhe=Object.defineProperty,Di=(i,e)=>Qhe(i,"name",{value:e,configurable:!0});function $0(i){return new Jhe(i)}Di($0,"constObservable");class Jhe extends CK{constructor(e){super(),this.value=e}static{Di(this,"ConstObservable")}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function eue(i){const e=ci("promiseValue",{});return i.then(t=>{e.set({value:t},void 0)}),e}Di(eue,"observableFromPromise");function pn(...i){let e,t,n;return i.length===3?[e,t,n]=i:[t,n]=i,new fp(new uo(e,void 0,n),t,n,()=>fp.globalTransaction,Aa)}Di(pn,"observableFromEvent");function sK(i,e,t){return new fp(new uo(i.owner,i.debugName,i.debugReferenceFn??t),e,t,()=>fp.globalTransaction,i.equalsFn??Aa)}Di(sK,"observableFromEventOpts");class fp extends By{constructor(e,t,n,s,o){super(),this._debugNameData=e,this.event=t,this._getValue=n,this._getTransaction=s,this._equalityComparator=o}static{Di(this,"FromEventObservable")}static globalTransaction;value;hasValue=!1;subscription;getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}handleEvent=Di(e=>{const t=this._getValue(e),n=this.value,s=!this.hasValue||!this._equalityComparator(n,t);let o=!1;s&&(this.value=t,this.hasValue&&(o=!0,PN(this._getTransaction(),r=>{zd()?.handleFromEventObservableTriggered(this,{oldValue:n,newValue:t,change:void 0,didChange:s,hadValue:this.hasValue});for(const a of this.observers)r.updateObserver(a,this),a.handleChange(this,void 0)},()=>{const r=this.getDebugName();return"Event fired"+(r?`: ${r}`:"")})),this.hasValue=!0),o||zd()?.handleFromEventObservableTriggered(this,{oldValue:n,newValue:t,change:void 0,didChange:s,hadValue:this.hasValue})},"handleEvent");onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}(i=>{i.Observer=fp;function e(t,n){let s=!1;fp.globalTransaction===void 0&&(fp.globalTransaction=t,s=!0);try{n()}finally{s&&(fp.globalTransaction=void 0)}}i.batchEventsGlobally=e,Di(e,"batchEventsGlobally")})(pn||(pn={}));function kl(i,e){return new tue(i,e)}Di(kl,"observableSignalFromEvent");class tue extends By{constructor(e,t){super(),this.debugName=e,this.event=t}static{Di(this,"FromEventObservableSignal")}subscription;onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}handleEvent=Di(()=>{us(e=>{for(const t of this.observers)e.updateObserver(t,this),t.handleChange(this,void 0)},()=>this.debugName)},"handleEvent");onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function TL(i){return typeof i=="string"?new K9(i):new K9(void 0,i)}Di(TL,"observableSignal");class K9 extends By{constructor(e,t){super(),this._debugName=e,this._owner=t}static{Di(this,"ObservableSignal")}get debugName(){return new uo(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}trigger(e,t){if(!e){us(n=>{this.trigger(n,t)},()=>`Trigger signal ${this.debugName}`);return}for(const n of this.observers)e.updateObserver(n,this),n.handleChange(this,t)}get(){}}function iue(i,e){return Ig({owner:i,equalsFn:Di(()=>!1,"equalsFn")},t=>{e.read(t)})}Di(iue,"signalFromObservable");function nue(i,e,t){const n=ci("debounced",void 0);let s;return t.add(Li(o=>{const r=i.read(o);s&&clearTimeout(s),s=setTimeout(()=>{us(a=>{n.set(r,a)})},e)})),n}Di(nue,"debouncedObservable");function sue(i,e){let t=!1,n,s;return pn(o=>{const r=Li(a=>{const l=i.read(a);t?(s&&clearTimeout(s),s=setTimeout(()=>{n=l,o()},e)):(t=!0,n=l)});return{dispose(){r.dispose(),t=!1,n=void 0}}},()=>t?n:i.get())}Di(sue,"debouncedObservable2");function oue(i,e,t){const n=ci("triggeredRecently",!1);let s;return t.add(i(()=>{n.set(!0,void 0),s&&clearTimeout(s),s=setTimeout(()=>{n.set(!1,void 0)},e)})),n}Di(oue,"wasEventTriggeredRecently");function oK(i){const e=new rK(!1,void 0);return i.addObserver(e),ye(()=>{i.removeObserver(e)})}Di(oK,"keepObserved");vK(oK);function NN(i,e){const t=new rK(!0,e);return i.addObserver(t),e?e(i.get()):i.reportChanges(),ye(()=>{i.removeObserver(t)})}Di(NN,"recomputeInitiallyAndOnChange");_K(NN);class rK{constructor(e,t){this._forceRecompute=e,this._handleValue=t}static{Di(this,"KeepAliveObserver")}_counter=0;beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}}function aK(i,e){let t;return Ig({owner:i,debugReferenceFn:e},s=>(t=e(s,t),t))}Di(aK,"derivedObservableWithCache");function rue(i,e){let t;const n=TL("derivedObservableWithWritableCache"),s=ft(i,o=>(n.read(o),t=e(o,t),t));return Object.assign(s,{clearCache:Di(o=>{t=void 0,n.trigger(o)},"clearCache"),setCache:Di((o,r)=>{t=o,n.trigger(r)},"setCache")})}Di(rue,"derivedObservableWithWritableCache");function aue(i,e,t,n){let s=new j9(t,n);return Ig({debugReferenceFn:t,owner:i,onLastObserverRemoved:Di(()=>{s.dispose(),s=new j9(t)},"onLastObserverRemoved")},r=>(s.setItems(e.read(r)),s.getItems()))}Di(aue,"mapObservableArrayCached");class j9{constructor(e,t){this._map=e,this._keySelector=t}static{Di(this,"ArrayMap")}_cache=new Map;_items=[];dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){const t=[],n=new Set(this._cache.keys());for(const s of e){const o=this._keySelector?this._keySelector(s):s;let r=this._cache.get(o);if(r)n.delete(o);else{const a=new te;r={out:this._map(s,a),store:a},this._cache.set(o,r)}t.push(r.out)}for(const s of n)this._cache.get(s).store.dispose(),this._cache.delete(s);this._items=t}getItems(){return this._items}}class lK{constructor(e){this.observable=e}static{Di(this,"ValueWithChangeEventFromObservable")}get onDidChange(){return H.fromObservableLight(this.observable)}get value(){return this.observable.get()}}function lue(i,e){return e instanceof lK?e.observable:pn(i,e.onDidChange,()=>e.value)}Di(lue,"observableFromValueWithChangeEvent");function cue(i,e){if(e.length===0)throw new Et;let t=!1,n;const s=pn(i,o=>{const r=new te;for(const a of e)r.add(ov({debugName:Di(()=>JW(s,new uo(i,void 0,void 0))+".updateLastChangedValue","debugName")},l=>{t=!0,n=a.read(l),o()}));return r.add({dispose(){t=!1,n=void 0}}),r},()=>t?n:e[e.length-1].get());return s}Di(cue,"latestChangedValue");function cK(i,e){return aK(i,(t,n)=>n??e(t))}Di(cK,"derivedConstOnceDefined");function e5(i,e){let t;return nK({createEmptyChangeSummary:Di(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:Di((n,s)=>{if(n.didChange(i)){const o=n.change;o!==void 0&&s.deltas.push(o),s.didChange=!0}return!0},"handleChange")},(n,s)=>{const o=i.read(n),r=t;s.didChange&&(t=o,e(o,r,s.deltas))})}Di(e5,"runOnChange");function due(i,e){const t=new te,n=e5(i,(s,o,r)=>{t.clear(),e(s,o,r,t)});return{dispose(){n.dispose(),t.dispose()}}}Di(due,"runOnChangeWithStore");var hue=Object.defineProperty,gl=(i,e)=>hue(i,"name",{value:e,configurable:!0});let dK;function uue(i){dK=i}gl(uue,"setLogger");function zd(){return dK}gl(zd,"getLogger");class _ze{static{gl(this,"ConsoleObservableLogger")}indentation=0;textToConsoleArgs(e){return hK([Bm(fK("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[Bm(" "),Sc(Gw(e.oldValue,70),{color:"red",strikeThrough:!0}),Bm(" "),Sc(Gw(e.newValue,60),{color:"green"})]:[Bm(" (unchanged)")]:[Bm(" "),Sc(Gw(e.newValue,60),{color:"green"}),Bm(" (initial)")]}handleObservableChanged(e,t){console.log(...this.textToConsoleArgs([Zv("observable value changed"),Sc(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t)]))}changedObservablesSets=new WeakMap;formatChanges(e){if(e.size!==0)return Sc(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(e){const t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(n,s)=>(this.changedObservablesSets.get(e).add(n),t.apply(e,[n,s]))}handleDerivedRecomputed(e,t){const n=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([Zv("derived recomputed"),Sc(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear()}handleFromEventObservableTriggered(e,t){console.log(...this.textToConsoleArgs([Zv("observable from event triggered"),Sc(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){const t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(n,s)=>(this.changedObservablesSets.get(e).add(n),t.apply(e,[n,s]))}handleAutorunTriggered(e){const t=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([Zv("autorun"),Sc(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.indentation++}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),console.log(...this.textToConsoleArgs([Zv("transaction"),Sc(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}}function hK(i){const e=new Array,t=[];let n="";function s(r){if("length"in r)for(const a of r)a&&s(a);else"text"in r?(n+=`%c${r.text}`,e.push(r.style),r.data&&t.push(...r.data)):"data"in r&&t.push(...r.data)}gl(s,"process"),s(i);const o=[n,...e];return o.push(...t),o}gl(hK,"consoleTextToArgs");function Bm(i){return Sc(i,{color:"black"})}gl(Bm,"normalText");function Zv(i){return Sc(pK(`${i}: `,10),{color:"black",bold:!0})}gl(Zv,"formatKind");function Sc(i,e={color:"black"}){function t(s){return Object.entries(s).reduce((o,[r,a])=>`${o}${r}:${a};`,"")}gl(t,"objToCss");const n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:i,style:t(n)}}gl(Sc,"styled");function Gw(i,e){switch(typeof i){case"number":return""+i;case"string":return i.length+2<=e?`"${i}"`:`"${i.substr(0,e-7)}"+...`;case"boolean":return i?"true":"false";case"undefined":return"undefined";case"object":return i===null?"null":Array.isArray(i)?uK(i,e):gK(i,e);case"symbol":return i.toString();case"function":return`[[Function${i.name?" "+i.name:""}]]`;default:return""+i}}gl(Gw,"formatValue");function uK(i,e){let t="[ ",n=!0;for(const s of i){if(n||(t+=", "),t.length-5>e){t+="...";break}n=!1,t+=`${Gw(s,e-t.length)}`}return t+=" ]",t}gl(uK,"formatArray");function gK(i,e){let t="{ ",n=!0;for(const[s,o]of Object.entries(i)){if(n||(t+=", "),t.length-5>e){t+="...";break}n=!1,t+=`${s}: ${Gw(o,e-t.length)}`}return t+=" }",t}gl(gK,"formatObject");function fK(i,e){let t="";for(let n=1;n<=e;n++)t+=i;return t}gl(fK,"repeat");function pK(i,e){for(;i.length<e;)i+=" ";return i}gl(pK,"padStr");var gue=Object.defineProperty,ta=(i,e)=>gue(i,"name",{value:e,configurable:!0});let mK;function _K(i){mK=i}ta(_K,"_setRecomputeInitiallyAndOnChange");let bK;function vK(i){bK=i}ta(vK,"_setKeepObserved");let HM;function wK(i){HM=i}ta(wK,"_setDerivedOpts");class CK{static{ta(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const n=t===void 0?void 0:e,s=t===void 0?e:t;return HM({owner:n,debugName:ta(()=>{const o=IN(s);if(o!==void 0)return o;const a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(s.toString());if(a)return`${this.debugName}.${a[2]}`;if(!n)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:s},o=>s(this.read(o),o))}flatten(){return HM({owner:void 0,debugName:ta(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(mK(this,t)),this}keepObserved(e){return e.add(bK(this)),this}get debugValue(){return this.get()}}class By extends CK{static{ta(this,"BaseObservable")}observers=new Set;addObserver(e){const t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function us(i,e){const t=new Fy(i,e);try{i(t)}finally{t.finish()}}ta(us,"transaction");let eI;function fue(i){if(eI)i(eI);else{const e=new Fy(i,void 0);eI=e;try{i(e)}finally{e.finish(),eI=void 0}}}ta(fue,"globalTransaction");async function pue(i,e){const t=new Fy(i,e);try{await i(t)}finally{t.finish()}}ta(pue,"asyncTransaction");function PN(i,e,t){i?e(i):us(e,t)}ta(PN,"subtransaction");class Fy{constructor(e,t){this._fn=e,this._getDebugName=t,zd()?.handleBeginTransaction(this)}static{ta(this,"TransactionImpl")}updatingObservers=[];getDebugName(){return this._getDebugName?this._getDebugName():IN(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.updatingObservers;for(let t=0;t<e.length;t++){const{observer:n,observable:s}=e[t];n.endUpdate(s)}this.updatingObservers=null,zd()?.handleEndTransaction()}}function ci(i,e){let t;return typeof i=="string"?t=new uo(void 0,i,void 0):t=new uo(i,void 0,void 0),new t5(t,e,Aa)}ta(ci,"observableValue");class t5 extends By{constructor(e,t,n){super(),this._debugNameData=e,this._equalityComparator=n,this._value=t}static{ta(this,"ObservableValue")}_value;get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(e,t,n){if(n===void 0&&this._equalityComparator(this._value,e))return;let s;t||(t=s=new Fy(()=>{},()=>`Setting ${this.debugName}`));try{const o=this._value;this._setValue(e),zd()?.handleObservableChanged(this,{oldValue:o,newValue:e,change:n,didChange:!0,hadValue:!0});for(const r of this.observers)t.updateObserver(r,this),r.handleChange(this,n)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function yK(i,e){let t;return typeof i=="string"?t=new uo(void 0,i,void 0):t=new uo(i,void 0,void 0),new mue(t,e,Aa)}ta(yK,"disposableObservableValue");class mue extends t5{static{ta(this,"DisposableObservableValue")}_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){this._value?.dispose()}}var _ue=Object.defineProperty,kS=(i,e)=>_ue(i,"name",{value:e,configurable:!0});class bue extends By{constructor(e,t,n){super(),this._debugNameData=e,this._equalityComparator=n,this._value=t}static{kS(this,"LazyObservableValue")}_value;_isUpToDate=!0;_deltas=[];get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(const e of this.observers)for(const t of this._deltas)e.handleChange(this,t);this._deltas.length=0}else for(const e of this.observers)e.handleChange(this,void 0)}_updateCounter=0;_beginUpdate(){if(this._updateCounter++,this._updateCounter===1)for(const e of this.observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){this._update();const e=[...this.observers];for(const t of e)t.endUpdate(this)}}addObserver(e){const t=!this.observers.has(e)&&this._updateCounter>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this._updateCounter>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,n){if(n===void 0&&this._equalityComparator(this._value,e))return;let s;t||(t=s=new Fy(()=>{},()=>`Setting ${this.debugName}`));try{if(this._isUpToDate=!1,this._setValue(e),n!==void 0&&this._deltas.push(n),t.updateObserver({beginUpdate:kS(()=>this._beginUpdate(),"beginUpdate"),endUpdate:kS(()=>this._endUpdate(),"endUpdate"),handleChange:kS((o,r)=>{},"handleChange"),handlePossibleChange:kS(o=>{},"handlePossibleChange")},this),this._updateCounter>1)for(const o of this.observers)o.handlePossibleChange(this)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}var vue=Object.defineProperty,wue=(i,e)=>vue(i,"name",{value:e,configurable:!0});function UM(i,e){return i.lazy?new bue(new uo(i.owner,i.debugName,void 0),e,i.equalsFn??Aa):new t5(new uo(i.owner,i.debugName,void 0),e,i.equalsFn??Aa)}wue(UM,"observableValueOpts");var Cue=Object.defineProperty,RN=(i,e)=>Cue(i,"name",{value:e,configurable:!0});class yue{constructor(e){this._computeValue=e}static{RN(this,"ObservableLazy")}_value=ci(this,void 0);get cachedValue(){return this._value}getValue(){let e=this._value.get();return e||(e=this._computeValue(),this._value.set(e,void 0)),e}}class i5{static{RN(this,"ObservablePromise")}static fromFn(e){return new i5(e())}_value=ci(this,void 0);promise;promiseResult=this._value;constructor(e){this.promise=e.then(t=>(us(n=>{this._value.set(new q9(t,void 0),n)}),t),t=>{throw us(n=>{this._value.set(new q9(void 0,t),n)}),t})}}class q9{constructor(e,t){this.data=e,this.error=t}static{RN(this,"PromiseResult")}getDataOrThrow(){if(this.error)throw this.error;return this.data}}class bze{constructor(e){this._computePromise=e}static{RN(this,"ObservableLazyPromise")}_lazyValue=new yue(()=>new i5(this._computePromise()));cachedPromiseResult=ft(this,e=>this._lazyValue.cachedValue.read(e)?.promiseResult.read(e));getPromise(){return this._lazyValue.getValue().promise}}var Sue=Object.defineProperty,n5=(i,e)=>Sue(i,"name",{value:e,configurable:!0});function SK(i,e,t,n){return e||(e=n5(s=>s!=null,"predicate")),new Promise((s,o)=>{let r=!0,a=!1;const l=i.map(d=>({isFinished:e(d),error:t?t(d):!1,state:d})),c=Li(d=>{const{isFinished:h,error:u,state:f}=l.read(d);(h||u)&&(r?a=!0:c.dispose(),u?o(u===!0?f:u):s(f))});if(n){const d=n.onCancellationRequested(()=>{c.dispose(),d.dispose(),o(new ar)});if(n.isCancellationRequested){c.dispose(),d.dispose(),o(new ar);return}}r=!1,a&&c.dispose()})}n5(SK,"waitForState");function Eue(i,e){let t,n;e===void 0?(t=i,n=void 0):(n=i,t=e);let s;return new Wp(new uo(n,void 0,t),o=>(s&&s.dispose(!0),s=new xr,t(o,s.token)),void 0,void 0,()=>s?.dispose(),Aa)}n5(Eue,"derivedWithCancellationToken");var Lue=Object.defineProperty,Due=(i,e)=>Lue(i,"name",{value:e,configurable:!0});const Iue=globalThis.performance&&typeof globalThis.performance.now=="function";class rv{static{Due(this,"StopWatch")}_startTime;_stopTime;_now;static create(e){return new rv(e)}constructor(e){this._now=Iue&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}const EK=Symbol("MicrotaskDelay");var Tue=Object.defineProperty,Qe=(i,e)=>Tue(i,"name",{value:e,configurable:!0}),H;(i=>{i.None=Qe(()=>$.None,"None");function e(re){}Qe(e,"_addLeakageTraceLogic");function t(re,le){return f(re,()=>{},0,void 0,!0,void 0,le)}i.defer=t,Qe(t,"defer");function n(re){return(le,Ee=null,Se)=>{let ue=!1,fe;return fe=re($e=>{if(!ue)return fe?fe.dispose():ue=!0,le.call(Ee,$e)},null,Se),ue&&fe.dispose(),fe}}i.once=n,Qe(n,"once");function s(re,le){return i.once(i.filter(re,le))}i.onceIf=s,Qe(s,"onceIf");function o(re,le,Ee){return h((Se,ue=null,fe)=>re($e=>Se.call(ue,le($e)),null,fe),Ee)}i.map=o,Qe(o,"map");function r(re,le,Ee){return h((Se,ue=null,fe)=>re($e=>{le($e),Se.call(ue,$e)},null,fe),Ee)}i.forEach=r,Qe(r,"forEach");function a(re,le,Ee){return h((Se,ue=null,fe)=>re($e=>le($e)&&Se.call(ue,$e),null,fe),Ee)}i.filter=a,Qe(a,"filter");function l(re){return re}i.signal=l,Qe(l,"signal");function c(...re){return(le,Ee=null,Se)=>{const ue=Ia(...re.map(fe=>fe($e=>le.call(Ee,$e))));return u(ue,Se)}}i.any=c,Qe(c,"any");function d(re,le,Ee,Se){let ue=Ee;return o(re,fe=>(ue=le(ue,fe),ue),Se)}i.reduce=d,Qe(d,"reduce");function h(re,le){let Ee;const Se={onWillAddFirstListener(){Ee=re(ue.fire,ue)},onDidRemoveLastListener(){Ee?.dispose()}},ue=new x(Se);return le?.add(ue),ue.event}Qe(h,"snapshot");function u(re,le){return le instanceof Array?le.push(re):le&&le.add(re),re}Qe(u,"addAndReturnDisposable");function f(re,le,Ee=100,Se=!1,ue=!1,fe,$e){let Ze,Qt,qt,en=0,as;const Zo={leakWarningThreshold:fe,onWillAddFirstListener(){Ze=re(Mr=>{en++,Qt=le(Qt,Mr),Se&&!qt&&(Sn.fire(Qt),Qt=void 0),as=Qe(()=>{const Bv=Qt;Qt=void 0,qt=void 0,(!Se||en>1)&&Sn.fire(Bv),en=0},"doFire"),typeof Ee=="number"?(clearTimeout(qt),qt=setTimeout(as,Ee)):qt===void 0&&(qt=0,queueMicrotask(as))})},onWillRemoveListener(){ue&&en>0&&as?.()},onDidRemoveLastListener(){as=void 0,Ze.dispose()}},Sn=new x(Zo);return $e?.add(Sn),Sn.event}i.debounce=f,Qe(f,"debounce");function p(re,le=0,Ee){return i.debounce(re,(Se,ue)=>Se?(Se.push(ue),Se):[ue],le,void 0,!0,void 0,Ee)}i.accumulate=p,Qe(p,"accumulate");function m(re,le=(Se,ue)=>Se===ue,Ee){let Se=!0,ue;return a(re,fe=>{const $e=Se||!le(fe,ue);return Se=!1,ue=fe,$e},Ee)}i.latch=m,Qe(m,"latch");function _(re,le,Ee){return[i.filter(re,le,Ee),i.filter(re,Se=>!le(Se),Ee)]}i.split=_,Qe(_,"split");function w(re,le=!1,Ee=[],Se){let ue=Ee.slice(),fe=re(Qt=>{ue?ue.push(Qt):Ze.fire(Qt)});Se&&Se.add(fe);const $e=Qe(()=>{ue?.forEach(Qt=>Ze.fire(Qt)),ue=null},"flush"),Ze=new x({onWillAddFirstListener(){fe||(fe=re(Qt=>Ze.fire(Qt)),Se&&Se.add(fe))},onDidAddFirstListener(){ue&&(le?setTimeout($e):$e())},onDidRemoveLastListener(){fe&&fe.dispose(),fe=null}});return Se&&Se.add(Ze),Ze.event}i.buffer=w,Qe(w,"buffer");function v(re,le){return Qe((Se,ue,fe)=>{const $e=le(new C);return re(function(Ze){const Qt=$e.evaluate(Ze);Qt!==b&&Se.call(ue,Qt)},void 0,fe)},"fn")}i.chain=v,Qe(v,"chain");const b=Symbol("HaltChainable");class C{static{Qe(this,"ChainableSynthesis")}steps=[];map(le){return this.steps.push(le),this}forEach(le){return this.steps.push(Ee=>(le(Ee),Ee)),this}filter(le){return this.steps.push(Ee=>le(Ee)?Ee:b),this}reduce(le,Ee){let Se=Ee;return this.steps.push(ue=>(Se=le(Se,ue),Se)),this}latch(le=(Ee,Se)=>Ee===Se){let Ee=!0,Se;return this.steps.push(ue=>{const fe=Ee||!le(ue,Se);return Ee=!1,Se=ue,fe?ue:b}),this}evaluate(le){for(const Ee of this.steps)if(le=Ee(le),le===b)break;return le}}function S(re,le,Ee=Se=>Se){const Se=Qe((...Ze)=>$e.fire(Ee(...Ze)),"fn"),ue=Qe(()=>re.on(le,Se),"onFirstListenerAdd"),fe=Qe(()=>re.removeListener(le,Se),"onLastListenerRemove"),$e=new x({onWillAddFirstListener:ue,onDidRemoveLastListener:fe});return $e.event}i.fromNodeEventEmitter=S,Qe(S,"fromNodeEventEmitter");function D(re,le,Ee=Se=>Se){const Se=Qe((...Ze)=>$e.fire(Ee(...Ze)),"fn"),ue=Qe(()=>re.addEventListener(le,Se),"onFirstListenerAdd"),fe=Qe(()=>re.removeEventListener(le,Se),"onLastListenerRemove"),$e=new x({onWillAddFirstListener:ue,onDidRemoveLastListener:fe});return $e.event}i.fromDOMEventEmitter=D,Qe(D,"fromDOMEventEmitter");function T(re){return new Promise(le=>n(re)(le))}i.toPromise=T,Qe(T,"toPromise");function I(re){const le=new x;return re.then(Ee=>{le.fire(Ee)},()=>{le.fire(void 0)}).finally(()=>{le.dispose()}),le.event}i.fromPromise=I,Qe(I,"fromPromise");function R(re,le){return re(Ee=>le.fire(Ee))}i.forward=R,Qe(R,"forward");function G(re,le,Ee){return le(Ee),re(Se=>le(Se))}i.runAndSubscribe=G,Qe(G,"runAndSubscribe");class K{constructor(le,Ee){this._observable=le;const Se={onWillAddFirstListener:Qe(()=>{le.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:Qe(()=>{le.removeObserver(this)},"onDidRemoveLastListener")};this.emitter=new x(Se),Ee&&Ee.add(this.emitter)}static{Qe(this,"EmitterObserver")}emitter;_counter=0;_hasChanged=!1;beginUpdate(le){this._counter++}handlePossibleChange(le){}handleChange(le,Ee){this._hasChanged=!0}endUpdate(le){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function X(re,le){return new K(re,le).emitter.event}i.fromObservable=X,Qe(X,"fromObservable");function we(re){return(le,Ee,Se)=>{let ue=0,fe=!1;const $e={beginUpdate(){ue++},endUpdate(){ue--,ue===0&&(re.reportChanges(),fe&&(fe=!1,le.call(Ee)))},handlePossibleChange(){},handleChange(){fe=!0}};re.addObserver($e),re.reportChanges();const Ze={dispose(){re.removeObserver($e)}};return Se instanceof te?Se.add(Ze):Array.isArray(Se)&&Se.push(Ze),Ze}}i.fromObservableLight=we,Qe(we,"fromObservableLight")})(H||(H={}));class kA{static{Qe(this,"EventProfiling")}static all=new Set;static _idPool=0;name;listenerCount=0;invocationCount=0;elapsedOverall=0;durations=[];_stopWatch;constructor(e){this.name=`${e}_${kA._idPool++}`,kA.all.add(this)}start(e){this._stopWatch=new rv,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}}let F1=-1;function LK(i){const e=F1;return F1=i,{dispose(){F1=e}}}Qe(LK,"setGlobalLeakWarningThreshold");class s5{constructor(e,t,n=(s5._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=t,this.name=n}static{Qe(this,"LeakageMonitor")}static _idPool=1;_stacks;_warnCountdown=0;dispose(){this._stacks?.clear()}check(e,t){const n=this.threshold;if(n<=0||t<n)return;this._stacks||(this._stacks=new Map);const s=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,s+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;const[o,r]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${r}):`;console.warn(a),console.warn(o);const l=new Aue(a,o);this._errorHandler(l)}return()=>{const o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(const[n,s]of this._stacks)(!e||t<s)&&(e=[n,s],t=s);return e}}class o5{constructor(e){this.value=e}static{Qe(this,"Stacktrace")}static create(){const e=new Error;return new o5(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class Aue extends Error{static{Qe(this,"ListenerLeakError")}constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}}class xue extends Error{static{Qe(this,"ListenerRefusalError")}constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}}let kue=0;class iT{constructor(e){this.value=e}static{Qe(this,"UniqueContainer")}stack;id=kue++}const Nue=2,Pue=Qe((i,e)=>{if(i instanceof iT)e(i);else for(let t=0;t<i.length;t++){const n=i[t];n&&e(n)}},"forEachListener");class x{static{Qe(this,"Emitter")}_options;_leakageMon;_perfMon;_disposed;_event;_listeners;_deliveryQueue;_size=0;constructor(e){this._options=e,this._leakageMon=F1>0||this._options?.leakWarningThreshold?new s5(e?.onListenerError??Kt,this._options?.leakWarningThreshold??F1):void 0,this._perfMon=this._options?._profName?new kA(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(e,t,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const a=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(a);const l=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],c=new xue(`${a}. HINT: Stack shows most frequent listener (${l[1]}-times)`,l[0]);return(this._options?.onListenerError||Kt)(c),$.None}if(this._disposed)return $.None;t&&(e=e.bind(t));const s=new iT(e);let o;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(s.stack=o5.create(),o=this._leakageMon.check(s.stack,this._size+1)),this._listeners?this._listeners instanceof iT?(this._deliveryQueue??=new DK,this._listeners=[this._listeners,s]):this._listeners.push(s):(this._options?.onWillAddFirstListener?.(this),this._listeners=s,this._options?.onDidAddFirstListener?.(this)),this._size++;const r=ye(()=>{o?.(),this._removeListener(s)});return n instanceof te?n.add(r):Array.isArray(n)&&n.push(r),r},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}const t=this._listeners,n=t.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[n]=void 0;const s=this._deliveryQueue.current===this;if(this._size*Nue<=t.length){let o=0;for(let r=0;r<t.length;r++)t[r]?t[o++]=t[r]:s&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=o}}_deliver(e,t){if(!e)return;const n=this._options?.onListenerError||Kt;if(!n){e.value(t);return}try{e.value(t)}catch(s){n(s)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof iT)this._deliver(this._listeners,e);else{const t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}this._perfMon?.stop()}hasListeners(){return this._size>0}}const Rue=Qe(()=>new DK,"createEventDeliveryQueue");class DK{static{Qe(this,"EventDeliveryQueuePrivate")}i=-1;end=0;current;value;enqueue(e,t,n){this.i=0,this.end=n,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class hO extends x{static{Qe(this,"AsyncEmitter")}_asyncDeliveryQueue;async fireAsync(e,t,n){if(this._listeners)for(this._asyncDeliveryQueue||(this._asyncDeliveryQueue=new ru),Pue(this._listeners,s=>this._asyncDeliveryQueue.push([s.value,e]));this._asyncDeliveryQueue.size>0&&!t.isCancellationRequested;){const[s,o]=this._asyncDeliveryQueue.shift(),r=[],a={...o,token:t,waitUntil:Qe(l=>{if(Object.isFrozen(r))throw new Error("waitUntil can NOT be called asynchronous");n&&(l=n(l,s)),r.push(l)},"waitUntil")};try{s(a)}catch(l){Kt(l);continue}Object.freeze(r),await Promise.allSettled(r).then(l=>{for(const c of l)c.status==="rejected"&&Kt(c.reason)})}}}class NA extends x{static{Qe(this,"PauseableEmitter")}_isPaused=0;_eventQueue=new ru;_mergeFn;get isPaused(){return this._isPaused!==0}constructor(e){super(e),this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class Oue extends NA{static{Qe(this,"DebounceEmitter")}_delay;_handle;constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class Mue extends x{static{Qe(this,"MicrotaskEmitter")}_queuedEvents=[];_mergeFn;constructor(e){super(e),this._mergeFn=e?.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}class r5{static{Qe(this,"EventMultiplexer")}emitter;hasListeners=!1;events=[];constructor(){this.emitter=new x({onWillAddFirstListener:Qe(()=>this.onFirstListenerAdd(),"onWillAddFirstListener"),onDidRemoveLastListener:Qe(()=>this.onLastListenerRemove(),"onDidRemoveLastListener")})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),ye(Bp(Qe(()=>{this.hasListeners&&this.unhook(t);const s=this.events.indexOf(t);this.events.splice(s,1)},"dispose")))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){e.listener?.dispose(),e.listener=null}dispose(){this.emitter.dispose();for(const e of this.events)e.listener?.dispose();this.events=[]}}class vze{static{Qe(this,"DynamicListEventMultiplexer")}_store=new te;event;constructor(e,t,n,s){const o=this._store.add(new r5),r=this._store.add(new ah);function a(l){r.set(l,o.add(s(l)))}Qe(a,"addItem");for(const l of e)a(l);this._store.add(t(l=>{a(l)})),this._store.add(n(l=>{r.deleteAndDispose(l)})),this.event=o.event}dispose(){this._store.dispose()}}class a5{static{Qe(this,"EventBufferer")}data=[];wrapEvent(e,t,n){return(s,o,r)=>e(a=>{const l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>s.call(o,a)):s.call(o,a);return}const c=l;if(!c){s.call(o,t(n,a));return}c.items??=[],c.items.push(a),c.buffers.length===0&&l.buffers.push(()=>{c.reducedResult??=n?c.items.reduce(t,n):c.items.reduce(t),s.call(o,c.reducedResult)})},void 0,r)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const n=e();return this.data.pop(),t.buffers.forEach(s=>s()),n}}class Nl{static{Qe(this,"Relay")}listening=!1;inputEvent=H.None;inputEventListener=$.None;emitter=new x({onDidAddFirstListener:Qe(()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},"onDidAddFirstListener"),onDidRemoveLastListener:Qe(()=>{this.listening=!1,this.inputEventListener.dispose()},"onDidRemoveLastListener")});event=this.emitter.event;set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}class wze{constructor(e){this._value=e}static{Qe(this,"ValueWithChangeEvent")}static const(e){return new Bue(e)}_onDidChange=new x;onDidChange=this._onDidChange.event;get value(){return this._value}set value(e){e!==this._value&&(this._value=e,this._onDidChange.fire(void 0))}}class Bue{constructor(e){this.value=e}static{Qe(this,"ConstValueWithChangeEvent")}onDidChange=H.None}function Fue(i,e,t){const n=new ah;let s=new Set(i());for(const r of s)n.set(r,t(r));const o=new te;return o.add(e(()=>{const r=i(),a=mG(s,r);for(const l of a.removed)n.deleteAndDispose(l);for(const l of a.added)n.set(l,t(l));s=new Set(r)})),o.add(n),o}Qe(Fue,"trackSetChanges");var Vue=Object.defineProperty,Wue=(i,e)=>Vue(i,"name",{value:e,configurable:!0});class $f{static{Wue(this,"SyncDescriptor")}ctor;staticArguments;supportsDelayedInstantiation;constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}var Hue=Object.defineProperty,Uue=(i,e)=>Hue(i,"name",{value:e,configurable:!0});class av{static{Uue(this,"ServiceCollection")}_entries=new Map;constructor(...e){for(const[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}var zue=Object.defineProperty,AL=(i,e)=>zue(i,"name",{value:e,configurable:!0}),Od;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=e,AL(e,"getServiceDependencies")})(Od||(Od={}));const He=De("instantiationService");function IK(i,e,t){e[Od.DI_TARGET]===e?e[Od.DI_DEPENDENCIES].push({id:i,index:t}):(e[Od.DI_DEPENDENCIES]=[{id:i,index:t}],e[Od.DI_TARGET]=e)}AL(IK,"storeServiceDependency");function De(i){if(Od.serviceIds.has(i))return Od.serviceIds.get(i);const e=AL(function(t,n,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");IK(e,t,s)},"id");return e.toString=()=>i,Od.serviceIds.set(i,e),e}AL(De,"createDecorator");function $ue(i){return i}AL($ue,"refineServiceDecorator");const Vy=De("environmentService");var Gue=Object.defineProperty,Kue=(i,e)=>Gue(i,"name",{value:e,configurable:!0});class jue{static{Kue(this,"RegistryImpl")}data=new Map;add(e,t){eT(hn(e)),eT(On(t)),eT(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}knows(e){return this.data.has(e)}as(e){return this.data.get(e)||null}}const Xt=new jue;var que=Object.defineProperty,G0=(i,e)=>que(i,"name",{value:e,configurable:!0});class Cze{constructor(e){this.task=e}static{G0(this,"Cache")}result=null;get(){if(this.result)return this.result;const e=new xr,t=this.task(e.token);return this.result={promise:t,dispose:G0(()=>{this.result=null,e.cancel(),e.dispose()},"dispose")},this.result}}function l5(i){return i}G0(l5,"identity");class Yue{static{G0(this,"LRUCachedFunction")}lastCache=void 0;lastArgKey=void 0;_fn;_computeKey;constructor(e,t){typeof e=="function"?(this._fn=e,this._computeKey=l5):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}class PA{static{G0(this,"CachedFunction")}_map=new Map;_map2=new Map;get cachedValues(){return this._map}_fn;_computeKey;constructor(e,t){typeof e=="function"?(this._fn=e,this._computeKey=l5):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);const n=this._fn(e);return this._map.set(e,n),this._map2.set(t,n),n}}var Zue=Object.defineProperty,Xue=(i,e)=>Zue(i,"name",{value:e,configurable:!0});class cr{constructor(e){this.executor=e}static{Xue(this,"Lazy")}_didRun=!1;_value;_error;get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}var Que=Object.defineProperty,TK=(i,e)=>Que(i,"name",{value:e,configurable:!0}),fn=(i=>(i[i.MAX_SAFE_SMALL_INTEGER=0x40000000]="MAX_SAFE_SMALL_INTEGER",i[i.MIN_SAFE_SMALL_INTEGER=-0x40000000]="MIN_SAFE_SMALL_INTEGER",i[i.MAX_UINT_8=255]="MAX_UINT_8",i[i.MAX_UINT_16=65535]="MAX_UINT_16",i[i.MAX_UINT_32=0xffffffff]="MAX_UINT_32",i[i.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN",i))(fn||{});function K0(i){return i<0?0:i>255?255:i|0}TK(K0,"toUint8");function Fm(i){return i<0?0:i>0xffffffff?0xffffffff:i|0}TK(Fm,"toUint32");var Jue=Object.defineProperty,qe=(i,e)=>Jue(i,"name",{value:e,configurable:!0});function RA(i){return!i||typeof i!="string"?!0:i.trim().length===0}qe(RA,"isFalsyOrWhitespace");const ege=/{(\d+)}/g;function zM(i,...e){return e.length===0?i:i.replace(ege,function(t,n){const s=parseInt(n,10);return isNaN(s)||s<0||s>=e.length?t:e[s]})}qe(zM,"format");const tge=/{([^}]+)}/g;function ige(i,e){return Object.keys(e).length===0?i:i.replace(tge,(t,n)=>e[n]??t)}qe(ige,"format2");function AK(i){return i.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}qe(AK,"htmlAttributeEncodeValue");function Y_(i){return i.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}qe(Y_,"escape");function Yd(i){return i.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}qe(Yd,"escapeRegExpCharacters");function nge(i,e){let t=0,n=i.indexOf(e);for(;n!==-1;)t++,n=i.indexOf(e,n+e.length);return t}qe(nge,"count");function sge(i,e,t=""){return i.length<=e?i:`${i.substr(0,e)}${t}`}qe(sge,"truncate");function oge(i,e,t=""){if(i.length<=e)return i;const n=Math.ceil(e/2)-t.length/2,s=Math.floor(e/2)-t.length/2;return`${i.substr(0,n)}${t}${i.substr(i.length-s)}`}qe(oge,"truncateMiddle");function xK(i,e=" "){const t=Wy(i,e);return Lb(t,e)}qe(xK,"trim");function Wy(i,e){if(!i||!e)return i;const t=e.length;if(t===0||i.length===0)return i;let n=0;for(;i.indexOf(e,n)===n;)n=n+t;return i.substring(n)}qe(Wy,"ltrim");function Lb(i,e){if(!i||!e)return i;const t=e.length,n=i.length;if(t===0||n===0)return i;let s=n,o=-1;for(;o=i.lastIndexOf(e,s-1),!(o===-1||o+t!==s);){if(o===0)return"";s=o}return i.substring(0,s)}qe(Lb,"rtrim");function kK(i){return i.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}qe(kK,"convertSimple2RegExpPattern");function NK(i){return i.replace(/\*/g,"")}qe(NK,"stripWildcards");function c5(i,e,t={}){if(!i)throw new Error("Cannot create regex from empty string");e||(i=Yd(i)),t.wholeWord&&(/\B/.test(i.charAt(0))||(i="\\b"+i),/\B/.test(i.charAt(i.length-1))||(i=i+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(i,n)}qe(c5,"createRegExp");function rge(i){return i.source==="^"||i.source==="^$"||i.source==="$"||i.source==="^\\s*$"?!1:!!(i.exec("")&&i.lastIndex===0)}qe(rge,"regExpLeadsToEndlessLoop");function xL(i){return i.split(/\r\n|\r|\n/)}qe(xL,"splitLines");function age(i){const e=[],t=i.split(/(\r\n|\r|\n)/);for(let n=0;n<Math.ceil(t.length/2);n++)e.push(t[2*n]+(t[2*n+1]??""));return e}qe(age,"splitLinesIncludeSeparators");function ia(i){for(let e=0,t=i.length;e<t;e++){const n=i.charCodeAt(e);if(n!==A.Space&&n!==A.Tab)return e}return-1}qe(ia,"firstNonWhitespaceIndex");function Co(i,e=0,t=i.length){for(let n=e;n<t;n++){const s=i.charCodeAt(n);if(s!==A.Space&&s!==A.Tab)return i.substring(e,n)}return i.substring(e,t)}qe(Co,"getLeadingWhitespace");function nm(i,e=i.length-1){for(let t=e;t>=0;t--){const n=i.charCodeAt(t);if(n!==A.Space&&n!==A.Tab)return t}return-1}qe(nm,"lastNonWhitespaceIndex");function lge(i,e,t){const n=[];let s=0;for(const o of i.matchAll(e)){if(n.push(i.slice(s,o.index)),o.index===void 0)throw new Error("match.index should be defined");s=o.index+o[0].length,n.push(t(o[0],...o.slice(1),o.index,i,o.groups))}return n.push(i.slice(s)),Promise.all(n).then(o=>o.join(""))}qe(lge,"replaceAsync");function OA(i,e){return i<e?-1:i>e?1:0}qe(OA,"compare");function ON(i,e,t=0,n=i.length,s=0,o=e.length){for(;t<n&&s<o;t++,s++){const l=i.charCodeAt(t),c=e.charCodeAt(s);if(l<c)return-1;if(l>c)return 1}const r=n-t,a=o-s;return r<a?-1:r>a?1:0}qe(ON,"compareSubstring");function MA(i,e){return Hy(i,e,0,i.length,0,e.length)}qe(MA,"compareIgnoreCase");function Hy(i,e,t=0,n=i.length,s=0,o=e.length){for(;t<n&&s<o;t++,s++){let l=i.charCodeAt(t),c=e.charCodeAt(s);if(l===c)continue;if(l>=128||c>=128)return ON(i.toLowerCase(),e.toLowerCase(),t,n,s,o);L_(l)&&(l-=32),L_(c)&&(c-=32);const d=l-c;if(d!==0)return d}const r=n-t,a=o-s;return r<a?-1:r>a?1:0}qe(Hy,"compareSubstringIgnoreCase");function n1(i){return i>=A.Digit0&&i<=A.Digit9}qe(n1,"isAsciiDigit");function L_(i){return i>=A.a&&i<=A.z}qe(L_,"isLowerAsciiLetter");function Qu(i){return i>=A.A&&i<=A.Z}qe(Qu,"isUpperAsciiLetter");function Gh(i,e){return i.length===e.length&&Hy(i,e)===0}qe(Gh,"equalsIgnoreCase");function Uy(i,e){const t=e.length;return e.length>i.length?!1:Hy(i,e,0,t)===0}qe(Uy,"startsWithIgnoreCase");function BA(i,e){const t=Math.min(i.length,e.length);let n;for(n=0;n<t;n++)if(i.charCodeAt(n)!==e.charCodeAt(n))return n;return t}qe(BA,"commonPrefixLength");function FA(i,e){const t=Math.min(i.length,e.length);let n;const s=i.length-1,o=e.length-1;for(n=0;n<t;n++)if(i.charCodeAt(s-n)!==e.charCodeAt(o-n))return n;return t}qe(FA,"commonSuffixLength");function Ds(i){return 55296<=i&&i<=56319}qe(Ds,"isHighSurrogate");function Db(i){return 56320<=i&&i<=57343}qe(Db,"isLowSurrogate");function MN(i,e){return(i-55296<<10)+(e-56320)+65536}qe(MN,"computeCodePoint");function j0(i,e,t){const n=i.charCodeAt(t);if(Ds(n)&&t+1<e){const s=i.charCodeAt(t+1);if(Db(s))return MN(n,s)}return n}qe(j0,"getNextCodePoint");function PK(i,e){const t=i.charCodeAt(e-1);if(Db(t)&&e>1){const n=i.charCodeAt(e-2);if(Ds(n))return MN(n,t)}return t}qe(PK,"getPrevCodePoint");class BN{static{qe(this,"CodePointIterator")}_str;_len;_offset;get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=PK(this._str,this._offset);return this._offset-=e>=fn.UNICODE_SUPPLEMENTARY_PLANE_BEGIN?2:1,e}nextCodePoint(){const e=j0(this._str,this._len,this._offset);return this._offset+=e>=fn.UNICODE_SUPPLEMENTARY_PLANE_BEGIN?2:1,e}eol(){return this._offset>=this._len}}class q0{static{qe(this,"GraphemeIterator")}_iterator;get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new BN(e,t)}nextGraphemeLength(){const e=pp.getInstance(),t=this._iterator,n=t.offset;let s=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const o=t.offset,r=e.getGraphemeBreakType(t.nextCodePoint());if($M(s,r)){t.setOffset(o);break}s=r}return t.offset-n}prevGraphemeLength(){const e=pp.getInstance(),t=this._iterator,n=t.offset;let s=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const o=t.offset,r=e.getGraphemeBreakType(t.prevCodePoint());if($M(r,s)){t.setOffset(o);break}s=r}return n-t.offset}eol(){return this._iterator.eol()}}function FN(i,e){return new q0(i,e).nextGraphemeLength()}qe(FN,"nextCharLength");function d5(i,e){return new q0(i,e).prevGraphemeLength()}qe(d5,"prevCharLength");function h5(i,e){e>0&&Db(i.charCodeAt(e))&&e--;const t=e+FN(i,e);return[t-d5(i,t),t]}qe(h5,"getCharContainingOffset");function cge(i){const e=new q0(i);let t=0;for(;!e.eol();)t++,e.nextGraphemeLength();return t}qe(cge,"charCount");let uO;function RK(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}qe(RK,"makeContainsRtl");function VC(i){return uO||(uO=RK()),uO.test(i)}qe(VC,"containsRTL");const dge=/^[\t\n\r\x20-\x7E]*$/;function VN(i){return dge.test(i)}qe(VN,"isBasicASCII");const OK=/[\u2028\u2029]/;function u5(i){return OK.test(i)}qe(u5,"containsUnusualLineTerminators");function Kg(i){return i>=11904&&i<=55215||i>=63744&&i<=64255||i>=65281&&i<=65374}qe(Kg,"isFullWidthCharacter");function WN(i){return i>=127462&&i<=127487||i===8986||i===8987||i===9200||i===9203||i>=9728&&i<=10175||i===11088||i===11093||i>=127744&&i<=128591||i>=128640&&i<=128764||i>=128992&&i<=129008||i>=129280&&i<=129535||i>=129648&&i<=129782}qe(WN,"isEmojiImprecise");function hge(i,e,t=""){const n=i.trimStart();if(n.length<e)return n;const s=/\b/g;let o=0;for(;s.test(n)&&!(n.length-s.lastIndex<e);)o=s.lastIndex,s.lastIndex+=1;return o===0?n:t+n.substring(o).trimStart()}qe(hge,"lcut");const MK=/(?:(?:\x1b\[|\x9B)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~])|(:?\x1b\].*?\x07)/g;function*uge(i){let e=0;for(const t of i.matchAll(MK))e!==t.index&&(yield{isCode:!1,str:i.substring(e,t.index)}),yield{isCode:!0,str:t[0]},e=t.index+t[0].length;e!==i.length&&(yield{isCode:!1,str:i.substring(e)})}qe(uge,"forAnsiStringParts");function BK(i){return i&&(i=i.replace(MK,"")),i}qe(BK,"removeAnsiEscapeCodes");const gge=/\\\[.*?\\\]/g;function fge(i){return BK(i).replace(gge,"")}qe(fge,"removeAnsiEscapeCodesFromPrompt");const pge=String.fromCharCode(A.UTF8_BOM);function g5(i){return!!(i&&i.length>0&&i.charCodeAt(0)===A.UTF8_BOM)}qe(g5,"startsWithUTF8BOM");function mge(i){return g5(i)?i.substr(1):i}qe(mge,"stripUTF8BOM");function _ge(i,e){if(!i||!e||i.length<e.length)return!1;const t=e.length,n=i.toLowerCase();let s=0,o=-1;for(;s<t;){const r=n.indexOf(e[s],o+1);if(r<0)return!1;o=r,s++}return!0}qe(_ge,"fuzzyContains");function bge(i,e=!1){return i?(e&&(i=i.replace(/\\./g,"")),i.toLowerCase()!==i):!1}qe(bge,"containsUppercaseCharacter");function vge(i){return i.charAt(0).toUpperCase()+i.slice(1)}qe(vge,"uppercaseFirstLetter");function wge(i,e=1){if(e===0)return"";let t=-1;do t=i.indexOf(`
`,t+1),e--;while(e>0&&t>=0);return t===-1?i:(i[t-1]==="\r"&&t--,i.substr(0,t))}qe(wge,"getNLines");function f5(i){const e=A.Z-A.A+1;return i=i%(2*e),i<e?String.fromCharCode(A.a+i):String.fromCharCode(A.A+i-e)}qe(f5,"singleLetterHash");function Cge(i){return pp.getInstance().getGraphemeBreakType(i)}qe(Cge,"getGraphemeBreakType");function $M(i,e){return i===0?e!==5&&e!==7:i===2&&e===3?!1:i===4||i===2||i===3||e===4||e===2||e===3?!0:!(i===8&&(e===8||e===9||e===11||e===12)||(i===11||i===9)&&(e===9||e===10)||(i===12||i===10)&&e===10||e===5||e===13||e===7||i===1||i===13&&e===14||i===6&&e===6)}qe($M,"breakBetweenGraphemeBreakType");class pp{static{qe(this,"GraphemeBreakTree")}static _INSTANCE=null;static getInstance(){return pp._INSTANCE||(pp._INSTANCE=new pp),pp._INSTANCE}_data;constructor(){this._data=FK()}getGraphemeBreakType(e){if(e<32)return e===A.LineFeed?3:e===A.CarriageReturn?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let s=1;for(;s<=n;)if(e<t[3*s])s=2*s;else if(e>t[3*s+1])s=2*s+1;else return t[3*s+2];return 0}}function FK(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}qe(FK,"getGraphemeBreakRawData");function VK(i,e){if(i===0)return 0;const t=WK(i,e);if(t!==void 0)return t;const n=new BN(e,i);return n.prevCodePoint(),n.offset}qe(VK,"getLeftDeleteOffset");function WK(i,e){const t=new BN(e,i);let n=t.prevCodePoint();for(;HK(n)||n===65039||n===8419;){if(t.offset===0)return;n=t.prevCodePoint()}if(!WN(n))return;let s=t.offset;return s>0&&t.prevCodePoint()===8205&&(s=t.offset),s}qe(WK,"getOffsetBeforeLastEmojiComponent");function HK(i){return 127995<=i&&i<=127999}qe(HK,"isEmojiModifier");class mp{constructor(e){this.confusableDictionary=e}static{qe(this,"AmbiguousCharacters")}static ambiguousCharacterData=new cr(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));static cache=new Yue({getCacheKey:JSON.stringify},e=>{function t(d){const h=new Map;for(let u=0;u<d.length;u+=2)h.set(d[u],d[u+1]);return h}qe(t,"arrayToMap");function n(d,h){const u=new Map(d);for(const[f,p]of h)u.set(f,p);return u}qe(n,"mergeMaps");function s(d,h){if(!d)return h;const u=new Map;for(const[f,p]of d)h.has(f)&&u.set(f,p);return u}qe(s,"intersectMaps");const o=this.ambiguousCharacterData.value;let r=e.filter(d=>!d.startsWith("_")&&d in o);r.length===0&&(r=["_default"]);let a;for(const d of r){const h=t(o[d]);a=s(a,h)}const l=t(o._common),c=n(l,a);return new mp(c)});static getInstance(e){return mp.cache.get(Array.from(e))}static _locales=new cr(()=>Object.keys(mp.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));static getLocales(){return mp._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let t=0;t<e.length;t++){const n=e.codePointAt(t);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}class _p{static{qe(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static _data=void 0;static getData(){return this._data||(this._data=new Set(_p.getRawData())),this._data}static isInvisibleCharacter(e){return _p.getData().has(e)}static containsInvisibleCharacter(e){for(let t=0;t<e.length;t++){const n=e.codePointAt(t);if(typeof n=="number"&&_p.isInvisibleCharacter(n))return!0}return!1}static get codePoints(){return _p.getData()}}var yge=Object.defineProperty,kr=(i,e)=>yge(i,"name",{value:e,configurable:!0});function Vu(i){return i===A.Slash||i===A.Backslash}kr(Vu,"isPathSeparator");function WC(i){return i.replace(/[\\/]/g,kt.sep)}kr(WC,"toSlashes");function UK(i){return i.indexOf("/")===-1&&(i=WC(i)),/^[a-zA-Z]:(\/|$)/.test(i)&&(i="/"+i),i}kr(UK,"toPosixPath");function GM(i,e=kt.sep){if(!i)return"";const t=i.length,n=i.charCodeAt(0);if(Vu(n)){if(Vu(i.charCodeAt(1))&&!Vu(i.charCodeAt(2))){let o=3;const r=o;for(;o<t&&!Vu(i.charCodeAt(o));o++);if(r!==o&&!Vu(i.charCodeAt(o+1))){for(o+=1;o<t;o++)if(Vu(i.charCodeAt(o)))return i.slice(0,o+1).replace(/[\\/]/g,e)}}return e}else if(p5(n)&&i.charCodeAt(1)===A.Colon)return Vu(i.charCodeAt(2))?i.slice(0,2)+e:i.slice(0,2);let s=i.indexOf("://");if(s!==-1){for(s+=3;s<t;s++)if(Vu(i.charCodeAt(s)))return i.slice(0,s+1)}return""}kr(GM,"getRoot");function zK(i){if(!Nt||!i||i.length<5)return!1;let e=i.charCodeAt(0);if(e!==A.Backslash||(e=i.charCodeAt(1),e!==A.Backslash))return!1;let t=2;const n=t;for(;t<i.length&&(e=i.charCodeAt(t),e!==A.Backslash);t++);return!(n===t||(e=i.charCodeAt(t+1),isNaN(e)||e===A.Backslash))}kr(zK,"isUNC");const Sge=/[\\/:\*\?"<>\|]/g,Ege=/[/]/g,Lge=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function $K(i,e=Nt){const t=e?Sge:Ege;return!(!i||i.length===0||/^\s+$/.test(i)||(t.lastIndex=0,t.test(i))||e&&Lge.test(i)||i==="."||i===".."||e&&i[i.length-1]==="."||e&&i.length!==i.trim().length||i.length>255)}kr($K,"isValidBasename");function Dge(i,e,t){const n=i===e;return!t||n?n:!i||!e?!1:Gh(i,e)}kr(Dge,"isEqual");function VA(i,e,t,n=$s){if(i===e)return!0;if(!i||!e||e.length>i.length)return!1;if(t){if(!Uy(i,e))return!1;if(e.length===i.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,i.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),i.indexOf(e)===0}kr(VA,"isEqualOrParent");function p5(i){return i>=A.A&&i<=A.Z||i>=A.a&&i<=A.z}kr(p5,"isWindowsDriveLetter");function Ige(i,e){return Nt&&i.endsWith(":")&&(i+=$s),SN(i)||(i=yl(e,i)),i=Np(i),GK(i)}kr(Ige,"sanitizeFilePath");function GK(i){return Nt?(i=Lb(i,$s),i.endsWith(":")&&(i+=$s)):(i=Lb(i,$s),i||(i=$s)),i}kr(GK,"removeTrailingPathSeparator");function Tge(i){const e=Np(i);return Nt?i.length>3?!1:HN(e)&&(i.length===2||e.charCodeAt(2)===A.Backslash):e===kt.sep}kr(Tge,"isRootOrDriveLetter");function HN(i,e=Nt){return e?p5(i.charCodeAt(0))&&i.charCodeAt(1)===A.Colon:!1}kr(HN,"hasDriveLetter");function KK(i,e=Nt){return HN(i,e)?i[0]:void 0}kr(KK,"getDriveLetter");function jK(i,e,t){return e.length>i.length?-1:i===e?0:(t&&(i=i.toLowerCase(),e=e.toLowerCase()),i.indexOf(e))}kr(jK,"indexOfPath");function qK(i){const e=i.split(":");let t,n,s;for(const o of e){const r=Number(o);Gc(r)?n===void 0?n=r:s===void 0&&(s=r):t=t?[t,o].join(":"):o}if(!t)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:t,line:n!==void 0?n:void 0,column:s!==void 0?s:n!==void 0?1:void 0}}kr(qK,"parseLineAndColumnAware");const Age="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",xge="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function kge(i,e,t=8){let n="";for(let o=0;o<t;o++){let r;o===0&&Nt&&!e&&(t===3||t===4)?r=xge:r=Age,n+=r.charAt(Math.floor(Math.random()*r.length))}let s;return e?s=`${e}-${n}`:s=n,i?yl(i,s):s}kr(kge,"randomPath");var Nge=Object.defineProperty,Ib=(i,e)=>Nge(i,"name",{value:e,configurable:!0}),Ve;(i=>{i.inMemory="inmemory",i.vscode="vscode",i.internal="private",i.walkThrough="walkThrough",i.walkThroughSnippet="walkThroughSnippet",i.http="http",i.https="https",i.file="file",i.mailto="mailto",i.untitled="untitled",i.data="data",i.command="command",i.vscodeRemote="vscode-remote",i.vscodeRemoteResource="vscode-remote-resource",i.vscodeManagedRemoteResource="vscode-managed-remote-resource",i.vscodeUserData="vscode-userdata",i.vscodeCustomEditor="vscode-custom-editor",i.vscodeNotebookCell="vscode-notebook-cell",i.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",i.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",i.vscodeNotebookCellOutput="vscode-notebook-cell-output",i.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",i.vscodeNotebookMetadata="vscode-notebook-metadata",i.vscodeInteractiveInput="vscode-interactive-input",i.vscodeSettings="vscode-settings",i.vscodeWorkspaceTrust="vscode-workspace-trust",i.vscodeTerminal="vscode-terminal",i.vscodeChatCodeBlock="vscode-chat-code-block",i.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",i.vscodeChatSesssion="vscode-chat-editor",i.webviewPanel="webview-panel",i.vscodeWebview="vscode-webview",i.extension="extension",i.vscodeFileResource="vscode-file",i.tmp="tmp",i.vsls="vsls",i.vscodeSourceControl="vscode-scm",i.commentsInput="comment",i.codeSetting="code-setting",i.outputChannel="output"})(Ve||(Ve={}));function Z_(i,e){return ne.isUri(i)?Gh(i.scheme,e):Uy(i,e+":")}Ib(Z_,"matchesScheme");function YK(i,...e){return e.some(t=>Z_(i,t))}Ib(YK,"matchesSomeScheme");const Pge="tkn";class Rge{static{Ib(this,"RemoteAuthoritiesImpl")}_hosts=Object.create(null);_ports=Object.create(null);_connectionTokens=Object.create(null);_preferredWebSchema="http";_delegate=null;_serverRootPath="/";setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e,t){this._serverRootPath=ZK(e,t)}getServerRootPath(){return this._serverRootPath}get _remoteResourcesPath(){return kt.join(this._serverRootPath,Ve.vscodeRemoteResource)}set(e,t,n){this._hosts[e]=t,this._ports[e]=n}setConnectionToken(e,t){this._connectionTokens[e]=t}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return Kt(a),e}const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);const s=this._ports[t],o=this._connectionTokens[t];let r=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(r+=`&${Pge}=${encodeURIComponent(o)}`),ne.from({scheme:ui?this._preferredWebSchema:Ve.vscodeRemoteResource,authority:`${n}:${s}`,path:this._remoteResourcesPath,query:r})}}const m5=new Rge;function ZK(i,e){return kt.join(e??"/",`${i.quality??"oss"}-${i.commit??"dev"}`)}Ib(ZK,"getServerRootPath");const XK="vs/../../node_modules",QK="vscode-app";class V1{static{Ib(this,"FileAccessImpl")}static FALLBACK_AUTHORITY=QK;asBrowserUri(e){const t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===Ve.vscodeRemote?m5.rewrite(e):e.scheme===Ve.file&&(ao||she===`${Ve.vscodeFileResource}://${V1.FALLBACK_AUTHORITY}`)?e.with({scheme:Ve.vscodeFileResource,authority:e.authority||V1.FALLBACK_AUTHORITY,query:null,fragment:null}):e}asFileUri(e){const t=this.toUri(e);return this.uriToFileUri(t)}uriToFileUri(e){return e.scheme===Ve.vscodeFileResource?e.with({scheme:Ve.file,authority:e.authority!==V1.FALLBACK_AUTHORITY?e.authority:null,query:null,fragment:null}):e}toUri(e,t){if(ne.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){const n=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(n))return ne.joinPath(ne.parse(n,!0),e);const s=yl(n,e);return ne.file(s)}return ne.parse(t.toUrl(e))}}const Hp=new V1;var Y9;(i=>{const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);i.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function n(o){let r;typeof o=="string"?r=new URL(o).searchParams:o instanceof URL?r=o.searchParams:ne.isUri(o)&&(r=new URL(o.toString(!0)).searchParams);const a=r?.get(t);if(a)return e.get(a)}i.getHeadersFromQuery=n,Ib(n,"getHeadersFromQuery");function s(o,r,a){if(!globalThis.crossOriginIsolated)return;const l=r&&a?"3":a?"2":"1";o instanceof URLSearchParams?o.set(t,l):o[t]=l}i.addSearchParam=s,Ib(s,"addSearchParam")})(Y9||(Y9={}));var Oge=Object.defineProperty,kL=(i,e)=>Oge(i,"name",{value:e,configurable:!0});function Ih(i){return z0(i,!0)}kL(Ih,"originalFSPath");class _5{constructor(e){this._ignorePathCasing=e}static{kL(this,"ExtUri")}compare(e,t,n=!1){return e===t?0:OA(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===Ve.file)return VA(Ih(e),Ih(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(KM(e.authority,t.authority))return VA(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return ne.joinPath(e,...t)}basenameOrAuthority(e){return lh(e)||e.authority}basename(e){return kt.basename(e.path)}extname(e){return kt.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Ve.file?t=ne.file(RG(Ih(e))).path:(t=kt.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==A.Slash&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Ve.file?t=ne.file(Np(Ih(e))).path:t=kt.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!KM(e.authority,t.authority))return;if(e.scheme===Ve.file){const o=PG(Ih(e),Ih(t));return Nt?WC(o):o}let n=e.path||"/";const s=t.path||"/";if(this._ignorePathCasing(e)){let o=0;for(const r=Math.min(n.length,s.length);o<r&&!(n.charCodeAt(o)!==s.charCodeAt(o)&&n.charAt(o).toLowerCase()!==s.charAt(o).toLowerCase());o++);n=s.substr(0,o)+n.substr(o)}return kt.relative(n,s)}resolvePath(e,t){if(e.scheme===Ve.file){const n=ne.file(XI(Ih(e),t));return e.with({authority:n.authority,path:n.path})}return t=UK(t),e.with({path:kt.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Gh(e,t)}hasTrailingPathSeparator(e,t=$s){if(e.scheme===Ve.file){const n=Ih(e);return n.length>GM(n).length&&n[n.length-1]===t}else{const n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===A.Slash&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=$s){return X9(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=$s){let n=!1;if(e.scheme===Ve.file){const s=Ih(e);n=s!==void 0&&s.length===GM(s).length&&s[s.length-1]===t}else{t="/";const s=e.path;n=s.length===1&&s.charCodeAt(s.length-1)===A.Slash}return!n&&!X9(e,t)?e.with({path:e.path+"/"}):e}}const bi=new _5(()=>!1),Mge=new _5(i=>i.scheme===Ve.file?!Gi:!0),JK=new _5(i=>!0),Ta=bi.isEqual.bind(bi),Bge=bi.isEqualOrParent.bind(bi);bi.getComparisonKey.bind(bi);const b5=bi.basenameOrAuthority.bind(bi),lh=bi.basename.bind(bi),v5=bi.extname.bind(bi),zy=bi.dirname.bind(bi),Ti=bi.joinPath.bind(bi);bi.normalizePath.bind(bi);const ej=bi.relativePath.bind(bi),Z9=bi.resolvePath.bind(bi);bi.isAbsolutePath.bind(bi);const KM=bi.isEqualAuthority.bind(bi),X9=bi.hasTrailingPathSeparator.bind(bi);bi.removeTrailingPathSeparator.bind(bi);bi.addTrailingPathSeparator.bind(bi);function Fge(i,e){const t=[];for(let n=0;n<i.length;n++){const s=e(i[n]);i.some((o,r)=>r===n?!1:Bge(s,e(o)))||t.push(i[n])}return t}kL(Fge,"distinctParents");var HC;(i=>{i.META_DATA_LABEL="label",i.META_DATA_DESCRIPTION="description",i.META_DATA_SIZE="size",i.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(r=>{const[a,l]=r.split(":");a&&l&&n.set(a,l)});const o=t.path.substring(0,t.path.indexOf(";"));return o&&n.set(i.META_DATA_MIME,o),n}i.parseMetaData=e,kL(e,"parseMetaData")})(HC||(HC={}));function Vge(i,e,t){if(e){let n=i.path;return n&&n[0]!==kt.sep&&(n=kt.sep+n),i.with({scheme:t,authority:e,path:n})}return i.with({scheme:t})}kL(Vge,"toLocalResource");var Wge=Object.defineProperty,at=(i,e)=>Wge(i,"name",{value:e,configurable:!0});function Y0(i){return!!i&&typeof i.then=="function"}at(Y0,"isThenable");function UC(i){const e=new xr,t=i(e.token),n=new Promise((s,o)=>{const r=e.token.onCancellationRequested(()=>{r.dispose(),o(new ar)});Promise.resolve(t).then(a=>{r.dispose(),e.dispose(),s(a)},a=>{r.dispose(),e.dispose(),o(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(s,o){return n.then(s,o)}catch(s){return this.then(void 0,s)}finally(s){return n.finally(s)}}}at(UC,"createCancelablePromise");function WA(i,e,t){return new Promise((n,s)=>{const o=e.onCancellationRequested(()=>{o.dispose(),n(t)});i.then(n,s).finally(()=>o.dispose())})}at(WA,"raceCancellation");function Hge(i,e){return new Promise((t,n)=>{const s=e.onCancellationRequested(()=>{s.dispose(),n(new ar)});i.then(t,n).finally(()=>s.dispose())})}at(Hge,"raceCancellationError");async function Uge(i){let e=-1;const t=i.map((n,s)=>n.then(o=>(e=s,o)));try{return await Promise.race(t)}finally{i.forEach((n,s)=>{s!==e&&n.cancel()})}}at(Uge,"raceCancellablePromises");function zge(i,e,t){let n;const s=setTimeout(()=>{n?.(void 0),t?.()},e);return Promise.race([i.finally(()=>clearTimeout(s)),new Promise(o=>n=o)])}at(zge,"raceTimeout");function $ge(i){return new Promise((e,t)=>{const n=i();Y0(n)?n.then(e,t):e(n)})}at($ge,"asPromise");function w5(){let i,e;return{promise:new Promise((n,s)=>{i=n,e=s}),resolve:i,reject:e}}at(w5,"promiseWithResolvers");class Gge{static{at(this,"Throttler")}activePromise;queuedPromise;queuedPromiseFactory;isDisposed=!1;constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=at(()=>{if(this.queuedPromise=null,this.isDisposed)return;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n},"onComplete");this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(s=>{this.activePromise=null,t(s)},s=>{this.activePromise=null,n(s)})})}dispose(){this.isDisposed=!0}}class yze{static{at(this,"Sequencer")}current=Promise.resolve(null);queue(e){return this.current=this.current.then(()=>e(),()=>e())}}class Kge{static{at(this,"SequencerByKey")}promiseMap=new Map;queue(e,t){const s=(this.promiseMap.get(e)??Promise.resolve()).catch(()=>{}).then(t).finally(()=>{this.promiseMap.get(e)===s&&this.promiseMap.delete(e)});return this.promiseMap.set(e,s),s}}const jge=at((i,e)=>{let t=!0;const n=setTimeout(()=>{t=!1,e()},i);return{isTriggered:at(()=>t,"isTriggered"),dispose:at(()=>{clearTimeout(n),t=!1},"dispose")}},"timeoutDeferred"),qge=at(i=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,i())}),{isTriggered:at(()=>e,"isTriggered"),dispose:at(()=>{e=!1},"dispose")}},"microtaskDeferred");class $y{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}static{at(this,"Delayer")}deferred;completionPromise;doResolve;doReject;task;trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((s,o)=>{this.doResolve=s,this.doReject=o}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const s=this.task;return this.task=null,s()}}));const n=at(()=>{this.deferred=null,this.doResolve?.(null)},"fn");return this.deferred=t===EK?qge(n):jge(t,n),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new ar),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}class tj{static{at(this,"ThrottledDelayer")}delayer;throttler;constructor(e){this.delayer=new $y(e),this.throttler=new Gge}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}class C5{static{at(this,"Barrier")}_isOpen;_promise;_completePromise;constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}class Sze extends C5{static{at(this,"AutoOpenBarrier")}_timeout;constructor(e){super(),this._timeout=setTimeout(()=>this.open(),e)}open(){clearTimeout(this._timeout),super.open()}}function xa(i,e){return e?new Promise((t,n)=>{const s=setTimeout(()=>{o.dispose(),t()},i),o=e.onCancellationRequested(()=>{clearTimeout(s),o.dispose(),n(new ar)})}):UC(t=>xa(i,t))}at(xa,"timeout");function HA(i,e=0,t){const n=setTimeout(()=>{i(),t&&s.dispose()},e),s=ye(()=>{clearTimeout(n),t?.deleteAndLeak(s)});return t?.add(s),s}at(HA,"disposableTimeout");function Yge(i){const e=[];let t=0;const n=i.length;function s(){return t<n?i[t++]():null}at(s,"next");function o(r){r!=null&&e.push(r);const a=s();return a?a.then(o):Promise.resolve(e)}return at(o,"thenHandler"),Promise.resolve(null).then(o)}at(Yge,"sequence");function Zge(i,e=n=>!!n,t=null){let n=0;const s=i.length,o=at(()=>{if(n>=s)return Promise.resolve(t);const r=i[n++];return Promise.resolve(r()).then(l=>e(l)?Promise.resolve(l):o())},"loop");return o()}at(Zge,"first");function Xge(i,e=n=>!!n,t=null){if(i.length===0)return Promise.resolve(t);let n=i.length;const s=at(()=>{n=-1;for(const o of i)o.cancel?.()},"finish");return new Promise((o,r)=>{for(const a of i)a.then(l=>{--n>=0&&e(l)?(s(),o(l)):n===0&&o(t)}).catch(l=>{--n>=0&&(s(),r(l))})})}at(Xge,"firstParallel");class Qge{static{at(this,"Limiter")}_size=0;_isDisposed=!1;runningPromises;maxDegreeOfParalellism;outstandingPromises;_onDrained;constructor(e){this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new x}whenIdle(){return this.size>0?H.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(e){if(this._isDisposed)throw new Error("Object has been disposed");return this._size++,new Promise((t,n)=>{this.outstandingPromises.push({factory:e,c:t,e:n}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const e=this.outstandingPromises.shift();this.runningPromises++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._isDisposed||(this.runningPromises--,--this._size===0&&this._onDrained.fire(),this.outstandingPromises.length>0&&this.consume())}clear(){if(this._isDisposed)throw new Error("Object has been disposed");this.outstandingPromises.length=0,this._size=this.runningPromises}dispose(){this._isDisposed=!0,this.outstandingPromises.length=0,this._size=0,this._onDrained.dispose()}}let Jge=class extends Qge{static{at(this,"Queue")}constructor(){super(1)}};class Lze{static{at(this,"LimitedQueue")}sequentializer=new nj;tasks=0;queue(e){return this.sequentializer.isRunning()?this.sequentializer.queue(()=>this.sequentializer.run(this.tasks++,e())):this.sequentializer.run(this.tasks++,e())}}class Dze{static{at(this,"ResourceQueue")}queues=new Map;drainers=new Set;drainListeners=void 0;drainListenerCount=0;async whenDrained(){if(this.isDrained())return;const e=new jg;return this.drainers.add(e),e.p}isDrained(){for(const[,e]of this.queues)if(e.size>0)return!1;return!0}queueSize(e,t=bi){const n=t.getComparisonKey(e);return this.queues.get(n)?.size??0}queueFor(e,t,n=bi){const s=n.getComparisonKey(e);let o=this.queues.get(s);if(!o){o=new Jge;const r=this.drainListenerCount++,a=H.once(o.onDrained)(()=>{o?.dispose(),this.queues.delete(s),this.onDidQueueDrain(),this.drainListeners?.deleteAndDispose(r),this.drainListeners?.size===0&&(this.drainListeners.dispose(),this.drainListeners=void 0)});this.drainListeners||(this.drainListeners=new ah),this.drainListeners.set(r,a),this.queues.set(s,o)}return o.queue(t)}onDidQueueDrain(){this.isDrained()&&this.releaseDrainers()}releaseDrainers(){for(const e of this.drainers)e.complete();this.drainers.clear()}dispose(){for(const[,e]of this.queues)e.dispose();this.queues.clear(),this.releaseDrainers(),this.drainListeners?.dispose()}}class NL{static{at(this,"TimeoutTimer")}_token;_isDisposed=!1;constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new Et("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new Et("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class efe{static{at(this,"IntervalTimer")}disposable=void 0;isDisposed=!1;cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,t,n=globalThis){if(this.isDisposed)throw new Et("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const s=n.setInterval(()=>{e()},t);this.disposable=ye(()=>{n.clearInterval(s),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}}class xn{static{at(this,"RunOnceScheduler")}runner;timeoutToken;timeout;timeoutHandler;constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}flush(){this.isScheduled()&&(this.cancel(),this.doRun())}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}class Ize{static{at(this,"ProcessTimeRunOnceScheduler")}runner;timeout;counter;intervalToken;intervalHandler;constructor(e,t){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.runner=e,this.timeout=t,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(e=this.timeout){e%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${e}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(e/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner?.())}}class Tze extends xn{static{at(this,"RunOnceWorker")}units=[];constructor(e,t){super(e,t)}work(e){this.units.push(e),this.isScheduled()||this.schedule()}doRun(){const e=this.units;this.units=[],this.runner?.(e)}dispose(){this.units=[],super.dispose()}}class Aze extends ${constructor(e,t){super(),this.options=e,this.handler=t}static{at(this,"ThrottledWorker")}pendingWork=[];throttler=this._register(new Yi);disposed=!1;get pending(){return this.pendingWork.length}work(e){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+e.length>this.options.maxBufferedWork)return!1}else if(this.pending+e.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}for(const t of e)this.pendingWork.push(t);return this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new xn(()=>{this.throttler.clear(),this.doWork()},this.options.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}let Z0,W1;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?W1=at((i,e)=>{LG(()=>{if(t)return;const n=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}},"_runWhenIdle"):W1=at((i,e,t)=>{const n=i.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0);let s=!1;return{dispose(){s||(s=!0,i.cancelIdleCallback(n))}}},"_runWhenIdle"),Z0=at(i=>W1(globalThis,i),"runWhenGlobalIdle")})();class ij{static{at(this,"AbstractIdleValue")}_executor;_handle;_didRun=!1;_value;_error;constructor(e,t){this._executor=()=>{try{this._value=t()}catch(n){this._error=n}finally{this._didRun=!0}},this._handle=W1(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class jM extends ij{static{at(this,"GlobalIdleValue")}constructor(e){super(globalThis,e)}}async function tfe(i,e,t){let n;for(let s=0;s<t;s++)try{return await i()}catch(o){n=o,await xa(e)}throw n}at(tfe,"retry");class nj{static{at(this,"TaskSequentializer")}_running;_queued;isRunning(e){return typeof e=="number"?this._running?.taskId===e:!!this._running}get running(){return this._running?.promise}cancelRunning(){this._running?.cancel()}run(e,t,n){return this._running={taskId:e,cancel:at(()=>n?.(),"cancel"),promise:t},t.then(()=>this.doneRunning(e),()=>this.doneRunning(e)),t}doneRunning(e){this._running&&e===this._running.taskId&&(this._running=void 0,this.runQueued())}runQueued(){if(this._queued){const e=this._queued;this._queued=void 0,e.run().then(e.promiseResolve,e.promiseReject)}}queue(e){if(this._queued)this._queued.run=e;else{const{promise:t,resolve:n,reject:s}=w5();this._queued={run:e,promise:t,promiseResolve:n,promiseReject:s}}return this._queued.promise}hasQueued(){return!!this._queued}async join(){return this._queued?.promise??this._running?.promise}}class ife{constructor(e,t=()=>Date.now()){this.interval=e,this.nowFn=t}static{at(this,"IntervalCounter")}lastIncrementTime=0;value=0;increment(){const e=this.nowFn();return e-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=e,this.value=0),this.value++,this.value}}class jg{static{at(this,"DeferredPromise")}completeCallback;errorCallback;outcome;get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}p;constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new ar)}}var Ka;(i=>{async function e(n){let s;const o=await Promise.all(n.map(r=>r.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return o}i.settled=e,at(e,"settled");function t(n){return new Promise(async(s,o)=>{try{await n(s,o)}catch(r){o(r)}})}i.withAsyncBody=t,at(t,"withAsyncBody")})(Ka||(Ka={}));class nfe{static{at(this,"StatefulPromise")}_value=void 0;get value(){return this._value}_error=void 0;get error(){return this._error}_isResolved=!1;get isResolved(){return this._isResolved}promise;constructor(e){this.promise=e.then(t=>(this._value=t,this._isResolved=!0,t),t=>{throw this._error=t,this._isResolved=!0,t})}requireValue(){if(!this._isResolved)throw new Et("Promise is not resolved yet");if(this._error)throw this._error;return this._value}}class xze{constructor(e){this._compute=e}static{at(this,"LazyStatefulPromise")}_promise=new cr(()=>new nfe(this._compute()));requireValue(){return this._promise.value.requireValue()}getPromise(){return this._promise.value.promise}get currentValue(){return this._promise.rawValue?.value}}class va{static{at(this,"AsyncIterableObject")}static fromArray(e){return new va(t=>{t.emitMany(e)})}static fromPromise(e){return new va(async t=>{t.emitMany(await e)})}static fromPromises(e){return new va(async t=>{await Promise.all(e.map(async n=>t.emitOne(await n)))})}static merge(e){return new va(async t=>{await Promise.all(e.map(async n=>{for await(const s of n)t.emitOne(s)}))})}static EMPTY=va.fromArray([]);_state;_results;_error;_onReturn;_onStateChanged;constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new x,queueMicrotask(async()=>{const n={emitOne:at(s=>this.emitOne(s),"emitOne"),emitMany:at(s=>this.emitMany(s),"emitMany"),reject:at(s=>this.reject(s),"reject")};try{await Promise.resolve(e(n)),this.resolve()}catch(s){this.reject(s)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:at(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await H.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:at(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,t){return new va(async n=>{for await(const s of e)n.emitOne(t(s))})}map(e){return va.map(this,e)}static filter(e,t){return new va(async n=>{for await(const s of e)t(s)&&n.emitOne(s)})}filter(e){return va.filter(this,e)}static coalesce(e){return va.filter(e,t=>!!t)}coalesce(){return va.coalesce(this)}static async toPromise(e){const t=[];for await(const n of e)t.push(n);return t}toPromise(){return va.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}}class sfe extends va{constructor(e,t){super(t),this._source=e}static{at(this,"CancelableAsyncIterableObject")}cancel(){this._source.cancel()}}function ofe(i){const e=new xr,t=i(e.token);return new sfe(e,async n=>{const s=e.token.onCancellationRequested(()=>{s.dispose(),e.dispose(),n.reject(new ar)});try{for await(const o of t){if(e.token.isCancellationRequested)return;n.emitOne(o)}s.dispose(),e.dispose()}catch(o){s.dispose(),e.dispose(),n.reject(o)}})}at(ofe,"createCancelableAsyncIterable");class kze{static{at(this,"AsyncIterableSource")}_deferred=new jg;_asyncIterable;_errorFn;_emitFn;constructor(e){this._asyncIterable=new va(s=>{if(t){s.reject(t);return}return n&&s.emitMany(n),this._errorFn=o=>s.reject(o),this._emitFn=o=>s.emitOne(o),this._deferred.p},e);let t,n;this._emitFn=s=>{n||(n=[]),n.push(s)},this._errorFn=s=>{t||(t=s)}}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}}var rfe=Object.defineProperty,ug=(i,e)=>rfe(i,"name",{value:e,configurable:!0});function sj(i){let e=!1;const t=new Map,n=new Map;if(oj(i,ug(d=>{if(i===d)return!0;const h=JSON.stringify(d);if(h.length<30)return!0;const u=t.get(h);if(!u){const f={schemas:[d]};return t.set(h,f),n.set(d,f),!0}return u.schemas.push(d),n.set(d,u),e=!0,!1},"visitSchemas")),t.clear(),!e)return JSON.stringify(i);let o="$defs";for(;i.hasOwnProperty(o);)o+="_";const r=[];function a(d){return JSON.stringify(d,(h,u)=>{if(u!==d){const f=n.get(u);if(f&&f.schemas.length>1)return f.id||(f.id=`_${r.length}`,r.push(f.schemas[0])),{$ref:`#/${o}/${f.id}`}}return u})}ug(a,"stringify");const l=a(i),c=[];for(let d=0;d<r.length;d++)c.push(`"_${d}":${a(r[d])}`);return c.length?`${l.substring(0,l.length-1)},"${o}":{${c.join(",")}}}`:l}ug(sj,"getCompressedContent");function Vm(i){return typeof i=="object"&&i!==null}ug(Vm,"isObject");function oj(i,e){if(!i||typeof i!="object")return;const t=ug((...l)=>{for(const c of l)Vm(c)&&r.push(c)},"collectEntries"),n=ug((...l)=>{for(const c of l)if(Vm(c))for(const d in c){const h=c[d];Vm(h)&&r.push(h)}},"collectMapEntries"),s=ug((...l)=>{for(const c of l)if(Array.isArray(c))for(const d of c)Vm(d)&&r.push(d)},"collectArrayEntries"),o=ug(l=>{if(Array.isArray(l))for(const c of l)Vm(c)&&r.push(c);else Vm(l)&&r.push(l)},"collectEntryOrArrayEntries"),r=[i];let a=r.pop();for(;a;)e(a)&&(t(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),n(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),s(a.anyOf,a.allOf,a.oneOf,a.prefixItems),o(a.items)),a=r.pop()}ug(oj,"traverseNodes");var afe=Object.defineProperty,rj=(i,e)=>afe(i,"name",{value:e,configurable:!0});const PL={JSONContribution:"base.contributions.json"};function aj(i){return i.length>0&&i.charAt(i.length-1)==="#"?i.substring(0,i.length-1):i}rj(aj,"normalizeId");class lfe{static{rj(this,"JSONContributionRegistry")}schemasById;_onDidChangeSchema=new x;onDidChangeSchema=this._onDidChangeSchema.event;constructor(){this.schemasById={}}registerSchema(e,t){this.schemasById[aj(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}getSchemaContent(e){const t=this.schemasById[e];return t?sj(t):void 0}hasSchemaContent(e){return!!this.schemasById[e]}}const cfe=new lfe;Xt.add(PL.JSONContribution,cfe);var dfe=Object.defineProperty,Ir=(i,e)=>dfe(i,"name",{value:e,configurable:!0});function y5(i){return`--vscode-${i.replace(/\./g,"-")}`}Ir(y5,"asCssVariableName");function be(i){return`var(${y5(i)})`}Ir(be,"asCssVariable");function lj(i,e){return`var(${y5(i)}, ${e})`}Ir(lj,"asCssVariableWithDefault");function cj(i){return i!==null&&typeof i=="object"&&"light"in i&&"dark"in i}Ir(cj,"isColorDefaults");const hfe={ColorContribution:"base.contributions.colors"},ufe="default";class gfe{static{Ir(this,"ColorRegistry")}_onDidChangeSchema=new x;onDidChangeSchema=this._onDidChangeSchema.event;colorsById;colorSchema={type:"object",properties:{}};colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]};constructor(){this.colorsById={}}notifyThemeUpdate(e){for(const t of Object.keys(this.colorsById)){const n=e.getColor(t);n&&(this.colorSchema.properties[t].oneOf[0].defaultSnippets[0].body=`\${1:${n.toString()}}`)}this._onDidChangeSchema.fire()}registerColor(e,t,n,s=!1,o){const r={id:e,description:n,defaults:t,needsTransparency:s,deprecationMessage:o};this.colorsById[e]=r;const a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return o&&(a.deprecationMessage=o),s&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=g("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:n,oneOf:[a,{type:"string",const:ufe,description:g("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}deregisterColor(e){delete this.colorsById[e],delete this.colorSchema.properties[e];const t=this.colorReferenceSchema.enum.indexOf(e);t!==-1&&(this.colorReferenceSchema.enum.splice(t,1),this.colorReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChangeSchema.fire()}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n?.defaults){const s=cj(n.defaults)?n.defaults[t.type]:n.defaults;return wc(s,t)}}getColorSchema(){return this.colorSchema}getColorReferenceSchema(){return this.colorReferenceSchema}toString(){const e=Ir((t,n)=>{const s=t.indexOf(".")===-1?0:1,o=n.indexOf(".")===-1?0:1;return s!==o?s-o:t.localeCompare(n)},"sorter");return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const RL=new gfe;Xt.add(hfe.ColorContribution,RL);function L(i,e,t,n,s){return RL.registerColor(i,e,t,n,s)}Ir(L,"registerColor");function ffe(){return RL}Ir(ffe,"getColorRegistry");function dj(i,e){switch(i.op){case 0:return wc(i.value,e)?.darken(i.factor);case 1:return wc(i.value,e)?.lighten(i.factor);case 2:return wc(i.value,e)?.transparent(i.factor);case 3:{const t=wc(i.background,e);return t?wc(i.value,e)?.makeOpaque(t):wc(i.value,e)}case 4:for(const t of i.values){const n=wc(t,e);if(n)return n}return;case 6:return wc(e.defines(i.if)?i.then:i.else,e);case 5:{const t=wc(i.value,e);if(!t)return;const n=wc(i.background,e);return n?t.isDarkerThan(n)?U.getLighterColor(t,n,i.factor).transparent(i.transparency):U.getDarkerColor(t,n,i.factor).transparent(i.transparency):t.transparent(i.factor*i.transparency)}default:throw TN()}}Ir(dj,"executeTransform");function rl(i,e){return{op:0,value:i,factor:e}}Ir(rl,"darken");function $l(i,e){return{op:1,value:i,factor:e}}Ir($l,"lighten");function We(i,e){return{op:2,value:i,factor:e}}Ir(We,"transparent");function pfe(i,e){return{op:3,value:i,background:e}}Ir(pfe,"opaque");function qM(...i){return{op:4,values:i}}Ir(qM,"oneOf");function hj(i,e,t){return{op:6,if:i,then:e,else:t}}Ir(hj,"ifDefinedThenElse");function YM(i,e,t,n){return{op:5,value:i,background:e,factor:t,transparency:n}}Ir(YM,"lessProminent");function wc(i,e){if(i!==null){if(typeof i=="string")return i[0]==="#"?U.fromHex(i):e.getColor(i);if(i instanceof U)return i;if(typeof i=="object")return dj(i,e)}}Ir(wc,"resolveColorValue");const uj="vscode://schemas/workbench-colors",gj=Xt.as(PL.JSONContribution);gj.registerSchema(uj,RL.getColorSchema());const Q9=new xn(()=>gj.notifySchemaChanged(uj),200);RL.onDidChangeSchema(()=>{Q9.isScheduled()||Q9.schedule()});const yi=L("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},g("foreground","Overall foreground color. This color is only used if not overridden by a component."));L("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},g("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));const J9=L("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},g("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));L("descriptionForeground",{light:"#717171",dark:We(yi,.7),hcDark:We(yi,.7),hcLight:We(yi,.7)},g("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const ZM=L("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},g("iconForeground","The default color for icons in the workbench.")),ec=L("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},g("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Re=L("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},g("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Vi=L("contrastActiveBorder",{light:null,dark:null,hcDark:ec,hcLight:ec},g("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),mfe=L("selection.background",null,g("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.")),fj=L("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},g("textLinkForeground","Foreground color for links in text."));L("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},g("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));L("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:U.black,hcLight:"#292929"},g("textSeparatorForeground","Color for text separators."));L("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},g("textPreformatForeground","Foreground color for preformatted text segments."));L("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},g("textPreformatBackground","Background color for preformatted text segments."));L("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},g("textBlockQuoteBackground","Background color for block quotes in text."));L("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:U.white,hcLight:"#292929"},g("textBlockQuoteBorder","Border color for block quotes in text."));L("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:U.black,hcLight:"#F2F2F2"},g("textCodeBlockBackground","Background color for code blocks in text."));L("sash.hoverBorder",ec,g("sashActiveBorder","Border color of active sashes."));const X_=L("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:U.black,hcLight:"#0F4A85"},g("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),UN=L("badge.foreground",{dark:U.white,light:"#333",hcDark:U.white,hcLight:U.white},g("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),OL=L("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},g("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),pj=L("scrollbarSlider.background",{dark:U.fromHex("#797979").transparent(.4),light:U.fromHex("#646464").transparent(.4),hcDark:We(Re,.6),hcLight:We(Re,.4)},g("scrollbarSliderBackground","Scrollbar slider background color.")),mj=L("scrollbarSlider.hoverBackground",{dark:U.fromHex("#646464").transparent(.7),light:U.fromHex("#646464").transparent(.7),hcDark:We(Re,.8),hcLight:We(Re,.8)},g("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),_j=L("scrollbarSlider.activeBackground",{dark:U.fromHex("#BFBFBF").transparent(.4),light:U.fromHex("#000000").transparent(.6),hcDark:Re,hcLight:Re},g("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),_fe=L("progressBar.background",{dark:U.fromHex("#0E70C0"),light:U.fromHex("#0E70C0"),hcDark:Re,hcLight:Re},g("progressBarBackground","Background color of the progress bar that can show for long running operations.")),Zd=L("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:U.black,hcLight:U.white},g("editorBackground","Editor background color.")),sm=L("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:U.white,hcLight:yi},g("editorForeground","Editor default foreground color."));L("editorStickyScroll.background",Zd,g("editorStickyScrollBackground","Background color of sticky scroll in the editor"));L("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:U.fromHex("#0F4A85").transparent(.1)},g("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor"));L("editorStickyScroll.border",{dark:null,light:null,hcDark:Re,hcLight:Re},g("editorStickyScrollBorder","Border color of sticky scroll in the editor"));L("editorStickyScroll.shadow",OL,g("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor"));const Ya=L("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:U.white},g("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),Gy=L("editorWidget.foreground",yi,g("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),bj=L("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:Re,hcLight:Re},g("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));L("editorWidget.resizeBorder",null,g("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));L("editorError.background",null,g("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const zN=L("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},g("editorError.foreground","Foreground color of error squigglies in the editor."));L("editorError.border",{dark:null,light:null,hcDark:U.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},g("errorBorder","If set, color of double underlines for errors in the editor."));const bfe=L("editorWarning.background",null,g("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Xd=L("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},g("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),UA=L("editorWarning.border",{dark:null,light:null,hcDark:U.fromHex("#FFCC00").transparent(.8),hcLight:U.fromHex("#FFCC00").transparent(.8)},g("warningBorder","If set, color of double underlines for warnings in the editor."));L("editorInfo.background",null,g("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const qg=L("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},g("editorInfo.foreground","Foreground color of info squigglies in the editor.")),zA=L("editorInfo.border",{dark:null,light:null,hcDark:U.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},g("infoBorder","If set, color of double underlines for infos in the editor.")),vfe=L("editorHint.foreground",{dark:U.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},g("editorHint.foreground","Foreground color of hint squigglies in the editor."));L("editorHint.border",{dark:null,light:null,hcDark:U.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},g("hintBorder","If set, color of double underlines for hints in the editor."));L("editorLink.activeForeground",{dark:"#4E94CE",light:U.blue,hcDark:U.cyan,hcLight:"#292929"},g("activeLinkForeground","Color of active links."));const uw=L("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},g("editorSelectionBackground","Color of the editor selection.")),wfe=L("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:U.white},g("editorSelectionForeground","Color of the selected text for high contrast."));L("editor.inactiveSelectionBackground",{light:We(uw,.5),dark:We(uw,.5),hcDark:We(uw,.7),hcLight:We(uw,.5)},g("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0);L("editor.selectionHighlightBackground",{light:YM(uw,Zd,.3,.6),dark:YM(uw,Zd,.3,.6),hcDark:null,hcLight:null},g("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);L("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:Vi,hcLight:Vi},g("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));L("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},g("editorFindMatch","Color of the current search match."));L("editor.findMatchForeground",null,g("editorFindMatchForeground","Text color of the current search match."));const bp=L("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},g("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0);L("editor.findMatchHighlightForeground",null,g("findMatchHighlightForeground","Foreground color of the other search matches."),!0);L("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},g("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);L("editor.findMatchBorder",{light:null,dark:null,hcDark:Vi,hcLight:Vi},g("editorFindMatchBorder","Border color of the current search match."));const gw=L("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:Vi,hcLight:Vi},g("findMatchHighlightBorder","Border color of the other search matches."));L("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:We(Vi,.4),hcLight:We(Vi,.4)},g("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);L("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},g("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const e8=L("editorHoverWidget.background",Ya,g("hoverBackground","Background color of the editor hover."));L("editorHoverWidget.foreground",Gy,g("hoverForeground","Foreground color of the editor hover."));L("editorHoverWidget.border",bj,g("hoverBorder","Border color of the editor hover."));L("editorHoverWidget.statusBarBackground",{dark:$l(e8,.2),light:rl(e8,.05),hcDark:Ya,hcLight:Ya},g("statusBarBackground","Background color of the editor hover status bar."));const vj=L("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:U.white,hcLight:U.black},g("editorInlayHintForeground","Foreground color of inline hints")),wj=L("editorInlayHint.background",{dark:We(X_,.1),light:We(X_,.1),hcDark:We(U.white,.1),hcLight:We(X_,.1)},g("editorInlayHintBackground","Background color of inline hints"));L("editorInlayHint.typeForeground",vj,g("editorInlayHintForegroundTypes","Foreground color of inline hints for types"));L("editorInlayHint.typeBackground",wj,g("editorInlayHintBackgroundTypes","Background color of inline hints for types"));L("editorInlayHint.parameterForeground",vj,g("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters"));L("editorInlayHint.parameterBackground",wj,g("editorInlayHintBackgroundParameter","Background color of inline hints for parameters"));const Cfe=L("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},g("editorLightBulbForeground","The color used for the lightbulb actions icon."));L("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},g("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));L("editorLightBulbAi.foreground",Cfe,g("editorLightBulbAiForeground","The color used for the lightbulb AI icon."));L("editor.snippetTabstopHighlightBackground",{dark:new U(new Wt(124,124,124,.3)),light:new U(new Wt(10,50,100,.2)),hcDark:new U(new Wt(124,124,124,.3)),hcLight:new U(new Wt(10,50,100,.2))},g("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));L("editor.snippetTabstopHighlightBorder",null,g("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));L("editor.snippetFinalTabstopHighlightBackground",null,g("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));L("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new U(new Wt(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},g("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const XM=new U(new Wt(155,185,85,.2)),QM=new U(new Wt(255,0,0,.2)),yfe=L("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},g("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Sfe=L("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},g("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);L("diffEditor.insertedLineBackground",{dark:XM,light:XM,hcDark:null,hcLight:null},g("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);L("diffEditor.removedLineBackground",{dark:QM,light:QM,hcDark:null,hcLight:null},g("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);L("diffEditorGutter.insertedLineBackground",null,g("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));L("diffEditorGutter.removedLineBackground",null,g("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));const Efe=L("diffEditorOverview.insertedForeground",null,g("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),Lfe=L("diffEditorOverview.removedForeground",null,g("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));L("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},g("diffEditorInsertedOutline","Outline color for the text that got inserted."));L("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},g("diffEditorRemovedOutline","Outline color for text that got removed."));L("diffEditor.border",{dark:null,light:null,hcDark:Re,hcLight:Re},g("diffEditorBorder","Border color between the two text editors."));L("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},g("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));L("diffEditor.unchangedRegionBackground","sideBar.background",g("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor."));L("diffEditor.unchangedRegionForeground","foreground",g("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor."));L("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},g("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));const lv=L("widget.shadow",{dark:We(U.black,.36),light:We(U.black,.16),hcDark:null,hcLight:null},g("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),X0=L("widget.border",{dark:null,light:null,hcDark:Re,hcLight:Re},g("widgetBorder","Border color of widgets such as find/replace inside the editor.")),$A=L("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},g("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));L("toolbar.hoverOutline",{dark:null,light:null,hcDark:Vi,hcLight:Vi},g("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));L("toolbar.activeBackground",{dark:$l($A,.1),light:rl($A,.1),hcDark:null,hcLight:null},g("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));const Dfe=L("breadcrumb.foreground",We(yi,.8),g("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),Ife=L("breadcrumb.background",Zd,g("breadcrumbsBackground","Background color of breadcrumb items.")),t8=L("breadcrumb.focusForeground",{light:rl(yi,.2),dark:$l(yi,.1),hcDark:$l(yi,.1),hcLight:$l(yi,.1)},g("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),Tfe=L("breadcrumb.activeSelectionForeground",{light:rl(yi,.2),dark:$l(yi,.1),hcDark:$l(yi,.1),hcLight:$l(yi,.1)},g("breadcrumbsSelectedForeground","Color of selected breadcrumb items.")),Cj=L("breadcrumbPicker.background",Ya,g("breadcrumbsSelectedBackground","Background color of breadcrumb item picker.")),yj=.5,i8=U.fromHex("#40C8AE").transparent(yj),n8=U.fromHex("#40A6FF").transparent(yj),s8=U.fromHex("#606060").transparent(.4),S5=.4,zC=1,JM=L("merge.currentHeaderBackground",{dark:i8,light:i8,hcDark:null,hcLight:null},g("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);L("merge.currentContentBackground",We(JM,S5),g("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const eB=L("merge.incomingHeaderBackground",{dark:n8,light:n8,hcDark:null,hcLight:null},g("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);L("merge.incomingContentBackground",We(eB,S5),g("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const tB=L("merge.commonHeaderBackground",{dark:s8,light:s8,hcDark:null,hcLight:null},g("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);L("merge.commonContentBackground",We(tB,S5),g("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const $C=L("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},g("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));L("editorOverviewRuler.currentContentForeground",{dark:We(JM,zC),light:We(JM,zC),hcDark:$C,hcLight:$C},g("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));L("editorOverviewRuler.incomingContentForeground",{dark:We(eB,zC),light:We(eB,zC),hcDark:$C,hcLight:$C},g("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));L("editorOverviewRuler.commonContentForeground",{dark:We(tB,zC),light:We(tB,zC),hcDark:$C,hcLight:$C},g("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));L("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},g("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0);L("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",g("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const Afe=L("problemsErrorIcon.foreground",zN,g("problemsErrorIconForeground","The color used for the problems error icon.")),xfe=L("problemsWarningIcon.foreground",Xd,g("problemsWarningIconForeground","The color used for the problems warning icon.")),kfe=L("problemsInfoIcon.foreground",qg,g("problemsInfoIconForeground","The color used for the problems info icon.")),Nfe=L("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},g("minimapFindMatchHighlight","Minimap marker color for find matches."),!0);L("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},g("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0);const o8=L("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},g("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0);L("minimap.infoHighlight",{dark:qg,light:qg,hcDark:zA,hcLight:zA},g("minimapInfo","Minimap marker color for infos."));L("minimap.warningHighlight",{dark:Xd,light:Xd,hcDark:UA,hcLight:UA},g("overviewRuleWarning","Minimap marker color for warnings."));L("minimap.errorHighlight",{dark:new U(new Wt(255,18,18,.7)),light:new U(new Wt(255,18,18,.7)),hcDark:new U(new Wt(255,50,50,1)),hcLight:"#B5200D"},g("minimapError","Minimap marker color for errors."));const Pfe=L("minimap.background",null,g("minimapBackground","Minimap background color.")),Rfe=L("minimap.foregroundOpacity",U.fromHex("#000f"),g("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));L("minimapSlider.background",We(pj,.5),g("minimapSliderBackground","Minimap slider background color."));L("minimapSlider.hoverBackground",We(mj,.5),g("minimapSliderHoverBackground","Minimap slider background color when hovering."));L("minimapSlider.activeBackground",We(_j,.5),g("minimapSliderActiveBackground","Minimap slider background color when clicked on."));L("charts.foreground",yi,g("chartsForeground","The foreground color used in charts."));L("charts.lines",We(yi,.5),g("chartsLines","The color used for horizontal lines in charts."));L("charts.red",zN,g("chartsRed","The red color used in chart visualizations."));L("charts.blue",qg,g("chartsBlue","The blue color used in chart visualizations."));L("charts.yellow",Xd,g("chartsYellow","The yellow color used in chart visualizations."));L("charts.orange",Nfe,g("chartsOrange","The orange color used in chart visualizations."));L("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},g("chartsGreen","The green color used in chart visualizations."));L("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},g("chartsPurple","The purple color used in chart visualizations."));const Ofe=L("input.background",{dark:"#3C3C3C",light:U.white,hcDark:U.black,hcLight:U.white},g("inputBoxBackground","Input box background.")),Mfe=L("input.foreground",yi,g("inputBoxForeground","Input box foreground.")),nT=L("input.border",{dark:null,light:null,hcDark:Re,hcLight:Re},g("inputBoxBorder","Input box border.")),Sj=L("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:Re,hcLight:Re},g("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),Bfe=L("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},g("inputOption.hoverBackground","Background color of activated options in input fields.")),Ej=L("inputOption.activeBackground",{dark:We(ec,.4),light:We(ec,.2),hcDark:U.transparent,hcLight:U.transparent},g("inputOption.activeBackground","Background hover color of options in input fields.")),Lj=L("inputOption.activeForeground",{dark:U.white,light:U.black,hcDark:yi,hcLight:yi},g("inputOption.activeForeground","Foreground color of activated options in input fields."));L("input.placeholderForeground",{light:We(yi,.5),dark:We(yi,.5),hcDark:We(yi,.7),hcLight:We(yi,.7)},g("inputPlaceholderForeground","Input box foreground color for placeholder text."));const Ffe=L("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:U.black,hcLight:U.white},g("inputValidationInfoBackground","Input validation background color for information severity.")),Vfe=L("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:yi},g("inputValidationInfoForeground","Input validation foreground color for information severity.")),Wfe=L("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:Re,hcLight:Re},g("inputValidationInfoBorder","Input validation border color for information severity.")),Hfe=L("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:U.black,hcLight:U.white},g("inputValidationWarningBackground","Input validation background color for warning severity.")),Ufe=L("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:yi},g("inputValidationWarningForeground","Input validation foreground color for warning severity.")),zfe=L("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:Re,hcLight:Re},g("inputValidationWarningBorder","Input validation border color for warning severity.")),$fe=L("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:U.black,hcLight:U.white},g("inputValidationErrorBackground","Input validation background color for error severity.")),Gfe=L("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:yi},g("inputValidationErrorForeground","Input validation foreground color for error severity.")),Kfe=L("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:Re,hcLight:Re},g("inputValidationErrorBorder","Input validation border color for error severity.")),$N=L("dropdown.background",{dark:"#3C3C3C",light:U.white,hcDark:U.black,hcLight:U.white},g("dropdownBackground","Dropdown background.")),jfe=L("dropdown.listBackground",{dark:null,light:null,hcDark:U.black,hcLight:U.white},g("dropdownListBackground","Dropdown list background.")),E5=L("dropdown.foreground",{dark:"#F0F0F0",light:yi,hcDark:U.white,hcLight:yi},g("dropdownForeground","Dropdown foreground.")),L5=L("dropdown.border",{dark:$N,light:"#CECECE",hcDark:Re,hcLight:Re},g("dropdownBorder","Dropdown border.")),Dj=L("button.foreground",U.white,g("buttonForeground","Button foreground color.")),qfe=L("button.separator",We(Dj,.4),g("buttonSeparator","Button separator color.")),s1=L("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},g("buttonBackground","Button background color.")),Yfe=L("button.hoverBackground",{dark:$l(s1,.2),light:rl(s1,.2),hcDark:s1,hcLight:s1},g("buttonHoverBackground","Button background color when hovering.")),Zfe=L("button.border",Re,g("buttonBorder","Button border color.")),Xfe=L("button.secondaryForeground",{dark:U.white,light:U.white,hcDark:U.white,hcLight:yi},g("buttonSecondaryForeground","Secondary button foreground color.")),iB=L("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:U.white},g("buttonSecondaryBackground","Secondary button background color.")),Qfe=L("button.secondaryHoverBackground",{dark:$l(iB,.2),light:rl(iB,.2),hcDark:null,hcLight:null},g("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),o1=L("radio.activeForeground",Lj,g("radioActiveForeground","Foreground color of active radio option.")),Jfe=L("radio.activeBackground",Ej,g("radioBackground","Background color of active radio option.")),epe=L("radio.activeBorder",Sj,g("radioActiveBorder","Border color of the active radio option.")),tpe=L("radio.inactiveForeground",null,g("radioInactiveForeground","Foreground color of inactive radio option.")),ipe=L("radio.inactiveBackground",null,g("radioInactiveBackground","Background color of inactive radio option.")),npe=L("radio.inactiveBorder",{light:We(o1,.2),dark:We(o1,.2),hcDark:We(o1,.4),hcLight:We(o1,.2)},g("radioInactiveBorder","Border color of the inactive radio option.")),spe=L("radio.inactiveHoverBackground",Bfe,g("radioHoverBackground","Background color of inactive active radio option when hovering.")),ope=L("checkbox.background",$N,g("checkbox.background","Background color of checkbox widget."));L("checkbox.selectBackground",Ya,g("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));const rpe=L("checkbox.foreground",E5,g("checkbox.foreground","Foreground color of checkbox widget.")),ape=L("checkbox.border",L5,g("checkbox.border","Border color of checkbox widget."));L("checkbox.selectBorder",ZM,g("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));const lpe=L("keybindingLabel.background",{dark:new U(new Wt(128,128,128,.17)),light:new U(new Wt(221,221,221,.4)),hcDark:U.transparent,hcLight:U.transparent},g("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),cpe=L("keybindingLabel.foreground",{dark:U.fromHex("#CCCCCC"),light:U.fromHex("#555555"),hcDark:U.white,hcLight:yi},g("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),dpe=L("keybindingLabel.border",{dark:new U(new Wt(51,51,51,.6)),light:new U(new Wt(204,204,204,.4)),hcDark:new U(new Wt(111,195,223)),hcLight:Re},g("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),hpe=L("keybindingLabel.bottomBorder",{dark:new U(new Wt(68,68,68,.6)),light:new U(new Wt(187,187,187,.4)),hcDark:new U(new Wt(111,195,223)),hcLight:yi},g("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),upe=L("list.focusBackground",null,g("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),gpe=L("list.focusForeground",null,g("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),fpe=L("list.focusOutline",{dark:ec,light:ec,hcDark:Vi,hcLight:Vi},g("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ppe=L("list.focusAndSelectionOutline",null,g("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),Wl=L("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:U.fromHex("#0F4A85").transparent(.1)},g("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Up=L("list.activeSelectionForeground",{dark:U.white,light:U.white,hcDark:null,hcLight:null},g("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Ij=L("list.activeSelectionIconForeground",null,g("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),mpe=L("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:U.fromHex("#0F4A85").transparent(.1)},g("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),_pe=L("list.inactiveSelectionForeground",null,g("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),bpe=L("list.inactiveSelectionIconForeground",null,g("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),vpe=L("list.inactiveFocusBackground",null,g("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),wpe=L("list.inactiveFocusOutline",null,g("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Tj=L("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:U.white.transparent(.1),hcLight:U.fromHex("#0F4A85").transparent(.1)},g("listHoverBackground","List/Tree background when hovering over items using the mouse.")),Aj=L("list.hoverForeground",null,g("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),Cpe=L("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},g("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),ype=L("list.dropBetweenBackground",{dark:ZM,light:ZM,hcDark:null,hcLight:null},g("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),tI=L("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:ec,hcLight:ec},g("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree."));L("list.focusHighlightForeground",{dark:tI,light:hj(Wl,tI,"#BBE7FF"),hcDark:tI,hcLight:tI},g("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));L("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},g("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));L("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},g("listErrorForeground","Foreground color of list items containing errors."));L("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},g("listWarningForeground","Foreground color of list items containing warnings."));const Spe=L("listFilterWidget.background",{light:rl(Ya,0),dark:$l(Ya,0),hcDark:Ya,hcLight:Ya},g("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),Epe=L("listFilterWidget.outline",{dark:U.transparent,light:U.transparent,hcDark:"#f38518",hcLight:"#007ACC"},g("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),Lpe=L("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:Re,hcLight:Re},g("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),Dpe=L("listFilterWidget.shadow",lv,g("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));L("list.filterMatchBackground",{dark:bp,light:bp,hcDark:null,hcLight:null},g("listFilterMatchHighlight","Background color of the filtered match."));L("list.filterMatchBorder",{dark:gw,light:gw,hcDark:Re,hcLight:Vi},g("listFilterMatchHighlightBorder","Border color of the filtered match."));L("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},g("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized."));const GA=L("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},g("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),Ipe=L("tree.inactiveIndentGuidesStroke",We(GA,.4),g("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),Tpe=L("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},g("tableColumnsBorder","Table border color between columns.")),Ape=L("tree.tableOddRowsBackground",{dark:We(yi,.04),light:We(yi,.04),hcDark:null,hcLight:null},g("tableOddRowsBackgroundColor","Background color for odd table rows."));L("editorActionList.background",Ya,g("editorActionListBackground","Action List background color."));L("editorActionList.foreground",Gy,g("editorActionListForeground","Action List foreground color."));L("editorActionList.focusForeground",Up,g("editorActionListFocusForeground","Action List foreground color for the focused item."));L("editorActionList.focusBackground",Wl,g("editorActionListFocusBackground","Action List background color for the focused item."));const xpe=L("menu.border",{dark:null,light:null,hcDark:Re,hcLight:Re},g("menuBorder","Border color of menus.")),kpe=L("menu.foreground",E5,g("menuForeground","Foreground color of menu items.")),Npe=L("menu.background",$N,g("menuBackground","Background color of menu items.")),Ppe=L("menu.selectionForeground",Up,g("menuSelectionForeground","Foreground color of the selected menu item in menus.")),Rpe=L("menu.selectionBackground",Wl,g("menuSelectionBackground","Background color of the selected menu item in menus.")),Ope=L("menu.selectionBorder",{dark:null,light:null,hcDark:Vi,hcLight:Vi},g("menuSelectionBorder","Border color of the selected menu item in menus.")),Mpe=L("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:Re,hcLight:Re},g("menuSeparatorBackground","Color of a separator menu item in menus."));L("quickInput.background",Ya,g("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette."));L("quickInput.foreground",Gy,g("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette."));L("quickInputTitle.background",{dark:new U(new Wt(255,255,255,.105)),light:new U(new Wt(0,0,0,.06)),hcDark:"#000000",hcLight:U.white},g("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette."));const Bpe=L("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:U.white,hcLight:"#0F4A85"},g("pickerGroupForeground","Quick picker color for grouping labels."));L("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:U.white,hcLight:"#0F4A85"},g("pickerGroupBorder","Quick picker color for grouping borders."));const r8=L("quickInput.list.focusBackground",null,"",void 0,g("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),Fpe=L("quickInputList.focusForeground",Up,g("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),Vpe=L("quickInputList.focusIconForeground",Ij,g("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),Wpe=L("quickInputList.focusBackground",{dark:qM(r8,Wl),light:qM(r8,Wl),hcDark:null,hcLight:null},g("quickInput.listFocusBackground","Quick picker background color for the focused item."));L("search.resultsInfoForeground",{light:yi,dark:We(yi,.65),hcDark:yi,hcLight:yi},g("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));L("searchEditor.findMatchBackground",{light:We(bp,.66),dark:We(bp,.66),hcDark:bp,hcLight:bp},g("searchEditor.queryMatch","Color of the Search Editor query matches."));L("searchEditor.findMatchBorder",{light:We(gw,.66),dark:We(gw,.66),hcDark:gw,hcLight:gw},g("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var Hpe=Object.defineProperty,Zh=(i,e)=>Hpe(i,"name",{value:e,configurable:!0});const Upe={IconContribution:"base.contributions.icons"};var a8;(i=>{function e(t,n){let s=t.defaults;for(;Ne.isThemeIcon(s);){const o=cv.getIcon(s.id);if(!o)return;s=o.defaults}return s}i.getDefinition=e,Zh(e,"getDefinition")})(a8||(a8={}));var l8;(i=>{function e(n){return{weight:n.weight,style:n.style,src:n.src.map(s=>({format:s.format,location:s.location.toString()}))}}i.toJSONObject=e,Zh(e,"toJSONObject");function t(n){const s=Zh(o=>hn(o)?o:void 0,"stringOrUndef");if(n&&Array.isArray(n.src)&&n.src.every(o=>hn(o.format)&&hn(o.location)))return{weight:s(n.weight),style:s(n.style),src:n.src.map(o=>({format:o.format,location:ne.parse(o.location)}))}}i.fromJSONObject=t,Zh(t,"fromJSONObject")})(l8||(l8={}));class zpe{static{Zh(this,"IconRegistry")}_onDidChange=new x;onDidChange=this._onDidChange.event;iconsById;iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:g("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:g("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}};iconReferenceSchema={type:"string",pattern:`^${Ne.iconNameExpression}$`,enum:[],enumDescriptions:[]};iconFontsById;constructor(){this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,s){const o=this.iconsById[e];if(o){if(n&&!o.description){o.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return o}const r={id:e,description:n,defaults:t,deprecationMessage:s};this.iconsById[e]=r;const a={$ref:"#/definitions/icons"};return s&&(a.deprecationMessage=s),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}deregisterIcon(e){delete this.iconsById[e],delete this.iconSchema.properties[e];const t=this.iconReferenceSchema.enum.indexOf(e);t!==-1&&(this.iconReferenceSchema.enum.splice(t,1),this.iconReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChange.fire()}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconReferenceSchema(){return this.iconReferenceSchema}registerIconFont(e,t){const n=this.iconFontsById[e];return n||(this.iconFontsById[e]=t,this._onDidChange.fire(),t)}deregisterIconFont(e){delete this.iconFontsById[e]}getIconFont(e){return this.iconFontsById[e]}toString(){const e=Zh((o,r)=>o.id.localeCompare(r.id),"sorter"),t=Zh(o=>{for(;Ne.isThemeIcon(o.defaults);)o=this.iconsById[o.defaults.id];return`codicon codicon-${o?o.id:""}`},"classNames"),n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const s=Object.keys(this.iconsById).map(o=>this.iconsById[o]);for(const o of s.filter(r=>!!r.description).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|${Ne.isThemeIcon(o.defaults)?o.defaults.id:o.id}|${o.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const o of s.filter(r=>!Ne.isThemeIcon(r.defaults)).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|`);return n.join(`
`)}}const cv=new zpe;Xt.add(Upe.IconContribution,cv);function Vt(i,e,t,n){return cv.registerIcon(i,e,t,n)}Zh(Vt,"registerIcon");function xj(){return cv}Zh(xj,"getIconRegistry");function kj(){const i=HW();for(const e in i){const t="\\"+i[e].toString(16);cv.registerIcon(e,{fontCharacter:t})}}Zh(kj,"initialize");kj();const Nj="vscode://schemas/icons",Pj=Xt.as(PL.JSONContribution);Pj.registerSchema(Nj,cv.getIconSchema());const c8=new xn(()=>Pj.notifySchemaChanged(Nj),200);cv.onDidChange(()=>{c8.isScheduled()||c8.schedule()});Vt("widget-close",ee.close,g("widgetClose","Icon for the close action in widgets."));Vt("goto-previous-location",ee.arrowUp,g("previousChangeIcon","Icon for goto previous editor location."));Vt("goto-next-location",ee.arrowDown,g("nextChangeIcon","Icon for goto next editor location."));const d8=Ne.modify(ee.sync,"spin"),$pe=Ne.modify(ee.loading,"spin");var Gpe=Object.defineProperty,Rj=(i,e)=>Gpe(i,"name",{value:e,configurable:!0}),Q_=(i=>(i.DARK="dark",i.LIGHT="light",i.HIGH_CONTRAST_DARK="hcDark",i.HIGH_CONTRAST_LIGHT="hcLight",i))(Q_||{});function Tg(i){return i==="hcDark"||i==="hcLight"}Rj(Tg,"isHighContrast");function D5(i){return i==="dark"||i==="hcDark"}Rj(D5,"isDark");var Kpe=Object.defineProperty,ML=(i,e)=>Kpe(i,"name",{value:e,configurable:!0});const $t=De("themeService");function jpe(i){return{id:i}}ML(jpe,"themeColorFromId");function KA(i){switch(i){case Q_.DARK:return"vs-dark";case Q_.HIGH_CONTRAST_DARK:return"hc-black";case Q_.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}ML(KA,"getThemeTypeSelector");const qpe={ThemingContribution:"base.contributions.theming"};class Ype{static{ML(this,"ThemingRegistry")}themingParticipants=[];onThemingParticipantAddedEmitter;constructor(){this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new x}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),ye(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}get onThemingParticipantAdded(){return this.onThemingParticipantAddedEmitter.event}getThemingParticipants(){return this.themingParticipants}}const Oj=new Ype;Xt.add(qpe.ThemingContribution,Oj);function jc(i){return Oj.onColorThemeChange(i)}ML(jc,"registerThemingParticipant");class Ky extends ${constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}static{ML(this,"Themable")}theme;onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}getColor(e,t){let n=this.theme.getColor(e);return n&&t&&(n=t(n,this.theme)),n?n.toString():null}}var Zpe=Object.defineProperty,Xpe=(i,e)=>Zpe(i,"name",{value:e,configurable:!0});function GN(i){switch(i.type){case Q_.LIGHT:return U.fromHex("#F3F3F3");case Q_.HIGH_CONTRAST_LIGHT:return U.fromHex("#FFFFFF");case Q_.HIGH_CONTRAST_DARK:return U.fromHex("#000000");default:return U.fromHex("#252526")}}Xpe(GN,"WORKBENCH_BACKGROUND");const I5=L("tab.activeBackground",Zd,g("tabActiveBackground","Active tab background color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Qpe=L("tab.unfocusedActiveBackground",I5,g("tabUnfocusedActiveBackground","Active tab background color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Mj=L("tab.inactiveBackground",{dark:"#2D2D2D",light:"#ECECEC",hcDark:null,hcLight:null},g("tabInactiveBackground","Inactive tab background color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Jpe=L("tab.unfocusedInactiveBackground",Mj,g("tabUnfocusedInactiveBackground","Inactive tab background color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),zp=L("tab.activeForeground",{dark:U.white,light:"#333333",hcDark:U.white,hcLight:"#292929"},g("tabActiveForeground","Active tab foreground color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),h8=L("tab.inactiveForeground",{dark:We(zp,.5),light:We(zp,.7),hcDark:U.white,hcLight:"#292929"},g("tabInactiveForeground","Inactive tab foreground color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),eme=L("tab.unfocusedActiveForeground",{dark:We(zp,.5),light:We(zp,.7),hcDark:U.white,hcLight:"#292929"},g("tabUnfocusedActiveForeground","Active tab foreground color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));L("tab.unfocusedInactiveForeground",{dark:We(h8,.5),light:We(h8,.5),hcDark:U.white,hcLight:"#292929"},g("tabUnfocusedInactiveForeground","Inactive tab foreground color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));const nB=L("tab.hoverBackground",null,g("tabHoverBackground","Tab background color when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),tme=L("tab.unfocusedHoverBackground",{dark:We(nB,.5),light:We(nB,.7),hcDark:null,hcLight:null},g("tabUnfocusedHoverBackground","Tab background color in an unfocused group when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),sB=L("tab.hoverForeground",null,g("tabHoverForeground","Tab foreground color when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),ime=L("tab.unfocusedHoverForeground",{dark:We(sB,.5),light:We(sB,.5),hcDark:null,hcLight:null},g("tabUnfocusedHoverForeground","Tab foreground color in an unfocused group when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),oB=L("tab.border",{dark:"#252526",light:"#F3F3F3",hcDark:Re,hcLight:Re},g("tabBorder","Border to separate tabs from each other. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),nme=L("tab.lastPinnedBorder",{dark:GA,light:GA,hcDark:Re,hcLight:Re},g("lastPinnedTabBorder","Border to separate pinned tabs from other tabs. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),rB=L("tab.activeBorder",null,g("tabActiveBorder","Border on the bottom of an active tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),sme=L("tab.unfocusedActiveBorder",{dark:We(rB,.5),light:We(rB,.7),hcDark:null,hcLight:null},g("tabActiveUnfocusedBorder","Border on the bottom of an active tab in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),jA=L("tab.activeBorderTop",{dark:null,light:null,hcDark:null,hcLight:"#B5200D"},g("tabActiveBorderTop","Border to the top of an active tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),ome=L("tab.unfocusedActiveBorderTop",{dark:We(jA,.5),light:We(jA,.7),hcDark:null,hcLight:"#B5200D"},g("tabActiveUnfocusedBorderTop","Border to the top of an active tab in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),rme=L("tab.selectedBorderTop",jA,g("tabSelectedBorderTop","Border to the top of a selected tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));L("tab.selectedBackground",I5,g("tabSelectedBackground","Background of a selected tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));L("tab.selectedForeground",zp,g("tabSelectedForeground","Foreground of a selected tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));const aB=L("tab.hoverBorder",null,g("tabHoverBorder","Border to highlight tabs when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),ame=L("tab.unfocusedHoverBorder",{dark:We(aB,.5),light:We(aB,.7),hcDark:null,hcLight:Re},g("tabUnfocusedHoverBorder","Border to highlight tabs in an unfocused group when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));L("tab.dragAndDropBorder",{dark:zp,light:zp,hcDark:Vi,hcLight:Vi},g("tabDragAndDropBorder","Border between tabs to indicate that a tab can be inserted between two tabs. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));const Q0=L("tab.activeModifiedBorder",{dark:"#3399CC",light:"#33AAEE",hcDark:null,hcLight:Re},g("tabActiveModifiedBorder","Border on the top of modified active tabs in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),lB=L("tab.inactiveModifiedBorder",{dark:We(Q0,.5),light:We(Q0,.5),hcDark:U.white,hcLight:Re},g("tabInactiveModifiedBorder","Border on the top of modified inactive tabs in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),lme=L("tab.unfocusedActiveModifiedBorder",{dark:We(Q0,.5),light:We(Q0,.7),hcDark:U.white,hcLight:Re},g("unfocusedActiveModifiedBorder","Border on the top of modified active tabs in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),cme=L("tab.unfocusedInactiveModifiedBorder",{dark:We(lB,.5),light:We(lB,.5),hcDark:U.white,hcLight:Re},g("unfocusedINactiveModifiedBorder","Border on the top of modified inactive tabs in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));L("editorPane.background",Zd,g("editorPaneBackground","Background color of the editor pane visible on the left and right side of the centered editor layout."));L("editorGroup.emptyBackground",null,g("editorGroupEmptyBackground","Background color of an empty editor group. Editor groups are the containers of editors."));L("editorGroup.focusedEmptyBorder",{dark:null,light:null,hcDark:ec,hcLight:ec},g("editorGroupFocusedEmptyBorder","Border color of an empty editor group that is focused. Editor groups are the containers of editors."));const dme=L("editorGroupHeader.tabsBackground",{dark:"#252526",light:"#F3F3F3",hcDark:null,hcLight:null},g("tabsContainerBackground","Background color of the editor group title header when tabs are enabled. Editor groups are the containers of editors.")),hme=L("editorGroupHeader.tabsBorder",null,g("tabsContainerBorder","Border color of the editor group title header when tabs are enabled. Editor groups are the containers of editors."));L("editorGroupHeader.noTabsBackground",Zd,g("editorGroupHeaderBackground",'Background color of the editor group title header when (`"workbench.editor.showTabs": "single"`). Editor groups are the containers of editors.'));L("editorGroupHeader.border",{dark:null,light:null,hcDark:Re,hcLight:Re},g("editorTitleContainerBorder","Border color of the editor group title header. Editor groups are the containers of editors."));const Bj=L("editorGroup.border",{dark:"#444444",light:"#E7E7E7",hcDark:Re,hcLight:Re},g("editorGroupBorder","Color to separate multiple editor groups from each other. Editor groups are the containers of editors.")),KN=L("editorGroup.dropBackground",{dark:U.fromHex("#53595D").transparent(.5),light:U.fromHex("#2677CB").transparent(.18),hcDark:null,hcLight:U.fromHex("#0F4A85").transparent(.5)},g("editorDragAndDropBackground","Background color when dragging editors around. The color should have transparency so that the editor contents can still shine through."));L("editorGroup.dropIntoPromptForeground",Gy,g("editorDropIntoPromptForeground","Foreground color of text shown over editors when dragging files. This text informs the user that they can hold shift to drop into the editor."));L("editorGroup.dropIntoPromptBackground",Ya,g("editorDropIntoPromptBackground","Background color of text shown over editors when dragging files. This text informs the user that they can hold shift to drop into the editor."));L("editorGroup.dropIntoPromptBorder",{dark:null,light:null,hcDark:Re,hcLight:Re},g("editorDropIntoPromptBorder","Border color of text shown over editors when dragging files. This text informs the user that they can hold shift to drop into the editor."));const ume=L("sideBySideEditor.horizontalBorder",Bj,g("sideBySideEditor.horizontalBorder","Color to separate two editors from each other when shown side by side in an editor group from top to bottom.")),gme=L("sideBySideEditor.verticalBorder",Bj,g("sideBySideEditor.verticalBorder","Color to separate two editors from each other when shown side by side in an editor group from left to right.")),H1=L("panel.background",Zd,g("panelBackground","Panel background color. Panels are shown below the editor area and contain views like output and integrated terminal.")),cB=L("panel.border",{dark:U.fromHex("#808080").transparent(.35),light:U.fromHex("#808080").transparent(.35),hcDark:Re,hcLight:Re},g("panelBorder","Panel border color to separate the panel from the editor. Panels are shown below the editor area and contain views like output and integrated terminal.")),Tb=L("panelTitle.activeForeground",{dark:"#E7E7E7",light:"#424242",hcDark:U.white,hcLight:sm},g("panelActiveTitleForeground","Title color for the active panel. Panels are shown below the editor area and contain views like output and integrated terminal.")),Fj=L("panelTitle.inactiveForeground",{dark:We(Tb,.6),light:We(Tb,.75),hcDark:U.white,hcLight:sm},g("panelInactiveTitleForeground","Title color for the inactive panel. Panels are shown below the editor area and contain views like output and integrated terminal.")),Vj=L("panelTitle.activeBorder",{dark:Tb,light:Tb,hcDark:Re,hcLight:"#B5200D"},g("panelActiveTitleBorder","Border color for the active panel title. Panels are shown below the editor area and contain views like output and integrated terminal."));L("panelInput.border",{dark:nT,light:U.fromHex("#ddd"),hcDark:nT,hcLight:nT},g("panelInputBorder","Input box border for inputs in the panel."));const Wj=L("panel.dropBorder",Tb,g("panelDragAndDropBorder","Drag and drop feedback color for the panel titles. Panels are shown below the editor area and contain views like output and integrated terminal.")),T5=L("panelSection.dropBackground",KN,g("panelSectionDragAndDropBackground","Drag and drop feedback color for the panel sections. The color should have transparency so that the panel sections can still shine through. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),fme=L("panelSectionHeader.background",{dark:U.fromHex("#808080").transparent(.2),light:U.fromHex("#808080").transparent(.2),hcDark:null,hcLight:null},g("panelSectionHeaderBackground","Panel section header background color. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),pme=L("panelSectionHeader.foreground",null,g("panelSectionHeaderForeground","Panel section header foreground color. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),mme=L("panelSectionHeader.border",Re,g("panelSectionHeaderBorder","Panel section header border color used when multiple views are stacked vertically in the panel. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),_me=L("panelSection.border",cB,g("panelSectionBorder","Panel section border color used when multiple views are stacked horizontally in the panel. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),bme=L("panelStickyScroll.background",H1,g("panelStickyScrollBackground","Background color of sticky scroll in the panel.")),vme=L("panelStickyScroll.border",null,g("panelStickyScrollBorder","Border color of sticky scroll in the panel.")),wme=L("panelStickyScroll.shadow",OL,g("panelStickyScrollShadow","Shadow color of sticky scroll in the panel.")),Cme=L("outputView.background",null,g("outputViewBackground","Output view background color."));L("outputViewStickyScroll.background",Cme,g("outputViewStickyScrollBackground","Output view sticky scroll background color."));L("banner.background",{dark:Wl,light:rl(Wl,.3),hcDark:Wl,hcLight:Wl},g("banner.background","Banner background color. The banner is shown under the title bar of the window."));L("banner.foreground",Up,g("banner.foreground","Banner foreground color. The banner is shown under the title bar of the window."));L("banner.iconForeground",qg,g("banner.iconForeground","Banner icon color. The banner is shown under the title bar of the window."));const Ag=L("statusBar.foreground",{dark:"#FFFFFF",light:"#FFFFFF",hcDark:"#FFFFFF",hcLight:sm},g("statusBarForeground","Status bar foreground color when a workspace or folder is opened. The status bar is shown in the bottom of the window.")),yme=L("statusBar.noFolderForeground",Ag,g("statusBarNoFolderForeground","Status bar foreground color when no folder is opened. The status bar is shown in the bottom of the window.")),Sme=L("statusBar.background",{dark:"#007ACC",light:"#007ACC",hcDark:null,hcLight:null},g("statusBarBackground","Status bar background color when a workspace or folder is opened. The status bar is shown in the bottom of the window.")),Eme=L("statusBar.noFolderBackground",{dark:"#68217A",light:"#68217A",hcDark:null,hcLight:null},g("statusBarNoFolderBackground","Status bar background color when no folder is opened. The status bar is shown in the bottom of the window.")),Hj=L("statusBar.border",{dark:null,light:null,hcDark:Re,hcLight:Re},g("statusBarBorder","Status bar border color separating to the sidebar and editor. The status bar is shown in the bottom of the window.")),Lme=L("statusBar.focusBorder",{dark:Ag,light:Ag,hcDark:null,hcLight:Ag},g("statusBarFocusBorder","Status bar border color when focused on keyboard navigation. The status bar is shown in the bottom of the window.")),Dme=L("statusBar.noFolderBorder",Hj,g("statusBarNoFolderBorder","Status bar border color separating to the sidebar and editor when no folder is opened. The status bar is shown in the bottom of the window."));L("statusBarItem.activeBackground",{dark:U.white.transparent(.18),light:U.white.transparent(.18),hcDark:U.white.transparent(.18),hcLight:U.black.transparent(.18)},g("statusBarItemActiveBackground","Status bar item background color when clicking. The status bar is shown in the bottom of the window."));const Ime=L("statusBarItem.focusBorder",{dark:Ag,light:Ag,hcDark:null,hcLight:Vi},g("statusBarItemFocusBorder","Status bar item border color when focused on keyboard navigation. The status bar is shown in the bottom of the window.")),xg=L("statusBarItem.hoverBackground",{dark:U.white.transparent(.12),light:U.white.transparent(.12),hcDark:U.white.transparent(.12),hcLight:U.black.transparent(.12)},g("statusBarItemHoverBackground","Status bar item background color when hovering. The status bar is shown in the bottom of the window.")),BL=L("statusBarItem.hoverForeground",Ag,g("statusBarItemHoverForeground","Status bar item foreground color when hovering. The status bar is shown in the bottom of the window.")),Tme=L("statusBarItem.compactHoverBackground",{dark:U.white.transparent(.2),light:U.white.transparent(.2),hcDark:U.white.transparent(.2),hcLight:U.black.transparent(.2)},g("statusBarItemCompactHoverBackground","Status bar item background color when hovering an item that contains two hovers. The status bar is shown in the bottom of the window."));L("statusBarItem.prominentForeground",Ag,g("statusBarProminentItemForeground","Status bar prominent items foreground color. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window."));L("statusBarItem.prominentBackground",U.black.transparent(.5),g("statusBarProminentItemBackground","Status bar prominent items background color. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window."));L("statusBarItem.prominentHoverForeground",BL,g("statusBarProminentItemHoverForeground","Status bar prominent items foreground color when hovering. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window."));L("statusBarItem.prominentHoverBackground",{dark:U.black.transparent(.3),light:U.black.transparent(.3),hcDark:U.black.transparent(.3),hcLight:null},g("statusBarProminentItemHoverBackground","Status bar prominent items background color when hovering. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window."));L("statusBarItem.errorBackground",{dark:rl(J9,.4),light:rl(J9,.4),hcDark:null,hcLight:"#B5200D"},g("statusBarErrorItemBackground","Status bar error items background color. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window."));L("statusBarItem.errorForeground",U.white,g("statusBarErrorItemForeground","Status bar error items foreground color. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window."));L("statusBarItem.errorHoverForeground",BL,g("statusBarErrorItemHoverForeground","Status bar error items foreground color when hovering. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window."));L("statusBarItem.errorHoverBackground",xg,g("statusBarErrorItemHoverBackground","Status bar error items background color when hovering. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window."));L("statusBarItem.warningBackground",{dark:rl(Xd,.4),light:rl(Xd,.4),hcDark:null,hcLight:"#895503"},g("statusBarWarningItemBackground","Status bar warning items background color. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window."));L("statusBarItem.warningForeground",U.white,g("statusBarWarningItemForeground","Status bar warning items foreground color. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window."));L("statusBarItem.warningHoverForeground",BL,g("statusBarWarningItemHoverForeground","Status bar warning items foreground color when hovering. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window."));L("statusBarItem.warningHoverBackground",xg,g("statusBarWarningItemHoverBackground","Status bar warning items background color when hovering. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window."));const Ame=L("activityBar.background",{dark:"#333333",light:"#2C2C2C",hcDark:"#000000",hcLight:"#FFFFFF"},g("activityBarBackground","Activity bar background color. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),Ab=L("activityBar.foreground",{dark:U.white,light:U.white,hcDark:U.white,hcLight:sm},g("activityBarForeground","Activity bar item foreground color when it is active. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),xme=L("activityBar.inactiveForeground",{dark:We(Ab,.4),light:We(Ab,.4),hcDark:U.white,hcLight:sm},g("activityBarInActiveForeground","Activity bar item foreground color when it is inactive. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),kme=L("activityBar.border",{dark:null,light:null,hcDark:Re,hcLight:Re},g("activityBarBorder","Activity bar border color separating to the side bar. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),Uj=L("activityBar.activeBorder",{dark:Ab,light:Ab,hcDark:Re,hcLight:Re},g("activityBarActiveBorder","Activity bar border color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),Nme=L("activityBar.activeFocusBorder",{dark:null,light:null,hcDark:null,hcLight:"#B5200D"},g("activityBarActiveFocusBorder","Activity bar focus border color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),zj=L("activityBar.activeBackground",null,g("activityBarActiveBackground","Activity bar background color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),Pme=L("activityBar.dropBorder",{dark:Ab,light:Ab,hcDark:null,hcLight:null},g("activityBarDragAndDropBorder","Drag and drop feedback color for the activity bar items. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),dv=L("activityBarBadge.background",{dark:"#007ACC",light:"#007ACC",hcDark:"#000000",hcLight:"#0F4A85"},g("activityBarBadgeBackground","Activity notification badge background color. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),hv=L("activityBarBadge.foreground",U.white,g("activityBarBadgeForeground","Activity notification badge foreground color. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),xb=L("activityBarTop.foreground",{dark:"#E7E7E7",light:"#424242",hcDark:U.white,hcLight:sm},g("activityBarTop","Active foreground color of the item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar.")),$j=L("activityBarTop.activeBorder",{dark:xb,light:xb,hcDark:Re,hcLight:"#B5200D"},g("activityBarTopActiveFocusBorder","Focus border color for the active item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar."));L("activityBarTop.activeBackground",null,g("activityBarTopActiveBackground","Background color for the active item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar."));const Gj=L("activityBarTop.inactiveForeground",{dark:We(xb,.6),light:We(xb,.75),hcDark:U.white,hcLight:sm},g("activityBarTopInActiveForeground","Inactive foreground color of the item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar.")),Kj=L("activityBarTop.dropBorder",xb,g("activityBarTopDragAndDropBorder","Drag and drop feedback color for the items in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar."));L("activityBarTop.background",null,g("activityBarTopBackground","Background color of the activity bar when set to top / bottom."));L("profileBadge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:U.white,hcLight:U.black},g("profileBadgeBackground","Profile badge background color. The profile badge shows on top of the settings gear icon in the activity bar."));L("profileBadge.foreground",{dark:U.white,light:"#333333",hcDark:U.black,hcLight:U.white},g("profileBadgeForeground","Profile badge foreground color. The profile badge shows on top of the settings gear icon in the activity bar."));L("statusBarItem.remoteBackground",dv,g("statusBarItemHostBackground","Background color for the remote indicator on the status bar."));const Rme=L("statusBarItem.remoteForeground",hv,g("statusBarItemHostForeground","Foreground color for the remote indicator on the status bar."));L("statusBarItem.remoteHoverForeground",BL,g("statusBarRemoteItemHoverForeground","Foreground color for the remote indicator on the status bar when hovering."));L("statusBarItem.remoteHoverBackground",{dark:xg,light:xg,hcDark:xg,hcLight:null},g("statusBarRemoteItemHoverBackground","Background color for the remote indicator on the status bar when hovering."));L("statusBarItem.offlineBackground","#6c1717",g("statusBarItemOfflineBackground","Status bar item background color when the workbench is offline."));L("statusBarItem.offlineForeground",Rme,g("statusBarItemOfflineForeground","Status bar item foreground color when the workbench is offline."));L("statusBarItem.offlineHoverForeground",BL,g("statusBarOfflineItemHoverForeground","Status bar item foreground hover color when the workbench is offline."));L("statusBarItem.offlineHoverBackground",{dark:xg,light:xg,hcDark:xg,hcLight:null},g("statusBarOfflineItemHoverBackground","Status bar item background hover color when the workbench is offline."));L("extensionBadge.remoteBackground",dv,g("extensionBadge.remoteBackground","Background color for the remote badge in the extensions view."));L("extensionBadge.remoteForeground",hv,g("extensionBadge.remoteForeground","Foreground color for the remote badge in the extensions view."));const kg=L("sideBar.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#000000",hcLight:"#FFFFFF"},g("sideBarBackground","Side bar background color. The side bar is the container for views like explorer and search.")),jN=L("sideBar.foreground",null,g("sideBarForeground","Side bar foreground color. The side bar is the container for views like explorer and search.")),qA=L("sideBar.border",{dark:null,light:null,hcDark:Re,hcLight:Re},g("sideBarBorder","Side bar border color on the side separating to the editor. The side bar is the container for views like explorer and search."));L("sideBarTitle.background",kg,g("sideBarTitleBackground","Side bar title background color. The side bar is the container for views like explorer and search."));const Ome=L("sideBarTitle.foreground",jN,g("sideBarTitleForeground","Side bar title foreground color. The side bar is the container for views like explorer and search.")),qN=L("sideBar.dropBackground",KN,g("sideBarDragAndDropBackground","Drag and drop feedback color for the side bar sections. The color should have transparency so that the side bar sections can still shine through. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar.")),Mme=L("sideBarSectionHeader.background",{dark:U.fromHex("#808080").transparent(.2),light:U.fromHex("#808080").transparent(.2),hcDark:null,hcLight:null},g("sideBarSectionHeaderBackground","Side bar section header background color. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar.")),Bme=L("sideBarSectionHeader.foreground",jN,g("sideBarSectionHeaderForeground","Side bar section header foreground color. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar.")),jj=L("sideBarSectionHeader.border",Re,g("sideBarSectionHeaderBorder","Side bar section header border color. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar."));L("sideBarActivityBarTop.border",jj,g("sideBarActivityBarTopBorder","Border color between the activity bar at the top/bottom and the views."));const Fme=L("sideBarStickyScroll.background",kg,g("sideBarStickyScrollBackground","Background color of sticky scroll in the side bar.")),Vme=L("sideBarStickyScroll.border",null,g("sideBarStickyScrollBorder","Border color of sticky scroll in the side bar.")),Wme=L("sideBarStickyScroll.shadow",OL,g("sideBarStickyScrollShadow","Shadow color of sticky scroll in the side bar.")),Md=L("titleBar.activeForeground",{dark:"#CCCCCC",light:"#333333",hcDark:"#FFFFFF",hcLight:"#292929"},g("titleBarActiveForeground","Title bar foreground when the window is active.")),A5=L("titleBar.inactiveForeground",{dark:We(Md,.6),light:We(Md,.6),hcDark:null,hcLight:"#292929"},g("titleBarInactiveForeground","Title bar foreground when the window is inactive.")),YA=L("titleBar.activeBackground",{dark:"#3C3C3C",light:"#DDDDDD",hcDark:"#000000",hcLight:"#FFFFFF"},g("titleBarActiveBackground","Title bar background when the window is active.")),Hme=L("titleBar.inactiveBackground",{dark:We(YA,.6),light:We(YA,.6),hcDark:null,hcLight:null},g("titleBarInactiveBackground","Title bar background when the window is inactive.")),Ume=L("titleBar.border",{dark:null,light:null,hcDark:Re,hcLight:Re},g("titleBarBorder","Title bar border color.")),zme=L("menubar.selectionForeground",Md,g("menubarSelectionForeground","Foreground color of the selected menu item in the menubar.")),u8=L("menubar.selectionBackground",{dark:$A,light:$A,hcDark:null,hcLight:null},g("menubarSelectionBackground","Background color of the selected menu item in the menubar."));L("menubar.selectionBorder",{dark:null,light:null,hcDark:Vi,hcLight:Vi},g("menubarSelectionBorder","Border color of the selected menu item in the menubar."));L("commandCenter.foreground",Md,g("commandCenter-foreground","Foreground color of the command center"),!1);L("commandCenter.activeForeground",zme,g("commandCenter-activeForeground","Active foreground color of the command center"),!1);L("commandCenter.inactiveForeground",A5,g("commandCenter-inactiveForeground","Foreground color of the command center when the window is inactive"),!1);L("commandCenter.background",{dark:U.white.transparent(.05),hcDark:null,light:U.black.transparent(.05),hcLight:null},g("commandCenter-background","Background color of the command center"),!1);L("commandCenter.activeBackground",{dark:U.white.transparent(.08),hcDark:u8,light:U.black.transparent(.08),hcLight:u8},g("commandCenter-activeBackground","Active background color of the command center"),!1);L("commandCenter.border",{dark:We(Md,.2),hcDark:Re,light:We(Md,.2),hcLight:Re},g("commandCenter-border","Border color of the command center"),!1);L("commandCenter.activeBorder",{dark:We(Md,.3),hcDark:Md,light:We(Md,.3),hcLight:Md},g("commandCenter-activeBorder","Active border color of the command center"),!1);L("commandCenter.inactiveBorder",We(A5,.25),g("commandCenter-inactiveBorder","Border color of the command center when the window is inactive"),!1);const $me=L("notificationCenter.border",{dark:X0,light:X0,hcDark:Re,hcLight:Re},g("notificationCenterBorder","Notifications center border color. Notifications slide in from the bottom right of the window.")),Gme=L("notificationToast.border",{dark:X0,light:X0,hcDark:Re,hcLight:Re},g("notificationToastBorder","Notification toast border color. Notifications slide in from the bottom right of the window."));L("notifications.foreground",Gy,g("notificationsForeground","Notifications foreground color. Notifications slide in from the bottom right of the window."));const fw=L("notifications.background",Ya,g("notificationsBackground","Notifications background color. Notifications slide in from the bottom right of the window."));L("notificationLink.foreground",fj,g("notificationsLink","Notification links foreground color. Notifications slide in from the bottom right of the window."));const Kme=L("notificationCenterHeader.foreground",null,g("notificationCenterHeaderForeground","Notifications center header foreground color. Notifications slide in from the bottom right of the window.")),qj=L("notificationCenterHeader.background",{dark:$l(fw,.3),light:rl(fw,.05),hcDark:fw,hcLight:fw},g("notificationCenterHeaderBackground","Notifications center header background color. Notifications slide in from the bottom right of the window."));L("notifications.border",qj,g("notificationsBorder","Notifications border color separating from other notifications in the notifications center. Notifications slide in from the bottom right of the window."));L("notificationsErrorIcon.foreground",zN,g("notificationsErrorIconForeground","The color used for the icon of error notifications. Notifications slide in from the bottom right of the window."));L("notificationsWarningIcon.foreground",Xd,g("notificationsWarningIconForeground","The color used for the icon of warning notifications. Notifications slide in from the bottom right of the window."));L("notificationsInfoIcon.foreground",qg,g("notificationsInfoIconForeground","The color used for the icon of info notifications. Notifications slide in from the bottom right of the window."));const jme=L("window.activeBorder",{dark:null,light:null,hcDark:Re,hcLight:Re},g("windowActiveBorder","The color used for the border of the window when it is active. Only supported in the macOS and Linux desktop client when using the custom title bar.")),qme=L("window.inactiveBorder",{dark:null,light:null,hcDark:Re,hcLight:Re},g("windowInactiveBorder","The color used for the border of the window when it is inactive. Only supported in the macOS and Linux desktop client when using the custom title bar."));var Yme=Object.defineProperty,x5=(i,e)=>Yme(i,"name",{value:e,configurable:!0});function k5(i,e){const t=i;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:x5(()=>e,"get")})}x5(k5,"ensureCodeWindow");const _e=window;function N5(i){return i===_e?!1:typeof i?.vscodeWindowId=="number"}x5(N5,"isAuxiliaryWindow");var Zme=Object.defineProperty,ch=(i,e)=>Zme(i,"name",{value:e,configurable:!0});class pu{static{ch(this,"WindowManager")}static INSTANCE=new pu;mapWindowIdToZoomLevel=new Map;_onDidChangeZoomLevel=new x;onDidChangeZoomLevel=this._onDidChangeZoomLevel.event;getZoomLevel(e){return this.mapWindowIdToZoomLevel.get(this.getWindowId(e))??0}setZoomLevel(e,t){if(this.getZoomLevel(t)===e)return;const n=this.getWindowId(t);this.mapWindowIdToZoomLevel.set(n,e),this._onDidChangeZoomLevel.fire(n)}mapWindowIdToZoomFactor=new Map;getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}setZoomFactor(e,t){this.mapWindowIdToZoomFactor.set(this.getWindowId(t),e)}_onDidChangeFullscreen=new x;onDidChangeFullscreen=this._onDidChangeFullscreen.event;mapWindowIdToFullScreen=new Map;setFullscreen(e,t){if(this.isFullscreen(t)===e)return;const n=this.getWindowId(t);this.mapWindowIdToFullScreen.set(n,e),this._onDidChangeFullscreen.fire(n)}isFullscreen(e){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(e))}getWindowId(e){return e.vscodeWindowId}}function Yj(i,e,t){typeof e=="string"&&(e=i.matchMedia(e)),e.addEventListener("change",t)}ch(Yj,"addMatchMediaChangeListener");function Xme(i,e){pu.INSTANCE.setZoomLevel(i,e)}ch(Xme,"setZoomLevel");function Zj(i){return pu.INSTANCE.getZoomLevel(i)}ch(Zj,"getZoomLevel");pu.INSTANCE.onDidChangeZoomLevel;function Kw(i){return pu.INSTANCE.getZoomFactor(i)}ch(Kw,"getZoomFactor");function Qme(i,e){pu.INSTANCE.setZoomFactor(i,e)}ch(Qme,"setZoomFactor");function Xj(i,e){pu.INSTANCE.setFullscreen(i,e)}ch(Xj,"setFullscreen");function kb(i){return pu.INSTANCE.isFullscreen(i)}ch(kb,"isFullscreen");const P5=pu.INSTANCE.onDidChangeFullscreen,jy=navigator.userAgent,na=jy.indexOf("Firefox")>=0,J_=jy.indexOf("AppleWebKit")>=0,qy=jy.indexOf("Chrome")>=0,Vc=!qy&&jy.indexOf("Safari")>=0,Jme=!qy&&!Vc&&J_;jy.indexOf("Electron/")>=0;const g8=jy.indexOf("Android")>=0;let sT=!1;if(typeof _e.matchMedia=="function"){const i=_e.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=_e.matchMedia("(display-mode: fullscreen)");sT=i.matches,Yj(_e,i,({matches:t})=>{sT&&e.matches||(sT=t)})}function R5(){return sT}ch(R5,"isStandalone");function J0(){return navigator?.windowControlsOverlay?.visible}ch(J0,"isWCOEnabled");function Qj(i){return i.navigator?.windowControlsOverlay?.getTitlebarAreaRect()}ch(Qj,"getWCOTitlebarAreaRect");const Yy={clipboard:{writeText:ao||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:ao||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:ao||R5()?0:navigator.keyboard||Vc?1:2,touch:"ontouchstart"in _e||navigator.maxTouchPoints>0,pointerEvents:_e.PointerEvent&&("ontouchstart"in _e||navigator.maxTouchPoints>0)};var e_e=Object.defineProperty,Dd=(i,e)=>e_e(i,"name",{value:e,configurable:!0}),E=(i=>(i[i.DependsOnKbLayout=-1]="DependsOnKbLayout",i[i.Unknown=0]="Unknown",i[i.Backspace=1]="Backspace",i[i.Tab=2]="Tab",i[i.Enter=3]="Enter",i[i.Shift=4]="Shift",i[i.Ctrl=5]="Ctrl",i[i.Alt=6]="Alt",i[i.PauseBreak=7]="PauseBreak",i[i.CapsLock=8]="CapsLock",i[i.Escape=9]="Escape",i[i.Space=10]="Space",i[i.PageUp=11]="PageUp",i[i.PageDown=12]="PageDown",i[i.End=13]="End",i[i.Home=14]="Home",i[i.LeftArrow=15]="LeftArrow",i[i.UpArrow=16]="UpArrow",i[i.RightArrow=17]="RightArrow",i[i.DownArrow=18]="DownArrow",i[i.Insert=19]="Insert",i[i.Delete=20]="Delete",i[i.Digit0=21]="Digit0",i[i.Digit1=22]="Digit1",i[i.Digit2=23]="Digit2",i[i.Digit3=24]="Digit3",i[i.Digit4=25]="Digit4",i[i.Digit5=26]="Digit5",i[i.Digit6=27]="Digit6",i[i.Digit7=28]="Digit7",i[i.Digit8=29]="Digit8",i[i.Digit9=30]="Digit9",i[i.KeyA=31]="KeyA",i[i.KeyB=32]="KeyB",i[i.KeyC=33]="KeyC",i[i.KeyD=34]="KeyD",i[i.KeyE=35]="KeyE",i[i.KeyF=36]="KeyF",i[i.KeyG=37]="KeyG",i[i.KeyH=38]="KeyH",i[i.KeyI=39]="KeyI",i[i.KeyJ=40]="KeyJ",i[i.KeyK=41]="KeyK",i[i.KeyL=42]="KeyL",i[i.KeyM=43]="KeyM",i[i.KeyN=44]="KeyN",i[i.KeyO=45]="KeyO",i[i.KeyP=46]="KeyP",i[i.KeyQ=47]="KeyQ",i[i.KeyR=48]="KeyR",i[i.KeyS=49]="KeyS",i[i.KeyT=50]="KeyT",i[i.KeyU=51]="KeyU",i[i.KeyV=52]="KeyV",i[i.KeyW=53]="KeyW",i[i.KeyX=54]="KeyX",i[i.KeyY=55]="KeyY",i[i.KeyZ=56]="KeyZ",i[i.Meta=57]="Meta",i[i.ContextMenu=58]="ContextMenu",i[i.F1=59]="F1",i[i.F2=60]="F2",i[i.F3=61]="F3",i[i.F4=62]="F4",i[i.F5=63]="F5",i[i.F6=64]="F6",i[i.F7=65]="F7",i[i.F8=66]="F8",i[i.F9=67]="F9",i[i.F10=68]="F10",i[i.F11=69]="F11",i[i.F12=70]="F12",i[i.F13=71]="F13",i[i.F14=72]="F14",i[i.F15=73]="F15",i[i.F16=74]="F16",i[i.F17=75]="F17",i[i.F18=76]="F18",i[i.F19=77]="F19",i[i.F20=78]="F20",i[i.F21=79]="F21",i[i.F22=80]="F22",i[i.F23=81]="F23",i[i.F24=82]="F24",i[i.NumLock=83]="NumLock",i[i.ScrollLock=84]="ScrollLock",i[i.Semicolon=85]="Semicolon",i[i.Equal=86]="Equal",i[i.Comma=87]="Comma",i[i.Minus=88]="Minus",i[i.Period=89]="Period",i[i.Slash=90]="Slash",i[i.Backquote=91]="Backquote",i[i.BracketLeft=92]="BracketLeft",i[i.Backslash=93]="Backslash",i[i.BracketRight=94]="BracketRight",i[i.Quote=95]="Quote",i[i.OEM_8=96]="OEM_8",i[i.IntlBackslash=97]="IntlBackslash",i[i.Numpad0=98]="Numpad0",i[i.Numpad1=99]="Numpad1",i[i.Numpad2=100]="Numpad2",i[i.Numpad3=101]="Numpad3",i[i.Numpad4=102]="Numpad4",i[i.Numpad5=103]="Numpad5",i[i.Numpad6=104]="Numpad6",i[i.Numpad7=105]="Numpad7",i[i.Numpad8=106]="Numpad8",i[i.Numpad9=107]="Numpad9",i[i.NumpadMultiply=108]="NumpadMultiply",i[i.NumpadAdd=109]="NumpadAdd",i[i.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",i[i.NumpadSubtract=111]="NumpadSubtract",i[i.NumpadDecimal=112]="NumpadDecimal",i[i.NumpadDivide=113]="NumpadDivide",i[i.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",i[i.ABNT_C1=115]="ABNT_C1",i[i.ABNT_C2=116]="ABNT_C2",i[i.AudioVolumeMute=117]="AudioVolumeMute",i[i.AudioVolumeUp=118]="AudioVolumeUp",i[i.AudioVolumeDown=119]="AudioVolumeDown",i[i.BrowserSearch=120]="BrowserSearch",i[i.BrowserHome=121]="BrowserHome",i[i.BrowserBack=122]="BrowserBack",i[i.BrowserForward=123]="BrowserForward",i[i.MediaTrackNext=124]="MediaTrackNext",i[i.MediaTrackPrevious=125]="MediaTrackPrevious",i[i.MediaStop=126]="MediaStop",i[i.MediaPlayPause=127]="MediaPlayPause",i[i.LaunchMediaPlayer=128]="LaunchMediaPlayer",i[i.LaunchMail=129]="LaunchMail",i[i.LaunchApp2=130]="LaunchApp2",i[i.Clear=131]="Clear",i[i.MAX_VALUE=132]="MAX_VALUE",i))(E||{}),kh=(i=>(i[i.DependsOnKbLayout=-1]="DependsOnKbLayout",i[i.None=0]="None",i[i.Hyper=1]="Hyper",i[i.Super=2]="Super",i[i.Fn=3]="Fn",i[i.FnLock=4]="FnLock",i[i.Suspend=5]="Suspend",i[i.Resume=6]="Resume",i[i.Turbo=7]="Turbo",i[i.Sleep=8]="Sleep",i[i.WakeUp=9]="WakeUp",i[i.KeyA=10]="KeyA",i[i.KeyB=11]="KeyB",i[i.KeyC=12]="KeyC",i[i.KeyD=13]="KeyD",i[i.KeyE=14]="KeyE",i[i.KeyF=15]="KeyF",i[i.KeyG=16]="KeyG",i[i.KeyH=17]="KeyH",i[i.KeyI=18]="KeyI",i[i.KeyJ=19]="KeyJ",i[i.KeyK=20]="KeyK",i[i.KeyL=21]="KeyL",i[i.KeyM=22]="KeyM",i[i.KeyN=23]="KeyN",i[i.KeyO=24]="KeyO",i[i.KeyP=25]="KeyP",i[i.KeyQ=26]="KeyQ",i[i.KeyR=27]="KeyR",i[i.KeyS=28]="KeyS",i[i.KeyT=29]="KeyT",i[i.KeyU=30]="KeyU",i[i.KeyV=31]="KeyV",i[i.KeyW=32]="KeyW",i[i.KeyX=33]="KeyX",i[i.KeyY=34]="KeyY",i[i.KeyZ=35]="KeyZ",i[i.Digit1=36]="Digit1",i[i.Digit2=37]="Digit2",i[i.Digit3=38]="Digit3",i[i.Digit4=39]="Digit4",i[i.Digit5=40]="Digit5",i[i.Digit6=41]="Digit6",i[i.Digit7=42]="Digit7",i[i.Digit8=43]="Digit8",i[i.Digit9=44]="Digit9",i[i.Digit0=45]="Digit0",i[i.Enter=46]="Enter",i[i.Escape=47]="Escape",i[i.Backspace=48]="Backspace",i[i.Tab=49]="Tab",i[i.Space=50]="Space",i[i.Minus=51]="Minus",i[i.Equal=52]="Equal",i[i.BracketLeft=53]="BracketLeft",i[i.BracketRight=54]="BracketRight",i[i.Backslash=55]="Backslash",i[i.IntlHash=56]="IntlHash",i[i.Semicolon=57]="Semicolon",i[i.Quote=58]="Quote",i[i.Backquote=59]="Backquote",i[i.Comma=60]="Comma",i[i.Period=61]="Period",i[i.Slash=62]="Slash",i[i.CapsLock=63]="CapsLock",i[i.F1=64]="F1",i[i.F2=65]="F2",i[i.F3=66]="F3",i[i.F4=67]="F4",i[i.F5=68]="F5",i[i.F6=69]="F6",i[i.F7=70]="F7",i[i.F8=71]="F8",i[i.F9=72]="F9",i[i.F10=73]="F10",i[i.F11=74]="F11",i[i.F12=75]="F12",i[i.PrintScreen=76]="PrintScreen",i[i.ScrollLock=77]="ScrollLock",i[i.Pause=78]="Pause",i[i.Insert=79]="Insert",i[i.Home=80]="Home",i[i.PageUp=81]="PageUp",i[i.Delete=82]="Delete",i[i.End=83]="End",i[i.PageDown=84]="PageDown",i[i.ArrowRight=85]="ArrowRight",i[i.ArrowLeft=86]="ArrowLeft",i[i.ArrowDown=87]="ArrowDown",i[i.ArrowUp=88]="ArrowUp",i[i.NumLock=89]="NumLock",i[i.NumpadDivide=90]="NumpadDivide",i[i.NumpadMultiply=91]="NumpadMultiply",i[i.NumpadSubtract=92]="NumpadSubtract",i[i.NumpadAdd=93]="NumpadAdd",i[i.NumpadEnter=94]="NumpadEnter",i[i.Numpad1=95]="Numpad1",i[i.Numpad2=96]="Numpad2",i[i.Numpad3=97]="Numpad3",i[i.Numpad4=98]="Numpad4",i[i.Numpad5=99]="Numpad5",i[i.Numpad6=100]="Numpad6",i[i.Numpad7=101]="Numpad7",i[i.Numpad8=102]="Numpad8",i[i.Numpad9=103]="Numpad9",i[i.Numpad0=104]="Numpad0",i[i.NumpadDecimal=105]="NumpadDecimal",i[i.IntlBackslash=106]="IntlBackslash",i[i.ContextMenu=107]="ContextMenu",i[i.Power=108]="Power",i[i.NumpadEqual=109]="NumpadEqual",i[i.F13=110]="F13",i[i.F14=111]="F14",i[i.F15=112]="F15",i[i.F16=113]="F16",i[i.F17=114]="F17",i[i.F18=115]="F18",i[i.F19=116]="F19",i[i.F20=117]="F20",i[i.F21=118]="F21",i[i.F22=119]="F22",i[i.F23=120]="F23",i[i.F24=121]="F24",i[i.Open=122]="Open",i[i.Help=123]="Help",i[i.Select=124]="Select",i[i.Again=125]="Again",i[i.Undo=126]="Undo",i[i.Cut=127]="Cut",i[i.Copy=128]="Copy",i[i.Paste=129]="Paste",i[i.Find=130]="Find",i[i.AudioVolumeMute=131]="AudioVolumeMute",i[i.AudioVolumeUp=132]="AudioVolumeUp",i[i.AudioVolumeDown=133]="AudioVolumeDown",i[i.NumpadComma=134]="NumpadComma",i[i.IntlRo=135]="IntlRo",i[i.KanaMode=136]="KanaMode",i[i.IntlYen=137]="IntlYen",i[i.Convert=138]="Convert",i[i.NonConvert=139]="NonConvert",i[i.Lang1=140]="Lang1",i[i.Lang2=141]="Lang2",i[i.Lang3=142]="Lang3",i[i.Lang4=143]="Lang4",i[i.Lang5=144]="Lang5",i[i.Abort=145]="Abort",i[i.Props=146]="Props",i[i.NumpadParenLeft=147]="NumpadParenLeft",i[i.NumpadParenRight=148]="NumpadParenRight",i[i.NumpadBackspace=149]="NumpadBackspace",i[i.NumpadMemoryStore=150]="NumpadMemoryStore",i[i.NumpadMemoryRecall=151]="NumpadMemoryRecall",i[i.NumpadMemoryClear=152]="NumpadMemoryClear",i[i.NumpadMemoryAdd=153]="NumpadMemoryAdd",i[i.NumpadMemorySubtract=154]="NumpadMemorySubtract",i[i.NumpadClear=155]="NumpadClear",i[i.NumpadClearEntry=156]="NumpadClearEntry",i[i.ControlLeft=157]="ControlLeft",i[i.ShiftLeft=158]="ShiftLeft",i[i.AltLeft=159]="AltLeft",i[i.MetaLeft=160]="MetaLeft",i[i.ControlRight=161]="ControlRight",i[i.ShiftRight=162]="ShiftRight",i[i.AltRight=163]="AltRight",i[i.MetaRight=164]="MetaRight",i[i.BrightnessUp=165]="BrightnessUp",i[i.BrightnessDown=166]="BrightnessDown",i[i.MediaPlay=167]="MediaPlay",i[i.MediaRecord=168]="MediaRecord",i[i.MediaFastForward=169]="MediaFastForward",i[i.MediaRewind=170]="MediaRewind",i[i.MediaTrackNext=171]="MediaTrackNext",i[i.MediaTrackPrevious=172]="MediaTrackPrevious",i[i.MediaStop=173]="MediaStop",i[i.Eject=174]="Eject",i[i.MediaPlayPause=175]="MediaPlayPause",i[i.MediaSelect=176]="MediaSelect",i[i.LaunchMail=177]="LaunchMail",i[i.LaunchApp2=178]="LaunchApp2",i[i.LaunchApp1=179]="LaunchApp1",i[i.SelectTask=180]="SelectTask",i[i.LaunchScreenSaver=181]="LaunchScreenSaver",i[i.BrowserSearch=182]="BrowserSearch",i[i.BrowserHome=183]="BrowserHome",i[i.BrowserBack=184]="BrowserBack",i[i.BrowserForward=185]="BrowserForward",i[i.BrowserStop=186]="BrowserStop",i[i.BrowserRefresh=187]="BrowserRefresh",i[i.BrowserFavorites=188]="BrowserFavorites",i[i.ZoomToggle=189]="ZoomToggle",i[i.MailReply=190]="MailReply",i[i.MailForward=191]="MailForward",i[i.MailSend=192]="MailSend",i[i.MAX_VALUE=193]="MAX_VALUE",i))(kh||{});class O5{static{Dd(this,"KeyCodeStrMap")}_keyCodeToStr;_strToKeyCode;constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const oT=new O5,dB=new O5,hB=new O5,Jj=new Array(230),eq=[],tq=Object.create(null),iq=Object.create(null),t_e={lowerCaseToEnum:Dd(i=>iq[i]||0,"lowerCaseToEnum"),toEnum:Dd(i=>tq[i]||0,"toEnum"),toString:Dd(i=>eq[i]||"None","toString")};(function(){const i="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",i,i],[1,1,"Hyper",0,i,0,i,i,i],[1,2,"Super",0,i,0,i,i,i],[1,3,"Fn",0,i,0,i,i,i],[1,4,"FnLock",0,i,0,i,i,i],[1,5,"Suspend",0,i,0,i,i,i],[1,6,"Resume",0,i,0,i,i,i],[1,7,"Turbo",0,i,0,i,i,i],[1,8,"Sleep",0,i,0,"VK_SLEEP",i,i],[1,9,"WakeUp",0,i,0,i,i,i],[0,10,"KeyA",31,"A",65,"VK_A",i,i],[0,11,"KeyB",32,"B",66,"VK_B",i,i],[0,12,"KeyC",33,"C",67,"VK_C",i,i],[0,13,"KeyD",34,"D",68,"VK_D",i,i],[0,14,"KeyE",35,"E",69,"VK_E",i,i],[0,15,"KeyF",36,"F",70,"VK_F",i,i],[0,16,"KeyG",37,"G",71,"VK_G",i,i],[0,17,"KeyH",38,"H",72,"VK_H",i,i],[0,18,"KeyI",39,"I",73,"VK_I",i,i],[0,19,"KeyJ",40,"J",74,"VK_J",i,i],[0,20,"KeyK",41,"K",75,"VK_K",i,i],[0,21,"KeyL",42,"L",76,"VK_L",i,i],[0,22,"KeyM",43,"M",77,"VK_M",i,i],[0,23,"KeyN",44,"N",78,"VK_N",i,i],[0,24,"KeyO",45,"O",79,"VK_O",i,i],[0,25,"KeyP",46,"P",80,"VK_P",i,i],[0,26,"KeyQ",47,"Q",81,"VK_Q",i,i],[0,27,"KeyR",48,"R",82,"VK_R",i,i],[0,28,"KeyS",49,"S",83,"VK_S",i,i],[0,29,"KeyT",50,"T",84,"VK_T",i,i],[0,30,"KeyU",51,"U",85,"VK_U",i,i],[0,31,"KeyV",52,"V",86,"VK_V",i,i],[0,32,"KeyW",53,"W",87,"VK_W",i,i],[0,33,"KeyX",54,"X",88,"VK_X",i,i],[0,34,"KeyY",55,"Y",89,"VK_Y",i,i],[0,35,"KeyZ",56,"Z",90,"VK_Z",i,i],[0,36,"Digit1",22,"1",49,"VK_1",i,i],[0,37,"Digit2",23,"2",50,"VK_2",i,i],[0,38,"Digit3",24,"3",51,"VK_3",i,i],[0,39,"Digit4",25,"4",52,"VK_4",i,i],[0,40,"Digit5",26,"5",53,"VK_5",i,i],[0,41,"Digit6",27,"6",54,"VK_6",i,i],[0,42,"Digit7",28,"7",55,"VK_7",i,i],[0,43,"Digit8",29,"8",56,"VK_8",i,i],[0,44,"Digit9",30,"9",57,"VK_9",i,i],[0,45,"Digit0",21,"0",48,"VK_0",i,i],[1,46,"Enter",3,"Enter",13,"VK_RETURN",i,i],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",i,i],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",i,i],[1,49,"Tab",2,"Tab",9,"VK_TAB",i,i],[1,50,"Space",10,"Space",32,"VK_SPACE",i,i],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,i,0,i,i,i],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",i,i],[1,64,"F1",59,"F1",112,"VK_F1",i,i],[1,65,"F2",60,"F2",113,"VK_F2",i,i],[1,66,"F3",61,"F3",114,"VK_F3",i,i],[1,67,"F4",62,"F4",115,"VK_F4",i,i],[1,68,"F5",63,"F5",116,"VK_F5",i,i],[1,69,"F6",64,"F6",117,"VK_F6",i,i],[1,70,"F7",65,"F7",118,"VK_F7",i,i],[1,71,"F8",66,"F8",119,"VK_F8",i,i],[1,72,"F9",67,"F9",120,"VK_F9",i,i],[1,73,"F10",68,"F10",121,"VK_F10",i,i],[1,74,"F11",69,"F11",122,"VK_F11",i,i],[1,75,"F12",70,"F12",123,"VK_F12",i,i],[1,76,"PrintScreen",0,i,0,i,i,i],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",i,i],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",i,i],[1,79,"Insert",19,"Insert",45,"VK_INSERT",i,i],[1,80,"Home",14,"Home",36,"VK_HOME",i,i],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",i,i],[1,82,"Delete",20,"Delete",46,"VK_DELETE",i,i],[1,83,"End",13,"End",35,"VK_END",i,i],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",i,i],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",i],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",i],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",i],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",i],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",i,i],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",i,i],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",i,i],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",i,i],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",i,i],[1,94,"NumpadEnter",3,i,0,i,i,i],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",i,i],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",i,i],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",i,i],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",i,i],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",i,i],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",i,i],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",i,i],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",i,i],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",i,i],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",i,i],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",i,i],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",i,i],[1,107,"ContextMenu",58,"ContextMenu",93,i,i,i],[1,108,"Power",0,i,0,i,i,i],[1,109,"NumpadEqual",0,i,0,i,i,i],[1,110,"F13",71,"F13",124,"VK_F13",i,i],[1,111,"F14",72,"F14",125,"VK_F14",i,i],[1,112,"F15",73,"F15",126,"VK_F15",i,i],[1,113,"F16",74,"F16",127,"VK_F16",i,i],[1,114,"F17",75,"F17",128,"VK_F17",i,i],[1,115,"F18",76,"F18",129,"VK_F18",i,i],[1,116,"F19",77,"F19",130,"VK_F19",i,i],[1,117,"F20",78,"F20",131,"VK_F20",i,i],[1,118,"F21",79,"F21",132,"VK_F21",i,i],[1,119,"F22",80,"F22",133,"VK_F22",i,i],[1,120,"F23",81,"F23",134,"VK_F23",i,i],[1,121,"F24",82,"F24",135,"VK_F24",i,i],[1,122,"Open",0,i,0,i,i,i],[1,123,"Help",0,i,0,i,i,i],[1,124,"Select",0,i,0,i,i,i],[1,125,"Again",0,i,0,i,i,i],[1,126,"Undo",0,i,0,i,i,i],[1,127,"Cut",0,i,0,i,i,i],[1,128,"Copy",0,i,0,i,i,i],[1,129,"Paste",0,i,0,i,i,i],[1,130,"Find",0,i,0,i,i,i],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",i,i],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",i,i],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",i,i],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",i,i],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",i,i],[1,136,"KanaMode",0,i,0,i,i,i],[0,137,"IntlYen",0,i,0,i,i,i],[1,138,"Convert",0,i,0,i,i,i],[1,139,"NonConvert",0,i,0,i,i,i],[1,140,"Lang1",0,i,0,i,i,i],[1,141,"Lang2",0,i,0,i,i,i],[1,142,"Lang3",0,i,0,i,i,i],[1,143,"Lang4",0,i,0,i,i,i],[1,144,"Lang5",0,i,0,i,i,i],[1,145,"Abort",0,i,0,i,i,i],[1,146,"Props",0,i,0,i,i,i],[1,147,"NumpadParenLeft",0,i,0,i,i,i],[1,148,"NumpadParenRight",0,i,0,i,i,i],[1,149,"NumpadBackspace",0,i,0,i,i,i],[1,150,"NumpadMemoryStore",0,i,0,i,i,i],[1,151,"NumpadMemoryRecall",0,i,0,i,i,i],[1,152,"NumpadMemoryClear",0,i,0,i,i,i],[1,153,"NumpadMemoryAdd",0,i,0,i,i,i],[1,154,"NumpadMemorySubtract",0,i,0,i,i,i],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",i,i],[1,156,"NumpadClearEntry",0,i,0,i,i,i],[1,0,i,5,"Ctrl",17,"VK_CONTROL",i,i],[1,0,i,4,"Shift",16,"VK_SHIFT",i,i],[1,0,i,6,"Alt",18,"VK_MENU",i,i],[1,0,i,57,"Meta",91,"VK_COMMAND",i,i],[1,157,"ControlLeft",5,i,0,"VK_LCONTROL",i,i],[1,158,"ShiftLeft",4,i,0,"VK_LSHIFT",i,i],[1,159,"AltLeft",6,i,0,"VK_LMENU",i,i],[1,160,"MetaLeft",57,i,0,"VK_LWIN",i,i],[1,161,"ControlRight",5,i,0,"VK_RCONTROL",i,i],[1,162,"ShiftRight",4,i,0,"VK_RSHIFT",i,i],[1,163,"AltRight",6,i,0,"VK_RMENU",i,i],[1,164,"MetaRight",57,i,0,"VK_RWIN",i,i],[1,165,"BrightnessUp",0,i,0,i,i,i],[1,166,"BrightnessDown",0,i,0,i,i,i],[1,167,"MediaPlay",0,i,0,i,i,i],[1,168,"MediaRecord",0,i,0,i,i,i],[1,169,"MediaFastForward",0,i,0,i,i,i],[1,170,"MediaRewind",0,i,0,i,i,i],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",i,i],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",i,i],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",i,i],[1,174,"Eject",0,i,0,i,i,i],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",i,i],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",i,i],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",i,i],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",i,i],[1,179,"LaunchApp1",0,i,0,"VK_MEDIA_LAUNCH_APP1",i,i],[1,180,"SelectTask",0,i,0,i,i,i],[1,181,"LaunchScreenSaver",0,i,0,i,i,i],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",i,i],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",i,i],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",i,i],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",i,i],[1,186,"BrowserStop",0,i,0,"VK_BROWSER_STOP",i,i],[1,187,"BrowserRefresh",0,i,0,"VK_BROWSER_REFRESH",i,i],[1,188,"BrowserFavorites",0,i,0,"VK_BROWSER_FAVORITES",i,i],[1,189,"ZoomToggle",0,i,0,i,i,i],[1,190,"MailReply",0,i,0,i,i,i],[1,191,"MailForward",0,i,0,i,i,i],[1,192,"MailSend",0,i,0,i,i,i],[1,0,i,114,"KeyInComposition",229,i,i,i],[1,0,i,116,"ABNT_C2",194,"VK_ABNT_C2",i,i],[1,0,i,96,"OEM_8",223,"VK_OEM_8",i,i],[1,0,i,0,i,0,"VK_KANA",i,i],[1,0,i,0,i,0,"VK_HANGUL",i,i],[1,0,i,0,i,0,"VK_JUNJA",i,i],[1,0,i,0,i,0,"VK_FINAL",i,i],[1,0,i,0,i,0,"VK_HANJA",i,i],[1,0,i,0,i,0,"VK_KANJI",i,i],[1,0,i,0,i,0,"VK_CONVERT",i,i],[1,0,i,0,i,0,"VK_NONCONVERT",i,i],[1,0,i,0,i,0,"VK_ACCEPT",i,i],[1,0,i,0,i,0,"VK_MODECHANGE",i,i],[1,0,i,0,i,0,"VK_SELECT",i,i],[1,0,i,0,i,0,"VK_PRINT",i,i],[1,0,i,0,i,0,"VK_EXECUTE",i,i],[1,0,i,0,i,0,"VK_SNAPSHOT",i,i],[1,0,i,0,i,0,"VK_HELP",i,i],[1,0,i,0,i,0,"VK_APPS",i,i],[1,0,i,0,i,0,"VK_PROCESSKEY",i,i],[1,0,i,0,i,0,"VK_PACKET",i,i],[1,0,i,0,i,0,"VK_DBE_SBCSCHAR",i,i],[1,0,i,0,i,0,"VK_DBE_DBCSCHAR",i,i],[1,0,i,0,i,0,"VK_ATTN",i,i],[1,0,i,0,i,0,"VK_CRSEL",i,i],[1,0,i,0,i,0,"VK_EXSEL",i,i],[1,0,i,0,i,0,"VK_EREOF",i,i],[1,0,i,0,i,0,"VK_PLAY",i,i],[1,0,i,0,i,0,"VK_ZOOM",i,i],[1,0,i,0,i,0,"VK_NONAME",i,i],[1,0,i,0,i,0,"VK_PA1",i,i],[1,0,i,0,i,0,"VK_OEM_CLEAR",i,i]],t=[],n=[];for(const s of e){const[o,r,a,l,c,d,h,u,f]=s;if(n[r]||(n[r]=!0,eq[r]=a,tq[a]=r,iq[a.toLowerCase()]=r),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);oT.define(l,c),dB.define(l,u||c),hB.define(l,f||u||c)}d&&(Jj[d]=l)}})();var eE;(i=>{function e(a){return oT.keyCodeToStr(a)}i.toString=e,Dd(e,"toString");function t(a){return oT.strToKeyCode(a)}i.fromString=t,Dd(t,"fromString");function n(a){return dB.keyCodeToStr(a)}i.toUserSettingsUS=n,Dd(n,"toUserSettingsUS");function s(a){return hB.keyCodeToStr(a)}i.toUserSettingsGeneral=s,Dd(s,"toUserSettingsGeneral");function o(a){return dB.strToKeyCode(a)||hB.strToKeyCode(a)}i.fromUserSettings=o,Dd(o,"fromUserSettings");function r(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return oT.keyCodeToStr(a)}i.toElectronAccelerator=r,Dd(r,"toElectronAccelerator")})(eE||(eE={}));var M=(i=>(i[i.CtrlCmd=2048]="CtrlCmd",i[i.Shift=1024]="Shift",i[i.Alt=512]="Alt",i[i.WinCtrl=256]="WinCtrl",i))(M||{});function di(i,e){const t=(e&65535)<<16>>>0;return(i|t)>>>0}Dd(di,"KeyChord");var i_e=Object.defineProperty,uv=(i,e)=>i_e(i,"name",{value:e,configurable:!0});function uB(i,e){if(typeof i=="number"){if(i===0)return null;const t=(i&65535)>>>0,n=(i&0xffff0000)>>>16;return n!==0?new rT([r1(t,e),r1(n,e)]):new rT([r1(t,e)])}else{const t=[];for(let n=0;n<i.length;n++)t.push(r1(i[n],e));return new rT(t)}}uv(uB,"decodeKeybinding");function r1(i,e){const t=!!(i&2048),n=!!(i&256),s=e===Ts.Macintosh?n:t,o=!!(i&1024),r=!!(i&512),a=e===Ts.Macintosh?t:n,l=i&255;return new YN(s,o,r,a,l)}uv(r1,"createSimpleKeybinding");class YN{constructor(e,t,n,s,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=s,this.keyCode=o}static{uv(this,"KeyCodeChord")}equals(e){return e instanceof YN&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){const e=this.ctrlKey?"1":"0",t=this.shiftKey?"1":"0",n=this.altKey?"1":"0",s=this.metaKey?"1":"0";return`K${e}${t}${n}${s}${this.keyCode}`}isModifierKey(){return this.keyCode===E.Unknown||this.keyCode===E.Ctrl||this.keyCode===E.Meta||this.keyCode===E.Alt||this.keyCode===E.Shift}toKeybinding(){return new rT([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===E.Ctrl||this.shiftKey&&this.keyCode===E.Shift||this.altKey&&this.keyCode===E.Alt||this.metaKey&&this.keyCode===E.Meta}}class nq{constructor(e,t,n,s,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=s,this.scanCode=o}static{uv(this,"ScanCodeChord")}equals(e){return e instanceof nq&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.scanCode===e.scanCode}getHashCode(){const e=this.ctrlKey?"1":"0",t=this.shiftKey?"1":"0",n=this.altKey?"1":"0",s=this.metaKey?"1":"0";return`S${e}${t}${n}${s}${this.scanCode}`}isDuplicateModifierCase(){return this.ctrlKey&&(this.scanCode===kh.ControlLeft||this.scanCode===kh.ControlRight)||this.shiftKey&&(this.scanCode===kh.ShiftLeft||this.scanCode===kh.ShiftRight)||this.altKey&&(this.scanCode===kh.AltLeft||this.scanCode===kh.AltRight)||this.metaKey&&(this.scanCode===kh.MetaLeft||this.scanCode===kh.MetaRight)}}class rT{static{uv(this,"Keybinding")}chords;constructor(e){if(e.length===0)throw SL("chords");this.chords=e}getHashCode(){let e="";for(let t=0,n=this.chords.length;t<n;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}}class Nze{constructor(e,t,n,s,o,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=s,this.keyLabel=o,this.keyAriaLabel=r}static{uv(this,"ResolvedChord")}}class Pze{static{uv(this,"ResolvedKeybinding")}}var n_e=Object.defineProperty,ZN=(i,e)=>n_e(i,"name",{value:e,configurable:!0});function sq(i){if(i.charCode){const t=String.fromCharCode(i.charCode).toUpperCase();return eE.fromString(t)}const e=i.keyCode;if(e===3)return E.PauseBreak;if(na)switch(e){case 59:return E.Semicolon;case 60:if(Gi)return E.IntlBackslash;break;case 61:return E.Equal;case 107:return E.NumpadAdd;case 109:return E.NumpadSubtract;case 173:return E.Minus;case 224:if(Ue)return E.Meta;break}else if(J_){if(Ue&&e===93)return E.Meta;if(!Ue&&e===92)return E.Meta}return Jj[e]||E.Unknown}ZN(sq,"extractKeyCode");const s_e=Ue?M.WinCtrl:M.CtrlCmd,o_e=M.Alt,r_e=M.Shift,a_e=Ue?M.CtrlCmd:M.WinCtrl;function l_e(i){const e=[];return i.ctrlKey&&e.push("ctrl"),i.shiftKey&&e.push("shift"),i.altKey&&e.push("alt"),i.metaKey&&e.push("meta"),`modifiers: [${e.join(",")}], code: ${i.code}, keyCode: ${i.keyCode}, key: ${i.key}`}ZN(l_e,"printKeyboardEvent");function c_e(i){const e=[];return i.ctrlKey&&e.push("ctrl"),i.shiftKey&&e.push("shift"),i.altKey&&e.push("alt"),i.metaKey&&e.push("meta"),`modifiers: [${e.join(",")}], code: ${i.code}, keyCode: ${i.keyCode} ('${eE.toString(i.keyCode)}')`}ZN(c_e,"printStandardKeyboardEvent");class Pt{static{ZN(this,"StandardKeyboardEvent")}_standardKeyboardEventBrand=!0;browserEvent;target;ctrlKey;shiftKey;altKey;metaKey;altGraphKey;keyCode;code;_asKeybinding;_asKeyCodeChord;constructor(e){const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState?.("AltGraph"),this.keyCode=sq(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===E.Ctrl,this.altKey=this.altKey||this.keyCode===E.Alt,this.shiftKey=this.shiftKey||this.keyCode===E.Shift,this.metaKey=this.metaKey||this.keyCode===E.Meta,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=E.Unknown;this.keyCode!==E.Ctrl&&this.keyCode!==E.Shift&&this.keyCode!==E.Alt&&this.keyCode!==E.Meta&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=s_e),this.altKey&&(t|=o_e),this.shiftKey&&(t|=r_e),this.metaKey&&(t|=a_e),t|=e,t}_computeKeyCodeChord(){let e=E.Unknown;return this.keyCode!==E.Ctrl&&this.keyCode!==E.Shift&&this.keyCode!==E.Alt&&this.keyCode!==E.Meta&&(e=this.keyCode),new YN(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}var d_e=Object.defineProperty,XN=(i,e)=>d_e(i,"name",{value:e,configurable:!0});const f8=new WeakMap;function oq(i){if(!i.parent||i.parent===i)return null;try{const e=i.location,t=i.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return i.parent}XN(oq,"getParentWindowIfSameOrigin");class h_e{static{XN(this,"IframeUtils")}static getSameOriginWindowChain(e){let t=f8.get(e);if(!t){t=[],f8.set(e,t);let n=e,s;do s=oq(n),s?t.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):t.push({window:new WeakRef(n),iframeElement:null}),n=s;while(n)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,s=0;const o=this.getSameOriginWindowChain(e);for(const r of o){const a=r.window.deref();if(n+=a?.scrollY??0,s+=a?.scrollX??0,a===t||!r.iframeElement)break;const l=r.iframeElement.getBoundingClientRect();n+=l.top,s+=l.left}return{top:n,left:s}}}async function u_e(i,e){if(!crypto.subtle)throw new Error("'crypto.subtle' is not available so webviews will not work. This is likely because the editor is not running in a secure context (https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts).");const t=JSON.stringify({parentOrigin:i,salt:e}),s=new TextEncoder().encode(t),o=await crypto.subtle.digest("sha-256",s);return rq(o)}XN(u_e,"parentOriginHash");function rq(i){const t=Array.from(new Uint8Array(i)).map(n=>n.toString(16).padStart(2,"0")).join("");return BigInt(`0x${t}`).toString(32).padStart(52,"0")}XN(rq,"sha256AsBase32");var g_e=Object.defineProperty,M5=(i,e)=>g_e(i,"name",{value:e,configurable:!0});class $n{static{M5(this,"StandardMouseEvent")}browserEvent;leftButton;middleButton;rightButton;buttons;target;detail;posx;posy;ctrlKey;shiftKey;altKey;metaKey;timestamp;constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const n=h_e.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Rze extends $n{static{M5(this,"DragMouseEvent")}dataTransfer;constructor(e,t){super(e,t),this.dataTransfer=t.dataTransfer}}class Nb{static{M5(this,"StandardWheelEvent")}browserEvent;deltaY;deltaX;target;constructor(e,t=0,n=0){this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t;let s=!1;if(qy){const o=navigator.userAgent.match(/Chrome\/(\d+)/);s=(o?parseInt(o[1]):123)<=122}if(e){const o=e,r=e,a=e.view?.devicePixelRatio||1;if(typeof o.wheelDeltaY<"u")s?this.deltaY=o.wheelDeltaY/(120*a):this.deltaY=o.wheelDeltaY/120;else if(typeof r.VERTICAL_AXIS<"u"&&r.axis===r.VERTICAL_AXIS)this.deltaY=-r.detail/3;else if(e.type==="wheel"){const l=e;l.deltaMode===l.DOM_DELTA_LINE?na&&!Ue?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof o.wheelDeltaX<"u")Vc&&Nt?this.deltaX=-(o.wheelDeltaX/120):s?this.deltaX=o.wheelDeltaX/(120*a):this.deltaX=o.wheelDeltaX/120;else if(typeof r.HORIZONTAL_AXIS<"u"&&r.axis===r.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const l=e;l.deltaMode===l.DOM_DELTA_LINE?na&&!Ue?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(s?this.deltaY=e.wheelDelta/(120*a):this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}}var f_e=Object.defineProperty,Dn=(i,e)=>f_e(i,"name",{value:e,configurable:!0});const{entries:aq,setPrototypeOf:p8,isFrozen:p_e,getPrototypeOf:m_e,getOwnPropertyDescriptor:__e}=Object;let{freeze:ka,seal:Qd,create:b_e}=Object,{apply:gB,construct:fB}=typeof Reflect<"u"&&Reflect;gB||(gB=Dn(function(e,t,n){return e.apply(t,n)},"apply"));ka||(ka=Dn(function(e){return e},"freeze"));Qd||(Qd=Dn(function(e){return e},"seal"));fB||(fB=Dn(function(e,t){return new e(...t)},"construct"));const v_e=tc(Array.prototype.forEach),m8=tc(Array.prototype.pop),NS=tc(Array.prototype.push),aT=tc(String.prototype.toLowerCase),gO=tc(String.prototype.toString),w_e=tc(String.prototype.match),ad=tc(String.prototype.replace),C_e=tc(String.prototype.indexOf),y_e=tc(String.prototype.trim),_l=tc(RegExp.prototype.test),PS=lq(TypeError);function tc(i){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return gB(i,e,n)}}Dn(tc,"unapply");function lq(i){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fB(i,t)}}Dn(lq,"unconstruct");function hi(i,e,t){var n;t=(n=t)!==null&&n!==void 0?n:aT,p8&&p8(i,null);let s=e.length;for(;s--;){let o=e[s];if(typeof o=="string"){const r=t(o);r!==o&&(p_e(e)||(e[s]=r),o=r)}i[o]=!0}return i}Dn(hi,"addToSet");function Wm(i){const e=b_e(null);for(const[t,n]of aq(i))e[t]=n;return e}Dn(Wm,"clone");function a1(i,e){for(;i!==null;){const n=__e(i,e);if(n){if(n.get)return tc(n.get);if(typeof n.value=="function")return tc(n.value)}i=m_e(i)}function t(n){return console.warn("fallback value for",n),null}return Dn(t,"fallbackValue"),t}Dn(a1,"lookupGetter");const _8=ka(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),fO=ka(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),pO=ka(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),S_e=ka(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mO=ka(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),E_e=ka(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),b8=ka(["#text"]),v8=ka(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),_O=ka(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),w8=ka(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),iI=ka(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),L_e=Qd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),D_e=Qd(/<%[\w\W]*|[\w\W]*%>/gm),I_e=Qd(/\${[\w\W]*}/gm),T_e=Qd(/^data-[\-\w.\u00B7-\uFFFF]/),A_e=Qd(/^aria-[\-\w]+$/),cq=Qd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),x_e=Qd(/^(?:\w+script|data):/i),k_e=Qd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),dq=Qd(/^html$/i);var C8=Object.freeze({__proto__:null,MUSTACHE_EXPR:L_e,ERB_EXPR:D_e,TMPLIT_EXPR:I_e,DATA_ATTR:T_e,ARIA_ATTR:A_e,IS_ALLOWED_URI:cq,IS_SCRIPT_OR_DATA:x_e,ATTR_WHITESPACE:k_e,DOCTYPE_NAME:dq});const N_e=Dn(()=>typeof window>"u"?null:window,"getGlobal"),P_e=Dn(function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(n=t.getAttribute(s));const o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML(r){return r},createScriptURL(r){return r}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},"_createTrustedTypesPolicy");function B5(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N_e();const e=Dn(Xe=>B5(Xe),"DOMPurify");if(e.version="3.0.5",e.removed=[],!i||!i.document||i.document.nodeType!==9)return e.isSupported=!1,e;const t=i.document,n=t.currentScript;let{document:s}=i;const{DocumentFragment:o,HTMLTemplateElement:r,Node:a,Element:l,NodeFilter:c,NamedNodeMap:d=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:h,DOMParser:u,trustedTypes:f}=i,p=l.prototype,m=a1(p,"cloneNode"),_=a1(p,"nextSibling"),w=a1(p,"childNodes"),v=a1(p,"parentNode");if(typeof r=="function"){const Xe=s.createElement("template");Xe.content&&Xe.content.ownerDocument&&(s=Xe.content.ownerDocument)}let b,C="";const{implementation:S,createNodeIterator:D,createDocumentFragment:T,getElementsByTagName:I}=s,{importNode:R}=t;let G={};e.isSupported=typeof aq=="function"&&typeof v=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:K,ERB_EXPR:X,TMPLIT_EXPR:we,DATA_ATTR:re,ARIA_ATTR:le,IS_SCRIPT_OR_DATA:Ee,ATTR_WHITESPACE:Se}=C8;let{IS_ALLOWED_URI:ue}=C8,fe=null;const $e=hi({},[..._8,...fO,...pO,...mO,...b8]);let Ze=null;const Qt=hi({},[...v8,..._O,...w8,...iI]);let qt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),en=null,as=null,Zo=!0,Sn=!0,Mr=!1,Bv=!0,gc=!1,Eu=!1,TS=!1,AS=!1,Lf=!1,Fv=!1,Vv=!1,KD=!0,jD=!1;const oO="user-content-";let Df=!0,Sm=!1,Lu={},Du=null;const qD=hi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Wv=null;const YD=hi({},["audio","video","img","source","image","track"]);let Em=null;const ZD=hi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Iu="http://www.w3.org/1998/Math/MathML",bh="http://www.w3.org/2000/svg",qs="http://www.w3.org/1999/xhtml";let fc=qs,If=!1,ua=null;const Lm=hi({},[Iu,bh,qs],gO);let vh;const Tu=["application/xhtml+xml","text/html"],ji="text/html";let _o,Tf=null;const rO=s.createElement("form"),XD=Dn(function(J){return J instanceof RegExp||J instanceof Function},"isRegexOrFunction"),xS=Dn(function(J){if(!(Tf&&Tf===J)){if((!J||typeof J!="object")&&(J={}),J=Wm(J),vh=Tu.indexOf(J.PARSER_MEDIA_TYPE)===-1?vh=ji:vh=J.PARSER_MEDIA_TYPE,_o=vh==="application/xhtml+xml"?gO:aT,fe="ALLOWED_TAGS"in J?hi({},J.ALLOWED_TAGS,_o):$e,Ze="ALLOWED_ATTR"in J?hi({},J.ALLOWED_ATTR,_o):Qt,ua="ALLOWED_NAMESPACES"in J?hi({},J.ALLOWED_NAMESPACES,gO):Lm,Em="ADD_URI_SAFE_ATTR"in J?hi(Wm(ZD),J.ADD_URI_SAFE_ATTR,_o):ZD,Wv="ADD_DATA_URI_TAGS"in J?hi(Wm(YD),J.ADD_DATA_URI_TAGS,_o):YD,Du="FORBID_CONTENTS"in J?hi({},J.FORBID_CONTENTS,_o):qD,en="FORBID_TAGS"in J?hi({},J.FORBID_TAGS,_o):{},as="FORBID_ATTR"in J?hi({},J.FORBID_ATTR,_o):{},Lu="USE_PROFILES"in J?J.USE_PROFILES:!1,Zo=J.ALLOW_ARIA_ATTR!==!1,Sn=J.ALLOW_DATA_ATTR!==!1,Mr=J.ALLOW_UNKNOWN_PROTOCOLS||!1,Bv=J.ALLOW_SELF_CLOSE_IN_ATTR!==!1,gc=J.SAFE_FOR_TEMPLATES||!1,Eu=J.WHOLE_DOCUMENT||!1,Lf=J.RETURN_DOM||!1,Fv=J.RETURN_DOM_FRAGMENT||!1,Vv=J.RETURN_TRUSTED_TYPE||!1,AS=J.FORCE_BODY||!1,KD=J.SANITIZE_DOM!==!1,jD=J.SANITIZE_NAMED_PROPS||!1,Df=J.KEEP_CONTENT!==!1,Sm=J.IN_PLACE||!1,ue=J.ALLOWED_URI_REGEXP||cq,fc=J.NAMESPACE||qs,qt=J.CUSTOM_ELEMENT_HANDLING||{},J.CUSTOM_ELEMENT_HANDLING&&XD(J.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(qt.tagNameCheck=J.CUSTOM_ELEMENT_HANDLING.tagNameCheck),J.CUSTOM_ELEMENT_HANDLING&&XD(J.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(qt.attributeNameCheck=J.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),J.CUSTOM_ELEMENT_HANDLING&&typeof J.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(qt.allowCustomizedBuiltInElements=J.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),gc&&(Sn=!1),Fv&&(Lf=!0),Lu&&(fe=hi({},[...b8]),Ze=[],Lu.html===!0&&(hi(fe,_8),hi(Ze,v8)),Lu.svg===!0&&(hi(fe,fO),hi(Ze,_O),hi(Ze,iI)),Lu.svgFilters===!0&&(hi(fe,pO),hi(Ze,_O),hi(Ze,iI)),Lu.mathMl===!0&&(hi(fe,mO),hi(Ze,w8),hi(Ze,iI))),J.ADD_TAGS&&(fe===$e&&(fe=Wm(fe)),hi(fe,J.ADD_TAGS,_o)),J.ADD_ATTR&&(Ze===Qt&&(Ze=Wm(Ze)),hi(Ze,J.ADD_ATTR,_o)),J.ADD_URI_SAFE_ATTR&&hi(Em,J.ADD_URI_SAFE_ATTR,_o),J.FORBID_CONTENTS&&(Du===qD&&(Du=Wm(Du)),hi(Du,J.FORBID_CONTENTS,_o)),Df&&(fe["#text"]=!0),Eu&&hi(fe,["html","head","body"]),fe.table&&(hi(fe,["tbody"]),delete en.tbody),J.TRUSTED_TYPES_POLICY){if(typeof J.TRUSTED_TYPES_POLICY.createHTML!="function")throw PS('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof J.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw PS('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');b=J.TRUSTED_TYPES_POLICY,C=b.createHTML("")}else b===void 0&&(b=P_e(f,n)),b!==null&&typeof C=="string"&&(C=b.createHTML(""));ka&&ka(J),Tf=J}},"_parseConfig"),QD=hi({},["mi","mo","mn","ms","mtext"]),JD=hi({},["foreignobject","desc","title","annotation-xml"]),aO=hi({},["title","style","font","a","script"]),Dt=hi({},fO);hi(Dt,pO),hi(Dt,S_e);const P=hi({},mO);hi(P,E_e);const O=Dn(function(J){let Me=v(J);(!Me||!Me.tagName)&&(Me={namespaceURI:fc,tagName:"template"});const je=aT(J.tagName),on=aT(Me.tagName);return ua[J.namespaceURI]?J.namespaceURI===bh?Me.namespaceURI===qs?je==="svg":Me.namespaceURI===Iu?je==="svg"&&(on==="annotation-xml"||QD[on]):!!Dt[je]:J.namespaceURI===Iu?Me.namespaceURI===qs?je==="math":Me.namespaceURI===bh?je==="math"&&JD[on]:!!P[je]:J.namespaceURI===qs?Me.namespaceURI===bh&&!JD[on]||Me.namespaceURI===Iu&&!QD[on]?!1:!P[je]&&(aO[je]||!Dt[je]):!!(vh==="application/xhtml+xml"&&ua[J.namespaceURI]):!1},"_checkValidNamespace"),B=Dn(function(J){NS(e.removed,{element:J});try{J.parentNode.removeChild(J)}catch{J.remove()}},"_forceRemove"),z=Dn(function(J,Me){try{NS(e.removed,{attribute:Me.getAttributeNode(J),from:Me})}catch{NS(e.removed,{attribute:null,from:Me})}if(Me.removeAttribute(J),J==="is"&&!Ze[J])if(Lf||Fv)try{B(Me)}catch{}else try{Me.setAttribute(J,"")}catch{}},"_removeAttribute"),q=Dn(function(J){let Me,je;if(AS)J="<remove></remove>"+J;else{const Br=w_e(J,/^[\r\n\t ]+/);je=Br&&Br[0]}vh==="application/xhtml+xml"&&fc===qs&&(J='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+J+"</body></html>");const on=b?b.createHTML(J):J;if(fc===qs)try{Me=new u().parseFromString(on,vh)}catch{}if(!Me||!Me.documentElement){Me=S.createDocument(fc,"template",null);try{Me.documentElement.innerHTML=If?C:on}catch{}}const Ys=Me.body||Me.documentElement;return J&&je&&Ys.insertBefore(s.createTextNode(je),Ys.childNodes[0]||null),fc===qs?I.call(Me,Eu?"html":"body")[0]:Eu?Me.documentElement:Ys},"_initDocument"),ae=Dn(function(J){return D.call(J.ownerDocument||J,J,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},"_createIterator"),pe=Dn(function(J){return J instanceof h&&(typeof J.nodeName!="string"||typeof J.textContent!="string"||typeof J.removeChild!="function"||!(J.attributes instanceof d)||typeof J.removeAttribute!="function"||typeof J.setAttribute!="function"||typeof J.namespaceURI!="string"||typeof J.insertBefore!="function"||typeof J.hasChildNodes!="function")},"_isClobbered"),ze=Dn(function(J){return typeof a=="object"?J instanceof a:J&&typeof J=="object"&&typeof J.nodeType=="number"&&typeof J.nodeName=="string"},"_isNode"),Ke=Dn(function(J,Me,je){G[J]&&v_e(G[J],on=>{on.call(e,Me,je,Tf)})},"_executeHook"),It=Dn(function(J){let Me;if(Ke("beforeSanitizeElements",J,null),pe(J))return B(J),!0;const je=_o(J.nodeName);if(Ke("uponSanitizeElement",J,{tagName:je,allowedTags:fe}),J.hasChildNodes()&&!ze(J.firstElementChild)&&(!ze(J.content)||!ze(J.content.firstElementChild))&&_l(/<[/\w]/g,J.innerHTML)&&_l(/<[/\w]/g,J.textContent))return B(J),!0;if(!fe[je]||en[je]){if(!en[je]&&En(je)&&(qt.tagNameCheck instanceof RegExp&&_l(qt.tagNameCheck,je)||qt.tagNameCheck instanceof Function&&qt.tagNameCheck(je)))return!1;if(Df&&!Du[je]){const on=v(J)||J.parentNode,Ys=w(J)||J.childNodes;if(Ys&&on){const Br=Ys.length;for(let ms=Br-1;ms>=0;--ms)on.insertBefore(m(Ys[ms],!0),_(J))}}return B(J),!0}return J instanceof l&&!O(J)||(je==="noscript"||je==="noembed"||je==="noframes")&&_l(/<\/no(script|embed|frames)/i,J.innerHTML)?(B(J),!0):(gc&&J.nodeType===3&&(Me=J.textContent,Me=ad(Me,K," "),Me=ad(Me,X," "),Me=ad(Me,we," "),J.textContent!==Me&&(NS(e.removed,{element:J.cloneNode()}),J.textContent=Me)),Ke("afterSanitizeElements",J,null),!1)},"_sanitizeElements"),vi=Dn(function(J,Me,je){if(KD&&(Me==="id"||Me==="name")&&(je in s||je in rO))return!1;if(!(Sn&&!as[Me]&&_l(re,Me))){if(!(Zo&&_l(le,Me))){if(!Ze[Me]||as[Me]){if(!(En(J)&&(qt.tagNameCheck instanceof RegExp&&_l(qt.tagNameCheck,J)||qt.tagNameCheck instanceof Function&&qt.tagNameCheck(J))&&(qt.attributeNameCheck instanceof RegExp&&_l(qt.attributeNameCheck,Me)||qt.attributeNameCheck instanceof Function&&qt.attributeNameCheck(Me))||Me==="is"&&qt.allowCustomizedBuiltInElements&&(qt.tagNameCheck instanceof RegExp&&_l(qt.tagNameCheck,je)||qt.tagNameCheck instanceof Function&&qt.tagNameCheck(je))))return!1}else if(!Em[Me]){if(!_l(ue,ad(je,Se,""))){if(!((Me==="src"||Me==="xlink:href"||Me==="href")&&J!=="script"&&C_e(je,"data:")===0&&Wv[J])){if(!(Mr&&!_l(Ee,ad(je,Se,"")))){if(je)return!1}}}}}}return!0},"_isValidAttribute"),En=Dn(function(J){return J.indexOf("-")>0},"_basicCustomElementTest"),Rs=Dn(function(J){let Me,je,on,Ys;Ke("beforeSanitizeAttributes",J,null);const{attributes:Br}=J;if(!Br)return;const ms={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ze};for(Ys=Br.length;Ys--;){Me=Br[Ys];const{name:wh,namespaceURI:lO}=Me;if(je=wh==="value"?Me.value:y_e(Me.value),on=_o(wh),ms.attrName=on,ms.attrValue=je,ms.keepAttr=!0,ms.forceKeepAttr=void 0,Ke("uponSanitizeAttribute",J,ms),je=ms.attrValue,ms.forceKeepAttr||(z(wh,J),!ms.keepAttr))continue;if(!Bv&&_l(/\/>/i,je)){z(wh,J);continue}gc&&(je=ad(je,K," "),je=ad(je,X," "),je=ad(je,we," "));const M9=_o(J.nodeName);if(vi(M9,on,je)){if(jD&&(on==="id"||on==="name")&&(z(wh,J),je=oO+je),b&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!lO)switch(f.getAttributeType(M9,on)){case"TrustedHTML":{je=b.createHTML(je);break}case"TrustedScriptURL":{je=b.createScriptURL(je);break}}try{lO?J.setAttributeNS(lO,wh,je):J.setAttribute(wh,je),m8(e.removed)}catch{}}}Ke("afterSanitizeAttributes",J,null)},"_sanitizeAttributes"),Fn=Dn(function Xe(J){let Me;const je=ae(J);for(Ke("beforeSanitizeShadowDOM",J,null);Me=je.nextNode();)Ke("uponSanitizeShadowNode",Me,null),!It(Me)&&(Me.content instanceof o&&Xe(Me.content),Rs(Me));Ke("afterSanitizeShadowDOM",J,null)},"_sanitizeShadowDOM");return e.sanitize=function(Xe){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Me,je,on,Ys;if(If=!Xe,If&&(Xe="<!-->"),typeof Xe!="string"&&!ze(Xe))if(typeof Xe.toString=="function"){if(Xe=Xe.toString(),typeof Xe!="string")throw PS("dirty is not a string, aborting")}else throw PS("toString is not a function");if(!e.isSupported)return Xe;if(TS||xS(J),e.removed=[],typeof Xe=="string"&&(Sm=!1),Sm){if(Xe.nodeName){const wh=_o(Xe.nodeName);if(!fe[wh]||en[wh])throw PS("root node is forbidden and cannot be sanitized in-place")}}else if(Xe instanceof a)Me=q("<!---->"),je=Me.ownerDocument.importNode(Xe,!0),je.nodeType===1&&je.nodeName==="BODY"||je.nodeName==="HTML"?Me=je:Me.appendChild(je);else{if(!Lf&&!gc&&!Eu&&Xe.indexOf("<")===-1)return b&&Vv?b.createHTML(Xe):Xe;if(Me=q(Xe),!Me)return Lf?null:Vv?C:""}Me&&AS&&B(Me.firstChild);const Br=ae(Sm?Xe:Me);for(;on=Br.nextNode();)It(on)||(on.content instanceof o&&Fn(on.content),Rs(on));if(Sm)return Xe;if(Lf){if(Fv)for(Ys=T.call(Me.ownerDocument);Me.firstChild;)Ys.appendChild(Me.firstChild);else Ys=Me;return(Ze.shadowroot||Ze.shadowrootmode)&&(Ys=R.call(t,Ys,!0)),Ys}let ms=Eu?Me.outerHTML:Me.innerHTML;return Eu&&fe["!doctype"]&&Me.ownerDocument&&Me.ownerDocument.doctype&&Me.ownerDocument.doctype.name&&_l(dq,Me.ownerDocument.doctype.name)&&(ms="<!DOCTYPE "+Me.ownerDocument.doctype.name+`>
`+ms),gc&&(ms=ad(ms,K," "),ms=ad(ms,X," "),ms=ad(ms,we," ")),b&&Vv?b.createHTML(ms):ms},e.setConfig=function(Xe){xS(Xe),TS=!0},e.clearConfig=function(){Tf=null,TS=!1},e.isValidAttribute=function(Xe,J,Me){Tf||xS({});const je=_o(Xe),on=_o(J);return vi(je,on,Me)},e.addHook=function(Xe,J){typeof J=="function"&&(G[Xe]=G[Xe]||[],NS(G[Xe],J))},e.removeHook=function(Xe){if(G[Xe])return m8(G[Xe])},e.removeHooks=function(Xe){G[Xe]&&(G[Xe]=[])},e.removeAllHooks=function(){G={}},e}Dn(B5,"createDOMPurify");var mu=B5();mu.version;mu.isSupported;const F5=mu.sanitize;mu.setConfig;mu.clearConfig;mu.isValidAttribute;const hq=mu.addHook,uq=mu.removeHook;mu.removeHooks;mu.removeAllHooks;var R_e=Object.defineProperty,ac=(i,e)=>R_e(i,"name",{value:e,configurable:!0});function Jd(i){return FL(i,0)}ac(Jd,"hash");function FL(i,e){switch(typeof i){case"object":return i===null?Kh(349,e):Array.isArray(i)?fq(i,e):pq(i,e);case"string":return QN(i,e);case"boolean":return gq(i,e);case"number":return Kh(i,e);case"undefined":return Kh(937,e);default:return Kh(617,e)}}ac(FL,"doHash");function Kh(i,e){return(e<<5)-e+i|0}ac(Kh,"numberHash");function gq(i,e){return Kh(i?433:863,e)}ac(gq,"booleanHash");function QN(i,e){e=Kh(149417,e);for(let t=0,n=i.length;t<n;t++)e=Kh(i.charCodeAt(t),e);return e}ac(QN,"stringHash");function fq(i,e){return e=Kh(104579,e),i.reduce((t,n)=>FL(n,t),e)}ac(fq,"arrayHash");function pq(i,e){return e=Kh(181387,e),Object.keys(i).sort().reduce((t,n)=>(t=QN(n,t),FL(i[n],t)),e)}ac(pq,"objectHash");class Oze{static{ac(this,"Hasher")}_value=0;get value(){return this._value}hash(e){return this._value=FL(e,this._value),this._value}}function lT(i,e,t=32){const n=t-e,s=~((1<<n)-1);return(i<<e|(s&i)>>>n)>>>0}ac(lT,"leftRotate");function pB(i,e=0,t=i.byteLength,n=0){for(let s=0;s<t;s++)i[e+s]=n}ac(pB,"fill");function mq(i,e,t="0"){for(;i.length<e;)i=t+i;return i}ac(mq,"leftPad");function Xv(i,e=32){return i instanceof ArrayBuffer?Array.from(new Uint8Array(i)).map(t=>t.toString(16).padStart(2,"0")).join(""):mq((i>>>0).toString(16),e/4)}ac(Xv,"toHexString");class V5{static{ac(this,"StringSHA1")}static _bigBlock32=new DataView(new ArrayBuffer(320));_h0=0x67452301;_h1=0xefcdab89;_h2=0x98badcfe;_h3=0x10325476;_h4=0xc3d2e1f0;_buff;_buffDV;_buffLen;_totalLen;_leftoverHighSurrogate;_finished;constructor(){this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let s=this._buffLen,o=this._leftoverHighSurrogate,r,a;for(o!==0?(r=o,a=-1,o=0):(r=e.charCodeAt(0),a=0);;){let l=r;if(Ds(r))if(a+1<t){const c=e.charCodeAt(a+1);Db(c)?(a++,l=MN(r,c)):l=65533}else{o=r;break}else Db(r)&&(l=65533);if(s=this._push(n,s,l),a++,a<t)r=e.charCodeAt(a);else break}this._buffLen=s,this._leftoverHighSurrogate=o}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),Xv(this._h0)+Xv(this._h1)+Xv(this._h2)+Xv(this._h3)+Xv(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,pB(this._buff,this._buffLen),this._buffLen>56&&(this._step(),pB(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/0x100000000),!1),this._buffDV.setUint32(60,e%0x100000000,!1),this._step()}_step(){const e=V5._bigBlock32,t=this._buffDV;for(let h=0;h<64;h+=4)e.setUint32(h,t.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)e.setUint32(h,lT(e.getUint32(h-12,!1)^e.getUint32(h-32,!1)^e.getUint32(h-56,!1)^e.getUint32(h-64,!1),1),!1);let n=this._h0,s=this._h1,o=this._h2,r=this._h3,a=this._h4,l,c,d;for(let h=0;h<80;h++)h<20?(l=s&o|~s&r,c=0x5a827999):h<40?(l=s^o^r,c=0x6ed9eba1):h<60?(l=s&o|s&r|o&r,c=0x8f1bbcdc):(l=s^o^r,c=0xca62c1d6),d=lT(n,5)+l+a+c+e.getUint32(h*4,!1)&0xffffffff,a=r,r=o,o=lT(s,30),s=n,n=d;this._h0=this._h0+n&0xffffffff,this._h1=this._h1+s&0xffffffff,this._h2=this._h2+o&0xffffffff,this._h3=this._h3+r&0xffffffff,this._h4=this._h4+a&0xffffffff}}var O_e=Object.defineProperty,Zy=(i,e)=>O_e(i,"name",{value:e,configurable:!0});function Kr(i,e,t){return Math.min(Math.max(i,e),t)}Zy(Kr,"clamp");function _q(i,e){return(e+i%e)%e}Zy(_q,"rot");class Mze{static{Zy(this,"Counter")}_next=0;getNext(){return this._next++}}class Bze{static{Zy(this,"MovingAverage")}_n=1;_val=0;update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class Fze{static{Zy(this,"SlidingWindowAverage")}_n=0;_val=0;_values=[];_index=0;_sum=0;constructor(e){this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}function bq(i,e,t,n,s,o,r,a){const l=r-t,c=a-n,d=s-t,h=o-n,u=i-t,f=e-n,p=l*l+c*c,m=l*d+c*h,_=l*u+c*f,w=d*d+h*h,v=d*u+h*f,b=1/(p*w-m*m),C=(w*_-m*v)*b,S=(p*v-m*_)*b;return C>=0&&S>=0&&C+S<1}Zy(bq,"isPointWithinTriangle");var M_e=Object.defineProperty,de=(i,e)=>M_e(i,"name",{value:e,configurable:!0});const{registerWindow:B_e,getWindow:ve,getDocument:Vze,getWindows:tE,getWindowsCount:mB,getWindowId:Ng,getWindowById:iE,hasWindow:Wze,onDidRegisterWindow:JN,onWillUnregisterWindow:Hze,onDidUnregisterWindow:F_e}=function(){const i=new Map;k5(_e,1);const e={window:_e,disposables:new te};i.set(_e.vscodeWindowId,e);const t=new x,n=new x,s=new x;function o(r,a){return(typeof r=="number"?i.get(r):void 0)??(a?e:void 0)}return de(o,"getWindowById"),{onDidRegisterWindow:t.event,onWillUnregisterWindow:s.event,onDidUnregisterWindow:n.event,registerWindow(r){if(i.has(r.vscodeWindowId))return $.None;const a=new te,l={window:r,disposables:a.add(new te)};return i.set(r.vscodeWindowId,l),a.add(ye(()=>{i.delete(r.vscodeWindowId),n.fire(r)})),a.add(F(r,Q.BEFORE_UNLOAD,()=>{s.fire(r)})),t.fire(l),a},getWindows(){return i.values()},getWindowsCount(){return i.size},getWindowId(r){return r.vscodeWindowId},hasWindow(r){return i.has(r)},getWindowById:o,getWindow(r){const a=r;if(a?.ownerDocument?.defaultView)return a.ownerDocument.defaultView.window;const l=r;return l?.view?l.view.window:_e},getDocument(r){return ve(r).document}}}();function Mn(i){for(;i.firstChild;)i.firstChild.remove()}de(Mn,"clearNode");class V_e{static{de(this,"DomListener")}_handler;_node;_type;_options;constructor(e,t,n,s){this._node=e,this._type=t,this._handler=n,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function F(i,e,t,n){return new V_e(i,e,t,n)}de(F,"addDisposableListener");function vq(i,e){return function(t){return e(new $n(i,t))}}de(vq,"_wrapAsStandardMouseEvent");function wq(i){return function(e){return i(new Pt(e))}}de(wq,"_wrapAsStandardKeyboardEvent");const Gs=de(function(e,t,n,s){let o=n;return t==="click"||t==="mousedown"||t==="contextmenu"?o=vq(ve(e),n):(t==="keydown"||t==="keypress"||t==="keyup")&&(o=wq(n)),F(e,t,o,s)},"addStandardDisposableListener");function W_e(i,e,t){return F(i,ol&&Yy.pointerEvents?Q.POINTER_DOWN:Q.MOUSE_DOWN,e,t)}de(W_e,"addDisposableGenericMouseDownListener");function H_e(i,e,t){return F(i,ol&&Yy.pointerEvents?Q.POINTER_MOVE:Q.MOUSE_MOVE,e,t)}de(H_e,"addDisposableGenericMouseMoveListener");function U_e(i,e,t){return F(i,ol&&Yy.pointerEvents?Q.POINTER_UP:Q.MOUSE_UP,e,t)}de(U_e,"addDisposableGenericMouseUpListener");function D_(i,e,t){return W1(i,e,t)}de(D_,"runWhenWindowIdle");class Uze extends ij{static{de(this,"WindowIdleValue")}constructor(e,t){super(e,t)}}let Cq,xo;function z_e(i,e,t,n){let s=0;const o=i.setInterval(()=>{s++,(typeof n=="number"&&s>=n||e()===!0)&&r.dispose()},t),r=ye(()=>{i.clearInterval(o)});return r}de(z_e,"disposableWindowInterval");class yq extends efe{static{de(this,"WindowIntervalTimer")}defaultTarget;constructor(e){super(),this.defaultTarget=e&&ve(e)}cancelAndSet(e,t,n){return super.cancelAndSet(e,t,n??this.defaultTarget)}}class bO{static{de(this,"AnimationFrameQueueItem")}_runner;priority;_canceled;constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Kt(e)}}static sort(e,t){return t.priority-e.priority}}(function(){const i=new Map,e=new Map,t=new Map,n=new Map,s=de(o=>{t.set(o,!1);const r=i.get(o)??[];for(e.set(o,r),i.set(o,[]),n.set(o,!0);r.length>0;)r.sort(bO.sort),r.shift().execute();n.set(o,!1)},"animationFrameRunner");xo=de((o,r,a=0)=>{const l=Ng(o),c=new bO(r,a);let d=i.get(l);return d||(d=[],i.set(l,d)),d.push(c),t.get(l)||(t.set(l,!0),o.requestAnimationFrame(()=>s(l))),c},"scheduleAtNextAnimationFrame"),Cq=de((o,r,a)=>{const l=Ng(o);if(n.get(l)){const c=new bO(r,a);let d=e.get(l);return d||(d=[],e.set(l,d)),d.push(c),c}else return xo(o,r,a)},"runAtThisOrScheduleAtNextAnimationFrame")})();function _B(i,e){return xo(i,e,1e4)}de(_B,"measure");function Sq(i,e){return xo(i,e,-1e4)}de(Sq,"modify");const $_e=8,G_e=de(function(i,e){return e},"DEFAULT_EVENT_MERGER");class K_e extends ${static{de(this,"TimeoutThrottledDomListener")}constructor(e,t,n,s=G_e,o=$_e){super();let r=null,a=0;const l=this._register(new NL),c=de(()=>{a=new Date().getTime(),n(r),r=null},"invokeHandler");this._register(F(e,t,d=>{r=s(r,d);const h=new Date().getTime()-a;h>=o?(l.cancel(),c()):l.setIfNotSet(c,o-h)}))}}function j_e(i,e,t,n,s){return new K_e(i,e,t,n,s)}de(j_e,"addDisposableThrottledListener");function eP(i){return ve(i).getComputedStyle(i,null)}de(eP,"getComputedStyle");function $p(i,e){const t=ve(i),n=t.document;if(i!==n.body)return new Lt(i.clientWidth,i.clientHeight);if(ol&&t?.visualViewport)return new Lt(t.visualViewport.width,t.visualViewport.height);if(t?.innerWidth&&t.innerHeight)return new Lt(t.innerWidth,t.innerHeight);if(n.body&&n.body.clientWidth&&n.body.clientHeight)return new Lt(n.body.clientWidth,n.body.clientHeight);if(n.documentElement&&n.documentElement.clientWidth&&n.documentElement.clientHeight)return new Lt(n.documentElement.clientWidth,n.documentElement.clientHeight);if(e)return $p(e);throw new Error("Unable to figure out browser width and height")}de($p,"getClientArea");class gn{static{de(this,"SizeUtils")}static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){const s=eP(e),o=s?s.getPropertyValue(t):"0";return gn.convertToPixels(e,o)}static getBorderLeftWidth(e){return gn.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return gn.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return gn.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return gn.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return gn.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return gn.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return gn.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return gn.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return gn.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return gn.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return gn.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return gn.getDimension(e,"margin-bottom","marginBottom")}}class Lt{constructor(e,t){this.width=e,this.height=t}static{de(this,"Dimension")}static None=new Lt(0,0);with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new Lt(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof Lt?e:new Lt(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}function GC(i){let e=i.offsetParent,t=i.offsetTop,n=i.offsetLeft;for(;(i=i.parentNode)!==null&&i!==i.ownerDocument.body&&i!==i.ownerDocument.documentElement;){t-=i.scrollTop;const s=G5(i)?null:eP(i);s&&(n-=s.direction!=="rtl"?i.scrollLeft:-i.scrollLeft),i===e&&(n+=gn.getBorderLeftWidth(i),t+=gn.getBorderTopWidth(i),t+=i.offsetTop,n+=i.offsetLeft,e=i.offsetParent)}return{left:n,top:t}}de(GC,"getTopLeftOffset");function W5(i,e,t){typeof e=="number"&&(i.style.width=`${e}px`),typeof t=="number"&&(i.style.height=`${t}px`)}de(W5,"size");function H5(i,e,t,n,s,o="absolute"){typeof e=="number"&&(i.style.top=`${e}px`),typeof t=="number"&&(i.style.right=`${t}px`),typeof n=="number"&&(i.style.bottom=`${n}px`),typeof s=="number"&&(i.style.left=`${s}px`),i.style.position=o}de(H5,"position");function Xr(i){const e=i.getBoundingClientRect(),t=ve(i);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}de(Xr,"getDomNodePagePosition");function U5(i){let e=i,t=1;do{const n=eP(e).zoom;n!=null&&n!=="1"&&(t*=n),e=e.parentElement}while(e!==null&&e!==e.ownerDocument.documentElement);return t}de(U5,"getDomNodeZoomLevel");function KC(i){const e=gn.getMarginLeft(i)+gn.getMarginRight(i);return i.offsetWidth+e}de(KC,"getTotalWidth");function U1(i){const e=gn.getBorderLeftWidth(i)+gn.getBorderRightWidth(i),t=gn.getPaddingLeft(i)+gn.getPaddingRight(i);return i.offsetWidth-e-t}de(U1,"getContentWidth");function Eq(i){const e=gn.getMarginLeft(i)+gn.getMarginRight(i);return i.scrollWidth+e}de(Eq,"getTotalScrollWidth");function z5(i){const e=gn.getBorderTopWidth(i)+gn.getBorderBottomWidth(i),t=gn.getPaddingTop(i)+gn.getPaddingBottom(i);return i.offsetHeight-e-t}de(z5,"getContentHeight");function ZA(i){const e=gn.getMarginTop(i)+gn.getMarginBottom(i);return i.offsetHeight+e}de(ZA,"getTotalHeight");function Lq(i,e){if(i===null)return 0;const t=GC(i),n=GC(e);return t.left-n.left}de(Lq,"getRelativeLeft");function q_e(i,e){const t=e.map(s=>Math.max(Eq(s),KC(s))+Lq(s,i)||0);return Math.max(...t)}de(q_e,"getLargestChildWidth");function As(i,e){return!!e?.contains(i)}de(As,"isAncestor");const Dq="parentFlowToElementId";function Y_e(i,e){i.dataset[Dq]=e.id}de(Y_e,"setParentFlowTo");function Iq(i){const e=i.dataset[Dq];return typeof e=="string"?i.ownerDocument.getElementById(e):null}de(Iq,"getParentFlowToElement");function Tq(i,e){let t=i;for(;t;){if(t===e)return!0;if(xs(t)){const n=Iq(t);if(n){t=n;continue}}t=t.parentNode}return!1}de(Tq,"isAncestorUsingFlowTo");function $5(i,e,t){for(;i&&i.nodeType===i.ELEMENT_NODE;){if(i.classList.contains(e))return i;if(t){if(typeof t=="string"){if(i.classList.contains(t))return null}else if(i===t)return null}i=i.parentNode}return null}de($5,"findParentWithClass");function cT(i,e,t){return!!$5(i,e,t)}de(cT,"hasParentWithClass");function G5(i){return i&&!!i.host&&!!i.mode}de(G5,"isShadowRoot");function XA(i){return!!Pb(i)}de(XA,"isInShadowDOM");function Pb(i){for(;i.parentNode;){if(i===i.ownerDocument?.body)return null;i=i.parentNode}return G5(i)?i:null}de(Pb,"getShadowRoot");function Lr(){let i=om().activeElement;for(;i?.shadowRoot;)i=i.shadowRoot.activeElement;return i}de(Lr,"getActiveElement");function dh(i){return Lr()===i}de(dh,"isActiveElement");function Yg(i){return As(Lr(),i)}de(Yg,"isAncestorOfActiveElement");function QA(i){return i.ownerDocument===om()}de(QA,"isActiveDocument");function om(){return mB()<=1?_e.document:Array.from(tE()).map(({window:e})=>e.document).find(e=>e.hasFocus())??_e.document}de(om,"getActiveDocument");function sn(){return om().defaultView?.window??_e}de(sn,"getActiveWindow");const VL=new Map;function Aq(i){return VL.has(i)}de(Aq,"isGlobalStylesheet");function Z_e(){return new X_e}de(Z_e,"createStyleSheet2");class X_e{static{de(this,"WrappedStyleElement")}_currentCssStyle="";_styleSheet=void 0;setStyle(e){e!==this._currentCssStyle&&(this._currentCssStyle=e,this._styleSheet?this._styleSheet.innerText=e:this._styleSheet=ic(_e.document.head,t=>t.innerText=e))}dispose(){this._styleSheet&&(this._styleSheet.remove(),this._styleSheet=void 0)}}function ic(i=_e.document.head,e,t){const n=document.createElement("style");if(n.type="text/css",n.media="screen",e?.(n),i.appendChild(n),t&&t.add(ye(()=>n.remove())),i===_e.document.head){const s=new Set;VL.set(n,s);for(const{window:o,disposables:r}of tE()){if(o===_e)continue;const a=r.add(K5(n,s,o));t?.add(a)}}return n}de(ic,"createStyleSheet");function xq(i){const e=new te;for(const[t,n]of VL)e.add(K5(t,n,i));return e}de(xq,"cloneGlobalStylesheets");function K5(i,e,t){const n=new te,s=i.cloneNode(!0);t.document.head.appendChild(s),n.add(ye(()=>s.remove()));for(const o of X5(i))s.sheet?.insertRule(o.cssText,s.sheet?.cssRules.length);return n.add(j5.observe(i,n,{childList:!0})(()=>{s.textContent=i.textContent})),e.add(s),n.add(ye(()=>e.delete(s))),n}de(K5,"cloneGlobalStyleSheet");const j5=new class{mutationObservers=new Map;observe(i,e,t){let n=this.mutationObservers.get(i);n||(n=new Map,this.mutationObservers.set(i,n));const s=Jd(t);let o=n.get(s);if(o)o.users+=1;else{const r=new x,a=new MutationObserver(c=>r.fire(c));a.observe(i,t);const l=o={users:1,observer:a,onDidMutate:r.event};e.add(ye(()=>{l.users-=1,l.users===0&&(r.dispose(),a.disconnect(),n?.delete(s),n?.size===0&&this.mutationObservers.delete(i))})),n.set(s,o)}return o.onDidMutate}};function q5(i=_e.document.head){return Y5("meta",i)}de(q5,"createMetaElement");function kq(i=_e.document.head){return Y5("link",i)}de(kq,"createLinkElement");function Y5(i,e=_e.document.head){const t=document.createElement(i);return e.appendChild(t),t}de(Y5,"createHeadElement");let vO=null;function Z5(){return vO||(vO=ic()),vO}de(Z5,"getSharedStyleSheet");function X5(i){return i?.sheet?.rules?i.sheet.rules:i?.sheet?.cssRules?i.sheet.cssRules:[]}de(X5,"getDynamicStyleSheetRules");function tP(i,e,t=Z5()){if(!(!t||!e)){t.sheet?.insertRule(`${i} {${e}}`,0);for(const n of VL.get(t)??[])tP(i,e,n)}}de(tP,"createCSSRule");function Nq(i,e=Z5()){if(!e)return;const t=X5(e),n=[];for(let s=0;s<t.length;s++){const o=t[s];Pq(o)&&o.selectorText.indexOf(i)!==-1&&n.push(s)}for(let s=n.length-1;s>=0;s--)e.sheet?.deleteRule(n[s]);for(const s of VL.get(e)??[])Nq(i,s)}de(Nq,"removeCSSRulesContainingSelector");function Pq(i){return typeof i.selectorText=="string"}de(Pq,"isCSSStyleRule");function xs(i){return i instanceof HTMLElement||i instanceof ve(i).HTMLElement}de(xs,"isHTMLElement");function Q_e(i){return i instanceof HTMLAnchorElement||i instanceof ve(i).HTMLAnchorElement}de(Q_e,"isHTMLAnchorElement");function J_e(i){return i instanceof HTMLSpanElement||i instanceof ve(i).HTMLSpanElement}de(J_e,"isHTMLSpanElement");function ebe(i){return i instanceof HTMLTextAreaElement||i instanceof ve(i).HTMLTextAreaElement}de(ebe,"isHTMLTextAreaElement");function tbe(i){return i instanceof HTMLInputElement||i instanceof ve(i).HTMLInputElement}de(tbe,"isHTMLInputElement");function ibe(i){return i instanceof HTMLButtonElement||i instanceof ve(i).HTMLButtonElement}de(ibe,"isHTMLButtonElement");function nbe(i){return i instanceof HTMLDivElement||i instanceof ve(i).HTMLDivElement}de(nbe,"isHTMLDivElement");function Rq(i){return i instanceof SVGElement||i instanceof ve(i).SVGElement}de(Rq,"isSVGElement");function gg(i){return i instanceof MouseEvent||i instanceof ve(i).MouseEvent}de(gg,"isMouseEvent");function Vh(i){return i instanceof KeyboardEvent||i instanceof ve(i).KeyboardEvent}de(Vh,"isKeyboardEvent");function sbe(i){return i instanceof PointerEvent||i instanceof ve(i).PointerEvent}de(sbe,"isPointerEvent");function obe(i){return i instanceof DragEvent||i instanceof ve(i).DragEvent}de(obe,"isDragEvent");const Q={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:J_?"webkitAnimationStart":"animationstart",ANIMATION_END:J_?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:J_?"webkitAnimationIteration":"animationiteration"};function Oq(i){const e=i;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}de(Oq,"isEventLike");const Fe={stop:de((i,e)=>(i.preventDefault(),e&&i.stopPropagation(),i),"stop")};function Mq(i){const e=[];for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)e[t]=i.scrollTop,i=i.parentNode;return e}de(Mq,"saveParentsScrollTop");function Bq(i,e){for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)i.scrollTop!==e[t]&&(i.scrollTop=e[t]),i=i.parentNode}de(Bq,"restoreParentsScrollTop");let rbe=class bB extends ${static{de(this,"FocusTracker")}_onDidFocus=this._register(new x);onDidFocus=this._onDidFocus.event;_onDidBlur=this._register(new x);onDidBlur=this._onDidBlur.event;_refreshStateHandler;static hasFocusWithin(e){if(xs(e)){const t=Pb(e),n=t?t.activeElement:e.ownerDocument.activeElement;return As(n,e)}else{const t=e;return As(t.document.activeElement,t.document)}}constructor(e){super();let t=bB.hasFocusWithin(e),n=!1;const s=de(()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},"onFocus"),o=de(()=>{t&&(n=!0,(xs(e)?ve(e):e).setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))},"onBlur");this._refreshStateHandler=()=>{bB.hasFocusWithin(e)!==t&&(t?o():s())},this._register(F(e,Q.FOCUS,s,!0)),this._register(F(e,Q.BLUR,o,!0)),xs(e)&&(this._register(F(e,Q.FOCUS_IN,()=>this._refreshStateHandler())),this._register(F(e,Q.FOCUS_OUT,()=>this._refreshStateHandler())))}refreshState(){this._refreshStateHandler()}};function al(i){return new rbe(i)}de(al,"trackFocus");function Q5(i,e){return i.after(e),e}de(Q5,"after");function Le(i,...e){if(i.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}de(Le,"append");function jC(i,e){return i.insertBefore(e,i.firstChild),e}de(jC,"prepend");function dr(i,...e){i.innerText="",Le(i,...e)}de(dr,"reset");const abe=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;function J5(i,e,t,...n){const s=abe.exec(e);if(!s)throw new Error("Bad use of emmet");const o=s[1]||"div";let r;return i!=="http://www.w3.org/1999/xhtml"?r=document.createElementNS(i,o):r=document.createElement(o),s[3]&&(r.id=s[3]),s[4]&&(r.className=s[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?r[a]=l:a==="selected"?l&&r.setAttribute(a,"true"):r.setAttribute(a,l))}),r.append(...n),r}de(J5,"_$");function ce(i,e,...t){return J5("http://www.w3.org/1999/xhtml",i,e,...t)}de(ce,"$");ce.SVG=function(i,e,...t){return J5("http://www.w3.org/2000/svg",i,e,...t)};function lbe(i,e){const t=[];return i.forEach((n,s)=>{s>0&&(e instanceof Node?t.push(e.cloneNode()):t.push(document.createTextNode(e))),t.push(n)}),t}de(lbe,"join");function cbe(i,...e){i?Gl(...e):Wc(...e)}de(cbe,"setVisibility");function Gl(...i){for(const e of i)e.style.display="",e.removeAttribute("aria-hidden")}de(Gl,"show");function Wc(...i){for(const e of i)e.style.display="none",e.setAttribute("aria-hidden","true")}de(Wc,"hide");function Fq(i,e){for(;i&&i.nodeType===i.ELEMENT_NODE;){if(xs(i)&&i.hasAttribute(e))return i;i=i.parentNode}return null}de(Fq,"findParentWithAttribute");function dbe(i){!i||!i.hasAttribute("tabIndex")||(i.ownerDocument.activeElement===i&&Fq(i.parentElement,"tabIndex")?.focus(),i.removeAttribute("tabindex"))}de(dbe,"removeTabIndexAndUpdateFocus");function hbe(i){return e=>{e.preventDefault(),e.stopPropagation(),i(e)}}de(hbe,"finalHandler");function ube(i){return new Promise(e=>{if(i.document.readyState==="complete"||i.document&&i.document.body!==null)e(void 0);else{const n=de(()=>{i.window.removeEventListener("DOMContentLoaded",n,!1),e()},"listener");i.window.addEventListener("DOMContentLoaded",n,!1)}})}de(ube,"domContentLoaded");function nE(i,e){const t=i.devicePixelRatio*e;return Math.max(1,Math.floor(t))/i.devicePixelRatio}de(nE,"computeScreenAwareSize");function vB(i){_e.open(i,"_blank","noopener")}de(vB,"windowOpenNoOpener");const y8=780,S8=640;function wB(i){const e=Math.floor(_e.screenLeft+_e.innerWidth/2-y8/2),t=Math.floor(_e.screenTop+_e.innerHeight/2-S8/2);_e.open(i,"_blank",`width=${y8},height=${S8},top=${t},left=${e}`)}de(wB,"windowOpenPopup");function Vq(i,e=!0){const t=_e.open();return t?(e&&(t.opener=null),t.location.href=i,!0):!1}de(Vq,"windowOpenWithSuccess");function Wq(i,e){const t=de(()=>{e(),n=xo(i,t)},"step");let n=xo(i,t);return ye(()=>n.dispose())}de(Wq,"animate");m5.setPreferredWebSchema(/^https:/.test(_e.location.href)?"https":"http");function Zg(i){return i?`url('${Hp.uriToBrowserUri(i).toString(!0).replace(/'/g,"%27")}')`:"url('')"}de(Zg,"asCSSUrl");function gbe(i){return`'${i.replace(/'/g,"%27")}'`}de(gbe,"asCSSPropertyValue");function $d(i,e){if(i!==void 0){const t=i.match(/^\s*var\((.+)\)$/);if(t){const n=t[1].split(",",2);return n.length===2&&(e=$d(n[1].trim(),e)),`var(${n[0]}, ${e})`}return i}return e}de($d,"asCssValueWithDefault");function fbe(i,e){let t;if(ne.isUri(i))t=i.toString(!0);else{const o=new Blob([i]);t=URL.createObjectURL(o),setTimeout(()=>URL.revokeObjectURL(t))}const n=sn(),s=document.createElement("a");n.document.body.appendChild(s),s.download=e,s.href=t,s.click(),setTimeout(()=>s.remove())}de(fbe,"triggerDownload");function pbe(){return new Promise(i=>{const e=sn(),t=document.createElement("input");e.document.body.appendChild(t),t.type="file",t.multiple=!0,H.once(H.fromDOMEventEmitter(t,"input"))(()=>{i(t.files??void 0)}),t.click(),setTimeout(()=>t.remove())})}de(pbe,"triggerUpload");function mbe(i){return i.document.fullscreenElement||i.document.webkitFullscreenElement||i.document.webkitIsFullScreen?{mode:1,guess:!1}:i.innerHeight===i.screen.height?{mode:2,guess:!1}:(Ue||Gi)&&i.outerHeight===i.screen.height&&i.outerWidth===i.screen.width?{mode:2,guess:!0}:null}de(mbe,"detectFullscreen");function eH(i,e=!1){const t=document.createElement("a");return hq("afterSanitizeAttributes",n=>{for(const s of["href","src"])if(n.hasAttribute(s)){const o=n.getAttribute(s);if(s==="href"&&o.startsWith("#"))continue;if(t.href=o,!i.includes(t.protocol.replace(/:$/,""))){if(e&&s==="src"&&t.href.startsWith("data:"))continue;n.removeAttribute(s)}}}),ye(()=>{uq("afterSanitizeAttributes")})}de(eH,"hookDomPurifyHrefAndSrcSanitizer");const _be=[Ve.http,Ve.https,Ve.command],bbe=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]),vbe=Object.freeze({ALLOWED_TAGS:["a","button","blockquote","code","div","h1","h2","h3","h4","h5","h6","hr","input","label","li","p","pre","select","small","span","strong","textarea","ul","ol"],ALLOWED_ATTR:["href","data-href","data-command","target","title","name","src","alt","class","id","role","tabindex","style","data-code","width","height","align","x-dispatch","required","checked","placeholder","type","start"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_TRUSTED_TYPE:!0});function wbe(i,e,t){const n=eH(_be);try{const s=F5(e,{...vbe,...t});i.innerHTML=s}finally{n.dispose()}}de(wbe,"safeInnerHtml");function Hq(i){const e=new Uint16Array(i.length);for(let s=0;s<e.length;s++)e[s]=i.charCodeAt(s);let t="";const n=new Uint8Array(e.buffer);for(let s=0;s<n.length;s++)t+=String.fromCharCode(n[s]);return t}de(Hq,"toBinary");function sE(i){return btoa(Hq(i))}de(sE,"multibyteAwareBtoa");class fg extends x{static{de(this,"ModifierKeyEmitter")}_subscriptions=new te;_keyStatus;static instance;constructor(){super(),this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(H.runAndSubscribe(JN,({window:e,disposables:t})=>this.registerListeners(e,t),{window:_e,disposables:this._subscriptions}))}registerListeners(e,t){t.add(F(e,"keydown",n=>{if(n.defaultPrevented)return;const s=new Pt(n);if(!(s.keyCode===E.Alt&&n.repeat)){if(n.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(n.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(n.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(n.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(s.keyCode!==E.Alt)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=n,this.fire(this._keyStatus))}},!0)),t.add(F(e,"keyup",n=>{n.defaultPrevented||(!n.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!n.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!n.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!n.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=n,this.fire(this._keyStatus)))},!0)),t.add(F(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(F(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(F(e.document.body,"mousemove",n=>{n.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(F(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}get isModifierPressed(){return this._keyStatus.altKey||this._keyStatus.ctrlKey||this._keyStatus.metaKey||this._keyStatus.shiftKey}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return fg.instance||(fg.instance=new fg),fg.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}function Cbe(i){const e=document.cookie.match("(^|[^;]+)\\s*"+i+"\\s*=\\s*([^;]+)");return e?e.pop():void 0}de(Cbe,"getCookieValue");class Rb extends ${constructor(e,t){super(),this.element=e,this.callbacks=t,this.registerListeners()}static{de(this,"DragAndDropObserver")}counter=0;dragStartTime=0;registerListeners(){this.callbacks.onDragStart&&this._register(F(this.element,Q.DRAG_START,e=>{this.callbacks.onDragStart?.(e)})),this.callbacks.onDrag&&this._register(F(this.element,Q.DRAG,e=>{this.callbacks.onDrag?.(e)})),this._register(F(this.element,Q.DRAG_ENTER,e=>{this.counter++,this.dragStartTime=e.timeStamp,this.callbacks.onDragEnter?.(e)})),this._register(F(this.element,Q.DRAG_OVER,e=>{e.preventDefault(),this.callbacks.onDragOver?.(e,e.timeStamp-this.dragStartTime)})),this._register(F(this.element,Q.DRAG_LEAVE,e=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave?.(e))})),this._register(F(this.element,Q.DRAG_END,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd?.(e)})),this._register(F(this.element,Q.DROP,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop?.(e)}))}}const Uq=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function Oi(i,...e){let t,n;Array.isArray(e[0])?(t={},n=e[0]):(t=e[0]||{},n=e[1]);const s=Uq.exec(i);if(!s||!s.groups)throw new Error("Bad use of h");const o=s.groups.tag||"div",r=document.createElement(o);s.groups.id&&(r.id=s.groups.id);const a=[];if(s.groups.class)for(const c of s.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(r.className=a.join(" "));const l={};if(s.groups.name&&(l[s.groups.name]=r),n)for(const c of n)xs(c)?r.appendChild(c):typeof c=="string"?r.append(c):"root"in c&&(Object.assign(l,c),r.appendChild(c.root));for(const[c,d]of Object.entries(t))if(c!=="className")if(c==="style")for(const[h,u]of Object.entries(d))r.style.setProperty(oE(h),typeof u=="number"?u+"px":""+u);else c==="tabIndex"?r.tabIndex=d:r.setAttribute(oE(c),d.toString());return l.root=r,l}de(Oi,"h");function ybe(i,...e){let t,n;Array.isArray(e[0])?(t={},n=e[0]):(t=e[0]||{},n=e[1]);const s=Uq.exec(i);if(!s||!s.groups)throw new Error("Bad use of h");const o=s.groups.tag||"div",r=document.createElementNS("http://www.w3.org/2000/svg",o);s.groups.id&&(r.id=s.groups.id);const a=[];if(s.groups.class)for(const c of s.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(r.className=a.join(" "));const l={};if(s.groups.name&&(l[s.groups.name]=r),n)for(const c of n)xs(c)?r.appendChild(c):typeof c=="string"?r.append(c):"root"in c&&(Object.assign(l,c),r.appendChild(c.root));for(const[c,d]of Object.entries(t))if(c!=="className")if(c==="style")for(const[h,u]of Object.entries(d))r.style.setProperty(oE(h),typeof u=="number"?u+"px":""+u);else c==="tabIndex"?r.tabIndex=d:r.setAttribute(oE(c),d.toString());return l.root=r,l}de(ybe,"svgElem");function oE(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}de(oE,"camelCaseToHyphenCase");function JA(i,e,t){for(const{name:n,value:s}of i.attributes)(!t||t.includes(n))&&e.setAttribute(n,s)}de(JA,"copyAttributes");function zq(i,e,t){const n=i.getAttribute(t);n?e.setAttribute(t,n):e.removeAttribute(t)}de(zq,"copyAttribute");function dT(i,e,t){JA(i,e,t);const n=new te;return n.add(j5.observe(i,n,{attributes:!0,attributeFilter:t})(s=>{for(const o of s)o.type==="attributes"&&o.attributeName&&zq(i,e,o.attributeName)})),n}de(dT,"trackAttributes");function Gd(i){return i.tagName.toLowerCase()==="input"||i.tagName.toLowerCase()==="textarea"||xs(i)&&!!i.editContext}de(Gd,"isEditableElement");class zze{constructor(e,t,n){this.originX=e,this.originY=t;const{top:s,left:o,right:r,bottom:a}=n.getBoundingClientRect(),l=this.points;let c=0;l[c++]=o,l[c++]=s,l[c++]=r,l[c++]=s,l[c++]=o,l[c++]=a,l[c++]=r,l[c++]=a}static{de(this,"SafeTriangle")}points=new Int16Array(8);contains(e,t){const{points:n,originX:s,originY:o}=this;for(let r=0;r<4;r++){const a=2*r,l=2*((r+1)%4);if(bq(e,t,s,o,n[a],n[a+1],n[l],n[l+1]))return!0}return!1}}jc((i,e)=>{const t=GN(i);e.addRule(`.monaco-workbench { background-color: ${t}; }`);const n=i.getColor(mfe);if(n&&e.addRule(`.monaco-workbench ::selection { background-color: ${n}; }`),ui){const s=i.getColor(YA);if(s){const o="monaco-workbench-meta-theme-color";let r=_e.document.getElementById(o);r||(r=q5(),r.name="theme-color",r.id=o),r.content=s.toString()}}Vc&&e.addRule(`
			body.web {
				touch-action: none;
			}
			.monaco-workbench .monaco-editor .view-lines {
				user-select: text;
				-webkit-user-select: text;
			}
		`),ol&&R5()&&e.addRule(`body { background-color: ${t}; }`)});var Sbe=Object.defineProperty,RS=(i,e)=>Sbe(i,"name",{value:e,configurable:!0});const z1={exports:{}};(function(){function i(s){const o=[];typeof s=="number"&&o.push("code/timeOrigin",s);function r(l){o.push(l,Date.now())}RS(r,"mark");function a(){const l=[];for(let c=0;c<o.length;c+=2)l.push({name:o[c],startTime:o[c+1]});return l}return RS(a,"getMarks"),{mark:r,getMarks:a}}RS(i,"_definePolyfillMarks");function e(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?i():{mark(s){performance.mark(s)},getMarks(){let s=performance.timeOrigin;typeof s!="number"&&(s=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const o=[{name:"code/timeOrigin",startTime:Math.round(s)}];for(const r of performance.getEntriesByType("mark"))o.push({name:r.name,startTime:Math.round(s+r.startTime)});return o}};if(typeof process=="object"){const s=performance?.timeOrigin;return i(s)}else return console.trace("perf-util loaded in UNKNOWN environment"),i()}RS(e,"_define");function t(s){return s.MonacoPerformanceMarks||(s.MonacoPerformanceMarks=e()),s.MonacoPerformanceMarks}RS(t,"_factory");var n;typeof global=="object"?n=global:typeof self=="object"?n=self:n={},typeof z1=="object"&&typeof z1.exports=="object"?z1.exports=t(n):(console.trace("perf-util defined in UNKNOWN context (neither requirejs or commonjs)"),n.perf=t(n))})();const _i=z1.exports.mark;z1.exports.getMarks;var Ebe=Object.defineProperty,$q=(i,e)=>Ebe(i,"name",{value:e,configurable:!0});const eh=De("lifecycleService");var Ob=(i=>(i[i.CLOSE=1]="CLOSE",i[i.QUIT=2]="QUIT",i[i.RELOAD=3]="RELOAD",i[i.LOAD=4]="LOAD",i))(Ob||{}),eb=(i=>(i[i.NewWindow=1]="NewWindow",i[i.ReloadedWindow=3]="ReloadedWindow",i[i.ReopenedWindow=4]="ReopenedWindow",i))(eb||{});function Lbe(i){switch(i){case 1:return"NewWindow";case 3:return"ReloadedWindow";case 4:return"ReopenedWindow"}}$q(Lbe,"StartupKindToString");var an=(i=>(i[i.Starting=1]="Starting",i[i.Ready=2]="Ready",i[i.Restored=3]="Restored",i[i.Eventually=4]="Eventually",i))(an||{});function Gq(i){switch(i){case 1:return"Starting";case 2:return"Ready";case 3:return"Restored";case 4:return"Eventually"}}$q(Gq,"LifecyclePhaseToString");var Dbe=Object.defineProperty,gv=(i,e)=>Dbe(i,"name",{value:e,configurable:!0});class Mt extends ${static{gv(this,"Action")}_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_id;_label;_tooltip;_cssClass;_enabled=!0;_checked;_actionCallback;constructor(e,t="",n="",s=!0,o){super(),this._id=e,this._label=t,this._cssClass=n,this._enabled=s,this._actionCallback=o}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class nc extends ${static{gv(this,"ActionRunner")}_onWillRun=this._register(new x);onWillRun=this._onWillRun.event;_onDidRun=this._register(new x);onDidRun=this._onDidRun.event;async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let n;try{await this.runAction(e,t)}catch(s){n=s}this._onDidRun.fire({action:e,error:n})}async runAction(e,t){await e.run(t)}}class zt{static{gv(this,"Separator")}static join(...e){let t=[];for(const n of e)n.length&&(t.length?t=[...t,new zt,...n]:t=n);return t}static ID="vs.actions.separator";id=zt.ID;label="";tooltip="";class="separator";enabled=!1;checked=!1;async run(){}}class ll{static{gv(this,"SubmenuAction")}id;label;class;tooltip="";enabled=!0;checked=void 0;_actions;get actions(){return this._actions}constructor(e,t,n,s){this.id=e,this.label=t,this.class=s,this._actions=n}async run(){}}class tH extends Mt{static{gv(this,"EmptySubmenuAction")}static ID="vs.actions.empty";constructor(){super(tH.ID,g("submenu.empty","(empty)"),void 0,!1)}}function Ei(i){return{id:i.id,label:i.label,tooltip:i.tooltip??i.label,class:i.class,enabled:i.enabled??!0,checked:i.checked,run:gv(async(...e)=>i.run(...e),"run")}}gv(Ei,"toAction");var Ibe=Object.defineProperty,Xy=(i,e)=>Ibe(i,"name",{value:e,configurable:!0});function hT(i,e){return e&&(i.stack||i.stacktrace)?g("stackTrace.format","{0}: {1}",yB(i),CB(i.stack)||CB(i.stacktrace)):yB(i)}Xy(hT,"exceptionToErrorMessage");function CB(i){return Array.isArray(i)?i.join(`
`):i}Xy(CB,"stackToString");function yB(i){return i.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${i.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof i.code=="string"&&typeof i.errno=="number"&&typeof i.syscall=="string"?g("nodeExceptionMessage","A system error occurred ({0})",i.message):i.message||g("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}Xy(yB,"detectSystemErrorMessage");function hh(i=null,e=!1){if(!i)return g("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(i)){const t=To(i),n=hh(t[0],e);return t.length>1?g("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(hn(i))return i;if(i.detail){const t=i.detail;if(t.error)return hT(t.error,e);if(t.exception)return hT(t.exception,e)}return i.stack?hT(i,e):i.message?i.message:g("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}Xy(hh,"toErrorMessage");function iP(i){const e=i;return e instanceof Error&&Array.isArray(e.actions)}Xy(iP,"isErrorWithActions");function Kq(i,e){let t;return typeof i=="string"?t=new Error(i):t=i,t.actions=e,t}Xy(Kq,"createErrorWithActions");var Tbe=Object.defineProperty,jq=(i,e)=>Tbe(i,"name",{value:e,configurable:!0}),Jt=(i=>(i[i.LParen=0]="LParen",i[i.RParen=1]="RParen",i[i.Neg=2]="Neg",i[i.Eq=3]="Eq",i[i.NotEq=4]="NotEq",i[i.Lt=5]="Lt",i[i.LtEq=6]="LtEq",i[i.Gt=7]="Gt",i[i.GtEq=8]="GtEq",i[i.RegexOp=9]="RegexOp",i[i.RegexStr=10]="RegexStr",i[i.True=11]="True",i[i.False=12]="False",i[i.In=13]="In",i[i.Not=14]="Not",i[i.And=15]="And",i[i.Or=16]="Or",i[i.Str=17]="Str",i[i.QuotedStr=18]="QuotedStr",i[i.Error=19]="Error",i[i.EOF=20]="EOF",i))(Jt||{});function uT(...i){switch(i.length){case 1:return g("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",i[0]);case 2:return g("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",i[0],i[1]);case 3:return g("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",i[0],i[1],i[2]);default:return}}jq(uT,"hintDidYouMean");const Abe=g("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),xbe=g("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");class Yf{static{jq(this,"Scanner")}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw UW(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}static _regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0)));static _keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);_input="";_start=0;_current=0;_tokens=[];_errors=[];get errors(){return this._errors}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case A.OpenParen:this._addToken(0);break;case A.CloseParen:this._addToken(1);break;case A.ExclamationMark:if(this._match(A.Equals)){const t=this._match(A.Equals);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case A.SingleQuote:this._quotedString();break;case A.Slash:this._regex();break;case A.Equals:if(this._match(A.Equals)){const t=this._match(A.Equals);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(A.Tilde)?this._addToken(9):this._error(uT("==","=~"));break;case A.LessThan:this._addToken(this._match(A.Equals)?6:5);break;case A.GreaterThan:this._addToken(this._match(A.Equals)?8:7);break;case A.Ampersand:this._match(A.Ampersand)?this._addToken(15):this._error(uT("&&"));break;case A.Pipe:this._match(A.Pipe)?this._addToken(16):this._error(uT("||"));break;case A.Space:case A.CarriageReturn:case A.Tab:case A.LineFeed:case A.NoBreakSpace:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?A.Null:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,n=this._input.substring(this._start,this._current),s={type:19,offset:this._start,lexeme:n};this._errors.push({offset:t,lexeme:n,additionalInfo:e}),this._tokens.push(s)}stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy;_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),n=Yf._keywords.get(t);n?this._addToken(n):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==A.SingleQuote&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(Abe);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,n=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(xbe);return}const o=this._input.charCodeAt(e);if(t)t=!1;else if(o===A.Slash&&!n){e++;break}else o===A.OpenSquareBracket?n=!0:o===A.Backslash?t=!0:o===A.CloseSquareBracket&&(n=!1);e++}for(;e<this._input.length&&Yf._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const s=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:s,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}}var kbe=Object.defineProperty,vn=(i,e)=>kbe(i,"name",{value:e,configurable:!0});const go=new Map;go.set("false",!1);go.set("true",!0);go.set("isMac",Ue);go.set("isLinux",Gi);go.set("isWindows",Nt);go.set("isWeb",ui);go.set("isMacNative",Ue&&!ui);go.set("isEdge",che);go.set("isFirefox",TG);go.set("isChrome",IG);go.set("isSafari",lhe);function qq(i,e){if(go.get(i)!==void 0)throw SL("contextkey.setConstant(k, v) invoked with already set constant `k`");go.set(i,e)}vn(qq,"setConstant");const Nbe=Object.prototype.hasOwnProperty;var l1=(i=>(i[i.False=0]="False",i[i.True=1]="True",i[i.Defined=2]="Defined",i[i.Not=3]="Not",i[i.Equals=4]="Equals",i[i.NotEquals=5]="NotEquals",i[i.And=6]="And",i[i.Regex=7]="Regex",i[i.NotRegex=8]="NotRegex",i[i.Or=9]="Or",i[i.In=10]="In",i[i.NotIn=11]="NotIn",i[i.Greater=12]="Greater",i[i.GreaterEquals=13]="GreaterEquals",i[i.Smaller=14]="Smaller",i[i.SmallerEquals=15]="SmallerEquals",i))(l1||{});const Pbe={regexParsingWithErrorRecovery:!0},Rbe=g("contextkey.parser.error.emptyString","Empty context key expression"),Obe=g("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),Mbe=g("contextkey.parser.error.noInAfterNot","'in' after 'not'."),E8=g("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),Bbe=g("contextkey.parser.error.unexpectedToken","Unexpected token"),Fbe=g("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),Vbe=g("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),Wbe=g("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");let Yq=class c1{constructor(e=Pbe){this._config=e}static{vn(this,"Parser")}static _parseError=new Error;_scanner=new Yf;_tokens=[];_current=0;_parsingErrors=[];get lexingErrors(){return this._scanner.errors}get parsingErrors(){return this._parsingErrors}parse(e){if(e===""){this._parsingErrors.push({message:Rbe,offset:0,lexeme:"",additionalInfo:Obe});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const n=this._peek(),s=n.type===Jt.Str?Fbe:void 0;throw this._parsingErrors.push({message:Bbe,offset:n.offset,lexeme:Yf.getLexeme(n),additionalInfo:s}),c1._parseError}return t}catch(t){if(t!==c1._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(Jt.Or);){const t=this._and();e.push(t)}return e.length===1?e[0]:Z.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(Jt.And);){const t=this._term();e.push(t)}return e.length===1?e[0]:Z.and(...e)}_term(){if(this._matchOne(Jt.Neg)){const e=this._peek();switch(e.type){case Jt.True:return this._advance(),Tr.INSTANCE;case Jt.False:return this._advance(),sa.INSTANCE;case Jt.LParen:{this._advance();const t=this._expr();return this._consume(Jt.RParen,E8),t?.negate()}case Jt.Str:return this._advance(),pv.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case Jt.True:return this._advance(),Z.true();case Jt.False:return this._advance(),Z.false();case Jt.LParen:{this._advance();const t=this._expr();return this._consume(Jt.RParen,E8),t}case Jt.Str:{const t=e.lexeme;if(this._advance(),this._matchOne(Jt.RegexOp)){const s=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),s.type!==Jt.RegexStr)throw this._errExpectedButGot("REGEX",s);const o=s.lexeme,r=o.lastIndexOf("/"),a=r===o.length-1?void 0:this._removeFlagsGY(o.substring(r+1));let l;try{l=new RegExp(o.substring(1,r),a)}catch{throw this._errExpectedButGot("REGEX",s)}return rE.create(t,l)}switch(s.type){case Jt.RegexStr:case Jt.Error:{const o=[s.lexeme];this._advance();let r=this._peek(),a=0;for(let u=0;u<s.lexeme.length;u++)s.lexeme.charCodeAt(u)===A.OpenParen?a++:s.lexeme.charCodeAt(u)===A.CloseParen&&a--;for(;!this._isAtEnd()&&r.type!==Jt.And&&r.type!==Jt.Or;){switch(r.type){case Jt.LParen:a++;break;case Jt.RParen:a--;break;case Jt.RegexStr:case Jt.QuotedStr:for(let u=0;u<r.lexeme.length;u++)r.lexeme.charCodeAt(u)===A.OpenParen?a++:s.lexeme.charCodeAt(u)===A.CloseParen&&a--}if(a<0)break;o.push(Yf.getLexeme(r)),this._advance(),r=this._peek()}const l=o.join(""),c=l.lastIndexOf("/"),d=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let h;try{h=new RegExp(l.substring(1,c),d)}catch{throw this._errExpectedButGot("REGEX",s)}return Z.regex(t,h)}case Jt.QuotedStr:{const o=s.lexeme;this._advance();let r=null;if(!RA(o)){const a=o.indexOf("/"),l=o.lastIndexOf("/");if(a!==l&&a>=0){const c=o.slice(a+1,l),d=o[l+1]==="i"?"i":"";try{r=new RegExp(c,d)}catch{throw this._errExpectedButGot("REGEX",s)}}}if(r===null)throw this._errExpectedButGot("REGEX",s);return rE.create(t,r)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(Jt.Not)){this._consume(Jt.In,Mbe);const s=this._value();return Z.notIn(t,s)}switch(this._peek().type){case Jt.Eq:{this._advance();const s=this._value();if(this._previous().type===Jt.QuotedStr)return Z.equals(t,s);switch(s){case"true":return Z.has(t);case"false":return Z.not(t);default:return Z.equals(t,s)}}case Jt.NotEq:{this._advance();const s=this._value();if(this._previous().type===Jt.QuotedStr)return Z.notEquals(t,s);switch(s){case"true":return Z.not(t);case"false":return Z.has(t);default:return Z.notEquals(t,s)}}case Jt.Lt:return this._advance(),GL.create(t,this._value());case Jt.LtEq:return this._advance(),KL.create(t,this._value());case Jt.Gt:return this._advance(),zL.create(t,this._value());case Jt.GtEq:return this._advance(),$L.create(t,this._value());case Jt.In:return this._advance(),Z.in(t,this._value());default:return Z.has(t)}}case Jt.EOF:throw this._parsingErrors.push({message:Vbe,offset:e.offset,lexeme:"",additionalInfo:Wbe}),c1._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case Jt.Str:case Jt.QuotedStr:return this._advance(),e.lexeme;case Jt.True:return this._advance(),"true";case Jt.False:return this._advance(),"false";case Jt.In:return this._advance(),"in";default:return""}}_flagsGYRe=/g|y/g;_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,n){const s=g("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,Yf.getLexeme(t)),o=t.offset,r=Yf.getLexeme(t);return this._parsingErrors.push({message:s,offset:o,lexeme:r,additionalInfo:n}),c1._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===Jt.EOF}};class Z{static{vn(this,"ContextKeyExpr")}static false(){return Tr.INSTANCE}static true(){return sa.INSTANCE}static has(e){return fv.create(e)}static equals(e,t){return WL.create(e,t)}static notEquals(e,t){return HL.create(e,t)}static regex(e,t){return rE.create(e,t)}static in(e,t){return nP.create(e,t)}static notIn(e,t){return sP.create(e,t)}static not(e){return pv.create(e)}static and(...e){return Zf.create(e,null,!0)}static or(...e){return Wh.create(e,null,!0)}static greater(e,t){return zL.create(e,t)}static greaterEquals(e,t){return $L.create(e,t)}static smaller(e,t){return GL.create(e,t)}static smallerEquals(e,t){return KL.create(e,t)}static _parser=new Yq({regexParsingWithErrorRecovery:!1});static deserialize(e){return e==null?void 0:this._parser.parse(e)}}function Hbe(i){const e=new Yq({regexParsingWithErrorRecovery:!1});return i.map(t=>(e.parse(t),e.lexingErrors.length>0?e.lexingErrors.map(n=>({errorMessage:n.additionalInfo?g("contextkey.scanner.errorForLinterWithHint","Unexpected token. Hint: {0}",n.additionalInfo):g("contextkey.scanner.errorForLinter","Unexpected token."),offset:n.offset,length:n.lexeme.length})):e.parsingErrors.length>0?e.parsingErrors.map(n=>({errorMessage:n.additionalInfo?`${n.message}. ${n.additionalInfo}`:n.message,offset:n.offset,length:n.lexeme.length})):[]))}vn(Hbe,"validateWhenClauses");function Zq(i,e){const t=i?i.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}vn(Zq,"expressionsAreEqualWithConstantSubstitution");function jw(i,e){return i.cmp(e)}vn(jw,"cmp");class Tr{static{vn(this,"ContextKeyFalseExpr")}static INSTANCE=new Tr;type=0;constructor(){}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return sa.INSTANCE}}class sa{static{vn(this,"ContextKeyTrueExpr")}static INSTANCE=new sa;type=1;constructor(){}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return Tr.INSTANCE}}class fv{constructor(e,t){this.key=e,this.negated=t}static{vn(this,"ContextKeyDefinedExpr")}static create(e,t=null){const n=go.get(e);return typeof n=="boolean"?n?sa.INSTANCE:Tr.INSTANCE:new fv(e,t)}type=2;cmp(e){return e.type!==this.type?this.type-e.type:nH(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=go.get(this.key);return typeof e=="boolean"?e?sa.INSTANCE:Tr.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.negated||(this.negated=pv.create(this.key,this)),this.negated}}class WL{constructor(e,t,n){this.key=e,this.value=t,this.negated=n}static{vn(this,"ContextKeyEqualsExpr")}static create(e,t,n=null){if(typeof t=="boolean")return t?fv.create(e,n):pv.create(e,n);const s=go.get(e);return typeof s=="boolean"?t===(s?"true":"false")?sa.INSTANCE:Tr.INSTANCE:new WL(e,t,n)}type=4;cmp(e){return e.type!==this.type?this.type-e.type:rm(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=go.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?sa.INSTANCE:Tr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=HL.create(this.key,this.value,this)),this.negated}}class nP{constructor(e,t){this.key=e,this.valueKey=t}static{vn(this,"ContextKeyInExpr")}static create(e,t){return new nP(e,t)}type=10;negated=null;cmp(e){return e.type!==this.type?this.type-e.type:rm(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):typeof n=="string"&&typeof t=="object"&&t!==null?Nbe.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(e){return e.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=sP.create(this.key,this.valueKey)),this.negated}}class sP{constructor(e,t){this.key=e,this.valueKey=t,this._negated=nP.create(e,t)}static{vn(this,"ContextKeyNotInExpr")}static create(e,t){return new sP(e,t)}type=11;_negated;cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}map(e){return e.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}}class HL{constructor(e,t,n){this.key=e,this.value=t,this.negated=n}static{vn(this,"ContextKeyNotEqualsExpr")}static create(e,t,n=null){if(typeof t=="boolean")return t?pv.create(e,n):fv.create(e,n);const s=go.get(e);return typeof s=="boolean"?t===(s?"true":"false")?Tr.INSTANCE:sa.INSTANCE:new HL(e,t,n)}type=5;cmp(e){return e.type!==this.type?this.type-e.type:rm(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=go.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Tr.INSTANCE:sa.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=WL.create(this.key,this.value,this)),this.negated}}class pv{constructor(e,t){this.key=e,this.negated=t}static{vn(this,"ContextKeyNotExpr")}static create(e,t=null){const n=go.get(e);return typeof n=="boolean"?n?Tr.INSTANCE:sa.INSTANCE:new pv(e,t)}type=3;cmp(e){return e.type!==this.type?this.type-e.type:nH(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=go.get(this.key);return typeof e=="boolean"?e?Tr.INSTANCE:sa.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return this.negated||(this.negated=fv.create(this.key,this)),this.negated}}function UL(i,e){if(typeof i=="string"){const t=parseFloat(i);isNaN(t)||(i=t)}return typeof i=="string"||typeof i=="number"?e(i):Tr.INSTANCE}vn(UL,"withFloatOrStr");class zL{constructor(e,t,n){this.key=e,this.value=t,this.negated=n}static{vn(this,"ContextKeyGreaterExpr")}static create(e,t,n=null){return UL(t,s=>new zL(e,s,n))}type=12;cmp(e){return e.type!==this.type?this.type-e.type:rm(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=KL.create(this.key,this.value,this)),this.negated}}class $L{constructor(e,t,n){this.key=e,this.value=t,this.negated=n}static{vn(this,"ContextKeyGreaterEqualsExpr")}static create(e,t,n=null){return UL(t,s=>new $L(e,s,n))}type=13;cmp(e){return e.type!==this.type?this.type-e.type:rm(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=GL.create(this.key,this.value,this)),this.negated}}class GL{constructor(e,t,n){this.key=e,this.value=t,this.negated=n}static{vn(this,"ContextKeySmallerExpr")}static create(e,t,n=null){return UL(t,s=>new GL(e,s,n))}type=14;cmp(e){return e.type!==this.type?this.type-e.type:rm(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=$L.create(this.key,this.value,this)),this.negated}}class KL{constructor(e,t,n){this.key=e,this.value=t,this.negated=n}static{vn(this,"ContextKeySmallerEqualsExpr")}static create(e,t,n=null){return UL(t,s=>new KL(e,s,n))}type=15;cmp(e){return e.type!==this.type?this.type-e.type:rm(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=zL.create(this.key,this.value,this)),this.negated}}class rE{constructor(e,t){this.key=e,this.regexp=t}static{vn(this,"ContextKeyRegexExpr")}static create(e,t){return new rE(e,t)}type=7;negated=null;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}map(e){return e.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=ex.create(this)),this.negated}}class ex{constructor(e){this._actual=e}static{vn(this,"ContextKeyNotRegexExpr")}static create(e){return new ex(e)}type=8;cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}map(e){return new ex(this._actual.map(e))}negate(){return this._actual}}function iH(i){let e=null;for(let t=0,n=i.length;t<n;t++){const s=i[t].substituteConstants();if(i[t]!==s&&e===null){e=[];for(let o=0;o<t;o++)e[o]=i[o]}e!==null&&(e[t]=s)}return e===null?i:e}vn(iH,"eliminateConstantsInArray");class Zf{constructor(e,t){this.expr=e,this.negated=t}static{vn(this,"ContextKeyAndExpr")}static create(e,t,n){return Zf._normalizeArr(e,t,n)}type=6;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const s=jw(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=iH(this.expr);return e===this.expr?this:Zf.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,n){const s=[];let o=!1;for(const r of e)if(r){if(r.type===1){o=!0;continue}if(r.type===0)return Tr.INSTANCE;if(r.type===6){s.push(...r.expr);continue}s.push(r)}if(s.length===0&&o)return sa.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(jw);for(let r=1;r<s.length;r++)s[r-1].equals(s[r])&&(s.splice(r,1),r--);if(s.length===1)return s[0];for(;s.length>1;){const r=s[s.length-1];if(r.type!==9)break;s.pop();const a=s.pop(),l=s.length===0,c=Wh.create(r.expr.map(d=>Zf.create([d,a],null,n)),null,l);c&&(s.push(c),s.sort(jw))}if(s.length===1)return s[0];if(n){for(let r=0;r<s.length;r++)for(let a=r+1;a<s.length;a++)if(s[r].negate().equals(s[a]))return Tr.INSTANCE;if(s.length===1)return s[0]}return new Zf(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}map(e){return new Zf(this.expr.map(t=>t.map(e)),null)}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=Wh.create(e,this,!0)}return this.negated}}class Wh{constructor(e,t){this.expr=e,this.negated=t}static{vn(this,"ContextKeyOrExpr")}static create(e,t,n){return Wh._normalizeArr(e,t,n)}type=9;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const s=jw(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=iH(this.expr);return e===this.expr?this:Wh.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let s=[],o=!1;if(e){for(let r=0,a=e.length;r<a;r++){const l=e[r];if(l){if(l.type===0){o=!0;continue}if(l.type===1)return sa.INSTANCE;if(l.type===9){s=s.concat(l.expr);continue}s.push(l)}}if(s.length===0&&o)return Tr.INSTANCE;s.sort(jw)}if(s.length!==0){if(s.length===1)return s[0];for(let r=1;r<s.length;r++)s[r-1].equals(s[r])&&(s.splice(r,1),r--);if(s.length===1)return s[0];if(n){for(let r=0;r<s.length;r++)for(let a=r+1;a<s.length;a++)if(s[r].negate().equals(s[a]))return sa.INSTANCE;if(s.length===1)return s[0]}return new Wh(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}map(e){return new Wh(this.expr.map(t=>t.map(e)),null)}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),s=[];for(const o of EB(t))for(const r of EB(n))s.push(Zf.create([o,r],null,!1));e.unshift(Wh.create(s,null,!1))}this.negated=Wh.create(e,this,!0)}return this.negated}}class ie extends fv{static{vn(this,"RawContextKey")}static _info=[];static all(){return ie._info.values()}_defaultValue;constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?ie._info.push({...n,key:e}):n!==!0&&ie._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return WL.create(this.key,e)}notEqualsTo(e){return HL.create(this.key,e)}}const Ye=De("contextKeyService");function nH(i,e){return i<e?-1:i>e?1:0}vn(nH,"cmp1");function rm(i,e,t,n){return i<t?-1:i>t?1:e<n?-1:e>n?1:0}vn(rm,"cmp2");function tx(i,e){if(i.type===0||e.type===1)return!0;if(i.type===9)return e.type===9?SB(i.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if(tx(i,t))return!0;return!1}if(i.type===6){if(e.type===6)return SB(e.expr,i.expr);for(const t of i.expr)if(tx(t,e))return!0;return!1}return i.equals(e)}vn(tx,"implies");function SB(i,e){let t=0,n=0;for(;t<i.length&&n<e.length;){const s=i[t].cmp(e[n]);if(s<0)return!1;s===0&&t++,n++}return t===i.length}vn(SB,"allElementsIncluded");function EB(i){return i.type===9?i.expr:[i]}vn(EB,"getTerminals");const oe=Object.freeze({View:W("view","View"),Help:W("help","Help"),Test:W("test","Test"),File:W("file","File"),Preferences:W("preferences","Preferences"),Developer:W({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer")}),Xi=De("commandService"),Mi=new class{_commands=new Map;_onDidRegisterCommand=new x;onDidRegisterCommand=this._onDidRegisterCommand.event;registerCommand(i,e){if(!i)throw new Error("invalid command");if(typeof i=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:i,handler:e})}if(i.metadata&&Array.isArray(i.metadata.args)){const r=[];for(const l of i.metadata.args)r.push(l.constraint);const a=i.handler;i.handler=function(l,...c){return j$(c,r),a(l,...c)}}const{id:t}=i;let n=this._commands.get(t);n||(n=new ru,this._commands.set(t,n));const s=n.unshift(i),o=ye(()=>{s(),this._commands.get(t)?.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),o}registerCommandAlias(i,e){return Mi.registerCommand(i,(t,...n)=>t.get(Xi).executeCommand(e,...n))}getCommand(i){const e=this._commands.get(i);if(!(!e||e.isEmpty()))return Zt.first(e)}getCommands(){const i=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&i.set(e,t)}return i}};Mi.registerCommand("noop",()=>{});var Ube=Object.defineProperty,Xq=(i,e)=>Ube(i,"name",{value:e,configurable:!0});function zbe(i){return i&&typeof i=="object"&&typeof i.original=="string"&&typeof i.value=="string"}Xq(zbe,"isLocalizedString");function sH(i){return i?i.condition!==void 0:!1}Xq(sH,"isICommandActionToggleInfo");var $be=Object.defineProperty,Nr=(i,e)=>$be(i,"name",{value:e,configurable:!0});const jo=De("logService");De("loggerService");function dd(){return new Date().toISOString()}Nr(dd,"now");function Gbe(i){return Gc(i)}Nr(Gbe,"isLogLevel");var o_=(i=>(i[i.Off=0]="Off",i[i.Trace=1]="Trace",i[i.Debug=2]="Debug",i[i.Info=3]="Info",i[i.Warning=4]="Warning",i[i.Error=5]="Error",i))(o_||{});const Qy=3;function Kbe(i,e,t){switch(e){case 1:i.trace(t);break;case 2:i.debug(t);break;case 3:i.info(t);break;case 4:i.warn(t);break;case 5:i.error(t);break;case 0:break;default:throw new Error(`Invalid log level ${e}`)}}Nr(Kbe,"log");function Hm(i,e=!1){let t="";for(let n=0;n<i.length;n++){let s=i[n];if(s instanceof Error&&(s=hh(s,e)),typeof s=="object")try{s=JSON.stringify(s)}catch{}t+=(n>0?" ":"")+s}return t}Nr(Hm,"format");class jL extends ${static{Nr(this,"AbstractLogger")}level=Qy;_onDidChangeLogLevel=this._register(new x);onDidChangeLogLevel=this._onDidChangeLogLevel.event;setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==0&&this.level<=e}}class $ze extends jL{constructor(e){super(),this.logAlways=e}static{Nr(this,"AbstractMessageLogger")}checkLogLevel(e){return this.logAlways||super.checkLogLevel(e)}trace(e,...t){this.checkLogLevel(1)&&this.log(1,Hm([e,...t],!0))}debug(e,...t){this.checkLogLevel(2)&&this.log(2,Hm([e,...t]))}info(e,...t){this.checkLogLevel(3)&&this.log(3,Hm([e,...t]))}warn(e,...t){this.checkLogLevel(4)&&this.log(4,Hm([e,...t]))}error(e,...t){if(this.checkLogLevel(5))if(e instanceof Error){const n=Array.prototype.slice.call(arguments);n[0]=e.stack,this.log(5,Hm(n))}else this.log(5,Hm([e,...t]))}flush(){}}class Gze extends jL{static{Nr(this,"ConsoleMainLogger")}useColors;constructor(e=Qy){super(),this.setLevel(e),this.useColors=!Nt}trace(e,...t){this.checkLogLevel(1)&&(this.useColors?console.log(`\x1b[90m[main ${dd()}]\x1b[0m`,e,...t):console.log(`[main ${dd()}]`,e,...t))}debug(e,...t){this.checkLogLevel(2)&&(this.useColors?console.log(`\x1b[90m[main ${dd()}]\x1b[0m`,e,...t):console.log(`[main ${dd()}]`,e,...t))}info(e,...t){this.checkLogLevel(3)&&(this.useColors?console.log(`\x1b[90m[main ${dd()}]\x1b[0m`,e,...t):console.log(`[main ${dd()}]`,e,...t))}warn(e,...t){this.checkLogLevel(4)&&(this.useColors?console.warn(`\x1b[93m[main ${dd()}]\x1b[0m`,e,...t):console.warn(`[main ${dd()}]`,e,...t))}error(e,...t){this.checkLogLevel(5)&&(this.useColors?console.error(`\x1b[91m[main ${dd()}]\x1b[0m`,e,...t):console.error(`[main ${dd()}]`,e,...t))}flush(){}}class Kze extends jL{constructor(e=Qy,t=!0){super(),this.useColors=t,this.setLevel(e)}static{Nr(this,"ConsoleLogger")}trace(e,...t){this.checkLogLevel(1)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(2)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(3)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(4)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(5)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}flush(){}}class jbe extends jL{constructor(e,t=Qy){super(),this.adapter=e,this.setLevel(t)}static{Nr(this,"AdapterLogger")}trace(e,...t){this.checkLogLevel(1)&&this.adapter.log(1,[this.extractMessage(e),...t])}debug(e,...t){this.checkLogLevel(2)&&this.adapter.log(2,[this.extractMessage(e),...t])}info(e,...t){this.checkLogLevel(3)&&this.adapter.log(3,[this.extractMessage(e),...t])}warn(e,...t){this.checkLogLevel(4)&&this.adapter.log(4,[this.extractMessage(e),...t])}error(e,...t){this.checkLogLevel(5)&&this.adapter.log(5,[this.extractMessage(e),...t])}extractMessage(e){return typeof e=="string"?e:hh(e,this.checkLogLevel(1))}flush(){}}class jze extends jL{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}static{Nr(this,"MultiplexLogger")}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const n of this.loggers)n.trace(e,...t)}debug(e,...t){for(const n of this.loggers)n.debug(e,...t)}info(e,...t){for(const n of this.loggers)n.info(e,...t)}warn(e,...t){for(const n of this.loggers)n.warn(e,...t)}error(e,...t){for(const n of this.loggers)n.error(e,...t)}flush(){for(const e of this.loggers)e.flush()}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}class qze extends ${constructor(e,t,n){if(super(),this.logLevel=e,this.logsHome=t,n)for(const s of n)this._loggers.set(s.resource,{logger:void 0,info:s})}static{Nr(this,"AbstractLoggerService")}_loggers=new ro;_onDidChangeLoggers=this._register(new x);onDidChangeLoggers=this._onDidChangeLoggers.event;_onDidChangeLogLevel=this._register(new x);onDidChangeLogLevel=this._onDidChangeLogLevel.event;_onDidChangeVisibility=this._register(new x);onDidChangeVisibility=this._onDidChangeVisibility.event;getLoggerEntry(e){return hn(e)?[...this._loggers.values()].find(t=>t.info.id===e):this._loggers.get(e)}getLogger(e){return this.getLoggerEntry(e)?.logger}createLogger(e,t){const n=this.toResource(e),s=hn(e)?e:t?.id??Jd(n.toString()).toString(16);let o=this._loggers.get(n)?.logger;const r=t?.logLevel==="always"?1:t?.logLevel;o||(o=this.doCreateLogger(n,r??this.getLogLevel(n)??this.logLevel,{...t,id:s}));const a={logger:o,info:{resource:n,id:s,logLevel:r,name:t?.name,hidden:t?.hidden,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(a.info),this._loggers.set(n,a),o}toResource(e){return hn(e)?Ti(this.logsHome,`${e}.log`):e}setLogLevel(e,t){if(ne.isUri(e)){const n=e,s=t,o=this._loggers.get(n);o&&s!==o.info.logLevel&&(o.info.logLevel=s===this.logLevel?void 0:s,o.logger?.setLevel(s),this._loggers.set(o.info.resource,o),this._onDidChangeLogLevel.fire([n,s]))}else{this.logLevel=e;for(const[n,s]of this._loggers.entries())this._loggers.get(n)?.info.logLevel===void 0&&s.logger?.setLevel(this.logLevel);this._onDidChangeLogLevel.fire(this.logLevel)}}setVisibility(e,t){const n=this.getLoggerEntry(e);n&&t!==!n.info.hidden&&(n.info.hidden=!t,this._loggers.set(n.info.resource,n),this._onDidChangeVisibility.fire([n.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this._loggers.get(e)?.info.logLevel),t??this.logLevel}registerLogger(e){const t=this._loggers.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this._loggers.set(e.resource,{info:e,logger:void 0}),this._onDidChangeLoggers.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this._loggers.get(e);t&&(t.logger&&t.logger.dispose(),this._loggers.delete(e),this._onDidChangeLoggers.fire({added:[],removed:[t.info]}))}*getRegisteredLoggers(){for(const e of this._loggers.values())yield e.info}getRegisteredLogger(e){return this._loggers.get(e)?.info}dispose(){this._loggers.forEach(e=>e.logger?.dispose()),this._loggers.clear(),super.dispose()}}class qbe{static{Nr(this,"NullLogger")}onDidChangeLogLevel=new x().event;setLevel(e){}getLevel(){return 3}trace(e,...t){}debug(e,...t){}info(e,...t){}warn(e,...t){}error(e,...t){}critical(e,...t){}dispose(){}flush(){}}class Yze extends qbe{static{Nr(this,"NullLogService")}}function Ybe(i){if(i.verbose)return 1;if(typeof i.logLevel=="string"){const e=Qq(i.logLevel.toLowerCase());if(e!==void 0)return e}return Qy}Nr(Ybe,"getLogLevel");function ix(i){switch(i){case 1:return"trace";case 2:return"debug";case 3:return"info";case 4:return"warn";case 5:return"error";case 0:return"off"}}Nr(ix,"LogLevelToString");function Zbe(i){switch(i){case 1:return{original:"Trace",value:g("trace","Trace")};case 2:return{original:"Debug",value:g("debug","Debug")};case 3:return{original:"Info",value:g("info","Info")};case 4:return{original:"Warning",value:g("warn","Warning")};case 5:return{original:"Error",value:g("error","Error")};case 0:return{original:"Off",value:g("off","Off")}}}Nr(Zbe,"LogLevelToLocalizedString");function Qq(i){switch(i){case"trace":return 1;case"debug":return 2;case"info":return 3;case"warn":return 4;case"error":return 5;case"critical":return 5;case"off":return 0}}Nr(Qq,"parseLogLevel");new ie("logLevel",ix(3));var Xbe=Object.defineProperty,oP=(i,e)=>Xbe(i,"name",{value:e,configurable:!0});function Jq(i){const e=eY(i);if(e&&e.length>0)return new Uint32Array(e)}oP(Jq,"getKoreanAltChars");let Ua=0;const Xf=new Uint32Array(10);function eY(i){if(Ua=0,hd(i,wO,4352),Ua>0||(hd(i,CO,4449),Ua>0)||(hd(i,yO,4520),Ua>0)||(hd(i,Dm,12593),Ua))return Xf.subarray(0,Ua);if(i>=44032&&i<=55203){const e=i-44032,t=e%588,n=Math.floor(e/588),s=Math.floor(t/28),o=t%28-1;if(n<wO.length?hd(n,wO,0):4352+n-12593<Dm.length&&hd(4352+n,Dm,12593),s<CO.length?hd(s,CO,0):4449+s-12593<Dm.length&&hd(4449+s-12593,Dm,12593),o>=0&&(o<yO.length?hd(o,yO,0):4520+o-12593<Dm.length&&hd(4520+o-12593,Dm,12593)),Ua>0)return Xf.subarray(0,Ua)}}oP(eY,"disassembleKorean");function hd(i,e,t){i>=t&&i<t+e.length&&tY(e[i-t])}oP(hd,"getCodesFromArray");function tY(i){i!==0&&(Xf[Ua++]=i&255,i>>8&&(Xf[Ua++]=i>>8&255),i>>16&&(Xf[Ua++]=i>>16&255))}oP(tY,"addCodesToBuffer");const wO=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),CO=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),yO=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),Dm=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);var Qbe=Object.defineProperty,jt=(i,e)=>Qbe(i,"name",{value:e,configurable:!0});function oH(...i){return function(e,t){for(let n=0,s=i.length;n<s;n++){const o=i[n](e,t);if(o)return o}return null}}jt(oH,"or");rH.bind(void 0,!1);const aE=rH.bind(void 0,!0);function rH(i,e,t){if(!t||t.length<e.length)return null;let n;return i?n=Uy(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}jt(rH,"_matchesPrefix");function iY(i,e){const t=e.toLowerCase().indexOf(i.toLowerCase());return t===-1?null:[{start:t,end:t+i.length}]}jt(iY,"matchesContiguousSubString");function nY(i,e){return nx(i.toLowerCase(),e.toLowerCase(),0,0)}jt(nY,"matchesSubString");function nx(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]===e[n]){let s=null;return(s=nx(i,e,t+1,n+1))?lP({start:n,end:n+1},s):null}return nx(i,e,t,n+1)}jt(nx,"_matchesSubString");function rP(i){return A.a<=i&&i<=A.z}jt(rP,"isLower");function Jy(i){return A.A<=i&&i<=A.Z}jt(Jy,"isUpper");function aP(i){return A.Digit0<=i&&i<=A.Digit9}jt(aP,"isNumber");function aH(i){return i===A.Space||i===A.Tab||i===A.LineFeed||i===A.CarriageReturn}jt(aH,"isWhitespace");const sY=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(i=>sY.add(i.charCodeAt(0)));function lE(i){return aH(i)||sY.has(i)}jt(lE,"isWordSeparator");function LB(i,e){return i===e||lE(i)&&lE(e)}jt(LB,"charactersMatch");const SO=new Map;function DB(i){if(SO.has(i))return SO.get(i);let e;const t=Jq(i);return t&&(e=t),SO.set(i,e),e}jt(DB,"getAlternateCodes");function lH(i){return rP(i)||Jy(i)||aP(i)}jt(lH,"isAlphanumeric");function lP(i,e){return e.length===0?e=[i]:i.end===e[0].start?e[0].start=i.start:e.unshift(i),e}jt(lP,"join");function cH(i,e){for(let t=e;t<i.length;t++){const n=i.charCodeAt(t);if(Jy(n)||aP(n)||t>0&&!lH(i.charCodeAt(t-1)))return t}return i.length}jt(cH,"nextAnchor");function sx(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]!==e[n].toLowerCase())return null;{let s=null,o=n+1;for(s=sx(i,e,t+1,n+1);!s&&(o=cH(e,o))<e.length;)s=sx(i,e,t+1,o),o++;return s===null?null:lP({start:n,end:n+1},s)}}jt(sx,"_matchesCamelCase");function oY(i){let e=0,t=0,n=0,s=0,o=0;for(let d=0;d<i.length;d++)o=i.charCodeAt(d),Jy(o)&&e++,rP(o)&&t++,lH(o)&&n++,aP(o)&&s++;const r=e/i.length,a=t/i.length,l=n/i.length,c=s/i.length;return{upperPercent:r,lowerPercent:a,alphaPercent:l,numericPercent:c}}jt(oY,"analyzeCamelCaseWord");function rY(i){const{upperPercent:e,lowerPercent:t}=i;return t===0&&e>.6}jt(rY,"isUpperCaseWord");function aY(i){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:s}=i;return t>.2&&e<.8&&n>.6&&s<.2}jt(aY,"isCamelCaseWord");function lY(i){let e=0,t=0,n=0,s=0;for(let o=0;o<i.length;o++)n=i.charCodeAt(o),Jy(n)&&e++,rP(n)&&t++,aH(n)&&s++;return(e===0||t===0)&&s===0?i.length<=30:e<=5}jt(lY,"isCamelCasePattern");function dH(i,e){if(!e||(e=e.trim(),e.length===0)||!lY(i))return null;e.length>60&&(e=e.substring(0,60));const t=oY(e);if(!aY(t)){if(!rY(t))return null;e=e.toLowerCase()}let n=null,s=0;for(i=i.toLowerCase();s<e.length&&(n=sx(i,e,0,s))===null;)s=cH(e,s+1);return n}jt(dH,"matchesCamelCase");function Jbe(i,e,t=!1){if(!e||e.length===0)return null;let n=null,s=0;for(i=i.toLowerCase(),e=e.toLowerCase();s<e.length&&(n=ox(i,e,0,s,t),n===null);)s=hH(e,s+1);return n}jt(Jbe,"matchesWords");function ox(i,e,t,n,s){let o=0;if(t===i.length)return[];if(n===e.length)return null;if(!LB(i.charCodeAt(t),e.charCodeAt(n))){const l=DB(i.charCodeAt(t));if(!l)return null;for(let c=0;c<l.length;c++)if(!LB(l[c],e.charCodeAt(n+c)))return null;o+=l.length-1}let r=null,a=n+o+1;if(r=ox(i,e,t+1,a,s),!s)for(;!r&&(a=hH(e,a))<e.length;)r=ox(i,e,t+1,a,s),a++;if(!r)return null;if(i.charCodeAt(t)!==e.charCodeAt(n)){const l=DB(i.charCodeAt(t));if(!l)return r;for(let c=0;c<l.length;c++)if(l[c]!==e.charCodeAt(n+c))return r}return lP({start:n,end:n+o+1},r)}jt(ox,"_matchesWords");function hH(i,e){for(let t=e;t<i.length;t++)if(lE(i.charCodeAt(t))||t>0&&lE(i.charCodeAt(t-1)))return t;return i.length}jt(hH,"nextWord");const eve=oH(aE,dH,iY),tve=oH(aE,dH,nY),L8=new Ry(1e4);function IB(i,e,t=!1){if(typeof i!="string"||typeof e!="string")return null;let n=L8.get(i);n||(n=new RegExp(kK(i),"i"),L8.set(i,n));const s=n.exec(e);return s?[{start:s.index,end:s.index+s[0].length}]:t?tve(i,e):eve(i,e)}jt(IB,"matchesFuzzy");function cY(i,e){const t=Mb(i,i.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?cP(t):null}jt(cY,"matchesFuzzy2");function ive(i,e,t,n,s,o){const r=Math.min(13,i.length);for(;t<r;t++){const a=Mb(i,e,t,n,s,o,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(a)return a}return[0,o]}jt(ive,"anyScore");function cP(i){if(typeof i>"u")return[];const e=[],t=i[1];for(let n=i.length-1;n>1;n--){const s=i[n]+t,o=e[e.length-1];o&&o.end===s?o.end=s+1:e.push({start:s,end:s+1})}return e}jt(cP,"createMatches");const vp=128;function dP(){const i=[],e=[];for(let t=0;t<=vp;t++)e[t]=0;for(let t=0;t<=vp;t++)i.push(e.slice(0));return i}jt(dP,"initTable");function uH(i){const e=[];for(let t=0;t<=i;t++)e[t]=0;return e}jt(uH,"initArr");const dY=uH(2*vp),TB=uH(2*vp),Th=dP(),Pf=dP(),d1=dP();function gT(i,e,t,n,s){function o(a,l,c=" "){for(;a.length<l;)a=c+a;return a}jt(o,"pad");let r=` |   |${n.split("").map(a=>o(a,3)).join("|")}
`;for(let a=0;a<=t;a++)a===0?r+=" |":r+=`${e[a-1]}|`,r+=i[a].slice(0,s+1).map(l=>o(l.toString(),3)).join("|")+`
`;return r}jt(gT,"printTable");function nve(i,e,t,n){i=i.substr(e),t=t.substr(n),console.log(gT(Pf,i,i.length,t,t.length)),console.log(gT(d1,i,i.length,t,t.length)),console.log(gT(Th,i,i.length,t,t.length))}jt(nve,"printTables");function h1(i,e){if(e<0||e>=i.length)return!1;const t=i.codePointAt(e);switch(t){case A.Underline:case A.Dash:case A.Period:case A.Space:case A.Slash:case A.Backslash:case A.SingleQuote:case A.DoubleQuote:case A.Colon:case A.DollarSign:case A.LessThan:case A.GreaterThan:case A.OpenParen:case A.CloseParen:case A.OpenSquareBracket:case A.CloseSquareBracket:case A.OpenCurlyBrace:case A.CloseCurlyBrace:return!0;case void 0:return!1;default:return!!WN(t)}}jt(h1,"isSeparatorAtPos");function AB(i,e){if(e<0||e>=i.length)return!1;switch(i.charCodeAt(e)){case A.Space:case A.Tab:return!0;default:return!1}}jt(AB,"isWhitespaceAtPos");function $1(i,e,t){return e[i]!==t[i]}jt($1,"isUpperCaseAtPos");function hY(i,e,t,n,s,o,r=!1){for(;e<t&&s<o;)i[e]===n[s]&&(r&&(dY[e]=s),e+=1),s+=1;return e===t}jt(hY,"isPatternInWord");var tb;(i=>{i.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}i.isDefault=e,jt(e,"isDefault")})(tb||(tb={}));class sve{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}static{jt(this,"FuzzyScoreOptions")}static default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}function Mb(i,e,t,n,s,o,r=sve.default){const a=i.length>vp?vp:i.length,l=n.length>vp?vp:n.length;if(t>=a||o>=l||a-t>l-o||!hY(e,t,a,s,o,l,!0))return;uY(a,l,t,o,e,s);let c=1,d=1,h=t,u=o;const f=[!1];for(c=1,h=t;h<a;c++,h++){const v=dY[h],b=TB[h],C=h+1<a?TB[h+1]:l;for(d=v-o+1,u=v;u<C;d++,u++){let S=Number.MIN_SAFE_INTEGER,D=!1;u<=b&&(S=gY(i,e,h,t,n,s,u,l,o,Th[c-1][d-1]===0,f));let T=0;S!==Number.MAX_SAFE_INTEGER&&(D=!0,T=S+Pf[c-1][d-1]);const I=u>v,R=I?Pf[c][d-1]+(Th[c][d-1]>0?-5:0):0,G=u>v+1&&Th[c][d-1]>0,K=G?Pf[c][d-2]+(Th[c][d-2]>0?-5:0):0;if(G&&(!I||K>=R)&&(!D||K>=T))Pf[c][d]=K,d1[c][d]=3,Th[c][d]=0;else if(I&&(!D||R>=T))Pf[c][d]=R,d1[c][d]=2,Th[c][d]=0;else if(D)Pf[c][d]=T,d1[c][d]=1,Th[c][d]=Th[c-1][d-1]+1;else throw new Error("not possible")}}if(!f[0]&&!r.firstMatchCanBeWeak)return;c--,d--;const p=[Pf[c][d],o];let m=0,_=0;for(;c>=1;){let v=d;do{const b=d1[c][v];if(b===3)v=v-2;else if(b===2)v=v-1;else break}while(v>=1);m>1&&e[t+c-1]===s[o+d-1]&&!$1(v+o-1,n,s)&&m+1>Th[c][v]&&(v=d),v===d?m++:m=1,_||(_=v),c--,d=v-1,p.push(d)}l-o===a&&r.boostFullMatch&&(p[0]+=2);const w=_-a;return p[0]-=w,p}jt(Mb,"fuzzyScore");function uY(i,e,t,n,s,o){let r=i-1,a=e-1;for(;r>=t&&a>=n;)s[r]===o[a]&&(TB[r]=a,r--),a--}jt(uY,"_fillInMaxWordMatchPos");function gY(i,e,t,n,s,o,r,a,l,c,d){if(e[t]!==o[r])return Number.MIN_SAFE_INTEGER;let h=1,u=!1;return r===t-n?h=i[t]===s[r]?7:5:$1(r,s,o)&&(r===0||!$1(r-1,s,o))?(h=i[t]===s[r]?7:5,u=!0):h1(o,r)&&(r===0||!h1(o,r-1))?h=5:(h1(o,r-1)||AB(o,r-1))&&(h=5,u=!0),h>1&&t===n&&(d[0]=!0),u||(u=$1(r,s,o)||h1(o,r-1)||AB(o,r-1)),t===n?r>l&&(h-=u?3:5):c?h+=u?2:0:h+=u?0:1,r+1===a&&(h-=u?3:5),h}jt(gY,"_doScore");function ove(i,e,t,n,s,o,r){return gH(i,e,t,n,s,o,!0,r)}jt(ove,"fuzzyScoreGracefulAggressive");function rve(i,e,t,n,s,o,r){return gH(i,e,t,n,s,o,!1,r)}jt(rve,"fuzzyScoreGraceful");function gH(i,e,t,n,s,o,r,a){let l=Mb(i,e,t,n,s,o,a);if(l&&!r)return l;if(i.length>=3){const c=Math.min(7,i.length-1);for(let d=t+1;d<c;d++){const h=fY(i,d);if(h){const u=Mb(h,h.toLowerCase(),t,n,s,o,a);u&&(u[0]-=3,(!l||u[0]>l[0])&&(l=u))}}}return l}jt(gH,"fuzzyScoreWithPermutations");function fY(i,e){if(e+1>=i.length)return;const t=i[e],n=i[e+1];if(t!==n)return i.slice(0,e)+n+t+i.slice(e+2)}jt(fY,"nextTypoPermutation");var ave=Object.defineProperty,eS=(i,e)=>ave(i,"name",{value:e,configurable:!0});const lve="$(",fH=new RegExp(`\\$\\(${Ne.iconNameExpression}(?:${Ne.iconModifierExpression})?\\)`,"g"),cve=new RegExp(`(\\\\)?${fH.source}`,"g");function pY(i){return i.replace(cve,(e,t)=>t?e:`\\${e}`)}eS(pY,"escapeIcons");const dve=new RegExp(`\\\\${fH.source}`,"g");function mY(i){return i.replace(dve,e=>`\\${e}`)}eS(mY,"markdownEscapeEscapedIcons");const hve=new RegExp(`(\\s)?(\\\\)?${fH.source}(\\s)?`,"g");function pH(i){return i.indexOf(lve)===-1?i:i.replace(hve,(e,t,n,s)=>n?e:t||s||"")}eS(pH,"stripIcons");function uve(i){return i?i.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}eS(uve,"getCodiconAriaLabel");const EO=new RegExp(`\\$\\(${Ne.iconNameCharacter}+\\)`,"g");function gve(i){EO.lastIndex=0;let e="";const t=[];let n=0;for(;;){const s=EO.lastIndex,o=EO.exec(i),r=i.substring(s,o?.index);if(r.length>0){e+=r;for(let a=0;a<r.length;a++)t.push(n)}if(!o)break;n+=o[0].length}return{text:e,iconOffsets:t}}eS(gve,"parseLabelWithIcons");function fve(i,e,t=!1){const{text:n,iconOffsets:s}=e;if(!s||s.length===0)return IB(i,n,t);const o=Wy(n," "),r=n.length-o.length,a=IB(i,o,t);if(a)for(const l of a){const c=s[l.start+r]+r;l.start+=c,l.end+=c}return a}eS(fve,"matchesFuzzyIconAware");var pve=Object.defineProperty,df=(i,e)=>pve(i,"name",{value:e,configurable:!0});class mH{static{df(this,"MarkdownString")}value;isTrusted;supportThemeIcons;supportHtml;baseUri;constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw SL("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=bY(this.supportThemeIcons?pY(e):e).replace(/([ \t]+)/g,(n,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${vY(t,e)}
`,this}appendLink(e,t,n){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,t){const n=new RegExp(Yd(t),"g");return e.replace(n,(s,o)=>e.charAt(o-1)!=="\\"?`\\${s}`:s)}}function _Y(i){return Pp(i)?!i.value:Array.isArray(i)?i.every(_Y):!0}df(_Y,"isEmptyMarkdownString");function Pp(i){return i instanceof mH?!0:i&&typeof i=="object"?typeof i.value=="string"&&(typeof i.isTrusted=="boolean"||typeof i.isTrusted=="object"||i.isTrusted===void 0)&&(typeof i.supportThemeIcons=="boolean"||i.supportThemeIcons===void 0):!1}df(Pp,"isMarkdownString");function _H(i,e){return i===e?!0:!i||!e?!1:i.value===e.value&&i.isTrusted===e.isTrusted&&i.supportThemeIcons===e.supportThemeIcons&&i.supportHtml===e.supportHtml&&(i.baseUri===e.baseUri||!!i.baseUri&&!!e.baseUri&&Ta(ne.from(i.baseUri),ne.from(e.baseUri)))}df(_H,"markdownStringEqual");function bY(i){return i.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}df(bY,"escapeMarkdownSyntaxTokens");function vY(i,e){const t=i.match(/^`+/gm)?.reduce((s,o)=>s.length>o.length?s:o).length??0,n=t>=3?t+1:3;return[`${"`".repeat(n)}${e}`,i,`${"`".repeat(n)}`].join(`
`)}df(vY,"appendEscapedMarkdownCodeBlockFence");function u1(i){return i.replace(/"/g,"&quot;")}df(u1,"escapeDoubleQuotes");function fT(i){return i&&i.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}df(fT,"removeMarkdownEscapes");function wY(i){const e=[],t=i.split("|").map(s=>s.trim());i=t[0];const n=t[1];if(n){const s=/height=(\d+)/.exec(n),o=/width=(\d+)/.exec(n),r=s?s[1]:"",a=o?o[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(r));l&&e.push(`width="${a}"`),c&&e.push(`height="${r}"`)}return{href:i,dimensions:e}}df(wY,"parseHrefAndDimensions");var mve=Object.defineProperty,Na=(i,e)=>mve(i,"name",{value:e,configurable:!0});function tS(i){if(!i||typeof i!="object"||i instanceof RegExp)return i;const e=Array.isArray(i)?[]:{};return Object.entries(i).forEach(([t,n])=>{e[t]=n&&typeof n=="object"?tS(n):n}),e}Na(tS,"deepClone");function _ve(i){if(!i||typeof i!="object")return i;const e=[i];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(CY.call(t,n)){const s=t[n];typeof s=="object"&&!Object.isFrozen(s)&&!G$(s)&&e.push(s)}}return i}Na(_ve,"deepFreeze");const CY=Object.prototype.hasOwnProperty;function bH(i,e){return rx(i,e,new Set)}Na(bH,"cloneAndChange");function rx(i,e,t){if(Ls(i))return i;const n=e(i);if(typeof n<"u")return n;if(Array.isArray(i)){const s=[];for(const o of i)s.push(rx(o,e,t));return s}if(On(i)){if(t.has(i))throw new Error("Cannot clone recursive data-structure");t.add(i);const s={};for(const o in i)CY.call(i,o)&&(s[o]=rx(i[o],e,t));return t.delete(i),s}return i}Na(rx,"_cloneAndChange");function vH(i,e,t=!0){return On(i)?(On(e)&&Object.keys(e).forEach(n=>{n in i?t&&(On(i[n])&&On(e[n])?vH(i[n],e[n],t):i[n]=e[n]):i[n]=e[n]}),i):e}Na(vH,"mixin");function lo(i,e){if(i===e)return!0;if(i==null||e===null||e===void 0||typeof i!=typeof e||typeof i!="object"||Array.isArray(i)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(i)){if(i.length!==e.length)return!1;for(t=0;t<i.length;t++)if(!lo(i[t],e[t]))return!1}else{const s=[];for(n in i)s.push(n);s.sort();const o=[];for(n in e)o.push(n);if(o.sort(),!lo(s,o))return!1;for(t=0;t<s.length;t++)if(!lo(i[s[t]],e[s[t]]))return!1}return!0}Na(lo,"equals");function xB(i){const e=new Set;return JSON.stringify(i,(t,n)=>{if(On(n)||Array.isArray(n)){if(e.has(n))return"[Circular]";e.add(n)}return typeof n=="bigint"?`[BigInt ${n.toString()}]`:n})}Na(xB,"safeStringify");function yY(i,e){const t=Object.create(null);return!i||!e||Object.keys(e).forEach(s=>{const o=i[s],r=e[s];lo(o,r)||(t[s]=r)}),t}Na(yY,"distinct");function bve(i,e){const t=e.toLowerCase(),n=Object.keys(i).find(s=>s.toLowerCase()===t);return n?i[n]:i[e]}Na(bve,"getCaseInsensitive");function vve(i,e){const t=Object.create(null);for(const[n,s]of Object.entries(i))e(n,s)&&(t[n]=s);return t}Na(vve,"filter");function SY(i){let e=[];for(;Object.prototype!==i;)e=e.concat(Object.getOwnPropertyNames(i)),i=Object.getPrototypeOf(i);return e}Na(SY,"getAllPropertyNames");function wve(i){const e=[];for(const t of SY(i))typeof i[t]=="function"&&e.push(t);return e}Na(wve,"getAllMethodNames");function Cve(i,e){const t=Na(s=>function(){const o=Array.prototype.slice.call(arguments,0);return e(s,o)},"createProxyMethod"),n={};for(const s of i)n[s]=t(s);return n}Na(Cve,"createProxyObject");function yve(i,e){const t={};for(const[n,s]of Object.entries(i))t[n]=e(s,n);return t}Na(yve,"mapValues");var Sve=Object.defineProperty,am=(i,e)=>Sve(i,"name",{value:e,configurable:!0}),Bi=(i=>(i[i.Auto=1]="Auto",i[i.Hidden=2]="Hidden",i[i.Visible=3]="Visible",i))(Bi||{});class ax{constructor(e,t,n,s,o,r,a){this._forceIntegerValues=e,this._forceIntegerValues&&(t=t|0,n=n|0,s=s|0,o=o|0,r=r|0,a=a|0),this.rawScrollLeft=s,this.rawScrollTop=a,t<0&&(t=0),s+t>n&&(s=n-t),s<0&&(s=0),o<0&&(o=0),a+o>r&&(a=r-o),a<0&&(a=0),this.width=t,this.scrollWidth=n,this.scrollLeft=s,this.height=o,this.scrollHeight=r,this.scrollTop=a}static{am(this,"ScrollState")}_scrollStateBrand=void 0;rawScrollLeft;rawScrollTop;width;scrollWidth;scrollLeft;height;scrollHeight;scrollTop;equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new ax(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new ax(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,s=this.scrollWidth!==e.scrollWidth,o=this.scrollLeft!==e.scrollLeft,r=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:s,scrollLeftChanged:o,heightChanged:r,scrollHeightChanged:a,scrollTopChanged:l}}}class qL extends ${static{am(this,"Scrollable")}_scrollableBrand=void 0;_smoothScrollDuration;_scheduleAtNextAnimationFrame;_state;_smoothScrolling;_onScroll=this._register(new x);onScroll=this._onScroll.event;constructor(e){super(),this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new ax(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let s;t?s=new cE(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=cE.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}class D8{static{am(this,"SmoothScrollingUpdate")}scrollLeft;scrollTop;isDone;constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}function pT(i,e){const t=e-i;return function(n){return i+t*DY(n)}}am(pT,"createEaseOutCubic");function EY(i,e,t){return function(n){return n<t?i(n/t):e((n-t)/(1-t))}}am(EY,"createComposed");class cE{static{am(this,"SmoothScrollingOperation")}from;to;duration;startTime;animationFrameDisposable;scrollLeft;scrollTop;constructor(e,t,n,s){this.from=e,this.to=t,this.duration=s,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let o,r;return e<t?(o=e+.75*n,r=t-.75*n):(o=e-.75*n,r=t+.75*n),EY(pT(e,o),pT(r,t),.33)}return pT(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),s=this.scrollTop(t);return new D8(n,s,!1)}return new D8(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return cE.start(e,t,n)}static start(e,t,n){n=n+10;const s=Date.now()-10;return new cE(e,t,s,n)}}function LY(i){return Math.pow(i,3)}am(LY,"easeInCubic");function DY(i){return 1-LY(1-i)}am(DY,"easeOutCubic");const r_=new class{_zoomLevel=0;_onDidChangeZoomLevel=new x;onDidChangeZoomLevel=this._onDidChangeZoomLevel.event;getZoomLevel(){return this._zoomLevel}setZoomLevel(i){i=Math.min(Math.max(-5,i),20),this._zoomLevel!==i&&(this._zoomLevel=i,this._onDidChangeZoomLevel.fire(this._zoomLevel))}};var Eve=Object.defineProperty,IY=(i,e)=>Eve(i,"name",{value:e,configurable:!0});const Lve=Ue?1.5:1.35,LO=8;class wp{static{IY(this,"BareFontInfo")}_bareFontInfoBrand=void 0;static createFromValidatedSettings(e,t,n){const s=e.get(k.fontFamily),o=e.get(k.fontWeight),r=e.get(k.fontSize),a=e.get(k.fontLigatures),l=e.get(k.fontVariations),c=e.get(k.lineHeight),d=e.get(k.letterSpacing);return wp._create(s,o,r,a,l,c,d,t,n)}static createFromRawSettings(e,t,n=!1){const s=Ku.fontFamily.validate(e.fontFamily),o=Ku.fontWeight.validate(e.fontWeight),r=Ku.fontSize.validate(e.fontSize),a=Ku.fontLigatures2.validate(e.fontLigatures),l=Ku.fontVariations.validate(e.fontVariations),c=Ku.lineHeight.validate(e.lineHeight),d=Ku.letterSpacing.validate(e.letterSpacing);return wp._create(s,o,r,a,l,c,d,t,n)}static _create(e,t,n,s,o,r,a,l,c){r===0?r=Lve*n:r<LO&&(r=r*n),r=Math.round(r),r<LO&&(r=LO);const d=1+(c?0:r_.getZoomLevel()*.1);return n*=d,r*=d,o===og.TRANSLATE&&(t==="normal"||t==="bold"?o=og.OFF:(o=`'wght' ${parseInt(t,10)}`,t="normal")),new wp({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:s,fontVariationSettings:o,lineHeight:r,letterSpacing:a})}pixelRatio;fontFamily;fontWeight;fontSize;fontFeatureSettings;fontVariationSettings;lineHeight;letterSpacing;constructor(e){this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=Kl.fontFamily,t=wp._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const TY=2;class DO extends wp{static{IY(this,"FontInfo")}_editorStylingBrand=void 0;version=TY;isTrusted;isMonospace;typicalHalfwidthCharacterWidth;typicalFullwidthCharacterWidth;canUseHalfwidthRightwardsArrow;spaceWidth;middotWidth;wsmiddotWidth;maxDigitWidth;constructor(e,t){super(e),this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}const Gf={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var Dve=Object.defineProperty,YL=(i,e)=>Dve(i,"name",{value:e,configurable:!0});const AY="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function xY(i=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of AY)i.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}YL(xY,"createWordRegExp");const wH=xY();function hP(i){let e=wH;if(i&&i instanceof RegExp)if(i.global)e=i;else{let t="g";i.ignoreCase&&(t+="i"),i.multiline&&(t+="m"),i.unicode&&(t+="u"),e=new RegExp(i.source,t)}return e.lastIndex=0,e}YL(hP,"ensureValidWordDefinition");const CH=new ru;CH.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function Ive(i){const e=CH.unshift(i);return ye(e)}YL(Ive,"setDefaultGetWordAtTextConfig");function dE(i,e,t,n,s){if(e=hP(e),s||(s=Zt.first(CH)),t.length>s.maxLen){let c=i-s.maxLen/2;return c<0?c=0:n+=c,t=t.substring(c,i+s.maxLen/2),dE(i,e,t,n,s)}const o=Date.now(),r=i-1-n;let a=-1,l=null;for(let c=1;!(Date.now()-o>=s.timeBudget);c++){const d=r-s.windowSize*c;e.lastIndex=Math.max(0,d);const h=kY(e,t,r,a);if(!h&&l||(l=h,d<=0))break;a=d}if(l){const c={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,c}return null}YL(dE,"getWordAtText");function kY(i,e,t,n){let s;for(;s=i.exec(e);){const o=s.index||0;if(o<=t&&i.lastIndex>=t)return s;if(n>0&&o>n)return null}return null}YL(kY,"_findRegexMatchEnclosingPosition");var Tve=Object.defineProperty,Ave=(i,e)=>Tve(i,"name",{value:e,configurable:!0});const hf=De("accessibilityService");var rr=(i=>(i[i.Unknown=0]="Unknown",i[i.Disabled=1]="Disabled",i[i.Enabled=2]="Enabled",i))(rr||{});new ie("accessibilityModeEnabled",!1);function xve(i){return i&&typeof i=="object"&&typeof i.label=="string"&&(typeof i.role>"u"||typeof i.role=="string")}Ave(xve,"isAccessibilityInformation");const kve="ACCESSIBLE_VIEW_SHOWN_";var Nve=Object.defineProperty,Bb=(i,e)=>Nve(i,"name",{value:e,configurable:!0});class Pve{static{Bb(this,"StringIterator")}_value="";_pos=0;reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}class Rve{constructor(e=!0){this._caseSensitive=e}static{Bb(this,"ConfigKeysIterator")}_value;_from;_to;reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===A.Period)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?ON(e,this._value,0,e.length,this._from,this._to):Hy(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class NY{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}static{Bb(this,"PathIterator")}_value;_valueLen;_from;_to;reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const n=this._value.charCodeAt(t);if(!(n===A.Slash||this._splitOnBackslash&&n===A.Backslash))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===A.Slash||this._splitOnBackslash&&t===A.Backslash)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?ON(e,this._value,0,e.length,this._from,this._to):Hy(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Ove{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t}static{Bb(this,"UriIterator")}_pathIterator;_value;_states=[];_stateIdx=0;reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new NY(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return MA(e,this._value.scheme);if(this._states[this._stateIdx]===2)return MA(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return OA(e,this._value.query);if(this._states[this._stateIdx]===5)return OA(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class nI{static{Bb(this,"TernarySearchTreeNode")}height=1;segment;value;key;left;mid;right;isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}class jh{static{Bb(this,"TernarySearchTree")}static forUris(e=()=>!1,t=()=>!1){return new jh(new Ove(e,t))}static forPaths(e=!1){return new jh(new NY(void 0,!e))}static forStrings(){return new jh(new Pve)}static forConfigKeys(){return new jh(new Rve)}_iter;_root;constructor(e){this._iter=e}clear(){this._root=void 0}fill(e,t){if(t){const n=t.slice(0);NM(n);for(const s of n)this.set(s,e)}else{const n=e.slice(0);NM(n);for(const s of n)this.set(s[0],s[1])}}set(e,t){const n=this._iter.reset(e);let s;this._root||(this._root=new nI,this._root.segment=n.value());const o=[];for(s=this._root;;){const a=n.cmp(s.segment);if(a>0)s.left||(s.left=new nI,s.left.segment=n.value()),o.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new nI,s.right.segment=n.value()),o.push([1,s]),s=s.right;else if(n.hasNext())n.next(),s.mid||(s.mid=new nI,s.mid.segment=n.value()),o.push([0,s]),s=s.mid;else break}const r=s.value;s.value=t,s.key=e;for(let a=o.length-1;a>=0;a--){const l=o[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const d=o[a][0],h=o[a+1][0];if(d===1&&h===1)o[a][1]=l.rotateLeft();else if(d===-1&&h===-1)o[a][1]=l.rotateRight();else if(d===1&&h===-1)l.right=o[a+1][1]=o[a+1][1].rotateRight(),o[a][1]=l.rotateLeft();else if(d===-1&&h===1)l.left=o[a+1][1]=o[a+1][1].rotateLeft(),o[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}return r}get(e){return this._getNode(e)?.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!(t?.value===void 0&&t?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const n=this._iter.reset(e),s=[];let o=this._root;for(;o;){const r=n.cmp(o.segment);if(r>0)s.push([-1,o]),o=o.left;else if(r<0)s.push([1,o]),o=o.right;else if(n.hasNext())n.next(),s.push([0,o]),o=o.mid;else break}if(o){if(t?(o.left=void 0,o.mid=void 0,o.right=void 0,o.height=1):(o.key=void 0,o.value=void 0),!o.mid&&!o.value)if(o.left&&o.right){const r=this._min(o.right);if(r.key){const{key:a,value:l,segment:c}=r;this._delete(r.key,!1),o.key=a,o.value=l,o.segment=c}}else{const r=o.left??o.right;if(s.length>0){const[a,l]=s[s.length-1];switch(a){case-1:l.left=r;break;case 0:l.mid=r;break;case 1:l.right=r;break}}else this._root=r}for(let r=s.length-1;r>=0;r--){const a=s[r][1];a.updateHeight();const l=a.balanceFactor();if(l>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),s[r][1]=a.rotateLeft()):l<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),s[r][1]=a.rotateRight()),r>0)switch(s[r-1][0]){case-1:s[r-1][1].left=s[r][1];break;case 1:s[r-1][1].right=s[r][1];break;case 0:s[r-1][1].mid=s[r][1];break}else this._root=s[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,s;for(;n;){const o=t.cmp(n.segment);if(o>0)n=n.left;else if(o<0)n=n.right;else if(t.hasNext())t.next(),s=n.value||s,n=n.mid;else break}return n&&n.value||s}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const n=this._iter.reset(e);let s=this._root;for(;s;){const o=n.cmp(s.segment);if(o>0)s=s.left;else if(o<0)s=s.right;else if(n.hasNext())n.next(),s=s.mid;else return s.mid?this._entries(s.mid):t?s.value:void 0}}hasElementOrSubtree(e){return this._findSuperstrOrElement(e,!0)!==void 0}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}_isBalanced(){const e=Bb(t=>{if(!t)return!0;const n=t.balanceFactor();return n<-1||n>1?!1:e(t.left)&&e(t.right)},"nodeIsBalanced");return e(this._root)}}var Mve=Object.defineProperty,Pa=(i,e)=>Mve(i,"name",{value:e,configurable:!0});const po=De("contextService");function G1(i){const e=i;return typeof e?.id=="string"&&ne.isUri(e.uri)}Pa(G1,"isSingleFolderWorkspaceIdentifier");function Bve(i){return typeof i?.id=="string"&&!G1(i)&&!K1(i)}Pa(Bve,"isEmptyWorkspaceIdentifier");const Fve={id:"ext-dev"},Vve={id:"empty-window"};function Wve(i,e){if(typeof i=="string"||typeof i>"u")return typeof i=="string"?{id:EN(i)}:e?Fve:Vve;const t=i;return t.configuration?{id:t.id,configPath:t.configuration}:t.folders.length===1?{id:t.id,uri:t.folders[0].uri}:{id:t.id}}Pa(Wve,"toWorkspaceIdentifier");function K1(i){const e=i;return typeof e?.id=="string"&&ne.isUri(e.configPath)}Pa(K1,"isWorkspaceIdentifier");function Hve(i){const e=i;if(e?.uri)return{id:e.id,uri:ne.revive(e.uri)};const t=i;if(t?.configPath)return{id:t.id,configPath:ne.revive(t.configPath)};if(i?.id)return{id:i.id}}Pa(Hve,"reviveIdentifier");var Mc=(i=>(i[i.EMPTY=1]="EMPTY",i[i.FOLDER=2]="FOLDER",i[i.WORKSPACE=3]="WORKSPACE",i))(Mc||{});function lx(i){const e=i;return!!(e&&typeof e=="object"&&typeof e.id=="string"&&Array.isArray(e.folders))}Pa(lx,"isWorkspace");function au(i){const e=i;return!!(e&&typeof e=="object"&&ne.isUri(e.uri)&&typeof e.name=="string"&&typeof e.toResource=="function")}Pa(au,"isWorkspaceFolder");class Zze{constructor(e,t,n,s,o){this._id=e,this._transient=n,this._configuration=s,this._ignorePathCasing=o,this.folders=t}static{Pa(this,"Workspace")}_foldersMap=jh.forUris(this._ignorePathCasing,()=>!0);_folders;update(e){this._id=e.id,this._configuration=e.configuration,this._transient=e.transient,this._ignorePathCasing=e._ignorePathCasing,this.folders=e.folders}get folders(){return this._folders}set folders(e){this._folders=e,this.updateFoldersMap()}get id(){return this._id}get transient(){return this._transient}get configuration(){return this._configuration}set configuration(e){this._configuration=e}getFolder(e){return e&&this._foldersMap.findSubstr(e)||null}updateFoldersMap(){this._foldersMap=jh.forUris(this._ignorePathCasing,()=>!0);for(const e of this.folders)this._foldersMap.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}}class PY{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}static{Pa(this,"WorkspaceFolder")}uri;name;index;toResource(e){return Ti(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}function Uve(i){return new PY({uri:i,index:0,name:b5(i)},{uri:i.toString()})}Pa(Uve,"toWorkspaceFolder");const RY="code-workspace",zve=`.${RY}`;g("codeWorkspace","Code Workspace");function OY(i,e){return Mge.isEqualOrParent(i,e.untitledWorkspacesHome)}Pa(OY,"isUntitledWorkspace");function ZL(i){let e;return ne.isUri(i)?e=i:e=i.configuration,e?.scheme===Ve.tmp}Pa(ZL,"isTemporaryWorkspace");const $ve="4064f6ec-cb38-4ad0-af64-ee6467e63c82";function Gve(i){return i.id===$ve}Pa(Gve,"isStandaloneEditorWorkspace");function Kve(i,e){return!OY(i,e)&&!ZL(i)}Pa(Kve,"isSavedWorkspace");function MY(i){return(typeof i=="string"?LL(i):v5(i))===zve}Pa(MY,"hasWorkspaceFileExtension");var jve=Object.defineProperty,qc=(i,e)=>jve(i,"name",{value:e,configurable:!0});const Pe=De("configurationService");function qve(i){return i&&typeof i=="object"&&(!i.overrideIdentifier||typeof i.overrideIdentifier=="string")&&(!i.resource||i.resource instanceof ne)}qc(qve,"isConfigurationOverrides");function Yve(i){return i&&typeof i=="object"&&(!i.overrideIdentifiers||Array.isArray(i.overrideIdentifiers))&&!i.overrideIdentifier&&(!i.resource||i.resource instanceof ne)}qc(Yve,"isConfigurationUpdateOverrides");var Ca=(i=>(i[i.APPLICATION=1]="APPLICATION",i[i.USER=2]="USER",i[i.USER_LOCAL=3]="USER_LOCAL",i[i.USER_REMOTE=4]="USER_REMOTE",i[i.WORKSPACE=5]="WORKSPACE",i[i.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",i[i.DEFAULT=7]="DEFAULT",i[i.MEMORY=8]="MEMORY",i))(Ca||{});function Zve(i){switch(i){case 1:return"APPLICATION";case 2:return"USER";case 3:return"USER_LOCAL";case 4:return"USER_REMOTE";case 5:return"WORKSPACE";case 6:return"WORKSPACE_FOLDER";case 7:return"DEFAULT";case 8:return"MEMORY"}}qc(Zve,"ConfigurationTargetToString");function Xve(i){return i.applicationValue!==void 0||i.userValue!==void 0||i.userLocalValue!==void 0||i.userRemoteValue!==void 0||i.workspaceValue!==void 0||i.workspaceFolderValue!==void 0}qc(Xve,"isConfigured");function Qve(i,e){const t=Object.create(null);for(const n in i)BY(t,n,i[n],e);return t}qc(Qve,"toValuesTree");function BY(i,e,t,n){const s=e.split("."),o=s.pop();let r=i;for(let a=0;a<s.length;a++){const l=s[a];let c=r[l];switch(typeof c){case"undefined":c=r[l]=Object.create(null);break;case"object":if(c===null){n(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:n(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}r=c}if(typeof r=="object"&&r!==null)try{r[o]=t}catch{n(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(r)}`)}else n(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(r)}`)}qc(BY,"addToValueTree");function Jve(i,e){const t=e.split(".");yH(i,t)}qc(Jve,"removeFromValueTree");function yH(i,e){const t=e.shift();if(e.length===0){delete i[t];return}if(Object.keys(i).indexOf(t)!==-1){const n=i[t];typeof n=="object"&&!Array.isArray(n)&&(yH(n,e),Object.keys(n).length===0&&delete i[t])}}qc(yH,"doRemoveFromValueTree");function ewe(i,e,t){function n(r,a){let l=r;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}qc(n,"accessSetting");const s=e.split("."),o=n(i,s);return typeof o>"u"?t:o}qc(ewe,"getConfigurationValue");function FY(i,e,t){Object.keys(e).forEach(n=>{n!=="__proto__"&&(n in i?On(i[n])&&On(e[n])?FY(i[n],e[n],t):t&&(i[n]=e[n]):i[n]=e[n])})}qc(FY,"merge");function VY(i){return i.replace(/[\[\]]/g,"")}qc(VY,"getLanguageTagSettingPlainKey");var twe=Object.defineProperty,WY=(i,e)=>twe(i,"name",{value:e,configurable:!0});De("policy");class Xze extends ${static{WY(this,"AbstractPolicyService")}_serviceBrand;policyDefinitions={};policies=new Map;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;async updatePolicyDefinitions(e){const t=Object.keys(this.policyDefinitions).length;return this.policyDefinitions={...e,...this.policyDefinitions},t!==Object.keys(this.policyDefinitions).length&&await this._updatePolicyDefinitions(e),Zt.reduce(this.policies.entries(),(n,[s,o])=>({...n,[s]:o}),{})}getPolicyValue(e){return this.policies.get(e)}serialize(){return Zt.reduce(Object.entries(this.policyDefinitions),(e,[t,n])=>({...e,[t]:{definition:n,value:this.policies.get(t)}}),{})}}class Qze{static{WY(this,"NullPolicyService")}_serviceBrand;onDidChange=H.None;async updatePolicyDefinitions(){return{}}getPolicyValue(){}serialize(){}}var iwe=Object.defineProperty,Xh=(i,e)=>iwe(i,"name",{value:e,configurable:!0});const uf={Configuration:"base.contributions.configuration"};var vt=(i=>(i[i.APPLICATION=1]="APPLICATION",i[i.MACHINE=2]="MACHINE",i[i.WINDOW=3]="WINDOW",i[i.RESOURCE=4]="RESOURCE",i[i.LANGUAGE_OVERRIDABLE=5]="LANGUAGE_OVERRIDABLE",i[i.MACHINE_OVERRIDABLE=6]="MACHINE_OVERRIDABLE",i))(vt||{});const sI={properties:{},patternProperties:{}},oI={properties:{},patternProperties:{}},rI={properties:{},patternProperties:{}},aI={properties:{},patternProperties:{}},lI={properties:{},patternProperties:{}},OS={properties:{},patternProperties:{}},Im="vscode://schemas/settings/resourceLanguage",cI=Xt.as(PL.JSONContribution);class nwe{static{Xh(this,"ConfigurationRegistry")}registeredConfigurationDefaults=[];configurationDefaultsOverrides;defaultLanguageConfigurationOverridesNode;configurationContributors;configurationProperties;policyConfigurations;excludedConfigurationProperties;resourceLanguageSettingsSchema;overrideIdentifiers=new Set;_onDidSchemaChange=new x;onDidSchemaChange=this._onDidSchemaChange.event;_onDidUpdateConfiguration=new x;onDidUpdateConfiguration=this._onDidUpdateConfiguration.event;constructor(){this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:g("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},cI.registerSchema(Im,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=new Set;this.doRegisterConfigurations(e,t,n),cI.registerSchema(Im,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}deregisterConfigurations(e){const t=new Set;this.doDeregisterConfigurations(e,t),cI.registerSchema(Im,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t})}updateConfigurations({add:e,remove:t}){const n=new Set;this.doDeregisterConfigurations(t,n),this.doRegisterConfigurations(e,!1,n),cI.registerSchema(Im,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);const n=[];for(const{overrides:s,source:o}of e)for(const r in s){t.add(r);const a=this.configurationDefaultsOverrides.get(r)??this.configurationDefaultsOverrides.set(r,{configurationDefaultOverrides:[]}).get(r),l=s[r];if(a.configurationDefaultOverrides.push({value:l,source:o}),Rp.test(r)){const c=this.mergeDefaultConfigurationsForOverrideIdentifier(r,l,o,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c,this.updateDefaultOverrideProperty(r,c,o),n.push(...UY(r))}else{const c=this.mergeDefaultConfigurationsForConfigurationProperty(r,l,o,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c;const d=this.configurationProperties[r];d&&(this.updatePropertyDefaultValue(r,d),this.updateSchema(r,d))}}this.doRegisterOverrideIdentifiers(n)}deregisterDefaultConfigurations(e){const t=new Set;this.doDeregisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doDeregisterDefaultConfigurations(e,t){for(const n of e){const s=this.registeredConfigurationDefaults.indexOf(n);s!==-1&&this.registeredConfigurationDefaults.splice(s,1)}for(const{overrides:n,source:s}of e)for(const o in n){const r=this.configurationDefaultsOverrides.get(o);if(!r)continue;const a=r.configurationDefaultOverrides.findIndex(l=>s?l.source?.id===s.id:l.value===n[o]);if(a!==-1){if(r.configurationDefaultOverrides.splice(a,1),r.configurationDefaultOverrides.length===0&&this.configurationDefaultsOverrides.delete(o),Rp.test(o)){let l;for(const c of r.configurationDefaultOverrides)l=this.mergeDefaultConfigurationsForOverrideIdentifier(o,c.value,c.source,l);l&&!R0(l.value)?(r.configurationDefaultOverrideValue=l,this.updateDefaultOverrideProperty(o,l,s)):(this.configurationDefaultsOverrides.delete(o),delete this.configurationProperties[o],delete this.defaultLanguageConfigurationOverridesNode.properties[o])}else{let l;for(const d of r.configurationDefaultOverrides)l=this.mergeDefaultConfigurationsForConfigurationProperty(o,d.value,d.source,l);r.configurationDefaultOverrideValue=l;const c=this.configurationProperties[o];c&&(this.updatePropertyDefaultValue(o,c),this.updateSchema(o,c))}t.add(o)}}this.updateOverridePropertyPatternKey()}updateDefaultOverrideProperty(e,t,n){const s={type:"object",default:t.value,description:g("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",VY(e)),$ref:Im,defaultDefaultValue:t.value,source:n,defaultValueSource:n};this.configurationProperties[e]=s,this.defaultLanguageConfigurationOverridesNode.properties[e]=s}mergeDefaultConfigurationsForOverrideIdentifier(e,t,n,s){const o=s?.value||{},r=s?.source??new Map;if(!(r instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const a of Object.keys(t)){const l=t[a];if(On(l)&&(oo(o[a])||On(o[a]))){if(o[a]={...o[a]??{},...l},n)for(const d in l)r.set(`${a}.${d}`,n)}else o[a]=l,n?r.set(a,n):r.delete(a)}return{value:o,source:r}}mergeDefaultConfigurationsForConfigurationProperty(e,t,n,s){const o=this.configurationProperties[e],r=s?.value??o?.defaultDefaultValue;let a=n;if(On(t)&&(o!==void 0&&o.type==="object"||o===void 0&&(oo(r)||On(r)))){if(a=s?.source??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)n&&a.set(`${e}.${c}`,n);t={...On(r)?r:{},...t}}return{value:t,source:a}}deltaConfiguration(e){let t=!1;const n=new Set;e.removedDefaults&&(this.doDeregisterDefaultConfigurations(e.removedDefaults,n),t=!0),e.addedDefaults&&(this.doRegisterDefaultConfigurations(e.addedDefaults,n),t=!0),e.removedConfigurations&&this.doDeregisterConfigurations(e.removedConfigurations,n),e.addedConfigurations&&this.doRegisterConfigurations(e.addedConfigurations,!1,n),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,n){e.forEach(s=>{this.validateAndRegisterProperties(s,t,s.extensionInfo,s.restrictedProperties,void 0,n),this.configurationContributors.push(s),this.registerJSONConfiguration(s)})}doDeregisterConfigurations(e,t){const n=Xh(s=>{if(s.properties)for(const o in s.properties){t.add(o);const r=this.configurationProperties[o];r?.policy?.name&&this.policyConfigurations.delete(r.policy.name),delete this.configurationProperties[o],this.removeFromSchema(o,s.properties[o])}s.allOf?.forEach(o=>n(o))},"deregisterConfiguration");for(const s of e){n(s);const o=this.configurationContributors.indexOf(s);o!==-1&&this.configurationContributors.splice(o,1)}}validateAndRegisterProperties(e,t=!0,n,s,o=3,r){o=Ls(e.scope)?o:e.scope;const a=e.properties;if(a)for(const c in a){const d=a[c];if(t&&$Y(c,d)){delete a[c];continue}if(d.source=n,d.defaultDefaultValue=a[c].default,this.updatePropertyDefaultValue(c,d),Rp.test(c)?d.scope=void 0:(d.scope=Ls(d.scope)?o:d.scope,d.restricted=Ls(d.restricted)?!!s?.includes(c):d.restricted),a[c].hasOwnProperty("included")&&!a[c].included){this.excludedConfigurationProperties[c]=a[c],delete a[c];continue}else this.configurationProperties[c]=a[c],a[c].policy?.name&&this.policyConfigurations.set(a[c].policy.name,c);!a[c].deprecationMessage&&a[c].markdownDeprecationMessage&&(a[c].deprecationMessage=a[c].markdownDeprecationMessage),r.add(c)}const l=e.allOf;if(l)for(const c of l)this.validateAndRegisterProperties(c,t,n,s,o,r)}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}getRegisteredDefaultConfigurations(){return[...this.registeredConfigurationDefaults]}getConfigurationDefaultsOverrides(){const e=new Map;for(const[t,n]of this.configurationDefaultsOverrides)n.configurationDefaultOverrideValue&&e.set(t,n.configurationDefaultOverrideValue);return e}registerJSONConfiguration(e){const t=Xh(n=>{const s=n.properties;if(s)for(const r in s)this.updateSchema(r,s[r]);n.allOf?.forEach(t)},"register");t(e)}updateSchema(e,t){switch(sI.properties[e]=t,t.scope){case 1:oI.properties[e]=t;break;case 2:rI.properties[e]=t;break;case 6:aI.properties[e]=t;break;case 3:lI.properties[e]=t;break;case 4:OS.properties[e]=t;break;case 5:OS.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t;break}}removeFromSchema(e,t){switch(delete sI.properties[e],t.scope){case 1:delete oI.properties[e];break;case 2:delete rI.properties[e];break;case 6:delete aI.properties[e];break;case 3:delete lI.properties[e];break;case 4:case 5:delete OS.properties[e],delete this.resourceLanguageSettingsSchema.properties[e];break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:g("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:g("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Im};this.updatePropertyDefaultValue(t,n),sI.properties[t]=n,oI.properties[t]=n,rI.properties[t]=n,aI.properties[t]=n,lI.properties[t]=n,OS.properties[t]=n}}registerOverridePropertyPatternKey(){const e={type:"object",description:g("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:g("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Im};sI.patternProperties[Um]=e,oI.patternProperties[Um]=e,rI.patternProperties[Um]=e,aI.patternProperties[Um]=e,lI.patternProperties[Um]=e,OS.patternProperties[Um]=e,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const n=this.configurationDefaultsOverrides.get(e)?.configurationDefaultOverrideValue;let s,o;n&&(!t.disallowConfigurationDefault||!n.source)&&(s=n.value,o=n.source),oo(s)&&(s=t.defaultDefaultValue,o=void 0),oo(s)&&(s=zY(t.type)),t.default=s,t.defaultValueSource=o}}const HY="\\[([^\\]]+)\\]",I8=new RegExp(HY,"g"),Um=`^(${HY})+$`,Rp=new RegExp(Um);function UY(i){const e=[];if(Rp.test(i)){let t=I8.exec(i);for(;t?.length;){const n=t[1].trim();n&&e.push(n),t=I8.exec(i)}}return yb(e)}Xh(UY,"overrideIdentifiersFromKey");function swe(i){return i.reduce((e,t)=>`${e}[${t}]`,"")}Xh(swe,"keyFromOverrideIdentifiers");function zY(i){switch(Array.isArray(i)?i[0]:i){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}Xh(zY,"getDefaultValue");const j1=new nwe;Xt.add(uf.Configuration,j1);function $Y(i,e){return i.trim()?Rp.test(i)?g("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",i):j1.getConfigurationProperties()[i]!==void 0?g("config.property.duplicate","Cannot register '{0}'. This property is already registered.",i):e.policy?.name&&j1.getPolicyConfigurations().get(e.policy?.name)!==void 0?g("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",i,e.policy?.name,j1.getPolicyConfigurations().get(e.policy?.name)):null:g("config.property.empty","Cannot register an empty property")}Xh($Y,"validateProperty");function owe(){const i=[],e=j1.getConfigurationProperties();for(const t of Object.keys(e))i.push([t,e[t].scope]);return i.push(["launch",4]),i.push(["task",4]),i}Xh(owe,"getScopes");function GY(i){const e={};for(const t of i){const n=t.properties;if(On(n))for(const s in n)e[s]=n[s];t.allOf&&Object.assign(e,GY(t.allOf))}return e}Xh(GY,"getAllConfigurationProperties");function rwe(i){switch(i){case"application":return 1;case"machine":return 2;case"resource":return 4;case"machine-overridable":return 6;case"language-overridable":return 5;default:return 3}}Xh(rwe,"parseScope");var awe=Object.defineProperty,st=(i,e)=>awe(i,"name",{value:e,configurable:!0}),Bc=(i=>(i[i.None=0]="None",i[i.Keep=1]="Keep",i[i.Brackets=2]="Brackets",i[i.Advanced=3]="Advanced",i[i.Full=4]="Full",i))(Bc||{});const Ah=8;class lwe{static{st(this,"ConfigurationChangedEvent")}_values;constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class KY{static{st(this,"ComputeOptionsMemory")}stableMinimapLayoutInput;stableFitMaxMinimapScale;stableFitRemainingWidth;constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class Ki{static{st(this,"BaseEditorOption")}id;name;defaultValue;schema;constructor(e,t,n,s){this.id=e,this.name=t,this.defaultValue=n,this.schema=s}applyUpdate(e,t){return XL(e,t)}compute(e,t,n){return n}}class mT{constructor(e,t){this.newValue=e,this.didChange=t}static{st(this,"ApplyUpdateResult")}}function XL(i,e){if(typeof i!="object"||typeof e!="object"||!i||!e)return new mT(e,i!==e);if(Array.isArray(i)||Array.isArray(e)){const n=Array.isArray(i)&&Array.isArray(e)&&ks(i,e);return new mT(e,!n)}let t=!1;for(const n in e)if(e.hasOwnProperty(n)){const s=XL(i[n],e[n]);s.didChange&&(i[n]=s.newValue,t=!0)}return new mT(i,t)}st(XL,"applyUpdate");class QL{static{st(this,"ComputedEditorOption")}id;name;defaultValue;schema=void 0;constructor(e){this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return XL(e,t)}validate(e){return this.defaultValue}}class iS{static{st(this,"SimpleEditorOption")}id;name;defaultValue;schema;constructor(e,t,n,s){this.id=e,this.name=t,this.defaultValue=n,this.schema=s}applyUpdate(e,t){return XL(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}function xe(i,e){return typeof i>"u"?e:i==="false"?!1:!!i}st(xe,"boolean");class At extends iS{static{st(this,"EditorBooleanOption")}constructor(e,t,n,s=void 0){typeof s<"u"&&(s.type="boolean",s.default=n),super(e,t,n,s)}validate(e){return xe(e,this.defaultValue)}}function Kf(i,e,t,n){if(typeof i>"u")return e;let s=parseInt(i,10);return isNaN(s)?e:(s=Math.max(t,s),s=Math.min(n,s),s|0)}st(Kf,"clampedInt");class wi extends iS{static{st(this,"EditorIntOption")}static clampedInt(e,t,n,s){return Kf(e,t,n,s)}minimum;maximum;constructor(e,t,n,s,o,r=void 0){typeof r<"u"&&(r.type="integer",r.default=n,r.minimum=s,r.maximum=o),super(e,t,n,r),this.minimum=s,this.maximum=o}validate(e){return wi.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function jY(i,e,t,n){if(typeof i>"u")return e;const s=Za.float(i,e);return Za.clamp(s,t,n)}st(jY,"clampedFloat");class Za extends iS{static{st(this,"EditorFloatOption")}static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}validationFn;constructor(e,t,n,s,o){typeof o<"u"&&(o.type="number",o.default=n),super(e,t,n,o),this.validationFn=s}validate(e){return this.validationFn(Za.float(e,this.defaultValue))}}class or extends iS{static{st(this,"EditorStringOption")}static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,s=void 0){typeof s<"u"&&(s.type="string",s.default=n),super(e,t,n,s)}validate(e){return or.string(e,this.defaultValue)}}function ln(i,e,t,n){return typeof i!="string"?e:n&&i in n?n[i]:t.indexOf(i)===-1?e:i}st(ln,"stringSet");class rn extends iS{static{st(this,"EditorStringEnumOption")}_allowedValues;constructor(e,t,n,s,o=void 0){typeof o<"u"&&(o.type="string",o.enum=s,o.default=n),super(e,t,n,o),this._allowedValues=s}validate(e){return ln(e,this.defaultValue,this._allowedValues)}}class dI extends Ki{static{st(this,"EditorEnumOption")}_allowedValues;_convert;constructor(e,t,n,s,o,r,a=void 0){typeof a<"u"&&(a.type="string",a.enum=o,a.default=s),super(e,t,n,a),this._allowedValues=o,this._convert=r}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function qY(i){switch(i){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}st(qY,"_autoIndentFromString");class cwe extends Ki{static{st(this,"EditorAccessibilitySupport")}constructor(){super(2,"accessibilitySupport",rr.Unknown,{type:"string",enum:["auto","on","off"],enumDescriptions:[g("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),g("accessibilitySupport.on","Optimize for usage with a Screen Reader."),g("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:g("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return rr.Unknown;case"off":return rr.Disabled;case"on":return rr.Enabled}return this.defaultValue}compute(e,t,n){return n===rr.Unknown?e.accessibilitySupport:n}}class dwe extends Ki{static{st(this,"EditorComments")}constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:g("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:g("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:xe(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:xe(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}var _c=(i=>(i[i.Hidden=0]="Hidden",i[i.Blink=1]="Blink",i[i.Smooth=2]="Smooth",i[i.Phase=3]="Phase",i[i.Expand=4]="Expand",i[i.Solid=5]="Solid",i))(_c||{});function YY(i){switch(i){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}st(YY,"_cursorBlinkingStyleFromString");var Tl=(i=>(i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin",i))(Tl||{});function hwe(i){switch(i){case 1:return"line";case 2:return"block";case 3:return"underline";case 4:return"line-thin";case 5:return"block-outline";case 6:return"underline-thin"}}st(hwe,"cursorStyleToString");function ZY(i){switch(i){case"line":return 1;case"block":return 2;case"underline":return 3;case"line-thin":return 4;case"block-outline":return 5;case"underline-thin":return 6}}st(ZY,"_cursorStyleFromString");class uwe extends QL{static{st(this,"EditorClassName")}constructor(){super(145)}compute(e,t,n){const s=["monaco-editor"];return t.get(41)&&s.push(t.get(41)),e.extraEditorClassName&&s.push(e.extraEditorClassName),t.get(76)==="default"?s.push("mouse-default"):t.get(76)==="copy"&&s.push("mouse-copy"),t.get(114)&&s.push("showUnused"),t.get(143)&&s.push("showDeprecated"),s.join(" ")}}class gwe extends At{static{st(this,"EditorEmptySelectionClipboard")}constructor(){super(38,"emptySelectionClipboard",!0,{description:g("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}class fwe extends Ki{static{st(this,"EditorFind")}constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(43,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:g("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[g("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),g("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),g("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:g("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[g("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),g("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),g("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:g("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:g("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Ue},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:g("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:g("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:xe(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":ln(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":ln(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:xe(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:xe(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:xe(t.loop,this.defaultValue.loop)}}}class kd extends Ki{static{st(this,"EditorFontLigatures")}static OFF='"liga" off, "calt" off';static ON='"liga" on, "calt" on';constructor(){super(53,"fontLigatures",kd.OFF,{anyOf:[{type:"boolean",description:g("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:g("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:g("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?kd.OFF:e==="true"?kd.ON:e:e?kd.ON:kd.OFF}}class og extends Ki{static{st(this,"EditorFontVariations")}static OFF="normal";static TRANSLATE="translate";constructor(){super(56,"fontVariations",og.OFF,{anyOf:[{type:"boolean",description:g("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:g("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:g("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?og.OFF:e==="true"?og.TRANSLATE:e:e?og.TRANSLATE:og.OFF}compute(e,t,n){return e.fontInfo.fontVariationSettings}}class pwe extends QL{static{st(this,"EditorFontInfo")}constructor(){super(52)}compute(e,t,n){return e.fontInfo}}class mwe extends iS{static{st(this,"EditorFontSize")}constructor(){super(54,"fontSize",Kl.fontSize,{type:"number",minimum:6,maximum:100,default:Kl.fontSize,description:g("fontSize","Controls the font size in pixels.")})}validate(e){const t=Za.float(e,this.defaultValue);return t===0?Kl.fontSize:Za.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}class a_ extends Ki{static{st(this,"EditorFontWeight")}static SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];static MINIMUM_VALUE=1;static MAXIMUM_VALUE=1e3;constructor(){super(55,"fontWeight",Kl.fontWeight,{anyOf:[{type:"number",minimum:a_.MINIMUM_VALUE,maximum:a_.MAXIMUM_VALUE,errorMessage:g("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:a_.SUGGESTION_VALUES}],default:Kl.fontWeight,description:g("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(wi.clampedInt(e,Kl.fontWeight,a_.MINIMUM_VALUE,a_.MAXIMUM_VALUE))}}class _we extends Ki{static{st(this,"EditorGoToLocation")}constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[g("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),g("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),g("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(60,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:g("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:g("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:g("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:g("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:g("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:g("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:g("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:g("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:g("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:g("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:g("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:ln(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??ln(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??ln(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??ln(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??ln(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??ln(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??ln(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:or.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:or.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:or.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:or.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:or.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:or.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}class bwe extends Ki{static{st(this,"EditorHover")}constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(62,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:g("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:g("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:g("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:g("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:g("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:xe(t.enabled,this.defaultValue.enabled),delay:wi.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:xe(t.sticky,this.defaultValue.sticky),hidingDelay:wi.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:xe(t.above,this.defaultValue.above)}}}var pw=(i=>(i[i.None=0]="None",i[i.Text=1]="Text",i[i.Blocks=2]="Blocks",i))(pw||{});class qw extends QL{static{st(this,"EditorLayoutInfoComputer")}constructor(){super(148)}compute(e,t,n){return qw.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=Math.floor(e.paddingTop/e.lineHeight);let s=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(s=Math.max(s,t-1));const o=(n+e.viewLineCount+s)/(e.pixelRatio*e.height),r=Math.floor(e.viewLineCount/o);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:n,extraLinesBeyondLastLine:s,desiredRatio:o,minimapLineCount:r}}static _computeMinimapLayout(e,t){const n=e.outerWidth,s=e.outerHeight,o=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(o*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const r=t.stableMinimapLayoutInput,a=r&&e.outerHeight===r.outerHeight&&e.lineHeight===r.lineHeight&&e.typicalHalfwidthCharacterWidth===r.typicalHalfwidthCharacterWidth&&e.pixelRatio===r.pixelRatio&&e.scrollBeyondLastLine===r.scrollBeyondLastLine&&e.paddingTop===r.paddingTop&&e.paddingBottom===r.paddingBottom&&e.minimap.enabled===r.minimap.enabled&&e.minimap.side===r.minimap.side&&e.minimap.size===r.minimap.size&&e.minimap.showSlider===r.minimap.showSlider&&e.minimap.renderCharacters===r.minimap.renderCharacters&&e.minimap.maxColumn===r.minimap.maxColumn&&e.minimap.scale===r.minimap.scale&&e.verticalScrollbarWidth===r.verticalScrollbarWidth&&e.isViewportWrapping===r.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,d=e.scrollBeyondLastLine,h=e.minimap.renderCharacters;let u=o>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,p=e.minimap.size,m=e.minimap.side,_=e.verticalScrollbarWidth,w=e.viewLineCount,v=e.remainingWidth,b=e.isViewportWrapping,C=h?2:3;let S=Math.floor(o*s);const D=S/o;let T=!1,I=!1,R=C*u,G=u/o,K=1;if(p==="fill"||p==="fit"){const{typicalViewportLineCount:ue,extraLinesBeforeFirstLine:fe,extraLinesBeyondLastLine:$e,desiredRatio:Ze,minimapLineCount:Qt}=qw.computeContainedMinimapLineCount({viewLineCount:w,scrollBeyondLastLine:d,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:s,lineHeight:l,pixelRatio:o});if(w/Qt>1)T=!0,I=!0,u=1,R=1,G=u/o;else{let en=!1,as=u+1;if(p==="fit"){const Zo=Math.ceil((fe+w+$e)*R);b&&a&&v<=t.stableFitRemainingWidth?(en=!0,as=t.stableFitMaxMinimapScale):en=Zo>S}if(p==="fill"||en){T=!0;const Zo=u;R=Math.min(l*o,Math.max(1,Math.floor(1/Ze))),b&&a&&v<=t.stableFitRemainingWidth&&(as=t.stableFitMaxMinimapScale),u=Math.min(as,Math.max(1,Math.floor(R/C))),u>Zo&&(K=Math.min(2,u/Zo)),G=u/o/K,S=Math.ceil(Math.max(ue,fe+w+$e)*R),b?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=v,t.stableFitMaxMinimapScale=u):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const X=Math.floor(f*G),we=Math.min(X,Math.max(0,Math.floor((v-_-2)*G/(c+G)))+Ah);let re=Math.floor(o*we);const le=re/o;re=Math.floor(re*K);const Ee=h?1:2,Se=m==="left"?0:n-we-_;return{renderMinimap:Ee,minimapLeft:Se,minimapWidth:we,minimapHeightIsEditorHeight:T,minimapIsSampling:I,minimapScale:u,minimapLineHeight:R,minimapCanvasInnerWidth:re,minimapCanvasInnerHeight:S,minimapCanvasOuterWidth:le,minimapCanvasOuterHeight:D}}static computeLayout(e,t){const n=t.outerWidth|0,s=t.outerHeight|0,o=t.lineHeight|0,r=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,d=t.viewLineCount,h=e.get(140),u=h==="inherit"?e.get(139):h,f=u==="inherit"?e.get(135):u,p=e.get(138),m=t.isDominatedByLongLines,_=e.get(59),w=e.get(70).renderType!==0,v=e.get(71),b=e.get(108),C=e.get(86),S=e.get(75),D=e.get(106),T=D.verticalScrollbarSize,I=D.verticalHasArrows,R=D.arrowSize,G=D.horizontalScrollbarSize,K=e.get(45),X=e.get(113)!=="never";let we=e.get(68);K&&X&&(we+=16);let re=0;if(w){const Mr=Math.max(r,v);re=Math.round(Mr*l)}let le=0;_&&(le=o*t.glyphMarginDecorationLaneCount);let Ee=0,Se=Ee+le,ue=Se+re,fe=ue+we;const $e=n-le-re-we;let Ze=!1,Qt=!1,qt=-1;u==="inherit"&&m?(Ze=!0,Qt=!0):f==="on"||f==="bounded"?Qt=!0:f==="wordWrapColumn"&&(qt=p);const en=qw._computeMinimapLayout({outerWidth:n,outerHeight:s,lineHeight:o,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:b,paddingTop:C.top,paddingBottom:C.bottom,minimap:S,verticalScrollbarWidth:T,viewLineCount:d,remainingWidth:$e,isViewportWrapping:Qt},t.memory||new KY);en.renderMinimap!==0&&en.minimapLeft===0&&(Ee+=en.minimapWidth,Se+=en.minimapWidth,ue+=en.minimapWidth,fe+=en.minimapWidth);const as=$e-en.minimapWidth,Zo=Math.max(1,Math.floor((as-T-2)/a)),Sn=I?R:0;return Qt&&(qt=Math.max(1,Zo),f==="bounded"&&(qt=Math.min(qt,p))),{width:n,height:s,glyphMarginLeft:Ee,glyphMarginWidth:le,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:Se,lineNumbersWidth:re,decorationsLeft:ue,decorationsWidth:we,contentLeft:fe,contentWidth:as,minimap:en,viewportColumn:Zo,isWordWrapMinified:Ze,isViewportWrapping:Qt,wrappingColumn:qt,verticalScrollbarWidth:T,horizontalScrollbarHeight:G,overviewRuler:{top:Sn,width:T,height:s-2*Sn,right:0}}}}class vwe extends Ki{static{st(this,"WrappingStrategy")}constructor(){super(142,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[g("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),g("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:g("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return ln(e,"simple",["simple","advanced"])}compute(e,t,n){return t.get(2)===rr.Enabled?"advanced":n}}class wwe extends Ki{static{st(this,"EditorLightbulb")}constructor(){const e={enabled:"onCode"};super(67,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:["off","onCode","on"],default:e.enabled,enumDescriptions:[g("editor.lightbulb.enabled.off","Disable the code action menu."),g("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),g("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:g("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:ln(e.enabled,this.defaultValue.enabled,["off","onCode","on"])}}}class Cwe extends Ki{static{st(this,"EditorStickyScroll")}constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(118,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:g("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:g("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:g("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:g("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:xe(t.enabled,this.defaultValue.enabled),maxLineCount:wi.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:ln(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:xe(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class ywe extends Ki{static{st(this,"EditorInlayHints")}constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(144,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:g("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[g("editor.inlayHints.on","Inlay hints are enabled"),g("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",Ue?"Ctrl+Option":"Ctrl+Alt"),g("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",Ue?"Ctrl+Option":"Ctrl+Alt"),g("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:g("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:g("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:g("inlayHints.padding","Enables the padding around the inlay hints in the editor.")},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:g("inlayHints.maximumLength","Maximum overall length of inlay hints, for a single line, before they get truncated by the editor. Set to `0` to never truncate")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:ln(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:wi.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:or.string(t.fontFamily,this.defaultValue.fontFamily),padding:xe(t.padding,this.defaultValue.padding),maximumLength:wi.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}}class Swe extends Ki{static{st(this,"EditorLineDecorationsWidth")}constructor(){super(68,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):wi.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,n){return n<0?wi.clampedInt(-n*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):n}}class Ewe extends Za{static{st(this,"EditorLineHeight")}constructor(){super(69,"lineHeight",Kl.lineHeight,e=>Za.clamp(e,0,150),{markdownDescription:g("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}class Lwe extends Ki{static{st(this,"EditorMinimap")}constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(75,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:g("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:g("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[g("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),g("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),g("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:g("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:g("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:g("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:g("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:g("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:g("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:g("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:g("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:g("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:g("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:xe(t.enabled,this.defaultValue.enabled),autohide:xe(t.autohide,this.defaultValue.autohide),size:ln(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:ln(t.side,this.defaultValue.side,["right","left"]),showSlider:ln(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:xe(t.renderCharacters,this.defaultValue.renderCharacters),scale:wi.clampedInt(t.scale,1,1,3),maxColumn:wi.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:xe(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:xe(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:Za.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:Za.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}function XY(i){return i==="ctrlCmd"?Ue?"metaKey":"ctrlKey":"altKey"}st(XY,"_multiCursorModifierFromString");class Dwe extends Ki{static{st(this,"EditorPadding")}constructor(){super(86,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:g("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:g("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:wi.clampedInt(t.top,0,0,1e3),bottom:wi.clampedInt(t.bottom,0,0,1e3)}}}class Iwe extends Ki{static{st(this,"EditorParameterHints")}constructor(){const e={enabled:!0,cycle:!0};super(88,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:g("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:g("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:xe(t.enabled,this.defaultValue.enabled),cycle:xe(t.cycle,this.defaultValue.cycle)}}}class Twe extends QL{static{st(this,"EditorPixelRatio")}constructor(){super(146)}compute(e,t,n){return e.pixelRatio}}class Awe extends Ki{static{st(this,"PlaceholderOption")}constructor(){super(90,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}}class xwe extends Ki{static{st(this,"EditorQuickSuggestions")}defaultValue;constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[g("on","Quick suggestions show inside the suggest widget"),g("inline","Quick suggestions show as ghost text"),g("off","Quick suggestions are disabled")]}];super(92,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:g("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:g("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:g("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:g("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:n,strings:s}=e,o=["on","inline","off"];let r,a,l;return typeof t=="boolean"?r=t?"on":"off":r=ln(t,this.defaultValue.other,o),typeof n=="boolean"?a=n?"on":"off":a=ln(n,this.defaultValue.comments,o),typeof s=="boolean"?l=s?"on":"off":l=ln(s,this.defaultValue.strings,o),{other:r,comments:a,strings:l}}}var l_=(i=>(i[i.Off=0]="Off",i[i.On=1]="On",i[i.Relative=2]="Relative",i[i.Interval=3]="Interval",i[i.Custom=4]="Custom",i))(l_||{});class kwe extends Ki{static{st(this,"EditorRenderLineNumbersOption")}constructor(){super(70,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[g("lineNumbers.off","Line numbers are not rendered."),g("lineNumbers.on","Line numbers are rendered as absolute number."),g("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),g("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:g("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}function hE(i){const e=i.get(101);return e==="editable"?i.get(94):e!=="on"}st(hE,"filterValidationDecorations");class Nwe extends Ki{static{st(this,"EditorRulers")}constructor(){const e=[],t={type:"number",description:g("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(105,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:g("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:g("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const n of e)if(typeof n=="number")t.push({column:wi.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const s=n;t.push({column:wi.clampedInt(s.column,0,0,1e4),color:s.color})}return t.sort((n,s)=>n.column-s.column),t}return this.defaultValue}}class Pwe extends Ki{static{st(this,"ReadonlyMessage")}constructor(){super(95,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function kB(i,e){if(typeof i!="string")return e;switch(i){case"hidden":return Bi.Hidden;case"visible":return Bi.Visible;default:return Bi.Auto}}st(kB,"_scrollbarVisibilityFromString");let Rwe=class extends Ki{static{st(this,"EditorScrollbar")}constructor(){const e={vertical:Bi.Auto,horizontal:Bi.Auto,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(106,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[g("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),g("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),g("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:g("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[g("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),g("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),g("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:g("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:g("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:g("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:g("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:g("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=wi.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),s=wi.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:wi.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:kB(t.vertical,this.defaultValue.vertical),horizontal:kB(t.horizontal,this.defaultValue.horizontal),useShadows:xe(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:xe(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:xe(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:xe(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:xe(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:wi.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:s,verticalSliderSize:wi.clampedInt(t.verticalSliderSize,s,0,1e3),scrollByPage:xe(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:xe(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}};const ld="inUntrustedWorkspace",Tm={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class Owe extends Ki{static{st(this,"UnicodeHighlight")}constructor(){const e={nonBasicASCII:ld,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:ld,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(128,"unicodeHighlight",e,{[Tm.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,ld],default:e.nonBasicASCII,description:g("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Tm.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:g("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Tm.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:g("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Tm.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,ld],default:e.includeComments,description:g("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[Tm.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,ld],default:e.includeStrings,description:g("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[Tm.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:g("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[Tm.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:g("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(lo(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},n=!0)),t.allowedLocales&&e&&(lo(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},n=!0));const s=super.applyUpdate(e,t);return n?new mT(s.newValue,!0):s}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:ib(t.nonBasicASCII,ld,[!0,!1,ld]),invisibleCharacters:xe(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:xe(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:ib(t.includeComments,ld,[!0,!1,ld]),includeStrings:ib(t.includeStrings,ld,[!0,!1,ld]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const n={};for(const[s,o]of Object.entries(e))o===!0&&(n[s]=!0);return n}}class Mwe extends Ki{static{st(this,"InlineEditorSuggest")}constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!1};super(64,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:g("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[g("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),g("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),g("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:g("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:g("inlineSuggest.syntaxHighlightingEnabled","Controls whether to show syntax highlighting for inline suggestions in the editor.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:g("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:g("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:xe(t.enabled,this.defaultValue.enabled),mode:ln(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:ln(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:xe(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:xe(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:or.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:xe(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled)}}}class Bwe extends Ki{static{st(this,"InlineEditorEdit")}constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(65,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:g("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[g("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),g("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),g("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:g("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:g("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:xe(t.enabled,this.defaultValue.enabled),showToolbar:ln(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:or.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:xe(t.keepOnBlur,this.defaultValue.keepOnBlur)}}}class Fwe extends Ki{static{st(this,"BracketPairColorization")}constructor(){const e={enabled:Gf.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Gf.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:g("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:g("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:xe(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:xe(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class Vwe extends Ki{static{st(this,"GuideOptions")}constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[g("editor.guides.bracketPairs.true","Enables bracket pair guides."),g("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),g("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:g("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[g("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),g("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),g("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:g("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:g("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:g("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[g("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),g("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),g("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:g("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:ib(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:ib(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:xe(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:xe(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:ib(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function ib(i,e,t){const n=t.indexOf(i);return n===-1?e:t[n]}st(ib,"primitiveSet");class Wwe extends Ki{static{st(this,"EditorSuggest")}constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(121,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[g("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),g("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:g("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:g("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:g("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:g("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[g("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),g("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),g("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),g("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:g("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:g("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:g("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:g("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:g("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:g("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:g("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:g("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:ln(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:xe(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:xe(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:xe(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:xe(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:ln(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:xe(t.showIcons,this.defaultValue.showIcons),showStatusBar:xe(t.showStatusBar,this.defaultValue.showStatusBar),preview:xe(t.preview,this.defaultValue.preview),previewMode:ln(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:xe(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:xe(t.showMethods,this.defaultValue.showMethods),showFunctions:xe(t.showFunctions,this.defaultValue.showFunctions),showConstructors:xe(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:xe(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:xe(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:xe(t.showFields,this.defaultValue.showFields),showVariables:xe(t.showVariables,this.defaultValue.showVariables),showClasses:xe(t.showClasses,this.defaultValue.showClasses),showStructs:xe(t.showStructs,this.defaultValue.showStructs),showInterfaces:xe(t.showInterfaces,this.defaultValue.showInterfaces),showModules:xe(t.showModules,this.defaultValue.showModules),showProperties:xe(t.showProperties,this.defaultValue.showProperties),showEvents:xe(t.showEvents,this.defaultValue.showEvents),showOperators:xe(t.showOperators,this.defaultValue.showOperators),showUnits:xe(t.showUnits,this.defaultValue.showUnits),showValues:xe(t.showValues,this.defaultValue.showValues),showConstants:xe(t.showConstants,this.defaultValue.showConstants),showEnums:xe(t.showEnums,this.defaultValue.showEnums),showEnumMembers:xe(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:xe(t.showKeywords,this.defaultValue.showKeywords),showWords:xe(t.showWords,this.defaultValue.showWords),showColors:xe(t.showColors,this.defaultValue.showColors),showFiles:xe(t.showFiles,this.defaultValue.showFiles),showReferences:xe(t.showReferences,this.defaultValue.showReferences),showFolders:xe(t.showFolders,this.defaultValue.showFolders),showTypeParameters:xe(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:xe(t.showSnippets,this.defaultValue.showSnippets),showUsers:xe(t.showUsers,this.defaultValue.showUsers),showIssues:xe(t.showIssues,this.defaultValue.showIssues)}}}class Hwe extends Ki{static{st(this,"SmartSelect")}constructor(){super(116,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:g("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:g("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:xe(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:xe(e.selectSubwords,this.defaultValue.selectSubwords)}}}class Uwe extends Ki{static{st(this,"WordSegmenterLocales")}constructor(){const e=[];super(133,"wordSegmenterLocales",e,{anyOf:[{description:g("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:g("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const n of e)if(typeof n=="string")try{Intl.Segmenter.supportedLocalesOf(n).length>0&&t.push(n)}catch{}return t}return this.defaultValue}}var nb=(i=>(i[i.None=0]="None",i[i.Same=1]="Same",i[i.Indent=2]="Indent",i[i.DeepIndent=3]="DeepIndent",i))(nb||{});class zwe extends Ki{static{st(this,"WrappingIndentOption")}constructor(){super(141,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[g("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),g("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),g("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),g("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:g("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,n){return t.get(2)===rr.Enabled?0:n}}class $we extends QL{static{st(this,"EditorWrappingInfoComputer")}constructor(){super(149)}compute(e,t,n){const s=t.get(148);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:s.isWordWrapMinified,isViewportWrapping:s.isViewportWrapping,wrappingColumn:s.wrappingColumn}}}class Gwe extends Ki{static{st(this,"EditorDropIntoEditor")}constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:g("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:g("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[g("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),g("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:xe(t.enabled,this.defaultValue.enabled),showDropSelector:ln(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class Kwe extends Ki{static{st(this,"EditorPasteAs")}constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(87,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:g("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:g("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[g("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),g("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:xe(t.enabled,this.defaultValue.enabled),showPasteSelector:ln(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const jwe="Consolas, 'Courier New', monospace",qwe="Menlo, Monaco, 'Courier New', monospace",Ywe="'Droid Sans Mono', 'monospace', monospace",Kl={fontFamily:Ue?qwe:Gi?Ywe:jwe,fontWeight:"normal",fontSize:Ue?12:14,lineHeight:0,letterSpacing:0},g1=[];function se(i){return g1[i.id]=i,i}st(se,"register");var k=(i=>(i[i.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",i[i.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",i[i.accessibilitySupport=2]="accessibilitySupport",i[i.accessibilityPageSize=3]="accessibilityPageSize",i[i.ariaLabel=4]="ariaLabel",i[i.ariaRequired=5]="ariaRequired",i[i.autoClosingBrackets=6]="autoClosingBrackets",i[i.autoClosingComments=7]="autoClosingComments",i[i.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",i[i.autoClosingDelete=9]="autoClosingDelete",i[i.autoClosingOvertype=10]="autoClosingOvertype",i[i.autoClosingQuotes=11]="autoClosingQuotes",i[i.autoIndent=12]="autoIndent",i[i.automaticLayout=13]="automaticLayout",i[i.autoSurround=14]="autoSurround",i[i.bracketPairColorization=15]="bracketPairColorization",i[i.guides=16]="guides",i[i.codeLens=17]="codeLens",i[i.codeLensFontFamily=18]="codeLensFontFamily",i[i.codeLensFontSize=19]="codeLensFontSize",i[i.colorDecorators=20]="colorDecorators",i[i.colorDecoratorsLimit=21]="colorDecoratorsLimit",i[i.columnSelection=22]="columnSelection",i[i.comments=23]="comments",i[i.contextmenu=24]="contextmenu",i[i.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",i[i.cursorBlinking=26]="cursorBlinking",i[i.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",i[i.cursorStyle=28]="cursorStyle",i[i.cursorSurroundingLines=29]="cursorSurroundingLines",i[i.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",i[i.cursorWidth=31]="cursorWidth",i[i.disableLayerHinting=32]="disableLayerHinting",i[i.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",i[i.domReadOnly=34]="domReadOnly",i[i.dragAndDrop=35]="dragAndDrop",i[i.dropIntoEditor=36]="dropIntoEditor",i[i.experimentalEditContextEnabled=37]="experimentalEditContextEnabled",i[i.emptySelectionClipboard=38]="emptySelectionClipboard",i[i.experimentalGpuAcceleration=39]="experimentalGpuAcceleration",i[i.experimentalWhitespaceRendering=40]="experimentalWhitespaceRendering",i[i.extraEditorClassName=41]="extraEditorClassName",i[i.fastScrollSensitivity=42]="fastScrollSensitivity",i[i.find=43]="find",i[i.fixedOverflowWidgets=44]="fixedOverflowWidgets",i[i.folding=45]="folding",i[i.foldingStrategy=46]="foldingStrategy",i[i.foldingHighlight=47]="foldingHighlight",i[i.foldingImportsByDefault=48]="foldingImportsByDefault",i[i.foldingMaximumRegions=49]="foldingMaximumRegions",i[i.unfoldOnClickAfterEndOfLine=50]="unfoldOnClickAfterEndOfLine",i[i.fontFamily=51]="fontFamily",i[i.fontInfo=52]="fontInfo",i[i.fontLigatures=53]="fontLigatures",i[i.fontSize=54]="fontSize",i[i.fontWeight=55]="fontWeight",i[i.fontVariations=56]="fontVariations",i[i.formatOnPaste=57]="formatOnPaste",i[i.formatOnType=58]="formatOnType",i[i.glyphMargin=59]="glyphMargin",i[i.gotoLocation=60]="gotoLocation",i[i.hideCursorInOverviewRuler=61]="hideCursorInOverviewRuler",i[i.hover=62]="hover",i[i.inDiffEditor=63]="inDiffEditor",i[i.inlineSuggest=64]="inlineSuggest",i[i.inlineEdit=65]="inlineEdit",i[i.letterSpacing=66]="letterSpacing",i[i.lightbulb=67]="lightbulb",i[i.lineDecorationsWidth=68]="lineDecorationsWidth",i[i.lineHeight=69]="lineHeight",i[i.lineNumbers=70]="lineNumbers",i[i.lineNumbersMinChars=71]="lineNumbersMinChars",i[i.linkedEditing=72]="linkedEditing",i[i.links=73]="links",i[i.matchBrackets=74]="matchBrackets",i[i.minimap=75]="minimap",i[i.mouseStyle=76]="mouseStyle",i[i.mouseWheelScrollSensitivity=77]="mouseWheelScrollSensitivity",i[i.mouseWheelZoom=78]="mouseWheelZoom",i[i.multiCursorMergeOverlapping=79]="multiCursorMergeOverlapping",i[i.multiCursorModifier=80]="multiCursorModifier",i[i.multiCursorPaste=81]="multiCursorPaste",i[i.multiCursorLimit=82]="multiCursorLimit",i[i.occurrencesHighlight=83]="occurrencesHighlight",i[i.overviewRulerBorder=84]="overviewRulerBorder",i[i.overviewRulerLanes=85]="overviewRulerLanes",i[i.padding=86]="padding",i[i.pasteAs=87]="pasteAs",i[i.parameterHints=88]="parameterHints",i[i.peekWidgetDefaultFocus=89]="peekWidgetDefaultFocus",i[i.placeholder=90]="placeholder",i[i.definitionLinkOpensInPeek=91]="definitionLinkOpensInPeek",i[i.quickSuggestions=92]="quickSuggestions",i[i.quickSuggestionsDelay=93]="quickSuggestionsDelay",i[i.readOnly=94]="readOnly",i[i.readOnlyMessage=95]="readOnlyMessage",i[i.renameOnType=96]="renameOnType",i[i.renderControlCharacters=97]="renderControlCharacters",i[i.renderFinalNewline=98]="renderFinalNewline",i[i.renderLineHighlight=99]="renderLineHighlight",i[i.renderLineHighlightOnlyWhenFocus=100]="renderLineHighlightOnlyWhenFocus",i[i.renderValidationDecorations=101]="renderValidationDecorations",i[i.renderWhitespace=102]="renderWhitespace",i[i.revealHorizontalRightPadding=103]="revealHorizontalRightPadding",i[i.roundedSelection=104]="roundedSelection",i[i.rulers=105]="rulers",i[i.scrollbar=106]="scrollbar",i[i.scrollBeyondLastColumn=107]="scrollBeyondLastColumn",i[i.scrollBeyondLastLine=108]="scrollBeyondLastLine",i[i.scrollPredominantAxis=109]="scrollPredominantAxis",i[i.selectionClipboard=110]="selectionClipboard",i[i.selectionHighlight=111]="selectionHighlight",i[i.selectOnLineNumbers=112]="selectOnLineNumbers",i[i.showFoldingControls=113]="showFoldingControls",i[i.showUnused=114]="showUnused",i[i.snippetSuggestions=115]="snippetSuggestions",i[i.smartSelect=116]="smartSelect",i[i.smoothScrolling=117]="smoothScrolling",i[i.stickyScroll=118]="stickyScroll",i[i.stickyTabStops=119]="stickyTabStops",i[i.stopRenderingLineAfter=120]="stopRenderingLineAfter",i[i.suggest=121]="suggest",i[i.suggestFontSize=122]="suggestFontSize",i[i.suggestLineHeight=123]="suggestLineHeight",i[i.suggestOnTriggerCharacters=124]="suggestOnTriggerCharacters",i[i.suggestSelection=125]="suggestSelection",i[i.tabCompletion=126]="tabCompletion",i[i.tabIndex=127]="tabIndex",i[i.unicodeHighlighting=128]="unicodeHighlighting",i[i.unusualLineTerminators=129]="unusualLineTerminators",i[i.useShadowDOM=130]="useShadowDOM",i[i.useTabStops=131]="useTabStops",i[i.wordBreak=132]="wordBreak",i[i.wordSegmenterLocales=133]="wordSegmenterLocales",i[i.wordSeparators=134]="wordSeparators",i[i.wordWrap=135]="wordWrap",i[i.wordWrapBreakAfterCharacters=136]="wordWrapBreakAfterCharacters",i[i.wordWrapBreakBeforeCharacters=137]="wordWrapBreakBeforeCharacters",i[i.wordWrapColumn=138]="wordWrapColumn",i[i.wordWrapOverride1=139]="wordWrapOverride1",i[i.wordWrapOverride2=140]="wordWrapOverride2",i[i.wrappingIndent=141]="wrappingIndent",i[i.wrappingStrategy=142]="wrappingStrategy",i[i.showDeprecated=143]="showDeprecated",i[i.inlayHints=144]="inlayHints",i[i.editorClassName=145]="editorClassName",i[i.pixelRatio=146]="pixelRatio",i[i.tabFocusMode=147]="tabFocusMode",i[i.layoutInfo=148]="layoutInfo",i[i.wrappingInfo=149]="wrappingInfo",i[i.defaultColorDecorators=150]="defaultColorDecorators",i[i.colorDecoratorsActivatedOn=151]="colorDecoratorsActivatedOn",i[i.inlineCompletionsAccessibilityVerbose=152]="inlineCompletionsAccessibilityVerbose",i))(k||{});const Ku={acceptSuggestionOnCommitCharacter:se(new At(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:g("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:se(new rn(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",g("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:g("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:se(new cwe),accessibilityPageSize:se(new wi(3,"accessibilityPageSize",10,1,fn.MAX_SAFE_SMALL_INTEGER,{description:g("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:se(new or(4,"ariaLabel",g("editorViewAccessibleLabel","Editor content"))),ariaRequired:se(new At(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:se(new At(8,"screenReaderAnnounceInlineSuggestion",!0,{description:g("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:se(new rn(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",g("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),g("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:g("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:se(new rn(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",g("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),g("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:g("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:se(new rn(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",g("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:g("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:se(new rn(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",g("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:g("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:se(new rn(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",g("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),g("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:g("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:se(new dI(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],qY,{enumDescriptions:[g("editor.autoIndent.none","The editor will not insert indentation automatically."),g("editor.autoIndent.keep","The editor will keep the current line's indentation."),g("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),g("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),g("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:g("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:se(new At(13,"automaticLayout",!1)),autoSurround:se(new rn(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[g("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),g("editor.autoSurround.quotes","Surround with quotes but not brackets."),g("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:g("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:se(new Fwe),bracketPairGuides:se(new Vwe),stickyTabStops:se(new At(119,"stickyTabStops",!1,{description:g("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:se(new At(17,"codeLens",!0,{description:g("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:se(new or(18,"codeLensFontFamily","",{description:g("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:se(new wi(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:g("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:se(new At(20,"colorDecorators",!0,{description:g("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:se(new rn(151,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[g("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),g("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),g("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:g("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:se(new wi(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:g("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:se(new At(22,"columnSelection",!1,{description:g("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:se(new dwe),contextmenu:se(new At(24,"contextmenu",!0)),copyWithSyntaxHighlighting:se(new At(25,"copyWithSyntaxHighlighting",!0,{description:g("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:se(new dI(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],YY,{description:g("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:se(new rn(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[g("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),g("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),g("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:g("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:se(new dI(28,"cursorStyle",1,"line",["line","block","underline","line-thin","block-outline","underline-thin"],ZY,{description:g("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:se(new wi(29,"cursorSurroundingLines",0,0,fn.MAX_SAFE_SMALL_INTEGER,{description:g("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:se(new rn(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[g("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),g("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:g("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:se(new wi(31,"cursorWidth",0,0,fn.MAX_SAFE_SMALL_INTEGER,{markdownDescription:g("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:se(new At(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:se(new At(33,"disableMonospaceOptimizations",!1)),domReadOnly:se(new At(34,"domReadOnly",!1)),dragAndDrop:se(new At(35,"dragAndDrop",!0,{description:g("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:se(new gwe),dropIntoEditor:se(new Gwe),experimentalEditContextEnabled:se(new At(37,"experimentalEditContextEnabled",!1,{description:g("experimentalEditContextEnabled","Sets whether the new experimental edit context should be used instead of the text area.")})),stickyScroll:se(new Cwe),experimentalGpuAcceleration:se(new rn(39,"experimentalGpuAcceleration","off",["off","on"],void 0)),experimentalWhitespaceRendering:se(new rn(40,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[g("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),g("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),g("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:g("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:se(new or(41,"extraEditorClassName","")),fastScrollSensitivity:se(new Za(42,"fastScrollSensitivity",5,i=>i<=0?5:i,{markdownDescription:g("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:se(new fwe),fixedOverflowWidgets:se(new At(44,"fixedOverflowWidgets",!1)),folding:se(new At(45,"folding",!0,{description:g("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:se(new rn(46,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[g("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),g("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:g("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:se(new At(47,"foldingHighlight",!0,{description:g("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:se(new At(48,"foldingImportsByDefault",!1,{description:g("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:se(new wi(49,"foldingMaximumRegions",5e3,10,65e3,{description:g("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:se(new At(50,"unfoldOnClickAfterEndOfLine",!1,{description:g("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:se(new or(51,"fontFamily",Kl.fontFamily,{description:g("fontFamily","Controls the font family.")})),fontInfo:se(new pwe),fontLigatures2:se(new kd),fontSize:se(new mwe),fontWeight:se(new a_),fontVariations:se(new og),formatOnPaste:se(new At(57,"formatOnPaste",!1,{description:g("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:se(new At(58,"formatOnType",!1,{description:g("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:se(new At(59,"glyphMargin",!0,{description:g("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:se(new _we),hideCursorInOverviewRuler:se(new At(61,"hideCursorInOverviewRuler",!1,{description:g("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:se(new bwe),inDiffEditor:se(new At(63,"inDiffEditor",!1)),letterSpacing:se(new Za(66,"letterSpacing",Kl.letterSpacing,i=>Za.clamp(i,-5,20),{description:g("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:se(new wwe),lineDecorationsWidth:se(new Swe),lineHeight:se(new Ewe),lineNumbers:se(new kwe),lineNumbersMinChars:se(new wi(71,"lineNumbersMinChars",5,1,300)),linkedEditing:se(new At(72,"linkedEditing",!1,{description:g("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:se(new At(73,"links",!0,{description:g("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:se(new rn(74,"matchBrackets","always",["always","near","never"],{description:g("matchBrackets","Highlight matching brackets.")})),minimap:se(new Lwe),mouseStyle:se(new rn(76,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:se(new Za(77,"mouseWheelScrollSensitivity",1,i=>i===0?1:i,{markdownDescription:g("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:se(new At(78,"mouseWheelZoom",!1,{markdownDescription:Ue?g("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):g("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:se(new At(79,"multiCursorMergeOverlapping",!0,{description:g("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:se(new dI(80,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],XY,{markdownEnumDescriptions:[g("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),g("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:g({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:se(new rn(81,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[g("multiCursorPaste.spread","Each cursor pastes a single line of the text."),g("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:g("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:se(new wi(82,"multiCursorLimit",1e4,1,1e5,{markdownDescription:g("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:se(new rn(83,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[g("occurrencesHighlight.off","Does not highlight occurrences."),g("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),g("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:g("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:se(new At(84,"overviewRulerBorder",!0,{description:g("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:se(new wi(85,"overviewRulerLanes",3,0,3)),padding:se(new Dwe),pasteAs:se(new Kwe),parameterHints:se(new Iwe),peekWidgetDefaultFocus:se(new rn(89,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[g("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),g("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:g("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:se(new Awe),definitionLinkOpensInPeek:se(new At(91,"definitionLinkOpensInPeek",!1,{description:g("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:se(new xwe),quickSuggestionsDelay:se(new wi(93,"quickSuggestionsDelay",10,0,fn.MAX_SAFE_SMALL_INTEGER,{description:g("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:se(new At(94,"readOnly",!1)),readOnlyMessage:se(new Pwe),renameOnType:se(new At(96,"renameOnType",!1,{description:g("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:g("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:se(new At(97,"renderControlCharacters",!0,{description:g("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:se(new rn(98,"renderFinalNewline",Gi?"dimmed":"on",["off","on","dimmed"],{description:g("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:se(new rn(99,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",g("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:g("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:se(new At(100,"renderLineHighlightOnlyWhenFocus",!1,{description:g("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:se(new rn(101,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:se(new rn(102,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",g("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),g("renderWhitespace.selection","Render whitespace characters only on selected text."),g("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:g("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:se(new wi(103,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:se(new At(104,"roundedSelection",!0,{description:g("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:se(new Nwe),scrollbar:se(new Rwe),scrollBeyondLastColumn:se(new wi(107,"scrollBeyondLastColumn",4,0,fn.MAX_SAFE_SMALL_INTEGER,{description:g("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:se(new At(108,"scrollBeyondLastLine",!0,{description:g("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:se(new At(109,"scrollPredominantAxis",!0,{description:g("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:se(new At(110,"selectionClipboard",!0,{description:g("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Gi})),selectionHighlight:se(new At(111,"selectionHighlight",!0,{description:g("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:se(new At(112,"selectOnLineNumbers",!0)),showFoldingControls:se(new rn(113,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[g("showFoldingControls.always","Always show the folding controls."),g("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),g("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:g("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:se(new At(114,"showUnused",!0,{description:g("showUnused","Controls fading out of unused code.")})),showDeprecated:se(new At(143,"showDeprecated",!0,{description:g("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:se(new ywe),snippetSuggestions:se(new rn(115,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[g("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),g("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),g("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),g("snippetSuggestions.none","Do not show snippet suggestions.")],description:g("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:se(new Hwe),smoothScrolling:se(new At(117,"smoothScrolling",!1,{description:g("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:se(new wi(120,"stopRenderingLineAfter",1e4,-1,fn.MAX_SAFE_SMALL_INTEGER)),suggest:se(new Wwe),inlineSuggest:se(new Mwe),inlineEdit:se(new Bwe),inlineCompletionsAccessibilityVerbose:se(new At(152,"inlineCompletionsAccessibilityVerbose",!1,{description:g("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:se(new wi(122,"suggestFontSize",0,0,1e3,{markdownDescription:g("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:se(new wi(123,"suggestLineHeight",0,0,1e3,{markdownDescription:g("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:se(new At(124,"suggestOnTriggerCharacters",!0,{description:g("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:se(new rn(125,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[g("suggestSelection.first","Always select the first suggestion."),g("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),g("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:g("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:se(new rn(126,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[g("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),g("tabCompletion.off","Disable tab completions."),g("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:g("tabCompletion","Enables tab completions.")})),tabIndex:se(new wi(127,"tabIndex",0,-1,fn.MAX_SAFE_SMALL_INTEGER)),unicodeHighlight:se(new Owe),unusualLineTerminators:se(new rn(129,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[g("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),g("unusualLineTerminators.off","Unusual line terminators are ignored."),g("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:g("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:se(new At(130,"useShadowDOM",!0)),useTabStops:se(new At(131,"useTabStops",!0,{description:g("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:se(new rn(132,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[g("wordBreak.normal","Use the default line break rule."),g("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:g("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:se(new Uwe),wordSeparators:se(new or(134,"wordSeparators",AY,{description:g("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:se(new rn(135,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[g("wordWrap.off","Lines will never wrap."),g("wordWrap.on","Lines will wrap at the viewport width."),g({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),g({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:g({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:se(new or(136,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xa2\xb0")),wordWrapBreakBeforeCharacters:se(new or(137,"wordWrapBreakBeforeCharacters","([{\xa3\xa5+")),wordWrapColumn:se(new wi(138,"wordWrapColumn",80,1,fn.MAX_SAFE_SMALL_INTEGER,{markdownDescription:g({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:se(new rn(139,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:se(new rn(140,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:se(new uwe),defaultColorDecorators:se(new At(150,"defaultColorDecorators",!1,{markdownDescription:g("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:se(new Twe),tabFocusMode:se(new At(147,"tabFocusMode",!1,{markdownDescription:g("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:se(new qw),wrappingInfo:se(new $we),wrappingIndent:se(new zwe),wrappingStrategy:se(new vwe)};var Zwe=Object.defineProperty,Xwe=(i,e)=>Zwe(i,"name",{value:e,configurable:!0});let j=class zm{static{Xwe(this,"Position")}lineNumber;column;constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new zm(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return zm.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return zm.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return zm.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const n=e.lineNumber|0,s=t.lineNumber|0;if(n===s){const o=e.column|0,r=t.column|0;return o-r}return n-s}clone(){return new zm(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new zm(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};var Qwe=Object.defineProperty,Jwe=(i,e)=>Qwe(i,"name",{value:e,configurable:!0});let V=class Zs{static{Jwe(this,"Range")}startLineNumber;startColumn;endLineNumber;endColumn;constructor(e,t,n,s){e>n||e===n&&t>s?(this.startLineNumber=n,this.startColumn=s,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=s)}isEmpty(){return Zs.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Zs.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return Zs.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return Zs.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return Zs.plusRange(this,e)}static plusRange(e,t){let n,s,o,r;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,s=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,s=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,s=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,r=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,r=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,r=e.endColumn),new Zs(n,s,o,r)}intersectRanges(e){return Zs.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,s=e.startColumn,o=e.endLineNumber,r=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,d=t.endColumn;return n<a?(n=a,s=l):n===a&&(s=Math.max(s,l)),o>c?(o=c,r=d):o===c&&(r=Math.min(r,d)),n>o||n===o&&s>r?null:new Zs(n,s,o,r)}equalsRange(e){return Zs.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Zs.getEndPosition(this)}static getEndPosition(e){return new j(e.endLineNumber,e.endColumn)}getStartPosition(){return Zs.getStartPosition(this)}static getStartPosition(e){return new j(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Zs(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Zs(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Zs.collapseToStart(this)}static collapseToStart(e){return new Zs(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return Zs.collapseToEnd(this)}static collapseToEnd(e){return new Zs(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new Zs(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new Zs(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Zs(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const o=e.startLineNumber|0,r=t.startLineNumber|0;if(o===r){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,d=t.endLineNumber|0;if(c===d){const h=e.endColumn|0,u=t.endColumn|0;return h-u}return c-d}return a-l}return o-r}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};var eCe=Object.defineProperty,tCe=(i,e)=>eCe(i,"name",{value:e,configurable:!0}),uP=(i=>(i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i))(uP||{});class St extends V{static{tCe(this,"Selection")}selectionStartLineNumber;selectionStartColumn;positionLineNumber;positionColumn;constructor(e,t,n,s){super(e,t,n,s),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return St.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new St(this.startLineNumber,this.startColumn,e,t):new St(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new j(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new j(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new St(e,t,this.endLineNumber,this.endColumn):new St(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new St(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new St(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new St(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new St(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,s=e.length;n<s;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,s,o){return o===0?new St(e,t,n,s):new St(n,s,e,t)}}var iCe=Object.defineProperty,nCe=(i,e)=>iCe(i,"name",{value:e,configurable:!0});class sCe{static{nCe(this,"EditOperation")}static insert(e,t){return{range:new V(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}var oCe=Object.defineProperty,un=(i,e)=>oCe(i,"name",{value:e,configurable:!0});function rCe(i){const e=i;return e?typeof e.read=="function":!1}un(rCe,"isReadable");function QY(i){const e=i;return e?[e.on,e.pause,e.resume,e.destroy].every(t=>typeof t=="function"):!1}un(QY,"isReadableStream");function aCe(i){const e=i;return e?QY(e.stream)&&Array.isArray(e.buffer)&&typeof e.ended=="boolean":!1}un(aCe,"isReadableBufferedStream");function lm(i,e){return new lCe(i,e)}un(lm,"newWriteableStream");class lCe{constructor(e,t){this.reducer=e,this.options=t}static{un(this,"WriteableStreamImpl")}state={flowing:!1,ended:!1,destroyed:!1};buffer={data:[],error:[]};listeners={data:[],error:[],end:[]};pendingWritePromises=[];pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(e){if(!this.state.destroyed){if(this.state.flowing)this.emitData(e);else if(this.buffer.data.push(e),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(t=>this.pendingWritePromises.push(t))}}error(e){this.state.destroyed||(this.state.flowing?this.emitError(e):this.buffer.error.push(e))}end(e){this.state.destroyed||(typeof e<"u"&&this.write(e),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(e){this.listeners.data.slice(0).forEach(t=>t(e))}emitError(e){this.listeners.error.length===0?Kt(e):this.listeners.error.slice(0).forEach(t=>t(e))}emitEnd(){this.listeners.end.slice(0).forEach(e=>e())}on(e,t){if(!this.state.destroyed)switch(e){case"data":this.listeners.data.push(t),this.resume();break;case"end":this.listeners.end.push(t),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(t),this.state.flowing&&this.flowErrors();break}}removeListener(e,t){if(this.state.destroyed)return;let n;switch(e){case"data":n=this.listeners.data;break;case"end":n=this.listeners.end;break;case"error":n=this.listeners.error;break}if(n){const s=n.indexOf(t);s>=0&&n.splice(s,1)}}flowData(){if(this.buffer.data.length>0){const e=this.reducer(this.buffer.data);this.emitData(e),this.buffer.data.length=0;const t=[...this.pendingWritePromises];this.pendingWritePromises.length=0,t.forEach(n=>n())}}flowErrors(){if(this.listeners.error.length>0){for(const e of this.buffer.error)this.emitError(e);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}}function JY(i,e){const t=[];let n;for(;(n=i.read())!==null;)t.push(n);return e(t)}un(JY,"consumeReadable");function cCe(i,e,t){const n=[];let s;for(;(s=i.read())!==null&&n.length<t;)n.push(s);return s===null&&n.length>0?e(n):{read:un(()=>{if(n.length>0)return n.shift();if(typeof s<"u"){const o=s;return s=void 0,o}return i.read()},"read")}}un(cCe,"peekReadable");function eZ(i,e){return new Promise((t,n)=>{const s=[];nS(i,{onData:un(o=>{e&&s.push(o)},"onData"),onError:un(o=>{e?n(o):t(void 0)},"onError"),onEnd:un(()=>{t(e?e(s):void 0)},"onEnd")})})}un(eZ,"consumeStream");function nS(i,e,t){i.on("error",n=>{t?.isCancellationRequested||e.onError(n)}),i.on("end",()=>{t?.isCancellationRequested||e.onEnd()}),i.on("data",n=>{t?.isCancellationRequested||e.onData(n)})}un(nS,"listenStream");function dCe(i,e){return new Promise((t,n)=>{const s=new te,o=[],r=un(c=>{if(o.push(c),o.length>e)return s.dispose(),i.pause(),t({stream:i,buffer:o,ended:!1})},"dataListener"),a=un(c=>(s.dispose(),n(c)),"errorListener"),l=un(()=>(s.dispose(),t({stream:i,buffer:o,ended:!0})),"endListener");s.add(ye(()=>i.removeListener("error",a))),i.on("error",a),s.add(ye(()=>i.removeListener("end",l))),i.on("end",l),s.add(ye(()=>i.removeListener("data",r))),i.on("data",r)})}un(dCe,"peekStream");function tZ(i,e){const t=lm(e);return t.end(i),t}un(tZ,"toStream");function hCe(){const i=lm(()=>{throw new Error("not supported")});return i.end(),i}un(hCe,"emptyStream");function iZ(i){let e=!1;return{read:un(()=>e?null:(e=!0,i),"read")}}un(iZ,"toReadable");function nZ(i,e,t){const n=lm(t);return nS(i,{onData:un(s=>n.write(e.data(s)),"onData"),onError:un(s=>n.error(e.error?e.error(s):s),"onError"),onEnd:un(()=>n.end(),"onEnd")}),n}un(nZ,"transform");function sZ(i,e,t){let n=!1;return{read:un(()=>{const s=e.read();return n?s:(n=!0,s!==null?t([i,s]):i)},"read")}}un(sZ,"prefixedReadable");function oZ(i,e,t){let n=!1;const s=lm(t);return nS(e,{onData:un(o=>n?s.write(o):(n=!0,s.write(t([i,o]))),"onData"),onError:un(o=>s.error(o),"onError"),onEnd:un(()=>{n||(n=!0,s.write(i)),s.end()},"onEnd")}),s}un(oZ,"prefixedStream");var uCe=Object.defineProperty,Ps=(i,e)=>uCe(i,"name",{value:e,configurable:!0});const hI=typeof Buffer<"u",gCe=new cr(()=>new Uint8Array(256));let IO,TO;class mt{static{Ps(this,"VSBuffer")}static alloc(e){return hI?new mt(Buffer.allocUnsafe(e)):new mt(new Uint8Array(e))}static wrap(e){return hI&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new mt(e)}static fromString(e,t){return!(t?.dontUseNodeBuffer||!1)&&hI?new mt(Buffer.from(e)):(IO||(IO=new TextEncoder),new mt(IO.encode(e)))}static fromByteArray(e){const t=mt.alloc(e.length);for(let n=0,s=e.length;n<s;n++)t.buffer[n]=e[n];return t}static concat(e,t){if(typeof t>"u"){t=0;for(let o=0,r=e.length;o<r;o++)t+=e[o].byteLength}const n=mt.alloc(t);let s=0;for(let o=0,r=e.length;o<r;o++){const a=e[o];n.set(a,s),s+=a.byteLength}return n}buffer;byteLength;constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}clone(){const e=mt.alloc(this.byteLength);return e.set(this),e}toString(){return hI?this.buffer.toString():(TO||(TO=new TextDecoder),TO.decode(this.buffer))}slice(e,t){return new mt(this.buffer.subarray(e,t))}set(e,t){if(e instanceof mt)this.buffer.set(e.buffer,t);else if(e instanceof Uint8Array)this.buffer.set(e,t);else if(e instanceof ArrayBuffer)this.buffer.set(new Uint8Array(e),t);else if(ArrayBuffer.isView(e))this.buffer.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t);else throw new Error("Unknown argument 'array'")}readUInt32BE(e){return br(this.buffer,e)}writeUInt32BE(e,t){vr(this.buffer,e,t)}readUInt32LE(e){return cZ(this.buffer,e)}writeUInt32LE(e,t){dZ(this.buffer,e,t)}readUInt8(e){return cx(this.buffer,e)}writeUInt8(e,t){dx(this.buffer,e,t)}indexOf(e,t=0){return rZ(this.buffer,e instanceof mt?e.buffer:e,t)}}function rZ(i,e,t=0){const n=e.byteLength,s=i.byteLength;if(n===0)return 0;if(n===1)return i.indexOf(e[0]);if(n>s-t)return-1;const o=gCe.value;o.fill(e.length);for(let c=0;c<e.length;c++)o[e[c]]=e.length-c-1;let r=t+e.length-1,a=r,l=-1;for(;r<s;)if(i[r]===e[a]){if(a===0){l=r;break}r--,a--}else r+=Math.max(e.length-a,o[i[r]]),a=e.length-1;return l}Ps(rZ,"binaryIndexOf");function aZ(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0}Ps(aZ,"readUInt16LE");function lZ(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255}Ps(lZ,"writeUInt16LE");function br(i,e){return i[e]*2**24+i[e+1]*2**16+i[e+2]*2**8+i[e+3]}Ps(br,"readUInt32BE");function vr(i,e,t){i[t+3]=e,e=e>>>8,i[t+2]=e,e=e>>>8,i[t+1]=e,e=e>>>8,i[t]=e}Ps(vr,"writeUInt32BE");function cZ(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0|i[e+2]<<16>>>0|i[e+3]<<24>>>0}Ps(cZ,"readUInt32LE");function dZ(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255,e=e>>>8,i[t+2]=e&255,e=e>>>8,i[t+3]=e&255}Ps(dZ,"writeUInt32LE");function cx(i,e){return i[e]}Ps(cx,"readUInt8");function dx(i,e,t){i[t]=e}Ps(dx,"writeUInt8");function fCe(i){return JY(i,e=>mt.concat(e))}Ps(fCe,"readableToBuffer");function hZ(i){return iZ(i)}Ps(hZ,"bufferToReadable");function uZ(i){return eZ(i,e=>mt.concat(e))}Ps(uZ,"streamToBuffer");async function pCe(i){return i.ended?mt.concat(i.buffer):mt.concat([...i.buffer,await uZ(i.stream)])}Ps(pCe,"bufferedStreamToBuffer");function gZ(i){return tZ(i,e=>mt.concat(e))}Ps(gZ,"bufferToStream");function mCe(i){return nZ(i,{data:Ps(e=>typeof e=="string"?mt.fromString(e):mt.wrap(e),"data")},e=>mt.concat(e))}Ps(mCe,"streamToBufferReadableStream");function _Ce(i){return lm(e=>mt.concat(e),i)}Ps(_Ce,"newWriteableBufferStream");function bCe(i,e){return sZ(i,e,t=>mt.concat(t))}Ps(bCe,"prefixedBufferReadable");function vCe(i,e){return oZ(i,e,t=>mt.concat(t))}Ps(vCe,"prefixedBufferStream");function SH(i){let e=0,t=0,n=0;const s=new Uint8Array(Math.floor(i.length/4*3)),o=Ps(a=>{switch(t){case 3:s[n++]=e|a,t=0;break;case 2:s[n++]=e|a>>>2,e=a<<6,t=3;break;case 1:s[n++]=e|a>>>4,e=a<<4,t=2;break;default:e=a<<2,t=1}},"append");for(let a=0;a<i.length;a++){const l=i.charCodeAt(a);if(l>=65&&l<=90)o(l-65);else if(l>=97&&l<=122)o(l-97+26);else if(l>=48&&l<=57)o(l-48+52);else if(l===43||l===45)o(62);else if(l===47||l===95)o(63);else{if(l===61)break;throw new SyntaxError(`Unexpected base64 character ${i[a]}`)}}const r=n;for(;t>0;)o(0);return mt.wrap(s).slice(0,r)}Ps(SH,"decodeBase64");const wCe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",CCe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function EH({buffer:i},e=!0,t=!1){const n=t?CCe:wCe;let s="";const o=i.byteLength%3;let r=0;for(;r<i.byteLength-o;r+=3){const a=i[r+0],l=i[r+1],c=i[r+2];s+=n[a>>>2],s+=n[(a<<4|l>>>4)&63],s+=n[(l<<2|c>>>6)&63],s+=n[c&63]}if(o===1){const a=i[r+0];s+=n[a>>>2],s+=n[a<<4&63],e&&(s+="==")}else if(o===2){const a=i[r+0],l=i[r+1];s+=n[a>>>2],s+=n[(a<<4|l>>>4)&63],s+=n[l<<2&63],e&&(s+="=")}return s}Ps(EH,"encodeBase64");var yCe=Object.defineProperty,sS=(i,e)=>yCe(i,"name",{value:e,configurable:!0});let AO;function LH(){return AO||(AO=new TextDecoder("UTF-16LE")),AO}sS(LH,"getUTF16LE_TextDecoder");let xO;function fZ(){return xO||(xO=new TextDecoder("UTF-16BE")),xO}sS(fZ,"getUTF16BE_TextDecoder");let kO;function DH(){return kO||(kO=DG()?LH():fZ()),kO}sS(DH,"getPlatformTextDecoder");function pZ(i,e,t){const n=new Uint16Array(i.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?mZ(i,e,t):LH().decode(n)}sS(pZ,"decodeUTF16LE");function mZ(i,e,t){const n=[];let s=0;for(let o=0;o<t;o++){const r=aZ(i,e);e+=2,n[s++]=String.fromCharCode(r)}return n.join("")}sS(mZ,"compatDecodeUTF16LE");class JL{static{sS(this,"StringBuilder")}_capacity;_buffer;_completedStrings;_bufferLength;constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return DH().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||Ds(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}var SCe=Object.defineProperty,gP=(i,e)=>SCe(i,"name",{value:e,configurable:!0});function f1(i){return i.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}gP(f1,"escapeNewLine");class yo{constructor(e,t,n,s){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=s}static{gP(this,"TextChange")}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${f1(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${f1(this.oldText)}")`:`(replace@${this.oldPosition} "${f1(this.oldText)}" with "${f1(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const s=t.length;vr(e,s,n),n+=4;for(let o=0;o<s;o++)lZ(e,t.charCodeAt(o),n),n+=2;return n}static _readString(e,t){const n=br(e,t);return t+=4,pZ(e,t,n)}writeSize(){return 8+yo._writeStringSize(this.oldText)+yo._writeStringSize(this.newText)}write(e,t){return vr(e,this.oldPosition,t),t+=4,vr(e,this.newPosition,t),t+=4,t=yo._writeString(e,this.oldText,t),t=yo._writeString(e,this.newText,t),t}static read(e,t,n){const s=br(e,t);t+=4;const o=br(e,t);t+=4;const r=yo._readString(e,t);t+=yo._writeStringSize(r);const a=yo._readString(e,t);return t+=yo._writeStringSize(a),n.push(new yo(s,r,o,a)),t}}function _Z(i,e){return i===null||i.length===0?e:new Nh(i,e).compress()}gP(_Z,"compressConsecutiveTextChanges");class Nh{static{gP(this,"TextChangeCompressor")}_prevEdits;_currEdits;_result;_resultLen;_prevLen;_prevDeltaOffset;_currLen;_currDeltaOffset;constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),s=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(s),s=this._getCurr(++t);continue}if(s===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(s.oldEnd<=n.newPosition){this._acceptCurr(s),s=this._getCurr(++t);continue}if(n.newEnd<=s.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(s.oldPosition<n.newPosition){const[c,d]=Nh._splitCurr(s,n.newPosition-s.oldPosition);this._acceptCurr(c),s=d;continue}if(n.newPosition<s.oldPosition){const[c,d]=Nh._splitPrev(n,s.oldPosition-n.newPosition);this._acceptPrev(c),n=d;continue}let a,l;if(s.oldEnd===n.newEnd)a=n,l=s,n=this._getPrev(++e),s=this._getCurr(++t);else if(s.oldEnd<n.newEnd){const[c,d]=Nh._splitPrev(n,s.oldLength);a=c,l=s,n=d,s=this._getCurr(++t)}else{const[c,d]=Nh._splitCurr(s,n.newLength);a=n,l=c,n=this._getPrev(++e),s=d}this._result[this._resultLen++]=new yo(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const o=Nh._merge(this._result);return Nh._removeNoOps(o)}_acceptCurr(e){this._result[this._resultLen++]=Nh._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Nh._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new yo(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new yo(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),s=e.newText.substr(t);return[new yo(e.oldPosition,e.oldText,e.newPosition,n),new yo(e.oldEnd,"",e.newPosition+t,s)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),s=e.oldText.substr(t);return[new yo(e.oldPosition,n,e.newPosition,e.newText),new yo(e.oldPosition+t,s,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let n=0,s=e[0];for(let o=1;o<e.length;o++){const r=e[o];s.oldEnd===r.oldPosition?s=new yo(s.oldPosition,s.oldText+r.oldText,s.newPosition,s.newText+r.newText):(t[n++]=s,s=r)}return t[n++]=s,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let n=0;for(let s=0;s<e.length;s++){const o=e[s];o.oldText!==o.newText&&(t[n++]=o)}return t}}var ECe=Object.defineProperty,bZ=(i,e)=>ECe(i,"name",{value:e,configurable:!0});class eD{static{bZ(this,"CharacterClassifier")}_asciiMap;_map;_defaultValue;constructor(e){const t=K0(e);this._defaultValue=t,this._asciiMap=eD._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const n=K0(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class e$e{static{bZ(this,"CharacterSet")}_actual;constructor(){this._actual=new eD(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}clear(){return this._actual.clear()}}var LCe=Object.defineProperty,vZ=(i,e)=>LCe(i,"name",{value:e,configurable:!0}),ts=(i=>(i[i.Regular=0]="Regular",i[i.Whitespace=1]="Whitespace",i[i.WordSeparator=2]="WordSeparator",i))(ts||{});class DCe extends eD{static{vZ(this,"WordCharacterClassifier")}intlSegmenterLocales;_segmenter=null;_cachedLine=null;_cachedSegments=[];constructor(e,t){super(0),this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let n=0,s=e.length;n<s;n++)this.set(e.charCodeAt(n),2);this.set(A.Space,1),this.set(A.Tab,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let n=null;for(const s of this._getIntlSegmenterWordsOnLine(e)){if(s.index>t)break;n=s}return n}findNextIntlWordAtOrAfterOffset(e,t){for(const n of this._getIntlSegmenterWordsOnLine(e))if(!(n.index<t))return n;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const n of e)this._isWordLike(n)&&t.push(n);return t}_isWordLike(e){return!!e.isWordLike}}const T8=new Ry(10);function Fb(i,e){const t=`${i}/${e.join(",")}`;let n=T8.get(t);return n||(n=new DCe(i,e),T8.set(t,n)),n}vZ(Fb,"getMapForWordSeparators");var ICe=Object.defineProperty,NB=(i,e)=>ICe(i,"name",{value:e,configurable:!0});const TCe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function ACe(i){return TCe.test(i)}NB(ACe,"isUUID");const Gp=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let i;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?i=crypto.getRandomValues.bind(crypto):i=NB(function(n){for(let s=0;s<n.length;s++)n[s]=Math.floor(Math.random()*256);return n},"getRandomValues");const e=new Uint8Array(16),t=[];for(let n=0;n<256;n++)t.push(n.toString(16).padStart(2,"0"));return NB(function(){i(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let s=0,o="";return o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+="-",o+=t[e[s++]],o+=t[e[s++]],o+="-",o+=t[e[s++]],o+=t[e[s++]],o+="-",o+=t[e[s++]],o+=t[e[s++]],o+="-",o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o},"generateUuid")}();var xCe=Object.defineProperty,jl=(i,e)=>xCe(i,"name",{value:e,configurable:!0});function kCe(i){return{asString:jl(async()=>i,"asString"),asFile:jl(()=>{},"asFile"),value:typeof i=="string"?i:void 0}}jl(kCe,"createStringDataTransferItem");function NCe(i,e,t){const n={id:Gp(),name:i,uri:e,data:t};return{asString:jl(async()=>"","asString"),asFile:jl(()=>n,"asFile"),value:void 0}}jl(NCe,"createFileDataTransferItem");class t$e{static{jl(this,"VSDataTransfer")}_entries=new Map;get size(){let e=0;for(const t of this._entries)e++;return e}has(e){return this._entries.has(this.toKey(e))}matches(e){const t=[...this._entries.keys()];return Zt.some(this,([n,s])=>s.asFile())&&t.push("files"),IH(uE(e),t)}get(e){return this._entries.get(this.toKey(e))?.[0]}append(e,t){const n=this._entries.get(e);n?n.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*[Symbol.iterator](){for(const[e,t]of this._entries)for(const n of t)yield[e,n]}toKey(e){return uE(e)}}function uE(i){return i.toLowerCase()}jl(uE,"normalizeMimeType");function PCe(i,e){return IH(uE(i),e.map(uE))}jl(PCe,"matchesMimeType");function IH(i,e){if(i==="*/*")return e.length>0;if(e.includes(i))return!0;const t=i.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!t)return!1;const[n,s,o]=t;return o==="*"?e.some(r=>r.startsWith(s+"/")):!1}jl(IH,"matchesMimeType_normalized");const hx=Object.freeze({create:jl(i=>yb(i.map(e=>e.toString())).join(`\r
`),"create"),split:jl(i=>i.split(`\r
`),"split"),parse:jl(i=>hx.split(i).filter(e=>!e.startsWith("#")),"parse")});var RCe=Object.defineProperty,OCe=(i,e)=>RCe(i,"name",{value:e,configurable:!0});class Qv{constructor(e){this.value=e}static{OCe(this,"HierarchicalKind")}static sep=".";static None=new Qv("@@none@@");static Empty=new Qv("");equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+Qv.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(...e){return new Qv((this.value?[this.value,...e]:e).join(Qv.sep))}}var MCe=Object.defineProperty,BCe=(i,e)=>MCe(i,"name",{value:e,configurable:!0}),wZ=(i=>(i[i.Null=0]="Null",i[i.PlainText=1]="PlainText",i))(wZ||{}),qC=(i=>(i[i.NotSet=-1]="NotSet",i[i.None=0]="None",i[i.Italic=1]="Italic",i[i.Bold=2]="Bold",i[i.Underline=4]="Underline",i[i.Strikethrough=8]="Strikethrough",i))(qC||{}),oa=(i=>(i[i.None=0]="None",i[i.DefaultForeground=1]="DefaultForeground",i[i.DefaultBackground=2]="DefaultBackground",i))(oa||{}),Lo=(i=>(i[i.Other=0]="Other",i[i.Comment=1]="Comment",i[i.String=2]="String",i[i.RegEx=3]="RegEx",i))(Lo||{}),Ai=(i=>(i[i.LANGUAGEID_MASK=255]="LANGUAGEID_MASK",i[i.TOKEN_TYPE_MASK=768]="TOKEN_TYPE_MASK",i[i.BALANCED_BRACKETS_MASK=1024]="BALANCED_BRACKETS_MASK",i[i.FONT_STYLE_MASK=30720]="FONT_STYLE_MASK",i[i.FOREGROUND_MASK=0xff8000]="FOREGROUND_MASK",i[i.BACKGROUND_MASK=0xff000000]="BACKGROUND_MASK",i[i.ITALIC_MASK=2048]="ITALIC_MASK",i[i.BOLD_MASK=4096]="BOLD_MASK",i[i.UNDERLINE_MASK=8192]="UNDERLINE_MASK",i[i.STRIKETHROUGH_MASK=16384]="STRIKETHROUGH_MASK",i[i.SEMANTIC_USE_ITALIC=1]="SEMANTIC_USE_ITALIC",i[i.SEMANTIC_USE_BOLD=2]="SEMANTIC_USE_BOLD",i[i.SEMANTIC_USE_UNDERLINE=4]="SEMANTIC_USE_UNDERLINE",i[i.SEMANTIC_USE_STRIKETHROUGH=8]="SEMANTIC_USE_STRIKETHROUGH",i[i.SEMANTIC_USE_FOREGROUND=16]="SEMANTIC_USE_FOREGROUND",i[i.SEMANTIC_USE_BACKGROUND=32]="SEMANTIC_USE_BACKGROUND",i[i.LANGUAGEID_OFFSET=0]="LANGUAGEID_OFFSET",i[i.TOKEN_TYPE_OFFSET=8]="TOKEN_TYPE_OFFSET",i[i.BALANCED_BRACKETS_OFFSET=10]="BALANCED_BRACKETS_OFFSET",i[i.FONT_STYLE_OFFSET=11]="FONT_STYLE_OFFSET",i[i.FOREGROUND_OFFSET=15]="FOREGROUND_OFFSET",i[i.BACKGROUND_OFFSET=24]="BACKGROUND_OFFSET",i))(Ai||{});class Id{static{BCe(this,"TokenMetadata")}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&0xff8000)>>>15}static getBackground(e){return(e&0xff000000)>>>24}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e);const s=this.getFontStyle(e);return s&1&&(n+=" mtki"),s&2&&(n+=" mtkb"),s&4&&(n+=" mtku"),s&8&&(n+=" mtks"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),s=this.getFontStyle(e);let o=`color: ${t[n]};`;s&1&&(o+="font-style: italic;"),s&2&&(o+="font-weight: bold;");let r="";return s&4&&(r+=" underline"),s&8&&(r+=" line-through"),r&&(o+=`text-decoration:${r};`),o}static getPresentationFromMetadata(e){const t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:!!(n&1),bold:!!(n&2),underline:!!(n&4),strikethrough:!!(n&8)}}}var FCe=Object.defineProperty,Qi=(i,e)=>FCe(i,"name",{value:e,configurable:!0});function VCe(){return Object.create(null)}Qi(VCe,"getEmptyExpression");const uI="**",A8="/",_T="[/\\\\]",bT="[^/\\\\]",WCe=/\//g;function PB(i,e){switch(i){case 0:return"";case 1:return`${bT}*?`;default:return`(?:${_T}|${bT}+${_T}${e?`|${_T}${bT}+`:""})*?`}}Qi(PB,"starsToRegExp");function RB(i,e){if(!i)return[];const t=[];let n=!1,s=!1,o="";for(const r of i){switch(r){case e:if(!n&&!s){t.push(o),o="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":s=!0;break;case"]":s=!1;break}o+=r}return o&&t.push(o),t}Qi(RB,"splitGlobAware");function TH(i){if(!i)return"";let e="";const t=RB(i,A8);if(t.every(n=>n===uI))e=".*";else{let n=!1;t.forEach((s,o)=>{if(s===uI){if(n)return;e+=PB(2,o===t.length-1)}else{let r=!1,a="",l=!1,c="";for(const d of s){if(d!=="}"&&r){a+=d;continue}if(l&&(d!=="]"||!c)){let h;d==="-"?h=d:(d==="^"||d==="!")&&!c?h="^":d===A8?h="":h=Yd(d),c+=h;continue}switch(d){case"{":r=!0;continue;case"[":l=!0;continue;case"}":{const u=`(?:${RB(a,",").map(f=>TH(f)).join("|")})`;e+=u,r=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=bT;continue;case"*":e+=PB(1);continue;default:e+=Yd(d)}}o<t.length-1&&(t[o+1]!==uI||o+2<t.length)&&(e+=_T)}n=s===uI})}return e}Qi(TH,"parseRegExp");const HCe=/^\*\*\/\*\.[\w\.-]+$/,UCe=/^\*\*\/([\w\.-]+)\/?$/,zCe=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,$Ce=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,GCe=/^\*\*((\/[\w\.-]+)+)\/?$/,KCe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,x8=new Ry(1e4),k8=Qi(function(){return!1},"FALSE"),Qh=Qi(function(){return null},"NULL");function fP(i,e){if(!i)return Qh;let t;typeof i!="string"?t=i.pattern:t=i,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let s=x8.get(n);if(s)return OB(s,i);let o;return HCe.test(t)?s=CZ(t.substr(4),t):(o=UCe.exec(vT(t,e)))?s=yZ(o[1],t):(e.trimForExclusions?$Ce:zCe).test(t)?s=SZ(t,e):(o=GCe.exec(vT(t,e)))?s=MB(o[1].substr(1),t,!0):(o=KCe.exec(vT(t,e)))?s=MB(o[1],t,!1):s=EZ(t),x8.set(n,s),OB(s,i)}Qi(fP,"parsePattern");function OB(i,e){if(typeof e=="string")return i;const t=Qi(function(n,s){return VA(n,e.base,!Gi)?i(Wy(n.substr(e.base.length),$s),s):null},"wrappedPattern");return t.allBasenames=i.allBasenames,t.allPaths=i.allPaths,t.basenames=i.basenames,t.patterns=i.patterns,t}Qi(OB,"wrapRelativePattern");function vT(i,e){return e.trimForExclusions&&i.endsWith("/**")?i.substr(0,i.length-2):i}Qi(vT,"trimForExclusions");function CZ(i,e){return function(t,n){return typeof t=="string"&&t.endsWith(i)?e:null}}Qi(CZ,"trivia1");function yZ(i,e){const t=`/${i}`,n=`\\${i}`,s=Qi(function(r,a){return typeof r!="string"?null:a?a===i?e:null:r===i||r.endsWith(t)||r.endsWith(n)?e:null},"parsedPattern"),o=[i];return s.basenames=o,s.patterns=[e],s.allBasenames=o,s}Qi(yZ,"trivia2");function SZ(i,e){const t=xH(i.slice(1,-1).split(",").map(a=>fP(a,e)).filter(a=>a!==Qh),i),n=t.length;if(!n)return Qh;if(n===1)return t[0];const s=Qi(function(a,l){for(let c=0,d=t.length;c<d;c++)if(t[c](a,l))return i;return null},"parsedPattern"),o=t.find(a=>!!a.allBasenames);o&&(s.allBasenames=o.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(s.allPaths=r),s}Qi(SZ,"trivia3");function MB(i,e,t){const n=$s===kt.sep,s=n?i:i.replace(WCe,$s),o=$s+s,r=kt.sep+i;let a;return t?a=Qi(function(l,c){return typeof l=="string"&&(l===s||l.endsWith(o)||!n&&(l===i||l.endsWith(r)))?e:null},"parsedPattern"):a=Qi(function(l,c){return typeof l=="string"&&(l===s||!n&&l===i)?e:null},"parsedPattern"),a.allPaths=[(t?"*/":"./")+i],a}Qi(MB,"trivia4and5");function EZ(i){try{const e=new RegExp(`^${TH(i)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?i:null}}catch{return Qh}}Qi(EZ,"toRegExp");function AH(i,e,t){return!i||typeof e!="string"?!1:gE(i)(e,void 0,t)}Qi(AH,"match");function gE(i,e={}){if(!i)return k8;if(typeof i=="string"||LZ(i)){const t=fP(i,e);if(t===Qh)return k8;const n=Qi(function(s,o){return!!t(s,o)},"resultPattern");return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return DZ(i,e)}Qi(gE,"parse");function LZ(i){const e=i;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}Qi(LZ,"isRelativePattern");function jCe(i){return i.allBasenames||[]}Qi(jCe,"getBasenameTerms");function qCe(i){return i.allPaths||[]}Qi(qCe,"getPathTerms");function DZ(i,e){const t=xH(Object.getOwnPropertyNames(i).map(a=>IZ(a,i[a],e)).filter(a=>a!==Qh)),n=t.length;if(!n)return Qh;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=Qi(function(d,h){let u;for(let f=0,p=t.length;f<p;f++){const m=t[f](d,h);if(typeof m=="string")return m;Y0(m)&&(u||(u=[]),u.push(m))}return u?(async()=>{for(const f of u){const p=await f;if(typeof p=="string")return p}return null})():null},"resultExpression"),l=t.find(d=>!!d.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((d,h)=>h.allPaths?d.concat(h.allPaths):d,[]);return c.length&&(a.allPaths=c),a}const s=Qi(function(a,l,c){let d,h;for(let u=0,f=t.length;u<f;u++){const p=t[u];p.requiresSiblings&&c&&(l||(l=EN(a)),d||(d=l.substr(0,l.length-LL(a).length)));const m=p(a,l,d,c);if(typeof m=="string")return m;Y0(m)&&(h||(h=[]),h.push(m))}return h?(async()=>{for(const u of h){const f=await u;if(typeof f=="string")return f}return null})():null},"resultExpression"),o=t.find(a=>!!a.allBasenames);o&&(s.allBasenames=o.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(s.allPaths=r),s}Qi(DZ,"parsedExpression");function IZ(i,e,t){if(e===!1)return Qh;const n=fP(i,t);if(n===Qh)return Qh;if(typeof e=="boolean")return n;if(e){const s=e.when;if(typeof s=="string"){const o=Qi((r,a,l,c)=>{if(!c||!n(r,a))return null;const d=s.replace("$(basename)",()=>l),h=c(d);return Y0(h)?h.then(u=>u?i:null):h?i:null},"result");return o.requiresSiblings=!0,o}}return n}Qi(IZ,"parseExpressionPattern");function xH(i,e){const t=i.filter(a=>!!a.basenames);if(t.length<2)return i;const n=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let s;if(e){s=[];for(let a=0,l=n.length;a<l;a++)s.push(e)}else s=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const o=Qi(function(a,l){if(typeof a!="string")return null;if(!l){let d;for(d=a.length;d>0;d--){const h=a.charCodeAt(d-1);if(h===A.Slash||h===A.Backslash)break}l=a.substr(d)}const c=n.indexOf(l);return c!==-1?s[c]:null},"aggregate");o.basenames=n,o.patterns=s,o.allBasenames=n;const r=i.filter(a=>!a.basenames);return r.push(o),r}Qi(xH,"aggregateBasenameMatches");function YCe(i,e){return ks(i,e,(t,n)=>typeof t=="string"&&typeof n=="string"?t===n:typeof t!="string"&&typeof n!="string"?t.base===n.base&&t.pattern===n.pattern:!1)}Qi(YCe,"patternsEquals");var ZCe=Object.defineProperty,TZ=(i,e)=>ZCe(i,"name",{value:e,configurable:!0});function kH(i,e,t,n,s,o){if(Array.isArray(i)){let r=0;for(const a of i){const l=kH(a,e,t,n,s,o);if(l===10)return l;l>r&&(r=l)}return r}else{if(typeof i=="string")return n?i==="*"?5:i===t?10:0:0;if(i){const{language:r,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:d}=i;if(!n&&!c)return 0;d&&s&&(e=s);let h=0;if(l)if(l===e.scheme)h=10;else if(l==="*")h=5;else return 0;if(r)if(r===t)h=10;else if(r==="*")h=Math.max(h,5);else return 0;if(d)if(d===o)h=10;else if(d==="*"&&o!==void 0)h=Math.max(h,5);else return 0;if(a){let u;if(typeof a=="string"?u=a:u={...a,base:Np(a.base)},u===e.fsPath||AH(u,e.fsPath))h=10;else return 0}return h}else return 0}}TZ(kH,"score");function AZ(i){return typeof i=="string"?!1:Array.isArray(i)?i.some(AZ):!!i.notebookType}TZ(AZ,"targetsNotebooks");var XCe=Object.defineProperty,xZ=(i,e)=>XCe(i,"name",{value:e,configurable:!0});let kZ=class{static{xZ(this,"TokenizationRegistry")}_tokenizationSupports=new Map;_factories=new Map;_onDidChange=new x;onDidChange=this._onDidChange.event;_colorMap;constructor(){this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),ye(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){this._factories.get(e)?.dispose();const n=new QCe(this,e,t);return this._factories.set(e,n),ye(()=>{const s=this._factories.get(e);!s||s!==n||(this._factories.delete(e),s.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const n=this._factories.get(e);return!n||n.isResolved?null:(await n.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const n=this._factories.get(e);return!!(!n||n.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>oa.DefaultBackground?this._colorMap[oa.DefaultBackground]:null}};class QCe extends ${constructor(e,t,n){super(),this._registry=e,this._languageId=t,this._factory=n}static{xZ(this,"TokenizationSupportFactoryData")}_isDisposed=!1;_resolvePromise=null;_isResolved=!1;get isResolved(){return this._isResolved}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}var JCe=Object.defineProperty,eye=(i,e)=>JCe(i,"name",{value:e,configurable:!0}),wT=(i=>(i[i.Unknown=0]="Unknown",i[i.Invalid=3]="Invalid",i[i.LF=1]="LF",i[i.CRLF=2]="CRLF",i))(wT||{});function Kd(i){let e=0,t=0,n=0,s=0;for(let o=0,r=i.length;o<r;o++){const a=i.charCodeAt(o);a===A.CarriageReturn?(e===0&&(t=o),e++,o+1<r&&i.charCodeAt(o+1)===A.LineFeed?(s|=2,o++):s|=3,n=o+1):a===A.LineFeed&&(s|=1,e===0&&(t=o),e++,n=o+1)}return e===0&&(t=i.length),[e,t,i.length-n,s]}eye(Kd,"countEOL");var tye=Object.defineProperty,NZ=(i,e)=>tye(i,"name",{value:e,configurable:!0});class it{constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new Et(`Invalid range: ${this.toString()}`)}static{NZ(this,"OffsetRange")}static addRange(e,t){let n=0;for(;n<t.length&&t[n].endExclusive<e.start;)n++;let s=n;for(;s<t.length&&t[s].start<=e.endExclusive;)s++;if(n===s)t.splice(n,0,e);else{const o=Math.min(e.start,t[n].start),r=Math.max(e.endExclusive,t[s-1].endExclusive);t.splice(n,s-n,new it(o,r))}}static tryCreate(e,t){if(!(e>t))return new it(e,t)}static ofLength(e){return new it(0,e)}static ofStartAndLength(e,t){return new it(e,e+t)}static emptyAt(e){return new it(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new it(this.start+e,this.endExclusive+e)}deltaStart(e){return new it(this.start+e,this.endExclusive)}deltaEnd(e){return new it(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new it(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(t<=n)return new it(t,n)}intersectionLength(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-t)}intersects(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return t<n}intersectsOrTouches(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return t<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new Et(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new Et(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){const t=[];for(let n=this.start;n<this.endExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}}class NH{static{NZ(this,"OffsetRangeSet")}_sortedRanges=[];addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let n=t;for(;n<this._sortedRanges.length&&this._sortedRanges[n].start<=e.endExclusive;)n++;if(t===n)this._sortedRanges.splice(t,0,e);else{const s=Math.min(e.start,this._sortedRanges[t].start),o=Math.max(e.endExclusive,this._sortedRanges[n-1].endExclusive);this._sortedRanges.splice(t,n-t,new it(s,o))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new NH;for(const n of this._sortedRanges){const s=n.intersect(e);s&&t.addRange(s)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}var iye=Object.defineProperty,PH=(i,e)=>iye(i,"name",{value:e,configurable:!0});class ux{constructor(e){this._tokenInfo=e}static{PH(this,"TokenArray")}static create(e){return new ux(e)}forEach(e){let t=0;for(const n of this._tokenInfo){const s=new it(t,t+n.length);e(s,n),t+=n.length}}slice(e){const t=[];let n=0;for(const s of this._tokenInfo){const o=n,r=o+s.length;if(r>e.start){if(o>=e.endExclusive)break;const a=Math.max(0,e.start-o),l=Math.max(0,r-e.endExclusive);t.push(new PZ(s.length-a-l,s.metadata))}n+=s.length}return ux.create(t)}}class PZ{constructor(e,t){this.length=e,this.metadata=t}static{PH(this,"TokenInfo")}}class nye{static{PH(this,"TokenArrayBuilder")}_tokens=[];add(e,t){this._tokens.push(new PZ(e,t))}build(){return ux.create(this._tokens)}}var sye=Object.defineProperty,RH=(i,e)=>sye(i,"name",{value:e,configurable:!0});class ds{static{RH(this,"LineTokens")}static createEmpty(e,t){const n=ds.defaultTokenMetadata,s=new Uint32Array(2);return s[0]=e.length,s[1]=n,new ds(s,e,t)}static createFromTextAndMetadata(e,t){let n=0,s="";const o=new Array;for(const{text:r,metadata:a}of e)o.push(n+r.length,a),n+=r.length,s+=r;return new ds(new Uint32Array(o),s,t)}static convertToEndOffset(e,t){const s=(e.length>>>1)-1;for(let o=0;o<s;o++)e[o<<1]=e[o+1<<1];e[s<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,s=(e.length>>>1)-1;for(;n<s;){const o=n+Math.floor((s-n)/2),r=e[o<<1];if(r===t)return o+1;r<t?n=o+1:r>t&&(s=o)}return n}_lineTokensBrand=void 0;_tokens;_tokensCount;_text;languageIdCodec;static defaultTokenMetadata=(qC.None<<Ai.FONT_STYLE_OFFSET|oa.DefaultForeground<<Ai.FOREGROUND_OFFSET|oa.DefaultBackground<<Ai.BACKGROUND_OFFSET)>>>0;constructor(e,t,n){this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=n}equals(e){return e instanceof ds?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const s=t<<1,o=s+(n<<1);for(let r=s;r<o;r++)if(this._tokens[r]!==e._tokens[r])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=Id.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return Id.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return Id.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return Id.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return Id.getInlineStyleFromMetadata(n,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return Id.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return ds.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new OH(this,e,t,n)}withInserted(e){if(e.length===0)return this;let t=0,n=0,s="";const o=new Array;let r=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){s+=this._text.substring(r,a);const c=this._tokens[(t<<1)+1];o.push(s.length,c),t++,r=a}else if(l){if(l.offset>r){s+=this._text.substring(r,l.offset);const c=this._tokens[(t<<1)+1];o.push(s.length,c),r=l.offset}s+=l.text,o.push(s.length,l.tokenMetadata),n++}else break}return new ds(new Uint32Array(o),s,this.languageIdCodec)}getTokensInRange(e){const t=new nye,n=this.findTokenIndexAtOffset(e.start),s=this.findTokenIndexAtOffset(e.endExclusive);for(let o=n;o<=s;o++){const a=new it(this.getStartOffset(o),this.getEndOffset(o)).intersectionLength(e);a>0&&t.add(a,this.getMetadata(o))}return t.build()}getTokenText(e){const t=this.getStartOffset(e),n=this.getEndOffset(e);return this._text.substring(t,n)}forEach(e){const t=this.getCount();for(let n=0;n<t;n++)e(n)}}class OH{static{RH(this,"SliceLineTokens")}_source;_startOffset;_endOffset;_deltaOffset;_firstTokenIndex;_tokensCount;languageIdCodec;constructor(e,t,n,s){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=s,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let o=this._firstTokenIndex,r=e.getCount();o<r&&!(e.getStartOffset(o)>=n);o++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof OH?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){const t=this._firstTokenIndex+e,n=this._source.getStartOffset(t),s=this._source.getEndOffset(t);let o=this._source.getTokenText(t);return n<this._startOffset&&(o=o.substring(this._startOffset-n)),s>this._endOffset&&(o=o.substring(0,o.length-(s-this._endOffset))),o}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}}function oye(i,e){const t=e.lineNumber;if(!i.tokenization.isCheapToTokenize(t))return;i.tokenization.forceTokenization(t);const n=i.tokenization.getLineTokens(t),s=n.findTokenIndexAtOffset(e.column-1);return n.getStandardTokenType(s)}RH(oye,"getStandardTokenTypeAtPosition");var rye=Object.defineProperty,RZ=(i,e)=>rye(i,"name",{value:e,configurable:!0});const ju=new Uint32Array(0).buffer;class Bo{static{RZ(this,"ContiguousTokensEditing")}static deleteBeginning(e,t){return e===null||e===ju?e:Bo.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===ju)return e;const n=Hh(e),s=n[n.length-2];return Bo.delete(e,t,s)}static delete(e,t,n){if(e===null||e===ju||t===n)return e;const s=Hh(e),o=s.length>>>1;if(t===0&&s[s.length-2]===n)return ju;const r=ds.findIndexInTokensArray(s,t),a=r>0?s[r-1<<1]:0,l=s[r<<1];if(n<l){const f=n-t;for(let p=r;p<o;p++)s[p<<1]-=f;return e}let c,d;a!==t?(s[r<<1]=t,c=r+1<<1,d=t):(c=r<<1,d=a);const h=n-t;for(let f=r+1;f<o;f++){const p=s[f<<1]-h;p>d&&(s[c++]=p,s[c++]=s[(f<<1)+1],d=p)}if(c===s.length)return e;const u=new Uint32Array(c);return u.set(s.subarray(0,c),0),u.buffer}static append(e,t){if(t===ju)return e;if(e===ju)return t;if(e===null)return e;if(t===null)return null;const n=Hh(e),s=Hh(t),o=s.length>>>1,r=new Uint32Array(n.length+s.length);r.set(n,0);let a=n.length;const l=n[n.length-2];for(let c=0;c<o;c++)r[a++]=s[c<<1]+l,r[a++]=s[(c<<1)+1];return r.buffer}static insert(e,t,n){if(e===null||e===ju)return e;const s=Hh(e),o=s.length>>>1;let r=ds.findIndexInTokensArray(s,t);r>0&&s[r-1<<1]===t&&r--;for(let a=r;a<o;a++)s[a<<1]+=n;return e}}function Hh(i){return i instanceof Uint32Array?i:new Uint32Array(i)}RZ(Hh,"toUint32Array");var aye=Object.defineProperty,OZ=(i,e)=>aye(i,"name",{value:e,configurable:!0});let ct=class Wa{static{OZ(this,"LineRange")}static fromRange(e){return new Wa(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new Wa(e.startLineNumber,e.endLineNumber+1)}static subtract(e,t){return t?e.startLineNumber<t.startLineNumber&&t.endLineNumberExclusive<e.endLineNumberExclusive?[new Wa(e.startLineNumber,t.startLineNumber),new Wa(t.endLineNumberExclusive,e.endLineNumberExclusive)]:t.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=t.endLineNumberExclusive?[]:t.endLineNumberExclusive<e.endLineNumberExclusive?[new Wa(Math.max(t.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new Wa(e.startLineNumber,Math.min(t.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let t=new Pl(e[0].slice());for(let n=1;n<e.length;n++)t=t.getUnion(new Pl(e[n].slice()));return t.ranges}static join(e){if(e.length===0)throw new Et("lineRanges cannot be empty");let t=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let s=1;s<e.length;s++)t=Math.min(t,e[s].startLineNumber),n=Math.max(n,e[s].endLineNumberExclusive);return new Wa(t,n)}static ofLength(e,t){return new Wa(e,e+t)}static deserialize(e){return new Wa(e[0],e[1])}startLineNumber;endLineNumberExclusive;constructor(e,t){if(e>t)throw new Et(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new Wa(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new Wa(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new Wa(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=n)return new Wa(t,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new V(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new V(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new it(this.startLineNumber-1,this.endLineNumberExclusive-1)}};class Pl{constructor(e=[]){this._normalizedRanges=e}static{OZ(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;const t=BC(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),n=Cb(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)this._normalizedRanges.splice(t,0,e);else if(t===n-1){const s=this._normalizedRanges[t];this._normalizedRanges[t]=s.join(e)}else{const s=this._normalizedRanges[t].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(t,n-t,s)}}contains(e){const t=wb(this._normalizedRanges,n=>n.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=wb(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;const t=[];let n=0,s=0,o=null;for(;n<this._normalizedRanges.length||s<e._normalizedRanges.length;){let r=null;if(n<this._normalizedRanges.length&&s<e._normalizedRanges.length){const a=this._normalizedRanges[n],l=e._normalizedRanges[s];a.startLineNumber<l.startLineNumber?(r=a,n++):(r=l,s++)}else n<this._normalizedRanges.length?(r=this._normalizedRanges[n],n++):(r=e._normalizedRanges[s],s++);o===null?o=r:o.endLineNumberExclusive>=r.startLineNumber?o=new ct(o.startLineNumber,Math.max(o.endLineNumberExclusive,r.endLineNumberExclusive)):(t.push(o),o=r)}return o!==null&&t.push(o),new Pl(t)}subtractFrom(e){const t=BC(this._normalizedRanges,r=>r.endLineNumberExclusive>=e.startLineNumber),n=Cb(this._normalizedRanges,r=>r.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)return new Pl([e]);const s=[];let o=e.startLineNumber;for(let r=t;r<n;r++){const a=this._normalizedRanges[r];a.startLineNumber>o&&s.push(new ct(o,a.startLineNumber)),o=a.endLineNumberExclusive}return o<e.endLineNumberExclusive&&s.push(new ct(o,e.endLineNumberExclusive)),new Pl(s)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){const t=[];let n=0,s=0;for(;n<this._normalizedRanges.length&&s<e._normalizedRanges.length;){const o=this._normalizedRanges[n],r=e._normalizedRanges[s],a=o.intersect(r);a&&!a.isEmpty&&t.push(a),o.endLineNumberExclusive<r.endLineNumberExclusive?n++:s++}return new Pl(t)}getWithDelta(e){return new Pl(this._normalizedRanges.map(t=>t.delta(e)))}}var lye=Object.defineProperty,cye=(i,e)=>lye(i,"name",{value:e,configurable:!0});class gx{static{cye(this,"ContiguousMultilineTokens")}static deserialize(e,t,n){const s=new Uint32Array(e.buffer),o=br(e,t);t+=4;const r=br(e,t);t+=4;const a=[];for(let l=0;l<r;l++){const c=br(e,t);t+=4,a.push(s.subarray(t/4,t/4+c/4)),t+=c}return n.push(new gx(o,a)),t}_startLineNumber;_tokens;get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineRange(){return new ct(this._startLineNumber,this._startLineNumber+this._tokens.length)}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}serializeSize(){let e=0;e+=4,e+=4;for(let t=0;t<this._tokens.length;t++){const n=this._tokens[t];if(!(n instanceof Uint32Array))throw new Error("Not supported!");e+=4,e+=n.byteLength}return e}serialize(e,t){vr(e,this._startLineNumber,t),t+=4,vr(e,this._tokens.length,t),t+=4;for(let n=0;n<this._tokens.length;n++){const s=this._tokens[n];if(!(s instanceof Uint32Array))throw new Error("Not supported!");vr(e,s.byteLength,t),t+=4,e.set(new Uint8Array(s.buffer),t),t+=s.byteLength}return t}applyEdit(e,t){const[n,s]=Kd(t);this._acceptDeleteRange(e),this._acceptInsertText(new j(e.startLineNumber,e.startColumn),n,s)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){const s=n-t;this._startLineNumber-=s;return}if(!(t>=this._tokens.length)){if(t<0&&n>=this._tokens.length){this._startLineNumber=0,this._tokens=[];return}if(t===n){this._tokens[t]=Bo.delete(this._tokens[t],e.startColumn-1,e.endColumn-1);return}if(t>=0)if(this._tokens[t]=Bo.deleteEnding(this._tokens[t],e.startColumn-1),n<this._tokens.length){const s=Bo.deleteBeginning(this._tokens[n],e.endColumn-1);this._tokens[t]=Bo.append(this._tokens[t],s),this._tokens.splice(t+1,n-t)}else this._tokens[t]=Bo.append(this._tokens[t],null),this._tokens=this._tokens.slice(0,t+1);else{const s=-t;this._startLineNumber-=s,this._tokens[n]=Bo.deleteBeginning(this._tokens[n],e.endColumn-1),this._tokens=this._tokens.slice(n)}}}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const s=e.lineNumber-this._startLineNumber;if(s<0){this._startLineNumber+=t;return}if(!(s>=this._tokens.length)){if(t===0){this._tokens[s]=Bo.insert(this._tokens[s],e.column-1,n);return}this._tokens[s]=Bo.deleteEnding(this._tokens[s],e.column-1),this._tokens[s]=Bo.insert(this._tokens[s],e.column-1,n),this._insertLines(e.lineNumber,t)}}_insertLines(e,t){if(t===0)return;const n=[];for(let s=0;s<t;s++)n[s]=null;this._tokens=Py(this._tokens,e,n)}}var dye=Object.defineProperty,N8=(i,e)=>dye(i,"name",{value:e,configurable:!0}),fx=(i=>(i[i.Ignore=0]="Ignore",i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error",i))(fx||{});(i=>{const e="error",t="warning",n="warn",s="info",o="ignore";function r(l){return l?Gh(e,l)?3:Gh(t,l)||Gh(n,l)?2:Gh(s,l)?1:0:0}i.fromValue=r,N8(r,"fromValue");function a(l){switch(l){case 3:return e;case 2:return t;case 1:return s;default:return o}}i.toString=a,N8(a,"toString")})(fx||(fx={}));var So=fx,hye=Object.defineProperty,tD=(i,e)=>hye(i,"name",{value:e,configurable:!0});function MZ(i){return i.scheme===Ve.vscodeRemote?i.authority:void 0}tD(MZ,"getRemoteAuthority");function pP(i){if(!i)return;const e=i.indexOf("+");return e<0?i:i.substr(0,e)}tD(pP,"getRemoteName");function uye(i){const{host:e,port:t}=MH(i);if(typeof t>"u")throw new Error(`Invalid remote authority: ${i}. It must either be a remote of form <remoteName>+<arg> or a remote host of form <host>:<port>.`);return{host:e,port:t}}tD(uye,"parseAuthorityWithPort");function gye(i,e){let{host:t,port:n}=MH(i);return typeof n>"u"&&(n=e),{host:t,port:n}}tD(gye,"parseAuthorityWithOptionalPort");function MH(i){const e=i.match(/^(\[[0-9a-z:]+\]):(\d+)$/);if(e)return{host:e[1],port:parseInt(e[2],10)};const t=i.match(/^(\[[0-9a-z:]+\])$/);if(t)return{host:t[1],port:void 0};const n=i.match(/(.*):(\d+)$/);return n?{host:n[1],port:parseInt(n[2],10)}:{host:i,port:void 0}}tD(MH,"parseAuthority");var fye=Object.defineProperty,_u=(i,e)=>fye(i,"name",{value:e,configurable:!0});const pye="undefined_publisher";function mye(i){if(typeof i=="object"&&i!==null&&i.supported!==!0)return i.description}_u(mye,"getWorkspaceSupportTypeMessage");const _ye=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"];var fE=(i=>(i[i.System=0]="System",i[i.User=1]="User",i))(fE||{}),ut=(i=>(i.WIN32_X64="win32-x64",i.WIN32_ARM64="win32-arm64",i.LINUX_X64="linux-x64",i.LINUX_ARM64="linux-arm64",i.LINUX_ARMHF="linux-armhf",i.ALPINE_X64="alpine-x64",i.ALPINE_ARM64="alpine-arm64",i.DARWIN_X64="darwin-x64",i.DARWIN_ARM64="darwin-arm64",i.WEB="web",i.UNIVERSAL="universal",i.UNKNOWN="unknown",i.UNDEFINED="undefined",i))(ut||{});class Xa{static{_u(this,"ExtensionIdentifier")}value;_lower;constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){const n=typeof e=="string"?e:e.value,s=typeof t=="string"?t:t.value;return Gh(n,s)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class p1{static{_u(this,"ExtensionIdentifierSet")}_set=new Set;get size(){return this._set.size}constructor(e){if(e)for(const t of e)this.add(t)}add(e){this._set.add(Xa.toKey(e))}delete(e){return this._set.delete(Xa.toKey(e))}has(e){return this._set.has(Xa.toKey(e))}}class bye{static{_u(this,"ExtensionIdentifierMap")}_map=new Map;clear(){this._map.clear()}delete(e){this._map.delete(Xa.toKey(e))}get(e){return this._map.get(Xa.toKey(e))}has(e){return this._map.has(Xa.toKey(e))}set(e,t){this._map.set(Xa.toKey(e),t)}values(){return this._map.values()}forEach(e){this._map.forEach(e)}[Symbol.iterator](){return this._map[Symbol.iterator]()}}function vye(i){return BZ(i)}_u(vye,"isApplicationScopedExtension");function BZ(i){return i.contributes&&i.contributes.localizations?i.contributes.localizations.length>0:!1}_u(BZ,"isLanguagePackExtension");function wye(i){return i.contributes&&i.contributes.authentication?i.contributes.authentication.length>0:!1}_u(wye,"isAuthenticationProviderExtension");function Cye(i,e){if(e){const t=`onResolveRemoteAuthority:${pP(e)}`;return!!i.activationEvents?.includes(t)}return!1}_u(Cye,"isResolverExtension");function yye(i){return i.map(e=>{const[t,n]=e.split("@");return{proposalName:t,version:n?parseInt(n):void 0}})}_u(yye,"parseApiProposals");function Sye(i){return i.map(e=>e.split("@")[0])}_u(Sye,"parseEnabledApiProposalNames");De("IBuiltinExtensionsScannerService");var Eye=Object.defineProperty,mw=(i,e)=>Eye(i,"name",{value:e,configurable:!0}),pE=(i=>(i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error",i))(pE||{});(i=>{function e(r,a){return a-r}i.compare=e,mw(e,"compare");const t=Object.create(null);t[8]=g("sev.error","Error"),t[4]=g("sev.warning","Warning"),t[2]=g("sev.info","Info");function n(r){return t[r]||""}i.toString=n,mw(n,"toString");function s(r){switch(r){case So.Error:return 8;case So.Warning:return 4;case So.Info:return 2;case So.Ignore:return 1}}i.fromSeverity=s,mw(s,"fromSeverity");function o(r){switch(r){case 8:return So.Error;case 4:return So.Warning;case 2:return So.Info;case 1:return So.Ignore}}i.toSeverity=o,mw(o,"toSeverity")})(pE||(pE={}));var P8;(i=>{const e="";function t(s){return n(s,!0)}i.makeKey=t,mw(t,"makeKey");function n(s,o){const r=[e];return s.source?r.push(s.source.replace("\xa6","\\\xa6")):r.push(e),s.code?typeof s.code=="string"?r.push(s.code.replace("\xa6","\\\xa6")):r.push(s.code.value.replace("\xa6","\\\xa6")):r.push(e),s.severity!==void 0&&s.severity!==null?r.push(pE.toString(s.severity)):r.push(e),s.message&&o?r.push(s.message.replace("\xa6","\\\xa6")):r.push(e),s.startLineNumber!==void 0&&s.startLineNumber!==null?r.push(s.startLineNumber.toString()):r.push(e),s.startColumn!==void 0&&s.startColumn!==null?r.push(s.startColumn.toString()):r.push(e),s.endLineNumber!==void 0&&s.endLineNumber!==null?r.push(s.endLineNumber.toString()):r.push(e),s.endColumn!==void 0&&s.endColumn!==null?r.push(s.endColumn.toString()):r.push(e),r.push(e),r.join("\xa6")}i.makeKeyOptionalMessage=n,mw(n,"makeKeyOptionalMessage")})(P8||(P8={}));const Lye=De("markerService");var Dye=Object.defineProperty,cl=(i,e)=>Dye(i,"name",{value:e,configurable:!0});let Iye=class{constructor(e,t,n){this.offset=e,this.type=t,this.language=n}static{cl(this,"Token")}_tokenBrand=void 0;toString(){return"("+this.offset+", "+this.type+")"}};class Tye{constructor(e,t){this.tokens=e,this.endState=t}static{cl(this,"TokenizationResult")}_tokenizationResultBrand=void 0}class Aye{constructor(e,t){this.tokens=e,this.endState=t}static{cl(this,"EncodedTokenizationResult")}_encodedTokenizationResultBrand=void 0}var R8;(i=>{const e=new Map;e.set(0,ee.symbolMethod),e.set(1,ee.symbolFunction),e.set(2,ee.symbolConstructor),e.set(3,ee.symbolField),e.set(4,ee.symbolVariable),e.set(5,ee.symbolClass),e.set(6,ee.symbolStruct),e.set(7,ee.symbolInterface),e.set(8,ee.symbolModule),e.set(9,ee.symbolProperty),e.set(10,ee.symbolEvent),e.set(11,ee.symbolOperator),e.set(12,ee.symbolUnit),e.set(13,ee.symbolValue),e.set(15,ee.symbolEnum),e.set(14,ee.symbolConstant),e.set(15,ee.symbolEnum),e.set(16,ee.symbolEnumMember),e.set(17,ee.symbolKeyword),e.set(27,ee.symbolSnippet),e.set(18,ee.symbolText),e.set(19,ee.symbolColor),e.set(20,ee.symbolFile),e.set(21,ee.symbolReference),e.set(22,ee.symbolCustomColor),e.set(23,ee.symbolFolder),e.set(24,ee.symbolTypeParameter),e.set(25,ee.account),e.set(26,ee.issues);function t(o){let r=e.get(o);return r||(console.info("No codicon found for CompletionItemKind "+o),r=ee.symbolProperty),r}i.toIcon=t,cl(t,"toIcon");const n=new Map;n.set("method",0),n.set("function",1),n.set("constructor",2),n.set("field",3),n.set("variable",4),n.set("class",5),n.set("struct",6),n.set("interface",7),n.set("module",8),n.set("property",9),n.set("event",10),n.set("operator",11),n.set("unit",12),n.set("value",13),n.set("constant",14),n.set("enum",15),n.set("enum-member",16),n.set("enumMember",16),n.set("keyword",17),n.set("snippet",27),n.set("text",18),n.set("color",19),n.set("file",20),n.set("reference",21),n.set("customcolor",22),n.set("folder",23),n.set("type-parameter",24),n.set("typeParameter",24),n.set("account",25),n.set("issue",26);function s(o,r){let a=n.get(o);return typeof a>"u"&&!r&&(a=9),a}i.fromString=s,cl(s,"fromString")})(R8||(R8={}));class s$e{constructor(e,t,n,s){this.range=e,this.text=t,this.completionKind=n,this.isSnippetText=s}static{cl(this,"SelectedSuggestionInfo")}equals(e){return V.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}function xye(i){return i&&ne.isUri(i.uri)&&V.isIRange(i.range)&&(V.isIRange(i.originSelectionRange)||V.isIRange(i.targetSelectionRange))}cl(xye,"isLocationLink");function kye(i){return i&&ne.isUri(i.uri)&&V.isIRange(i.range)}cl(kye,"isLocation");const Nye={17:g("Array","array"),16:g("Boolean","boolean"),4:g("Class","class"),13:g("Constant","constant"),8:g("Constructor","constructor"),9:g("Enum","enumeration"),21:g("EnumMember","enumeration member"),23:g("Event","event"),7:g("Field","field"),0:g("File","file"),11:g("Function","function"),10:g("Interface","interface"),19:g("Key","key"),5:g("Method","method"),1:g("Module","module"),2:g("Namespace","namespace"),20:g("Null","null"),15:g("Number","number"),18:g("Object","object"),24:g("Operator","operator"),3:g("Package","package"),6:g("Property","property"),14:g("String","string"),22:g("Struct","struct"),25:g("TypeParameter","type parameter"),12:g("Variable","variable")};function Pye(i,e){return g("symbolAriaLabel","{0} ({1})",i,Nye[e])}cl(Pye,"getAriaLabelForSymbol");var BB;(i=>{const e=new Map;e.set(0,ee.symbolFile),e.set(1,ee.symbolModule),e.set(2,ee.symbolNamespace),e.set(3,ee.symbolPackage),e.set(4,ee.symbolClass),e.set(5,ee.symbolMethod),e.set(6,ee.symbolProperty),e.set(7,ee.symbolField),e.set(8,ee.symbolConstructor),e.set(9,ee.symbolEnum),e.set(10,ee.symbolInterface),e.set(11,ee.symbolFunction),e.set(12,ee.symbolVariable),e.set(13,ee.symbolConstant),e.set(14,ee.symbolString),e.set(15,ee.symbolNumber),e.set(16,ee.symbolBoolean),e.set(17,ee.symbolArray),e.set(18,ee.symbolObject),e.set(19,ee.symbolKey),e.set(20,ee.symbolNull),e.set(21,ee.symbolEnumMember),e.set(22,ee.symbolStruct),e.set(23,ee.symbolEvent),e.set(24,ee.symbolOperator),e.set(25,ee.symbolTypeParameter);function t(n){let s=e.get(n);return s||(console.info("No codicon found for SymbolKind "+n),s=ee.symbolProperty),s}i.toIcon=t,cl(t,"toIcon")})(BB||(BB={}));let o$e=class{static{cl(this,"TextEdit")}static asEditOperation(e){return sCe.replace(V.lift(e.range),e.text)}};class Rf{constructor(e){this.value=e}static{cl(this,"FoldingRangeKind")}static Comment=new Rf("comment");static Imports=new Rf("imports");static Region=new Rf("region");static fromValue(e){switch(e){case"comment":return Rf.Comment;case"imports":return Rf.Imports;case"region":return Rf.Region}return new Rf(e)}}var O8;(i=>{function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}i.is=e,cl(e,"is")})(O8||(O8={}));class a$e{constructor(e){this.createSupport=e}static{cl(this,"LazyTokenizationSupport")}_tokenizationSupport=null;dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const lu=new kZ,FB=new kZ,Ra=De("languageService");var Rye=Object.defineProperty,BH=(i,e)=>Rye(i,"name",{value:e,configurable:!0});function Cp(i,e){const t=i.getCount(),n=i.findTokenIndexAtOffset(e),s=i.getLanguageId(n);let o=n;for(;o+1<t&&i.getLanguageId(o+1)===s;)o++;let r=n;for(;r>0&&i.getLanguageId(r-1)===s;)r--;return new Oye(i,s,r,o+1,i.getStartOffset(r),i.getEndOffset(o))}BH(Cp,"createScopedLineTokens");class Oye{static{BH(this,"ScopedLineTokens")}_scopedLineTokensBrand=void 0;languageIdCodec;languageId;_actual;_firstTokenIndex;_lastTokenIndex;firstCharOffset;_lastCharOffset;constructor(e,t,n,s,o,r){this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=s,this.firstCharOffset=o,this._lastCharOffset=r,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}var FZ=(i=>(i[i.value=Lo.Comment|Lo.String|Lo.RegEx]="value",i))(FZ||{});function md(i){return(i&FZ.value)!==0}BH(md,"ignoreBracketsInToken");var Mye=Object.defineProperty,FH=(i,e)=>Mye(i,"name",{value:e,configurable:!0}),so=(i=>(i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent",i))(so||{});class NO{static{FH(this,"StandardAutoClosingPairConditional")}open;close;_inString;_inComment;_inRegEx;_neutralCharacter=null;_neutralCharacterSearched=!1;constructor(e){if(this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case Lo.Other:return!0;case Lo.Comment:return this._inComment;case Lo.String:return this._inString;case Lo.RegEx:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const n=e.findTokenIndexAtOffset(t-2),s=e.getStandardTokenType(n);return this.isOK(s)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){const s=String.fromCharCode(n);if(!this.open.includes(s)&&!this.close.includes(s))return s}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(A.Digit0,A.Digit9)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(A.a,A.z)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(A.A,A.Z))),this._neutralCharacter}}class Bye{static{FH(this,"AutoClosingPairs")}autoClosingPairsOpenByStart;autoClosingPairsOpenByEnd;autoClosingPairsCloseByStart;autoClosingPairsCloseByEnd;autoClosingPairsCloseSingleChar;constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)Jv(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),Jv(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),Jv(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),Jv(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&Jv(this.autoClosingPairsCloseSingleChar,t.close,t)}}function Jv(i,e,t){i.has(e)?i.get(e).push(t):i.set(e,[t])}FH(Jv,"appendEntry");var Fye=Object.defineProperty,Ar=(i,e)=>Fye(i,"name",{value:e,configurable:!0});class px{static{Ar(this,"RichEditBracket")}_richEditBracketBrand=void 0;languageId;index;open;close;forwardRegex;reversedRegex;_openSet;_closeSet;constructor(e,t,n,s,o,r){this.languageId=e,this.index=t,this.open=n,this.close=s,this.forwardRegex=o,this.reversedRegex=r,this._openSet=px._toSet(this.open),this._closeSet=px._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}function VZ(i){const e=i.length;i=i.map(r=>[r[0].toLowerCase(),r[1].toLowerCase()]);const t=[];for(let r=0;r<e;r++)t[r]=r;const n=Ar((r,a)=>{const[l,c]=r,[d,h]=a;return l===d||l===h||c===d||c===h},"areOverlapping"),s=Ar((r,a)=>{const l=Math.min(r,a),c=Math.max(r,a);for(let d=0;d<e;d++)t[d]===c&&(t[d]=l)},"mergeGroups");for(let r=0;r<e;r++){const a=i[r];for(let l=r+1;l<e;l++){const c=i[l];n(a,c)&&s(t[r],t[l])}}const o=[];for(let r=0;r<e;r++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===r){const[d,h]=i[c];a.push(d),l.push(h)}a.length>0&&o.push({open:a,close:l})}return o}Ar(VZ,"groupFuzzyBrackets");class Vye{static{Ar(this,"RichEditBrackets")}_richEditBracketsBrand=void 0;brackets;forwardRegex;reversedRegex;maxBracketLength;textIsBracket;textIsOpenBracket;constructor(e,t){const n=VZ(t);this.brackets=n.map((s,o)=>new px(e,o,s.open,s.close,WZ(s.open,s.close,n,o),HZ(s.open,s.close,n,o))),this.forwardRegex=UZ(this.brackets),this.reversedRegex=zZ(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const s of this.brackets){for(const o of s.open)this.textIsBracket[o]=s,this.textIsOpenBracket[o]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,o.length);for(const o of s.close)this.textIsBracket[o]=s,this.textIsOpenBracket[o]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,o.length)}}}function VH(i,e,t,n){for(let s=0,o=e.length;s<o;s++){if(s===t)continue;const r=e[s];for(const a of r.open)a.indexOf(i)>=0&&n.push(a);for(const a of r.close)a.indexOf(i)>=0&&n.push(a)}}Ar(VH,"collectSuperstrings");function WH(i,e){return i.length-e.length}Ar(WH,"lengthcmp");function iD(i){if(i.length<=1)return i;const e=[],t=new Set;for(const n of i)t.has(n)||(e.push(n),t.add(n));return e}Ar(iD,"unique");function WZ(i,e,t,n){let s=[];s=s.concat(i),s=s.concat(e);for(let o=0,r=s.length;o<r;o++)VH(s[o],t,n,s);return s=iD(s),s.sort(WH),s.reverse(),oS(s)}Ar(WZ,"getRegexForBracketPair");function HZ(i,e,t,n){let s=[];s=s.concat(i),s=s.concat(e);for(let o=0,r=s.length;o<r;o++)VH(s[o],t,n,s);return s=iD(s),s.sort(WH),s.reverse(),oS(s.map(HH))}Ar(HZ,"getReversedRegexForBracketPair");function UZ(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=iD(e),oS(e)}Ar(UZ,"getRegexForBrackets");function zZ(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=iD(e),oS(e.map(HH))}Ar(zZ,"getReversedRegexForBrackets");function $Z(i){const e=/^[\w ]+$/.test(i);return i=Yd(i),e?`\\b${i}\\b`:i}Ar($Z,"prepareBracketForRegExp");function oS(i,e){const t=`(${i.map($Z).join(")|(")})`;return c5(t,!0,e)}Ar(oS,"createBracketOrRegExp");const HH=function(){function i(n){const s=new Uint16Array(n.length);let o=0;for(let r=n.length-1;r>=0;r--)s[o++]=n.charCodeAt(r);return DH().decode(s)}Ar(i,"reverse");let e=null,t=null;return Ar(function(s){return e!==s&&(e=s,t=i(e)),t},"toReversedString")}();class bc{static{Ar(this,"BracketsUtils")}static _findPrevBracketInText(e,t,n,s){const o=n.match(e);if(!o)return null;const r=n.length-(o.index||0),a=o[0].length,l=s+r;return new V(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,s,o){const a=HH(n).substring(n.length-o,n.length-s);return this._findPrevBracketInText(e,t,a,s)}static findNextBracketInText(e,t,n,s){const o=n.match(e);if(!o)return null;const r=o.index||0,a=o[0].length;if(a===0)return null;const l=s+r;return new V(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,s,o){const r=n.substring(s,o);return this.findNextBracketInText(e,t,r,s)}}var Wye=Object.defineProperty,nD=(i,e)=>Wye(i,"name",{value:e,configurable:!0});class Hye{constructor(e,t){this.languageId=e;const n=t.brackets?VB(t.brackets):[],s=new PA(a=>{const l=new Set;return{info:new Uye(this,a,l),closing:l}}),o=new PA(a=>{const l=new Set,c=new Set;return{info:new zye(this,a,l,c),opening:l,openingColorized:c}});for(const[a,l]of n){const c=s.get(a),d=o.get(l);c.closing.add(d.info),d.opening.add(c.info)}const r=t.colorizedBracketPairs?VB(t.colorizedBracketPairs):n.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of r){const c=s.get(a),d=o.get(l);c.closing.add(d.info),d.openingColorized.add(c.info),d.opening.add(c.info)}this._openingBrackets=new Map([...s.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...o.cachedValues].map(([a,l])=>[a,l.info]))}static{nD(this,"LanguageBracketsConfiguration")}_openingBrackets;_closingBrackets;get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){const t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return oS(t,e)}}function VB(i){return i.filter(([e,t])=>e!==""&&t!=="")}nD(VB,"filterValidBrackets");class GZ{constructor(e,t){this.config=e,this.bracketText=t}static{nD(this,"BracketKindBase")}get languageId(){return this.config.languageId}}class Uye extends GZ{constructor(e,t,n){super(e,t),this.openedBrackets=n}static{nD(this,"OpeningBracketKind")}isOpeningBracket=!0}class zye extends GZ{constructor(e,t,n,s){super(e,t),this.openingBrackets=n,this.openingColorizedBrackets=s}static{nD(this,"ClosingBracketKind")}isOpeningBracket=!1;closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var $ye=Object.defineProperty,Gye=(i,e)=>$ye(i,"name",{value:e,configurable:!0});class Rn{static{Gye(this,"CursorColumns")}static _nextVisibleColumn(e,t,n){return e===A.Tab?Rn.nextRenderTabStop(t,n):Kg(e)||WN(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){const s=Math.min(t-1,e.length),o=e.substring(0,s),r=new q0(o);let a=0;for(;!r.eol();){const l=j0(o,s,r.offset);r.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,n)}return a}static toStatusbarColumn(e,t,n){const s=e.substring(0,Math.min(t-1,e.length)),o=new BN(s);let r=0;for(;!o.eol();)o.nextCodePoint()===A.Tab?r=Rn.nextRenderTabStop(r,n):r=r+1;return r+1}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const s=e.length,o=new q0(e);let r=0,a=1;for(;!o.eol();){const l=j0(e,s,o.offset);o.nextGraphemeLength();const c=this._nextVisibleColumn(l,r,n),d=o.offset+1;if(c>=t){const h=t-r;return c-t<h?d:a}r=c,a=d}return s+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return Rn.nextRenderTabStop(e,t)}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Rn.prevRenderTabStop(e,t)}}var Kye=Object.defineProperty,jye=(i,e)=>Kye(i,"name",{value:e,configurable:!0});class ys{constructor(e,t){this.lineCount=e,this.columnCount=t}static{jye(this,"TextLength")}static zero=new ys(0,0);static lengthDiffNonNegative(e,t){return t.isLessThan(e)?ys.zero:e.lineCount===t.lineCount?new ys(0,t.columnCount-e.columnCount):new ys(t.lineCount-e.lineCount,t.columnCount)}static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new ys(0,t.column-e.column):new ys(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return ys.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,n=0;for(const s of e)s===`
`?(t++,n=0):n++;return new ys(t,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new ys(this.lineCount,this.columnCount+e.columnCount):new ys(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new V(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new V(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new V(1,1,this.lineCount+1,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new j(e.lineNumber,e.column+this.columnCount):new j(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}}var qye=Object.defineProperty,js=(i,e)=>qye(i,"name",{value:e,configurable:!0});function KZ(i,e,t,n){return i!==t?Pn(t-i,n):Pn(0,n-e)}js(KZ,"lengthDiff");const Qr=0;function mE(i){return i===0}js(mE,"lengthIsZero");const Jr=2**26;function Pn(i,e){return i*Jr+e}js(Pn,"toLength");function el(i){const e=i,t=Math.floor(e/Jr),n=e-t*Jr;return new ys(t,n)}js(el,"lengthToObj");function jZ(i){return Math.floor(i/Jr)}js(jZ,"lengthGetLineCount");function Yye(i){return i}js(Yye,"lengthGetColumnCountIfZeroLineCount");function zn(i,e){let t=i+e;return e>=Jr&&(t=t-i%Jr),t}js(zn,"lengthAdd");function qZ(i,e){return i.reduce((t,n)=>zn(t,e(n)),Qr)}js(qZ,"sumLengths");function UH(i,e){return i===e}js(UH,"lengthEquals");function YC(i,e){const t=i,n=e;if(n-t<=0)return Qr;const o=Math.floor(t/Jr),r=Math.floor(n/Jr),a=n-r*Jr;if(o===r){const l=t-o*Jr;return Pn(0,a-l)}else return Pn(r-o,a)}js(YC,"lengthDiffNonNegative");function sb(i,e){return i<e}js(sb,"lengthLessThan");function ob(i,e){return i<=e}js(ob,"lengthLessThanEqual");function _w(i,e){return i>=e}js(_w,"lengthGreaterThanEqual");function Zye(i){const e=i,t=Math.floor(e/Jr),n=e-t*Jr;return new j(t+1,n+1)}js(Zye,"lengthToPosition");function I_(i){return Pn(i.lineNumber-1,i.column-1)}js(I_,"positionToLength");function Op(i,e){const t=i,n=Math.floor(t/Jr),s=t-n*Jr,o=e,r=Math.floor(o/Jr),a=o-r*Jr;return new V(n+1,s+1,r+1,a+1)}js(Op,"lengthsToRange");function Xye(i){return i.startLineNumber===i.endLineNumber?new ys(0,i.endColumn-i.startColumn):new ys(i.endLineNumber-i.startLineNumber,i.endColumn-1)}js(Xye,"lengthOfRange");function Qye(i,e){return i-e}js(Qye,"lengthCompare");function YZ(i){const e=xL(i);return Pn(e.length-1,e[e.length-1].length)}js(YZ,"lengthOfString");function Jye(i){const e=xL(i);return new ys(e.length-1,e[e.length-1].length)}js(Jye,"lengthOfStringObj");function eSe(i){return i}js(eSe,"lengthHash");function tSe(i,e){return i>e?i:e}js(tSe,"lengthMax");var iSe=Object.defineProperty,ZZ=(i,e)=>iSe(i,"name",{value:e,configurable:!0});const gI=[];class Ss{constructor(e,t){this.items=e,this.additionalItems=t}static{ZZ(this,"SmallImmutableSet")}static cache=new Array(129);static create(e,t){if(e<=128&&t.length===0){let n=Ss.cache[e];return n||(n=new Ss(e,t),Ss.cache[e]=n),n}return new Ss(e,t)}static empty=Ss.create(0,gI);static getEmpty(){return this.empty}add(e,t){const n=t.getKey(e);let s=n>>5;if(s===0){const r=1<<n|this.items;return r===this.items?this:Ss.create(r,this.additionalItems)}s--;const o=this.additionalItems.slice(0);for(;o.length<s;)o.push(0);return o[s]|=1<<(n&31),Ss.create(this.items,o)}has(e,t){const n=t.getKey(e);let s=n>>5;return s===0?(this.items&1<<n)!==0:(s--,((this.additionalItems[s]||0)&1<<(n&31))!==0)}merge(e){const t=this.items|e.items;if(this.additionalItems===gI&&e.additionalItems===gI)return t===this.items?this:t===e.items?e:Ss.create(t,gI);const n=[];for(let s=0;s<Math.max(this.additionalItems.length,e.additionalItems.length);s++){const o=this.additionalItems[s]||0,r=e.additionalItems[s]||0;n.push(o|r)}return Ss.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}equals(e){if(this.items!==e.items||this.additionalItems.length!==e.additionalItems.length)return!1;for(let t=0;t<this.additionalItems.length;t++)if(this.additionalItems[t]!==e.additionalItems[t])return!1;return!0}}const M8={getKey(i){return i}};class nSe{static{ZZ(this,"DenseKeyProvider")}items=new Map;getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}reverseLookup(e){return[...this.items].find(([t,n])=>n===e)?.[0]}reverseLookupSet(e){const t=[];for(const[n]of this.items)e.has(n,this)&&t.push(n);return t}keys(){return this.items.keys()}}var sSe=Object.defineProperty,oSe=(i,e)=>sSe(i,"name",{value:e,configurable:!0});class mx{static{oSe(this,"CharacterPairSupport")}static DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`;static DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;static DEFAULT_AUTOCLOSE_BEFORE_WHITESPACE=` 
	`;_autoClosingPairs;_surroundingPairs;_autoCloseBeforeForQuotes;_autoCloseBeforeForBrackets;constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new NO(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new NO({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new NO({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:mx.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:mx.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}}var rSe=Object.defineProperty,aSe=(i,e)=>rSe(i,"name",{value:e,configurable:!0});class lSe{static{aSe(this,"BracketElectricCharacterSupport")}_richEditBrackets;constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const s=n.charAt(n.length-1);e.push(s)}return yb(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const s=t.findTokenIndexAtOffset(n-1);if(md(t.getStandardTokenType(s)))return null;const o=this._richEditBrackets.reversedRegex,r=t.getLineContent().substring(0,n-1)+e,a=bc.findPrevBracketInRange(o,1,r,0,r.length);if(!a)return null;const l=r.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const d=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(d)?{matchOpenBracket:l}:null}}var cSe=Object.defineProperty,XZ=(i,e)=>cSe(i,"name",{value:e,configurable:!0}),CT=(i=>(i[i.INCREASE_MASK=1]="INCREASE_MASK",i[i.DECREASE_MASK=2]="DECREASE_MASK",i[i.INDENT_NEXTLINE_MASK=4]="INDENT_NEXTLINE_MASK",i[i.UNINDENT_MASK=8]="UNINDENT_MASK",i))(CT||{});function m1(i){return i.global&&(i.lastIndex=0),!0}XZ(m1,"resetGlobalRegex");class dSe{static{XZ(this,"IndentRulesSupport")}_indentationRules;constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&m1(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&m1(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&m1(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&m1(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}var hSe=Object.defineProperty,uSe=(i,e)=>hSe(i,"name",{value:e,configurable:!0});class bw{static{uSe(this,"OnEnterSupport")}_brackets;_regExpRules;constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=bw._createOpenBracketRegExp(t[0]),s=bw._createCloseBracketRegExp(t[1]);n&&s&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:s})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,s){if(e>=Bc.Advanced)for(let o=0,r=this._regExpRules.length;o<r;o++){const a=this._regExpRules[o];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:s},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=Bc.Brackets&&n.length>0&&s.length>0)for(let o=0,r=this._brackets.length;o<r;o++){const a=this._brackets[o];if(a.openRegExp.test(n)&&a.closeRegExp.test(s))return{indentAction:so.IndentOutdent}}if(e>=Bc.Brackets&&n.length>0){for(let o=0,r=this._brackets.length;o<r;o++)if(this._brackets[o].openRegExp.test(n))return{indentAction:so.Indent}}return null}static _createOpenBracketRegExp(e){let t=Yd(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",bw._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Yd(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,bw._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Kt(t),null}}}var gSe=Object.defineProperty,QZ=(i,e)=>gSe(i,"name",{value:e,configurable:!0});const JZ=[];var Pr=(i=>(i[i.Eager=0]="Eager",i[i.Delayed=1]="Delayed",i))(Pr||{});function Rr(i,e,t){e instanceof $f||(e=new $f(e,[],!!t)),JZ.push([i,e])}QZ(Rr,"registerSingleton");function eX(){return JZ}QZ(eX,"getSingletonServiceDescriptors");var fSe=Object.defineProperty,mP=(i,e)=>fSe(i,"name",{value:e,configurable:!0});const Vb=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),pSe={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},WB={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function mSe(i){const e=LL(i),t=pSe[e.toLowerCase()];return t!==void 0?t:tX(i)}mP(mSe,"getMediaOrTextMime");function tX(i){const e=LL(i);return WB[e.toLowerCase()]}mP(tX,"getMediaMime");function _Se(i){for(const e in WB)if(WB[e]===i)return e}mP(_Se,"getExtensionForMimeType");const bSe=/^(.+)\/(.+?)(;.+)?$/;function vSe(i,e){const t=bSe.exec(i);return t?`${t[1].toLowerCase()}/${t[2].toLowerCase()}${t[3]??""}`:e?void 0:i}mP(vSe,"normalizeMimeType");var wSe=Object.defineProperty,B8=(i,e)=>wSe(i,"name",{value:e,configurable:!0});const CSe={ModesRegistry:"editor.modesRegistry"};class ySe{static{B8(this,"EditorModesRegistry")}_languages;_onDidChangeLanguages=new x;onDidChangeLanguages=this._onDidChangeLanguages.event;constructor(){this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:B8(()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}},"dispose")}}getLanguages(){return this._languages}}const iX=new ySe;Xt.add(CSe.ModesRegistry,iX);const rb="plaintext",SSe=".txt";iX.registerLanguage({id:rb,extensions:[SSe],aliases:[g("plainText.alias","Plain Text"),"text"],mimetypes:[Vb.text]});Xt.as(uf.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);var nX=Object.defineProperty,ESe=Object.getOwnPropertyDescriptor,Yc=(i,e)=>nX(i,"name",{value:e,configurable:!0}),LSe=(i,e,t,n)=>{for(var s=n>1?void 0:n?ESe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&nX(e,t,s),s},F8=(i,e)=>(t,n)=>e(t,n,i);class PO{constructor(e){this.languageId=e}static{Yc(this,"LanguageConfigurationServiceChangeEvent")}affects(e){return this.languageId?this.languageId===e:!0}}const sD=De("languageConfigurationService");let HB=class extends ${constructor(i,e){super(),this.configurationService=i,this.languageService=e;const t=new Set(Object.values(UB));this._register(this.configurationService.onDidChangeConfiguration(n=>{const s=n.change.keys.some(r=>t.has(r)),o=n.change.overrides.filter(([r,a])=>a.some(l=>t.has(l))).map(([r])=>r);if(s)this.configurations.clear(),this.onDidChangeEmitter.fire(new PO(void 0));else for(const r of o)this.languageService.isRegisteredLanguageId(r)&&(this.configurations.delete(r),this.onDidChangeEmitter.fire(new PO(r)))})),this._register(this._registry.onDidChange(n=>{this.configurations.delete(n.languageId),this.onDidChangeEmitter.fire(new PO(n.languageId))}))}static{Yc(this,"LanguageConfigurationService")}_serviceBrand;_registry=this._register(new ISe);onDidChangeEmitter=this._register(new x);onDidChange=this.onDidChangeEmitter.event;configurations=new Map;register(i,e,t){return this._registry.register(i,e,t)}getLanguageConfiguration(i){let e=this.configurations.get(i);return e||(e=sX(i,this._registry,this.configurationService,this.languageService),this.configurations.set(i,e)),e}};HB=LSe([F8(0,Pe),F8(1,Ra)],HB);function sX(i,e,t,n){let s=e.getLanguageConfiguration(i);if(!s){if(!n.isRegisteredLanguageId(i))return new Yw(i,{});s=new Yw(i,{})}const o=oX(s.languageId,t),r=$H([s.underlyingConfig,o]);return new Yw(s.languageId,r)}Yc(sX,"computeConfig");const UB={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function oX(i,e){const t=e.getValue(UB.brackets,{overrideIdentifier:i}),n=e.getValue(UB.colorizedBracketPairs,{overrideIdentifier:i});return{brackets:zB(t),colorizedBracketPairs:zB(n)}}Yc(oX,"getCustomizedLanguageConfig");function zB(i){if(Array.isArray(i))return i.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}Yc(zB,"validateBracketPairs");function zH(i,e,t){const n=i.getLineContent(e);let s=Co(n);return s.length>t-1&&(s=s.substring(0,t-1)),s}Yc(zH,"getIndentationAtPosition");class DSe{constructor(e){this.languageId=e,this._entries=[],this._order=0,this._resolved=null}static{Yc(this,"ComposedLanguageConfiguration")}_entries;_order;_resolved=null;register(e,t){const n=new V8(e,t,++this._order);return this._entries.push(n),this._resolved=null,ye(()=>{for(let s=0;s<this._entries.length;s++)if(this._entries[s]===n){this._entries.splice(s,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new Yw(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(V8.cmp),$H(this._entries.map(e=>e.configuration)))}}function $H(i){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of i)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}Yc($H,"combineLanguageConfigurations");class V8{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static{Yc(this,"LanguageConfigurationContribution")}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class W8{constructor(e){this.languageId=e}static{Yc(this,"LanguageConfigurationChangeEvent")}}class ISe extends ${static{Yc(this,"LanguageConfigurationRegistry")}_entries=new Map;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;constructor(){super(),this._register(this.register(rb,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,n=0){let s=this._entries.get(e);s||(s=new DSe(e),this._entries.set(e,s));const o=s.register(t,n);return this._onDidChange.fire(new W8(e)),ye(()=>{o.dispose(),this._onDidChange.fire(new W8(e))})}getLanguageConfiguration(e){return this._entries.get(e)?.getResolvedConfiguration()||null}}class Yw{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new bw(this.underlyingConfig):null,this.comments=Yw._handleComments(this.underlyingConfig),this.characterPair=new mx(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||wH,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new dSe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new Hye(e,this.underlyingConfig)}static{Yc(this,"ResolvedLanguageConfiguration")}_brackets;_electricCharacter;_onEnterSupport;comments;characterPair;wordDefinition;indentRulesSupport;indentationRules;foldingRules;bracketsNew;getWordDefinition(){return hP(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new Vye(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new lSe(this.brackets)),this._electricCharacter}onEnter(e,t,n,s){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,s):null}getAutoClosingPairs(){return new Bye(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){const[s,o]=t.blockComment;n.blockCommentStartToken=s,n.blockCommentEndToken=o}return n}}Rr(sD,HB,Pr.Delayed);var TSe=Object.defineProperty,_x=(i,e)=>TSe(i,"name",{value:e,configurable:!0});class GH{constructor(e){this.map=e}static{_x(this,"BracketTokens")}static createFromLanguage(e,t){function n(o){return t.getKey(`${o.languageId}:::${o.bracketText}`)}_x(n,"getId");const s=new Map;for(const o of e.bracketsNew.openingBrackets){const r=Pn(0,o.bracketText.length),a=n(o),l=Ss.getEmpty().add(a,M8);s.set(o.bracketText,new Qf(r,rg.OpeningBracket,a,l,bx.create(r,o,l)))}for(const o of e.bracketsNew.closingBrackets){const r=Pn(0,o.bracketText.length);let a=Ss.getEmpty();const l=o.getOpeningBrackets();for(const c of l)a=a.add(n(c),M8);s.set(o.bracketText,new Qf(r,rg.ClosingBracket,n(l[0]),a,bx.create(r,o,a)))}return new GH(s)}hasRegExp=!1;_regExpGlobal=null;getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>rX(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,n]of this.map)if(n.kind===rg.ClosingBracket&&n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function rX(i){let e=Yd(i);return/^[\w ]+/.test(i)&&(e=`\\b${e}`),/[\w ]+$/.test(i)&&(e=`${e}\\b`),e}_x(rX,"prepareBracketForRegExp");class ASe{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t}static{_x(this,"LanguageAgnosticBracketTokens")}languageIdToBracketTokens=new Map;didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=GH.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}getToken(e,t){return this.getSingleLanguageBracketTokens(t).getToken(e)}}var xSe=Object.defineProperty,_P=(i,e)=>xSe(i,"name",{value:e,configurable:!0}),rg=(i=>(i[i.Text=0]="Text",i[i.OpeningBracket=1]="OpeningBracket",i[i.ClosingBracket=2]="ClosingBracket",i))(rg||{});class Qf{constructor(e,t,n,s,o){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=s,this.astNode=o}static{_P(this,"Token")}}class kSe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}static{_P(this,"TextBufferTokenizer")}textBufferLineCount;textBufferLastLineLength;reader=new NSe(this.textModel,this.bracketTokens);_offset=Qr;get offset(){return this._offset}get length(){return Pn(this.textBufferLineCount-1,this.textBufferLastLineLength)}getText(){return this.textModel.getValue()}skip(e){this.didPeek=!1,this._offset=zn(this._offset,e);const t=el(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}didPeek=!1;peeked=null;read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=zn(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class NSe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}static{_P(this,"NonPeekableTextBufferTokenizer")}textBufferLineCount;textBufferLastLineLength;lineIdx=0;line=null;lineCharOffset=0;lineTokens=null;lineTokenOffset=0;setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}peekedToken=null;read(){if(this.peekedToken){const o=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=o.length,o}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const o=this.lineTokens,r=o.getCount();let a=null;if(this.lineTokenOffset<r){const l=o.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<r&&l===o.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=Id.getTokenType(l)===Lo.Other,d=Id.containsBalancedBrackets(l),h=o.getEndOffset(this.lineTokenOffset);if(d&&c&&this.lineCharOffset<h){const u=o.getLanguageId(this.lineTokenOffset),f=this.line.substring(this.lineCharOffset,h),p=this.bracketTokens.getSingleLanguageBracketTokens(u),m=p.regExpGlobal;if(m){m.lastIndex=0;const _=m.exec(f);_&&(a=p.getToken(_[0]),a&&(this.lineCharOffset+=_.index))}}if(n+=h-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=h}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const s=KZ(e,t,this.lineIdx,this.lineCharOffset);return new Qf(s,0,-1,Ss.getEmpty(),new c_(s))}}class PSe{constructor(e,t){this.text=e;const n=t.getRegExpStr(),s=n?new RegExp(n+`|
`,"gi"):null,o=[];let r,a=0,l=0,c=0,d=0;const h=[];for(let p=0;p<60;p++)h.push(new Qf(Pn(0,p),0,-1,Ss.getEmpty(),new c_(Pn(0,p))));const u=[];for(let p=0;p<60;p++)u.push(new Qf(Pn(1,p),0,-1,Ss.getEmpty(),new c_(Pn(1,p))));if(s)for(s.lastIndex=0;(r=s.exec(e))!==null;){const p=r.index,m=r[0];if(m===`
`)a++,l=p+1;else{if(c!==p){let _;if(d===a){const w=p-c;if(w<h.length)_=h[w];else{const v=Pn(0,w);_=new Qf(v,0,-1,Ss.getEmpty(),new c_(v))}}else{const w=a-d,v=p-l;if(w===1&&v<u.length)_=u[v];else{const b=Pn(w,v);_=new Qf(b,0,-1,Ss.getEmpty(),new c_(b))}}o.push(_)}o.push(t.getToken(m)),c=p+m.length,d=a}}const f=e.length;if(c!==f){const p=d===a?Pn(0,f-c):Pn(a-d,f-l);o.push(new Qf(p,0,-1,Ss.getEmpty(),new c_(p)))}this.length=Pn(a,f-l),this.tokens=o}static{_P(this,"FastTokenizer")}_offset=Qr;tokens;idx=0;get offset(){return this._offset}length;read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new kde}getText(){return this.text}}var RSe=Object.defineProperty,uh=(i,e)=>RSe(i,"name",{value:e,configurable:!0}),Eo=(i=>(i[i.Text=0]="Text",i[i.Bracket=1]="Bracket",i[i.Pair=2]="Pair",i[i.UnexpectedClosingBracket=3]="UnexpectedClosingBracket",i[i.List=4]="List",i))(Eo||{});class KH{static{uh(this,"BaseAstNode")}_length;get length(){return this._length}constructor(e){this._length=e}}class Zw extends KH{constructor(e,t,n,s,o){super(e),this.openingBracket=t,this.child=n,this.closingBracket=s,this.missingOpeningBracketIds=o}static{uh(this,"PairAstNode")}static create(e,t,n){let s=e.length;return t&&(s=zn(s,t.length)),n&&(s=zn(s,n.length)),new Zw(s,e,t,n,t?t.missingOpeningBracketIds:Ss.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}flattenLists(){return Zw.create(this.openingBracket.flattenLists(),this.child&&this.child.flattenLists(),this.closingBracket&&this.closingBracket.flattenLists())}deepClone(){return new Zw(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(zn(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class Hc extends KH{constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n}static{uh(this,"ListAstNode")}static create23(e,t,n,s=!1){let o=e.length,r=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(o=zn(o,t.length),r=r.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");o=zn(o,n.length),r=r.merge(n.missingOpeningBracketIds)}return s?new OSe(o,e.listHeight+1,e,t,n,r):new _E(o,e.listHeight+1,e,t,n,r)}static create(e,t=!1){if(e.length===0)return this.getEmpty();{let n=e[0].length,s=e[0].missingOpeningBracketIds;for(let o=1;o<e.length;o++)n=zn(n,e[o].length),s=s.merge(e[o].missingOpeningBracketIds);return t?new H8(n,e[0].listHeight+1,e,s):new bE(n,e[0].listHeight+1,e,s)}}static getEmpty(){return new H8(Qr,0,[],Ss.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}cachedMinIndentation=-1;throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const n=t.childrenLength;if(n===0)throw new Et;t=t.getChild(n-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let s=1;s<e;s++){const o=this.getChild(s);t=zn(t,o.length),n=n.merge(o.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}flattenLists(){const e=[];for(const t of this.children){const n=t.flattenLists();n.kind===4?e.push(...n.children):e.push(n)}return Hc.create(e)}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,s=e;for(let o=0;o<this.childrenLength;o++){const r=this.getChild(o);r&&(n=Math.min(n,r.computeMinIndentation(s,t)),s=zn(s,r.length))}return this.cachedMinIndentation=n,n}}class _E extends Hc{constructor(e,t,n,s,o,r){super(e,t,r),this._item1=n,this._item2=s,this._item3=o}static{uh(this,"TwoThreeListAstNode")}get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new _E(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class OSe extends _E{static{uh(this,"Immutable23ListAstNode")}toMutable(){return new _E(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class bE extends Hc{constructor(e,t,n,s){super(e,t,s),this._children=n}static{uh(this,"ArrayListAstNode")}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new bE(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class H8 extends bE{static{uh(this,"ImmutableArrayListAstNode")}toMutable(){return new bE(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const MSe=[];class jH extends KH{static{uh(this,"ImmutableLeafAstNode")}get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return MSe}flattenLists(){return this}deepClone(){return this}}class c_ extends jH{static{uh(this,"TextAstNode")}get kind(){return 0}get missingOpeningBracketIds(){return Ss.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=el(e),s=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,o=jZ(zn(e,this.length))+1;let r=Number.MAX_SAFE_INTEGER;for(let a=s;a<=o;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const d=Rn.visibleColumnFromColumn(c,l,t.getOptions().tabSize);r=Math.min(r,d)}return r}}class bx extends jH{constructor(e,t,n){super(e),this.bracketInfo=t,this.bracketIds=n}static{uh(this,"BracketAstNode")}static create(e,t,n){return new bx(e,t,n)}get kind(){return 1}get missingOpeningBracketIds(){return Ss.getEmpty()}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class BSe extends jH{static{uh(this,"InvalidBracketAstNode")}get kind(){return 3}missingOpeningBracketIds;constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}var FSe=Object.defineProperty,qH=(i,e)=>FSe(i,"name",{value:e,configurable:!0});class U8{constructor(e,t,n,s){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=n,this.isInvalid=s}static{qH(this,"BracketInfo")}}class VSe{constructor(e,t,n,s,o,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=s,this.nestingLevelOfEqualBracketType=o,this.bracketPairNode=r}static{qH(this,"BracketPairInfo")}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}get closingBracketInfo(){return this.bracketPairNode.closingBracket?.bracketInfo}}class WSe extends VSe{constructor(e,t,n,s,o,r,a){super(e,t,n,s,o,r),this.minVisibleColumnIndentation=a}static{qH(this,"BracketPairWithMinIndentationInfo")}}var HSe=Object.defineProperty,gf=(i,e)=>HSe(i,"name",{value:e,configurable:!0}),qu=(i=>(i[i.Flush=1]="Flush",i[i.LineChanged=2]="LineChanged",i[i.LinesDeleted=3]="LinesDeleted",i[i.LinesInserted=4]="LinesInserted",i[i.EOLChanged=5]="EOLChanged",i))(qu||{});class USe{static{gf(this,"ModelRawFlush")}changeType=1}class Fc{constructor(e,t,n,s,o){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=s,this.order=o}static{gf(this,"LineInjectedText")}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",s=0;for(const o of t)n+=e.substring(s,o.column-1),s=o.column-1,n+=o.options.content;return n+=e.substring(s),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new Fc(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new Fc(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,s)=>n.lineNumber===s.lineNumber?n.column===s.column?n.order-s.order:n.column-s.column:n.lineNumber-s.lineNumber),t}withText(e){return new Fc(this.ownerId,this.lineNumber,this.column,{...this.options,content:e},this.order)}}class z8{static{gf(this,"ModelRawLineChanged")}changeType=2;lineNumber;detail;injectedText;constructor(e,t,n){this.lineNumber=e,this.detail=t,this.injectedText=n}}class zSe{static{gf(this,"ModelRawLinesDeleted")}changeType=3;fromLineNumber;toLineNumber;constructor(e,t){this.fromLineNumber=e,this.toLineNumber=t}}class $Se{static{gf(this,"ModelRawLinesInserted")}changeType=4;fromLineNumber;toLineNumber;detail;injectedTexts;constructor(e,t,n,s){this.injectedTexts=s,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class GSe{static{gf(this,"ModelRawEOLChanged")}changeType=5}class Xw{static{gf(this,"ModelRawContentChangedEvent")}changes;versionId;isUndoing;isRedoing;resultingSelection;constructor(e,t,n,s){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=s,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),s=t.versionId,o=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing;return new Xw(n,s,o,r)}}class aX{static{gf(this,"ModelInjectedTextChangedEvent")}changes;constructor(e){this.changes=e}}class ab{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}static{gf(this,"InternalModelContentChangeEvent")}merge(e){const t=Xw.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=ab._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new ab(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),s=t.eol,o=t.versionId,r=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:n,eol:s,isEolChange:c,versionId:o,isUndoing:r,isRedoing:a,isFlush:l}}}var KSe=Object.defineProperty,lX=(i,e)=>KSe(i,"name",{value:e,configurable:!0}),Qw=(i=>(i[i.Disabled=0]="Disabled",i[i.EnabledForActive=1]="EnabledForActive",i[i.Enabled=2]="Enabled",i))(Qw||{});class T_{constructor(e,t,n,s,o,r){if(this.visibleColumn=e,this.column=t,this.className=n,this.horizontalLine=s,this.forWrappedLinesAfterColumn=o,this.forWrappedLinesBeforeOrAtColumn=r,e!==-1==(t!==-1))throw new Error}static{lX(this,"IndentGuide")}}class q1{constructor(e,t){this.top=e,this.endColumn=t}static{lX(this,"IndentGuideHorizontalLine")}}var jSe=Object.defineProperty,YH=(i,e)=>jSe(i,"name",{value:e,configurable:!0});class Mh{constructor(e){this.edits=e;let t=-1;for(const n of e){if(!(n.replaceRange.start>=t))throw new Et(`Edits must be disjoint and sorted. Found ${n} after ${t}`);t=n.replaceRange.endExclusive}}static{YH(this,"OffsetEdit")}static empty=new Mh([]);static fromJson(e){return new Mh(e.map(Nc.fromJson))}static replace(e,t){return new Mh([new Nc(e,t)])}static insert(e,t){return Mh.replace(it.emptyAt(e),t)}normalize(){const e=[];let t;for(const n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(t&&t.replaceRange.endExclusive===n.replaceRange.start?t=new Nc(t.replaceRange.join(n.replaceRange),t.newText+n.newText):(t&&e.push(t),t=n));return t&&e.push(t),new Mh(e)}toString(){return`[${this.edits.map(t=>t.toString()).join(", ")}]`}apply(e){const t=[];let n=0;for(const s of this.edits)t.push(e.substring(n,s.replaceRange.start)),t.push(s.newText),n=s.replaceRange.endExclusive;return t.push(e.substring(n)),t.join("")}compose(e){return cX(this,e)}inverse(e){const t=[];let n=0;for(const s of this.edits)t.push(new Nc(it.ofStartAndLength(s.replaceRange.start+n,s.newText.length),e.substring(s.replaceRange.start,s.replaceRange.endExclusive))),n+=s.newText.length-s.replaceRange.length;return new Mh(t)}getNewTextRanges(){const e=[];let t=0;for(const n of this.edits)e.push(it.ofStartAndLength(n.replaceRange.start+t,n.newText.length)),t+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){const t=[];let n=0,s=0,o=0;for(;s<this.edits.length||n<e.edits.length;){const r=e.edits[n],a=this.edits[s];if(a)r?a.replaceRange.intersects(r.replaceRange)?s++:a.replaceRange.start<r.replaceRange.start?(t.push(new Nc(a.replaceRange.delta(o),a.newText)),s++):(n++,o+=r.newText.length-r.replaceRange.length):(t.push(new Nc(a.replaceRange.delta(o),a.newText)),s++);else break}return new Mh(t)}applyToOffset(e){let t=0;for(const n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+t;t+=n.newText.length-n.replaceRange.length}else break;return e+t}applyToOffsetRange(e){return new it(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let t=0;for(const n of this.edits){const s=n.newText.length;if(n.replaceRange.start<=e-t){if(e-t<n.replaceRange.start+s)return n.replaceRange.start;t+=s-n.replaceRange.length}else break}return e-t}}class Nc{constructor(e,t){this.replaceRange=e,this.newText=t}static{YH(this,"SingleOffsetEdit")}static fromJson(e){return new Nc(it.ofStartAndLength(e.pos,e.len),e.txt)}static insert(e,t){return new Nc(it.emptyAt(e),t)}toString(){return`${this.replaceRange} -> "${this.newText}"`}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}}function cX(i,e){if(i=i.normalize(),e=e.normalize(),i.isEmpty)return e;if(e.isEmpty)return i;const t=[...i.edits],n=[];let s=0;for(const o of e.edits){for(;;){const c=t[0];if(!c||c.replaceRange.start+s+c.newText.length>=o.replaceRange.start)break;t.shift(),n.push(c),s+=c.newText.length-c.replaceRange.length}const r=s;let a,l;for(;;){const c=t[0];if(!c||c.replaceRange.start+s>o.replaceRange.endExclusive)break;a||(a=c),l=c,t.shift(),s+=c.newText.length-c.replaceRange.length}if(!a)n.push(new Nc(o.replaceRange.delta(-s),o.newText));else{let c="";const d=o.replaceRange.start-(a.replaceRange.start+r);d>0&&(c=a.newText.slice(0,d));const h=l.replaceRange.endExclusive+s-o.replaceRange.endExclusive;if(h>0){const p=new Nc(it.ofStartAndLength(l.replaceRange.endExclusive,0),l.newText.slice(-h));t.unshift(p),s-=p.newText.length-p.replaceRange.length}const u=c+o.newText,f=new it(Math.min(a.replaceRange.start,o.replaceRange.start-r),o.replaceRange.endExclusive-s);n.push(new Nc(f,u))}}for(;;){const o=t.shift();if(!o)break;n.push(o)}return new Mh(n).normalize()}YH(cX,"joinEdits");var qSe=Object.defineProperty,ZH=(i,e)=>qSe(i,"name",{value:e,configurable:!0});class yT{static{ZH(this,"SparseMultilineTokens")}static create(e,t){return new yT(e,new vx(t))}_startLineNumber;_endLineNumber;_tokens;get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e&&new V(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber,[s,o,r]=this._tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new yT(this._startLineNumber,s),new yT(this._startLineNumber+r,o)]}applyEdit(e,t){const[n,s,o]=Kd(t);this.acceptEdit(e,n,s,o,t.length>0?t.charCodeAt(0):A.Null)}acceptEdit(e,t,n,s,o){this._acceptDeleteRange(e),this._acceptInsertText(new j(e.startLineNumber,e.startColumn),t,n,s,o),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){const o=n-t;this._startLineNumber-=o;return}const s=this._tokens.getMaxDeltaLine();if(!(t>=s+1)){if(t<0&&n>=s+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){const o=-t;this._startLineNumber-=o,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,s,o){if(t===0&&n===0)return;const r=e.lineNumber-this._startLineNumber;if(r<0){this._startLineNumber+=t;return}const a=this._tokens.getMaxDeltaLine();r>=a+1||this._tokens.acceptInsertText(r,e.column-1,t,n,s,o)}}class vx{static{ZH(this,"SparseMultilineTokensStorage")}_tokens;_tokenCount;constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),s=this._getEndCharacter(e-1);return new V(0,t+1,n,s+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const s=t+Math.floor((n-t)/2),o=this._getDeltaLine(s);if(o<e)t=s+1;else if(o>e)n=s-1;else{let r=s;for(;r>t&&this._getDeltaLine(r-1)===e;)r--;let a=s;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new $8(this._tokens.subarray(4*r,4*a+4))}}return this._getDeltaLine(t)===e?new $8(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,s){const o=this._tokens,r=this._tokenCount;let a=0,l=!1,c=0;for(let d=0;d<r;d++){const h=4*d,u=o[h],f=o[h+1],p=o[h+2],m=o[h+3];if((u>e||u===e&&p>=t)&&(u<n||u===n&&f<=s))l=!0;else{if(a===0&&(c=u),l){const _=4*a;o[_]=u-c,o[_+1]=f,o[_+2]=p,o[_+3]=m}a++}}return this._tokenCount=a,c}split(e,t,n,s){const o=this._tokens,r=this._tokenCount,a=[],l=[];let c=a,d=0,h=0;for(let u=0;u<r;u++){const f=4*u,p=o[f],m=o[f+1],_=o[f+2],w=o[f+3];if(p>e||p===e&&_>=t){if(p<n||p===n&&m<=s)continue;c!==l&&(c=l,d=0,h=p)}c[d++]=p-h,c[d++]=m,c[d++]=_,c[d++]=w}return[new vx(new Uint32Array(a)),new vx(new Uint32Array(l)),h]}acceptDeleteRange(e,t,n,s,o){const r=this._tokens,a=this._tokenCount,l=s-t;let c=0,d=!1;for(let h=0;h<a;h++){const u=4*h;let f=r[u],p=r[u+1],m=r[u+2];const _=r[u+3];if(f<t||f===t&&m<=n){c++;continue}else if(f===t&&p<n)f===s&&m>o?m-=o-n:m=n;else if(f===t&&p===n)if(f===s&&m>o)m-=o-n;else{d=!0;continue}else if(f<s||f===s&&p<o)if(f===s&&m>o)f=t,p=n,m=p+(m-o);else{d=!0;continue}else if(f>s){if(l===0&&!d){c=a;break}f-=l}else if(f===s&&p>=o)e&&f===0&&(p+=e,m+=e),f-=l,p-=o-n,m-=o-n;else throw new Error("Not possible!");const w=4*c;r[w]=f,r[w+1]=p,r[w+2]=m,r[w+3]=_,c++}this._tokenCount=c}acceptInsertText(e,t,n,s,o,r){const a=n===0&&s===1&&(r>=A.Digit0&&r<=A.Digit9||r>=A.A&&r<=A.Z||r>=A.a&&r<=A.z),l=this._tokens,c=this._tokenCount;for(let d=0;d<c;d++){const h=4*d;let u=l[h],f=l[h+1],p=l[h+2];if(!(u<e||u===e&&p<t)){if(u===e&&p===t)if(a)p+=1;else continue;else if(u===e&&f<t&&t<p)n===0?p+=s:p=t;else{if(u===e&&f===t&&a)continue;if(u===e)if(u+=n,n===0)f+=s,p+=s;else{const m=p-f;f=o+(f-t),p=f+m}else u+=n}l[h]=u,l[h+1]=f,l[h+2]=p}}}}class $8{static{ZH(this,"SparseLineTokens")}_tokens;constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}var YSe=Object.defineProperty,ZSe=(i,e)=>YSe(i,"name",{value:e,configurable:!0});class dX{constructor(e,t){this.lineEdit=e,this.additionalLines=t}static{ZSe(this,"LineEditWithAdditionalLines")}static replace(e,t){return new dX(Mh.replace(e,t),null)}}var Wb=(i=>(i[i.InProgress=1]="InProgress",i[i.Completed=2]="Completed",i))(Wb||{}),XSe=Object.defineProperty,XH=(i,e)=>XSe(i,"name",{value:e,configurable:!0});const QSe=De("undoRedoService");var QH=(i=>(i[i.Resource=0]="Resource",i[i.Workspace=1]="Workspace",i))(QH||{});class l$e{constructor(e,t){this.resource=e,this.elements=t}static{XH(this,"ResourceEditStackSnapshot")}}class $B{static{XH(this,"UndoRedoGroup")}static _ID=0;id;order;constructor(){this.id=$B._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static None=new $B}class GB{static{XH(this,"UndoRedoSource")}static _ID=0;id;order;constructor(){this.id=GB._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static None=new GB}var JSe=Object.defineProperty,mv=(i,e)=>JSe(i,"name",{value:e,configurable:!0}),hX=(i=>(i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full",i))(hX||{}),_v=(i=>(i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=3]="Right",i))(_v||{}),ST=(i=>(i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter",i))(ST||{}),uX=(i=>(i[i.Normal=1]="Normal",i[i.Underlined=2]="Underlined",i))(uX||{}),vE=(i=>(i[i.Both=0]="Both",i[i.Right=1]="Right",i[i.Left=2]="Left",i[i.None=3]="None",i))(vE||{}),cn=(i=>(i[i.TextDefined=0]="TextDefined",i[i.LF=1]="LF",i[i.CRLF=2]="CRLF",i))(cn||{}),JH=(i=>(i[i.LF=1]="LF",i[i.CRLF=2]="CRLF",i))(JH||{}),ag=(i=>(i[i.LF=0]="LF",i[i.CRLF=1]="CRLF",i))(ag||{});class RO{static{mv(this,"TextModelResolvedOptions")}_textModelResolvedOptionsBrand=void 0;tabSize;indentSize;_indentSizeIsTabSize;insertSpaces;defaultEOL;trimAutoWhitespace;bracketPairColorizationOptions;get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&lo(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class wx{static{mv(this,"FindMatch")}_findMatchBrand=void 0;range;matches;constructor(e,t){this.range=e,this.matches=t}}var hs=(i=>(i[i.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",i[i.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",i[i.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",i[i.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter",i))(hs||{});function gX(i){return i&&typeof i.read=="function"}mv(gX,"isITextSnapshot");var In=(i=>(i[i.Left=0]="Left",i[i.Right=1]="Right",i[i.None=2]="None",i[i.LeftOfInjectedText=3]="LeftOfInjectedText",i[i.RightOfInjectedText=4]="RightOfInjectedText",i))(In||{}),KB=(i=>(i[i.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]="FIRST_LINE_DETECTION_LENGTH_LIMIT",i))(KB||{});class OO{constructor(e,t,n,s,o,r){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=s,this.isAutoWhitespaceEdit=o,this._isTracked=r}static{mv(this,"ValidAnnotatedEditOperation")}}class e1e{static{mv(this,"SearchData")}regex;wordSeparators;simpleSearch;constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}class t1e{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}static{mv(this,"ApplyEditsResult")}}function fX(i){return!i.isTooLargeForSyncing()&&!i.isForSimpleWidget}mv(fX,"shouldSynchronizeModel");var i1e=Object.defineProperty,n1e=(i,e)=>i1e(i,"name",{value:e,configurable:!0}),ot=(i=>(i[i.Smooth=0]="Smooth",i[i.Immediate=1]="Immediate",i))(ot||{});function pX(i){return i&&typeof i.id=="string"}n1e(pX,"isThemeColor");const bP={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var Ms=(i=>(i.CompositionStart="compositionStart",i.CompositionEnd="compositionEnd",i.Type="type",i.ReplacePreviousChar="replacePreviousChar",i.CompositionType="compositionType",i.Paste="paste",i.Cut="cut",i))(Ms||{}),s1e=Object.defineProperty,o1e=(i,e)=>s1e(i,"name",{value:e,configurable:!0});function jB(i){const e=i;return typeof e?.resolve=="function"&&typeof e?.isResolved=="function"}o1e(jB,"isResolvedEditorModel");var e6=(i=>(i[i.ACTIVATE=1]="ACTIVATE",i[i.RESTORE=2]="RESTORE",i[i.PRESERVE=3]="PRESERVE",i))(e6||{}),mX=(i=>(i[i.PICK=0]="PICK",i[i.EXCLUSIVE_ONLY=1]="EXCLUSIVE_ONLY",i))(mX||{}),Y1=(i=>(i[i.Center=0]="Center",i[i.CenterIfOutsideViewport=1]="CenterIfOutsideViewport",i[i.NearTop=2]="NearTop",i[i.NearTopIfOutsideViewport=3]="NearTopIfOutsideViewport",i))(Y1||{}),Z1=(i=>(i.PROGRAMMATIC="api",i.NAVIGATION="code.navigation",i.JUMP="code.jump",i))(Z1||{}),r1e=Object.defineProperty,jn=(i,e)=>r1e(i,"name",{value:e,configurable:!0});const la=De("fileService");function a1e(i){return i.create===!0}jn(a1e,"isFileOpenForWriteOptions");var yp=(i=>(i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink",i))(yp||{});function l1e(i){const e=i;return!!e&&typeof e.onDidChange=="function"}jn(l1e,"isFileSystemWatcher");var ET=(i=>(i[i.None=0]="None",i[i.FileReadWrite=2]="FileReadWrite",i[i.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",i[i.FileReadStream=16]="FileReadStream",i[i.FileFolderCopy=8]="FileFolderCopy",i[i.PathCaseSensitive=1024]="PathCaseSensitive",i[i.Readonly=2048]="Readonly",i[i.Trash=4096]="Trash",i[i.FileWriteUnlock=8192]="FileWriteUnlock",i[i.FileAtomicRead=16384]="FileAtomicRead",i[i.FileAtomicWrite=32768]="FileAtomicWrite",i[i.FileAtomicDelete=65536]="FileAtomicDelete",i[i.FileClone=131072]="FileClone",i))(ET||{});function t6(i){return!!(i.capabilities&2)}jn(t6,"hasReadWriteCapability");function c1e(i){return!!(i.capabilities&8)}jn(c1e,"hasFileFolderCopyCapability");function d1e(i){return!!(i.capabilities&131072)}jn(d1e,"hasFileCloneCapability");function h1e(i){return!!(i.capabilities&4)}jn(h1e,"hasOpenReadWriteCloseCapability");function u1e(i){return!!(i.capabilities&16)}jn(u1e,"hasFileReadStreamCapability");function g1e(i){return t6(i)?!!(i.capabilities&16384):!1}jn(g1e,"hasFileAtomicReadCapability");function f1e(i){return t6(i)?!!(i.capabilities&32768):!1}jn(f1e,"hasFileAtomicWriteCapability");function p1e(i){return!!(i.capabilities&65536)}jn(p1e,"hasFileAtomicDeleteCapability");function _X(i){return!!(i.capabilities&2048)}jn(_X,"hasReadonlyCapability");var ma=(i=>(i.FileExists="EntryExists",i.FileNotFound="EntryNotFound",i.FileNotADirectory="EntryNotADirectory",i.FileIsADirectory="EntryIsADirectory",i.FileExceedsStorageQuota="EntryExceedsStorageQuota",i.FileTooLarge="EntryTooLarge",i.FileWriteLocked="EntryWriteLocked",i.NoPermissions="NoPermissions",i.Unavailable="Unavailable",i.Unknown="Unknown",i))(ma||{});class oD extends Error{constructor(e,t){super(e),this.code=t}static{jn(this,"FileSystemProviderError")}static create(e,t){const n=new oD(e.toString(),t);return bX(n,t),n}}function Cx(i,e){return oD.create(i,e)}jn(Cx,"createFileSystemProviderError");function m1e(i){return i||Cx(g("unknownError","Unknown Error"),"Unknown")}jn(m1e,"ensureFileSystemProviderError");function bX(i,e){return i.name=e?`${e} (FileSystemError)`:"FileSystemError",i}jn(bX,"markAsFileSystemProviderError");function vX(i){if(!i)return"Unknown";if(i instanceof oD)return i.code;const e=/^(.+) \(FileSystemError\)$/.exec(i.name);if(!e)return"Unknown";switch(e[1]){case"EntryExists":return"EntryExists";case"EntryIsADirectory":return"EntryIsADirectory";case"EntryNotADirectory":return"EntryNotADirectory";case"EntryNotFound":return"EntryNotFound";case"EntryTooLarge":return"EntryTooLarge";case"EntryWriteLocked":return"EntryWriteLocked";case"NoPermissions":return"NoPermissions";case"Unavailable":return"Unavailable"}return"Unknown"}jn(vX,"toFileSystemProviderErrorCode");function wX(i){if(i instanceof vP)return i.fileOperationResult;switch(vX(i)){case"EntryNotFound":return 1;case"EntryIsADirectory":return 0;case"EntryNotADirectory":return 9;case"EntryWriteLocked":return 5;case"NoPermissions":return 6;case"EntryExists":return 4;case"EntryTooLarge":return 7;default:return 10}}jn(wX,"toFileOperationResult");var Wu=(i=>(i[i.CREATE=0]="CREATE",i[i.DELETE=1]="DELETE",i[i.MOVE=2]="MOVE",i[i.COPY=3]="COPY",i[i.WRITE=4]="WRITE",i))(Wu||{});class c$e{constructor(e,t,n){this.resource=e,this.operation=t,this.target=n}static{jn(this,"FileOperationEvent")}isOperation(e){return this.operation===e}}var qB=(i=>(i[i.UPDATED=0]="UPDATED",i[i.ADDED=1]="ADDED",i[i.DELETED=2]="DELETED",i))(qB||{});class LT{constructor(e,t){this.ignorePathCasing=t;for(const n of e){switch(n.type){case 1:this.rawAdded.push(n.resource);break;case 0:this.rawUpdated.push(n.resource);break;case 2:this.rawDeleted.push(n.resource);break}this.correlationId!==LT.MIXED_CORRELATION&&(typeof n.cId=="number"?this.correlationId===void 0?this.correlationId=n.cId:this.correlationId!==n.cId&&(this.correlationId=LT.MIXED_CORRELATION):this.correlationId!==void 0&&(this.correlationId=LT.MIXED_CORRELATION))}}static{jn(this,"FileChangesEvent")}static MIXED_CORRELATION=null;correlationId=void 0;added=new cr(()=>{const e=jh.forUris(()=>this.ignorePathCasing);return e.fill(this.rawAdded.map(t=>[t,!0])),e});updated=new cr(()=>{const e=jh.forUris(()=>this.ignorePathCasing);return e.fill(this.rawUpdated.map(t=>[t,!0])),e});deleted=new cr(()=>{const e=jh.forUris(()=>this.ignorePathCasing);return e.fill(this.rawDeleted.map(t=>[t,!0])),e});contains(e,...t){return this.doContains(e,{includeChildren:!1},...t)}affects(e,...t){return this.doContains(e,{includeChildren:!0},...t)}doContains(e,t,...n){if(!e)return!1;const s=n.length>0;return!!((!s||n.includes(1))&&(this.added.value.get(e)||t.includeChildren&&this.added.value.findSuperstr(e))||(!s||n.includes(0))&&(this.updated.value.get(e)||t.includeChildren&&this.updated.value.findSuperstr(e))||(!s||n.includes(2))&&(this.deleted.value.findSubstr(e)||t.includeChildren&&this.deleted.value.findSuperstr(e)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(e){return this.correlationId===e}hasCorrelation(){return typeof this.correlationId=="number"}rawAdded=[];rawUpdated=[];rawDeleted=[]}function _1e(i,e,t){return!i||!e||i===e||e.length>i.length?!1:(e.charAt(e.length-1)!==$s&&(e+=$s),t?Uy(i,e):i.indexOf(e)===0)}jn(_1e,"isParent");class vP extends Error{constructor(e,t,n){super(e),this.fileOperationResult=t,this.options=n}static{jn(this,"FileOperationError")}}class b1e extends vP{constructor(e,t,n,s){super(e,t,s),this.fileOperationResult=t,this.size=n}static{jn(this,"TooLargeFileOperationError")}}class v1e extends vP{constructor(e,t,n){super(e,2,n),this.stat=t}static{jn(this,"NotModifiedSinceFileOperationError")}}var Sl=(i=>(i[i.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",i[i.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",i[i.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",i[i.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",i[i.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",i[i.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",i[i.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",i[i.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",i[i.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",i[i.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",i[i.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR",i))(Sl||{});const Ch={OFF:"off",AFTER_DELAY:"afterDelay",ON_FOCUS_CHANGE:"onFocusChange",ON_WINDOW_CHANGE:"onWindowChange"},MS={OFF:"off",ON_EXIT:"onExit",ON_EXIT_AND_WINDOW_CLOSE:"onExitAndWindowClose"},w1e="files.associations",C1e="files.readonlyInclude",y1e="files.readonlyExclude";var Do=(i=>(i[i.FILE=0]="FILE",i[i.FOLDER=1]="FOLDER",i[i.ROOT_FOLDER=2]="ROOT_FOLDER",i))(Do||{});const fI="";function S1e(i){if(!(typeof i.size!="number"||typeof i.mtime!="number"))return i.mtime.toString(29)+i.size.toString(31)}jn(S1e,"etag");async function E1e(i,e){if(!e.hasProvider(ne.from({scheme:i.scheme})))return new Promise(t=>{const n=e.onDidChangeFileSystemProviderRegistrations(s=>{s.scheme===i.scheme&&s.added&&(n.dispose(),t())})})}jn(E1e,"whenProviderRegistered");class to{static{jn(this,"ByteSize")}static KB=1024;static MB=to.KB*to.KB;static GB=to.MB*to.KB;static TB=to.GB*to.KB;static formatSize(e){return Gc(e)||(e=0),e<to.KB?g("sizeB","{0}B",e.toFixed(0)):e<to.MB?g("sizeKB","{0}KB",(e/to.KB).toFixed(2)):e<to.GB?g("sizeMB","{0}MB",(e/to.MB).toFixed(2)):e<to.TB?g("sizeGB","{0}GB",(e/to.GB).toFixed(2)):g("sizeTB","{0}TB",(e/to.TB).toFixed(2))}}function L1e(i){const e=typeof i=="string"||i?.scheme===Ve.vscodeRemote;return typeof i!="string"&&i?.scheme===Ve.file?1024*to.MB:e?10*to.MB:ui?50*to.MB:1024*to.MB}jn(L1e,"getLargeFileConfirmationLimit");var D1e=Object.defineProperty,I1e=(i,e)=>D1e(i,"name",{value:e,configurable:!0});const T1e=De("textModelService");function A1e(i){return!!i.textEditorModel}I1e(A1e,"isResolvedTextEditorModel");var i6=(i=>(i[i.None=0]="None",i[i.Untitled=2]="Untitled",i[i.Scratchpad=4]="Scratchpad",i))(i6||{});const x1e="";var k1e=Object.defineProperty,N1e=(i,e)=>k1e(i,"name",{value:e,configurable:!0});class n6 extends ${static{N1e(this,"EditorModel")}_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;resolved=!1;async resolve(){this.resolved=!0}isResolved(){return this.resolved}isDisposed(){return this._store.isDisposed}dispose(){this._onWillDispose.fire(),super.dispose()}}const Zc=De("modelService"),CX=De("ILanguageDetectionService"),G8="languageDetection";var yX=Object.defineProperty,P1e=Object.getOwnPropertyDescriptor,R1e=(i,e)=>yX(i,"name",{value:e,configurable:!0}),O1e=(i,e,t,n)=>{for(var s=n>1?void 0:n?P1e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&yX(e,t,s),s},pI=(i,e)=>(t,n)=>e(t,n,i);let ZC=class extends n6{constructor(i,e,t,n,s){super(),this.modelService=i,this.languageService=e,this.languageDetectionService=t,this.accessibilityService=n,s&&this.handleExistingModel(s)}static{R1e(this,"BaseTextEditorModel")}static AUTO_DETECT_LANGUAGE_THROTTLE_DELAY=600;textEditorModelHandle=void 0;createdEditorModel;modelDisposeListener=this._register(new Yi);autoDetectLanguageThrottler=this._register(new tj(ZC.AUTO_DETECT_LANGUAGE_THROTTLE_DELAY));handleExistingModel(i){const e=this.modelService.getModel(i);if(!e)throw new Error(`Document with resource ${i.toString(!0)} does not exist`);this.textEditorModelHandle=i,this.registerModelDisposeListener(e)}registerModelDisposeListener(i){this.modelDisposeListener.value=i.onWillDispose(()=>{this.textEditorModelHandle=void 0,this.dispose()})}get textEditorModel(){return this.textEditorModelHandle?this.modelService.getModel(this.textEditorModelHandle):null}isReadonly(){return!0}_hasLanguageSetExplicitly=!1;get hasLanguageSetExplicitly(){return this._hasLanguageSetExplicitly}setLanguageId(i,e){this._hasLanguageSetExplicitly=!0,this.setLanguageIdInternal(i,e)}setLanguageIdInternal(i,e){this.isResolved()&&(!i||i===this.textEditorModel.getLanguageId()||this.textEditorModel.setLanguage(this.languageService.createById(i),e))}installModelListeners(i){const e=this._register(i.onDidChangeLanguage(t=>{t.source!==G8&&(this._hasLanguageSetExplicitly=!0,e.dispose())}))}getLanguageId(){return this.textEditorModel?.getLanguageId()}autoDetectLanguage(){return this.autoDetectLanguageThrottler.trigger(()=>this.doAutoDetectLanguage())}async doAutoDetectLanguage(){if(this.hasLanguageSetExplicitly||!this.textEditorModelHandle||!this.languageDetectionService.isEnabledForLanguage(this.getLanguageId()??rb))return;const i=await this.languageDetectionService.detectLanguage(this.textEditorModelHandle),e=this.getLanguageId();if(i&&i!==e&&!this.isDisposed()){this.setLanguageIdInternal(i,G8);const t=this.languageService.getLanguageName(i);this.accessibilityService.alert(g("languageAutoDetected","Language {0} was automatically detected and set as the language mode.",t??i))}}createTextEditorModel(i,e,t){const n=this.getFirstLineText(i),s=this.getOrCreateLanguage(e,this.languageService,t,n);return this.doCreateTextEditorModel(i,s,e)}doCreateTextEditorModel(i,e,t){let n=t&&this.modelService.getModel(t);return n?this.updateTextEditorModel(i,e.languageId):(n=this.modelService.createModel(i,e,t),this.createdEditorModel=!0,this.registerModelDisposeListener(n)),this.textEditorModelHandle=n.uri,n}getFirstLineText(i){const e=i;return typeof e.getFirstLineText=="function"?e.getFirstLineText(KB.FIRST_LINE_DETECTION_LENGTH_LIMIT):i.getLineContent(1).substr(0,KB.FIRST_LINE_DETECTION_LENGTH_LIMIT)}getOrCreateLanguage(i,e,t,n){return!t||t===rb?e.createByFilepathOrFirstLine(i??null,n):e.createById(t)}updateTextEditorModel(i,e){this.isResolved()&&(i&&this.modelService.updateModel(this.textEditorModel,i),e&&e!==rb&&this.textEditorModel.getLanguageId()!==e&&this.textEditorModel.setLanguage(this.languageService.createById(e)))}createSnapshot(){return this.textEditorModel?this.textEditorModel.createSnapshot(!0):null}isResolved(){return!!this.textEditorModelHandle}dispose(){this.modelDisposeListener.dispose(),this.textEditorModelHandle&&this.createdEditorModel&&this.modelService.destroyModel(this.textEditorModelHandle),this.textEditorModelHandle=void 0,this.createdEditorModel=!1,super.dispose()}};ZC=O1e([pI(0,Zc),pI(1,Ra),pI(2,CX),pI(3,hf)],ZC);const s6=De("workingCopyBackupService"),Xg=De("textResourceConfigurationService");De("textResourcePropertiesService");var M1e=Object.defineProperty,SX=(i,e)=>M1e(i,"name",{value:e,configurable:!0});function EX(i,e,t){let n=0;for(let o=0;o<i.length;o++)i.charAt(o)==="	"?n=Rn.nextIndentTabStop(n,e):n++;let s="";if(!t){const o=Math.floor(n/e);n=n%e;for(let r=0;r<o;r++)s+="	"}for(let o=0;o<n;o++)s+=" ";return s}SX(EX,"_normalizeIndentationFromWhitespace");function o6(i,e,t){let n=ia(i);return n===-1&&(n=i.length),EX(i.substring(0,n),e,t)+i.substring(n)}SX(o6,"normalizeIndentation");var B1e=Object.defineProperty,r6=(i,e)=>B1e(i,"name",{value:e,configurable:!0});class pg{constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}static{r6(this,"TextEditInfo")}static fromModelContentChanges(e){return e.map(n=>{const s=V.lift(n.range);return new pg(I_(s.getStartPosition()),I_(s.getEndPosition()),YZ(n.text))}).reverse()}toString(){return`[${el(this.startOffset)}...${el(this.endOffset)}) -> ${el(this.newLength)}`}}class F1e{static{r6(this,"BeforeEditPositionMapper")}nextEditIdx=0;deltaOldToNewLineCount=0;deltaOldToNewColumnCount=0;deltaLineIdxInOld=-1;edits;constructor(e){this.edits=e.map(t=>a6.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):null;return n===null?null:YC(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?Pn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):Pn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=el(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?Pn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):Pn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(ob(n,e)){this.nextEditIdx++;const s=el(n),o=el(this.translateOldToCur(t.endOffsetBeforeObj)),r=s.lineCount-o.lineCount;this.deltaOldToNewLineCount+=r;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=s.columnCount-o.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class a6{static{r6(this,"TextEditInfoCache")}static from(e){return new a6(e.startOffset,e.endOffset,e.newLength)}endOffsetBeforeObj;endOffsetAfterObj;offsetObj;constructor(e,t,n){this.endOffsetBeforeObj=el(t),this.endOffsetAfterObj=el(zn(e,n)),this.offsetObj=el(e)}}var V1e=Object.defineProperty,bv=(i,e)=>V1e(i,"name",{value:e,configurable:!0});function LX(i){if(i.length===0)return null;if(i.length===1)return i[0];let e=0;function t(){if(e>=i.length)return null;const r=e,a=i[r].listHeight;for(e++;e<i.length&&i[e].listHeight===a;)e++;return e-r>=2?l6(r===0&&e===i.length?i:i.slice(r,e),!1):i[r]}bv(t,"readNode");let n=t(),s=t();if(!s)return n;for(let r=t();r;r=t())YB(n,s)<=YB(s,r)?(n=DT(n,s),s=r):s=DT(s,r);return DT(n,s)}bv(LX,"concat23Trees");function l6(i,e=!1){if(i.length===0)return null;if(i.length===1)return i[0];let t=i.length;for(;t>3;){const n=t>>1;for(let s=0;s<n;s++){const o=s<<1;i[s]=Hc.create23(i[o],i[o+1],o+3===t?i[o+2]:null,e)}t=n}return Hc.create23(i[0],i[1],t>=3?i[2]:null,e)}bv(l6,"concat23TreesOfSameHeight");function YB(i,e){return Math.abs(i.listHeight-e.listHeight)}bv(YB,"heightDiff");function DT(i,e){return i.listHeight===e.listHeight?Hc.create23(i,e,null,!1):i.listHeight>e.listHeight?DX(i,e):IX(e,i)}bv(DT,"concat");function DX(i,e){i=i.toMutable();let t=i;const n=[];let s;for(;;){if(e.listHeight===t.listHeight){s=e;break}if(t.kind!==Eo.List)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let o=n.length-1;o>=0;o--){const r=n[o];s?r.childrenLength>=3?s=Hc.create23(r.unappendChild(),s,null,!1):(r.appendChildOfSameHeight(s),s=void 0):r.handleChildrenChanged()}return s?Hc.create23(i,s,null,!1):i}bv(DX,"append");function IX(i,e){i=i.toMutable();let t=i;const n=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==Eo.List)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let s=e;for(let o=n.length-1;o>=0;o--){const r=n[o];s?r.childrenLength>=3?s=Hc.create23(s,r.unprependChild(),null,!1):(r.prependChildOfSameHeight(s),s=void 0):r.handleChildrenChanged()}return s?Hc.create23(s,i,null,!1):i}bv(IX,"prepend");var W1e=Object.defineProperty,c6=(i,e)=>W1e(i,"name",{value:e,configurable:!0});class H1e{static{c6(this,"NodeReader")}nextNodes;offsets;idxs;lastOffset=Qr;constructor(e){this.nextNodes=[e],this.offsets=[Qr],this.idxs=[]}readLongestNodeAt(e,t){if(sb(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=ew(this.nextNodes);if(!n)return;const s=ew(this.offsets);if(sb(e,s))return;if(sb(s,e))if(zn(s,n.length)<=e)this.nextNodeAfterCurrent();else{const o=IT(n);o!==-1?(this.nextNodes.push(n.getChild(o)),this.offsets.push(s),this.idxs.push(o)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const o=IT(n);if(o===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(o)),this.offsets.push(s),this.idxs.push(o)}}}}nextNodeAfterCurrent(){for(;;){const e=ew(this.offsets),t=ew(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=ew(this.nextNodes),s=IT(n,this.idxs[this.idxs.length-1]);if(s!==-1){this.nextNodes.push(n.getChild(s)),this.offsets.push(zn(e,t.length)),this.idxs[this.idxs.length-1]=s;break}else this.idxs.pop()}}}function IT(i,e=-1){for(;;){if(e++,e>=i.childrenLength)return-1;if(i.getChild(e))return e}}c6(IT,"getNextChildIdx");function ew(i){return i.length>0?i[i.length-1]:void 0}c6(ew,"lastOrUndefined");var U1e=Object.defineProperty,TX=(i,e)=>U1e(i,"name",{value:e,configurable:!0});function ZB(i,e,t,n){return new z1e(i,e,t,n).parseDocument()}TX(ZB,"parseDocument");class z1e{constructor(e,t,n,s){if(this.tokenizer=e,this.createImmutableLists=s,n&&s)throw new Error("Not supported");this.oldNodeReader=n?new H1e(n):void 0,this.positionMapper=new F1e(t)}static{TX(this,"Parser")}oldNodeReader;positionMapper;_itemsConstructed=0;_itemsFromCache=0;get nodesConstructed(){return this._itemsConstructed}get nodesReused(){return this._itemsFromCache}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Ss.getEmpty(),0);return e||(e=Hc.getEmpty()),e}parseList(e,t){const n=[];for(;;){let o=this.tryReadChildFromCache(e);if(!o){const r=this.tokenizer.peek();if(!r||r.kind===rg.ClosingBracket&&r.bracketIds.intersects(e))break;o=this.parseChild(e,t+1)}o.kind===Eo.List&&o.childrenLength===0||n.push(o)}return this.oldNodeReader?LX(n):l6(n,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!mE(t)){const n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),s=>t!==null&&!sb(s.length,t)?!1:s.canBeReused(e));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}}parseChild(e,t){this._itemsConstructed++;const n=this.tokenizer.read();switch(n.kind){case rg.ClosingBracket:return new BSe(n.bracketIds,n.length);case rg.Text:return n.astNode;case rg.OpeningBracket:{if(t>300)return new c_(n.length);const s=e.merge(n.bracketIds),o=this.parseList(s,t+1),r=this.tokenizer.peek();return r&&r.kind===rg.ClosingBracket&&(r.bracketId===n.bracketId||r.bracketIds.intersects(n.bracketIds))?(this.tokenizer.read(),Zw.create(n.astNode,o,r.astNode)):Zw.create(n.astNode,o,null)}default:throw new Error("unexpected")}}}var $1e=Object.defineProperty,wE=(i,e)=>$1e(i,"name",{value:e,configurable:!0});function CE(i,e){if(i.length===0)return e;if(e.length===0)return i;const t=new $g(XB(i)),n=XB(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let s=t.dequeue();function o(c){if(c===void 0){const h=t.takeWhile(u=>!0)||[];return s&&h.unshift(s),h}const d=[];for(;s&&!mE(c);){const[h,u]=s.splitAt(c);d.push(h),c=YC(h.lengthAfter,c),s=u??t.dequeue()}return mE(c)||d.push(new Sp(!1,c,c)),d}wE(o,"nextS0ToS1MapWithS1LengthOf");const r=[];function a(c,d,h){if(r.length>0&&UH(r[r.length-1].endOffset,c)){const u=r[r.length-1];r[r.length-1]=new pg(u.startOffset,d,zn(u.newLength,h))}else r.push({startOffset:c,endOffset:d,newLength:h})}wE(a,"pushEdit");let l=Qr;for(const c of n){const d=o(c.lengthBefore);if(c.modified){const h=qZ(d,f=>f.lengthBefore),u=zn(l,h);a(l,u,c.lengthAfter),l=u}else for(const h of d){const u=l;l=zn(l,h.lengthBefore),h.modified&&a(u,l,h.lengthAfter)}}return r}wE(CE,"combineTextEditInfos");class Sp{constructor(e,t,n){this.modified=e,this.lengthBefore=t,this.lengthAfter=n}static{wE(this,"LengthMapping")}splitAt(e){const t=YC(e,this.lengthAfter);return UH(t,Qr)?[this,void 0]:this.modified?[new Sp(this.modified,this.lengthBefore,e),new Sp(this.modified,Qr,t)]:[new Sp(this.modified,e,e),new Sp(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${el(this.lengthBefore)} -> ${el(this.lengthAfter)}`}}function XB(i){const e=[];let t=Qr;for(const n of i){const s=YC(t,n.startOffset);mE(s)||e.push(new Sp(!1,s,s));const o=YC(n.startOffset,n.endOffset);e.push(new Sp(!0,o,n.newLength)),t=n.endOffset}return e}wE(XB,"toLengthMapping");var G1e=Object.defineProperty,rS=(i,e)=>G1e(i,"name",{value:e,configurable:!0});class K1e extends ${constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===Wb.Completed?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),s=new PSe(this.textModel.getValue(),n);this.initialAstWithoutTokens=ZB(s,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}static{rS(this,"BracketPairsTree")}didChangeEmitter=new x;initialAstWithoutTokens;astWithTokens;denseKeyProvider=new nSe;brackets=new ASe(this.denseKeyProvider,this.getLanguageConfiguration);didLanguageChange(e){return this.brackets.didLanguageChange(e)}onDidChange=this.didChangeEmitter.event;queuedTextEditsForInitialAstWithoutTokens=[];queuedTextEdits=[];handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===Wb.Completed){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(n=>new pg(Pn(n.fromLineNumber-1,0),Pn(n.toLineNumber,0),Pn(n.toLineNumber-n.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=pg.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const n=CE(this.queuedTextEdits,e);this.queuedTextEdits=n,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=CE(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,n){const s=t,o=new kSe(this.textModel,this.brackets);return ZB(o,e,s,n)}getBracketsInRange(e,t){this.flushQueue();const n=Pn(e.startLineNumber-1,e.startColumn-1),s=Pn(e.endLineNumber-1,e.endColumn-1);return new Lg(o=>{const r=this.initialAstWithoutTokens||this.astWithTokens;yx(r,Qr,r.length,n,s,o,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const n=I_(e.getStartPosition()),s=I_(e.getEndPosition());return new Lg(o=>{const r=this.initialAstWithoutTokens||this.astWithTokens,a=new j1e(o,t,this.textModel);Sx(r,Qr,r.length,n,s,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return h6(t,Qr,t.length,I_(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return d6(t,Qr,t.length,I_(e))}}function d6(i,e,t,n){if(i.kind===Eo.List||i.kind===Eo.Pair){const s=[];for(const o of i.children)t=zn(e,o.length),s.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let o=s.length-1;o>=0;o--){const{nodeOffsetStart:r,nodeOffsetEnd:a}=s[o];if(sb(r,n)){const l=d6(i.children[o],r,a,n);if(l)return l}}return null}else{if(i.kind===Eo.UnexpectedClosingBracket)return null;if(i.kind===Eo.Bracket){const s=Op(e,t);return{bracketInfo:i.bracketInfo,range:s}}}return null}rS(d6,"getFirstBracketBefore");function h6(i,e,t,n){if(i.kind===Eo.List||i.kind===Eo.Pair){for(const s of i.children){if(t=zn(e,s.length),sb(n,t)){const o=h6(s,e,t,n);if(o)return o}e=t}return null}else{if(i.kind===Eo.UnexpectedClosingBracket)return null;if(i.kind===Eo.Bracket){const s=Op(e,t);return{bracketInfo:i.bracketInfo,range:s}}}return null}rS(h6,"getFirstBracketAfter");function yx(i,e,t,n,s,o,r,a,l,c,d=!1){if(r>200)return!0;e:for(;;)switch(i.kind){case Eo.List:{const h=i.childrenLength;for(let u=0;u<h;u++){const f=i.getChild(u);if(f){if(t=zn(e,f.length),ob(e,s)&&_w(t,n)){if(_w(t,s)){i=f;continue e}if(!yx(f,e,t,n,s,o,r,0,l,c))return!1}e=t}}return!0}case Eo.Pair:{const h=!c||!i.closingBracket||i.closingBracket.bracketInfo.closesColorized(i.openingBracket.bracketInfo);let u=0;if(l){let p=l.get(i.openingBracket.text);p===void 0&&(p=0),u=p,h&&(p++,l.set(i.openingBracket.text,p))}const f=i.childrenLength;for(let p=0;p<f;p++){const m=i.getChild(p);if(m){if(t=zn(e,m.length),ob(e,s)&&_w(t,n)){if(_w(t,s)&&m.kind!==Eo.Bracket){i=m,h?(r++,a=u+1):a=u;continue e}if((h||m.kind!==Eo.Bracket||!i.closingBracket)&&!yx(m,e,t,n,s,o,h?r+1:r,h?u+1:u,l,c,!i.closingBracket))return!1}e=t}}return l?.set(i.openingBracket.text,u),!0}case Eo.UnexpectedClosingBracket:{const h=Op(e,t);return o(new U8(h,r-1,0,!0))}case Eo.Bracket:{const h=Op(e,t);return o(new U8(h,r-1,a-1,d))}case Eo.Text:return!0}}rS(yx,"collectBrackets");class j1e{constructor(e,t,n){this.push=e,this.includeMinIndentation=t,this.textModel=n}static{rS(this,"CollectBracketPairsContext")}}function Sx(i,e,t,n,s,o,r,a){if(r>200)return!0;let l=!0;if(i.kind===Eo.Pair){let c=0;if(a){let u=a.get(i.openingBracket.text);u===void 0&&(u=0),c=u,u++,a.set(i.openingBracket.text,u)}const d=zn(e,i.openingBracket.length);let h=-1;if(o.includeMinIndentation&&(h=i.computeMinIndentation(e,o.textModel)),l=o.push(new WSe(Op(e,t),Op(e,d),i.closingBracket?Op(zn(d,i.child?.length||Qr),t):void 0,r,c,i,h)),e=d,l&&i.child){const u=i.child;if(t=zn(e,u.length),ob(e,s)&&_w(t,n)&&(l=Sx(u,e,t,n,s,o,r+1,a),!l))return!1}a?.set(i.openingBracket.text,c)}else{let c=e;for(const d of i.children){const h=c;if(c=zn(c,d.length),ob(h,s)&&ob(n,c)&&(l=Sx(d,h,c,n,s,o,r,a),!l))return!1}}return l}rS(Sx,"collectBracketPairs");var q1e=Object.defineProperty,Uh=(i,e)=>q1e(i,"name",{value:e,configurable:!0});class Y1e extends ${constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}static{Uh(this,"BracketPairsTextModelPart")}bracketPairsTree=this._register(new Yi);onDidChangeEmitter=new x;onDidChange=this.onDidChangeEmitter.event;get canBuildAST(){return this.textModel.getValueLength()<=5e6}bracketsRequested=!1;handleLanguageConfigurationServiceChange(e){(!e.languageId||this.bracketPairsTree.value?.object.didLanguageChange(e.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){this.bracketPairsTree.value?.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){this.bracketPairsTree.value?.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){this.bracketPairsTree.value?.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new te;this.bracketPairsTree.value=AX(e.add(new K1e(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!1)||Lg.empty}getBracketPairsInRangeWithMinIndentation(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!0)||Lg.empty}getBracketsInRange(e,t=!1){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketsInRange(e,t)||Lg.empty}findMatchingBracketUp(e,t,n){const s=this.textModel.validatePosition(t),o=this.textModel.getLanguageIdAtPosition(s.lineNumber,s.column);if(this.canBuildAST){const r=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew.getClosingBracketInfo(e);if(!r)return null;const a=this.getBracketPairsInRange(V.fromPositions(t,t)).findLast(l=>r.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const r=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(o).brackets;if(!a)return null;const l=a.textIsBracket[r];return l?_1(this._findMatchingBracketUp(l,s,TT(n))):null}}matchBracket(e,t){if(this.canBuildAST){const n=this.getBracketPairsInRange(V.fromPositions(e,e)).filter(s=>s.closingBracketRange!==void 0&&(s.openingBracketRange.containsPosition(e)||s.closingBracketRange.containsPosition(e))).findLastMaxBy(zl(s=>s.openingBracketRange.containsPosition(e)?s.openingBracketRange:s.closingBracketRange,V.compareRangesUsingStarts));return n?[n.openingBracketRange,n.closingBracketRange]:null}else{const n=TT(t);return this._matchBracket(this.textModel.validatePosition(e),n)}}_establishBracketSearchOffsets(e,t,n,s){const o=t.getCount(),r=t.getLanguageId(s);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let c=s-1;c>=0;c--){const d=t.getEndOffset(c);if(d<=a)break;if(md(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){a=d;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let c=s+1;c<o;c++){const d=t.getStartOffset(c);if(d>=l)break;if(md(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){l=d;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const n=e.lineNumber,s=this.textModel.tokenization.getLineTokens(n),o=this.textModel.getLineContent(n),r=s.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(r)).brackets;if(a&&!md(s.getStandardTokenType(r))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,s,a,r),d=null;for(;;){const h=bc.findNextBracketInRange(a.forwardRegex,n,o,l,c);if(!h)break;if(h.startColumn<=e.column&&e.column<=h.endColumn){const u=o.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),f=this._matchFoundBracket(h,a.textIsBracket[u],a.textIsOpenBracket[u],t);if(f){if(f instanceof Ju)return null;d=f}}l=h.endColumn-1}if(d)return d}if(r>0&&s.getStartOffset(r)===e.column-1){const l=r-1,c=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(l)).brackets;if(c&&!md(s.getStandardTokenType(l))){const{searchStartOffset:d,searchEndOffset:h}=this._establishBracketSearchOffsets(e,s,c,l),u=bc.findPrevBracketInRange(c.reversedRegex,n,o,d,h);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn){const f=o.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),p=this._matchFoundBracket(u,c.textIsBracket[f],c.textIsOpenBracket[f],t);if(p)return p instanceof Ju?null:p}}}return null}_matchFoundBracket(e,t,n,s){if(!t)return null;const o=n?this._findMatchingBracketDown(t,e.getEndPosition(),s):this._findMatchingBracketUp(t,e.getStartPosition(),s);return o?o instanceof Ju?o:[e,o]:null}_findMatchingBracketUp(e,t,n){const s=e.languageId,o=e.reversedRegex;let r=-1,a=0;const l=Uh((c,d,h,u)=>{for(;;){if(n&&++a%100===0&&!n())return Ju.INSTANCE;const f=bc.findPrevBracketInRange(o,c,d,h,u);if(!f)break;const p=d.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(p)?r++:e.isClose(p)&&r--,r===0)return f;u=f.startColumn-1}return null},"searchPrevMatchingBracketInRange");for(let c=t.lineNumber;c>=1;c--){const d=this.textModel.tokenization.getLineTokens(c),h=d.getCount(),u=this.textModel.getLineContent(c);let f=h-1,p=u.length,m=u.length;c===t.lineNumber&&(f=d.findTokenIndexAtOffset(t.column-1),p=t.column-1,m=t.column-1);let _=!0;for(;f>=0;f--){const w=d.getLanguageId(f)===s&&!md(d.getStandardTokenType(f));if(w)_?p=d.getStartOffset(f):(p=d.getStartOffset(f),m=d.getEndOffset(f));else if(_&&p!==m){const v=l(c,u,p,m);if(v)return v}_=w}if(_&&p!==m){const w=l(c,u,p,m);if(w)return w}}return null}_findMatchingBracketDown(e,t,n){const s=e.languageId,o=e.forwardRegex;let r=1,a=0;const l=Uh((d,h,u,f)=>{for(;;){if(n&&++a%100===0&&!n())return Ju.INSTANCE;const p=bc.findNextBracketInRange(o,d,h,u,f);if(!p)break;const m=h.substring(p.startColumn-1,p.endColumn-1).toLowerCase();if(e.isOpen(m)?r++:e.isClose(m)&&r--,r===0)return p;u=p.endColumn-1}return null},"searchNextMatchingBracketInRange"),c=this.textModel.getLineCount();for(let d=t.lineNumber;d<=c;d++){const h=this.textModel.tokenization.getLineTokens(d),u=h.getCount(),f=this.textModel.getLineContent(d);let p=0,m=0,_=0;d===t.lineNumber&&(p=h.findTokenIndexAtOffset(t.column-1),m=t.column-1,_=t.column-1);let w=!0;for(;p<u;p++){const v=h.getLanguageId(p)===s&&!md(h.getStandardTokenType(p));if(v)w||(m=h.getStartOffset(p)),_=h.getEndOffset(p);else if(w&&m!==_){const b=l(d,f,m,_);if(b)return b}w=v}if(w&&m!==_){const v=l(d,f,m,_);if(v)return v}}return null}findPrevBracket(e){const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketBefore(t)||null;let n=null,s=null,o=null;for(let r=t.lineNumber;r>=1;r--){const a=this.textModel.tokenization.getLineTokens(r),l=a.getCount(),c=this.textModel.getLineContent(r);let d=l-1,h=c.length,u=c.length;if(r===t.lineNumber){d=a.findTokenIndexAtOffset(t.column-1),h=t.column-1,u=t.column-1;const p=a.getLanguageId(d);n!==p&&(n=p,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,o=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew)}let f=!0;for(;d>=0;d--){const p=a.getLanguageId(d);if(n!==p){if(s&&o&&f&&h!==u){const _=bc.findPrevBracketInRange(s.reversedRegex,r,c,h,u);if(_)return this._toFoundBracket(o,_);f=!1}n=p,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,o=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew}const m=!!s&&!md(a.getStandardTokenType(d));if(m)f?h=a.getStartOffset(d):(h=a.getStartOffset(d),u=a.getEndOffset(d));else if(o&&s&&f&&h!==u){const _=bc.findPrevBracketInRange(s.reversedRegex,r,c,h,u);if(_)return this._toFoundBracket(o,_)}f=m}if(o&&s&&f&&h!==u){const p=bc.findPrevBracketInRange(s.reversedRegex,r,c,h,u);if(p)return this._toFoundBracket(o,p)}}return null}findNextBracket(e){const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketAfter(t)||null;const n=this.textModel.getLineCount();let s=null,o=null,r=null;for(let a=t.lineNumber;a<=n;a++){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),d=this.textModel.getLineContent(a);let h=0,u=0,f=0;if(a===t.lineNumber){h=l.findTokenIndexAtOffset(t.column-1),u=t.column-1,f=t.column-1;const m=l.getLanguageId(h);s!==m&&(s=m,o=this.languageConfigurationService.getLanguageConfiguration(s).brackets,r=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let p=!0;for(;h<c;h++){const m=l.getLanguageId(h);if(s!==m){if(r&&o&&p&&u!==f){const w=bc.findNextBracketInRange(o.forwardRegex,a,d,u,f);if(w)return this._toFoundBracket(r,w);p=!1}s=m,o=this.languageConfigurationService.getLanguageConfiguration(s).brackets,r=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const _=!!o&&!md(l.getStandardTokenType(h));if(_)p||(u=l.getStartOffset(h)),f=l.getEndOffset(h);else if(r&&o&&p&&u!==f){const w=bc.findNextBracketInRange(o.forwardRegex,a,d,u,f);if(w)return this._toFoundBracket(r,w)}p=_}if(r&&o&&p&&u!==f){const m=bc.findNextBracketInRange(o.forwardRegex,a,d,u,f);if(m)return this._toFoundBracket(r,m)}}return null}findEnclosingBrackets(e,t){const n=this.textModel.validatePosition(e);if(this.canBuildAST){const f=V.fromPositions(n),p=this.getBracketPairsInRange(V.fromPositions(n,n)).findLast(m=>m.closingBracketRange!==void 0&&m.range.strictContainsRange(f));return p?[p.openingBracketRange,p.closingBracketRange]:null}const s=TT(t),o=this.textModel.getLineCount(),r=new Map;let a=[];const l=Uh((f,p)=>{if(!r.has(f)){const m=[];for(let _=0,w=p?p.brackets.length:0;_<w;_++)m[_]=0;r.set(f,m)}a=r.get(f)},"resetCounts");let c=0;const d=Uh((f,p,m,_,w)=>{for(;;){if(s&&++c%100===0&&!s())return Ju.INSTANCE;const v=bc.findNextBracketInRange(f.forwardRegex,p,m,_,w);if(!v)break;const b=m.substring(v.startColumn-1,v.endColumn-1).toLowerCase(),C=f.textIsBracket[b];if(C&&(C.isOpen(b)?a[C.index]++:C.isClose(b)&&a[C.index]--,a[C.index]===-1))return this._matchFoundBracket(v,C,!1,s);_=v.endColumn-1}return null},"searchInRange");let h=null,u=null;for(let f=n.lineNumber;f<=o;f++){const p=this.textModel.tokenization.getLineTokens(f),m=p.getCount(),_=this.textModel.getLineContent(f);let w=0,v=0,b=0;if(f===n.lineNumber){w=p.findTokenIndexAtOffset(n.column-1),v=n.column-1,b=n.column-1;const S=p.getLanguageId(w);h!==S&&(h=S,u=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,u))}let C=!0;for(;w<m;w++){const S=p.getLanguageId(w);if(h!==S){if(u&&C&&v!==b){const T=d(u,f,_,v,b);if(T)return _1(T);C=!1}h=S,u=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,u)}const D=!!u&&!md(p.getStandardTokenType(w));if(D)C||(v=p.getStartOffset(w)),b=p.getEndOffset(w);else if(u&&C&&v!==b){const T=d(u,f,_,v,b);if(T)return _1(T)}C=D}if(u&&C&&v!==b){const S=d(u,f,_,v,b);if(S)return _1(S)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();const s=e.getBracketInfo(n);return s?{range:t,bracketInfo:s}:null}}function AX(i,e){return{object:i,dispose:Uh(()=>e?.dispose(),"dispose")}}Uh(AX,"createDisposableRef");function TT(i){if(typeof i>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=i}}Uh(TT,"createTimeBasedContinueBracketSearchPredicate");class Ju{static{Uh(this,"BracketSearchCanceled")}static INSTANCE=new Ju;_searchCanceledBrand=void 0;constructor(){}}function _1(i){return i instanceof Ju?null:i}Uh(_1,"stripBracketSearchCanceled");const xX=L("editor.lineHighlightBackground",null,g("lineHighlight","Background color for the highlight of line at the cursor position.")),K8=L("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:Re},g("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));L("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},g("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);L("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:Vi,hcLight:Vi},g("rangeHighlightBorder","Background color of the border around highlighted ranges."));L("editor.symbolHighlightBackground",{dark:bp,light:bp,hcDark:null,hcLight:null},g("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);L("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:Vi,hcLight:Vi},g("symbolHighlightBorder","Background color of the border around highlighted symbols."));const wP=L("editorCursor.foreground",{dark:"#AEAFAD",light:U.black,hcDark:U.white,hcLight:"#0F4A85"},g("caret","Color of the editor cursor.")),u6=L("editorCursor.background",null,g("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),kX=L("editorMultiCursor.primary.foreground",wP,g("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),Z1e=L("editorMultiCursor.primary.background",u6,g("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),NX=L("editorMultiCursor.secondary.foreground",wP,g("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),X1e=L("editorMultiCursor.secondary.background",u6,g("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),g6=L("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},g("editorWhitespaces","Color of whitespace characters in the editor.")),Q1e=L("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:U.white,hcLight:"#292929"},g("editorLineNumbers","Color of editor line numbers.")),J1e=L("editorIndentGuide.background",g6,g("editorIndentGuides","Color of the editor indentation guides."),!1,g("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),e0e=L("editorIndentGuide.activeBackground",g6,g("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,g("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),t0e=L("editorIndentGuide.background1",J1e,g("editorIndentGuides1","Color of the editor indentation guides (1).")),i0e=L("editorIndentGuide.background2","#00000000",g("editorIndentGuides2","Color of the editor indentation guides (2).")),n0e=L("editorIndentGuide.background3","#00000000",g("editorIndentGuides3","Color of the editor indentation guides (3).")),s0e=L("editorIndentGuide.background4","#00000000",g("editorIndentGuides4","Color of the editor indentation guides (4).")),o0e=L("editorIndentGuide.background5","#00000000",g("editorIndentGuides5","Color of the editor indentation guides (5).")),r0e=L("editorIndentGuide.background6","#00000000",g("editorIndentGuides6","Color of the editor indentation guides (6).")),a0e=L("editorIndentGuide.activeBackground1",e0e,g("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),l0e=L("editorIndentGuide.activeBackground2","#00000000",g("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),c0e=L("editorIndentGuide.activeBackground3","#00000000",g("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),d0e=L("editorIndentGuide.activeBackground4","#00000000",g("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),h0e=L("editorIndentGuide.activeBackground5","#00000000",g("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),u0e=L("editorIndentGuide.activeBackground6","#00000000",g("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),g0e=L("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:Vi,hcLight:Vi},g("editorActiveLineNumber","Color of editor active line number"),!1,g("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));L("editorLineNumber.activeForeground",g0e,g("editorActiveLineNumber","Color of editor active line number"));const f0e=L("editorLineNumber.dimmedForeground",null,g("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));L("editorRuler.foreground",{dark:"#5A5A5A",light:U.lightgrey,hcDark:U.white,hcLight:"#292929"},g("editorRuler","Color of the editor rulers."));L("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},g("editorCodeLensForeground","Foreground color of editor CodeLens"));L("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},g("editorBracketMatchBackground","Background color behind matching brackets"));L("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:Re,hcLight:Re},g("editorBracketMatchBorder","Color for matching brackets boxes"));const p0e=L("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},g("editorOverviewRulerBorder","Color of the overview ruler border.")),m0e=L("editorOverviewRuler.background",null,g("editorOverviewRulerBackground","Background color of the editor overview ruler."));L("editorGutter.background",Zd,g("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));L("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:U.fromHex("#fff").transparent(.8),hcLight:Re},g("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));const _0e=L("editorUnnecessaryCode.opacity",{dark:U.fromHex("#000a"),light:U.fromHex("#0007"),hcDark:null,hcLight:null},g("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));L("editorGhostText.border",{dark:null,light:null,hcDark:U.fromHex("#fff").transparent(.8),hcLight:U.fromHex("#292929").transparent(.8)},g("editorGhostTextBorder","Border color of ghost text in the editor."));L("editorGhostText.foreground",{dark:U.fromHex("#ffffff56"),light:U.fromHex("#0007"),hcDark:null,hcLight:null},g("editorGhostTextForeground","Foreground color of the ghost text in the editor."));L("editorGhostText.background",null,g("editorGhostTextBackground","Background color of the ghost text in the editor."));const b0e=new U(new Wt(0,122,204,.6));L("editorOverviewRuler.rangeHighlightForeground",b0e,g("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0);L("editorOverviewRuler.errorForeground",{dark:new U(new Wt(255,18,18,.7)),light:new U(new Wt(255,18,18,.7)),hcDark:new U(new Wt(255,50,50,1)),hcLight:"#B5200D"},g("overviewRuleError","Overview ruler marker color for errors."));L("editorOverviewRuler.warningForeground",{dark:Xd,light:Xd,hcDark:UA,hcLight:UA},g("overviewRuleWarning","Overview ruler marker color for warnings."));L("editorOverviewRuler.infoForeground",{dark:qg,light:qg,hcDark:zA,hcLight:zA},g("overviewRuleInfo","Overview ruler marker color for infos."));const PX=L("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},g("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),RX=L("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},g("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),OX=L("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},g("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),MX=L("editorBracketHighlight.foreground4","#00000000",g("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),BX=L("editorBracketHighlight.foreground5","#00000000",g("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),FX=L("editorBracketHighlight.foreground6","#00000000",g("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),v0e=L("editorBracketHighlight.unexpectedBracket.foreground",{dark:new U(new Wt(255,18,18,.8)),light:new U(new Wt(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},g("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),w0e=L("editorBracketPairGuide.background1","#00000000",g("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),C0e=L("editorBracketPairGuide.background2","#00000000",g("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),y0e=L("editorBracketPairGuide.background3","#00000000",g("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),S0e=L("editorBracketPairGuide.background4","#00000000",g("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),E0e=L("editorBracketPairGuide.background5","#00000000",g("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),L0e=L("editorBracketPairGuide.background6","#00000000",g("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),D0e=L("editorBracketPairGuide.activeBackground1","#00000000",g("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),I0e=L("editorBracketPairGuide.activeBackground2","#00000000",g("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),T0e=L("editorBracketPairGuide.activeBackground3","#00000000",g("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),A0e=L("editorBracketPairGuide.activeBackground4","#00000000",g("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),x0e=L("editorBracketPairGuide.activeBackground5","#00000000",g("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),k0e=L("editorBracketPairGuide.activeBackground6","#00000000",g("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));L("editorUnicodeHighlight.border",Xd,g("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));L("editorUnicodeHighlight.background",bfe,g("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));jc((i,e)=>{const t=i.getColor(Zd),n=i.getColor(xX),s=n&&!n.isTransparent()?n:t;s&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${s}; }`)});var N0e=Object.defineProperty,VX=(i,e)=>N0e(i,"name",{value:e,configurable:!0});class P0e extends ${constructor(e){super(),this.textModel=e,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}static{VX(this,"ColorizedBracketPairsDecorationProvider")}colorizationOptions;colorProvider=new WX;onDidChangeEmitter=new x;onDidChange=this.onDidChangeEmitter.event;handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,n,s){return s?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(r=>({id:`bracket${r.range.toString()}-${r.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(r,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:r.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new V(1,1,this.textModel.getLineCount(),1),e,t):[]}}class WX{static{VX(this,"ColorProvider")}unexpectedClosingBracketClassName="unexpected-closing-bracket";getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}jc((i,e)=>{const t=[PX,RX,OX,MX,BX,FX],n=new WX;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${i.getColor(v0e)}; }`);const s=t.map(o=>i.getColor(o)).filter(o=>!!o).filter(o=>!o.isTransparent());for(let o=0;o<30;o++){const r=s[o%s.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(o)} { color: ${r}; }`)}});var R0e=Object.defineProperty,vv=(i,e)=>R0e(i,"name",{value:e,configurable:!0});function $m(i){return i.toString()}vv($m,"uriGetComparisonKey");class Fs{constructor(e,t,n,s,o,r,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=s,this.beforeCursorState=o,this.afterCursorState=r,this.changes=a}static{vv(this,"SingleModelEditStackData")}static create(e,t){const n=e.getAlternativeVersionId(),s=Ex(e);return new Fs(n,n,s,s,t,t,[])}append(e,t,n,s,o){t.length>0&&(this.changes=_Z(this.changes,t)),this.afterEOL=n,this.afterVersionId=s,this.afterCursorState=o}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(vr(e,t?t.length:0,n),n+=4,t)for(const s of t)vr(e,s.selectionStartLineNumber,n),n+=4,vr(e,s.selectionStartColumn,n),n+=4,vr(e,s.positionLineNumber,n),n+=4,vr(e,s.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const s=br(e,t);t+=4;for(let o=0;o<s;o++){const r=br(e,t);t+=4;const a=br(e,t);t+=4;const l=br(e,t);t+=4;const c=br(e,t);t+=4,n.push(new St(r,a,l,c))}return t}serialize(){let e=10+Fs._writeSelectionsSize(this.beforeCursorState)+Fs._writeSelectionsSize(this.afterCursorState)+4;for(const s of this.changes)e+=s.writeSize();const t=new Uint8Array(e);let n=0;vr(t,this.beforeVersionId,n),n+=4,vr(t,this.afterVersionId,n),n+=4,dx(t,this.beforeEOL,n),n+=1,dx(t,this.afterEOL,n),n+=1,n=Fs._writeSelections(t,this.beforeCursorState,n),n=Fs._writeSelections(t,this.afterCursorState,n),vr(t,this.changes.length,n),n+=4;for(const s of this.changes)n=s.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const s=br(t,n);n+=4;const o=br(t,n);n+=4;const r=cx(t,n);n+=1;const a=cx(t,n);n+=1;const l=[];n=Fs._readSelections(t,n,l);const c=[];n=Fs._readSelections(t,n,c);const d=br(t,n);n+=4;const h=[];for(let u=0;u<d;u++)n=yo.read(t,n,h);return new Fs(s,o,r,a,l,c,h)}}class HX{constructor(e,t,n,s){this.label=e,this.code=t,this.model=n,this._data=Fs.create(n,s)}static{vv(this,"SingleModelEditStackElement")}model;_data;get type(){return QH.Resource}get resource(){return ne.isUri(this.model)?this.model:this.model.uri}toString(){return(this._data instanceof Fs?this._data:Fs.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(ne.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Fs}append(e,t,n,s,o){this._data instanceof Fs&&this._data.append(e,t,n,s,o)}close(){this._data instanceof Fs&&(this._data=this._data.serialize())}open(){this._data instanceof Fs||(this._data=Fs.deserialize(this._data))}undo(){if(ne.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Fs&&(this._data=this._data.serialize());const e=Fs.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(ne.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Fs&&(this._data=this._data.serialize());const e=Fs.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Fs&&(this._data=this._data.serialize()),this._data.byteLength+168}}class O0e{constructor(e,t,n){this.label=e,this.code=t,this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(const s of this._editStackElementsArr){const o=$m(s.resource);this._editStackElementsMap.set(o,s)}this._delegate=null}static{vv(this,"MultiModelEditStackElement")}type=QH.Workspace;_isOpen;_editStackElementsArr;_editStackElementsMap;_delegate;get resources(){return this._editStackElementsArr.map(e=>e.resource)}setDelegate(e){this._delegate=e}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}getMissingModels(){const e=[];for(const t of this._editStackElementsArr)ne.isUri(t.model)&&e.push(t.model);return e}matchesResource(e){const t=$m(e);return this._editStackElementsMap.has(t)}setModel(e){const t=$m(ne.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=$m(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,s,o){const r=$m(e.uri);this._editStackElementsMap.get(r).append(e,t,n,s,o)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=$m(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${lh(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function Ex(i){return i.getEOL()===`
`?ag.LF:ag.CRLF}vv(Ex,"getModelEOL");function AT(i){return i?i instanceof HX||i instanceof O0e:!1}vv(AT,"isEditStackElement");class f6{static{vv(this,"EditStack")}_model;_undoRedoService;constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);AT(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);AT(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const n=this._undoRedoService.getLastElement(this._model.uri);if(AT(n)&&n.canAppend(this._model))return n;const s=new HX(g("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(s,t),s}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],Ex(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n,s){const o=this._getOrCreateEditStackElement(e,s),r=this._model.applyEdits(t,!0),a=f6._computeCursorState(n,r),l=r.map((c,d)=>({index:d,textChange:c.textChange}));return l.sort((c,d)=>c.textChange.oldPosition===d.textChange.oldPosition?c.index-d.index:c.textChange.oldPosition-d.textChange.oldPosition),o.append(this._model,l.map(c=>c.textChange),Ex(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return Kt(n),null}}}var M0e=Object.defineProperty,B0e=(i,e)=>M0e(i,"name",{value:e,configurable:!0});class UX extends ${static{B0e(this,"TextModelPart")}_isDisposed=!1;dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}var F0e=Object.defineProperty,V0e=(i,e)=>F0e(i,"name",{value:e,configurable:!0});function zX(i,e){let t=0,n=0;const s=i.length;for(;n<s;){const o=i.charCodeAt(n);if(o===A.Space)t++;else if(o===A.Tab)t=t-t%e+e;else break;n++}return n===s?-1:t}V0e(zX,"computeIndentLevel");var W0e=Object.defineProperty,xT=(i,e)=>W0e(i,"name",{value:e,configurable:!0});class H0e extends UX{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}static{xT(this,"GuidesTextModelPart")}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return zX(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,n){this.assertNotDisposed();const s=this.textModel.getLineCount();if(e<1||e>s)throw new Et("Illegal value for lineNumber");const o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(o&&o.offSide);let a=-2,l=-1,c=-2,d=-1;const h=xT(T=>{if(a!==-1&&(a===-2||a>T-1)){a=-1,l=-1;for(let I=T-2;I>=0;I--){const R=this._computeIndentLevel(I);if(R>=0){a=I,l=R;break}}}if(c===-2){c=-1,d=-1;for(let I=T;I<s;I++){const R=this._computeIndentLevel(I);if(R>=0){c=I,d=R;break}}}},"up_resolveIndents");let u=-2,f=-1,p=-2,m=-1;const _=xT(T=>{if(u===-2){u=-1,f=-1;for(let I=T-2;I>=0;I--){const R=this._computeIndentLevel(I);if(R>=0){u=I,f=R;break}}}if(p!==-1&&(p===-2||p<T-1)){p=-1,m=-1;for(let I=T;I<s;I++){const R=this._computeIndentLevel(I);if(R>=0){p=I,m=R;break}}}},"down_resolveIndents");let w=0,v=!0,b=0,C=!0,S=0,D=0;for(let T=0;v||C;T++){const I=e-T,R=e+T;T>1&&(I<1||I<t)&&(v=!1),T>1&&(R>s||R>n)&&(C=!1),T>5e4&&(v=!1,C=!1);let G=-1;if(v&&I>=1){const X=this._computeIndentLevel(I-1);X>=0?(c=I-1,d=X,G=Math.ceil(X/this.textModel.getOptions().indentSize)):(h(I),G=this._getIndentLevelForWhitespaceLine(r,l,d))}let K=-1;if(C&&R<=s){const X=this._computeIndentLevel(R-1);X>=0?(u=R-1,f=X,K=Math.ceil(X/this.textModel.getOptions().indentSize)):(_(R),K=this._getIndentLevelForWhitespaceLine(r,f,m))}if(T===0){D=G;continue}if(T===1){if(R<=s&&K>=0&&D+1===K){v=!1,w=R,b=R,S=K;continue}if(I>=1&&G>=0&&G-1===D){C=!1,w=I,b=I,S=G;continue}if(w=e,b=e,S=D,S===0)return{startLineNumber:w,endLineNumber:b,indent:S}}v&&(G>=S?w=I:v=!1),C&&(K>=S?b=R:C=!1)}return{startLineNumber:w,endLineNumber:b,indent:S}}getLinesBracketGuides(e,t,n,s){const o=[];for(let h=e;h<=t;h++)o.push([]);const r=!0,a=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new V(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let l;if(n&&a.length>0){const h=(e<=n.lineNumber&&n.lineNumber<=t?a:this.textModel.bracketPairs.getBracketPairsInRange(V.fromPositions(n)).toArray()).filter(u=>V.strictContainsPosition(u.range,n));l=O0(h,u=>r)?.range}const c=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,d=new $X;for(const h of a){if(!h.closingBracketRange)continue;const u=l&&h.range.equalsRange(l);if(!u&&!s.includeInactive)continue;const f=d.getInlineClassName(h.nestingLevel,h.nestingLevelOfEqualBracketType,c)+(s.highlightActive&&u?" "+d.activeClassName:""),p=h.openingBracketRange.getStartPosition(),m=h.closingBracketRange.getStartPosition(),_=s.horizontalGuides===Qw.Enabled||s.horizontalGuides===Qw.EnabledForActive&&u;if(h.range.startLineNumber===h.range.endLineNumber){_&&o[h.range.startLineNumber-e].push(new T_(-1,h.openingBracketRange.getEndPosition().column,f,new q1(!1,m.column),-1,-1));continue}const w=this.getVisibleColumnFromPosition(m),v=this.getVisibleColumnFromPosition(h.openingBracketRange.getStartPosition()),b=Math.min(v,w,h.minVisibleColumnIndentation+1);let C=!1;ia(this.textModel.getLineContent(h.closingBracketRange.startLineNumber))<h.closingBracketRange.startColumn-1&&(C=!0);const T=Math.max(p.lineNumber,e),I=Math.min(m.lineNumber,t),R=C?1:0;for(let G=T;G<I+R;G++)o[G-e].push(new T_(b,-1,f,null,G===p.lineNumber?p.column:-1,G===m.lineNumber?m.column:-1));_&&(p.lineNumber>=e&&v>b&&o[p.lineNumber-e].push(new T_(b,-1,f,new q1(!1,p.column),-1,-1)),m.lineNumber<=t&&w>b&&o[m.lineNumber-e].push(new T_(b,-1,f,new q1(!C,m.column),-1,-1)))}for(const h of o)h.sort((u,f)=>u.visibleColumn-f.visibleColumn);return o}getVisibleColumnFromPosition(e){return Rn.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const s=this.textModel.getOptions(),o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(o&&o.offSide),a=new Array(t-e+1);let l=-2,c=-1,d=-2,h=-1;for(let u=e;u<=t;u++){const f=u-e,p=this._computeIndentLevel(u-1);if(p>=0){l=u-1,c=p,a[f]=Math.ceil(p/s.indentSize);continue}if(l===-2){l=-1,c=-1;for(let m=u-2;m>=0;m--){const _=this._computeIndentLevel(m);if(_>=0){l=m,c=_;break}}}if(d!==-1&&(d===-2||d<u-1)){d=-1,h=-1;for(let m=u;m<n;m++){const _=this._computeIndentLevel(m);if(_>=0){d=m,h=_;break}}}a[f]=this._getIndentLevelForWhitespaceLine(r,c,h)}return a}_getIndentLevelForWhitespaceLine(e,t,n){const s=this.textModel.getOptions();return t===-1||n===-1?0:t<n?1+Math.floor(t/s.indentSize):t===n||e?Math.ceil(n/s.indentSize):1+Math.floor(n/s.indentSize)}}class $X{static{xT(this,"BracketPairGuidesClassNames")}activeClassName="indent-active";getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}var U0e=Object.defineProperty,p6=(i,e)=>U0e(i,"name",{value:e,configurable:!0});class z0e{static{p6(this,"SpacesDiffResult")}spacesDiff=0;looksLikeAlignment=!1}function GX(i,e,t,n,s){s.spacesDiff=0,s.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<n;o++){const u=i.charCodeAt(o),f=t.charCodeAt(o);if(u!==f)break}let r=0,a=0;for(let u=o;u<e;u++)i.charCodeAt(u)===A.Space?r++:a++;let l=0,c=0;for(let u=o;u<n;u++)t.charCodeAt(u)===A.Space?l++:c++;if(r>0&&a>0||l>0&&c>0)return;const d=Math.abs(a-c),h=Math.abs(r-l);if(d===0){s.spacesDiff=h,h>0&&0<=l-1&&l-1<i.length&&l<t.length&&t.charCodeAt(l)!==A.Space&&i.charCodeAt(l-1)===A.Space&&i.charCodeAt(i.length-1)===A.Comma&&(s.looksLikeAlignment=!0);return}if(h%d===0){s.spacesDiff=h/d;return}}p6(GX,"spacesDiff");function QB(i,e,t){const n=Math.min(i.getLineCount(),1e4);let s=0,o=0,r="",a=0;const l=[2,4,6,8,3,5,7],c=8,d=[0,0,0,0,0,0,0,0,0],h=new z0e;for(let p=1;p<=n;p++){const m=i.getLineLength(p),_=i.getLineContent(p),w=m<=65536;let v=!1,b=0,C=0,S=0;for(let T=0,I=m;T<I;T++){const R=w?_.charCodeAt(T):i.getLineCharCode(p,T);if(R===A.Tab)S++;else if(R===A.Space)C++;else{v=!0,b=T;break}}if(!v||(S>0?s++:C>1&&o++,GX(r,a,_,b,h),h.looksLikeAlignment&&!(t&&e===h.spacesDiff)))continue;const D=h.spacesDiff;D<=c&&d[D]++,r=_,a=b}let u=t;s!==o&&(u=s<o);let f=e;if(u){let p=u?0:.1*n;l.forEach(m=>{const _=d[m];_>p&&(p=_,f=m)}),f===4&&d[4]>0&&d[2]>0&&d[2]>=d[4]/2&&(f=2)}return{insertSpaces:u,tabSize:f}}p6(QB,"guessIndentation");var $0e=Object.defineProperty,Wi=(i,e)=>$0e(i,"name",{value:e,configurable:!0}),tw=(i=>(i.EditorHintDecoration="squiggly-hint",i.EditorInfoDecoration="squiggly-info",i.EditorWarningDecoration="squiggly-warning",i.EditorErrorDecoration="squiggly-error",i.EditorUnnecessaryDecoration="squiggly-unnecessary",i.EditorUnnecessaryInlineDecoration="squiggly-inline-unnecessary",i.EditorDeprecatedInlineDecoration="squiggly-inline-deprecated",i))(tw||{});function mr(i){return(i.metadata&1)>>>0}Wi(mr,"getNodeColor");function Ri(i,e){i.metadata=i.metadata&254|e<<0}Wi(Ri,"setNodeColor");function co(i){return(i.metadata&2)>>>1===1}Wi(co,"getNodeIsVisited");function Ni(i,e){i.metadata=i.metadata&253|(e?1:0)<<1}Wi(Ni,"setNodeIsVisited");function m6(i){return(i.metadata&4)>>>2===1}Wi(m6,"getNodeIsForValidation");function JB(i,e){i.metadata=i.metadata&251|(e?1:0)<<2}Wi(JB,"setNodeIsForValidation");function _6(i){return(i.metadata&64)>>>6===1}Wi(_6,"getNodeIsInGlyphMargin");function eF(i,e){i.metadata=i.metadata&191|(e?1:0)<<6}Wi(eF,"setNodeIsInGlyphMargin");function KX(i){return(i.metadata&24)>>>3}Wi(KX,"getNodeStickiness");function Lx(i,e){i.metadata=i.metadata&231|e<<3}Wi(Lx,"_setNodeStickiness");function jX(i){return(i.metadata&32)>>>5===1}Wi(jX,"getCollapseOnReplaceEdit");function tF(i,e){i.metadata=i.metadata&223|(e?1:0)<<5}Wi(tF,"setCollapseOnReplaceEdit");function G0e(i,e){Lx(i,e)}Wi(G0e,"setNodeStickiness");class qX{static{Wi(this,"IntervalNode")}metadata;parent;left;right;start;end;delta;maxEnd;id;ownerId;options;cachedVersionId;cachedAbsoluteStart;cachedAbsoluteEnd;range;constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,Ri(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,JB(this,!1),eF(this,!1),Lx(this,hs.NeverGrowsWhenTypingAtEdges),tF(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,Ni(this,!1)}reset(e,t,n,s){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=s}setOptions(e){this.options=e;const t=this.options.className;JB(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),eF(this,this.options.glyphMarginClassName!==null),Lx(this,this.options.stickiness),tF(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const _t=new qX(null,0,0);_t.parent=_t;_t.left=_t;_t.right=_t;Ri(_t,0);class MO{static{Wi(this,"IntervalTree")}root;requestNormalizeDelta;constructor(){this.root=_t,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,s,o,r){return this.root===_t?[]:tQ(this,e,t,n,s,o,r)}search(e,t,n,s){return this.root===_t?[]:iF(this,e,t,n,s)}collectNodesFromOwner(e){return JX(this,e)}collectNodesPostOrder(){return eQ(this)}insert(e){nF(this,e),this._normalizeDeltaIfNecessary()}delete(e){sF(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let s=0;for(;e!==this.root;)e===e.parent.right&&(s+=e.parent.delta),e=e.parent;const o=n.start+s,r=n.end+s;n.setCachedOffsets(o,r,t)}acceptReplace(e,t,n,s){const o=XX(this,e,e+t);for(let r=0,a=o.length;r<a;r++){const l=o[r];sF(this,l)}this._normalizeDeltaIfNecessary(),QX(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let r=0,a=o.length;r<a;r++){const l=o[r];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,ZX(l,e,e+t,n,s),l.maxEnd=l.end,nF(this,l)}this._normalizeDeltaIfNecessary()}getAllInOrder(){return iF(this,0,!1,0,!1)}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,YX(this))}}function YX(i){let e=i.root,t=0;for(;e!==_t;){if(e.left!==_t&&!co(e.left)){e=e.left;continue}if(e.right!==_t&&!co(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Qg(e),Ni(e,!0),Ni(e.left,!1),Ni(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Ni(i.root,!1)}Wi(YX,"normalizeDelta");function Gm(i,e,t,n){return i<t?!0:i>t||n===1?!1:n===2?!0:e}Wi(Gm,"adjustMarkerBeforeColumn");function ZX(i,e,t,n,s){const o=KX(i),r=o===hs.AlwaysGrowsWhenTypingAtEdges||o===hs.GrowsOnlyWhenTypingBefore,a=o===hs.NeverGrowsWhenTypingAtEdges||o===hs.GrowsOnlyWhenTypingBefore,l=t-e,c=n,d=Math.min(l,c),h=i.start;let u=!1;const f=i.end;let p=!1;e<=h&&f<=t&&jX(i)&&(i.start=e,u=!0,i.end=e,p=!0);{const _=s?1:l>0?2:0;!u&&Gm(h,r,e,_)&&(u=!0),!p&&Gm(f,a,e,_)&&(p=!0)}if(d>0&&!s){const _=l>c?2:0;!u&&Gm(h,r,e+d,_)&&(u=!0),!p&&Gm(f,a,e+d,_)&&(p=!0)}{const _=s?1:0;!u&&Gm(h,r,t,_)&&(i.start=e+c,u=!0),!p&&Gm(f,a,t,_)&&(i.end=e+c,p=!0)}const m=c-l;u||(i.start=Math.max(0,h+m)),p||(i.end=Math.max(0,f+m)),i.start>i.end&&(i.end=i.start)}Wi(ZX,"nodeAcceptEdit");function XX(i,e,t){let n=i.root,s=0,o=0,r=0,a=0;const l=[];let c=0;for(;n!==_t;){if(co(n)){Ni(n.left,!1),Ni(n.right,!1),n===n.parent.right&&(s-=n.parent.delta),n=n.parent;continue}if(!co(n.left)){if(o=s+n.maxEnd,o<e){Ni(n,!0);continue}if(n.left!==_t){n=n.left;continue}}if(r=s+n.start,r>t){Ni(n,!0);continue}if(a=s+n.end,a>=e&&(n.setCachedOffsets(r,a,0),l[c++]=n),Ni(n,!0),n.right!==_t&&!co(n.right)){s+=n.delta,n=n.right;continue}}return Ni(i.root,!1),l}Wi(XX,"searchForEditing");function QX(i,e,t,n){let s=i.root,o=0,r=0,a=0;const l=n-(t-e);for(;s!==_t;){if(co(s)){Ni(s.left,!1),Ni(s.right,!1),s===s.parent.right&&(o-=s.parent.delta),Qg(s),s=s.parent;continue}if(!co(s.left)){if(r=o+s.maxEnd,r<e){Ni(s,!0);continue}if(s.left!==_t){s=s.left;continue}}if(a=o+s.start,a>t){s.start+=l,s.end+=l,s.delta+=l,(s.delta<-0x40000000||s.delta>0x40000000)&&(i.requestNormalizeDelta=!0),Ni(s,!0);continue}if(Ni(s,!0),s.right!==_t&&!co(s.right)){o+=s.delta,s=s.right;continue}}Ni(i.root,!1)}Wi(QX,"noOverlapReplace");function JX(i,e){let t=i.root;const n=[];let s=0;for(;t!==_t;){if(co(t)){Ni(t.left,!1),Ni(t.right,!1),t=t.parent;continue}if(t.left!==_t&&!co(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[s++]=t),Ni(t,!0),t.right!==_t&&!co(t.right)){t=t.right;continue}}return Ni(i.root,!1),n}Wi(JX,"collectNodesFromOwner");function eQ(i){let e=i.root;const t=[];let n=0;for(;e!==_t;){if(co(e)){Ni(e.left,!1),Ni(e.right,!1),e=e.parent;continue}if(e.left!==_t&&!co(e.left)){e=e.left;continue}if(e.right!==_t&&!co(e.right)){e=e.right;continue}t[n++]=e,Ni(e,!0)}return Ni(i.root,!1),t}Wi(eQ,"collectNodesPostOrder");function iF(i,e,t,n,s){let o=i.root,r=0,a=0,l=0;const c=[];let d=0;for(;o!==_t;){if(co(o)){Ni(o.left,!1),Ni(o.right,!1),o===o.parent.right&&(r-=o.parent.delta),o=o.parent;continue}if(o.left!==_t&&!co(o.left)){o=o.left;continue}a=r+o.start,l=r+o.end,o.setCachedOffsets(a,l,n);let h=!0;if(e&&o.ownerId&&o.ownerId!==e&&(h=!1),t&&m6(o)&&(h=!1),s&&!_6(o)&&(h=!1),h&&(c[d++]=o),Ni(o,!0),o.right!==_t&&!co(o.right)){r+=o.delta,o=o.right;continue}}return Ni(i.root,!1),c}Wi(iF,"search");function tQ(i,e,t,n,s,o,r){let a=i.root,l=0,c=0,d=0,h=0;const u=[];let f=0;for(;a!==_t;){if(co(a)){Ni(a.left,!1),Ni(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!co(a.left)){if(c=l+a.maxEnd,c<e){Ni(a,!0);continue}if(a.left!==_t){a=a.left;continue}}if(d=l+a.start,d>t){Ni(a,!0);continue}if(h=l+a.end,h>=e){a.setCachedOffsets(d,h,o);let p=!0;n&&a.ownerId&&a.ownerId!==n&&(p=!1),s&&m6(a)&&(p=!1),r&&!_6(a)&&(p=!1),p&&(u[f++]=a)}if(Ni(a,!0),a.right!==_t&&!co(a.right)){l+=a.delta,a=a.right;continue}}return Ni(i.root,!1),u}Wi(tQ,"intervalSearch");function nF(i,e){if(i.root===_t)return e.parent=_t,e.left=_t,e.right=_t,Ri(e,0),i.root=e,i.root;iQ(i,e),Yu(e.parent);let t=e;for(;t!==i.root&&mr(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;mr(n)===1?(Ri(t.parent,0),Ri(n,0),Ri(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,Jw(i,t)),Ri(t.parent,0),Ri(t.parent.parent,1),eC(i,t.parent.parent))}else{const n=t.parent.parent.left;mr(n)===1?(Ri(t.parent,0),Ri(n,0),Ri(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,eC(i,t)),Ri(t.parent,0),Ri(t.parent.parent,1),Jw(i,t.parent.parent))}return Ri(i.root,0),e}Wi(nF,"rbTreeInsert");function iQ(i,e){let t=0,n=i.root;const s=e.start,o=e.end;for(;;)if(sQ(s,o,n.start+t,n.end+t)<0)if(n.left===_t){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===_t){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=_t,e.right=_t,Ri(e,1)}Wi(iQ,"treeInsert");function sF(i,e){let t,n;if(e.left===_t?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-0x40000000||t.delta>0x40000000)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===_t?(t=e.left,n=e):(n=nQ(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-0x40000000||t.delta>0x40000000)&&(i.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-0x40000000||n.delta>0x40000000)&&(i.requestNormalizeDelta=!0)),n===i.root){i.root=t,Ri(t,0),e.detach(),kT(),Qg(t),i.root.parent=_t;return}const s=mr(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,Ri(n,mr(e)),e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==_t&&(n.left.parent=n),n.right!==_t&&(n.right.parent=n)),e.detach(),s){Yu(t.parent),n!==e&&(Yu(n),Yu(n.parent)),kT();return}Yu(t),Yu(t.parent),n!==e&&(Yu(n),Yu(n.parent));let o;for(;t!==i.root&&mr(t)===0;)t===t.parent.left?(o=t.parent.right,mr(o)===1&&(Ri(o,0),Ri(t.parent,1),Jw(i,t.parent),o=t.parent.right),mr(o.left)===0&&mr(o.right)===0?(Ri(o,1),t=t.parent):(mr(o.right)===0&&(Ri(o.left,0),Ri(o,1),eC(i,o),o=t.parent.right),Ri(o,mr(t.parent)),Ri(t.parent,0),Ri(o.right,0),Jw(i,t.parent),t=i.root)):(o=t.parent.left,mr(o)===1&&(Ri(o,0),Ri(t.parent,1),eC(i,t.parent),o=t.parent.left),mr(o.left)===0&&mr(o.right)===0?(Ri(o,1),t=t.parent):(mr(o.left)===0&&(Ri(o.right,0),Ri(o,1),Jw(i,o),o=t.parent.left),Ri(o,mr(t.parent)),Ri(t.parent,0),Ri(o.left,0),eC(i,t.parent),t=i.root));Ri(t,0),kT()}Wi(sF,"rbTreeDelete");function nQ(i){for(;i.left!==_t;)i=i.left;return i}Wi(nQ,"leftest");function kT(){_t.parent=_t,_t.delta=0,_t.start=0,_t.end=0}Wi(kT,"resetSentinel");function Jw(i,e){const t=e.right;t.delta+=e.delta,(t.delta<-0x40000000||t.delta>0x40000000)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==_t&&(t.left.parent=e),t.parent=e.parent,e.parent===_t?i.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Qg(e),Qg(t)}Wi(Jw,"leftRotate");function eC(i,e){const t=e.left;e.delta-=t.delta,(e.delta<-0x40000000||e.delta>0x40000000)&&(i.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==_t&&(t.right.parent=e),t.parent=e.parent,e.parent===_t?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Qg(e),Qg(t)}Wi(eC,"rightRotate");function b6(i){let e=i.end;if(i.left!==_t){const t=i.left.maxEnd;t>e&&(e=t)}if(i.right!==_t){const t=i.right.maxEnd+i.delta;t>e&&(e=t)}return e}Wi(b6,"computeMaxEnd");function Qg(i){i.maxEnd=b6(i)}Wi(Qg,"recomputeMaxEnd");function Yu(i){for(;i!==_t;){const e=b6(i);if(i.maxEnd===e)return;i.maxEnd=e,i=i.parent}}Wi(Yu,"recomputeMaxEndWalkToRoot");function sQ(i,e,t,n){return i===t?e-n:i-t}Wi(sQ,"intervalCompare");var K0e=Object.defineProperty,Xc=(i,e)=>K0e(i,"name",{value:e,configurable:!0});class oF{static{Xc(this,"TreeNode")}parent;left;right;color;piece;size_left;lf_left;constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==et)return CP(this.right);let e=this;for(;e.parent!==et&&e.parent.left!==e;)e=e.parent;return e.parent===et?et:e.parent}prev(){if(this.left!==et)return v6(this.left);let e=this;for(;e.parent!==et&&e.parent.right!==e;)e=e.parent;return e.parent===et?et:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}var b1=(i=>(i[i.Black=0]="Black",i[i.Red=1]="Red",i))(b1||{});const et=new oF(null,0);et.parent=et;et.left=et;et.right=et;et.color=0;function CP(i){for(;i.left!==et;)i=i.left;return i}Xc(CP,"leftest");function v6(i){for(;i.right!==et;)i=i.right;return i}Xc(v6,"righttest");function yP(i){return i===et?0:i.size_left+i.piece.length+yP(i.right)}Xc(yP,"calculateSize");function SP(i){return i===et?0:i.lf_left+i.piece.lineFeedCnt+SP(i.right)}Xc(SP,"calculateLF");function NT(){et.parent=et}Xc(NT,"resetSentinel");function tC(i,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==et&&(t.left.parent=e),t.parent=e.parent,e.parent===et?i.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}Xc(tC,"leftRotate");function iC(i,e){const t=e.left;e.left=t.right,t.right!==et&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===et?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}Xc(iC,"rightRotate");function v1(i,e){let t,n;if(e.left===et?(n=e,t=n.right):e.right===et?(n=e,t=n.left):(n=CP(e.right),t=n.right),n===i.root){i.root=t,t.color=0,e.detach(),NT(),i.root.parent=et;return}const s=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,vw(i,t)):(n.parent===e?t.parent=n:t.parent=n.parent,vw(i,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==et&&(n.left.parent=n),n.right!==et&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,vw(i,n)),e.detach(),t.parent.left===t){const r=yP(t),a=SP(t);if(r!==t.parent.size_left||a!==t.parent.lf_left){const l=r-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=r,t.parent.lf_left=a,Ph(i,t.parent,l,c)}}if(vw(i,t.parent),s){NT();return}let o;for(;t!==i.root&&t.color===0;)t===t.parent.left?(o=t.parent.right,o.color===1&&(o.color=0,t.parent.color=1,tC(i,t.parent),o=t.parent.right),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.right.color===0&&(o.left.color=0,o.color=1,iC(i,o),o=t.parent.right),o.color=t.parent.color,t.parent.color=0,o.right.color=0,tC(i,t.parent),t=i.root)):(o=t.parent.left,o.color===1&&(o.color=0,t.parent.color=1,iC(i,t.parent),o=t.parent.left),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.left.color===0&&(o.right.color=0,o.color=1,tC(i,o),o=t.parent.left),o.color=t.parent.color,t.parent.color=0,o.left.color=0,iC(i,t.parent),t=i.root));t.color=0,NT()}Xc(v1,"rbDelete");function rF(i,e){for(vw(i,e);e!==i.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,tC(i,e)),e.parent.color=0,e.parent.parent.color=1,iC(i,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,iC(i,e)),e.parent.color=0,e.parent.parent.color=1,tC(i,e.parent.parent))}i.root.color=0}Xc(rF,"fixInsert");function Ph(i,e,t,n){for(;e!==i.root&&e!==et;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}Xc(Ph,"updateTreeMetadata");function vw(i,e){let t=0,n=0;if(e!==i.root){for(;e!==i.root&&e===e.parent.right;)e=e.parent;if(e!==i.root)for(e=e.parent,t=yP(e.left)-e.size_left,n=SP(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==i.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}Xc(vw,"recomputeTreeMetadata");var j0e=Object.defineProperty,ff=(i,e)=>j0e(i,"name",{value:e,configurable:!0});const q0e=999;class Uv{static{ff(this,"SearchParams")}searchString;isRegex;matchCase;wordSeparators;constructor(e,t,n,s){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=s}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=oQ(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=c5(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new e1e(t,this.wordSeparators?Fb(this.wordSeparators,[]):null,n?this.searchString:null)}}function oQ(i){if(!i||i.length===0)return!1;for(let e=0,t=i.length;e<t;e++){const n=i.charCodeAt(e);if(n===A.LineFeed)return!0;if(n===A.Backslash){if(e++,e>=t)break;const s=i.charCodeAt(e);if(s===A.n||s===A.r||s===A.W)return!0}}return!1}ff(oQ,"isMultilineRegexSource");function Jf(i,e,t){if(!t)return new wx(i,null);const n=[];for(let s=0,o=e.length;s<o;s++)n[s]=e[s];return new wx(i,n)}ff(Jf,"createFindMatch");class j8{static{ff(this,"LineFeedCounter")}_lineFeedsOffsets;constructor(e){const t=[];let n=0;for(let s=0,o=e.length;s<o;s++)e.charCodeAt(s)===A.LineFeed&&(t[n++]=s);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,s=t.length-1;if(s===-1||e<=t[0])return 0;for(;n<s;){const o=n+((s-n)/2>>0);t[o]>=e?s=o-1:t[o+1]>=e?(n=o,s=o):n=o+1}return n+1}}class mI{static{ff(this,"TextModelSearch")}static findMatches(e,t,n,s,o){const r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,n,new ww(r.wordSeparators,r.regex),s,o):this._doFindMatchesLineByLine(e,n,r,s,o):[]}static _getMultilineMatchRange(e,t,n,s,o,r){let a,l=0;s?(l=s.findLineFeedCountBeforeOffset(o),a=t+o+l):a=t+o;let c;if(s){const f=s.findLineFeedCountBeforeOffset(o+r.length)-l;c=a+r.length+f}else c=a+r.length;const d=e.getPositionAt(a),h=e.getPositionAt(c);return new V(d.lineNumber,d.column,h.lineNumber,h.column)}static _doFindMatchesMultiline(e,t,n,s,o){const r=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,cn.LF),l=e.getEOL()===`\r
`?new j8(a):null,c=[];let d=0,h;for(n.reset(0);h=n.next(a);)if(c[d++]=Jf(this._getMultilineMatchRange(e,r,a,l,h.index,h[0]),h,s),d>=o)return c;return c}static _doFindMatchesLineByLine(e,t,n,s,o){const r=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,c,t.startLineNumber,t.startColumn-1,a,r,s,o),r}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,r,s,o);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<o;c++)a=this._findMatchesInLine(n,e.getLineContent(c),c,0,a,r,s,o);if(a<o){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,c,t.endLineNumber,0,a,r,s,o)}return r}static _findMatchesInLine(e,t,n,s,o,r,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const u=e.simpleSearch,f=u.length,p=t.length;let m=-f;for(;(m=t.indexOf(u,m+f))!==-1;)if((!c||EP(c,t,p,m,f))&&(r[o++]=new wx(new V(n,m+1+s,n,m+1+f+s),null),o>=l))return o;return o}const d=new ww(e.wordSeparators,e.regex);let h;d.reset(0);do if(h=d.next(t),h&&(r[o++]=Jf(new V(n,h.index+1+s,n,h.index+1+h[0].length+s),h,a),o>=l))return o;while(h);return o}static findNextMatch(e,t,n,s){const o=t.parseSearchRequest();if(!o)return null;const r=new ww(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindNextMatchMultiline(e,n,r,s):this._doFindNextMatchLineByLine(e,n,r,s)}static _doFindNextMatchMultiline(e,t,n,s){const o=new j(t.lineNumber,1),r=e.getOffsetAt(o),a=e.getLineCount(),l=e.getValueInRange(new V(o.lineNumber,o.column,a,e.getLineMaxColumn(a)),cn.LF),c=e.getEOL()===`\r
`?new j8(l):null;n.reset(t.column-1);const d=n.next(l);return d?Jf(this._getMultilineMatchRange(e,r,l,c,d.index,d[0]),d,s):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new j(1,1),n,s):null}static _doFindNextMatchLineByLine(e,t,n,s){const o=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r),l=this._findFirstMatchInLine(n,a,r,t.column,s);if(l)return l;for(let c=1;c<=o;c++){const d=(r+c-1)%o,h=e.getLineContent(d+1),u=this._findFirstMatchInLine(n,h,d+1,1,s);if(u)return u}return null}static _findFirstMatchInLine(e,t,n,s,o){e.reset(s-1);const r=e.next(t);return r?Jf(new V(n,r.index+1,n,r.index+1+r[0].length),r,o):null}static findPreviousMatch(e,t,n,s){const o=t.parseSearchRequest();if(!o)return null;const r=new ww(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindPreviousMatchMultiline(e,n,r,s):this._doFindPreviousMatchLineByLine(e,n,r,s)}static _doFindPreviousMatchMultiline(e,t,n,s){const o=this._doFindMatchesMultiline(e,new V(1,1,t.lineNumber,t.column),n,s,10*q0e);if(o.length>0)return o[o.length-1];const r=e.getLineCount();return t.lineNumber!==r||t.column!==e.getLineMaxColumn(r)?this._doFindPreviousMatchMultiline(e,new j(r,e.getLineMaxColumn(r)),n,s):null}static _doFindPreviousMatchLineByLine(e,t,n,s){const o=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,r,s);if(l)return l;for(let c=1;c<=o;c++){const d=(o+r-c-1)%o,h=e.getLineContent(d+1),u=this._findLastMatchInLine(n,h,d+1,s);if(u)return u}return null}static _findLastMatchInLine(e,t,n,s){let o=null,r;for(e.reset(0);r=e.next(t);)o=Jf(new V(n,r.index+1,n,r.index+1+r[0].length),r,s);return o}}function rQ(i,e,t,n,s){if(n===0)return!0;const o=e.charCodeAt(n-1);if(i.get(o)!==ts.Regular||o===A.CarriageReturn||o===A.LineFeed)return!0;if(s>0){const r=e.charCodeAt(n);if(i.get(r)!==ts.Regular)return!0}return!1}ff(rQ,"leftIsWordBounday");function aQ(i,e,t,n,s){if(n+s===t)return!0;const o=e.charCodeAt(n+s);if(i.get(o)!==ts.Regular||o===A.CarriageReturn||o===A.LineFeed)return!0;if(s>0){const r=e.charCodeAt(n+s-1);if(i.get(r)!==ts.Regular)return!0}return!1}ff(aQ,"rightIsWordBounday");function EP(i,e,t,n,s){return rQ(i,e,t,n,s)&&aQ(i,e,t,n,s)}ff(EP,"isValidMatch");class ww{static{ff(this,"Searcher")}_wordSeparators;_searchRegex;_prevMatchStartIndex;_prevMatchLength;constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const s=n.index,o=n[0].length;if(s===this._prevMatchStartIndex&&o===this._prevMatchLength){if(o===0){j0(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=s,this._prevMatchLength=o,!this._wordSeparators||EP(this._wordSeparators,e,t,s,o))return n}while(n);return null}}var Y0e=Object.defineProperty,jd=(i,e)=>Y0e(i,"name",{value:e,configurable:!0});const Au=65535;function w6(i){let e;return i[i.length-1]<65536?e=new Uint16Array(i.length):e=new Uint32Array(i.length),e.set(i,0),e}jd(w6,"createUintArray");class Z0e{constructor(e,t,n,s,o){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=s,this.isBasicASCII=o}static{jd(this,"LineStarts")}}function Bh(i,e=!0){const t=[0];let n=1;for(let s=0,o=i.length;s<o;s++){const r=i.charCodeAt(s);r===A.CarriageReturn?s+1<o&&i.charCodeAt(s+1)===A.LineFeed?(t[n++]=s+2,s++):t[n++]=s+1:r===A.LineFeed&&(t[n++]=s+1)}return e?w6(t):t}jd(Bh,"createLineStartsFast");function lQ(i,e){i.length=0,i[0]=0;let t=1,n=0,s=0,o=0,r=!0;for(let l=0,c=e.length;l<c;l++){const d=e.charCodeAt(l);d===A.CarriageReturn?l+1<c&&e.charCodeAt(l+1)===A.LineFeed?(o++,i[t++]=l+2,l++):(n++,i[t++]=l+1):d===A.LineFeed?(s++,i[t++]=l+1):r&&d!==A.Tab&&(d<32||d>126)&&(r=!1)}const a=new Z0e(w6(i),n,s,o,r);return i.length=0,a}jd(lQ,"createLineStarts");class ga{static{jd(this,"Piece")}bufferIndex;start;end;length;lineFeedCnt;constructor(e,t,n,s,o){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=s,this.length=o}}class d_{static{jd(this,"StringBuffer")}buffer;lineStarts;constructor(e,t){this.buffer=e,this.lineStarts=t}}class X0e{static{jd(this,"PieceTreeSnapshot")}_pieces;_index;_tree;_BOM;constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==et&&e.iterate(e.root,n=>(n!==et&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class Q0e{static{jd(this,"PieceTreeSearchCache")}_limit;_cache;constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const n=this._cache;for(let s=0;s<n.length;s++){const o=n[s];if(o.node.parent===null||o.nodeStartOffset>=e){n[s]=null,t=!0;continue}}if(t){const s=[];for(const o of n)o!==null&&s.push(o);this._cache=s}}}class J0e{static{jd(this,"PieceTreeBase")}root;_buffers;_lineCnt;_length;_EOL;_EOLLength;_EOLNormalized;_lastChangeBufferPos;_searchCache;_lastVisitedLine;constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new d_("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=et,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let s=null;for(let o=0,r=e.length;o<r;o++)if(e[o].buffer.length>0){e[o].lineStarts||(e[o].lineStarts=Bh(e[o].buffer));const a=new ga(o+1,{line:0,column:0},{line:e[o].lineStarts.length-1,column:e[o].buffer.length-e[o].lineStarts[e[o].lineStarts.length-1]},e[o].lineStarts.length-1,e[o].buffer.length);this._buffers.push(e[o]),s=this.rbInsertRight(s,a)}this._searchCache=new Q0e(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=Au,n=t-Math.floor(t/3),s=n*2;let o="",r=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),d=c.length;if(r<=n||r+d<s)return o+=c,r+=d,!0;const h=o.replace(/\r\n|\r|\n/g,e);return a.push(new d_(h,Bh(h))),o=c,r=d,!0}),r>0){const l=o.replace(/\r\n|\r|\n/g,e);a.push(new d_(l,Bh(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new X0e(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,s=>{if(s===et)return!0;const o=this.getNodeContent(s),r=o.length,a=e.nodeAt(t),l=e.nodeAt(t+r),c=e.getValueInRange2(a,l);return t+=r,o===c})}getOffsetAt(e,t){let n=0,s=this.root;for(;s!==et;)if(s.left!==et&&s.lf_left+1>=e)s=s.left;else if(s.lf_left+s.piece.lineFeedCnt+1>=e){n+=s.size_left;const o=this.getAccumulatedValue(s,e-s.lf_left-2);return n+=o+t-1}else e-=s.lf_left+s.piece.lineFeedCnt,n+=s.size_left+s.piece.length,s=s.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0;const s=e;for(;t!==et;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const o=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+o.index,o.index===0){const r=this.getOffsetAt(n+1,1),a=s-r;return new j(n+1,a+1)}return new j(n+1,o.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===et){const o=this.getOffsetAt(n+1,1),r=s-e-o;return new j(n+1,r+1)}else t=t.right;return new j(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const n=this.nodeAt2(e.startLineNumber,e.startColumn),s=this.nodeAt2(e.endLineNumber,e.endColumn),o=this.getValueInRange2(n,s);return t?t!==this._EOL||!this._EOLNormalized?o.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?o:o.replace(/\r\n|\r|\n/g,t):o}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let n=e.node;const s=this._buffers[n.piece.bufferIndex].buffer,o=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);let r=s.substring(o+e.remainder,o+n.piece.length);for(n=n.next();n!==et;){const a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){r+=a.substring(l,l+t.remainder);break}else r+=a.substr(l,n.piece.length);n=n.next()}return r}getLinesContent(){const e=[];let t=0,n="",s=!1;return this.iterate(this.root,o=>{if(o===et)return!0;const r=o.piece;let a=r.length;if(a===0)return!0;const l=this._buffers[r.bufferIndex].buffer,c=this._buffers[r.bufferIndex].lineStarts,d=r.start.line,h=r.end.line;let u=c[d]+r.start.column;if(s&&(l.charCodeAt(u)===A.LineFeed&&(u++,a--),e[t++]=n,n="",s=!1,a===0))return!0;if(d===h)return!this._EOLNormalized&&l.charCodeAt(u+a-1)===A.CarriageReturn?(s=!0,n+=l.substr(u,a-1)):n+=l.substr(u,a),!0;n+=this._EOLNormalized?l.substring(u,Math.max(u,c[d+1]-this._EOLLength)):l.substring(u,c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let f=d+1;f<h;f++)n=this._EOLNormalized?l.substring(c[f],c[f+1]-this._EOLLength):l.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(c[h]+r.end.column-1)===A.CarriageReturn?(s=!0,r.end.column===0?t--:n=l.substr(c[h],r.end.column-1)):n=l.substr(c[h],r.end.column),!0}),s&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const n=this._buffers[t.piece.bufferIndex],s=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(s)}else{const t=this._buffers[e.node.piece.bufferIndex],s=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(s)}}getLineCharCode(e,t){const n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}getCharCode(e){const t=this.nodeAt(e);return this._getCharCode(t)}getNearestChunk(e){const t=this.nodeAt(e);if(t.remainder===t.node.piece.length){const n=t.node.next();if(!n||n===et)return"";const s=this._buffers[n.piece.bufferIndex],o=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s.buffer.substring(o,o+n.piece.length)}else{const n=this._buffers[t.node.piece.bufferIndex],s=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start),o=s+t.remainder,r=s+t.node.piece.length;return n.buffer.substring(o,r)}}findMatchesInNode(e,t,n,s,o,r,a,l,c,d,h){const u=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),p=this.offsetInBuffer(e.piece.bufferIndex,o),m=this.offsetInBuffer(e.piece.bufferIndex,r);let _;const w={line:0,column:0};let v,b;t._wordSeparators?(v=u.buffer.substring(p,m),b=jd(C=>C+p,"offsetInBuffer"),t.reset(0)):(v=u.buffer,b=jd(C=>C,"offsetInBuffer"),t.reset(p));do if(_=t.next(v),_){if(b(_.index)>=m)return d;this.positionInBuffer(e,b(_.index)-f,w);const C=this.getLineFeedCnt(e.piece.bufferIndex,o,w),S=w.line===o.line?w.column-o.column+s:w.column+1,D=S+_[0].length;if(h[d++]=Jf(new V(n+C,S,n+C,D),_,l),b(_.index)+_[0].length>=m||d>=c)return d}while(_);return d}findMatchesLineByLine(e,t,n,s){const o=[];let r=0;const a=new ww(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let d=this.positionInBuffer(l.node,l.remainder);const h=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,d,h,t,n,s,r,o),o;let u=e.startLineNumber,f=l.node;for(;f!==c.node;){const m=this.getLineFeedCnt(f.piece.bufferIndex,d,f.piece.end);if(m>=1){const w=this._buffers[f.piece.bufferIndex].lineStarts,v=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),b=w[d.line+m],C=u===e.startLineNumber?e.startColumn:1;if(r=this.findMatchesInNode(f,a,u,C,d,this.positionInBuffer(f,b-v),t,n,s,r,o),r>=s)return o;u+=m}const _=u===e.startLineNumber?e.startColumn-1:0;if(u===e.endLineNumber){const w=this.getLineContent(u).substring(_,e.endColumn-1);return r=this._findMatchesInLine(t,a,w,e.endLineNumber,_,r,o,n,s),o}if(r=this._findMatchesInLine(t,a,this.getLineContent(u).substr(_),u,_,r,o,n,s),r>=s)return o;u++,l=this.nodeAt2(u,1),f=l.node,d=this.positionInBuffer(l.node,l.remainder)}if(u===e.endLineNumber){const m=u===e.startLineNumber?e.startColumn-1:0,_=this.getLineContent(u).substring(m,e.endColumn-1);return r=this._findMatchesInLine(t,a,_,e.endLineNumber,m,r,o,n,s),o}const p=u===e.startLineNumber?e.startColumn:1;return r=this.findMatchesInNode(c.node,a,u,p,d,h,t,n,s,r,o),o}_findMatchesInLine(e,t,n,s,o,r,a,l,c){const d=e.wordSeparators;if(!l&&e.simpleSearch){const u=e.simpleSearch,f=u.length,p=n.length;let m=-f;for(;(m=n.indexOf(u,m+f))!==-1;)if((!d||EP(d,n,p,m,f))&&(a[r++]=new wx(new V(s,m+1+o,s,m+1+f+o),null),r>=c))return r;return r}let h;t.reset(0);do if(h=t.next(n),h&&(a[r++]=Jf(new V(s,h.index+1+o,s,h.index+1+h[0].length+o),h,l),r>=c))return r;while(h);return r}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==et){const{node:s,remainder:o,nodeStartOffset:r}=this.nodeAt(e),a=s.piece,l=a.bufferIndex,c=this.positionInBuffer(s,o);if(s.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&r+a.length===e&&t.length<Au){this.appendToNode(s,t),this.computeBufferMetadata();return}if(r===e)this.insertContentToNodeLeft(t,s),this._searchCache.validate(e);else if(r+s.piece.length>e){const d=[];let h=new ga(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(s,o)===10){const m={line:h.start.line+1,column:0};h=new ga(h.bufferIndex,m,h.end,this.getLineFeedCnt(h.bufferIndex,m,h.end),h.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(s,o-1)===13){const m=this.positionInBuffer(s,o-1);this.deleteNodeTail(s,m),t="\r"+t,s.piece.length===0&&d.push(s)}else this.deleteNodeTail(s,c);else this.deleteNodeTail(s,c);const u=this.createNewPieces(t);h.length>0&&this.rbInsertRight(s,h);let f=s;for(let p=0;p<u.length;p++)f=this.rbInsertRight(f,u[p]);this.deleteNodes(d)}else this.insertContentToNodeRight(t,s)}else{const s=this.createNewPieces(t);let o=this.rbInsertLeft(null,s[0]);for(let r=1;r<s.length;r++)o=this.rbInsertRight(o,s[r])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===et)return;const n=this.nodeAt(e),s=this.nodeAt(e+t),o=n.node,r=s.node;if(o===r){const u=this.positionInBuffer(o,n.remainder),f=this.positionInBuffer(o,s.remainder);if(n.nodeStartOffset===e){if(t===o.piece.length){const p=o.next();v1(this,o),this.validateCRLFWithPrevNode(p),this.computeBufferMetadata();return}this.deleteNodeHead(o,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(o),this.computeBufferMetadata();return}if(n.nodeStartOffset+o.piece.length===e+t){this.deleteNodeTail(o,u),this.validateCRLFWithNextNode(o),this.computeBufferMetadata();return}this.shrinkNode(o,u,f),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(o,n.remainder);this.deleteNodeTail(o,l),this._searchCache.validate(e),o.piece.length===0&&a.push(o);const c=this.positionInBuffer(r,s.remainder);this.deleteNodeHead(r,c),r.piece.length===0&&a.push(r);const d=o.next();for(let u=d;u!==et&&u!==r;u=u.next())a.push(u);const h=o.piece.length===0?o.prev():o;this.deleteNodes(a),this.validateCRLFWithNextNode(h),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const r=t.piece,a={line:r.start.line+1,column:0},l=new ga(r.bufferIndex,a,r.end,this.getLineFeedCnt(r.bufferIndex,a,r.end),r.length-1);t.piece=l,e+=`
`,Ph(this,t,-1,-1),t.piece.length===0&&n.push(t)}const s=this.createNewPieces(e);let o=this.rbInsertLeft(t,s[s.length-1]);for(let r=s.length-2;r>=0;r--)o=this.rbInsertLeft(o,s[r]);this.validateCRLFWithPrevNode(o),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const n=this.createNewPieces(e),s=this.rbInsertRight(t,n[0]);let o=s;for(let r=1;r<n.length;r++)o=this.rbInsertRight(o,n[r]);this.validateCRLFWithPrevNode(s)}positionInBuffer(e,t,n){const s=e.piece,o=e.piece.bufferIndex,r=this._buffers[o].lineStarts,l=r[s.start.line]+s.start.column+t;let c=s.start.line,d=s.end.line,h=0,u=0,f=0;for(;c<=d&&(h=c+(d-c)/2|0,f=r[h],h!==d);)if(u=r[h+1],l<f)d=h-1;else if(l>=u)c=h+1;else break;return n?(n.line=h,n.column=l-f,null):{line:h,column:l-f}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;const s=this._buffers[e].lineStarts;if(n.line===s.length-1)return n.line-t.line;const o=s[n.line+1],r=s[n.line]+n.column;if(o>r+1)return n.line-t.line;const a=r-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)v1(this,e[t])}createNewPieces(e){if(e.length>Au){const d=[];for(;e.length>Au;){const u=e.charCodeAt(Au-1);let f;u===A.CarriageReturn||u>=55296&&u<=56319?(f=e.substring(0,Au-1),e=e.substring(Au-1)):(f=e.substring(0,Au),e=e.substring(Au));const p=Bh(f);d.push(new ga(this._buffers.length,{line:0,column:0},{line:p.length-1,column:f.length-p[p.length-1]},p.length-1,f.length)),this._buffers.push(new d_(f,p))}const h=Bh(e);return d.push(new ga(this._buffers.length,{line:0,column:0},{line:h.length-1,column:e.length-h[h.length-1]},h.length-1,e.length)),this._buffers.push(new d_(e,h)),d}let t=this._buffers[0].buffer.length;const n=Bh(e,!1);let s=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},s=this._lastChangeBufferPos;for(let d=0;d<n.length;d++)n[d]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let d=0;d<n.length;d++)n[d]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const o=this._buffers[0].buffer.length,r=this._buffers[0].lineStarts.length-1,a=o-this._buffers[0].lineStarts[r],l={line:r,column:a},c=new ga(0,s,l,this.getLineFeedCnt(0,s,l),o-t);return this._lastChangeBufferPos=l,[c]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(e,t=0){let n=this.root,s="";const o=this._searchCache.get2(e);if(o){n=o.node;const r=this.getAccumulatedValue(n,e-o.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(o.nodeStartLineNumber+n.piece.lineFeedCnt===e)s=a.substring(l+r,l+n.piece.length);else{const c=this.getAccumulatedValue(n,e-o.nodeStartLineNumber);return a.substring(l+r,l+c-t)}}else{let r=0;const a=e;for(;n!==et;)if(n.left!==et&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this.getAccumulatedValue(n,e-n.lf_left-1),d=this._buffers[n.piece.bufferIndex].buffer,h=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:r,nodeStartLineNumber:a-(e-1-n.lf_left)}),d.substring(h+l,h+c-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this._buffers[n.piece.bufferIndex].buffer,d=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);s=c.substring(d+l,d+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,r+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==et;){const r=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=r.substring(l,l+a-t),s}else{const a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);s+=r.substr(a,n.piece.length)}n=n.next()}return s}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==et;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){const n=e.piece,s=this.positionInBuffer(e,t),o=s.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){const r=this.getLineFeedCnt(e.piece.bufferIndex,n.start,s);if(r!==o)return{index:r,remainder:0}}return{index:o,remainder:s.column}}getAccumulatedValue(e,t){if(t<0)return 0;const n=e.piece,s=this._buffers[n.bufferIndex].lineStarts,o=n.start.line+t+1;return o>n.end.line?s[n.end.line]+n.end.column-s[n.start.line]-n.start.column:s[o]-s[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,s=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.end),r=t,a=this.offsetInBuffer(n.bufferIndex,r),l=this.getLineFeedCnt(n.bufferIndex,n.start,r),c=l-s,d=a-o,h=n.length+d;e.piece=new ga(n.bufferIndex,n.start,r,l,h),Ph(this,e,d,c)}deleteNodeHead(e,t){const n=e.piece,s=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.start),r=t,a=this.getLineFeedCnt(n.bufferIndex,r,n.end),l=this.offsetInBuffer(n.bufferIndex,r),c=a-s,d=o-l,h=n.length+d;e.piece=new ga(n.bufferIndex,r,n.end,a,h),Ph(this,e,d,c)}shrinkNode(e,t,n){const s=e.piece,o=s.start,r=s.end,a=s.length,l=s.lineFeedCnt,c=t,d=this.getLineFeedCnt(s.bufferIndex,s.start,c),h=this.offsetInBuffer(s.bufferIndex,t)-this.offsetInBuffer(s.bufferIndex,o);e.piece=new ga(s.bufferIndex,s.start,c,d,h),Ph(this,e,h-a,d-l);const u=new ga(s.bufferIndex,n,r,this.getLineFeedCnt(s.bufferIndex,n,r),this.offsetInBuffer(s.bufferIndex,r)-this.offsetInBuffer(s.bufferIndex,n)),f=this.rbInsertRight(e,u);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),s=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const o=Bh(t,!1);for(let f=0;f<o.length;f++)o[f]+=s;if(n){const f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:s-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1));const r=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[r],l={line:r,column:a},c=e.piece.length+t.length,d=e.piece.lineFeedCnt,h=this.getLineFeedCnt(0,e.piece.start,l),u=h-d;e.piece=new ga(e.piece.bufferIndex,e.piece.start,l,h,c),this._lastChangeBufferPos=l,Ph(this,e,t.length,u)}nodeAt(e){let t=this.root;const n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let s=0;for(;t!==et;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){s+=t.size_left;const o={node:t,remainder:e-t.size_left,nodeStartOffset:s};return this._searchCache.set(o),o}else e-=t.size_left+t.piece.length,s+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,s=0;for(;n!==et;)if(n.left!==et&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const o=this.getAccumulatedValue(n,e-n.lf_left-2),r=this.getAccumulatedValue(n,e-n.lf_left-1);return s+=n.size_left,{node:n,remainder:Math.min(o+t-1,r),nodeStartOffset:s}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const o=this.getAccumulatedValue(n,e-n.lf_left-2);if(o+t-1<=n.piece.length)return{node:n,remainder:o+t-1,nodeStartOffset:s};t-=n.piece.length-o;break}else e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==et;){if(n.piece.lineFeedCnt>0){const o=this.getAccumulatedValue(n,0),r=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,o),nodeStartOffset:r}}else if(n.piece.length>=t-1){const o=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:o}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const n=this._buffers[e.piece.bufferIndex],s=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(s)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===et||e.piece.lineFeedCnt===0)return!1;const t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,s=t.start.line,o=n[s]+t.start.column;return s===n.length-1||n[s+1]>o+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(o)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===et||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const n=[],s=this._buffers[e.piece.bufferIndex].lineStarts;let o;e.piece.end.column===0?o={line:e.piece.end.line-1,column:s[e.piece.end.line]-s[e.piece.end.line-1]-1}:o={line:e.piece.end.line,column:e.piece.end.column-1};const r=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new ga(e.piece.bufferIndex,e.piece.start,o,a,r),Ph(this,e,-1,-1),e.piece.length===0&&n.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,d=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new ga(t.piece.bufferIndex,l,t.piece.end,d,c),Ph(this,t,-1,-1),t.piece.length===0&&n.push(t);const h=this.createNewPieces(`\r
`);this.rbInsertRight(e,h[0]);for(let u=0;u<n.length;u++)v1(this,n[u])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)v1(this,n);else{const s=n.piece,o={line:s.start.line+1,column:0},r=s.length-1,a=this.getLineFeedCnt(s.bufferIndex,o,s.end);n.piece=new ga(s.bufferIndex,o,s.end,a,r),Ph(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===et)return t(et);const n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===et)return"";const t=this._buffers[e.piece.bufferIndex],n=e.piece,s=this.offsetInBuffer(n.bufferIndex,n.start),o=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(s,o)}getPieceContent(e){const t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),s=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,s)}rbInsertRight(e,t){const n=new oF(t,b1.Red);if(n.left=et,n.right=et,n.parent=et,n.size_left=0,n.lf_left=0,this.root===et)this.root=n,n.color=b1.Black;else if(e.right===et)e.right=n,n.parent=e;else{const o=CP(e.right);o.left=n,n.parent=o}return rF(this,n),n}rbInsertLeft(e,t){const n=new oF(t,b1.Red);if(n.left=et,n.right=et,n.parent=et,n.size_left=0,n.lf_left=0,this.root===et)this.root=n,n.color=b1.Black;else if(e.left===et)e.left=n,n.parent=e;else{const s=v6(e.left);s.right=n,n.parent=s}return rF(this,n),n}getContentOfSubTree(e){let t="";return this.iterate(e,n=>(t+=this.getNodeContent(n),!0)),t}}var eEe=Object.defineProperty,tEe=(i,e)=>eEe(i,"name",{value:e,configurable:!0});class A_ extends ${static{tEe(this,"PieceTreeTextBuffer")}_pieceTree;_BOM;_mightContainRTL;_mightContainUnusualLineTerminators;_mightContainNonBasicASCII;_onDidChangeContent=this._register(new x);onDidChangeContent=this._onDidChangeContent.event;constructor(e,t,n,s,o,r,a){super(),this._BOM=t,this._mightContainNonBasicASCII=!r,this._mightContainRTL=s,this._mightContainUnusualLineTerminators=o,this._pieceTree=new J0e(e,n,a)}equals(e){return!(e instanceof A_)||this._BOM!==e._BOM||this.getEOL()!==e.getEOL()?!1:this._pieceTree.equal(e._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const n=e+t,s=this.getPositionAt(e),o=this.getPositionAt(n);return new V(s.lineNumber,s.column,o.lineNumber,o.column)}getValueInRange(e,t=cn.TextDefined){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=cn.TextDefined){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const n=this.getOffsetAt(e.startLineNumber,e.startColumn),s=this.getOffsetAt(e.endLineNumber,e.endColumn);let o=0;const r=this._getEndOfLine(t),a=this.getEOL();if(r.length!==a.length){const l=r.length-a.length,c=e.endLineNumber-e.startLineNumber;o=l*c}return s-n+o}getCharacterCountInRange(e,t=cn.TextDefined){if(this._mightContainNonBasicASCII){let n=0;const s=e.startLineNumber,o=e.endLineNumber;for(let r=s;r<=o;r++){const a=this.getLineContent(r),l=r===s?e.startColumn-1:0,c=r===o?e.endColumn-1:a.length;for(let d=l;d<c;d++)Ds(a.charCodeAt(d))?(n=n+1,d=d+1):n=n+1}return n+=this._getEndOfLine(t).length*(o-s),n}return this.getValueLengthInRange(e,t)}getNearestChunk(e){return this._pieceTree.getNearestChunk(e)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getCharCode(e){return this._pieceTree.getCharCode(e)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineMinColumn(e){return 1}getLineMaxColumn(e){return this.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){const t=ia(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=nm(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case cn.LF:return`
`;case cn.CRLF:return`\r
`;case cn.TextDefined:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let s=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,r=this._mightContainNonBasicASCII,a=!0,l=[];for(let m=0;m<e.length;m++){const _=e[m];a&&_._isTracked&&(a=!1);const w=_.range;if(_.text){let D=!0;r||(D=!VN(_.text),r=D),!s&&D&&(s=VC(_.text)),!o&&D&&(o=u5(_.text))}let v="",b=0,C=0,S=0;if(_.text){let D;[b,C,S,D]=Kd(_.text);const T=this.getEOL(),I=T===`\r
`?wT.CRLF:wT.LF;D===wT.Unknown||D===I?v=_.text:v=_.text.replace(/\r\n|\r|\n/g,T)}l[m]={sortIndex:m,identifier:_.identifier||null,range:w,rangeOffset:this.getOffsetAt(w.startLineNumber,w.startColumn),rangeLength:this.getValueLengthInRange(w),text:v,eolCount:b,firstLineLength:C,lastLineLength:S,forceMoveMarkers:!!_.forceMoveMarkers,isAutoWhitespaceEdit:_.isAutoWhitespaceEdit||!1}}l.sort(A_._sortOpsAscending);let c=!1;for(let m=0,_=l.length-1;m<_;m++){const w=l[m].range.getEndPosition(),v=l[m+1].range.getStartPosition();if(v.isBeforeOrEqual(w)){if(v.isBefore(w))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const d=n||t?A_._getInverseEditRanges(l):[],h=[];if(t)for(let m=0;m<l.length;m++){const _=l[m],w=d[m];if(_.isAutoWhitespaceEdit&&_.range.isEmpty())for(let v=w.startLineNumber;v<=w.endLineNumber;v++){let b="";v===w.startLineNumber&&(b=this.getLineContent(_.range.startLineNumber),ia(b)!==-1)||h.push({lineNumber:v,oldContent:b})}}let u=null;if(n){let m=0;u=[];for(let _=0;_<l.length;_++){const w=l[_],v=d[_],b=this.getValueInRange(w.range),C=w.rangeOffset+m;m+=w.text.length-b.length,u[_]={sortIndex:w.sortIndex,identifier:w.identifier,range:v,text:b,textChange:new yo(w.rangeOffset,b,C,w.text)}}c||u.sort((_,w)=>_.sortIndex-w.sortIndex)}this._mightContainRTL=s,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=r;const f=this._doApplyEdits(l);let p=null;if(t&&h.length>0){h.sort((m,_)=>_.lineNumber-m.lineNumber),p=[];for(let m=0,_=h.length;m<_;m++){const w=h[m].lineNumber;if(m>0&&h[m-1].lineNumber===w)continue;const v=h[m].oldContent,b=this.getLineContent(w);b.length===0||b===v||ia(b)!==-1||p.push(w)}}return this._onDidChangeContent.fire(),new t1e(u,f,p)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,s=e[e.length-1].range,o=new V(n.startLineNumber,n.startColumn,s.endLineNumber,s.endColumn);let r=n.startLineNumber,a=n.startColumn;const l=[];for(let f=0,p=e.length;f<p;f++){const m=e[f],_=m.range;t=t||m.forceMoveMarkers,l.push(this.getValueInRange(new V(r,a,_.startLineNumber,_.startColumn))),m.text.length>0&&l.push(m.text),r=_.endLineNumber,a=_.endColumn}const c=l.join(""),[d,h,u]=Kd(c);return{sortIndex:0,identifier:e[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,cn.TextDefined),text:c,eolCount:d,firstLineLength:h,lastLineLength:u,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(A_._sortOpsDescending);const t=[];for(let n=0;n<e.length;n++){const s=e[n],o=s.range.startLineNumber,r=s.range.startColumn,a=s.range.endLineNumber,l=s.range.endColumn;if(o===a&&r===l&&s.text.length===0)continue;s.text?(this._pieceTree.delete(s.rangeOffset,s.rangeLength),this._pieceTree.insert(s.rangeOffset,s.text,!0)):this._pieceTree.delete(s.rangeOffset,s.rangeLength);const c=new V(o,r,a,l);t.push({range:c,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,s){return this._pieceTree.findMatchesLineByLine(e,t,n,s)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(e,t){const n=e.startLineNumber,s=e.startColumn,[o,r,a]=Kd(t);let l;if(t.length>0){const c=o+1;c===1?l=new V(n,s,n,s+r):l=new V(n,s,n+c-1,a+1)}else l=new V(n,s,n,s);return l}static _getInverseEditRanges(e){const t=[];let n=0,s=0,o=null;for(let r=0,a=e.length;r<a;r++){const l=e[r];let c,d;o?o.range.endLineNumber===l.range.startLineNumber?(c=n,d=s+(l.range.startColumn-o.range.endColumn)):(c=n+(l.range.startLineNumber-o.range.endLineNumber),d=l.range.startColumn):(c=l.range.startLineNumber,d=l.range.startColumn);let h;if(l.text.length>0){const u=l.eolCount+1;u===1?h=new V(c,d,c,d+l.firstLineLength):h=new V(c,d,c+u-1,l.lastLineLength+1)}else h=new V(c,d,c,d);n=h.endLineNumber,s=h.endColumn,t.push(h),o=l}return t}static _sortOpsAscending(e,t){const n=V.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){const n=V.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}var iEe=Object.defineProperty,cQ=(i,e)=>iEe(i,"name",{value:e,configurable:!0});class nEe{constructor(e,t,n,s,o,r,a,l,c){this._chunks=e,this._bom=t,this._cr=n,this._lf=s,this._crlf=o,this._containsRTL=r,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}static{cQ(this,"PieceTreeTextBufferFactory")}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===JH.LF?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let o=0,r=n.length;o<r;o++){const a=n[o].buffer.replace(/\r\n|\r|\n/g,t),l=Bh(a);n[o]=new d_(a,l)}const s=new A_(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:s,disposable:s}}getFirstLineText(e){return this._chunks[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}}class C6{static{cQ(this,"PieceTreeTextBufferBuilder")}chunks;BOM;_hasPreviousChar;_previousChar;_tmpLineStarts;cr;lf;crlf;containsRTL;containsUnusualLineTerminators;isBasicASCII;constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&g5(e)&&(this.BOM=pge,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===A.CarriageReturn||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=lQ(this._tmpLineStarts,e);this.chunks.push(new d_(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=VC(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=u5(e)))}finish(e=!0){return this._finish(),new nEe(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=Bh(e.buffer);e.lineStarts=t,this._previousChar===A.CarriageReturn&&this.cr++}}}var sEe=Object.defineProperty,dQ=(i,e)=>sEe(i,"name",{value:e,configurable:!0});const hQ=new class{clone(){return this}equals(i){return this===i}};function oEe(i,e){return new Tye([new Iye(0,"",i)],e)}dQ(oEe,"nullTokenize");function y6(i,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(i<<Ai.LANGUAGEID_OFFSET|Lo.Other<<Ai.TOKEN_TYPE_OFFSET|qC.None<<Ai.FONT_STYLE_OFFSET|oa.DefaultForeground<<Ai.FOREGROUND_OFFSET|oa.DefaultBackground<<Ai.BACKGROUND_OFFSET)>>>0,new Aye(t,e===null?hQ:e)}dQ(y6,"nullTokenizeEncoded");var rEe=Object.defineProperty,uQ=(i,e)=>rEe(i,"name",{value:e,configurable:!0});class aEe{constructor(e){this._default=e}static{uQ(this,"FixedArray")}_store=[];get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,n){if(e>=this._store.length)return;if(t===0){this.insert(e,n);return}else if(n===0){this.delete(e,t);return}const s=this._store.slice(0,e),o=this._store.slice(e+t),r=gQ(n,this._default);this._store=s.concat(r,o)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const n=[];for(let s=0;s<t;s++)n[s]=this._default;this._store=Py(this._store,e,n)}}function gQ(i,e){const t=[];for(let n=0;n<i;n++)t[n]=e;return t}uQ(gQ,"arrayFill");var lEe=Object.defineProperty,cEe=(i,e)=>lEe(i,"name",{value:e,configurable:!0});class aF{static{cEe(this,"ContiguousMultilineTokensBuilder")}static deserialize(e){let t=0;const n=br(e,t);t+=4;const s=[];for(let o=0;o<n;o++)t=gx.deserialize(e,t,s);return s}_tokens;constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new gx(e,[t]))}finalize(){return this._tokens}serialize(){const e=this._serializeSize(),t=new Uint8Array(e);return this._serialize(t),t}_serializeSize(){let e=0;e+=4;for(let t=0;t<this._tokens.length;t++)e+=this._tokens[t].serializeSize();return e}_serialize(e){let t=0;vr(e,this._tokens.length,t),t+=4;for(let n=0;n<this._tokens.length;n++)t=this._tokens[n].serialize(e,t)}}var dEe=Object.defineProperty,Kp=(i,e)=>dEe(i,"name",{value:e,configurable:!0});class hEe{constructor(e,t){this.tokenizationSupport=t,this.store=new lF(e)}static{Kp(this,"TokenizerWithStateStore")}initialState=this.tokenizationSupport.getInitialState();store;getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class uEe extends hEe{constructor(e,t,n,s){super(e,t),this._textModel=n,this._languageIdCodec=s}static{Kp(this,"TokenizerWithStateStoreAndTextModel")}updateTokensUntilLine(e,t){const n=this._textModel.getLanguageId();for(;;){const s=this.getFirstInvalidLine();if(!s||s.lineNumber>t)break;const o=this._textModel.getLineContent(s.lineNumber),r=Km(this._languageIdCodec,n,this.tokenizationSupport,o,!0,s.startState);e.add(s.lineNumber,r.tokens),this.store.setEndState(s.lineNumber,r.endState)}}getTokenTypeIfInsertingCharacter(e,t){const n=this.getStartState(e.lineNumber);if(!n)return Lo.Other;const s=this._textModel.getLanguageId(),o=this._textModel.getLineContent(e.lineNumber),r=o.substring(0,e.column-1)+t+o.substring(e.column-1),a=Km(this._languageIdCodec,s,this.tokenizationSupport,r,!0,n),l=new ds(a.tokens,r,this._languageIdCodec);if(l.getCount()===0)return Lo.Other;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t){const n=this.getStartState(e);if(!n)return{mainLineTokens:null,additionalLines:null};const s=this._textModel.getLineContent(e),o=t.lineEdit.apply(s),r=this._textModel.getLanguageIdAtPosition(e,0),a=Km(this._languageIdCodec,r,this.tokenizationSupport,o,!0,n);let l=null;if(t.additionalLines){l=[];let d=a.endState;for(const h of t.additionalLines){const u=Km(this._languageIdCodec,r,this.tokenizationSupport,h,!0,d);l.push(new ds(u.tokens,h,this._languageIdCodec)),d=u.endState}}return{mainLineTokens:new ds(a.tokens,o,this._languageIdCodec),additionalLines:l}}hasAccurateTokensForLine(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,n){if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,n),{heuristicTokens:!1};let s=this.guessStartState(t);const o=this._textModel.getLanguageId();for(let r=t;r<=n;r++){const a=this._textModel.getLineContent(r),l=Km(this._languageIdCodec,o,this.tokenizationSupport,a,!0,s);e.add(r,l.tokens),s=l.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const n=[];let s=null;for(let a=e-1;t>1&&a>=1;a--){const l=this._textModel.getLineFirstNonWhitespaceColumn(a);if(l!==0&&l<t&&(n.push(this._textModel.getLineContent(a)),t=l,s=this.getStartState(a),s))break}s||(s=this.tokenizationSupport.getInitialState()),n.reverse();const o=this._textModel.getLanguageId();let r=s;for(const a of n)r=Km(this._languageIdCodec,o,this.tokenizationSupport,a,!1,r).endState;return r}}class lF{constructor(e){this.lineCount=e,this._invalidEndStatesLineNumbers.addRange(new it(1,e+1))}static{Kp(this,"TrackingTokenizationStateStore")}_tokenizationStateStore=new gEe;_invalidEndStatesLineNumbers=new fEe;getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new Et("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const n=this._tokenizationStateStore.setEndState(e,t);return n&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new it(e+1,e+2)),n}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new it(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[n]=Kd(t.text);this.acceptChange(new ct(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new it(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const n=this.getStartState(t,e);if(!n)throw new Et("Start state must be defined");return{lineNumber:t,startState:n}}}class gEe{static{Kp(this,"TokenizationStateStore")}_lineEndStates=new aEe(null);getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const n=this._lineEndStates.get(e);return n&&n.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let n=e.length;t>0&&n>0&&(n--,t--),this._lineEndStates.replace(e.startLineNumber,n,t)}acceptChanges(e){for(const t of e){const[n]=Kd(t.text);this.acceptChange(new ct(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}}class fEe{static{Kp(this,"RangePriorityQueueImpl")}_ranges=[];getRanges(){return this._ranges}get min(){return this._ranges.length===0?null:this._ranges[0].start}removeMin(){if(this._ranges.length===0)return null;const e=this._ranges[0];return e.start+1===e.endExclusive?this._ranges.shift():this._ranges[0]=new it(e.start+1,e.endExclusive),e.start}delete(e){const t=this._ranges.findIndex(n=>n.contains(e));if(t!==-1){const n=this._ranges[t];n.start===e?n.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new it(e+1,n.endExclusive):n.endExclusive===e+1?this._ranges[t]=new it(n.start,e):this._ranges.splice(t,1,new it(n.start,e),new it(e+1,n.endExclusive))}}addRange(e){it.addRange(e,this._ranges)}addRangeAndResize(e,t){let n=0;for(;!(n>=this._ranges.length||e.start<=this._ranges[n].endExclusive);)n++;let s=n;for(;!(s>=this._ranges.length||e.endExclusive<this._ranges[s].start);)s++;const o=t-e.length;for(let r=s;r<this._ranges.length;r++)this._ranges[r]=this._ranges[r].delta(o);if(n===s){const r=new it(e.start,e.start+t);r.isEmpty||this._ranges.splice(n,0,r)}else{const r=Math.min(e.start,this._ranges[n].start),a=Math.max(e.endExclusive,this._ranges[s-1].endExclusive),l=new it(r,a+o);l.isEmpty?this._ranges.splice(n,s-n):this._ranges.splice(n,s-n,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}function Km(i,e,t,n,s,o){let r=null;if(t)try{r=t.tokenizeEncoded(n,s,o.clone())}catch(a){Kt(a)}return r||(r=y6(i.encodeLanguageId(e),o)),ds.convertToEndOffset(r.tokens,n.length),r}Kp(Km,"safeTokenize");class pEe{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t}static{Kp(this,"DefaultBackgroundTokenizer")}_isDisposed=!1;dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_isScheduled=!1;_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,Z0(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),n=Kp(()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?LG(n):this._beginBackgroundTokenization())},"execute");n()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new aF,n=rv.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){const t=this._tokenizerWithStateStore?.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new ct(e,t))}}var mEe=Object.defineProperty,LP=(i,e)=>mEe(i,"name",{value:e,configurable:!0});class _Ee{static{LP(this,"AttachedViews")}_onDidChangeVisibleRanges=new x;onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event;_views=new Set;attachView(){const e=new bEe(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class bEe{constructor(e){this.handleStateChange=e}static{LP(this,"AttachedViewImpl")}setVisibleLines(e,t){const n=e.map(s=>new ct(s.startLineNumber,s.endLineNumber+1));this.handleStateChange({visibleLineRanges:n,stabilized:t})}}class vEe extends ${constructor(e){super(),this._refreshTokens=e}static{LP(this,"AttachedViewHandler")}runner=this._register(new xn(()=>this.update(),50));_computedLineRanges=[];_lineRanges=[];get lineRanges(){return this._lineRanges}update(){ks(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class fQ extends ${constructor(e,t,n){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=n}static{LP(this,"AbstractTokens")}_backgroundTokenizationState=Wb.InProgress;get backgroundTokenizationState(){return this._backgroundTokenizationState}_onDidChangeBackgroundTokenizationState=this._register(new x);onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event;_onDidChangeTokens=this._register(new x);onDidChangeTokens=this._onDidChangeTokens.event;tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}}const wEe=De("treeSitterParserService");var CEe=Object.defineProperty,yEe=(i,e)=>CEe(i,"name",{value:e,configurable:!0});class q8 extends fQ{constructor(e,t,n,s){super(t,n,s),this._treeSitterService=e,this._initialize()}static{yEe(this,"TreeSitterTokens")}_tokenizationSupport=null;_lastLanguageId;_initialize(){const e=this.getLanguageId();(!this._tokenizationSupport||this._lastLanguageId!==e)&&(this._lastLanguageId=e,this._tokenizationSupport=FB.get(e))}getLineTokens(e){const t=this._textModel.getLineContent(e);if(this._tokenizationSupport){const n=this._tokenizationSupport.tokenizeEncoded(e,this._textModel);if(n)return new ds(n,t,this._languageIdCodec)}return ds.createEmpty(t,this._languageIdCodec)}resetTokenization(e=!0){e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(e){e.isFlush&&this.resetTokenization(!1)}forceTokenization(e){}hasAccurateTokensForLine(e){return!0}isCheapToTokenize(e){return!0}getTokenTypeIfInsertingCharacter(e,t,n){return Lo.Other}tokenizeLineWithEdit(e,t){return{mainLineTokens:null,additionalLines:null}}get hasTokens(){return this._treeSitterService.getParseResult(this._textModel)!==void 0}}var SEe=Object.defineProperty,pQ=(i,e)=>SEe(i,"name",{value:e,configurable:!0});class yE{static{pQ(this,"ContiguousTokensStore")}_lineTokens;_len;_languageIdCodec;constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,n){let s=null;if(t<this._len&&(s=this._lineTokens[t]),s!==null&&s!==ju)return new ds(Hh(s),n,this._languageIdCodec);const o=new Uint32Array(2);return o[0]=n.length,o[1]=cF(this._languageIdCodec.encodeLanguageId(e)),new ds(o,n,this._languageIdCodec)}static _massageTokens(e,t,n){const s=n?Hh(n):null;if(t===0){let o=!1;if(s&&s.length>1&&(o=Id.getLanguageId(s[1])!==e),!o)return ju}if(!s||s.length===0){const o=new Uint32Array(2);return o[0]=t,o[1]=cF(e),o.buffer}return s[s.length-2]=t,s.byteOffset===0&&s.byteLength===s.buffer.byteLength?s.buffer:s}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[];for(let s=0;s<t;s++)n[s]=null;this._lineTokens=Py(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,s,o){const r=yE._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,s);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=r,o?!yE._equals(a,r):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=Hh(e),s=Hh(t);if(n.length!==s.length)return!1;for(let o=0,r=n.length;o<r;o++)if(n[o]!==s[o])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new j(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Bo.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Bo.deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let s=null;n<this._len&&(s=Bo.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=Bo.append(this._lineTokens[t],s),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const s=e.lineNumber-1;if(!(s>=this._len)){if(t===0){this._lineTokens[s]=Bo.insert(this._lineTokens[s],e.column-1,n);return}this._lineTokens[s]=Bo.deleteEnding(this._lineTokens[s],e.column-1),this._lineTokens[s]=Bo.insert(this._lineTokens[s],e.column-1,n),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const n=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];let a=0,l=0,c=!1;for(let d=r.startLineNumber;d<=r.endLineNumber;d++)c?(this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),r.getLineTokens(d),!1),l=d):this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),r.getLineTokens(d),!0)&&(c=!0,a=d,l=d);c&&n.push({fromLineNumber:a,toLineNumber:l})}return{changes:n}}}function cF(i){return(i<<Ai.LANGUAGEID_OFFSET|Lo.Other<<Ai.TOKEN_TYPE_OFFSET|qC.None<<Ai.FONT_STYLE_OFFSET|oa.DefaultForeground<<Ai.FOREGROUND_OFFSET|oa.DefaultBackground<<Ai.BACKGROUND_OFFSET|Ai.BALANCED_BRACKETS_MASK)>>>0}pQ(cF,"getDefaultMetadata");var EEe=Object.defineProperty,Y8=(i,e)=>EEe(i,"name",{value:e,configurable:!0});class S6{static{Y8(this,"SparseTokensStore")}_pieces;_isComplete;_languageIdCodec;constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const o=t[0].getRange(),r=t[t.length-1].getRange();if(!o||!r)return e;n=e.plusRange(o).plusRange(r)}let s=null;for(let o=0,r=this._pieces.length;o<r;o++){const a=this._pieces[o];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){s=s||{index:o};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(o,1),o--,r--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){s=s||{index:o};continue}const[l,c]=a.split(n);if(l.isEmpty()){s=s||{index:o};continue}c.isEmpty()||(this._pieces.splice(o,1,l,c),o++,r++,s=s||{index:o})}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=Py(this._pieces,s.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const n=this._pieces;if(n.length===0)return t;const s=S6._findFirstPieceWithLine(n,e),o=n[s].getLineTokens(e);if(!o)return t;const r=t.getCount(),a=o.getCount();let l=0;const c=[];let d=0,h=0;const u=Y8((f,p)=>{f!==h&&(h=f,c[d++]=f,c[d++]=p)},"emitToken");for(let f=0;f<a;f++){const p=o.getStartCharacter(f),m=o.getEndCharacter(f),_=o.getMetadata(f),w=((_&Ai.SEMANTIC_USE_ITALIC?Ai.ITALIC_MASK:0)|(_&Ai.SEMANTIC_USE_BOLD?Ai.BOLD_MASK:0)|(_&Ai.SEMANTIC_USE_UNDERLINE?Ai.UNDERLINE_MASK:0)|(_&Ai.SEMANTIC_USE_STRIKETHROUGH?Ai.STRIKETHROUGH_MASK:0)|(_&Ai.SEMANTIC_USE_FOREGROUND?Ai.FOREGROUND_MASK:0)|(_&Ai.SEMANTIC_USE_BACKGROUND?Ai.BACKGROUND_MASK:0))>>>0,v=~w>>>0;for(;l<r&&t.getEndOffset(l)<=p;)u(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<r&&t.getStartOffset(l)<p&&u(p,t.getMetadata(l));l<r&&t.getEndOffset(l)<m;)u(t.getEndOffset(l),t.getMetadata(l)&v|_&w),l++;if(l<r)u(m,t.getMetadata(l)&v|_&w),t.getEndOffset(l)===m&&l++;else{const b=Math.min(Math.max(0,l-1),r-1);u(m,t.getMetadata(b)&v|_&w)}}for(;l<r;)u(t.getEndOffset(l),t.getMetadata(l)),l++;return new ds(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,s=e.length-1;for(;n<s;){let o=n+Math.floor((s-n)/2);if(e[o].endLineNumber<t)n=o+1;else if(e[o].startLineNumber>t)s=o-1;else{for(;o>n&&e[o-1].startLineNumber<=t&&t<=e[o-1].endLineNumber;)o--;return o}}return n}acceptEdit(e,t,n,s,o){for(const r of this._pieces)r.acceptEdit(e,t,n,s,o)}}var mQ=Object.defineProperty,LEe=Object.getOwnPropertyDescriptor,Of=(i,e)=>mQ(i,"name",{value:e,configurable:!0}),DEe=(i,e,t,n)=>{for(var s=n>1?void 0:n?LEe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&mQ(e,t,s),s},BO=(i,e)=>(t,n)=>e(t,n,i);let SE=class extends UX{constructor(i,e,t,n,s,o,r){super(),this._textModel=i,this._bracketPairsTextModelPart=e,this._languageId=t,this._attachedViews=n,this._languageService=s,this._languageConfigurationService=o,this._treeSitterService=r,this._register(this._languageConfigurationService.onDidChange(a=>{a.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(H.filter(FB.onDidChange,a=>a.changedLanguages.includes(this._languageId))(()=>{this.createPreferredTokenProvider()})),this.createPreferredTokenProvider()}static{Of(this,"TokenizationTextModelPart")}_semanticTokens=new S6(this._languageService.languageIdCodec);_onDidChangeLanguage=this._register(new x);onDidChangeLanguage=this._onDidChangeLanguage.event;_onDidChangeLanguageConfiguration=this._register(new x);onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event;_onDidChangeTokens=this._register(new x);onDidChangeTokens=this._onDidChangeTokens.event;_tokens;_tokensDisposables=this._register(new te);createGrammarTokens(){return this._register(new Z8(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews))}createTreeSitterTokens(){return this._register(new q8(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,()=>this._languageId))}createTokens(i){const e=this._tokens!==void 0;this._tokens?.dispose(),this._tokens=i?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens(t=>{this._emitModelTokensChangedEvent(t)})),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState(t=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),e&&this._tokens.resetTokenization()}createPreferredTokenProvider(){FB.get(this._languageId)?this._tokens instanceof q8||this.createTokens(!0):this._tokens instanceof Z8||this.createTokens(!1)}_hasListeners(){return this._onDidChangeLanguage.hasListeners()||this._onDidChangeLanguageConfiguration.hasListeners()||this._onDidChangeTokens.hasListeners()}handleLanguageConfigurationServiceChange(i){i.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(i){if(i.isFlush)this._semanticTokens.flush();else if(!i.isEolChange)for(const e of i.changes){const[t,n,s]=Kd(e.text);this._semanticTokens.acceptEdit(e.range,t,n,s,e.text.length>0?e.text.charCodeAt(0):A.Null)}this._tokens.handleDidChangeContent(i)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(i){this.validateLineNumber(i);const e=this._tokens.getLineTokens(i);return this._semanticTokens.addSparseTokens(i,e)}_emitModelTokensChangedEvent(i){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(i),this._onDidChangeTokens.fire(i))}validateLineNumber(i){if(i<1||i>this._textModel.getLineCount())throw new Et("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(i){this.validateLineNumber(i),this._tokens.forceTokenization(i)}hasAccurateTokensForLine(i){return this.validateLineNumber(i),this._tokens.hasAccurateTokensForLine(i)}isCheapToTokenize(i){return this.validateLineNumber(i),this._tokens.isCheapToTokenize(i)}tokenizeIfCheap(i){this.validateLineNumber(i),this._tokens.tokenizeIfCheap(i)}getTokenTypeIfInsertingCharacter(i,e,t){return this._tokens.getTokenTypeIfInsertingCharacter(i,e,t)}tokenizeLineWithEdit(i,e){return this._tokens.tokenizeLineWithEdit(i,e)}setSemanticTokens(i,e){this._semanticTokens.set(i,e),this._emitModelTokensChangedEvent({semanticTokensApplied:i!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(i,e){if(this.hasCompleteSemanticTokens())return;const t=this._textModel.validateRange(this._semanticTokens.setPartial(i,e));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:t.startLineNumber,toLineNumber:t.endLineNumber}]})}getWordAtPosition(i){this.assertNotDisposed();const e=this._textModel.validatePosition(i),t=this._textModel.getLineContent(e.lineNumber),n=this.getLineTokens(e.lineNumber),s=n.findTokenIndexAtOffset(e.column-1),[o,r]=SE._findLanguageBoundaries(n,s),a=dE(e.column,this.getLanguageConfiguration(n.getLanguageId(s)).getWordDefinition(),t.substring(o,r),o);if(a&&a.startColumn<=i.column&&i.column<=a.endColumn)return a;if(s>0&&o===e.column-1){const[l,c]=SE._findLanguageBoundaries(n,s-1),d=dE(e.column,this.getLanguageConfiguration(n.getLanguageId(s-1)).getWordDefinition(),t.substring(l,c),l);if(d&&d.startColumn<=i.column&&i.column<=d.endColumn)return d}return null}getLanguageConfiguration(i){return this._languageConfigurationService.getLanguageConfiguration(i)}static _findLanguageBoundaries(i,e){const t=i.getLanguageId(e);let n=0;for(let o=e;o>=0&&i.getLanguageId(o)===t;o--)n=i.getStartOffset(o);let s=i.getLineContent().length;for(let o=e,r=i.getCount();o<r&&i.getLanguageId(o)===t;o++)s=i.getEndOffset(o);return[n,s]}getWordUntilPosition(i){const e=this.getWordAtPosition(i);return e?{word:e.word.substr(0,i.column-e.startColumn),startColumn:e.startColumn,endColumn:i.column}:{word:"",startColumn:i.column,endColumn:i.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(i,e){const t=this._textModel.validatePosition(new j(i,e)),n=this.getLineTokens(t.lineNumber);return n.getLanguageId(n.findTokenIndexAtOffset(t.column-1))}setLanguageId(i,e="api"){if(this._languageId===i)return;const t={oldLanguage:this._languageId,newLanguage:i,source:e};this._languageId=i,this._bracketPairsTextModelPart.handleDidChangeLanguage(t),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}};SE=DEe([BO(4,Ra),BO(5,sD),BO(6,wEe)],SE);class Z8 extends fQ{static{Of(this,"GrammarTokens")}_tokenizer=null;_defaultBackgroundTokenizer=null;_backgroundTokenizer=this._register(new Yi);_tokens=new yE(this._languageIdCodec);_debugBackgroundTokens;_debugBackgroundStates;_debugBackgroundTokenizer=this._register(new Yi);_attachedViewStates=this._register(new ah);constructor(e,t,n,s){super(e,t,n),this._register(lu.onDidChange(o=>{const r=this.getLanguageId();o.changedLanguages.indexOf(r)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(s.onDidChangeVisibleRanges(({view:o,state:r})=>{if(r){let a=this._attachedViewStates.get(o);a||(a=new vEe(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(o,a)),a.handleStateChange(r)}else this._attachedViewStates.deleteAndDispose(o)}))}resetTokenization(e=!0){this._tokens.flush(),this._debugBackgroundTokens?.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new lF(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const t=Of(()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const o=lu.get(this.getLanguageId());if(!o)return[null,null];let r;try{r=o.getInitialState()}catch(a){return Kt(a),[null,null]}return[o,r]},"initializeTokenization"),[n,s]=t();if(n&&s?this._tokenizer=new uEe(this._textModel.getLineCount(),n,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const o={setTokens:Of(r=>{this.setTokens(r)},"setTokens"),backgroundTokenizationFinished:Of(()=>{if(this._backgroundTokenizationState===Wb.Completed)return;const r=Wb.Completed;this._backgroundTokenizationState=r,this._onDidChangeBackgroundTokenizationState.fire()},"backgroundTokenizationFinished"),setEndState:Of((r,a)=>{if(!this._tokenizer)return;const l=this._tokenizer.store.getFirstInvalidEndStateLineNumber();l!==null&&r>=l&&this._tokenizer?.store.setEndState(r,a)},"setEndState")};n&&n.createBackgroundTokenizer&&!n.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,o)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new pEe(this._tokenizer,o),this._defaultBackgroundTokenizer.handleChanges()),n?.backgroundTokenizerShouldOnlyVerifyTokens&&n.createBackgroundTokenizer?(this._debugBackgroundTokens=new yE(this._languageIdCodec),this._debugBackgroundStates=new lF(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,{setTokens:Of(r=>{this._debugBackgroundTokens?.setMultilineTokens(r,this._textModel)},"setTokens"),backgroundTokenizationFinished(){},setEndState:Of((r,a)=>{this._debugBackgroundStates?.setEndState(r,a)},"setEndState")})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){this._defaultBackgroundTokenizer?.handleChanges()}handleDidChangeContent(e){if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const t of e.changes){const[n,s]=Kd(t.text);this._tokens.acceptEdit(t.range,n,s),this._debugBackgroundTokens?.acceptEdit(t.range,n,s)}this._debugBackgroundStates?.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),this._defaultBackgroundTokenizer?.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=ct.joinMany([...this._attachedViewStates].map(([t,n])=>n.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const n=new aF,{heuristicTokens:s}=this._tokenizer.tokenizeHeuristically(n,e,t),o=this.setTokens(n.finalize());if(s)for(const r of o.changes)this._backgroundTokenizer.value?.requestTokens(r.fromLineNumber,r.toLineNumber+1);this._defaultBackgroundTokenizer?.checkFinished()}forceTokenization(e){const t=new aF;this._tokenizer?.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),this._defaultBackgroundTokenizer?.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){const t=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const s=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!n.equals(s)&&this._debugBackgroundTokenizer.value?.reportMismatchingTokens&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return n}getTokenTypeIfInsertingCharacter(e,t,n){if(!this._tokenizer)return Lo.Other;const s=this._textModel.validatePosition(new j(e,t));return this.forceTokenization(s.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(s,n)}tokenizeLineWithEdit(e,t){return this._tokenizer?(this.forceTokenization(e),this._tokenizer.tokenizeLineWithEdit(e,t)):{mainLineTokens:null,additionalLines:null}}get hasTokens(){return this._tokens.hasTokens}}var _Q=Object.defineProperty,IEe=Object.getOwnPropertyDescriptor,nn=(i,e)=>_Q(i,"name",{value:e,configurable:!0}),TEe=(i,e,t,n)=>{for(var s=n>1?void 0:n?IEe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&_Q(e,t,s),s},_I=(i,e)=>(t,n)=>e(t,n,i);function E6(i){const e=new C6;return e.acceptChunk(i),e.finish()}nn(E6,"createTextBufferFactory");function bQ(i){return new Promise((e,t)=>{const n=new C6;let s=!1;nS(i,{onData:nn(o=>{n.acceptChunk(typeof o=="string"?o:o.toString())},"onData"),onError:nn(o=>{s||(s=!0,t(o))},"onError"),onEnd:nn(()=>{s||(s=!0,e(n.finish()))},"onEnd")})})}nn(bQ,"createTextBufferFactoryFromStream");function vQ(i){const e=new C6;let t;for(;typeof(t=i.read())=="string";)e.acceptChunk(t);return e.finish()}nn(vQ,"createTextBufferFactoryFromSnapshot");function dF(i,e){let t;return typeof i=="string"?t=E6(i):gX(i)?t=vQ(i):t=i,t.create(e)}nn(dF,"createTextBuffer");let bI=0;const AEe=999,xEe=1e4;class kEe{static{nn(this,"TextModelSnapshot")}_source;_eos;constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,n=0;do{const s=this._source.read();if(s===null)return this._eos=!0,t===0?null:e.join("");if(s.length>0&&(e[t++]=s,n+=s.length),n>=64*1024)return e.join("")}while(!0)}}const BS=nn(()=>{throw new Error("Invalid change accessor")},"invalidFunc");let h_=class extends ${constructor(i,e,t,n=null,s,o,r,a){super(),this._undoRedoService=s,this._languageService=o,this._languageConfigurationService=r,this.instantiationService=a,bI++,this.id="$model"+bI,this.isForSimpleWidget=t.isForSimpleWidget,typeof n>"u"||n===null?this._associatedResource=ne.parse("inmemory://model/"+bI):this._associatedResource=n,this._attachedEditorCount=0;const{textBuffer:l,disposable:c}=dF(i,t.defaultEOL);this._buffer=l,this._bufferDisposable=c,this._options=h_.resolveOptions(this._buffer,t);const d=typeof e=="string"?e:e.languageId;typeof e!="string"&&(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId))),this._bracketPairs=this._register(new Y1e(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new H0e(this,this._languageConfigurationService)),this._decorationProvider=this._register(new P0e(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(SE,this,this._bracketPairs,d,this._attachedViews);const h=this._buffer.getLineCount(),u=this._buffer.getValueLengthInRange(new V(1,1,h,this._buffer.getLineLength(h)+1),cn.TextDefined);t.largeFileOptimizations?(this._isTooLargeForTokenization=u>h_.LARGE_FILE_SIZE_THRESHOLD||h>h_.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=u>h_.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=u>h_._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=f5(bI),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new X8,this._commandManager=new f6(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(d),this._register(this._languageConfigurationService.onDidChange(f=>{this._bracketPairs.handleLanguageConfigurationServiceChange(f),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(f)}))}static{nn(this,"TextModel")}static _MODEL_SYNC_LIMIT=50*1024*1024;static LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;static LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;static LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024;static DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Gf.tabSize,indentSize:Gf.indentSize,insertSpaces:Gf.insertSpaces,detectIndentation:!1,defaultEOL:JH.LF,trimAutoWhitespace:Gf.trimAutoWhitespace,largeFileOptimizations:Gf.largeFileOptimizations,bracketPairColorizationOptions:Gf.bracketPairColorizationOptions};static resolveOptions(i,e){if(e.detectIndentation){const t=QB(i,e.tabSize,e.insertSpaces);return new RO({tabSize:t.tabSize,indentSize:"tabSize",insertSpaces:t.insertSpaces,trimAutoWhitespace:e.trimAutoWhitespace,defaultEOL:e.defaultEOL,bracketPairColorizationOptions:e.bracketPairColorizationOptions})}return new RO(e)}_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;_onDidChangeDecorations=this._register(new OEe(i=>this.handleBeforeFireDecorationsChangedEvent(i)));onDidChangeDecorations=this._onDidChangeDecorations.event;get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}_onDidChangeOptions=this._register(new x);onDidChangeOptions=this._onDidChangeOptions.event;_onDidChangeAttached=this._register(new x);onDidChangeAttached=this._onDidChangeAttached.event;_onDidChangeInjectedText=this._register(new x);_eventEmitter=this._register(new MEe);onDidChangeContent(i){return this._eventEmitter.slowEvent(e=>i(e.contentChangedEvent))}onDidChangeContentOrInjectedText(i){return Ia(this._eventEmitter.fastEvent(e=>i(e)),this._onDidChangeInjectedText.event(e=>i(e)))}id;isForSimpleWidget;_associatedResource;_attachedEditorCount;_buffer;_bufferDisposable;_options;_languageSelectionListener=this._register(new Yi);_isDisposed;__isDisposing;_isDisposing(){return this.__isDisposing}_versionId;_alternativeVersionId;_initialUndoRedoSnapshot;_isTooLargeForSyncing;_isTooLargeForTokenization;_isTooLargeForHeapOperation;_commandManager;_isUndoing;_isRedoing;_trimAutoWhitespaceLines;_instanceId;_deltaDecorationCallCnt=0;_lastDecorationId;_decorations;_decorationsTree;_decorationProvider;_tokenizationTextModelPart;get tokenization(){return this._tokenizationTextModelPart}_bracketPairs;get bracketPairs(){return this._bracketPairs}_guidesTextModelPart;get guides(){return this._guidesTextModelPart}_attachedViews=new _Ee;dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const i=new A_([],"",`
`,!1,!1,!0,!0);i.dispose(),this._buffer=i,this._bufferDisposable=$.None}_hasListeners(){return this._onWillDispose.hasListeners()||this._onDidChangeDecorations.hasListeners()||this._tokenizationTextModelPart._hasListeners()||this._onDidChangeOptions.hasListeners()||this._onDidChangeAttached.hasListeners()||this._onDidChangeInjectedText.hasListeners()||this._eventEmitter.hasListeners()}_assertNotDisposed(){if(this._isDisposed)throw new Et("Model is disposed!")}equalsTextBuffer(i){return this._assertNotDisposed(),this._buffer.equals(i)}getTextBuffer(){return this._assertNotDisposed(),this._buffer}_emitContentChangedEvent(i,e){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(e),this._bracketPairs.handleDidChangeContent(e),this._eventEmitter.fire(new ab(i,e)))}setValue(i){if(this._assertNotDisposed(),i==null)throw SL();const{textBuffer:e,disposable:t}=dF(i,this._options.defaultEOL);this._setValueFromTextBuffer(e,t)}_createContentChanged2(i,e,t,n,s,o,r,a){return{changes:[{range:i,rangeOffset:e,rangeLength:t,text:n}],eol:this._buffer.getEOL(),isEolChange:a,versionId:this.getVersionId(),isUndoing:s,isRedoing:o,isFlush:r}}_setValueFromTextBuffer(i,e){this._assertNotDisposed();const t=this.getFullModelRange(),n=this.getValueLengthInRange(t),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._buffer=i,this._bufferDisposable.dispose(),this._bufferDisposable=e,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new X8,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Xw([new USe],this._versionId,!1,!1),this._createContentChanged2(new V(1,1,s,o),0,n,this.getValue(),!1,!1,!0,!1))}setEOL(i){this._assertNotDisposed();const e=i===ag.CRLF?`\r
`:`
`;if(this._buffer.getEOL()===e)return;const t=this.getFullModelRange(),n=this.getValueLengthInRange(t),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(e),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Xw([new GSe],this._versionId,!1,!1),this._createContentChanged2(new V(1,1,s,o),0,n,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const i=this.getVersionId(),e=this._decorationsTree.collectNodesPostOrder();for(let t=0,n=e.length;t<n;t++){const s=e[t],o=s.range,r=s.cachedAbsoluteStart-s.start,a=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),l=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);s.cachedAbsoluteStart=a,s.cachedAbsoluteEnd=l,s.cachedVersionId=i,s.start=a-r,s.end=l-r,Qg(s)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(i){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(i)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let i=0,e=0;const t=this._buffer.getLineCount();for(let n=1;n<=t;n++){const s=this._buffer.getLineLength(n);s>=xEe?e+=s:i+=s}return e>i}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(i){this._assertNotDisposed();const e=typeof i.tabSize<"u"?i.tabSize:this._options.tabSize,t=typeof i.indentSize<"u"?i.indentSize:this._options.originalIndentSize,n=typeof i.insertSpaces<"u"?i.insertSpaces:this._options.insertSpaces,s=typeof i.trimAutoWhitespace<"u"?i.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof i.bracketColorizationOptions<"u"?i.bracketColorizationOptions:this._options.bracketPairColorizationOptions,r=new RO({tabSize:e,indentSize:t,insertSpaces:n,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:o});if(this._options.equals(r))return;const a=this._options.createChangeEvent(r);this._options=r,this._bracketPairs.handleDidChangeOptions(a),this._decorationProvider.handleDidChangeOptions(a),this._onDidChangeOptions.fire(a)}detectIndentation(i,e){this._assertNotDisposed();const t=QB(this._buffer,e,i);this.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.tabSize})}normalizeIndentation(i){return this._assertNotDisposed(),o6(i,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(i=null){const e=this.findMatches(OK.source,!1,!0,!1,null,!1,fn.MAX_SAFE_SMALL_INTEGER);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(i,e.map(t=>({range:t.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(i){this._assertNotDisposed();const e=this._validatePosition(i.lineNumber,i.column,0);return this._buffer.getOffsetAt(e.lineNumber,e.column)}getPositionAt(i){this._assertNotDisposed();const e=Math.min(this._buffer.getLength(),Math.max(0,i));return this._buffer.getPositionAt(e)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(i){this._versionId=i}_overwriteAlternativeVersionId(i){this._alternativeVersionId=i}_overwriteInitialUndoRedoSnapshot(i){this._initialUndoRedoSnapshot=i}getValue(i,e=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Et("Operation would exceed heap memory limits");const t=this.getFullModelRange(),n=this.getValueInRange(t,i);return e?this._buffer.getBOM()+n:n}createSnapshot(i=!1){return new kEe(this._buffer.createSnapshot(i))}getValueLength(i,e=!1){this._assertNotDisposed();const t=this.getFullModelRange(),n=this.getValueLengthInRange(t,i);return e?this._buffer.getBOM().length+n:n}getValueInRange(i,e=cn.TextDefined){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(i),e)}getValueLengthInRange(i,e=cn.TextDefined){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(i),e)}getCharacterCountInRange(i,e=cn.TextDefined){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(i),e)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(i){if(this._assertNotDisposed(),i<1||i>this.getLineCount())throw new Et("Illegal value for lineNumber");return this._buffer.getLineContent(i)}getLineLength(i){if(this._assertNotDisposed(),i<1||i>this.getLineCount())throw new Et("Illegal value for lineNumber");return this._buffer.getLineLength(i)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Et("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?ag.LF:ag.CRLF}getLineMinColumn(i){return this._assertNotDisposed(),1}getLineMaxColumn(i){if(this._assertNotDisposed(),i<1||i>this.getLineCount())throw new Et("Illegal value for lineNumber");return this._buffer.getLineLength(i)+1}getLineFirstNonWhitespaceColumn(i){if(this._assertNotDisposed(),i<1||i>this.getLineCount())throw new Et("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(i)}getLineLastNonWhitespaceColumn(i){if(this._assertNotDisposed(),i<1||i>this.getLineCount())throw new Et("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(i)}_validateRangeRelaxedNoAllocations(i){const e=this._buffer.getLineCount(),t=i.startLineNumber,n=i.startColumn;let s=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=Math.floor(typeof n=="number"&&!isNaN(n)?n:1);if(s<1)s=1,o=1;else if(s>e)s=e,o=this.getLineMaxColumn(s);else if(o<=1)o=1;else{const d=this.getLineMaxColumn(s);o>=d&&(o=d)}const r=i.endLineNumber,a=i.endColumn;let l=Math.floor(typeof r=="number"&&!isNaN(r)?r:1),c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1);if(l<1)l=1,c=1;else if(l>e)l=e,c=this.getLineMaxColumn(l);else if(c<=1)c=1;else{const d=this.getLineMaxColumn(l);c>=d&&(c=d)}return t===s&&n===o&&r===l&&a===c&&i instanceof V&&!(i instanceof St)?i:new V(s,o,l,c)}_isValidPosition(i,e,t){if(typeof i!="number"||typeof e!="number"||isNaN(i)||isNaN(e)||i<1||e<1||(i|0)!==i||(e|0)!==e)return!1;const n=this._buffer.getLineCount();if(i>n)return!1;if(e===1)return!0;const s=this.getLineMaxColumn(i);if(e>s)return!1;if(t===1){const o=this._buffer.getLineCharCode(i,e-2);if(Ds(o))return!1}return!0}_validatePosition(i,e,t){const n=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),s=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),o=this._buffer.getLineCount();if(n<1)return new j(1,1);if(n>o)return new j(o,this.getLineMaxColumn(o));if(s<=1)return new j(n,1);const r=this.getLineMaxColumn(n);if(s>=r)return new j(n,r);if(t===1){const a=this._buffer.getLineCharCode(n,s-2);if(Ds(a))return new j(n,s-1)}return new j(n,s)}validatePosition(i){return this._assertNotDisposed(),i instanceof j&&this._isValidPosition(i.lineNumber,i.column,1)?i:this._validatePosition(i.lineNumber,i.column,1)}_isValidRange(i,e){const t=i.startLineNumber,n=i.startColumn,s=i.endLineNumber,o=i.endColumn;if(!this._isValidPosition(t,n,0)||!this._isValidPosition(s,o,0))return!1;if(e===1){const r=n>1?this._buffer.getLineCharCode(t,n-2):0,a=o>1&&o<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,o-2):0,l=Ds(r),c=Ds(a);return!l&&!c}return!0}validateRange(i){if(this._assertNotDisposed(),i instanceof V&&!(i instanceof St)&&this._isValidRange(i,1))return i;const t=this._validatePosition(i.startLineNumber,i.startColumn,0),n=this._validatePosition(i.endLineNumber,i.endColumn,0),s=t.lineNumber,o=t.column,r=n.lineNumber,a=n.column;{const l=o>1?this._buffer.getLineCharCode(s,o-2):0,c=a>1&&a<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,a-2):0,d=Ds(l),h=Ds(c);return!d&&!h?new V(s,o,r,a):s===r&&o===a?new V(s,o-1,r,a-1):d&&h?new V(s,o-1,r,a+1):d?new V(s,o-1,r,a):new V(s,o,r,a+1)}}modifyPosition(i,e){this._assertNotDisposed();const t=this.getOffsetAt(i)+e;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,t)))}getFullModelRange(){this._assertNotDisposed();const i=this.getLineCount();return new V(1,1,i,this.getLineMaxColumn(i))}findMatchesLineByLine(i,e,t,n){return this._buffer.findMatchesLineByLine(i,e,t,n)}findMatches(i,e,t,n,s,o,r=AEe){this._assertNotDisposed();let a=null;e!==null&&(Array.isArray(e)||(e=[e]),e.every(d=>V.isIRange(d))&&(a=e.map(d=>this.validateRange(d)))),a===null&&(a=[this.getFullModelRange()]),a=a.sort((d,h)=>d.startLineNumber-h.startLineNumber||d.startColumn-h.startColumn);const l=[];l.push(a.reduce((d,h)=>V.areIntersecting(d,h)?d.plusRange(h):(l.push(d),h)));let c;if(!t&&i.indexOf(`
`)<0){const h=new Uv(i,t,n,s).parseSearchRequest();if(!h)return[];c=nn(u=>this.findMatchesLineByLine(u,h,o,r),"matchMapper")}else c=nn(d=>mI.findMatches(this,new Uv(i,t,n,s),d,o,r),"matchMapper");return l.map(c).reduce((d,h)=>d.concat(h),[])}findNextMatch(i,e,t,n,s,o){this._assertNotDisposed();const r=this.validatePosition(e);if(!t&&i.indexOf(`
`)<0){const l=new Uv(i,t,n,s).parseSearchRequest();if(!l)return null;const c=this.getLineCount();let d=new V(r.lineNumber,r.column,c,this.getLineMaxColumn(c)),h=this.findMatchesLineByLine(d,l,o,1);return mI.findNextMatch(this,new Uv(i,t,n,s),r,o),h.length>0||(d=new V(1,1,r.lineNumber,this.getLineMaxColumn(r.lineNumber)),h=this.findMatchesLineByLine(d,l,o,1),h.length>0)?h[0]:null}return mI.findNextMatch(this,new Uv(i,t,n,s),r,o)}findPreviousMatch(i,e,t,n,s,o){this._assertNotDisposed();const r=this.validatePosition(e);return mI.findPreviousMatch(this,new Uv(i,t,n,s),r,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(i){if((this.getEOL()===`
`?ag.LF:ag.CRLF)!==i)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(i)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(i){return i instanceof OO?i:new OO(i.identifier||null,this.validateRange(i.range),i.text,i.forceMoveMarkers||!1,i.isAutoWhitespaceEdit||!1,i._isTracked||!1)}_validateEditOperations(i){const e=[];for(let t=0,n=i.length;t<n;t++)e[t]=this._validateEditOperation(i[t]);return e}pushEditOperations(i,e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(i,this._validateEditOperations(e),t,n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(i,e,t,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const s=e.map(r=>({range:this.validateRange(r.range),text:r.text}));let o=!0;if(i)for(let r=0,a=i.length;r<a;r++){const l=i[r];let c=!1;for(let d=0,h=s.length;d<h;d++){const u=s[d].range,f=u.startLineNumber>l.endLineNumber,p=l.startLineNumber>u.endLineNumber;if(!f&&!p){c=!0;break}}if(!c){o=!1;break}}if(o)for(let r=0,a=this._trimAutoWhitespaceLines.length;r<a;r++){const l=this._trimAutoWhitespaceLines[r],c=this.getLineMaxColumn(l);let d=!0;for(let h=0,u=s.length;h<u;h++){const f=s[h].range,p=s[h].text;if(!(l<f.startLineNumber||l>f.endLineNumber)&&!(l===f.startLineNumber&&f.startColumn===c&&f.isEmpty()&&p&&p.length>0&&p.charAt(0)===`
`)&&!(l===f.startLineNumber&&f.startColumn===1&&f.isEmpty()&&p&&p.length>0&&p.charAt(p.length-1)===`
`)){d=!1;break}}if(d){const h=new V(l,1,l,c);e.push(new OO(null,h,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(i,e,t,n)}_applyUndo(i,e,t,n){const s=i.map(o=>{const r=this.getPositionAt(o.newPosition),a=this.getPositionAt(o.newEnd);return{range:new V(r.lineNumber,r.column,a.lineNumber,a.column),text:o.oldText}});this._applyUndoRedoEdits(s,e,!0,!1,t,n)}_applyRedo(i,e,t,n){const s=i.map(o=>{const r=this.getPositionAt(o.oldPosition),a=this.getPositionAt(o.oldEnd);return{range:new V(r.lineNumber,r.column,a.lineNumber,a.column),text:o.newText}});this._applyUndoRedoEdits(s,e,!1,!0,t,n)}_applyUndoRedoEdits(i,e,t,n,s,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=t,this._isRedoing=n,this.applyEdits(i,!1),this.setEOL(e),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(i,e=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const t=this._validateEditOperations(i);return this._doApplyEdits(t,e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(i,e){const t=this._buffer.getLineCount(),n=this._buffer.applyEdits(i,this._options.trimAutoWhitespace,e),s=this._buffer.getLineCount(),o=n.changes;if(this._trimAutoWhitespaceLines=n.trimAutoWhitespaceLineNumbers,o.length!==0){for(let l=0,c=o.length;l<c;l++){const d=o[l];this._decorationsTree.acceptReplace(d.rangeOffset,d.rangeLength,d.text.length,d.forceMoveMarkers)}const r=[];this._increaseVersionId();let a=t;for(let l=0,c=o.length;l<c;l++){const d=o[l],[h]=Kd(d.text);this._onDidChangeDecorations.fire();const u=d.range.startLineNumber,f=d.range.endLineNumber,p=f-u,m=h,_=Math.min(p,m),w=m-p,v=s-a-w+u,b=v,C=v+m,S=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new j(b,1)),this.getOffsetAt(new j(C,this.getLineMaxColumn(C))),0),D=Fc.fromDecorations(S),T=new $g(D);for(let I=_;I>=0;I--){const R=u+I,G=v+I;T.takeFromEndWhile(X=>X.lineNumber>G);const K=T.takeFromEndWhile(X=>X.lineNumber===G);r.push(new z8(R,this.getLineContent(G),K))}if(_<p){const I=u+_;r.push(new zSe(I+1,f))}if(_<m){const I=new $g(D),R=u+_,G=m-_,K=s-a-G+R+1,X=[],we=[];for(let re=0;re<G;re++){const le=K+re;we[re]=this.getLineContent(le),I.takeWhile(Ee=>Ee.lineNumber<le),X[re]=I.takeWhile(Ee=>Ee.lineNumber===le)}r.push(new $Se(R+1,u+m,we,X))}a+=w}this._emitContentChangedEvent(new Xw(r,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return n.reverseEdits===null?void 0:n.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(i){if(i===null||i.size===0)return;const t=Array.from(i).map(n=>new z8(n,this.getLineContent(n),this._getInjectedTextInLine(n)));this._onDidChangeInjectedText.fire(new aX(t))}changeDecorations(i,e=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(e,i)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(i,e){const t={addDecoration:nn((s,o)=>this._deltaDecorationsImpl(i,[],[{range:s,options:o}])[0],"addDecoration"),changeDecoration:nn((s,o)=>{this._changeDecorationImpl(s,o)},"changeDecoration"),changeDecorationOptions:nn((s,o)=>{this._changeDecorationOptionsImpl(s,hF(o))},"changeDecorationOptions"),removeDecoration:nn(s=>{this._deltaDecorationsImpl(i,[s],[])},"removeDecoration"),deltaDecorations:nn((s,o)=>s.length===0&&o.length===0?[]:this._deltaDecorationsImpl(i,s,o),"deltaDecorations")};let n=null;try{n=e(t)}catch(s){Kt(s)}return t.addDecoration=BS,t.changeDecoration=BS,t.changeDecorationOptions=BS,t.removeDecoration=BS,t.deltaDecorations=BS,n}deltaDecorations(i,e,t=0){if(this._assertNotDisposed(),i||(i=[]),i.length===0&&e.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Kt(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(t,i,e)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(i){return this.getDecorationRange(i)}_setTrackedRange(i,e,t){const n=i?this._decorations[i]:null;if(!n)return e?this._deltaDecorationsImpl(0,[],[{range:e,options:Q8[t]}],!0)[0]:null;if(!e)return this._decorationsTree.delete(n),delete this._decorations[n.id],null;const s=this._validateRangeRelaxedNoAllocations(e),o=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),r=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(n),n.reset(this.getVersionId(),o,r,s),n.setOptions(Q8[t]),this._decorationsTree.insert(n),n.id}removeAllDecorationsWithOwnerId(i){if(this._isDisposed)return;const e=this._decorationsTree.collectNodesFromOwner(i);for(let t=0,n=e.length;t<n;t++){const s=e[t];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(i){const e=this._decorations[i];return e?e.options:null}getDecorationRange(i){const e=this._decorations[i];return e?this._decorationsTree.getNodeRange(this,e):null}getLineDecorations(i,e=0,t=!1){return i<1||i>this.getLineCount()?[]:this.getLinesDecorations(i,i,e,t)}getLinesDecorations(i,e,t=0,n=!1,s=!1){const o=this.getLineCount(),r=Math.min(o,Math.max(1,i)),a=Math.min(o,Math.max(1,e)),l=this.getLineMaxColumn(a),c=new V(r,1,a,l),d=this._getDecorationsInRange(c,t,n,s);return LA(d,this._decorationProvider.getDecorationsInRange(c,t,n)),d}getDecorationsInRange(i,e=0,t=!1,n=!1,s=!1){const o=this.validateRange(i),r=this._getDecorationsInRange(o,e,t,s);return LA(r,this._decorationProvider.getDecorationsInRange(o,e,t,n)),r}getOverviewRulerDecorations(i=0,e=!1){return this._decorationsTree.getAll(this,i,e,!0,!1)}getInjectedTextDecorations(i=0){return this._decorationsTree.getAllInjectedText(this,i)}_getInjectedTextInLine(i){const e=this._buffer.getOffsetAt(i,1),t=e+this._buffer.getLineLength(i),n=this._decorationsTree.getInjectedTextInInterval(this,e,t,0);return Fc.fromDecorations(n).filter(s=>s.lineNumber===i)}getAllDecorations(i=0,e=!1){let t=this._decorationsTree.getAll(this,i,e,!1,!1);return t=t.concat(this._decorationProvider.getAllDecorations(i,e)),t}getAllMarginDecorations(i=0){return this._decorationsTree.getAll(this,i,!1,!1,!0)}_getDecorationsInRange(i,e,t,n){const s=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),o=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);return this._decorationsTree.getAllInInterval(this,s,o,e,t,n)}getRangeAt(i,e){return this._buffer.getRangeAt(i,e-i)}_changeDecorationImpl(i,e){const t=this._decorations[i];if(!t)return;if(t.options.after){const r=this.getDecorationRange(i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber)}if(t.options.before){const r=this.getDecorationRange(i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}const n=this._validateRangeRelaxedNoAllocations(e),s=this._buffer.getOffsetAt(n.startLineNumber,n.startColumn),o=this._buffer.getOffsetAt(n.endLineNumber,n.endColumn);this._decorationsTree.delete(t),t.reset(this.getVersionId(),s,o,n),this._decorationsTree.insert(t),this._onDidChangeDecorations.checkAffectedAndFire(t.options),t.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.endLineNumber),t.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.startLineNumber)}_changeDecorationOptionsImpl(i,e){const t=this._decorations[i];if(!t)return;const n=!!(t.options.overviewRuler&&t.options.overviewRuler.color),s=!!(e.overviewRuler&&e.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(t.options),this._onDidChangeDecorations.checkAffectedAndFire(e),t.options.after||e.after){const a=this._decorationsTree.getNodeRange(this,t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(t.options.before||e.before){const a=this._decorationsTree.getNodeRange(this,t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const o=n!==s,r=CQ(e)!==X1(t);o||r?(this._decorationsTree.delete(t),t.setOptions(e),this._decorationsTree.insert(t)):t.setOptions(e)}_deltaDecorationsImpl(i,e,t,n=!1){const s=this.getVersionId(),o=e.length;let r=0;const a=t.length;let l=0;this._onDidChangeDecorations.beginDeferredEmit();try{const c=new Array(a);for(;r<o||l<a;){let d=null;if(r<o){do d=this._decorations[e[r++]];while(!d&&r<o);if(d){if(d.options.after){const h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.endLineNumber)}if(d.options.before){const h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.startLineNumber)}this._decorationsTree.delete(d),n||this._onDidChangeDecorations.checkAffectedAndFire(d.options)}}if(l<a){if(!d){const _=++this._lastDecorationId,w=`${this._instanceId};${_}`;d=new qX(w,0,0),this._decorations[w]=d}const h=t[l],u=this._validateRangeRelaxedNoAllocations(h.range),f=hF(h.options),p=this._buffer.getOffsetAt(u.startLineNumber,u.startColumn),m=this._buffer.getOffsetAt(u.endLineNumber,u.endColumn);d.ownerId=i,d.reset(s,p,m,u),d.setOptions(f),d.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.endLineNumber),d.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.startLineNumber),n||this._onDidChangeDecorations.checkAffectedAndFire(f),this._decorationsTree.insert(d),c[l]=d.id,l++}else d&&delete this._decorations[d.id]}return c}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(i,e){typeof i=="string"?(this._languageSelectionListener.clear(),this._setLanguage(i,e)):(this._languageSelectionListener.value=i.onDidChange(()=>this._setLanguage(i.languageId,e)),this._setLanguage(i.languageId,e))}_setLanguage(i,e){this.tokenization.setLanguageId(i,e),this._languageService.requestRichLanguageFeatures(i)}getLanguageIdAtPosition(i,e){return this.tokenization.getLanguageIdAtPosition(i,e)}getWordAtPosition(i){return this._tokenizationTextModelPart.getWordAtPosition(i)}getWordUntilPosition(i){return this._tokenizationTextModelPart.getWordUntilPosition(i)}normalizePosition(i,e){return i}getLineIndentColumn(i){return wQ(this.getLineContent(i))+1}};h_=TEe([_I(4,QSe),_I(5,Ra),_I(6,sD),_I(7,He)],h_);function wQ(i){let e=0;for(const t of i)if(t===" "||t==="	")e++;else break;return e}nn(wQ,"indentOfLine");function PT(i){return!!(i.options.overviewRuler&&i.options.overviewRuler.color)}nn(PT,"isNodeInOverviewRuler");function CQ(i){return!!i.after||!!i.before}nn(CQ,"isOptionsInjectedText");function X1(i){return!!i.options.after||!!i.options.before}nn(X1,"isNodeInjectedText");class X8{static{nn(this,"DecorationsTrees")}_decorationsTree0;_decorationsTree1;_injectedTextDecorationsTree;constructor(){this._decorationsTree0=new MO,this._decorationsTree1=new MO,this._injectedTextDecorationsTree=new MO}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,s,o,r){const a=e.getVersionId(),l=this._intervalSearch(t,n,s,o,a,r);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,n,s,o,r){const a=this._decorationsTree0.intervalSearch(e,t,n,s,o,r),l=this._decorationsTree1.intervalSearch(e,t,n,s,o,r),c=this._injectedTextDecorationsTree.intervalSearch(e,t,n,s,o,r);return a.concat(l).concat(c)}getInjectedTextInInterval(e,t,n,s){const o=e.getVersionId(),r=this._injectedTextDecorationsTree.intervalSearch(t,n,s,!1,o,!1);return this._ensureNodesHaveRanges(e,r).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),s=this._injectedTextDecorationsTree.search(t,!1,n,!1);return this._ensureNodesHaveRanges(e,s).filter(o=>o.options.showIfCollapsed||!o.range.isEmpty())}getAll(e,t,n,s,o){const r=e.getVersionId(),a=this._search(t,n,s,r,o);return this._ensureNodesHaveRanges(e,a)}_search(e,t,n,s,o){if(n)return this._decorationsTree1.search(e,t,s,o);{const r=this._decorationsTree0.search(e,t,s,o),a=this._decorationsTree1.search(e,t,s,o),l=this._injectedTextDecorationsTree.search(e,t,s,o);return r.concat(a).concat(l)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),s=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(s)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){X1(e)?this._injectedTextDecorationsTree.insert(e):PT(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){X1(e)?this._injectedTextDecorationsTree.delete(e):PT(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){X1(e)?this._injectedTextDecorationsTree.resolveNode(e,t):PT(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,s){this._decorationsTree0.acceptReplace(e,t,n,s),this._decorationsTree1.acceptReplace(e,t,n,s),this._injectedTextDecorationsTree.acceptReplace(e,t,n,s)}}function ud(i){return i.replace(/[^a-z0-9\-_]/gi," ")}nn(ud,"cleanClassName");class yQ{static{nn(this,"DecorationOptions")}color;darkColor;constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class NEe extends yQ{static{nn(this,"ModelDecorationOverviewRulerOptions")}position;_resolvedColor;constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:hX.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const n=e?t.getColor(e.id):null;return n?n.toString():""}}class PEe{static{nn(this,"ModelDecorationGlyphMarginOptions")}position;persistLane;constructor(e){this.position=e?.position??_v.Center,this.persistLane=e?.persistLane}}class REe extends yQ{static{nn(this,"ModelDecorationMinimapOptions")}position;sectionHeaderStyle;sectionHeaderText;_resolvedColor;constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?U.fromHex(e):t.getColor(e.id)}}class EE{static{nn(this,"ModelDecorationInjectedTextOptions")}static from(e){return e instanceof EE?e:new EE(e)}content;tokens;inlineClassName;inlineClassNameAffectsLetterSpacing;attachedData;cursorStops;constructor(e){this.content=e.content||"",this.tokens=e.tokens??null,this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class gs{static{nn(this,"ModelDecorationOptions")}static EMPTY;static register(e){return new gs(e)}static createDynamic(e){return new gs(e)}description;blockClassName;blockIsAfterEnd;blockDoesNotCollapse;blockPadding;stickiness;zIndex;className;shouldFillLineOnLineBreak;hoverMessage;glyphMarginHoverMessage;isWholeLine;showIfCollapsed;collapseOnReplaceEdit;overviewRuler;minimap;glyphMargin;glyphMarginClassName;linesDecorationsClassName;lineNumberClassName;lineNumberHoverMessage;linesDecorationsTooltip;firstLineDecorationClassName;marginClassName;inlineClassName;inlineClassNameAffectsLetterSpacing;beforeContentClassName;afterContentClassName;after;before;hideInCommentTokens;hideInStringTokens;constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?ud(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||hs.AlwaysGrowsWhenTypingAtEdges,this.zIndex=e.zIndex||0,this.className=e.className?ud(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new NEe(e.overviewRuler):null,this.minimap=e.minimap?new REe(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new PEe(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?ud(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?ud(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?ud(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?AK(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?ud(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?ud(e.marginClassName):null,this.inlineClassName=e.inlineClassName?ud(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?ud(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?ud(e.afterContentClassName):null,this.after=e.after?EE.from(e.after):null,this.before=e.before?EE.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}}gs.EMPTY=gs.register({description:"empty"});const Q8=[gs.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:hs.AlwaysGrowsWhenTypingAtEdges}),gs.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:hs.NeverGrowsWhenTypingAtEdges}),gs.register({description:"tracked-range-grows-only-when-typing-before",stickiness:hs.GrowsOnlyWhenTypingBefore}),gs.register({description:"tracked-range-grows-only-when-typing-after",stickiness:hs.GrowsOnlyWhenTypingAfter})];function hF(i){return i instanceof gs?i:gs.createDynamic(i)}nn(hF,"_normalizeOptions");class OEe extends ${constructor(e){super(),this.handleBeforeFire=e,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}static{nn(this,"DidChangeDecorationsEmitter")}_actual=this._register(new x);event=this._actual.event;_deferredCnt;_shouldFireDeferred;_affectsMinimap;_affectsOverviewRuler;_affectedInjectedTextLines=null;_affectsGlyphMargin;_affectsLineNumber;hasListeners(){return this._actual.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),this._affectedInjectedTextLines?.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||=!!e.minimap?.position,this._affectsOverviewRuler||=!!e.overviewRuler?.color,this._affectsGlyphMargin||=!!e.glyphMarginClassName,this._affectsLineNumber||=!!e.lineNumberClassName,this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class MEe extends ${static{nn(this,"DidChangeContentEmitter")}_fastEmitter=this._register(new x);fastEvent=this._fastEmitter.event;_slowEmitter=this._register(new x);slowEvent=this._slowEmitter.event;_deferredCnt;_deferredEvent;constructor(){super(),this._deferredCnt=0,this._deferredEvent=null}hasListeners(){return this._fastEmitter.hasListeners()||this._slowEmitter.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}var BEe=Object.defineProperty,FEe=(i,e)=>BEe(i,"name",{value:e,configurable:!0});const aS=De("workingCopyService");class VEe extends ${static{FEe(this,"WorkingCopyService")}_onDidRegister=this._register(new x);onDidRegister=this._onDidRegister.event;_onDidUnregister=this._register(new x);onDidUnregister=this._onDidUnregister.event;_onDidChangeDirty=this._register(new x);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeContent=this._register(new x);onDidChangeContent=this._onDidChangeContent.event;_onDidSave=this._register(new x);onDidSave=this._onDidSave.event;get workingCopies(){return Array.from(this._workingCopies.values())}_workingCopies=new Set;mapResourceToWorkingCopies=new ro;mapWorkingCopyToListeners=this._register(new ah);registerWorkingCopy(e){let t=this.mapResourceToWorkingCopies.get(e.resource);if(t?.has(e.typeId))throw new Error(`Cannot register more than one working copy with the same resource ${e.resource.toString()} and type ${e.typeId}.`);this._workingCopies.add(e),t||(t=new Map,this.mapResourceToWorkingCopies.set(e.resource,t)),t.set(e.typeId,e);const n=new te;return n.add(e.onDidChangeContent(()=>this._onDidChangeContent.fire(e))),n.add(e.onDidChangeDirty(()=>this._onDidChangeDirty.fire(e))),n.add(e.onDidSave(s=>this._onDidSave.fire({workingCopy:e,...s}))),this.mapWorkingCopyToListeners.set(e,n),this._onDidRegister.fire(e),e.isDirty()&&this._onDidChangeDirty.fire(e),ye(()=>{this.unregisterWorkingCopy(e),this._onDidUnregister.fire(e)})}unregisterWorkingCopy(e){this._workingCopies.delete(e);const t=this.mapResourceToWorkingCopies.get(e.resource);t?.delete(e.typeId)&&t.size===0&&this.mapResourceToWorkingCopies.delete(e.resource),e.isDirty()&&this._onDidChangeDirty.fire(e),this.mapWorkingCopyToListeners.deleteAndDispose(e)}has(e){return ne.isUri(e)?this.mapResourceToWorkingCopies.has(e):this.mapResourceToWorkingCopies.get(e.resource)?.has(e.typeId)??!1}get(e){return this.mapResourceToWorkingCopies.get(e.resource)?.get(e.typeId)}getAll(e){const t=this.mapResourceToWorkingCopies.get(e);if(t)return Array.from(t.values())}get hasDirty(){for(const e of this._workingCopies)if(e.isDirty())return!0;return!1}get dirtyCount(){let e=0;for(const t of this._workingCopies)t.isDirty()&&e++;return e}get dirtyWorkingCopies(){return this.workingCopies.filter(e=>e.isDirty())}get modifiedCount(){let e=0;for(const t of this._workingCopies)t.isModified()&&e++;return e}get modifiedWorkingCopies(){return this.workingCopies.filter(e=>e.isModified())}isDirty(e,t){const n=this.mapResourceToWorkingCopies.get(e);if(n){if(typeof t=="string")return n.get(t)?.isDirty()??!1;for(const[,s]of n)if(s.isDirty())return!0}return!1}}Rr(aS,VEe,Pr.Delayed);const bu=De("labelService");var XC=(i=>(i[i.SHORT=0]="SHORT",i[i.MEDIUM=1]="MEDIUM",i[i.LONG=2]="LONG",i))(XC||{});const rs=De("telemetryService");De("customEndpointTelemetryService");const WEe="telemetry.telemetryLevel",HEe="telemetry.enableCrashReporter",UEe="telemetry.enableTelemetry";var u_=(i=>(i[i.NONE=0]="NONE",i[i.CRASH=1]="CRASH",i[i.ERROR=2]="ERROR",i[i.USAGE=3]="USAGE",i))(u_||{}),iw=(i=>(i.OFF="off",i.CRASH="crash",i.ERROR="error",i.ON="all",i))(iw||{}),zEe=Object.defineProperty,Qc=(i,e)=>zEe(i,"name",{value:e,configurable:!0});function $Ee(i,e){const{os:t,tildify:n,relative:s}=e;if(s){const a=SQ(i,s,t);if(typeof a=="string")return a}let o=i.fsPath;if(t===Ts.Windows&&!Nt?o=o.replace(/\//g,"\\"):t!==Ts.Windows&&Nt&&(o=o.replace(/\\/g,"/")),t!==Ts.Windows&&n?.userHome){const a=n.userHome.fsPath;let l;i.scheme!==n.userHome.scheme&&i.path[0]===kt.sep&&i.path[1]!==kt.sep?l=n.userHome.with({path:i.path}).fsPath:l=o,o=EQ(l,a,t)}return(t===Ts.Windows?Jn:kt).normalize(DP(o,t===Ts.Windows))}Qc($Ee,"getPathLabel");function SQ(i,e,t){const n=t===Ts.Windows?Jn:kt,s=t===Ts.Linux?bi:JK,o=e.getWorkspace(),r=o.folders.at(0);if(!r)return;i.scheme!==r.uri.scheme&&i.path[0]===kt.sep&&i.path[1]!==kt.sep&&(i=r.uri.with({path:i.path}));const a=e.getWorkspaceFolder(i);if(!a)return;let l;if(s.isEqual(a.uri,i)?l="":l=s.relativePath(a.uri,i)??"",l&&(l=n.normalize(l)),o.folders.length>1&&!e.noPrefix){const c=a.name?a.name:s.basenameOrAuthority(a.uri);l=l?`${c}  ${l}`:c}return l}Qc(SQ,"getRelativePathLabel");function DP(i,e=Nt){return HN(i,e)?i.charAt(0).toUpperCase()+i.slice(1):i}Qc(DP,"normalizeDriveLetter");let FO=Object.create(null);function EQ(i,e,t=gp){if(t===Ts.Windows||!i||!e)return i;let n=FO.original===e?FO.normalized:void 0;n||(n=e,Nt&&(n=WC(n)),n=`${Lb(n,kt.sep)}${kt.sep}`,FO={original:e,normalized:n});let s=i;return Nt&&(s=WC(s)),(t===Ts.Linux?s.startsWith(n):Uy(s,n))?`~/${s.substr(n.length)}`:i}Qc(EQ,"tildify");function GEe(i,e){return i.replace(/^~($|\/|\\)/,`${e}$1`)}Qc(GEe,"untildify");const J8="",FS="\\\\",VS="~";function L6(i,e=$s){const t=new Array(i.length);let n=!1;for(let s=0;s<i.length;s++){const o=i[s];if(o===""){t[s]=`.${e}`;continue}if(!o){t[s]=o;continue}n=!0;let r="",a=o;a.indexOf(FS)===0?(r=a.substr(0,a.indexOf(FS)+FS.length),a=a.substr(a.indexOf(FS)+FS.length)):a.indexOf(e)===0?(r=a.substr(0,a.indexOf(e)+e.length),a=a.substr(a.indexOf(e)+e.length)):a.indexOf(VS)===0&&(r=a.substr(0,a.indexOf(VS)+VS.length),a=a.substr(a.indexOf(VS)+VS.length));const l=a.split(e);for(let c=1;n&&c<=l.length;c++)for(let d=l.length-c;n&&d>=0;d--){n=!1;let h=l.slice(d,d+c).join(e);for(let u=0;!n&&u<i.length;u++)if(u!==s&&i[u]&&i[u].indexOf(h)>-1){const f=d+c===l.length,p=d>0&&i[u].indexOf(e)>-1?e+h:h,m=i[u].endsWith(p);n=!f||m}if(!n){let u="";(l[0].endsWith(":")||r!=="")&&(d===1&&(d=0,c++,h=l[0]+e+h),d>0&&(u=l[0]+e),u=r+u),d>0&&(u=u+J8+e),u=u+h,d+c<l.length&&(u=u+e+J8),t[s]=u}}n&&(t[s]=o)}return t}Qc(L6,"shorten");function LQ(i,e=Object.create(null)){const t=[];let n=!1,s="";for(const o of i)if(o==="$"||n&&o==="{")s&&t.push({value:s,type:0}),s="",n=!0;else if(o==="}"&&n){const r=e[s];if(typeof r=="string")r.length&&t.push({value:r,type:1});else if(r){const a=t[t.length-1];(!a||a.type!==2)&&t.push({value:r.label,type:2})}s="",n=!1}else s+=o;return s&&!n&&t.push({value:s,type:0}),t.filter((o,r)=>{if(o.type===2){const a=t[r-1],l=t[r+1];return[a,l].every(c=>c&&(c.type===1||c.type===0)&&c.value.length>0)}return!0}).map(o=>o.value).join("")}Qc(LQ,"template");function Hu(i,e){return Ue||e?i.replace(/\(&&\w\)|&&/g,"").replace(/&/g,Ue?"&":"&&"):i.replace(/&&|&/g,t=>t==="&"?"&&":"&")}Qc(Hu,"mnemonicMenuLabel");function D6(i,e){return Ue||e?i.replace(/\(&&\w\)|&&/g,""):Nt?i.replace(/&&|&/g,t=>t==="&"?"&&":"&"):i.replace(/&&/g,"_")}Qc(D6,"mnemonicButtonLabel");function DQ(i){return i.replace(/&/g,"&&")}Qc(DQ,"unmnemonicLabel");function IQ(i){if(i.endsWith("]")){const e=i.lastIndexOf(" [",i.length-2);if(e!==-1){const t=uF(i.substring(0,e)),n=i.substring(e);return{name:t.name+n,parentPath:t.parentPath}}}return uF(i)}Qc(IQ,"splitRecentLabel");function uF(i){const e=i.indexOf("/")!==-1?kt:Jn,t=e.basename(i),n=e.dirname(i);return t.length?{name:t,parentPath:n}:{name:n,parentPath:""}}Qc(uF,"splitName");const lS=De("productService"),KEe="vscode://schemas/vscode-product";var jEe=Object.defineProperty,I6=(i,e)=>jEe(i,"name",{value:e,configurable:!0});const gh=De("dialogService");class d$e{static{I6(this,"AbstractDialogHandler")}getConfirmationButtons(e){return this.getButtons(e,1)}getPromptButtons(e){return this.getButtons(e,2)}getInputButtons(e){return this.getButtons(e,3)}getButtons(e,t){const n=[];switch(t){case 1:{const s=e;s.primaryButton?n.push(s.primaryButton):n.push(g({key:"yesButton",comment:["&& denotes a mnemonic"]},"&&Yes")),s.cancelButton?n.push(s.cancelButton):n.push(g("cancelButton","Cancel"));break}case 2:{const s=e;Array.isArray(s.buttons)&&s.buttons.length>0&&n.push(...s.buttons.map(o=>o.label)),s.cancelButton&&(s.cancelButton===!0?n.push(g("cancelButton","Cancel")):typeof s.cancelButton=="string"?n.push(s.cancelButton):s.cancelButton.label?n.push(s.cancelButton.label):n.push(g("cancelButton","Cancel"))),n.length===0&&n.push(g({key:"okButton",comment:["&& denotes a mnemonic"]},"&&OK"));break}case 3:{const s=e;s.primaryButton?n.push(s.primaryButton):n.push(g({key:"okButton",comment:["&& denotes a mnemonic"]},"&&OK")),s.cancelButton?n.push(s.cancelButton):n.push(g("cancelButton","Cancel"));break}}return n}getDialogType(e){if(typeof e=="string")return e;if(typeof e=="number")return e===So.Info?"info":e===So.Error?"error":e===So.Warning?"warning":"none"}getPromptResult(e,t,n){const s=[...e.buttons??[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&s.push(e.cancelButton);let o=s[t]?.run({checkboxChecked:n});return o instanceof Promise||(o=Promise.resolve(o)),{result:o,checkboxChecked:n}}}const qEe=De("fileDialogService");var jm=(i=>(i[i.SAVE=0]="SAVE",i[i.DONT_SAVE=1]="DONT_SAVE",i[i.CANCEL=2]="CANCEL",i))(jm||{});const vI=10;function YEe(i){const e=[];return e.push(...i.slice(0,vI).map(t=>typeof t=="string"?t:lh(t))),i.length>vI&&(i.length-vI===1?e.push(g("moreFile","...1 additional file not shown")):e.push(g("moreFiles","...{0} additional files not shown",i.length-vI))),e.push(""),e.join(`
`)}I6(YEe,"getFileNamesMessage");function ZEe(i,e){const t=tS(i);let n=(t.buttons??[]).map(a=>D6(a)),s=(i.buttons||[]).map((a,l)=>l),o=0,r=t.cancelId??n.length-1;if(n.length>1){const a=typeof r=="number"?n[r]:void 0;if(Gi||Ue){if(typeof a=="string"&&n.length>1&&r!==1){n.splice(r,1),n.splice(1,0,a);const l=s[r];s.splice(r,1),s.splice(1,0,l),r=1}Gi&&n.length>1&&(n=n.reverse(),s=s.reverse(),o=n.length-1,typeof a=="string"&&(r=o-1))}else if(Nt&&typeof a=="string"&&n.length>1&&r!==n.length-1){n.splice(r,1),n.push(a);const l=s[r];s.splice(r,1),s.push(l),r=n.length-1}}return t.buttons=n,t.defaultId=o,t.cancelId=r,t.noLink=!0,t.title=t.title||e.nameLong,{options:t,buttonIndeces:s}}I6(ZEe,"massageMessageBoxOptions");var XEe=Object.defineProperty,QEe=(i,e)=>XEe(i,"name",{value:e,configurable:!0});class QC extends AJ{static{QEe(this,"EditorInput")}_onDidChangeDirty=this._register(new x);_onDidChangeLabel=this._register(new x);_onDidChangeCapabilities=this._register(new x);_onWillDispose=this._register(new x);onDidChangeDirty=this._onDidChangeDirty.event;onDidChangeLabel=this._onDidChangeLabel.event;onDidChangeCapabilities=this._onDidChangeCapabilities.event;onWillDispose=this._onWillDispose.event;closeHandler;get editorId(){}get capabilities(){return Wo.Readonly}hasCapability(e){return e===Wo.None?this.capabilities===Wo.None:(this.capabilities&e)!==0}isReadonly(){return this.hasCapability(Wo.Readonly)}getName(){return`Editor ${this.typeId}`}getDescription(e){}getTitle(e){return this.getName()}getLabelExtraClasses(){return[]}getAriaLabel(){return this.getTitle(Ii.SHORT)}getIcon(){}getTelemetryDescriptor(){return{typeId:this.typeId}}isDirty(){return!1}isModified(){return this.isDirty()}isSaving(){return!1}async resolve(){return null}async save(e,t){return this}async saveAs(e,t){return this}async revert(e,t){}async rename(e,t){}copy(){return this}canMove(e,t){return!0}matches(e){if(ho(e))return this===e;const t=e.options?.override;return this.editorId!==t&&t!==void 0&&this.editorId!==void 0?!1:Ta(this.resource,Io.getCanonicalUri(e))}prefersEditorPane(e){return e.at(0)}toUntyped(e){}isDisposed(){return this._store.isDisposed}dispose(){this.isDisposed()||this._onWillDispose.fire(),super.dispose()}}var TQ=Object.defineProperty,JEe=Object.getOwnPropertyDescriptor,T6=(i,e)=>TQ(i,"name",{value:e,configurable:!0}),eLe=(i,e,t,n)=>{for(var s=n>1?void 0:n?JEe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&TQ(e,t,s),s},tLe=(i,e)=>(t,n)=>e(t,n,i);let zo=class extends QC{constructor(i,e,t,n,s){super(),this.preferredName=i,this.preferredDescription=e,this.secondary=t,this.primary=n,this.editorService=s,this.registerListeners()}static{T6(this,"SideBySideEditorInput")}static ID="workbench.editorinputs.sidebysideEditorInput";get typeId(){return zo.ID}get capabilities(){let i=this.primary.capabilities;return i&=~Wo.CanSplitInGroup,this.secondary.hasCapability(Wo.RequiresTrust)&&(i|=Wo.RequiresTrust),this.secondary.hasCapability(Wo.Singleton)&&(i|=Wo.Singleton),i|=Wo.MultipleEditors,i}get resource(){if(this.hasIdenticalSides)return this.primary.resource}hasIdenticalSides=this.primary.matches(this.secondary);registerListeners(){this._register(H.once(H.any(this.primary.onWillDispose,this.secondary.onWillDispose))(()=>{this.isDisposed()||this.dispose()})),this._register(this.primary.onDidChangeDirty(()=>this._onDidChangeDirty.fire())),this._register(this.primary.onDidChangeCapabilities(()=>this._onDidChangeCapabilities.fire())),this._register(this.secondary.onDidChangeCapabilities(()=>this._onDidChangeCapabilities.fire())),this._register(this.primary.onDidChangeLabel(()=>this._onDidChangeLabel.fire())),this._register(this.secondary.onDidChangeLabel(()=>this._onDidChangeLabel.fire()))}getName(){const i=this.getPreferredName();return i||(this.hasIdenticalSides?this.primary.getName():g("sideBySideLabels","{0} - {1}",this.secondary.getName(),this.primary.getName()))}getPreferredName(){return this.preferredName}getDescription(i){const e=this.getPreferredDescription();return e||(this.hasIdenticalSides?this.primary.getDescription(i):super.getDescription(i))}getPreferredDescription(){return this.preferredDescription}getTitle(i){let e;this.hasIdenticalSides?e=this.primary.getTitle(i)??this.getName():e=super.getTitle(i);const t=this.getPreferredTitle();return t&&(e=`${t} (${e})`),e}getPreferredTitle(){if(this.preferredName&&this.preferredDescription)return`${this.preferredName} ${this.preferredDescription}`;if(this.preferredName||this.preferredDescription)return this.preferredName??this.preferredDescription}getLabelExtraClasses(){return this.hasIdenticalSides?this.primary.getLabelExtraClasses():super.getLabelExtraClasses()}getAriaLabel(){return this.hasIdenticalSides?this.primary.getAriaLabel():super.getAriaLabel()}getTelemetryDescriptor(){return{...this.primary.getTelemetryDescriptor(),...super.getTelemetryDescriptor()}}isDirty(){return this.primary.isDirty()}isSaving(){return this.primary.isSaving()}async save(i,e){const t=await this.primary.save(i,e);return this.saveResultToEditor(t)}async saveAs(i,e){const t=await this.primary.saveAs(i,e);return this.saveResultToEditor(t)}saveResultToEditor(i){if(!i||!this.hasIdenticalSides)return i;if(this.primary.matches(i))return this;if(i instanceof QC)return new zo(this.preferredName,this.preferredDescription,i,i,this.editorService);if(!Bd(i)&&!oC(i)&&!mg(i)&&!_g(i))return{primary:i,secondary:i,label:this.preferredName,description:this.preferredDescription}}revert(i,e){return this.primary.revert(i,e)}async rename(i,e){if(!this.hasIdenticalSides)return;const t=await this.primary.rename(i,e);if(t){if(ho(t.editor))return{editor:new zo(this.preferredName,this.preferredDescription,t.editor,t.editor,this.editorService),options:{...t.options,viewState:VT(this,i,this.editorService)}};if(yw(t.editor))return{editor:{label:this.preferredName,description:this.preferredDescription,primary:t.editor,secondary:t.editor,options:{...t.options,viewState:VT(this,i,this.editorService)}}}}}isReadonly(){return this.primary.isReadonly()}toUntyped(i){const e=this.primary.toUntyped(i),t=this.secondary.toUntyped(i);if(e&&t&&!Bd(e)&&!Bd(t)&&!oC(e)&&!oC(t)&&!mg(e)&&!mg(t)&&!_g(e)&&!_g(t)){const n={label:this.preferredName,description:this.preferredDescription,primary:e,secondary:t};return typeof i?.preserveViewState=="number"&&(n.options={viewState:VT(this,i.preserveViewState,this.editorService)}),n}}matches(i){return this===i?!0:G6(i)||Bd(i)?!1:i instanceof zo?this.primary.matches(i.primary)&&this.secondary.matches(i.secondary):mg(i)?this.primary.matches(i.primary)&&this.secondary.matches(i.secondary):!1}};zo=eLe([tLe(4,nt)],zo);class AQ{static{T6(this,"AbstractSideBySideEditorInputSerializer")}canSerialize(e){const t=e;if(t.primary&&t.secondary){const[n,s]=this.getSerializers(t.secondary.typeId,t.primary.typeId);return!!(n?.canSerialize(t.secondary)&&s?.canSerialize(t.primary))}return!1}serialize(e){const t=e;if(t.primary&&t.secondary){const[n,s]=this.getSerializers(t.secondary.typeId,t.primary.typeId);if(s&&n){const o=s.serialize(t.primary),r=n.serialize(t.secondary);if(o&&r){const a={name:t.getPreferredName(),description:t.getPreferredDescription(),primarySerialized:o,secondarySerialized:r,primaryTypeId:t.primary.typeId,secondaryTypeId:t.secondary.typeId};return JSON.stringify(a)}}}}deserialize(e,t){const n=JSON.parse(t),[s,o]=this.getSerializers(n.secondaryTypeId,n.primaryTypeId);if(o&&s){const r=o.deserialize(e,n.primarySerialized),a=s.deserialize(e,n.secondarySerialized);if(r instanceof QC&&a instanceof QC)return this.createEditorInput(e,n.name,n.description,a,r)}}getSerializers(e,t){const n=Xt.as(jp.EditorFactory);return[n.getEditorSerializer(e),n.getEditorSerializer(t)]}}class h$e extends AQ{static{T6(this,"SideBySideEditorInputSerializer")}createEditorInput(e,t,n,s,o){return e.createInstance(zo,t,n,s,o)}}var xQ=Object.defineProperty,iLe=Object.getOwnPropertyDescriptor,cS=(i,e)=>xQ(i,"name",{value:e,configurable:!0}),nLe=(i,e,t,n)=>{for(var s=n>1?void 0:n?iLe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&xQ(e,t,s),s},eU=(i,e)=>(t,n)=>e(t,n,i);const VO={LEFT:"left",RIGHT:"right",FIRST:"first",LAST:"last"};function kQ(i){const e=i;return!!(e&&typeof e=="object"&&Array.isArray(e.editors)&&Array.isArray(e.mru))}cS(kQ,"isSerializedEditorGroupModel");function sLe(i){const e=i;return e.editor&&e.editorIndex!==void 0}cS(sLe,"isGroupEditorChangeEvent");function oLe(i){const e=i;return e.kind===Wn.EDITOR_OPEN&&e.editorIndex!==void 0}cS(oLe,"isGroupEditorOpenEvent");function rLe(i){const e=i;return e.kind===Wn.EDITOR_MOVE&&e.editorIndex!==void 0&&e.oldEditorIndex!==void 0}cS(rLe,"isGroupEditorMoveEvent");function aLe(i){const e=i;return e.kind===Wn.EDITOR_CLOSE&&e.editorIndex!==void 0&&e.context!==void 0&&e.sticky!==void 0}cS(aLe,"isGroupEditorCloseEvent");let g_=class extends ${constructor(i,e,t){super(),this.instantiationService=e,this.configurationService=t,kQ(i)?this._id=this.deserialize(i):this._id=g_.IDS++,this.onConfigurationUpdated(),this.registerListeners()}static{cS(this,"EditorGroupModel")}static IDS=0;_onDidModelChange=this._register(new x({leakWarningThreshold:500}));onDidModelChange=this._onDidModelChange.event;_id;get id(){return this._id}editors=[];mru=[];editorListeners=new Set;locked=!1;selection=[];get active(){return this.selection[0]??null}preview=null;sticky=-1;transient=new Set;editorOpenPositioning;focusRecentEditorAfterClose;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(i=>this.onConfigurationUpdated(i)))}onConfigurationUpdated(i){i&&!i.affectsConfiguration("workbench.editor.openPositioning")&&!i.affectsConfiguration("workbench.editor.focusRecentEditorAfterClose")||(this.editorOpenPositioning=this.configurationService.getValue("workbench.editor.openPositioning"),this.focusRecentEditorAfterClose=this.configurationService.getValue("workbench.editor.focusRecentEditorAfterClose"))}get count(){return this.editors.length}get stickyCount(){return this.sticky+1}getEditors(i,e){const t=i===mn.MOST_RECENTLY_ACTIVE?this.mru.slice(0):this.editors.slice(0);return e?.excludeSticky?i===mn.MOST_RECENTLY_ACTIVE?t.filter(n=>!this.isSticky(n)):t.slice(this.sticky+1):t}getEditorByIndex(i){return this.editors[i]}get activeEditor(){return this.active}isActive(i){return this.matches(this.active,i)}get previewEditor(){return this.preview}openEditor(i,e){const t=e?.sticky||typeof e?.index=="number"&&this.isSticky(e.index),n=e?.pinned||e?.sticky,s=!!e?.transient,o=e?.active||!this.activeEditor||!n&&this.preview===this.activeEditor,r=this.findEditor(i,e);if(r){const[a,l]=r;return this.doSetTransient(a,l,s===!1?!1:this.isTransient(a)),n&&this.doPin(a,l),this.setSelection(o?a:this.activeEditor,e?.inactiveSelection??[]),e&&typeof e.index=="number"&&this.moveEditor(a,e.index),t&&this.doStick(a,this.indexOf(a)),{editor:a,isNew:!1}}else{const a=i,l=this.indexOf(this.active);let c;if(e&&typeof e.index=="number"?c=e.index:this.editorOpenPositioning===VO.FIRST?(c=0,!t&&this.isSticky(c)&&(c=this.sticky+1)):this.editorOpenPositioning===VO.LAST?c=this.editors.length:(this.editorOpenPositioning===VO.LEFT?l===0||!this.editors.length?c=0:c=l:c=l+1,!t&&this.isSticky(c)&&(c=this.sticky+1)),t&&(this.sticky++,this.isSticky(c)||(c=this.sticky)),(n||!this.preview)&&this.splice(c,!1,a),s&&this.doSetTransient(a,c,!0),!n){if(this.preview){const h=this.indexOf(this.preview);c>h&&c--,this.replaceEditor(this.preview,a,c,!o)}this.preview=a}this.registerEditorListeners(a);const d={kind:Wn.EDITOR_OPEN,editor:a,editorIndex:c};return this._onDidModelChange.fire(d),this.setSelection(o?a:this.activeEditor,e?.inactiveSelection??[]),{editor:a,isNew:!0}}}registerEditorListeners(i){const e=new te;this.editorListeners.add(e),e.add(H.once(i.onWillDispose)(()=>{const t=this.editors.indexOf(i);if(t>=0){const n={kind:Wn.EDITOR_WILL_DISPOSE,editor:i,editorIndex:t};this._onDidModelChange.fire(n)}})),e.add(i.onDidChangeDirty(()=>{const t={kind:Wn.EDITOR_DIRTY,editor:i,editorIndex:this.editors.indexOf(i)};this._onDidModelChange.fire(t)})),e.add(i.onDidChangeLabel(()=>{const t={kind:Wn.EDITOR_LABEL,editor:i,editorIndex:this.editors.indexOf(i)};this._onDidModelChange.fire(t)})),e.add(i.onDidChangeCapabilities(()=>{const t={kind:Wn.EDITOR_CAPABILITIES,editor:i,editorIndex:this.editors.indexOf(i)};this._onDidModelChange.fire(t)})),e.add(this.onDidModelChange(t=>{t.kind===Wn.EDITOR_CLOSE&&t.editor?.matches(i)&&(ii(e),this.editorListeners.delete(e))}))}replaceEditor(i,e,t,n=!0){const s=this.doCloseEditor(i,cb.REPLACE,n);if(this.splice(t,!1,e),s){const o={kind:Wn.EDITOR_CLOSE,...s};this._onDidModelChange.fire(o)}}closeEditor(i,e=cb.UNKNOWN,t=!0){const n=this.doCloseEditor(i,e,t);if(n){const s={kind:Wn.EDITOR_CLOSE,...n};return this._onDidModelChange.fire(s),n}}doCloseEditor(i,e,t){const n=this.indexOf(i);if(n===-1)return;const s=this.editors[n],o=this.isSticky(n),r=this.active===s;if(t&&r)if(this.mru.length>1){let a;this.focusRecentEditorAfterClose?a=this.mru[1]:n===this.editors.length-1?a=this.editors[n-1]:a=this.editors[n+1];const l=this.selection.filter(c=>c!==s&&c!==a);this.doSetSelection(a,this.editors.indexOf(a),l)}else this.doSetSelection(null,void 0,[]);else if(!r&&this.doIsSelected(s)){const a=this.selection.filter(l=>l!==s&&l!==this.activeEditor);this.doSetSelection(this.activeEditor,this.indexOf(this.activeEditor),a)}return this.preview===s&&(this.preview=null),this.transient.delete(s),this.splice(n,!0),{editor:s,sticky:o,editorIndex:n,context:e}}moveEditor(i,e){e>=this.editors.length?e=this.editors.length-1:e<0&&(e=0);const t=this.indexOf(i);if(t<0||e===t)return;const n=this.editors[t],s=this.sticky;this.isSticky(t)&&e>this.sticky?this.sticky--:!this.isSticky(t)&&e<=this.sticky&&this.sticky++,this.editors.splice(t,1),this.editors.splice(e,0,n);const o={kind:Wn.EDITOR_MOVE,editor:n,oldEditorIndex:t,editorIndex:e};if(this._onDidModelChange.fire(o),s!==this.sticky){const r={kind:Wn.EDITOR_STICKY,editor:n,editorIndex:e};this._onDidModelChange.fire(r)}return n}setActive(i){let e;return i?e=this.setEditorActive(i):this.setGroupActive(),e}setGroupActive(){this._onDidModelChange.fire({kind:Wn.GROUP_ACTIVE})}setEditorActive(i){const e=this.findEditor(i);if(!e)return;const[t,n]=e;return this.doSetSelection(t,n,[]),t}get selectedEditors(){return this.editors.filter(i=>this.doIsSelected(i))}isSelected(i){let e;return typeof i=="number"?e=this.editors[i]:e=this.findEditor(i)?.[0],!!e&&this.doIsSelected(e)}doIsSelected(i){return this.selection.includes(i)}setSelection(i,e){const t=this.findEditor(i);if(!t)return;const[n,s]=t,o=new Set;for(const r of e){const a=this.findEditor(r);if(!a)return;const[l]=a;l!==n&&o.add(l)}this.doSetSelection(n,s,Array.from(o))}doSetSelection(i,e,t){const n=this.activeEditor,s=this.selection;let o;i?o=[i,...t]:o=[],this.selection=o;const r=i&&typeof e=="number"&&n!==i;if(r){const a=this.indexOf(i,this.mru);this.mru.splice(a,1),this.mru.unshift(i);const l={kind:Wn.EDITOR_ACTIVE,editor:i,editorIndex:e};this._onDidModelChange.fire(l)}if(r||s.length!==o.length||s.some(a=>!o.includes(a))){const a={kind:Wn.EDITORS_SELECTION};this._onDidModelChange.fire(a)}}setIndex(i){this._onDidModelChange.fire({kind:Wn.GROUP_INDEX})}setLabel(i){this._onDidModelChange.fire({kind:Wn.GROUP_LABEL})}pin(i){const e=this.findEditor(i);if(!e)return;const[t,n]=e;return this.doPin(t,n),t}doPin(i,e){if(this.isPinned(i))return;this.setTransient(i,!1),this.preview=null;const t={kind:Wn.EDITOR_PIN,editor:i,editorIndex:e};this._onDidModelChange.fire(t)}unpin(i){const e=this.findEditor(i);if(!e)return;const[t,n]=e;return this.doUnpin(t,n),t}doUnpin(i,e){if(!this.isPinned(i))return;const t=this.preview;this.preview=i;const n={kind:Wn.EDITOR_PIN,editor:i,editorIndex:e};this._onDidModelChange.fire(n),t&&this.closeEditor(t,cb.UNPIN)}isPinned(i){let e;return typeof i=="number"?e=this.editors[i]:e=i,!this.matches(this.preview,e)}stick(i){const e=this.findEditor(i);if(!e)return;const[t,n]=e;return this.doStick(t,n),t}doStick(i,e){if(this.isSticky(e))return;this.pin(i);const t=this.sticky+1;this.moveEditor(i,t),this.sticky++;const n={kind:Wn.EDITOR_STICKY,editor:i,editorIndex:t};this._onDidModelChange.fire(n)}unstick(i){const e=this.findEditor(i);if(!e)return;const[t,n]=e;return this.doUnstick(t,n),t}doUnstick(i,e){if(!this.isSticky(e))return;const t=this.sticky;this.moveEditor(i,t),this.sticky--;const n={kind:Wn.EDITOR_STICKY,editor:i,editorIndex:t};this._onDidModelChange.fire(n)}isSticky(i){if(this.sticky<0)return!1;let e;return typeof i=="number"?e=i:e=this.indexOf(i),e<0?!1:e<=this.sticky}setTransient(i,e){if(!e&&this.transient.size===0)return;const t=this.findEditor(i);if(!t)return;const[n,s]=t;return this.doSetTransient(n,s,e),n}doSetTransient(i,e,t){if(t){if(this.transient.has(i))return;this.transient.add(i)}else{if(!this.transient.has(i))return;this.transient.delete(i)}const n={kind:Wn.EDITOR_TRANSIENT,editor:i,editorIndex:e};this._onDidModelChange.fire(n)}isTransient(i){if(this.transient.size===0)return!1;let e;return typeof i=="number"?e=this.editors[i]:e=this.findEditor(i)?.[0],!!e&&this.transient.has(e)}splice(i,e,t){const n=this.editors[i];if(e&&this.isSticky(i)&&this.sticky--,t?this.editors.splice(i,e?1:0,t):this.editors.splice(i,e?1:0),!e&&t)this.mru.length===0?this.mru.push(t):this.mru.splice(1,0,t);else{const s=this.indexOf(n,this.mru);e&&!t?this.mru.splice(s,1):e&&t&&this.mru.splice(s,1,t)}}indexOf(i,e=this.editors,t){let n=-1;if(!i)return n;for(let s=0;s<e.length;s++){const o=e[s];if(this.matches(o,i,t))if(t?.supportSideBySide&&o instanceof zo&&!(i instanceof zo))n=s;else{n=s;break}}return n}findEditor(i,e){const t=this.indexOf(i,this.editors,e);if(t!==-1)return[this.editors[t],t]}isFirst(i,e=this.editors){return this.matches(e[0],i)}isLast(i,e=this.editors){return this.matches(e[e.length-1],i)}contains(i,e){return this.indexOf(i,this.editors,e)!==-1}matches(i,e,t){if(!i||!e)return!1;if(t?.supportSideBySide&&i instanceof zo&&!(e instanceof zo))switch(t.supportSideBySide){case Is.ANY:if(this.matches(i.primary,e,t)||this.matches(i.secondary,e,t))return!0;break;case Is.BOTH:if(this.matches(i.primary,e,t)&&this.matches(i.secondary,e,t))return!0;break}const n=i===e;return t?.strictEquals?n:n||i.matches(e)}get isLocked(){return this.locked}lock(i){this.isLocked!==i&&(this.locked=i,this._onDidModelChange.fire({kind:Wn.GROUP_LOCKED}))}clone(){const i=this.instantiationService.createInstance(g_,void 0);i.editors=this.editors.slice(0),i.mru=this.mru.slice(0),i.preview=this.preview,i.selection=this.selection.slice(0),i.sticky=this.sticky;for(const e of i.editors)i.registerEditorListeners(e);return i}serialize(){const i=Xt.as(jp.EditorFactory),e=[],t=[];let n,s=this.sticky;for(let r=0;r<this.editors.length;r++){const a=this.editors[r];let l=!1;const c=i.getEditorSerializer(a);if(c){const d=c.canSerialize(a)?c.serialize(a):void 0;typeof d=="string"?(l=!0,t.push({id:a.typeId,value:d}),e.push(a),this.preview===a&&(n=e.length-1)):l=!1}!l&&this.isSticky(r)&&s--}const o=this.mru.map(r=>this.indexOf(r,e)).filter(r=>r>=0);return{id:this.id,locked:this.locked?!0:void 0,editors:t,mru:o,preview:n,sticky:s>=0?s:void 0}}deserialize(i){const e=Xt.as(jp.EditorFactory);return typeof i.id=="number"?(this._id=i.id,g_.IDS=Math.max(i.id+1,g_.IDS)):this._id=g_.IDS++,i.locked&&(this.locked=!0),this.editors=To(i.editors.map((t,n)=>{let s;const o=e.getEditorSerializer(t.id);if(o){const r=o.deserialize(this.instantiationService,t.value);r instanceof QC&&(s=r,this.registerEditorListeners(s))}return!s&&typeof i.sticky=="number"&&n<=i.sticky&&i.sticky--,s})),this.mru=To(i.mru.map(t=>this.editors[t])),this.selection=this.mru.length>0?[this.mru[0]]:[],typeof i.preview=="number"&&(this.preview=this.editors[i.preview]),typeof i.sticky=="number"&&(this.sticky=i.sticky),this._id}dispose(){ii(Array.from(this.editorListeners)),this.editorListeners.clear(),this.transient.clear(),super.dispose()}};g_=nLe([eU(1,He),eU(2,Pe)],g_);const IP=De("IUriIdentityService");var NQ=Object.defineProperty,lLe=Object.getOwnPropertyDescriptor,rD=(i,e)=>NQ(i,"name",{value:e,configurable:!0}),cLe=(i,e,t,n)=>{for(var s=n>1?void 0:n?lLe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&NQ(e,t,s),s},wI=(i,e)=>(t,n)=>e(t,n,i);function PQ(i){const e=i;return!!(e&&typeof e=="object"&&typeof e.id=="string"&&typeof e.isDefault=="boolean"&&typeof e.name=="string"&&ne.isUri(e.location)&&ne.isUri(e.globalStorageHome)&&ne.isUri(e.settingsResource)&&ne.isUri(e.keybindingsResource)&&ne.isUri(e.tasksResource)&&ne.isUri(e.snippetsHome)&&ne.isUri(e.extensionsResource))}rD(PQ,"isUserDataProfile");const dLe=De("IUserDataProfilesService");function hLe(i,e){return{id:i.id,isDefault:i.isDefault,name:i.name,shortName:i.shortName,icon:i.icon,location:ne.revive(i.location).with({scheme:e}),globalStorageHome:ne.revive(i.globalStorageHome).with({scheme:e}),settingsResource:ne.revive(i.settingsResource).with({scheme:e}),keybindingsResource:ne.revive(i.keybindingsResource).with({scheme:e}),tasksResource:ne.revive(i.tasksResource).with({scheme:e}),snippetsHome:ne.revive(i.snippetsHome).with({scheme:e}),extensionsResource:ne.revive(i.extensionsResource).with({scheme:e}),cacheHome:ne.revive(i.cacheHome).with({scheme:e}),useDefaultFlags:i.useDefaultFlags,isTransient:i.isTransient}}rD(hLe,"reviveProfile");function w1(i,e,t,n,s,o){return{id:i,name:e,location:t,isDefault:!1,shortName:s?.shortName,icon:s?.icon,globalStorageHome:o&&s?.useDefaultFlags?.globalState?o.globalStorageHome:Ti(t,"globalStorage"),settingsResource:o&&s?.useDefaultFlags?.settings?o.settingsResource:Ti(t,"settings.json"),keybindingsResource:o&&s?.useDefaultFlags?.keybindings?o.keybindingsResource:Ti(t,"keybindings.json"),tasksResource:o&&s?.useDefaultFlags?.tasks?o.tasksResource:Ti(t,"tasks.json"),snippetsHome:o&&s?.useDefaultFlags?.snippets?o.snippetsHome:Ti(t,"snippets"),extensionsResource:o&&s?.useDefaultFlags?.extensions?o.extensionsResource:Ti(t,"extensions.json"),cacheHome:Ti(n,i),useDefaultFlags:s?.useDefaultFlags,isTransient:s?.transient}}rD(w1,"toUserDataProfile");let gF=class extends ${constructor(i,e,t,n){super(),this.environmentService=i,this.fileService=e,this.uriIdentityService=t,this.logService=n,this.profilesHome=Ti(this.environmentService.userRoamingDataHome,"profiles"),this.profilesCacheHome=Ti(this.environmentService.cacheHome,"CachedProfilesData")}static{rD(this,"UserDataProfilesService")}static PROFILES_KEY="userDataProfiles";static PROFILE_ASSOCIATIONS_KEY="profileAssociations";_serviceBrand;enabled=!0;profilesHome;profilesCacheHome;get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.profilesObject.profiles,...this.transientProfilesObject.profiles]}_onDidChangeProfiles=this._register(new x);onDidChangeProfiles=this._onDidChangeProfiles.event;_onWillCreateProfile=this._register(new x);onWillCreateProfile=this._onWillCreateProfile.event;_onWillRemoveProfile=this._register(new x);onWillRemoveProfile=this._onWillRemoveProfile.event;_onDidResetWorkspaces=this._register(new x);onDidResetWorkspaces=this._onDidResetWorkspaces.event;profileCreationPromises=new Map;transientProfilesObject={profiles:[],folders:new ro,workspaces:new ro,emptyWindows:new Map};init(){this._profilesObject=void 0}setEnablement(i){this.enabled!==i&&(this._profilesObject=void 0,this.enabled=i)}isEnabled(){return this.enabled}_profilesObject;get profilesObject(){if(!this._profilesObject){const i=this.createDefaultProfile(),e=[i];if(this.enabled)try{for(const s of this.getStoredProfiles()){if(!s.name||!hn(s.name)||!s.location){this.logService.warn("Skipping the invalid stored profile",s.location||s.name);continue}e.push(w1(lh(s.location),s.name,s.location,this.profilesCacheHome,{shortName:s.shortName,icon:s.icon,useDefaultFlags:s.useDefaultFlags},i))}}catch(s){this.logService.error(s)}const t=new ro,n=new Map;if(e.length)try{const s=this.getStoredProfileAssociations();if(s.workspaces)for(const[o,r]of Object.entries(s.workspaces)){const a=ne.parse(o),l=e.find(c=>c.id===r);l&&t.set(a,l)}if(s.emptyWindows)for(const[o,r]of Object.entries(s.emptyWindows)){const a=e.find(l=>l.id===r);a&&n.set(o,a)}}catch(s){this.logService.error(s)}this._profilesObject={profiles:e,workspaces:t,emptyWindows:n}}return this._profilesObject}createDefaultProfile(){const i=w1("__default__profile__",g("defaultProfile","Default"),this.environmentService.userRoamingDataHome,this.profilesCacheHome);return{...i,extensionsResource:this.getDefaultProfileExtensionsLocation()??i.extensionsResource,isDefault:!0}}async createTransientProfile(i){const e="Temp",t=new RegExp(`${Yd(e)}\\s(\\d+)`);let n=0;for(const o of this.profiles){const r=t.exec(o.name),a=r?parseInt(r[1]):0;n=a>n?a:n}const s=`${e} ${n+1}`;return this.createProfile(Jd(Gp()).toString(16),s,{transient:!0},i)}async createNamedProfile(i,e,t){return this.createProfile(Jd(Gp()).toString(16),i,e,t)}async createProfile(i,e,t,n){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");const s=await this.doCreateProfile(i,e,t);return n&&await this.setProfileForWorkspace(n,s),s}async doCreateProfile(i,e,t){if(!hn(e)||!e)throw new Error("Name of the profile is mandatory and must be of type `string`");let n=this.profileCreationPromises.get(e);return n||(n=(async()=>{try{if(this.profiles.find(a=>a.name===e||a.id===i))throw new Error(`Profile with ${e} name already exists`);const o=w1(i,e,Ti(this.profilesHome,i),this.profilesCacheHome,t,this.defaultProfile);await this.fileService.createFolder(o.location);const r=[];return this._onWillCreateProfile.fire({profile:o,join(a){r.push(a)}}),await Ka.settled(r),this.updateProfiles([o],[],[]),o}finally{this.profileCreationPromises.delete(e)}})(),this.profileCreationPromises.set(e,n)),n}async updateProfile(i,e){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");let t=this.profiles.find(n=>n.id===i.id);if(!t)throw new Error(`Profile '${i.name}' does not exist`);return t=w1(t.id,e.name??t.name,t.location,this.profilesCacheHome,{shortName:e.shortName??t.shortName,icon:e.icon===null?void 0:e.icon??t.icon,transient:e.transient??t.isTransient,useDefaultFlags:e.useDefaultFlags??t.useDefaultFlags},this.defaultProfile),this.updateProfiles([],[],[t]),t}async removeProfile(i){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");if(i.isDefault)throw new Error("Cannot remove default profile");const e=this.profiles.find(n=>n.id===i.id);if(!e)throw new Error(`Profile '${i.name}' does not exist`);const t=[];this._onWillRemoveProfile.fire({profile:e,join(n){t.push(n)}});try{await Promise.allSettled(t)}catch(n){this.logService.error(n)}for(const n of[...this.profilesObject.emptyWindows.keys()])e.id===this.profilesObject.emptyWindows.get(n)?.id&&this.profilesObject.emptyWindows.delete(n);for(const n of[...this.profilesObject.workspaces.keys()])e.id===this.profilesObject.workspaces.get(n)?.id&&this.profilesObject.workspaces.delete(n);this.updateStoredProfileAssociations(),this.updateProfiles([],[e],[]);try{await this.fileService.del(e.cacheHome,{recursive:!0})}catch(n){wX(n)!==Sl.FILE_NOT_FOUND&&this.logService.error(n)}}async setProfileForWorkspace(i,e){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");const t=this.profiles.find(n=>n.id===e.id);if(!t)throw new Error(`Profile '${e.name}' does not exist`);this.updateWorkspaceAssociation(i,t)}unsetWorkspace(i,e){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");this.updateWorkspaceAssociation(i,void 0,e)}async resetWorkspaces(){this.transientProfilesObject.folders.clear(),this.transientProfilesObject.workspaces.clear(),this.transientProfilesObject.emptyWindows.clear(),this.profilesObject.workspaces.clear(),this.profilesObject.emptyWindows.clear(),this.updateStoredProfileAssociations(),this._onDidResetWorkspaces.fire()}async cleanUp(){if(this.enabled&&await this.fileService.exists(this.profilesHome)){const i=await this.fileService.resolve(this.profilesHome);await Promise.all((i.children||[]).filter(e=>e.isDirectory&&this.profiles.every(t=>!this.uriIdentityService.extUri.isEqual(t.location,e.resource))).map(e=>this.fileService.del(e.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){if(!this.enabled)return;const i=this.transientProfilesObject.profiles.filter(e=>!this.isProfileAssociatedToWorkspace(e));await Promise.allSettled(i.map(e=>this.removeProfile(e)))}getProfileForWorkspace(i){const e=this.getWorkspace(i),t=ne.isUri(e)?this.profilesObject.workspaces.get(e):this.profilesObject.emptyWindows.get(e);return t||(G1(i)?this.transientProfilesObject.folders.get(i.uri):K1(i)?this.transientProfilesObject.workspaces.get(i.configPath):this.transientProfilesObject.emptyWindows.get(i.id))}getWorkspace(i){return G1(i)?i.uri:K1(i)?i.configPath:i.id}isProfileAssociatedToWorkspace(i){return!!([...this.profilesObject.emptyWindows.values()].some(e=>this.uriIdentityService.extUri.isEqual(e.location,i.location))||[...this.profilesObject.workspaces.values()].some(e=>this.uriIdentityService.extUri.isEqual(e.location,i.location))||[...this.transientProfilesObject.emptyWindows.values()].some(e=>this.uriIdentityService.extUri.isEqual(e.location,i.location))||[...this.transientProfilesObject.workspaces.values()].some(e=>this.uriIdentityService.extUri.isEqual(e.location,i.location))||[...this.transientProfilesObject.folders.values()].some(e=>this.uriIdentityService.extUri.isEqual(e.location,i.location)))}updateProfiles(i,e,t){const n=[...this.profiles,...i],s=[],o=this.transientProfilesObject.profiles;this.transientProfilesObject.profiles=[];for(let r of n){if(r.isDefault||e.some(l=>r.id===l.id))continue;r=t.find(l=>r.id===l.id)??r;const a=o.find(l=>r.id===l.id);if(r.isTransient)this.transientProfilesObject.profiles.push(r);else{if(a){for(const[l,c]of this.transientProfilesObject.emptyWindows.entries())if(r.id===c.id){this.updateWorkspaceAssociation({id:l},r);break}for(const[l,c]of this.transientProfilesObject.workspaces.entries())if(r.id===c.id){this.updateWorkspaceAssociation({id:"",configPath:l},r);break}for(const[l,c]of this.transientProfilesObject.folders.entries())if(r.id===c.id){this.updateWorkspaceAssociation({id:"",uri:l},r);break}}s.push({location:r.location,name:r.name,shortName:r.shortName,icon:r.icon,useDefaultFlags:r.useDefaultFlags})}}this.saveStoredProfiles(s),this._profilesObject=void 0,this.triggerProfilesChanges(i,e,t)}triggerProfilesChanges(i,e,t){this._onDidChangeProfiles.fire({added:i,removed:e,updated:t,all:this.profiles})}updateWorkspaceAssociation(i,e,t){if(t=e?.isTransient?!0:t,t)G1(i)?(this.transientProfilesObject.folders.delete(i.uri),e&&this.transientProfilesObject.folders.set(i.uri,e)):K1(i)?(this.transientProfilesObject.workspaces.delete(i.configPath),e&&this.transientProfilesObject.workspaces.set(i.configPath,e)):(this.transientProfilesObject.emptyWindows.delete(i.id),e&&this.transientProfilesObject.emptyWindows.set(i.id,e));else{this.updateWorkspaceAssociation(i,void 0,!0);const n=this.getWorkspace(i);ne.isUri(n)?(this.profilesObject.workspaces.delete(n),e&&this.profilesObject.workspaces.set(n,e)):(this.profilesObject.emptyWindows.delete(n),e&&this.profilesObject.emptyWindows.set(n,e)),this.updateStoredProfileAssociations()}}updateStoredProfileAssociations(){const i={};for(const[t,n]of this.profilesObject.workspaces.entries())i[t.toString()]=n.id;const e={};for(const[t,n]of this.profilesObject.emptyWindows.entries())e[t.toString()]=n.id;this.saveStoredProfileAssociations({workspaces:i,emptyWindows:e}),this._profilesObject=void 0}migrateStoredProfileAssociations(i){const e={},t=this.createDefaultProfile();if(i.workspaces)for(const[s,o]of Object.entries(i.workspaces)){const r=ne.parse(o);e[s]=this.uriIdentityService.extUri.isEqual(r,t.location)?t.id:this.uriIdentityService.extUri.basename(r)}const n={};if(i.emptyWindows)for(const[s,o]of Object.entries(i.emptyWindows)){const r=ne.parse(o);n[s]=this.uriIdentityService.extUri.isEqual(r,t.location)?t.id:this.uriIdentityService.extUri.basename(r)}return{workspaces:e,emptyWindows:n}}getStoredProfiles(){return[]}saveStoredProfiles(i){throw new Error("not implemented")}getStoredProfileAssociations(){return{}}saveStoredProfileAssociations(i){throw new Error("not implemented")}getDefaultProfileExtensionsLocation(){}};gF=cLe([wI(0,Vy),wI(1,la),wI(2,IP),wI(3,jo)],gF);class u$e extends gF{static{rD(this,"InMemoryUserDataProfilesService")}storedProfiles=[];getStoredProfiles(){return this.storedProfiles}saveStoredProfiles(e){this.storedProfiles=e}storedProfileAssociations={};getStoredProfileAssociations(){return this.storedProfileAssociations}saveStoredProfileAssociations(e){this.storedProfileAssociations=e}}var uLe=Object.defineProperty,fh=(i,e)=>uLe(i,"name",{value:e,configurable:!0});const tU={WIDTH:400,WIDTH_WITH_VERTICAL_PANEL:600,HEIGHT:270};function gLe(i){return typeof i.parentId=="number"}fh(gLe,"isOpenedAuxiliaryWindow");function fLe(i){return!!i.workspaceUri}fh(fLe,"isWorkspaceToOpen");function pLe(i){return!!i.folderUri}fh(pLe,"isFolderToOpen");function mLe(i){return!!i.fileUri}fh(mLe,"isFileToOpen");function Jh(i){const e=Rc(i),t=i.getValue("window.menuBarVisibility");return t==="default"||e&&t==="compact"||Ue&&ao?"classic":t}fh(Jh,"getMenuBarVisibility");var Ho=(i=>(i.TITLE_BAR_STYLE="window.titleBarStyle",i.CUSTOM_TITLE_BAR_VISIBILITY="window.customTitleBarVisibility",i))(Ho||{}),LE=(i=>(i.NATIVE="native",i.CUSTOM="custom",i))(LE||{}),Cr=(i=>(i.AUTO="auto",i.WINDOWED="windowed",i.NEVER="never",i))(Cr||{});function Cw(i,e){return!0}fh(Cw,"hasCustomTitlebar");function Rc(i,e){return e||(e=TP(i)),e==="native"}fh(Rc,"hasNativeTitlebar");function TP(i){if(ui)return"custom";const e=i.getValue("window");if(e){if(Ue&&e.nativeTabs===!0||Ue&&e.nativeFullScreen===!1)return"native";const s=e.titleBarStyle;if(s==="native"||s==="custom")return s}return Gi?"native":"custom"}fh(TP,"getTitleBarStyle");const _Le=35;function RQ(i){if(Ue||ui||Rc(i))return!1;if(Gi){const e=i.getValue("window.experimentalControlOverlay");if(typeof e=="boolean")return e}return!0}fh(RQ,"useWindowControlsOverlay");function bLe(i){const e=i.getValue("window");return!e||typeof e.nativeFullScreen!="boolean"||e.nativeTabs?!0:e.nativeFullScreen!==!1}fh(bLe,"useNativeFullScreen");function vLe(i=0){return Math.pow(1.2,i)}fh(vLe,"zoomLevelToZoomFactor");var wLe=Object.defineProperty,OQ=(i,e)=>wLe(i,"name",{value:e,configurable:!0}),Ce=(i=>(i[i.EditorCore=0]="EditorCore",i[i.EditorContrib=100]="EditorContrib",i[i.WorkbenchContrib=200]="WorkbenchContrib",i[i.BuiltinExtension=300]="BuiltinExtension",i[i.ExternalExtension=400]="ExternalExtension",i))(Ce||{});class A6{static{OQ(this,"KeybindingsRegistryImpl")}_coreKeybindings;_extensionKeybindings;_cachedMergedKeybindings;constructor(){this._coreKeybindings=new ru,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(gp===Ts.Windows){if(e&&e.win)return e.win}else if(gp===Ts.Macintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=A6.bindToCurrentPlatform(e),n=new te;if(t&&t.primary){const s=uB(t.primary,gp);s&&n.add(this._registerDefaultKeybinding(s,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let s=0,o=t.secondary.length;s<o;s++){const r=t.secondary[s],a=uB(r,gp);a&&n.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-s-1,e.when))}return n}setExtensionKeybindings(e){const t=[];let n=0;for(const s of e)s.keybinding&&(t[n++]={keybinding:s.keybinding,command:s.id,commandArgs:s.args,when:s.when,weight1:s.weight,weight2:0,extensionId:s.extensionId||null,isBuiltinExtension:s.isBuiltinExtension||!1});this._extensionKeybindings=t,this._cachedMergedKeybindings=null}registerCommandAndKeybindingRule(e){return Ia(this.registerKeybindingRule(e),Mi.registerCommand(e))}_registerDefaultKeybinding(e,t,n,s,o,r){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:r,weight1:s,weight2:o,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,ye(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(MQ)),this._cachedMergedKeybindings.slice(0)}}const gt=new A6,CLe={EditorModes:"platform.keybindingsRegistry"};Xt.add(CLe.EditorModes,gt);function MQ(i,e){if(i.weight1!==e.weight1)return i.weight1-e.weight1;if(i.command&&e.command){if(i.command<e.command)return-1;if(i.command>e.command)return 1}return i.weight2-e.weight2}OQ(MQ,"sorter");var BQ=Object.defineProperty,yLe=Object.getOwnPropertyDescriptor,pf=(i,e)=>BQ(i,"name",{value:e,configurable:!0}),SLe=(i,e,t,n)=>{for(var s=n>1?void 0:n?yLe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&BQ(e,t,s),s},iU=(i,e)=>(t,n)=>e(t,n,i);function nC(i){return i.command!==void 0}pf(nC,"isIMenuItem");function FQ(i){return i.submenu!==void 0}pf(FQ,"isISubmenuItem");class N{static{pf(this,"MenuId")}static _instances=new Map;static CommandPalette=new N("CommandPalette");static DebugBreakpointsContext=new N("DebugBreakpointsContext");static DebugCallStackContext=new N("DebugCallStackContext");static DebugConsoleContext=new N("DebugConsoleContext");static DebugVariablesContext=new N("DebugVariablesContext");static NotebookVariablesContext=new N("NotebookVariablesContext");static DebugHoverContext=new N("DebugHoverContext");static DebugWatchContext=new N("DebugWatchContext");static DebugToolBar=new N("DebugToolBar");static DebugToolBarStop=new N("DebugToolBarStop");static DebugCallStackToolbar=new N("DebugCallStackToolbar");static DebugCreateConfiguration=new N("DebugCreateConfiguration");static EditorContext=new N("EditorContext");static SimpleEditorContext=new N("SimpleEditorContext");static EditorContent=new N("EditorContent");static EditorLineNumberContext=new N("EditorLineNumberContext");static EditorContextCopy=new N("EditorContextCopy");static EditorContextPeek=new N("EditorContextPeek");static EditorContextShare=new N("EditorContextShare");static EditorTitle=new N("EditorTitle");static EditorTitleRun=new N("EditorTitleRun");static EditorTitleContext=new N("EditorTitleContext");static EditorTitleContextShare=new N("EditorTitleContextShare");static EmptyEditorGroup=new N("EmptyEditorGroup");static EmptyEditorGroupContext=new N("EmptyEditorGroupContext");static EditorTabsBarContext=new N("EditorTabsBarContext");static EditorTabsBarShowTabsSubmenu=new N("EditorTabsBarShowTabsSubmenu");static EditorTabsBarShowTabsZenModeSubmenu=new N("EditorTabsBarShowTabsZenModeSubmenu");static EditorActionsPositionSubmenu=new N("EditorActionsPositionSubmenu");static ExplorerContext=new N("ExplorerContext");static ExplorerContextShare=new N("ExplorerContextShare");static ExtensionContext=new N("ExtensionContext");static ExtensionEditorContextMenu=new N("ExtensionEditorContextMenu");static GlobalActivity=new N("GlobalActivity");static CommandCenter=new N("CommandCenter");static CommandCenterCenter=new N("CommandCenterCenter");static LayoutControlMenuSubmenu=new N("LayoutControlMenuSubmenu");static LayoutControlMenu=new N("LayoutControlMenu");static MenubarMainMenu=new N("MenubarMainMenu");static MenubarAppearanceMenu=new N("MenubarAppearanceMenu");static MenubarDebugMenu=new N("MenubarDebugMenu");static MenubarEditMenu=new N("MenubarEditMenu");static MenubarCopy=new N("MenubarCopy");static MenubarFileMenu=new N("MenubarFileMenu");static MenubarGoMenu=new N("MenubarGoMenu");static MenubarHelpMenu=new N("MenubarHelpMenu");static MenubarLayoutMenu=new N("MenubarLayoutMenu");static MenubarNewBreakpointMenu=new N("MenubarNewBreakpointMenu");static PanelAlignmentMenu=new N("PanelAlignmentMenu");static PanelPositionMenu=new N("PanelPositionMenu");static ActivityBarPositionMenu=new N("ActivityBarPositionMenu");static MenubarPreferencesMenu=new N("MenubarPreferencesMenu");static MenubarRecentMenu=new N("MenubarRecentMenu");static MenubarSelectionMenu=new N("MenubarSelectionMenu");static MenubarShare=new N("MenubarShare");static MenubarSwitchEditorMenu=new N("MenubarSwitchEditorMenu");static MenubarSwitchGroupMenu=new N("MenubarSwitchGroupMenu");static MenubarTerminalMenu=new N("MenubarTerminalMenu");static MenubarViewMenu=new N("MenubarViewMenu");static MenubarHomeMenu=new N("MenubarHomeMenu");static OpenEditorsContext=new N("OpenEditorsContext");static OpenEditorsContextShare=new N("OpenEditorsContextShare");static ProblemsPanelContext=new N("ProblemsPanelContext");static SCMInputBox=new N("SCMInputBox");static SCMChangesContext=new N("SCMChangesContext");static SCMChangeContext=new N("SCMChangeContext");static SCMResourceContext=new N("SCMResourceContext");static SCMResourceContextShare=new N("SCMResourceContextShare");static SCMResourceFolderContext=new N("SCMResourceFolderContext");static SCMResourceGroupContext=new N("SCMResourceGroupContext");static SCMSourceControl=new N("SCMSourceControl");static SCMSourceControlInline=new N("SCMSourceControlInline");static SCMSourceControlTitle=new N("SCMSourceControlTitle");static SCMHistoryTitle=new N("SCMHistoryTitle");static SCMTitle=new N("SCMTitle");static SearchContext=new N("SearchContext");static SearchActionMenu=new N("SearchActionContext");static StatusBarWindowIndicatorMenu=new N("StatusBarWindowIndicatorMenu");static StatusBarRemoteIndicatorMenu=new N("StatusBarRemoteIndicatorMenu");static StickyScrollContext=new N("StickyScrollContext");static TestItem=new N("TestItem");static TestItemGutter=new N("TestItemGutter");static TestProfilesContext=new N("TestProfilesContext");static TestMessageContext=new N("TestMessageContext");static TestMessageContent=new N("TestMessageContent");static TestPeekElement=new N("TestPeekElement");static TestPeekTitle=new N("TestPeekTitle");static TestCallStack=new N("TestCallStack");static TouchBarContext=new N("TouchBarContext");static TitleBarContext=new N("TitleBarContext");static TitleBarTitleContext=new N("TitleBarTitleContext");static TunnelContext=new N("TunnelContext");static TunnelPrivacy=new N("TunnelPrivacy");static TunnelProtocol=new N("TunnelProtocol");static TunnelPortInline=new N("TunnelInline");static TunnelTitle=new N("TunnelTitle");static TunnelLocalAddressInline=new N("TunnelLocalAddressInline");static TunnelOriginInline=new N("TunnelOriginInline");static ViewItemContext=new N("ViewItemContext");static ViewContainerTitle=new N("ViewContainerTitle");static ViewContainerTitleContext=new N("ViewContainerTitleContext");static ViewTitle=new N("ViewTitle");static ViewTitleContext=new N("ViewTitleContext");static CommentEditorActions=new N("CommentEditorActions");static CommentThreadTitle=new N("CommentThreadTitle");static CommentThreadActions=new N("CommentThreadActions");static CommentThreadAdditionalActions=new N("CommentThreadAdditionalActions");static CommentThreadTitleContext=new N("CommentThreadTitleContext");static CommentThreadCommentContext=new N("CommentThreadCommentContext");static CommentTitle=new N("CommentTitle");static CommentActions=new N("CommentActions");static CommentsViewThreadActions=new N("CommentsViewThreadActions");static InteractiveToolbar=new N("InteractiveToolbar");static InteractiveCellTitle=new N("InteractiveCellTitle");static InteractiveCellDelete=new N("InteractiveCellDelete");static InteractiveCellExecute=new N("InteractiveCellExecute");static InteractiveInputExecute=new N("InteractiveInputExecute");static InteractiveInputConfig=new N("InteractiveInputConfig");static ReplInputExecute=new N("ReplInputExecute");static IssueReporter=new N("IssueReporter");static NotebookToolbar=new N("NotebookToolbar");static NotebookStickyScrollContext=new N("NotebookStickyScrollContext");static NotebookCellTitle=new N("NotebookCellTitle");static NotebookCellDelete=new N("NotebookCellDelete");static NotebookCellInsert=new N("NotebookCellInsert");static NotebookCellBetween=new N("NotebookCellBetween");static NotebookCellListTop=new N("NotebookCellTop");static NotebookCellExecute=new N("NotebookCellExecute");static NotebookCellExecuteGoTo=new N("NotebookCellExecuteGoTo");static NotebookCellExecutePrimary=new N("NotebookCellExecutePrimary");static NotebookDiffCellInputTitle=new N("NotebookDiffCellInputTitle");static NotebookDiffDocumentMetadata=new N("NotebookDiffDocumentMetadata");static NotebookDiffCellMetadataTitle=new N("NotebookDiffCellMetadataTitle");static NotebookDiffCellOutputsTitle=new N("NotebookDiffCellOutputsTitle");static NotebookOutputToolbar=new N("NotebookOutputToolbar");static NotebookOutlineFilter=new N("NotebookOutlineFilter");static NotebookOutlineActionMenu=new N("NotebookOutlineActionMenu");static NotebookEditorLayoutConfigure=new N("NotebookEditorLayoutConfigure");static NotebookKernelSource=new N("NotebookKernelSource");static BulkEditTitle=new N("BulkEditTitle");static BulkEditContext=new N("BulkEditContext");static TimelineItemContext=new N("TimelineItemContext");static TimelineTitle=new N("TimelineTitle");static TimelineTitleContext=new N("TimelineTitleContext");static TimelineFilterSubMenu=new N("TimelineFilterSubMenu");static AccountsContext=new N("AccountsContext");static SidebarTitle=new N("SidebarTitle");static PanelTitle=new N("PanelTitle");static AuxiliaryBarTitle=new N("AuxiliaryBarTitle");static AuxiliaryBarHeader=new N("AuxiliaryBarHeader");static TerminalInstanceContext=new N("TerminalInstanceContext");static TerminalEditorInstanceContext=new N("TerminalEditorInstanceContext");static TerminalNewDropdownContext=new N("TerminalNewDropdownContext");static TerminalTabContext=new N("TerminalTabContext");static TerminalTabEmptyAreaContext=new N("TerminalTabEmptyAreaContext");static TerminalStickyScrollContext=new N("TerminalStickyScrollContext");static WebviewContext=new N("WebviewContext");static InlineCompletionsActions=new N("InlineCompletionsActions");static InlineEditsActions=new N("InlineEditsActions");static InlineEditActions=new N("InlineEditActions");static NewFile=new N("NewFile");static MergeInput1Toolbar=new N("MergeToolbar1Toolbar");static MergeInput2Toolbar=new N("MergeToolbar2Toolbar");static MergeBaseToolbar=new N("MergeBaseToolbar");static MergeInputResultToolbar=new N("MergeToolbarResultToolbar");static InlineSuggestionToolbar=new N("InlineSuggestionToolbar");static InlineEditToolbar=new N("InlineEditToolbar");static ChatContext=new N("ChatContext");static ChatCodeBlock=new N("ChatCodeblock");static ChatCompareBlock=new N("ChatCompareBlock");static ChatMessageTitle=new N("ChatMessageTitle");static ChatExecute=new N("ChatExecute");static ChatExecuteSecondary=new N("ChatExecuteSecondary");static ChatInputSide=new N("ChatInputSide");static ChatInlineResourceAnchorContext=new N("ChatInlineResourceAnchorContext");static ChatInlineSymbolAnchorContext=new N("ChatInlineSymbolAnchorContext");static AccessibleView=new N("AccessibleView");static MultiDiffEditorFileToolbar=new N("MultiDiffEditorFileToolbar");static DiffEditorHunkToolbar=new N("DiffEditorHunkToolbar");static DiffEditorSelectionToolbar=new N("DiffEditorSelectionToolbar");static for(e){return N._instances.get(e)??new N(e)}id;constructor(e){if(N._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);N._instances.set(e,this),this.id=e}}const No=De("menuService");class ep{constructor(e){this.id=e,this.has=t=>t===e}static{pf(this,"MenuRegistryChangeEvent")}static _all=new Map;static for(e){let t=this._all.get(e);return t||(t=new ep(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const n of e)n instanceof ep&&t.add(n.id);return t}has}const xt=new class{_commands=new Map;_menuItems=new Map;_onDidChangeMenu=new Mue({merge:ep.merge});onDidChangeMenu=this._onDidChangeMenu.event;addCommand(i){return this._commands.set(i.id,i),this._onDidChangeMenu.fire(ep.for(N.CommandPalette)),ye(()=>{this._commands.delete(i.id)&&this._onDidChangeMenu.fire(ep.for(N.CommandPalette))})}getCommand(i){return this._commands.get(i)}getCommands(){const i=new Map;return this._commands.forEach((e,t)=>i.set(t,e)),i}appendMenuItem(i,e){let t=this._menuItems.get(i);t||(t=new ru,this._menuItems.set(i,t));const n=t.push(e);return this._onDidChangeMenu.fire(ep.for(i)),ye(()=>{n(),this._onDidChangeMenu.fire(ep.for(i))})}appendMenuItems(i){const e=new te;for(const{id:t,item:n}of i)e.add(this.appendMenuItem(t,n));return e}getMenuItems(i){let e;if(i===void 0){e=[];for(const t of this._menuItems.values())e.push(...t)}else this._menuItems.has(i)?e=[...this._menuItems.get(i)]:e=[];return i===N.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(i){const e=new Set;for(const t of i)nC(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||i.push({command:t})})}};class ql extends ll{constructor(e,t,n){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,n,"submenu"),this.item=e,this.hideActions=t}static{pf(this,"SubmenuItemAction")}}let Yl=class{constructor(i,e,t,n,s,o,r){this.hideActions=n,this.menuKeybinding=s,this._commandService=r,this.id=i.id,this.label=Yl.label(i,t),this.tooltip=(typeof i.tooltip=="string"?i.tooltip:i.tooltip?.value)??"",this.enabled=!i.precondition||o.contextMatchesRules(i.precondition),this.checked=void 0;let a;if(i.toggled){const l=i.toggled.condition?i.toggled:{condition:i.toggled};this.checked=o.contextMatchesRules(l.condition),this.checked&&l.tooltip&&(this.tooltip=typeof l.tooltip=="string"?l.tooltip:l.tooltip.value),this.checked&&Ne.isThemeIcon(l.icon)&&(a=l.icon),this.checked&&l.title&&(this.label=typeof l.title=="string"?l.title:l.title.value)}a||(a=Ne.isThemeIcon(i.icon)?i.icon:void 0),this.item=i,this.alt=e?new Yl(e,void 0,t,n,void 0,o,r):void 0,this._options=t,this.class=a&&Ne.asClassName(a)}static{pf(this,"MenuItemAction")}static label(i,e){return e?.renderShortTitle&&i.shortTitle?typeof i.shortTitle=="string"?i.shortTitle:i.shortTitle.value:typeof i.title=="string"?i.title:i.title.value}item;alt;_options;id;label;tooltip;class;enabled;checked;run(...i){let e=[];return this._options?.arg&&(e=[...e,this._options.arg]),this._options?.shouldForwardArgs&&(e=[...e,...i]),this._commandService.executeCommand(this.id,...e)}};Yl=SLe([iU(5,Ye),iU(6,Xi)],Yl);class ge{constructor(e){this.desc=e}static{pf(this,"Action2")}}function Oe(i){const e=[],t=new i,{f1:n,menu:s,keybinding:o,...r}=t.desc;if(Mi.getCommand(r.id))throw new Error(`Cannot register two commands with the same id: ${r.id}`);if(e.push(Mi.registerCommand({id:r.id,handler:pf((a,...l)=>t.run(a,...l),"handler"),metadata:r.metadata})),Array.isArray(s))for(const a of s)e.push(xt.appendMenuItem(a.id,{command:{...r,precondition:a.precondition===null?void 0:r.precondition},...a}));else s&&e.push(xt.appendMenuItem(s.id,{command:{...r,precondition:s.precondition===null?void 0:r.precondition},...s}));if(n&&(e.push(xt.appendMenuItem(N.CommandPalette,{command:r,when:r.precondition})),e.push(xt.addCommand(r))),Array.isArray(o))for(const a of o)e.push(gt.registerKeybindingRule({...a,id:r.id,when:r.precondition?Z.and(r.precondition,a.when):a.when}));else o&&e.push(gt.registerKeybindingRule({...o,id:r.id,when:r.precondition?Z.and(r.precondition,o.when):o.when}));return{dispose(){ii(e)}}}pf(Oe,"registerAction2");var ELe=Object.defineProperty,x6=(i,e)=>ELe(i,"name",{value:e,configurable:!0});const Ge=De("editorGroupsService");var Bt=(i=>(i[i.UP=0]="UP",i[i.DOWN=1]="DOWN",i[i.LEFT=2]="LEFT",i[i.RIGHT=3]="RIGHT",i))(Bt||{}),mf=(i=>(i[i.HORIZONTAL=0]="HORIZONTAL",i[i.VERTICAL=1]="VERTICAL",i))(mf||{}),Hl=(i=>(i[i.FIRST=0]="FIRST",i[i.LAST=1]="LAST",i[i.NEXT=2]="NEXT",i[i.PREVIOUS=3]="PREVIOUS",i))(Hl||{}),aD=(i=>(i[i.MAXIMIZE=0]="MAXIMIZE",i[i.EXPAND=1]="EXPAND",i[i.EVEN=2]="EVEN",i))(aD||{}),JC=(i=>(i[i.COPY_EDITORS=0]="COPY_EDITORS",i[i.MOVE_EDITORS=1]="MOVE_EDITORS",i))(JC||{});function LLe(i){const e=i;return ho(e?.editor)&&ho(e?.replacement)}x6(LLe,"isEditorReplacement");var tl=(i=>(i[i.CREATION_TIME=0]="CREATION_TIME",i[i.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",i[i.GRID_APPEARANCE=2]="GRID_APPEARANCE",i))(tl||{});function AP(i){const e=i;return!!e&&typeof e.id=="number"&&Array.isArray(e.editors)}x6(AP,"isEditorGroup");function wv(i){return i.getValue("workbench.editor.openSideBySideDirection")==="down"?1:3}x6(wv,"preferredSideBySideGroupDirection");var DLe=Object.defineProperty,ILe=(i,e)=>DLe(i,"name",{value:e,configurable:!0});const nt=De("editorService"),fF=-1,Hb=-2;function TLe(i){return typeof i=="number"||AP(i)}ILe(TLe,"isPreferredGroup");var ALe=Object.defineProperty,CI=(i,e)=>ALe(i,"name",{value:e,configurable:!0});const xLe=!0;class g$e{static{CI(this,"LoaderStats")}static get(){const e=new Map,t=new Map,n=new Map,s=new Map;function o(d,h){d.has(h.detail)||d.set(h.detail,-h.timestamp)}CI(o,"mark");function r(d,h){const u=d.get(h.detail);u&&(u>=0||d.set(h.detail,u+h.timestamp))}CI(r,"diff");let a=[];typeof require=="function"&&typeof require.getStats=="function"&&(a=require.getStats().slice(0).sort((d,h)=>d.timestamp-h.timestamp));for(const d of a)switch(d.type){case 10:o(e,d);break;case 11:case 12:r(e,d);break;case 21:o(t,d);break;case 22:r(t,d);break;case 33:o(n,d);break;case 34:r(n,d);break;case 31:o(s,d);break;case 32:r(s,d);break}let l=0;n.forEach(d=>l+=d);function c(d){const h=[];return d.forEach((u,f)=>h.push([f,u])),h}return CI(c,"to2dArray"),{amdLoad:c(e),amdInvoke:c(t),nodeRequire:c(n),nodeEval:c(s),nodeRequireTotal:l}}static toMarkdownTable(e,t){let n="";const s=[];return e.forEach((o,r)=>{s[r]=o.length}),t.forEach(o=>{o.forEach((r,a)=>{typeof r>"u"&&(r=o[a]="-");const l=r.toString().length;s[a]=Math.max(l,s[a])})}),e.forEach((o,r)=>{n+=`| ${o+" ".repeat(s[r]-o.toString().length)} `}),n+=`|
`,e.forEach((o,r)=>{n+=`| ${"-".repeat(s[r])} `}),n+=`|
`,t.forEach(o=>{o.forEach((r,a)=>{typeof r<"u"&&(n+=`| ${r+" ".repeat(s[a]-r.toString().length)} `)}),n+=`|
`}),n}}var kLe=Object.defineProperty,x_=(i,e)=>kLe(i,"name",{value:e,configurable:!0});class NLe{constructor(e,t,n){this.id=e,this.dependencies=t,this.callback=n}static{x_(this,"DefineCall")}}class k6{static{x_(this,"AMDModuleImporter")}static INSTANCE=new k6;_isWebWorker=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope";_isRenderer=typeof document=="object";_defineCalls=[];_state=1;_amdPolicy;constructor(){}_initialize(){if(this._state===1){if(globalThis.define){console.log("[amdX] AMD loader already present externally"),this._state=3;return}}else return;this._state=2,globalThis.define=(e,t,n)=>{typeof e!="string"&&(n=t,t=e,e=null),(typeof t!="object"||!Array.isArray(t))&&(n=t,t=null),this._defineCalls.push(new NLe(e,t,n))},globalThis.define.amd=!0,this._isRenderer?this._amdPolicy=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(e){if(e.startsWith(window.location.origin)||e.startsWith(`${Ve.vscodeFileResource}://${QK}`))return e;throw new Error(`[trusted_script_src] Invalid script url: ${e}`)}}):this._isWebWorker&&(this._amdPolicy=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(e){return e}}))}async load(e){if(this._initialize(),this._state===3)return new Promise(r=>{const a=Gp();console.log(`[amdX] Using external define("${a}", ["${e}"])`),globalThis.define(a,[e],function(l){console.log(`[amdX] Got a result for ${a}: ${!!l}`),r(l)})});const t=await (this._isWebWorker?this._workerLoadScript(e):this._isRenderer?this._rendererLoadScript(e):this._nodeJSLoadScript(e));if(!t){console.warn(`Did not receive a define call from script ${e}`);return}const n={},s=[],o=[];if(Array.isArray(t.dependencies))for(const r of t.dependencies)r==="exports"?s.push(n):o.push(r);if(o.length>0)throw new Error(`Cannot resolve dependencies for script ${e}. The dependencies are: ${o.join(", ")}`);return typeof t.callback=="function"?t.callback(...s)??n:t.callback}_rendererLoadScript(e){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("async","async"),s.setAttribute("type","text/javascript");const o=x_(()=>{s.removeEventListener("load",r),s.removeEventListener("error",a)},"unbind"),r=x_(l=>{o(),t(this._defineCalls.pop())},"loadEventListener"),a=x_(l=>{o(),n(l)},"errorEventListener");s.addEventListener("load",r),s.addEventListener("error",a),this._amdPolicy&&(e=this._amdPolicy.createScriptURL(e)),s.setAttribute("src",e),window.document.getElementsByTagName("head")[0].appendChild(s)})}async _workerLoadScript(e){return this._amdPolicy&&(e=this._amdPolicy.createScriptURL(e)),await import(e).then(async m=>{await m.__tla;return m}),this._defineCalls.pop()}async _nodeJSLoadScript(e){try{const t=(await cO(async()=>{const{default:d}=await import("fs").then(async m=>{await m.__tla;return m});return{default:d}},[])).default,n=(await cO(async()=>{const{default:d}=await import("vm").then(async m=>{await m.__tla;return m});return{default:d}},[])).default,s=(await cO(async()=>{const{default:d}=await import("module").then(async m=>{await m.__tla;return m});return{default:d}},[])).default,o=ne.parse(e).fsPath,r=t.readFileSync(o).toString(),a=s.wrap(r.replace(/^#!.*/,""));return new n.Script(a).runInThisContext().apply(),this._defineCalls.pop()}catch(t){throw t}}}const WO=new Map;async function lD(i,e,t){{t===void 0&&(t=!!(globalThis._VSCODE_PRODUCT_JSON??globalThis.vscode?.context?.configuration()?.product)?.commit);const n=e?`${i}/${e}`:i;if(WO.has(n))return WO.get(n);let s;if(/^\w[\w\d+.-]*:\/\//.test(n))s=n;else{const a=`${XK}/${n}`;s=Hp.asBrowserUri(a).toString(!0)}const o=k6.INSTANCE.load(s);return WO.set(n,o),o}}x_(lD,"importAMDNodeModule");function PLe(i,e){MC(xLe),(globalThis._VSCODE_PRODUCT_JSON??globalThis.vscode?.context?.configuration()?.product)?.commit;const n=`${i}/${e}`,o=`${XK}/${n}`;return Hp.asBrowserUri(o).toString(!0)}x_(PLe,"resolveAmdNodeModulePath");var RLe=Object.defineProperty,$o=(i,e)=>RLe(i,"name",{value:e,configurable:!0});const ey="utf8",xP="utf8bom",DE="utf16be",IE="utf16le";function OLe(i){return[ey,xP,DE,IE].some(e=>e===i)}$o(OLe,"isUTFEncoding");const RT=[254,255],pF=[255,254],C1=[239,187,191],MLe=512,BLe=512,FLe=512*8,VLe=512*128;class WLe extends Error{constructor(e,t){super(e),this.decodeStreamErrorKind=t}static{$o(this,"DecodeStreamError")}}class N6{constructor(e){this.iconvLiteDecoder=e}static{$o(this,"DecoderStream")}static async create(e){let t;if(e!==ey)t=(await lD("@vscode/iconv-lite-umd","lib/iconv-lite-umd.js")).getDecoder(kP(e));else{const n=new TextDecoder;t={write(s){return n.decode(s,{stream:!0})},end(){return n.decode()}}}return new N6(t)}write(e){return this.iconvLiteDecoder.write(e)}end(){return this.iconvLiteDecoder.end()}}function HLe(i,e){const t=e.minBytesRequiredForDetection??e.guessEncoding?FLe:BLe;return new Promise((n,s)=>{const o=lm(h=>h.join("")),r=[];let a=0,l;const c=new xr,d=$o(async()=>{try{const h=await $Q({buffer:mt.concat(r),bytesRead:a},e.guessEncoding,e.candidateGuessEncodings);if(h.seemsBinary&&e.acceptTextOnly)throw new WLe("Stream is binary but only text is accepted for decoding",1);h.encoding=await e.overwriteEncoding(h.encoding),l=await N6.create(h.encoding);const u=l.write(mt.concat(r).buffer);o.write(u),r.length=0,a=0,n({stream:o,detected:h})}catch(h){c.cancel(),o.destroy(),s(h)}},"createDecoder");nS(i,{onData:$o(async h=>{l?o.write(l.write(h.buffer)):(r.push(h),a+=h.byteLength,a>=t&&(i.pause(),await d(),setTimeout(()=>i.resume())))},"onData"),onError:$o(h=>o.error(h),"onError"),onEnd:$o(async()=>{l||await d(),o.end(l?.end())},"onEnd")},c.token)})}$o(HLe,"toDecodeStream");async function ULe(i,e,t){const s=(await lD("@vscode/iconv-lite-umd","lib/iconv-lite-umd.js")).getEncoder(kP(e),t);let o=!1,r=!1;return{read(){if(r)return null;const a=i.read();if(typeof a!="string"){if(r=!0,!o&&t?.addBOM)switch(e){case ey:case xP:return mt.wrap(Uint8Array.from(C1));case DE:return mt.wrap(Uint8Array.from(RT));case IE:return mt.wrap(Uint8Array.from(pF))}const l=s.end();return l&&l.length>0?(o=!0,mt.wrap(l)):null}return o=!0,mt.wrap(s.write(a))}}}$o(ULe,"toEncodeReadable");async function zLe(i){return(await lD("@vscode/iconv-lite-umd","lib/iconv-lite-umd.js")).encodingExists(kP(i))}$o(zLe,"encodingExists");function kP(i){return i===xP||i===null?ey:i}$o(kP,"toNodeEncoding");function VQ(i,e){if(!i||e<RT.length)return null;const t=i.readUInt8(0),n=i.readUInt8(1);if(t===RT[0]&&n===RT[1])return DE;if(t===pF[0]&&n===pF[1])return IE;if(e<C1.length)return null;const s=i.readUInt8(2);return t===C1[0]&&n===C1[1]&&s===C1[2]?xP:null}$o(VQ,"detectEncodingByBOMFromBuffer");const $Le=["ascii","utf-16","utf-32"];async function WQ(i,e){const t=await lD("jschardet","dist/jschardet.js"),n=i.slice(0,VLe),s=zQ(n.buffer);e&&(e=To(e.map(a=>UQ(a))),e.length===0&&(e=void 0));const o=t.detect(s,e?{detectEncodings:e}:void 0);if(!o||!o.encoding)return null;const r=o.encoding.toLowerCase();return 0<=$Le.indexOf(r)?null:HQ(o.encoding)}$o(WQ,"guessEncodingByBuffer");const GLe={ibm866:"cp866",big5:"cp950"};function P6(i){return i.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}$o(P6,"normalizeEncoding");function HQ(i){const e=P6(i);return GLe[e]||e}$o(HQ,"toIconvLiteEncoding");function UQ(i){const e=P6(i);return jLe[e].guessableName}$o(UQ,"toJschardetEncoding");function zQ(i){let e="";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e}$o(zQ,"encodeLatin1");function KLe(i){switch(i){case"shiftjis":return"shift-jis";case"utf16le":return"utf-16le";case"utf16be":return"utf-16be";case"big5hkscs":return"big5-hkscs";case"eucjp":return"euc-jp";case"euckr":return"euc-kr";case"koi8r":return"koi8-r";case"koi8u":return"koi8-u";case"macroman":return"x-mac-roman";case"utf8bom":return"utf8";default:{const e=i.match(/windows(\d+)/);return e?"windows-"+e[1]:i}}}$o(KLe,"toCanonicalName");function $Q({buffer:i,bytesRead:e},t,n){let s=VQ(i,e),o=!1;if(s!==DE&&s!==IE&&i){let r=!0,a=!0,l=!1;for(let c=0;c<e&&c<MLe;c++){const d=c%2===1,h=i.readUInt8(c)===0;if(h&&(l=!0),r&&(d&&!h||!d&&h)&&(r=!1),a&&(d&&h||!d&&!h)&&(a=!1),h&&!r&&!a)break}l&&(r?s=IE:a?s=DE:o=!0)}return t&&!o&&!s&&i?WQ(i.slice(0,e),n).then(r=>({seemsBinary:!1,encoding:r})):{seemsBinary:o,encoding:s}}$o($Q,"detectEncodingFromBuffer");const HO={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom",guessableName:"UTF-8"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3,guessableName:"UTF-16LE"},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4,guessableName:"UTF-16BE"},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5,guessableName:"windows-1252"},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16,guessableName:"windows-1250"},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17,guessableName:"ISO-8859-2"},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19,guessableName:"windows-1251"},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20,guessableName:"IBM866"},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:21,guessableName:"ISO-8859-5"},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:22,guessableName:"KOI8-R"},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:23},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:24},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:25,guessableName:"windows-1253"},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:26,guessableName:"ISO-8859-7"},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:27,guessableName:"windows-1255"},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:28,guessableName:"ISO-8859-8"},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:29},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:30},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:31},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:32},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:33},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:34},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:35},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:36,guessableName:"Big5"},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:37},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:38,guessableName:"SHIFT_JIS"},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:39,guessableName:"EUC-JP"},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:40,guessableName:"EUC-KR"},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:41},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:42},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:43},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:44},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:45,guessableName:"GB2312"},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:46},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:47}},jLe=(()=>{const i={};for(const e in HO)HO[e].guessableName&&(i[e]=HO[e]);return i})();var GQ=Object.defineProperty,qLe=Object.getOwnPropertyDescriptor,YLe=(i,e)=>GQ(i,"name",{value:e,configurable:!0}),ZLe=(i,e,t,n)=>{for(var s=n>1?void 0:n?qLe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&GQ(e,t,s),s},yh=(i,e)=>(t,n)=>e(t,n,i);let k_=class extends ZC{constructor(i,e,t,n,s,o,r,a,l,c,d,h,u,f,p){super(r,o,f,p),this.resource=i,this.hasAssociatedFilePath=e,this.initialValue=t,this.preferredLanguageId=n,this.preferredEncoding=s,this.workingCopyBackupService=a,this.textResourceConfigurationService=l,this.workingCopyService=c,this.textFileService=d,this.labelService=h,this.editorService=u,this._register(this.workingCopyService.registerWorkingCopy(this)),n&&this.setLanguageId(n),this.onConfigurationChange(void 0,!1),this.registerListeners()}static{YLe(this,"UntitledTextEditorModel")}static FIRST_LINE_NAME_MAX_LENGTH=40;static FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH=this.FIRST_LINE_NAME_MAX_LENGTH*10;static ACTIVE_EDITOR_LANGUAGE_ID="${activeEditorLanguage}";_onDidChangeContent=this._register(new x);onDidChangeContent=this._onDidChangeContent.event;_onDidChangeName=this._register(new x);onDidChangeName=this._onDidChangeName.event;_onDidChangeDirty=this._register(new x);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeEncoding=this._register(new x);onDidChangeEncoding=this._onDidChangeEncoding.event;_onDidSave=this._register(new x);onDidSave=this._onDidSave.event;_onDidRevert=this._register(new x);onDidRevert=this._onDidRevert.event;typeId=x1e;capabilities=i6.Untitled;configuredLabelFormat="content";cachedModelFirstLineWords=void 0;get name(){return this.configuredLabelFormat==="content"&&!this.hasAssociatedFilePath&&this.cachedModelFirstLineWords?this.cachedModelFirstLineWords:this.labelService.getUriBasenameLabel(this.resource)}registerListeners(){this._register(this.textResourceConfigurationService.onDidChangeConfiguration(i=>this.onConfigurationChange(i,!0)))}onConfigurationChange(i,e){if(!i||i.affectsConfiguration(this.resource,"files.encoding")){const t=this.textResourceConfigurationService.getValue(this.resource,"files.encoding");this.configuredEncoding!==t&&typeof t=="string"&&(this.configuredEncoding=t,e&&!this.preferredEncoding&&this._onDidChangeEncoding.fire())}if(!i||i.affectsConfiguration(this.resource,"workbench.editor.untitled.labelFormat")){const t=this.textResourceConfigurationService.getValue(this.resource,"workbench.editor.untitled.labelFormat");this.configuredLabelFormat!==t&&(t==="content"||t==="name")&&(this.configuredLabelFormat=t,e&&this._onDidChangeName.fire())}}setLanguageId(i,e){const t=i===k_.ACTIVE_EDITOR_LANGUAGE_ID?this.editorService.activeTextEditorLanguageId:i;this.preferredLanguageId=t,t&&super.setLanguageId(t,e)}getLanguageId(){return this.textEditorModel?this.textEditorModel.getLanguageId():this.preferredLanguageId}configuredEncoding;getEncoding(){return this.preferredEncoding||this.configuredEncoding}async setEncoding(i){const e=this.getEncoding();this.preferredEncoding=i,e!==this.preferredEncoding&&this._onDidChangeEncoding.fire()}dirty=this.hasAssociatedFilePath||!!this.initialValue;isDirty(){return this.dirty}isModified(){return this.isDirty()}setDirty(i){this.dirty!==i&&(this.dirty=i,this._onDidChangeDirty.fire())}async save(i){const e=await this.textFileService.save(this.resource,i);return e&&this._onDidSave.fire({reason:i?.reason,source:i?.source}),!!e}async revert(){this.ignoreDirtyOnModelContentChange=!0;try{this.updateTextEditorModel(E6(""))}finally{this.ignoreDirtyOnModelContentChange=!1}this.setDirty(!1),this._onDidRevert.fire()}async backup(i){let e;return this.isResolved()?e=await this.textFileService.getEncodedReadable(this.resource,this.createSnapshot()??void 0,{encoding:ey}):typeof this.initialValue=="string"&&(e=hZ(mt.fromString(this.initialValue))),{content:e}}ignoreDirtyOnModelContentChange=!1;async resolve(){let i=!1,e=!1;if(this.textEditorModel)this.updateTextEditorModel(void 0,this.preferredLanguageId);else{let n;const s=await this.workingCopyBackupService.resolve(this);s?(n=s.value,e=!0):n=gZ(mt.fromString(this.initialValue||""));const o=await bQ(await this.textFileService.getDecodedStream(this.resource,n,{encoding:ey}));this.createTextEditorModel(o,this.resource,this.preferredLanguageId),i=!0}const t=pt(this.textEditorModel);return this.installModelListeners(t),i&&((e||this.initialValue)&&this.updateNameFromFirstLine(t),this.setDirty(this.hasAssociatedFilePath||!!e||!!this.initialValue),(e||this.initialValue)&&this._onDidChangeContent.fire()),super.resolve()}installModelListeners(i){this._register(i.onDidChangeContent(e=>this.onModelContentChanged(i,e))),this._register(i.onDidChangeLanguage(()=>this.onConfigurationChange(void 0,!0))),super.installModelListeners(i)}onModelContentChanged(i,e){this.ignoreDirtyOnModelContentChange||(!this.hasAssociatedFilePath&&i.getLineCount()===1&&i.getLineLength(1)===0?this.setDirty(!1):this.setDirty(!0)),e.changes.some(t=>(t.range.startLineNumber===1||t.range.endLineNumber===1)&&t.range.startColumn<=k_.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH)&&this.updateNameFromFirstLine(i),this._onDidChangeContent.fire(),this.autoDetectLanguage()}updateNameFromFirstLine(i){if(this.hasAssociatedFilePath)return;let e,t=i.getValueInRange({startLineNumber:1,endLineNumber:1,startColumn:1,endColumn:k_.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH+1}).trim().replace(/\s+/g," ").replace(/\u202E/g,"");t=t.substr(0,h5(t,k_.FIRST_LINE_NAME_MAX_LENGTH)[0]),t&&hP().exec(t)&&(e=t),e!==this.cachedModelFirstLineWords&&(this.cachedModelFirstLineWords=e,this._onDidChangeName.fire())}isReadonly(){return!1}};k_=ZLe([yh(5,Ra),yh(6,Zc),yh(7,s6),yh(8,Xg),yh(9,aS),yh(10,cD),yh(11,bu),yh(12,nt),yh(13,CX),yh(14,hf)],k_);var KQ=Object.defineProperty,XLe=Object.getOwnPropertyDescriptor,QLe=(i,e)=>KQ(i,"name",{value:e,configurable:!0}),JLe=(i,e,t,n)=>{for(var s=n>1?void 0:n?XLe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&KQ(e,t,s),s},nU=(i,e)=>(t,n)=>e(t,n,i);const jQ=De("untitledTextEditorService");let Dx=class extends ${constructor(i,e){super(),this.instantiationService=i,this.configurationService=e}static{QLe(this,"UntitledTextEditorService")}static UNTITLED_WITHOUT_ASSOCIATED_RESOURCE_REGEX=/Untitled-\d+/;_onDidChangeDirty=this._register(new x);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeEncoding=this._register(new x);onDidChangeEncoding=this._onDidChangeEncoding.event;_onDidCreate=this._register(new x);onDidCreate=this._onDidCreate.event;_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;_onDidChangeLabel=this._register(new x);onDidChangeLabel=this._onDidChangeLabel.event;mapResourceToModel=new ro;get(i){return this.mapResourceToModel.get(i)}getValue(i){return this.get(i)?.textEditorModel?.getValue()}async resolve(i){const e=this.doCreateOrGet(i);return await e.resolve(),e}create(i){return this.doCreateOrGet(i)}doCreateOrGet(i=Object.create(null)){const e=this.massageOptions(i);return e.untitledResource&&this.mapResourceToModel.has(e.untitledResource)?this.mapResourceToModel.get(e.untitledResource):this.doCreate(e)}massageOptions(i){const e=Object.create(null);if(i.associatedResource?(e.untitledResource=ne.from({scheme:Ve.untitled,authority:i.associatedResource.authority,fragment:i.associatedResource.fragment,path:i.associatedResource.path,query:i.associatedResource.query}),e.associatedResource=i.associatedResource):i.untitledResource?.scheme===Ve.untitled&&(e.untitledResource=i.untitledResource),i.languageId)e.languageId=i.languageId;else if(!e.associatedResource){const t=this.configurationService.getValue();t.files?.defaultLanguage&&(e.languageId=t.files.defaultLanguage)}return e.encoding=i.encoding,e.initialValue=i.initialValue,e}doCreate(i){let e=i.untitledResource;if(!e){let n=1;do e=ne.from({scheme:Ve.untitled,path:`Untitled-${n}`}),n++;while(this.mapResourceToModel.has(e))}const t=this._register(this.instantiationService.createInstance(k_,e,!!i.associatedResource,i.initialValue,i.languageId,i.encoding));return this.registerModel(t),t}registerModel(i){const e=new te;e.add(i.onDidChangeDirty(()=>this._onDidChangeDirty.fire(i))),e.add(i.onDidChangeName(()=>this._onDidChangeLabel.fire(i))),e.add(i.onDidChangeEncoding(()=>this._onDidChangeEncoding.fire(i))),e.add(i.onWillDispose(()=>this._onWillDispose.fire(i))),H.once(i.onWillDispose)(()=>{this.mapResourceToModel.delete(i.resource),e.dispose()}),this.mapResourceToModel.set(i.resource,i),this._onDidCreate.fire(i),i.isDirty()&&this._onDidChangeDirty.fire(i)}isUntitledWithAssociatedResource(i){return i.scheme===Ve.untitled&&i.path.length>1&&!Dx.UNTITLED_WITHOUT_ASSOCIATED_RESOURCE_REGEX.test(i.path)}canDispose(i){return i.isDisposed()?!0:this.doCanDispose(i)}async doCanDispose(i){return i.isDirty()?(await H.toPromise(i.onDidChangeDirty),this.canDispose(i)):!0}};Dx=JLe([nU(0,He),nU(1,Pe)],Dx);Rr(jQ,Dx,Pr.Delayed);var eDe=Object.defineProperty,R6=(i,e)=>eDe(i,"name",{value:e,configurable:!0});const zs=So,fs=De("notificationService");var Ul=(i=>(i[i.DEFAULT=0]="DEFAULT",i[i.SILENT=1]="SILENT",i[i.URGENT=2]="URGENT",i))(Ul||{}),OT=(i=>(i[i.WORKSPACE=0]="WORKSPACE",i[i.PROFILE=1]="PROFILE",i[i.APPLICATION=2]="APPLICATION",i))(OT||{});function NP(i){if(i){const e=i;return typeof e.id=="string"&&typeof e.label=="string"}return!1}R6(NP,"isNotificationSource");var Ci=(i=>(i[i.OFF=0]="OFF",i[i.ERROR=1]="ERROR",i))(Ci||{});class mF{static{R6(this,"NoOpNotification")}progress=new tDe;onDidClose=H.None;onDidChangeVisibility=H.None;updateSeverity(e){}updateMessage(e){}updateActions(e){}close(){}}class tDe{static{R6(this,"NoOpProgress")}infinite(){}done(){}total(e){}worked(e){}}var qQ=Object.defineProperty,iDe=Object.getOwnPropertyDescriptor,sC=(i,e)=>qQ(i,"name",{value:e,configurable:!0}),nDe=(i,e,t,n)=>{for(var s=n>1?void 0:n?iDe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&qQ(e,t,s),s},sDe=(i,e)=>(t,n)=>e(t,n,i);const O6=De("progressService");var M6=(i=>(i[i.Explorer=1]="Explorer",i[i.Scm=3]="Scm",i[i.Extensions=5]="Extensions",i[i.Window=10]="Window",i[i.Notification=15]="Notification",i[i.Dialog=20]="Dialog",i))(M6||{});const oDe=Object.freeze({total(){},worked(){},done(){}});class f$e{constructor(e){this.callback=e}static{sC(this,"Progress")}static None=Object.freeze({report(){}});_value;get value(){return this._value}report(e){this._value=e,this.callback(this._value)}}class p$e{constructor(e){this.callback=e}static{sC(this,"AsyncProgress")}_value;get value(){return this._value}_asyncQueue;_processingAsyncQueue;_drainListener;report(e){this._asyncQueue?this._asyncQueue.push(e):this._asyncQueue=[e],this._processAsyncQueue()}async _processAsyncQueue(){if(!this._processingAsyncQueue)try{for(this._processingAsyncQueue=!0;this._asyncQueue&&this._asyncQueue.length;){const e=this._asyncQueue.shift();this._value=e,await this.callback(this._value)}}finally{this._processingAsyncQueue=!1;const e=this._drainListener;this._drainListener=void 0,e?.()}}drain(){return this._processingAsyncQueue?new Promise(e=>{const t=this._drainListener;this._drainListener=()=>{t?.(),e()}}):Promise.resolve()}}let sU=class extends ${static{sC(this,"UnmanagedProgress")}deferred=new jg;reporter;lastStep;constructor(i,e){super(),e.withProgress(i,t=>(this.reporter=t,this.lastStep&&t.report(this.lastStep),this.deferred.p)),this._register(ye(()=>this.deferred.complete()))}report(i){this.reporter?this.reporter.report(i):this.lastStep=i}};sU=nDe([sDe(1,O6)],sU);class m$e extends ${constructor(e){super(),this.progressIndicator=e}static{sC(this,"LongRunningOperation")}currentOperationId=0;currentOperationDisposables=this._register(new te);currentProgressRunner;currentProgressTimeout;start(e){this.stop();const t=++this.currentOperationId,n=new xr;return this.currentProgressTimeout=setTimeout(()=>{t===this.currentOperationId&&(this.currentProgressRunner=this.progressIndicator.show(!0))},e),this.currentOperationDisposables.add(ye(()=>clearTimeout(this.currentProgressTimeout))),this.currentOperationDisposables.add(ye(()=>n.cancel())),this.currentOperationDisposables.add(ye(()=>this.currentProgressRunner?this.currentProgressRunner.done():void 0)),{id:t,token:n.token,stop:sC(()=>this.doStop(t),"stop"),isCurrent:sC(()=>this.currentOperationId===t,"isCurrent")}}stop(){this.doStop(this.currentOperationId)}doStop(e){this.currentOperationId===e&&this.currentOperationDisposables.clear()}}const YQ=De("editorProgressService");var ZQ=Object.defineProperty,rDe=Object.getOwnPropertyDescriptor,aDe=(i,e)=>ZQ(i,"name",{value:e,configurable:!0}),lDe=(i,e,t,n)=>{for(var s=n>1?void 0:n?rDe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&ZQ(e,t,s),s},oU=(i,e)=>(t,n)=>e(t,n,i);let _F=class extends ${constructor(i,e){super(),this.logService=i,this.configurationService=e}static{aDe(this,"WorkingCopyFileOperationParticipant")}participants=new ru;addFileOperationParticipant(i){const e=this.participants.push(i);return ye(()=>e())}async participate(i,e,t,n){const s=this.configurationService.getValue("files.participants.timeout");if(!(typeof s!="number"||s<=0))for(const o of this.participants)try{await o.participate(i,e,t,s,n)}catch(r){this.logService.warn(r)}}dispose(){this.participants.clear(),super.dispose()}};_F=lDe([oU(0,jo),oU(1,Pe)],_F);var XQ=Object.defineProperty,cDe=Object.getOwnPropertyDescriptor,dDe=(i,e)=>XQ(i,"name",{value:e,configurable:!0}),hDe=(i,e,t,n)=>{for(var s=n>1?void 0:n?cDe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&XQ(e,t,s),s},rU=(i,e)=>(t,n)=>e(t,n,i);let yd=class extends ${constructor(i,e,t,n){super(),this.getExpression=i,this.shouldUpdate=e,this.contextService=t,this.configurationService=n,this.updateExpressions(!1),this.registerListeners()}static{dDe(this,"ResourceGlobMatcher")}static NO_FOLDER=null;_onExpressionChange=this._register(new x);onExpressionChange=this._onExpressionChange.event;mapFolderToParsedExpression=new Map;mapFolderToConfiguredExpression=new Map;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(i=>{this.shouldUpdate(i)&&this.updateExpressions(!0)})),this._register(this.contextService.onDidChangeWorkspaceFolders(()=>this.updateExpressions(!0)))}updateExpressions(i){let e=!1;for(const o of this.contextService.getWorkspace().folders){const r=o.uri.toString(),a=this.doGetExpression(o.uri),l=this.mapFolderToConfiguredExpression.get(r);a?(!l||!lo(l.expression,a.expression))&&(e=!0,this.mapFolderToParsedExpression.set(r,gE(a.expression)),this.mapFolderToConfiguredExpression.set(r,a)):l&&(e=!0,this.mapFolderToParsedExpression.delete(r),this.mapFolderToConfiguredExpression.delete(r))}const t=new xhe(this.contextService.getWorkspace().folders.map(o=>o.uri));for(const[o]of this.mapFolderToConfiguredExpression)o!==yd.NO_FOLDER&&(t.has(ne.parse(o))||(this.mapFolderToParsedExpression.delete(o),this.mapFolderToConfiguredExpression.delete(o),e=!0));const n=this.doGetExpression(void 0),s=this.mapFolderToConfiguredExpression.get(yd.NO_FOLDER);n?(!s||!lo(s.expression,n.expression))&&(e=!0,this.mapFolderToParsedExpression.set(yd.NO_FOLDER,gE(n.expression)),this.mapFolderToConfiguredExpression.set(yd.NO_FOLDER,n)):s&&(e=!0,this.mapFolderToParsedExpression.delete(yd.NO_FOLDER),this.mapFolderToConfiguredExpression.delete(yd.NO_FOLDER)),i&&e&&this._onExpressionChange.fire()}doGetExpression(i){const e=this.getExpression(i);if(!e)return;const t=Object.keys(e);if(t.length===0)return;let n=!1;const s=Object.create(null);for(const o of t){n||(n=SN(o));let r=o;const a=KK(r,!0);if(a){const l=a.toLowerCase();a!==a.toLowerCase()&&(r=`${l}${r.substring(1)}`)}s[r]=e[o]}return{expression:s,hasAbsolutePath:n}}matches(i,e){if(this.mapFolderToParsedExpression.size===0)return!1;const t=this.contextService.getWorkspaceFolder(i);let n,s;if(t&&this.mapFolderToParsedExpression.has(t.uri.toString())?(n=this.mapFolderToParsedExpression.get(t.uri.toString()),s=this.mapFolderToConfiguredExpression.get(t.uri.toString())):(n=this.mapFolderToParsedExpression.get(yd.NO_FOLDER),s=this.mapFolderToConfiguredExpression.get(yd.NO_FOLDER)),!n)return!1;let o;return t?o=ej(t.uri,i):o=this.uriToPath(i),typeof o=="string"&&n(o,void 0,e)?!0:o!==this.uriToPath(i)&&s?.hasAbsolutePath?!!n(this.uriToPath(i),void 0,e):!1}uriToPath(i){return i.scheme===Ve.file?i.fsPath:i.path}};yd=hDe([rU(2,po),rU(3,Pe)],yd);var QQ=Object.defineProperty,uDe=Object.getOwnPropertyDescriptor,gDe=(i,e)=>QQ(i,"name",{value:e,configurable:!0}),fDe=(i,e,t,n)=>{for(var s=n>1?void 0:n?uDe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&QQ(e,t,s),s},xf=(i,e)=>(t,n)=>e(t,n,i);const pDe=new ie("autoSaveAfterShortDelayContext",!1,!0);var bF=(i=>(i[i.OFF=0]="OFF",i[i.AFTER_SHORT_DELAY=1]="AFTER_SHORT_DELAY",i[i.AFTER_LONG_DELAY=2]="AFTER_LONG_DELAY",i[i.ON_FOCUS_CHANGE=3]="ON_FOCUS_CHANGE",i[i.ON_WINDOW_CHANGE=4]="ON_WINDOW_CHANGE",i))(bF||{});const B6=De("filesConfigurationService");let Ec=class extends ${constructor(i,e,t,n,s,o,r,a){super(),this.contextKeyService=i,this.configurationService=e,this.contextService=t,this.environmentService=n,this.uriIdentityService=s,this.fileService=o,this.markerService=r,this.textResourceConfigurationService=a;const l=e.getValue();this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,l.files),this.currentFilesAssociationConfiguration=l?.files?.associations,this.currentHotExitConfiguration=l?.files?.hotExit||MS.ON_EXIT,this.onFilesConfigurationChange(l,!1),this.registerListeners()}static{gDe(this,"FilesConfigurationService")}static DEFAULT_AUTO_SAVE_MODE=ui?Ch.AFTER_DELAY:Ch.OFF;static DEFAULT_AUTO_SAVE_DELAY=1e3;static READONLY_MESSAGES={providerReadonly:{value:g("providerReadonly","Editor is read-only because the file system of the file is read-only."),isTrusted:!0},sessionReadonly:{value:g({key:"sessionReadonly",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because the file was set read-only in this session. [Click here](command:{0}) to set writeable.","workbench.action.files.setActiveEditorWriteableInSession"),isTrusted:!0},configuredReadonly:{value:g({key:"configuredReadonly",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because the file was set read-only via settings. [Click here](command:{0}) to configure or [toggle for this session](command:{1}).",`workbench.action.openSettings?${encodeURIComponent('["files.readonly"]')}`,"workbench.action.files.toggleActiveEditorReadonlyInSession"),isTrusted:!0},fileLocked:{value:g({key:"fileLocked",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because of file permissions. [Click here](command:{0}) to set writeable anyway.","workbench.action.files.setActiveEditorWriteableInSession"),isTrusted:!0},fileReadonly:{value:g("fileReadonly","Editor is read-only because the file is read-only."),isTrusted:!0}};_onDidChangeAutoSaveConfiguration=this._register(new x);onDidChangeAutoSaveConfiguration=this._onDidChangeAutoSaveConfiguration.event;_onDidChangeAutoSaveDisabled=this._register(new x);onDidChangeAutoSaveDisabled=this._onDidChangeAutoSaveDisabled.event;_onDidChangeFilesAssociation=this._register(new x);onDidChangeFilesAssociation=this._onDidChangeFilesAssociation.event;_onDidChangeReadonly=this._register(new x);onDidChangeReadonly=this._onDidChangeReadonly.event;currentGlobalAutoSaveConfiguration;currentFilesAssociationConfiguration;currentHotExitConfiguration;autoSaveConfigurationCache=new Ry(1e3);autoSaveDisabledOverrides=new ro;autoSaveAfterShortDelayContext=pDe.bindTo(this.contextKeyService);readonlyIncludeMatcher=this._register(new jM(()=>this.createReadonlyMatcher(C1e)));readonlyExcludeMatcher=this._register(new jM(()=>this.createReadonlyMatcher(y1e)));configuredReadonlyFromPermissions;sessionReadonlyOverrides=new ro(i=>this.uriIdentityService.extUri.getComparisonKey(i));createReadonlyMatcher(i){const e=this._register(new yd(t=>this.configurationService.getValue(i,{resource:t}),t=>t.affectsConfiguration(i),this.contextService,this.configurationService));return this._register(e.onExpressionChange(()=>this._onDidChangeReadonly.fire())),e}isReadonly(i,e){const t=this.fileService.getProvider(i.scheme);if(t&&_X(t))return t.readOnlyMessage??Ec.READONLY_MESSAGES.providerReadonly;const n=this.sessionReadonlyOverrides.get(i);return typeof n=="boolean"?n===!0?Ec.READONLY_MESSAGES.sessionReadonly:!1:this.uriIdentityService.extUri.isEqualOrParent(i,this.environmentService.userRoamingDataHome)||this.uriIdentityService.extUri.isEqual(i,this.contextService.getWorkspace().configuration??void 0)?!1:this.readonlyIncludeMatcher.value.matches(i)?this.readonlyExcludeMatcher.value.matches(i)?!1:Ec.READONLY_MESSAGES.configuredReadonly:this.configuredReadonlyFromPermissions&&e?.locked?Ec.READONLY_MESSAGES.fileLocked:e?.readonly?Ec.READONLY_MESSAGES.fileReadonly:!1}async updateReadonly(i,e){if(e==="toggle"){let t;try{t=await this.fileService.resolve(i,{resolveMetadata:!0})}catch{}e=!this.isReadonly(i,t)}e==="reset"?this.sessionReadonlyOverrides.delete(i):this.sessionReadonlyOverrides.set(i,e),this._onDidChangeReadonly.fire()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration("files")&&this.onFilesConfigurationChange(this.configurationService.getValue(),!0)}))}onFilesConfigurationChange(i,e){this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,i.files),this.autoSaveConfigurationCache.clear(),this.autoSaveAfterShortDelayContext.set(this.getAutoSaveMode(void 0).mode===1),e&&this._onDidChangeAutoSaveConfiguration.fire();const t=i?.files?.associations;lo(this.currentFilesAssociationConfiguration,t)||(this.currentFilesAssociationConfiguration=t,e&&this._onDidChangeFilesAssociation.fire());const n=i?.files?.hotExit;n===MS.OFF||n===MS.ON_EXIT_AND_WINDOW_CLOSE?this.currentHotExitConfiguration=n:this.currentHotExitConfiguration=MS.ON_EXIT;const s=!!i?.files?.readonlyFromPermissions;s!==!!this.configuredReadonlyFromPermissions&&(this.configuredReadonlyFromPermissions=s,e&&this._onDidChangeReadonly.fire())}getAutoSaveConfiguration(i){const e=this.toResource(i);if(e){let t=this.autoSaveConfigurationCache.get(e);return t||(t=this.computeAutoSaveConfiguration(e,this.textResourceConfigurationService.getValue(e,"files")),this.autoSaveConfigurationCache.set(e,t)),t}return this.currentGlobalAutoSaveConfiguration}computeAutoSaveConfiguration(i,e){let t,n,s,o,r,a;switch(e?.autoSave??Ec.DEFAULT_AUTO_SAVE_MODE){case Ch.AFTER_DELAY:{t="afterDelay",n=typeof e?.autoSaveDelay=="number"&&e.autoSaveDelay>=0?e.autoSaveDelay:Ec.DEFAULT_AUTO_SAVE_DELAY,a=n<=Ec.DEFAULT_AUTO_SAVE_DELAY;break}case Ch.ON_FOCUS_CHANGE:t="onFocusChange";break;case Ch.ON_WINDOW_CHANGE:t="onWindowChange";break}return e?.autoSaveWorkspaceFilesOnly===!0&&(s=!0,i&&!this.contextService.isInsideWorkspace(i)&&(r=!0,a=void 0)),e?.autoSaveWhenNoErrors===!0&&(o=!0,a=void 0),{autoSave:t,autoSaveDelay:n,autoSaveWorkspaceFilesOnly:s,autoSaveWhenNoErrors:o,isOutOfWorkspace:r,isShortAutoSaveDelay:a}}toResource(i){return i instanceof QC?Io.getOriginalUri(i,{supportSideBySide:Is.PRIMARY}):i}hasShortAutoSaveDelay(i){const e=this.toResource(i);return this.getAutoSaveConfiguration(e).isShortAutoSaveDelay?!e||!this.autoSaveDisabledOverrides.has(e):!1}getAutoSaveMode(i,e){const t=this.toResource(i);if(t&&this.autoSaveDisabledOverrides.has(t))return{mode:0,reason:4};const n=this.getAutoSaveConfiguration(t);if(typeof n.autoSave>"u")return{mode:0,reason:1};if(typeof e=="number"&&(n.autoSave==="afterDelay"&&e!==wo.AUTO||n.autoSave==="onFocusChange"&&e!==wo.FOCUS_CHANGE&&e!==wo.WINDOW_CHANGE||n.autoSave==="onWindowChange"&&e!==wo.WINDOW_CHANGE))return{mode:0,reason:1};if(t){if(n.autoSaveWorkspaceFilesOnly&&n.isOutOfWorkspace)return{mode:0,reason:2};if(n.autoSaveWhenNoErrors&&this.markerService.read({resource:t,take:1,severities:pE.Error}).length>0)return{mode:0,reason:3}}switch(n.autoSave){case"afterDelay":return typeof n.autoSaveDelay=="number"&&n.autoSaveDelay<=Ec.DEFAULT_AUTO_SAVE_DELAY?{mode:n.autoSaveWhenNoErrors?2:1}:{mode:2};case"onFocusChange":return{mode:3};case"onWindowChange":return{mode:4}}}async toggleAutoSave(){const i=this.configurationService.getValue("files.autoSave");let e;return[Ch.AFTER_DELAY,Ch.ON_FOCUS_CHANGE,Ch.ON_WINDOW_CHANGE].some(t=>t===i)?e=Ch.OFF:e=Ch.AFTER_DELAY,this.configurationService.updateValue("files.autoSave",e)}disableAutoSave(i){const e=this.toResource(i);if(!e)return $.None;const t=this.autoSaveDisabledOverrides.get(e)??0;return this.autoSaveDisabledOverrides.set(e,t+1),t===0&&this._onDidChangeAutoSaveDisabled.fire(e),ye(()=>{const n=this.autoSaveDisabledOverrides.get(e)??0;n<=1?(this.autoSaveDisabledOverrides.delete(e),this._onDidChangeAutoSaveDisabled.fire(e)):this.autoSaveDisabledOverrides.set(e,n-1)})}get isHotExitEnabled(){return this.contextService.getWorkspace().transient?!1:this.currentHotExitConfiguration!==MS.OFF}get hotExitConfiguration(){return this.currentHotExitConfiguration}preventSaveConflicts(i,e){return this.configurationService.getValue("files.saveConflictResolution",{resource:i,overrideIdentifier:e})!=="overwriteFileOnDisk"}};Ec=fDe([xf(0,Ye),xf(1,Pe),xf(2,po),xf(3,Vy),xf(4,IP),xf(5,la),xf(6,Lye),xf(7,Xg)],Ec);Rr(B6,Ec,Pr.Eager);var JQ=Object.defineProperty,mDe=Object.getOwnPropertyDescriptor,_De=(i,e)=>JQ(i,"name",{value:e,configurable:!0}),bDe=(i,e,t,n)=>{for(var s=n>1?void 0:n?mDe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&JQ(e,t,s),s},vDe=(i,e)=>(t,n)=>e(t,n,i);const eJ=De("workingCopyEditorService");let vF=class extends ${constructor(i){super(),this.editorService=i}static{_De(this,"WorkingCopyEditorService")}_onDidRegisterHandler=this._register(new x);onDidRegisterHandler=this._onDidRegisterHandler.event;handlers=new Set;registerHandler(i){return this.handlers.add(i),this._onDidRegisterHandler.fire(i),ye(()=>this.handlers.delete(i))}findEditor(i){for(const e of this.editorService.getEditors(mn.MOST_RECENTLY_ACTIVE))if(this.isOpen(i,e.editor))return e}isOpen(i,e){for(const t of this.handlers)if(t.isOpen(i,e))return!0;return!1}};vF=bDe([vDe(0,nt)],vF);Rr(eJ,vF,Pr.Delayed);const wDe=De("elevatedFileService");var tJ=Object.defineProperty,CDe=Object.getOwnPropertyDescriptor,yDe=(i,e)=>tJ(i,"name",{value:e,configurable:!0}),SDe=(i,e,t,n)=>{for(var s=n>1?void 0:n?CDe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&tJ(e,t,s),s},EDe=(i,e)=>(t,n)=>e(t,n,i);let wF=class extends ${constructor(i,e){super(),this.resource=i,this.fileService=e,this._register(this.fileService.onDidFilesChange(t=>this.onDidFilesChange(t)))}static{yDe(this,"ResourceWorkingCopy")}_onDidChangeOrphaned=this._register(new x);onDidChangeOrphaned=this._onDidChangeOrphaned.event;orphaned=!1;isOrphaned(){return this.orphaned}async onDidFilesChange(i){let e=!1,t;if(this.orphaned?i.contains(this.resource,qB.ADDED)&&(t=!1,e=!0):i.contains(this.resource,qB.DELETED)&&(t=!0,e=!0),e&&this.orphaned!==t){let n=!1;t&&(await xa(100,Ws.None),this.isDisposed()?n=!0:n=!await this.fileService.exists(this.resource)),this.orphaned!==n&&!this.isDisposed()&&this.setOrphaned(n)}}setOrphaned(i){this.orphaned!==i&&(this.orphaned=i,this._onDidChangeOrphaned.fire())}_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;isDisposed(){return this._store.isDisposed}dispose(){this.orphaned=!1,this._onWillDispose.fire(),super.dispose()}isModified(){return this.isDirty()}};wF=SDe([EDe(1,la)],wF);var CF=(i=>(i[i.Save=1]="Save",i[i.Backup=2]="Backup",i))(CF||{}),iJ=Object.defineProperty,LDe=Object.getOwnPropertyDescriptor,Uu=(i,e)=>iJ(i,"name",{value:e,configurable:!0}),DDe=(i,e,t,n)=>{for(var s=n>1?void 0:n?LDe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&iJ(e,t,s),s},cd=(i,e)=>(t,n)=>e(t,n,i);function IDe(i){return!!i.stat}Uu(IDe,"isStoredFileWorkingCopySaveEvent");let Ix=class extends wF{constructor(i,e,t,n,s,o,r,a,l,c,d,h,u,f,p,m){super(e,o),this.typeId=i,this.name=t,this.modelFactory=n,this.externalResolver=s,this.logService=r,this.workingCopyFileService=a,this.filesConfigurationService=l,this.workingCopyBackupService=c,this.notificationService=h,this.workingCopyEditorService=u,this.editorService=f,this.elevatedFileService=p,this.progressService=m,this._register(d.registerWorkingCopy(this)),this.registerListeners()}static{Uu(this,"StoredFileWorkingCopy")}capabilities=i6.None;_model=void 0;get model(){return this._model}_onDidChangeContent=this._register(new x);onDidChangeContent=this._onDidChangeContent.event;_onDidResolve=this._register(new x);onDidResolve=this._onDidResolve.event;_onDidChangeDirty=this._register(new x);onDidChangeDirty=this._onDidChangeDirty.event;_onDidSaveError=this._register(new x);onDidSaveError=this._onDidSaveError.event;_onDidSave=this._register(new x);onDidSave=this._onDidSave.event;_onDidRevert=this._register(new x);onDidRevert=this._onDidRevert.event;_onDidChangeReadonly=this._register(new x);onDidChangeReadonly=this._onDidChangeReadonly.event;registerListeners(){this._register(this.filesConfigurationService.onDidChangeReadonly(()=>this._onDidChangeReadonly.fire()))}dirty=!1;savedVersionId;isDirty(){return this.dirty}markModified(){this.setDirty(!0)}setDirty(i){if(!this.isResolved())return;const e=this.dirty;this.doSetDirty(i),i!==e&&this._onDidChangeDirty.fire()}doSetDirty(i){const e=this.dirty,t=this.inConflictMode,n=this.inErrorMode,s=this.savedVersionId;return i?this.dirty=!0:(this.dirty=!1,this.inConflictMode=!1,this.inErrorMode=!1,this.isResolved()&&(this.savedVersionId=this.model.versionId)),()=>{this.dirty=e,this.inConflictMode=t,this.inErrorMode=n,this.savedVersionId=s}}lastResolvedFileStat;isResolved(){return!!this.model}async resolve(i){if(this.trace("resolve() - enter"),this.isDisposed()){this.trace("resolve() - exit - without resolving because file working copy is disposed");return}if(!i?.contents&&(this.dirty||this.saveSequentializer.isRunning())){this.trace("resolve() - exit - without resolving because file working copy is dirty or being saved");return}return this.doResolve(i)}async doResolve(i){if(i?.contents)return this.resolveFromBuffer(i.contents);if(!(!this.isResolved()&&await this.resolveFromBackup()))return this.resolveFromFile(i)}async resolveFromBuffer(i){this.trace("resolveFromBuffer()");let e,t,n,s;try{const o=await this.fileService.stat(this.resource);e=o.mtime,t=o.ctime,n=o.size,s=o.etag,this.setOrphaned(!1)}catch(o){e=Date.now(),t=Date.now(),n=0,s=fI,this.setOrphaned(o.fileOperationResult===Sl.FILE_NOT_FOUND)}return this.resolveFromContent({resource:this.resource,name:this.name,mtime:e,ctime:t,size:n,etag:s,value:i,readonly:!1,locked:!1},!0)}async resolveFromBackup(){const i=await this.workingCopyBackupService.resolve(this);return this.isResolved()?(this.trace("resolveFromBackup() - exit - withoutresolving because previously new file working copy got created meanwhile"),!0):i?(await this.doResolveFromBackup(i),!0):!1}async doResolveFromBackup(i){this.trace("doResolveFromBackup()"),await this.resolveFromContent({resource:this.resource,name:this.name,mtime:i.meta?i.meta.mtime:Date.now(),ctime:i.meta?i.meta.ctime:Date.now(),size:i.meta?i.meta.size:0,etag:i.meta?i.meta.etag:fI,value:i.value,readonly:!1,locked:!1},!0),i.meta&&i.meta.orphaned&&this.setOrphaned(!0)}async resolveFromFile(i){this.trace("resolveFromFile()");const e=i?.forceReadFromFile;let t;e?t=fI:this.lastResolvedFileStat&&(t=this.lastResolvedFileStat.etag);const n=this.versionId;try{const s=await this.fileService.readFileStream(this.resource,{etag:t,limits:i?.limits});if(this.setOrphaned(!1),n!==this.versionId){this.trace("resolveFromFile() - exit - without resolving because file working copy content changed");return}await this.resolveFromContent(s,!1)}catch(s){const o=s.fileOperationResult;if(this.setOrphaned(o===Sl.FILE_NOT_FOUND),this.isResolved()&&o===Sl.FILE_NOT_MODIFIED_SINCE){s instanceof v1e&&this.updateLastResolvedFileStat(s.stat);return}if(this.isResolved()&&o===Sl.FILE_NOT_FOUND&&!e)return;throw s}}async resolveFromContent(i,e){if(this.trace("resolveFromContent() - enter"),this.isDisposed()){this.trace("resolveFromContent() - exit - because working copy is disposed");return}this.updateLastResolvedFileStat({resource:this.resource,name:i.name,mtime:i.mtime,ctime:i.ctime,size:i.size,etag:i.etag,readonly:i.readonly,locked:i.locked,isFile:!0,isDirectory:!1,isSymbolicLink:!1,children:void 0}),this.isResolved()?await this.doUpdateModel(i.value):await this.doCreateModel(i.value),this.setDirty(!!e),this._onDidResolve.fire()}async doCreateModel(i){this.trace("doCreateModel()"),this._model=this._register(await this.modelFactory.createModel(this.resource,i,Ws.None)),this.installModelListeners(this._model)}ignoreDirtyOnModelContentChange=!1;async doUpdateModel(i){this.trace("doUpdateModel()"),this.ignoreDirtyOnModelContentChange=!0;try{await this.model?.update(i,Ws.None)}finally{this.ignoreDirtyOnModelContentChange=!1}}installModelListeners(i){this._register(i.onDidChangeContent(e=>this.onModelContentChanged(i,e.isUndoing||e.isRedoing))),this._register(i.onWillDispose(()=>this.dispose()))}onModelContentChanged(i,e){if(this.trace("onModelContentChanged() - enter"),this.versionId++,this.trace(`onModelContentChanged() - new versionId ${this.versionId}`),e&&(this.lastContentChangeFromUndoRedo=Date.now()),!this.ignoreDirtyOnModelContentChange&&!this.isReadonly())if(i.versionId===this.savedVersionId){this.trace("onModelContentChanged() - model content changed back to last saved version");const t=this.dirty;this.setDirty(!1),t&&this._onDidRevert.fire()}else this.trace("onModelContentChanged() - model content changed and marked as dirty"),this.setDirty(!0);this._onDidChangeContent.fire()}async forceResolveFromFile(){this.isDisposed()||await this.externalResolver({forceReadFromFile:!0})}get backupDelay(){return this.model?.configuration?.backupDelay}async backup(i){let e;this.lastResolvedFileStat&&(e={mtime:this.lastResolvedFileStat.mtime,ctime:this.lastResolvedFileStat.ctime,size:this.lastResolvedFileStat.size,etag:this.lastResolvedFileStat.etag,orphaned:this.isOrphaned()});let t;return this.isResolved()&&(t=await WA(this.model.snapshot(CF.Backup,i),i)),{meta:e,content:t}}versionId=0;static UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD=500;lastContentChangeFromUndoRedo=void 0;saveSequentializer=new nj;ignoreSaveFromSaveParticipants=!1;async save(i=Object.create(null)){return this.isResolved()?this.isReadonly()?(this.trace("save() - ignoring request for readonly resource"),!1):(this.hasState(3)||this.hasState(5))&&(i.reason===wo.AUTO||i.reason===wo.FOCUS_CHANGE||i.reason===wo.WINDOW_CHANGE)?(this.trace("save() - ignoring auto save request for file working copy that is in conflict or error"),!1):(this.trace("save() - enter"),await this.doSave(i),this.trace("save() - exit"),this.hasState(0)):!1}async doSave(i){typeof i.reason!="number"&&(i.reason=wo.EXPLICIT);const e=this.versionId;if(this.trace(`doSave(${e}) - enter with versionId ${e}`),this.ignoreSaveFromSaveParticipants){this.trace(`doSave(${e}) - exit - refusing to save() recursively from save participant`);return}if(this.saveSequentializer.isRunning(e))return this.trace(`doSave(${e}) - exit - found a running save for versionId ${e}`),this.saveSequentializer.running;if(!i.force&&!this.dirty){this.trace(`doSave(${e}) - exit - because not dirty and/or versionId is different (this.isDirty: ${this.dirty}, this.versionId: ${this.versionId})`);return}if(this.saveSequentializer.isRunning())return this.trace(`doSave(${e}) - exit - because busy saving`),this.saveSequentializer.cancelRunning(),this.saveSequentializer.queue(()=>this.doSave(i));this.isResolved()&&this.model.pushStackElement();const t=new xr;return this.progressService.withProgress({title:g("saveParticipants","Saving '{0}'",this.name),location:M6.Window,cancellable:!0,delay:this.isDirty()?3e3:5e3},n=>this.doSaveSequential(e,i,n,t),()=>{t.cancel()}).finally(()=>{t.dispose()})}doSaveSequential(i,e,t,n){return this.saveSequentializer.run(i,(async()=>{if(this.isResolved()&&!e.skipSaveParticipants&&this.workingCopyFileService.hasSaveParticipants)try{if(e.reason===wo.AUTO&&typeof this.lastContentChangeFromUndoRedo=="number"){const r=Date.now()-this.lastContentChangeFromUndoRedo;r<Ix.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD&&await xa(Ix.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD-r)}if(!n.token.isCancellationRequested){this.ignoreSaveFromSaveParticipants=!0;try{await this.workingCopyFileService.runSaveParticipants(this,{reason:e.reason??wo.EXPLICIT,savedFrom:e.from},t,n.token)}finally{this.ignoreSaveFromSaveParticipants=!1}}}catch(r){this.logService.error(`[stored file working copy] runSaveParticipants(${i}) - resulted in an error: ${r.toString()}`,this.resource.toString(),this.typeId)}if(n.token.isCancellationRequested||this.isDisposed()||!this.isResolved())return;i=this.versionId,this.inErrorMode=!1,t.report({message:g("saveTextFile","Writing into file...")}),this.trace(`doSave(${i}) - before write()`);const s=pt(this.lastResolvedFileStat),o=this;return this.saveSequentializer.run(i,(async()=>{try{const r={mtime:s.mtime,etag:e.ignoreModifiedSince||!this.filesConfigurationService.preventSaveConflicts(s.resource)?fI:s.etag,unlock:e.writeUnlock};let a;if(typeof o.model.save=="function")try{a=await o.model.save(r,n.token)}catch(l){if(n.token.isCancellationRequested)return;throw l}else{const l=await WA(o.model.snapshot(CF.Save,n.token),n.token);if(n.token.isCancellationRequested)return;n.dispose(),e?.writeElevated&&this.elevatedFileService.isSupported(s.resource)?a=await this.elevatedFileService.writeFileElevated(s.resource,pt(l),r):a=await this.fileService.writeFile(s.resource,pt(l),r)}this.handleSaveSuccess(a,i,e)}catch(r){this.handleSaveError(r,i,e)}})(),()=>n.cancel())})(),()=>n.cancel())}handleSaveSuccess(i,e,t){this.updateLastResolvedFileStat(i),e===this.versionId?(this.trace(`handleSaveSuccess(${e}) - setting dirty to false because versionId did not change`),this.setDirty(!1)):this.trace(`handleSaveSuccess(${e}) - not setting dirty to false because versionId did change meanwhile`),this.setOrphaned(!1),this._onDidSave.fire({reason:t.reason,stat:i,source:t.source})}handleSaveError(i,e,t){if((t.ignoreErrorHandler?this.logService.trace:this.logService.error).apply(this.logService,[`[stored file working copy] handleSaveError(${e}) - exit - resulted in a save error: ${i.toString()}`,this.resource.toString(),this.typeId]),t.ignoreErrorHandler)throw i;this.setDirty(!0),this.inErrorMode=!0,i.fileOperationResult===Sl.FILE_MODIFIED_SINCE&&(this.inConflictMode=!0),this.doHandleSaveError(i,t),this._onDidSaveError.fire()}doHandleSaveError(i,e){const t=i,n=[];let s;if(t.fileOperationResult===Sl.FILE_MODIFIED_SINCE)s=g("staleSaveError","Failed to save '{0}': The content of the file is newer. Do you want to overwrite the file with your changes?",this.name),n.push(Ei({id:"fileWorkingCopy.overwrite",label:g("overwrite","Overwrite"),run:Uu(()=>this.save({...e,ignoreModifiedSince:!0,reason:wo.EXPLICIT}),"run")})),n.push(Ei({id:"fileWorkingCopy.revert",label:g("revert","Revert"),run:Uu(()=>this.revert(),"run")}));else{const a=t.fileOperationResult===Sl.FILE_WRITE_LOCKED,l=a&&t.options?.unlock,c=t.fileOperationResult===Sl.FILE_PERMISSION_DENIED,d=this.elevatedFileService.isSupported(this.resource);iP(i)&&n.push(...i.actions),d&&(c||l)?n.push(Ei({id:"fileWorkingCopy.saveElevated",label:l?Nt?g("overwriteElevated","Overwrite as Admin..."):g("overwriteElevatedSudo","Overwrite as Sudo..."):Nt?g("saveElevated","Retry as Admin..."):g("saveElevatedSudo","Retry as Sudo..."),run:Uu(()=>{this.save({...e,writeElevated:!0,writeUnlock:l,reason:wo.EXPLICIT})},"run")})):a?n.push(Ei({id:"fileWorkingCopy.unlock",label:g("overwrite","Overwrite"),run:Uu(()=>this.save({...e,writeUnlock:!0,reason:wo.EXPLICIT}),"run")})):n.push(Ei({id:"fileWorkingCopy.retry",label:g("retry","Retry"),run:Uu(()=>this.save({...e,reason:wo.EXPLICIT}),"run")})),n.push(Ei({id:"fileWorkingCopy.saveAs",label:g("saveAs","Save As..."),run:Uu(async()=>{const h=this.workingCopyEditorService.findEditor(this);h&&((await this.editorService.save(h,{saveAs:!0,reason:wo.EXPLICIT})).success||this.doHandleSaveError(i,e))},"run")})),n.push(Ei({id:"fileWorkingCopy.revert",label:g("revert","Revert"),run:Uu(()=>this.revert(),"run")})),a?l&&d?s=Nt?g("readonlySaveErrorAdmin","Failed to save '{0}': File is read-only. Select 'Overwrite as Admin' to retry as administrator.",this.name):g("readonlySaveErrorSudo","Failed to save '{0}': File is read-only. Select 'Overwrite as Sudo' to retry as superuser.",this.name):s=g("readonlySaveError","Failed to save '{0}': File is read-only. Select 'Overwrite' to attempt to make it writeable.",this.name):d&&c?s=Nt?g("permissionDeniedSaveError","Failed to save '{0}': Insufficient permissions. Select 'Retry as Admin' to retry as administrator.",this.name):g("permissionDeniedSaveErrorSudo","Failed to save '{0}': Insufficient permissions. Select 'Retry as Sudo' to retry as superuser.",this.name):s=g({key:"genericSaveError",comment:["{0} is the resource that failed to save and {1} the error message"]},"Failed to save '{0}': {1}",this.name,hh(i,!1))}const o=this.notificationService.notify({id:`${Jd(this.resource.toString())}`,severity:zs.Error,message:s,actions:{primary:n}}),r=this._register(H.once(H.any(this.onDidSave,this.onDidRevert))(()=>o.close()));this._register(H.once(o.onDidClose)(()=>r.dispose()))}updateLastResolvedFileStat(i){const e=this.isReadonly();this.lastResolvedFileStat?this.lastResolvedFileStat.mtime<=i.mtime?this.lastResolvedFileStat=i:this.lastResolvedFileStat={...this.lastResolvedFileStat,readonly:i.readonly,locked:i.locked}:this.lastResolvedFileStat=i,this.isReadonly()!==e&&this._onDidChangeReadonly.fire()}async revert(i){if(!this.isResolved()||!this.dirty&&!i?.force)return;this.trace("revert()");const e=this.dirty,t=this.doSetDirty(!1);if(!i?.soft)try{await this.forceResolveFromFile()}catch(s){if(s.fileOperationResult!==Sl.FILE_NOT_FOUND)throw t(),s}this._onDidRevert.fire(),e&&this._onDidChangeDirty.fire()}inConflictMode=!1;inErrorMode=!1;hasState(i){switch(i){case 3:return this.inConflictMode;case 1:return this.dirty;case 5:return this.inErrorMode;case 4:return this.isOrphaned();case 2:return this.saveSequentializer.isRunning();case 0:return!this.dirty}}async joinState(i){return this.saveSequentializer.running}isReadonly(){return this.filesConfigurationService.isReadonly(this.resource,this.lastResolvedFileStat)}trace(i){this.logService.trace(`[stored file working copy] ${i}`,this.resource.toString(),this.typeId)}dispose(){this.trace("dispose()"),this.inConflictMode=!1,this.inErrorMode=!1,this._model=void 0,super.dispose()}};Ix=DDe([cd(5,la),cd(6,jo),cd(7,oJ),cd(8,B6),cd(9,s6),cd(10,aS),cd(11,fs),cd(12,eJ),cd(13,nt),cd(14,wDe),cd(15,O6)],Ix);var nJ=Object.defineProperty,TDe=Object.getOwnPropertyDescriptor,ADe=(i,e)=>nJ(i,"name",{value:e,configurable:!0}),xDe=(i,e,t,n)=>{for(var s=n>1?void 0:n?TDe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&nJ(e,t,s),s},kDe=(i,e)=>(t,n)=>e(t,n,i);let yF=class extends ${constructor(i){super(),this.logService=i}static{ADe(this,"StoredFileWorkingCopySaveParticipant")}saveParticipants=[];get length(){return this.saveParticipants.length}addSaveParticipant(i){const e=CN(this.saveParticipants,i);return ye(()=>e())}async participate(i,e,t,n){i.model?.pushStackElement();for(const s of this.saveParticipants){if(n.isCancellationRequested||i.isDisposed())break;try{const o=s.participate(i,e,t,n);await WA(o,n)}catch(o){this.logService.warn(o)}}i.model?.pushStackElement()}dispose(){this.saveParticipants.splice(0,this.saveParticipants.length),super.dispose()}};yF=xDe([kDe(0,jo)],yF);var sJ=Object.defineProperty,NDe=Object.getOwnPropertyDescriptor,PDe=(i,e)=>sJ(i,"name",{value:e,configurable:!0}),RDe=(i,e,t,n)=>{for(var s=n>1?void 0:n?NDe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&sJ(e,t,s),s},yI=(i,e)=>(t,n)=>e(t,n,i);const oJ=De("workingCopyFileService");let SF=class extends ${constructor(i,e,t,n){super(),this.fileService=i,this.workingCopyService=e,this.instantiationService=t,this.uriIdentityService=n,this._register(this.registerWorkingCopyProvider(s=>this.workingCopyService.workingCopies.filter(o=>this.fileService.hasProvider(s)?this.uriIdentityService.extUri.isEqualOrParent(o.resource,s):this.uriIdentityService.extUri.isEqual(o.resource,s))))}static{PDe(this,"WorkingCopyFileService")}_onWillRunWorkingCopyFileOperation=this._register(new hO);onWillRunWorkingCopyFileOperation=this._onWillRunWorkingCopyFileOperation.event;_onDidFailWorkingCopyFileOperation=this._register(new hO);onDidFailWorkingCopyFileOperation=this._onDidFailWorkingCopyFileOperation.event;_onDidRunWorkingCopyFileOperation=this._register(new hO);onDidRunWorkingCopyFileOperation=this._onDidRunWorkingCopyFileOperation.event;correlationIds=0;create(i,e,t){return this.doCreateFileOrFolder(i,!0,e,t)}createFolder(i,e,t){return this.doCreateFileOrFolder(i,!1,e,t)}async doCreateFileOrFolder(i,e,t,n){if(i.length===0)return[];if(e){const l=(await Ka.settled(i.map(c=>this.fileService.canCreateFile(c.resource,{overwrite:c.overwrite})))).find(c=>c instanceof Error);if(l instanceof Error)throw l}const s=i.map(a=>({target:a.resource}));await this.runFileOperationParticipants(s,Wu.CREATE,n,t);const o={correlationId:this.correlationIds++,operation:Wu.CREATE,files:s};await this._onWillRunWorkingCopyFileOperation.fireAsync(o,Ws.None);let r;try{e?r=await Ka.settled(i.map(a=>this.fileService.createFile(a.resource,a.contents,{overwrite:a.overwrite}))):r=await Ka.settled(i.map(a=>this.fileService.createFolder(a.resource)))}catch(a){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(o,Ws.None),a}return await this._onDidRunWorkingCopyFileOperation.fireAsync(o,Ws.None),r}async move(i,e,t){return this.doMoveOrCopy(i,!0,e,t)}async copy(i,e,t){return this.doMoveOrCopy(i,!1,e,t)}async doMoveOrCopy(i,e,t,n){const s=[];for(const{file:{source:a,target:l},overwrite:c}of i){const d=await (e?this.fileService.canMove(a,l,c):this.fileService.canCopy(a,l,c));if(d instanceof Error)throw d}const o=i.map(a=>a.file);await this.runFileOperationParticipants(o,e?Wu.MOVE:Wu.COPY,n,t);const r={correlationId:this.correlationIds++,operation:e?Wu.MOVE:Wu.COPY,files:o};await this._onWillRunWorkingCopyFileOperation.fireAsync(r,Ws.None);try{for(const{file:{source:a,target:l},overwrite:c}of i){if(!this.uriIdentityService.extUri.isEqual(a,l)){const d=e?[...this.getDirty(a),...this.getDirty(l)]:this.getDirty(l);await Ka.settled(d.map(h=>h.revert({soft:!0})))}e?s.push(await this.fileService.move(a,l,c)):s.push(await this.fileService.copy(a,l,c))}}catch(a){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(r,Ws.None),a}return await this._onDidRunWorkingCopyFileOperation.fireAsync(r,Ws.None),s}async delete(i,e,t){for(const o of i){const r=await this.fileService.canDelete(o.resource,{recursive:o.recursive,useTrash:o.useTrash});if(r instanceof Error)throw r}const n=i.map(o=>({target:o.resource}));await this.runFileOperationParticipants(n,Wu.DELETE,t,e);const s={correlationId:this.correlationIds++,operation:Wu.DELETE,files:n};await this._onWillRunWorkingCopyFileOperation.fireAsync(s,Ws.None);for(const o of i){const r=this.getDirty(o.resource);await Ka.settled(r.map(a=>a.revert({soft:!0})))}try{for(const o of i)await this.fileService.del(o.resource,{recursive:o.recursive,useTrash:o.useTrash})}catch(o){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(s,Ws.None),o}await this._onDidRunWorkingCopyFileOperation.fireAsync(s,Ws.None)}fileOperationParticipants=this._register(this.instantiationService.createInstance(_F));addFileOperationParticipant(i){return this.fileOperationParticipants.addFileOperationParticipant(i)}runFileOperationParticipants(i,e,t,n){return this.fileOperationParticipants.participate(i,e,t,n)}saveParticipants=this._register(this.instantiationService.createInstance(yF));get hasSaveParticipants(){return this.saveParticipants.length>0}addSaveParticipant(i){return this.saveParticipants.addSaveParticipant(i)}runSaveParticipants(i,e,t,n){return this.saveParticipants.participate(i,e,t,n)}workingCopyProviders=[];registerWorkingCopyProvider(i){const e=CN(this.workingCopyProviders,i);return ye(e)}getDirty(i){const e=new Set;for(const t of this.workingCopyProviders)for(const n of t(i))n.isDirty()&&e.add(n);return Array.from(e)}};SF=RDe([yI(0,la),yI(1,aS),yI(2,He),yI(3,IP)],SF);Rr(oJ,SF,Pr.Delayed);var ODe=Object.defineProperty,dS=(i,e)=>ODe(i,"name",{value:e,configurable:!0});const cD=De("textFileService");var rJ=(i=>(i[i.FILE_IS_BINARY=0]="FILE_IS_BINARY",i))(rJ||{});class _$e extends vP{constructor(e,t,n){super(e,Sl.FILE_OTHER_ERROR),this.textFileOperationResult=t,this.options=n}static{dS(this,"TextFileOperationError")}static isTextFileOperationError(e){return e instanceof Error&&!Ls(e.textFileOperationResult)}options}function MDe(i){const e=i;return K$(e.setEncoding,e.getEncoding,e.save,e.revert,e.isDirty,e.getLanguageId)}dS(MDe,"isTextFileEditorModel");function BDe(i){const e=[];let t;for(;typeof(t=i.read())=="string";)e.push(t);return e.join("")}dS(BDe,"snapshotToString");function FDe(i){let e=!1;return{read(){return e?null:(e=!0,i)}}}dS(FDe,"stringToSnapshot");function VDe(i){if(!(typeof i>"u"))return typeof i=="string"?mt.fromString(i):{read:dS(()=>{const e=i.read();return typeof e=="string"?mt.fromString(e):null},"read")}}dS(VDe,"toBufferOrReadable");var WDe=Object.defineProperty,aJ=(i,e)=>WDe(i,"name",{value:e,configurable:!0});class b$e{static{aJ(this,"ResolvedKeybindingItem")}_resolvedKeybindingItemBrand=void 0;resolvedKeybinding;chords;bubble;command;commandArgs;when;isDefault;extensionId;isBuiltinExtension;constructor(e,t,n,s,o,r,a){this.resolvedKeybinding=e,this.chords=e?EF(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=EF(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===A.Caret:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=s,this.isDefault=o,this.extensionId=r,this.isBuiltinExtension=a}}function EF(i){const e=[];for(let t=0,n=i.length;t<n;t++){const s=i[t];if(!s)return[];e.push(s)}return e}aJ(EF,"toEmptyArrayIfContainsNull");var HDe=Object.defineProperty,dt=(i,e)=>HDe(i,"name",{value:e,configurable:!0}),lJ=(i=>(i[i.None=0]="None",i[i.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",i[i.UnexpectedEndOfString=2]="UnexpectedEndOfString",i[i.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",i[i.InvalidUnicode=4]="InvalidUnicode",i[i.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",i[i.InvalidCharacter=6]="InvalidCharacter",i))(lJ||{}),Pi=(i=>(i[i.OpenBraceToken=1]="OpenBraceToken",i[i.CloseBraceToken=2]="CloseBraceToken",i[i.OpenBracketToken=3]="OpenBracketToken",i[i.CloseBracketToken=4]="CloseBracketToken",i[i.CommaToken=5]="CommaToken",i[i.ColonToken=6]="ColonToken",i[i.NullKeyword=7]="NullKeyword",i[i.TrueKeyword=8]="TrueKeyword",i[i.FalseKeyword=9]="FalseKeyword",i[i.StringLiteral=10]="StringLiteral",i[i.NumericLiteral=11]="NumericLiteral",i[i.LineCommentTrivia=12]="LineCommentTrivia",i[i.BlockCommentTrivia=13]="BlockCommentTrivia",i[i.LineBreakTrivia=14]="LineBreakTrivia",i[i.Trivia=15]="Trivia",i[i.Unknown=16]="Unknown",i[i.EOF=17]="EOF",i))(Pi||{}),TE;(i=>{i.DEFAULT={allowTrailingComma:!0}})(TE||(TE={}));function F6(i,e=!1){let t=0;const n=i.length;let s="",o=0,r=16,a=0;function l(m){let _=0,w=0;for(;_<m;){const v=i.charCodeAt(t);if(v>=48&&v<=57)w=w*16+v-48;else if(v>=65&&v<=70)w=w*16+v-65+10;else if(v>=97&&v<=102)w=w*16+v-97+10;else break;t++,_++}return _<m&&(w=-1),w}dt(l,"scanHexDigits");function c(m){t=m,s="",o=0,r=16,a=0}dt(c,"setPosition");function d(){const m=t;if(i.charCodeAt(t)===48)t++;else for(t++;t<i.length&&qm(i.charCodeAt(t));)t++;if(t<i.length&&i.charCodeAt(t)===46)if(t++,t<i.length&&qm(i.charCodeAt(t)))for(t++;t<i.length&&qm(i.charCodeAt(t));)t++;else return a=3,i.substring(m,t);let _=t;if(t<i.length&&(i.charCodeAt(t)===69||i.charCodeAt(t)===101))if(t++,(t<i.length&&i.charCodeAt(t)===43||i.charCodeAt(t)===45)&&t++,t<i.length&&qm(i.charCodeAt(t))){for(t++;t<i.length&&qm(i.charCodeAt(t));)t++;_=t}else a=3;return i.substring(m,_)}dt(d,"scanNumber");function h(){let m="",_=t;for(;;){if(t>=n){m+=i.substring(_,t),a=2;break}const w=i.charCodeAt(t);if(w===34){m+=i.substring(_,t),t++;break}if(w===92){if(m+=i.substring(_,t),t++,t>=n){a=2;break}switch(i.charCodeAt(t++)){case 34:m+='"';break;case 92:m+="\\";break;case 47:m+="/";break;case 98:m+="\b";break;case 102:m+="\f";break;case 110:m+=`
`;break;case 114:m+="\r";break;case 116:m+="	";break;case 117:{const b=l(4);b>=0?m+=String.fromCharCode(b):a=4;break}default:a=5}_=t;continue}if(w>=0&&w<=31)if(y1(w)){m+=i.substring(_,t),a=2;break}else a=6;t++}return m}dt(h,"scanString");function u(){if(s="",a=0,o=t,t>=n)return o=n,r=17;let m=i.charCodeAt(t);if(MT(m)){do t++,s+=String.fromCharCode(m),m=i.charCodeAt(t);while(MT(m));return r=15}if(y1(m))return t++,s+=String.fromCharCode(m),m===13&&i.charCodeAt(t)===10&&(t++,s+=`
`),r=14;switch(m){case 123:return t++,r=1;case 125:return t++,r=2;case 91:return t++,r=3;case 93:return t++,r=4;case 58:return t++,r=6;case 44:return t++,r=5;case 34:return t++,s=h(),r=10;case 47:{const _=t-1;if(i.charCodeAt(t+1)===47){for(t+=2;t<n&&!y1(i.charCodeAt(t));)t++;return s=i.substring(_,t),r=12}if(i.charCodeAt(t+1)===42){t+=2;const w=n-1;let v=!1;for(;t<w;){if(i.charCodeAt(t)===42&&i.charCodeAt(t+1)===47){t+=2,v=!0;break}t++}return v||(t++,a=1),s=i.substring(_,t),r=13}return s+=String.fromCharCode(m),t++,r=16}case 45:if(s+=String.fromCharCode(m),t++,t===n||!qm(i.charCodeAt(t)))return r=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=d(),r=11;default:for(;t<n&&f(m);)t++,m=i.charCodeAt(t);if(o!==t){switch(s=i.substring(o,t),s){case"true":return r=8;case"false":return r=9;case"null":return r=7}return r=16}return s+=String.fromCharCode(m),t++,r=16}}dt(u,"scanNext");function f(m){if(MT(m)||y1(m))return!1;switch(m){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}dt(f,"isUnknownContentCharacter");function p(){let m;do m=u();while(m>=12&&m<=15);return m}return dt(p,"scanNextNonTrivia"),{setPosition:c,getPosition:dt(()=>t,"getPosition"),scan:e?p:u,getToken:dt(()=>r,"getToken"),getTokenValue:dt(()=>s,"getTokenValue"),getTokenOffset:dt(()=>o,"getTokenOffset"),getTokenLength:dt(()=>t-o,"getTokenLength"),getTokenError:dt(()=>a,"getTokenError")}}dt(F6,"createScanner");function MT(i){return i===32||i===9||i===11||i===12||i===160||i===5760||i>=8192&&i<=8203||i===8239||i===8287||i===12288||i===65279}dt(MT,"isWhitespace");function y1(i){return i===10||i===13||i===8232||i===8233}dt(y1,"isLineBreak");function qm(i){return i>=48&&i<=57}dt(qm,"isDigit");function UDe(i,e){const t=[],n=new Object;let s;const o={value:{},offset:0,length:0,type:"object",parent:void 0};let r=!1;function a(l,c,d,h){o.value=l,o.offset=c,o.length=d,o.type=h,o.colonOffset=void 0,s=o}dt(a,"setPreviousNode");try{dD(i,{onObjectBegin:dt((l,c)=>{if(e<=l)throw n;s=void 0,r=e>l,t.push("")},"onObjectBegin"),onObjectProperty:dt((l,c,d)=>{if(e<c||(a(l,c,d,"property"),t[t.length-1]=l,e<=c+d))throw n},"onObjectProperty"),onObjectEnd:dt((l,c)=>{if(e<=l)throw n;s=void 0,t.pop()},"onObjectEnd"),onArrayBegin:dt((l,c)=>{if(e<=l)throw n;s=void 0,t.push(0)},"onArrayBegin"),onArrayEnd:dt((l,c)=>{if(e<=l)throw n;s=void 0,t.pop()},"onArrayEnd"),onLiteralValue:dt((l,c,d)=>{if(e<c||(a(l,c,d,V6(l)),e<=c+d))throw n},"onLiteralValue"),onSeparator:dt((l,c,d)=>{if(e<=c)throw n;if(l===":"&&s&&s.type==="property")s.colonOffset=c,r=!1,s=void 0;else if(l===","){const h=t[t.length-1];typeof h=="number"?t[t.length-1]=h+1:(r=!0,t[t.length-1]=""),s=void 0}},"onSeparator")})}catch(l){if(l!==n)throw l}return{path:t,previousNode:s,isAtPropertyKey:r,matches:dt(l=>{let c=0;for(let d=0;c<l.length&&d<t.length;d++)if(l[c]===t[d]||l[c]==="*")c++;else if(l[c]!=="**")return!1;return c===l.length},"matches")}}dt(UDe,"getLocation");function cJ(i,e=[],t=TE.DEFAULT){let n=null,s=[];const o=[];function r(l){Array.isArray(s)?s.push(l):n!==null&&(s[n]=l)}return dt(r,"onValue"),dD(i,{onObjectBegin:dt(()=>{const l={};r(l),o.push(s),s=l,n=null},"onObjectBegin"),onObjectProperty:dt(l=>{n=l},"onObjectProperty"),onObjectEnd:dt(()=>{s=o.pop()},"onObjectEnd"),onArrayBegin:dt(()=>{const l=[];r(l),o.push(s),s=l,n=null},"onArrayBegin"),onArrayEnd:dt(()=>{s=o.pop()},"onArrayEnd"),onLiteralValue:r,onError:dt((l,c,d)=>{e.push({error:l,offset:c,length:d})},"onError")},t),s[0]}dt(cJ,"parse");function dJ(i,e=[],t=TE.DEFAULT){let n={type:"array",offset:-1,length:-1,children:[],parent:void 0};function s(l){n.type==="property"&&(n.length=l-n.offset,n=n.parent)}dt(s,"ensurePropertyComplete");function o(l){return n.children.push(l),l}dt(o,"onValue"),dD(i,{onObjectBegin:dt(l=>{n=o({type:"object",offset:l,length:-1,parent:n,children:[]})},"onObjectBegin"),onObjectProperty:dt((l,c,d)=>{n=o({type:"property",offset:c,length:-1,parent:n,children:[]}),n.children.push({type:"string",value:l,offset:c,length:d,parent:n})},"onObjectProperty"),onObjectEnd:dt((l,c)=>{n.length=l+c-n.offset,n=n.parent,s(l+c)},"onObjectEnd"),onArrayBegin:dt((l,c)=>{n=o({type:"array",offset:l,length:-1,parent:n,children:[]})},"onArrayBegin"),onArrayEnd:dt((l,c)=>{n.length=l+c-n.offset,n=n.parent,s(l+c)},"onArrayEnd"),onLiteralValue:dt((l,c,d)=>{o({type:V6(l),offset:c,length:d,parent:n,value:l}),s(c+d)},"onLiteralValue"),onSeparator:dt((l,c,d)=>{n.type==="property"&&(l===":"?n.colonOffset=c:l===","&&s(c))},"onSeparator"),onError:dt((l,c,d)=>{e.push({error:l,offset:c,length:d})},"onError")},t);const a=n.children[0];return a&&delete a.parent,a}dt(dJ,"parseTree");function LF(i,e){if(!i)return;let t=i;for(const n of e)if(typeof n=="string"){if(t.type!=="object"||!Array.isArray(t.children))return;let s=!1;for(const o of t.children)if(Array.isArray(o.children)&&o.children[0].value===n){t=o.children[1],s=!0;break}if(!s)return}else{const s=n;if(t.type!=="array"||s<0||!Array.isArray(t.children)||s>=t.children.length)return;t=t.children[s]}return t}dt(LF,"findNodeAtLocation");function hJ(i){if(!i.parent||!i.parent.children)return[];const e=hJ(i.parent);if(i.parent.type==="property"){const t=i.parent.children[0].value;e.push(t)}else if(i.parent.type==="array"){const t=i.parent.children.indexOf(i);t!==-1&&e.push(t)}return e}dt(hJ,"getNodePath");function DF(i){switch(i.type){case"array":return i.children.map(DF);case"object":{const e=Object.create(null);for(const t of i.children){const n=t.children[1];n&&(e[t.children[0].value]=DF(n))}return e}case"null":case"string":case"number":case"boolean":return i.value;default:return}}dt(DF,"getNodeValue");function uJ(i,e,t=!1){return e>=i.offset&&e<i.offset+i.length||t&&e===i.offset+i.length}dt(uJ,"contains");function gJ(i,e,t=!1){if(uJ(i,e,t)){const n=i.children;if(Array.isArray(n))for(let s=0;s<n.length&&n[s].offset<=e;s++){const o=gJ(n[s],e,t);if(o)return o}return i}}dt(gJ,"findNodeAtOffset");function dD(i,e,t=TE.DEFAULT){const n=F6(i,!1);function s(R){return R?()=>R(n.getTokenOffset(),n.getTokenLength()):()=>!0}dt(s,"toNoArgVisit");function o(R){return R?G=>R(G,n.getTokenOffset(),n.getTokenLength()):()=>!0}dt(o,"toOneArgVisit");const r=s(e.onObjectBegin),a=o(e.onObjectProperty),l=s(e.onObjectEnd),c=s(e.onArrayBegin),d=s(e.onArrayEnd),h=o(e.onLiteralValue),u=o(e.onSeparator),f=s(e.onComment),p=o(e.onError),m=t&&t.disallowComments,_=t&&t.allowTrailingComma;function w(){for(;;){const R=n.scan();switch(n.getTokenError()){case 4:v(14);break;case 5:v(15);break;case 3:v(13);break;case 1:m||v(11);break;case 2:v(12);break;case 6:v(16);break}switch(R){case 12:case 13:m?v(10):f();break;case 16:v(1);break;case 15:case 14:break;default:return R}}}dt(w,"scanNext");function v(R,G=[],K=[]){if(p(R),G.length+K.length>0){let X=n.getToken();for(;X!==17;){if(G.indexOf(X)!==-1){w();break}else if(K.indexOf(X)!==-1)break;X=w()}}}dt(v,"handleError");function b(R){const G=n.getTokenValue();return R?h(G):a(G),w(),!0}dt(b,"parseString");function C(){switch(n.getToken()){case 11:{let R=0;try{R=JSON.parse(n.getTokenValue()),typeof R!="number"&&(v(2),R=0)}catch{v(2)}h(R);break}case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return w(),!0}dt(C,"parseLiteral");function S(){return n.getToken()!==10?(v(3,[],[2,5]),!1):(b(!1),n.getToken()===6?(u(":"),w(),I()||v(4,[],[2,5])):v(5,[],[2,5]),!0)}dt(S,"parseProperty");function D(){r(),w();let R=!1;for(;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(R||v(4,[],[]),u(","),w(),n.getToken()===2&&_)break}else R&&v(6,[],[]);S()||v(4,[],[2,5]),R=!0}return l(),n.getToken()!==2?v(7,[2],[]):w(),!0}dt(D,"parseObject");function T(){c(),w();let R=!1;for(;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(R||v(4,[],[]),u(","),w(),n.getToken()===4&&_)break}else R&&v(6,[],[]);I()||v(4,[],[4,5]),R=!0}return d(),n.getToken()!==4?v(8,[4],[]):w(),!0}dt(T,"parseArray");function I(){switch(n.getToken()){case 3:return T();case 1:return D();case 10:return b(!0);default:return C()}}return dt(I,"parseValue"),w(),n.getToken()===17?t.allowEmptyContent?!0:(v(4,[],[]),!1):I()?(n.getToken()!==17&&v(9,[],[]),!0):(v(4,[],[]),!1)}dt(dD,"visit");function V6(i){switch(typeof i){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(i){if(Array.isArray(i))return"array"}else return"null";return"object"}default:return"null"}}dt(V6,"getNodeType");var zDe=Object.defineProperty,PP=(i,e)=>zDe(i,"name",{value:e,configurable:!0}),IF=(i=>(i[i.NoMatchingKb=0]="NoMatchingKb",i[i.MoreChordsNeeded=1]="MoreChordsNeeded",i[i.KbFound=2]="KbFound",i))(IF||{});const aU={kind:0},$De={kind:1};function fJ(i,e,t){return{kind:2,commandId:i,commandArgs:e,isBubble:t}}PP(fJ,"KbFound");class BT{static{PP(this,"KeybindingResolver")}_log;_defaultKeybindings;_keybindings;_defaultBoundCommands;_map;_lookupMap;constructor(e,t,n){this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const s of e){const o=s.command;o&&o.charAt(0)!=="-"&&this._defaultBoundCommands.set(o,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=BT.handleRemovals([].concat(e).concat(t));for(let s=0,o=this._keybindings.length;s<o;s++){const r=this._keybindings[s];if(r.chords.length===0)continue;const a=r.when?.substituteConstants();a&&a.type===l1.False||this._addKeyPress(r.chords[0],r)}}static _isTargetedForRemoval(e,t,n){if(t){for(let s=0;s<t.length;s++)if(t[s]!==e.chords[s])return!1}return!(n&&n.type!==l1.True&&(!e.when||!Zq(n,e.when)))}static handleRemovals(e){const t=new Map;for(let s=0,o=e.length;s<o;s++){const r=e[s];if(r.command&&r.command.charAt(0)==="-"){const a=r.command.substring(1);t.has(a)?t.get(a).push(r):t.set(a,[r])}}if(t.size===0)return e;const n=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];if(!r.command||r.command.length===0){n.push(r);continue}if(r.command.charAt(0)==="-")continue;const a=t.get(r.command);if(!a||!r.isDefault){n.push(r);continue}let l=!1;for(const c of a){const d=c.when;if(this._isTargetedForRemoval(r,c.chords,d)){l=!0;break}}if(!l){n.push(r);continue}}return n}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let s=n.length-1;s>=0;s--){const o=n[s];if(o.command===t.command)continue;let r=!0;for(let a=1;a<o.chords.length&&a<t.chords.length;a++)if(o.chords[a]!==t.chords[a]){r=!1;break}r&&BT.whenIsEntirelyIncluded(o.when,t.when)&&this._removeFromLookupMap(o)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,s=t.length;n<s;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===l1.True?!0:!e||e.type===l1.True?!1:tx(e,t)}getDefaultBoundCommands(){return this._defaultBoundCommands}getDefaultKeybindings(){return this._defaultKeybindings}getKeybindings(){return this._keybindings}lookupKeybindings(e){const t=this._lookupMap.get(e);if(typeof t>"u"||t.length===0)return[];const n=[];let s=0;for(let o=t.length-1;o>=0;o--)n[s++]=t[o];return n}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let s=n.length-1;s>=0;s--){const o=n[s];if(t.contextMatchesRules(o.when))return o}return n[n.length-1]}resolve(e,t,n){const s=[...t,n];this._log(`| Resolving ${s}`);const o=this._map.get(s[0]);if(o===void 0)return this._log("\\ No keybinding entries."),aU;let r=null;if(s.length<2)r=o;else{r=[];for(let l=0,c=o.length;l<c;l++){const d=o[l];if(s.length>d.chords.length)continue;let h=!0;for(let u=1;u<s.length;u++)if(d.chords[u]!==s[u]){h=!1;break}h&&r.push(d)}}const a=this._findCommand(e,r);return a?s.length<a.chords.length?(this._log(`\\ From ${r.length} keybinding entries, awaiting ${a.chords.length-s.length} more chord(s), when: ${TF(a.when)}, source: ${AF(a)}.`),$De):(this._log(`\\ From ${r.length} keybinding entries, matched ${a.command}, when: ${TF(a.when)}, source: ${AF(a)}.`),fJ(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${r.length} keybinding entries, no when clauses matched the context.`),aU)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){const s=t[n];if(BT._contextMatchesRules(e,s.when))return s}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function TF(i){return i?`${i.serialize()}`:"no when condition"}PP(TF,"printWhenExplanation");function AF(i){return i.extensionId?i.isBuiltinExtension?`built-in extension ${i.extensionId}`:`user extension ${i.extensionId}`:i.isDefault?"built-in":"user"}PP(AF,"printSourceExplanation");const ni=De("keybindingService"),pJ=".vscode";vt.APPLICATION;vt.MACHINE,vt.WINDOW,vt.RESOURCE,vt.LANGUAGE_OVERRIDABLE,vt.MACHINE_OVERRIDABLE;const GDe=[vt.WINDOW,vt.RESOURCE,vt.LANGUAGE_OVERRIDABLE];[vt.APPLICATION,...GDe];vt.MACHINE,vt.WINDOW,vt.RESOURCE,vt.LANGUAGE_OVERRIDABLE,vt.MACHINE_OVERRIDABLE;const KDe=[vt.WINDOW,vt.RESOURCE,vt.LANGUAGE_OVERRIDABLE,vt.MACHINE_OVERRIDABLE],jDe=[vt.RESOURCE,vt.LANGUAGE_OVERRIDABLE,vt.MACHINE_OVERRIDABLE],Tx="tasks",lU="launch",mJ=Object.create(null);mJ[Tx]=`${pJ}/${Tx}.json`;mJ[lU]=`${pJ}/${lU}.json`;const qDe=Object.create(null);qDe[Tx]=`${Tx}.json`;var YDe=Object.defineProperty,Xn=(i,e)=>YDe(i,"name",{value:e,configurable:!0});function lb(i,...e){return e.some(t=>i.includes(t))}Xn(lb,"canBeType");function xF(i){return i===""||Ls(i)}Xn(xF,"isNullOrEmpty");function W6(i){const e=Array.isArray(i.type)?i.type:[i.type],t=lb(e,"null"),n=(lb(e,"number")||lb(e,"integer"))&&(e.length===1||e.length===2&&t),s=vJ(i),o=bJ(i),r=wJ(i),a=CJ(i);return l=>{if(t&&xF(l))return"";const c=[];if(r){const d=r(l);d&&c.push(d)}if(a){const d=a(l);d&&c.push(d)}return i.type==="boolean"&&l!==!0&&l!==!1&&c.push(g("validations.booleanIncorrectType",'Incorrect type. Expected "boolean".')),n&&(xF(l)||typeof l=="boolean"||Array.isArray(l)||isNaN(+l)?c.push(g("validations.expectedNumeric","Value must be a number.")):c.push(...s.filter(d=>!d.isValid(+l)).map(d=>d.message))),i.type==="string"&&(i.enum&&!VW(i.enum)?c.push(g("validations.stringIncorrectEnumOptions","The enum options should be strings, but there is a non-string option. Please file an issue with the extension author.")):hn(l)?c.push(...o.filter(d=>!d.isValid(l)).map(d=>d.message)):c.push(g("validations.stringIncorrectType",'Incorrect type. Expected "string".'))),c.length?i.errorMessage?[i.errorMessage,...c].join(" "):c.join(" "):""}}Xn(W6,"createValidator");function ZDe(i,e){if(typeof e>"u")return;if(!(Array.isArray(e)?e:[e]).some(n=>_J(i,n)))return g("invalidTypeError","Setting has an invalid type, expected {0}. Fix in JSON.",JSON.stringify(e))}Xn(ZDe,"getInvalidTypeError");function _J(i,e){const t=typeof i;return e==="boolean"?t==="boolean":e==="object"?i&&!Array.isArray(i)&&t==="object":e==="null"?i===null:e==="array"?Array.isArray(i):e==="string"?t==="string":e==="number"||e==="integer"?t==="number":!0}Xn(_J,"valueValidatesAsType");function H6(i){try{return new RegExp(i,"u")}catch{try{return new RegExp(i)}catch{return console.error(g("regexParsingError","Error parsing the following regex both with and without the u flag:"),i),/.*/}}}Xn(H6,"toRegExp");function bJ(i){const e=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;let t;return typeof i.pattern=="string"&&(t=H6(i.pattern)),[{enabled:i.maxLength!==void 0,isValid:Xn(n=>n.length<=i.maxLength,"isValid"),message:g("validations.maxLength","Value must be {0} or fewer characters long.",i.maxLength)},{enabled:i.minLength!==void 0,isValid:Xn(n=>n.length>=i.minLength,"isValid"),message:g("validations.minLength","Value must be {0} or more characters long.",i.minLength)},{enabled:t!==void 0,isValid:Xn(n=>t.test(n),"isValid"),message:i.patternErrorMessage||g("validations.regex","Value must match regex `{0}`.",i.pattern)},{enabled:i.format==="color-hex",isValid:Xn(n=>U.Format.CSS.parseHex(n),"isValid"),message:g("validations.colorFormat","Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA.")},{enabled:i.format==="uri"||i.format==="uri-reference",isValid:Xn(n=>!!n.length,"isValid"),message:g("validations.uriEmpty","URI expected.")},{enabled:i.format==="uri"||i.format==="uri-reference",isValid:Xn(n=>e.test(n),"isValid"),message:g("validations.uriMissing","URI is expected.")},{enabled:i.format==="uri",isValid:Xn(n=>{const s=n.match(e);return!!(s&&s[2])},"isValid"),message:g("validations.uriSchemeMissing","URI with a scheme is expected.")},{enabled:i.enum!==void 0,isValid:Xn(n=>i.enum.includes(n),"isValid"),message:g("validations.invalidStringEnumValue","Value is not accepted. Valid values: {0}.",i.enum?i.enum.map(n=>`"${n}"`).join(", "):"[]")}].filter(n=>n.enabled)}Xn(bJ,"getStringValidators");function vJ(i){const e=Array.isArray(i.type)?i.type:[i.type],t=lb(e,"null"),n=lb(e,"integer")&&(e.length===1||e.length===2&&t);if(!(lb(e,"number","integer")&&(e.length===1||e.length===2&&t)))return[];let o,r;return typeof i.exclusiveMaximum=="boolean"?o=i.exclusiveMaximum?i.maximum:void 0:o=i.exclusiveMaximum,typeof i.exclusiveMinimum=="boolean"?r=i.exclusiveMinimum?i.minimum:void 0:r=i.exclusiveMinimum,[{enabled:o!==void 0&&(i.maximum===void 0||o<=i.maximum),isValid:Xn(a=>a<o,"isValid"),message:g("validations.exclusiveMax","Value must be strictly less than {0}.",o)},{enabled:r!==void 0&&(i.minimum===void 0||r>=i.minimum),isValid:Xn(a=>a>r,"isValid"),message:g("validations.exclusiveMin","Value must be strictly greater than {0}.",r)},{enabled:i.maximum!==void 0&&(o===void 0||o>i.maximum),isValid:Xn(a=>a<=i.maximum,"isValid"),message:g("validations.max","Value must be less than or equal to {0}.",i.maximum)},{enabled:i.minimum!==void 0&&(r===void 0||r<i.minimum),isValid:Xn(a=>a>=i.minimum,"isValid"),message:g("validations.min","Value must be greater than or equal to {0}.",i.minimum)},{enabled:i.multipleOf!==void 0,isValid:Xn(a=>a%i.multipleOf===0,"isValid"),message:g("validations.multipleOf","Value must be a multiple of {0}.",i.multipleOf)},{enabled:n,isValid:Xn(a=>a%1===0,"isValid"),message:g("validations.expectedInteger","Value must be an integer.")}].filter(a=>a.enabled)}Xn(vJ,"getNumericValidators");function wJ(i){if(i.type==="array"&&i.items&&!Array.isArray(i.items)){const e=i.items;if(e&&!Array.isArray(e.type)){const t=Xn(n=>"'"+n+"'","withQuotes");return n=>{if(!n)return null;let s="";if(!Array.isArray(n))return s+=g("validations.arrayIncorrectType","Incorrect type. Expected an array."),s+=`
`,s;const o=n;if(i.uniqueItems&&new Set(o).size<o.length&&(s+=g("validations.stringArrayUniqueItems","Array has duplicate items"),s+=`
`),i.minItems&&o.length<i.minItems&&(s+=g("validations.stringArrayMinItem","Array must have at least {0} items",i.minItems),s+=`
`),i.maxItems&&o.length>i.maxItems&&(s+=g("validations.stringArrayMaxItem","Array must have at most {0} items",i.maxItems),s+=`
`),e.type==="string"){if(!VW(o))return s+=g("validations.stringArrayIncorrectType","Incorrect type. Expected a string array."),s+=`
`,s;if(typeof e.pattern=="string"){const a=H6(e.pattern);o.forEach(l=>{a.test(l)||(s+=e.patternErrorMessage||g("validations.stringArrayItemPattern","Value {0} must match regex {1}.",t(l),t(e.pattern)))})}const r=e.enum;r&&o.forEach(a=>{r.indexOf(a)===-1&&(s+=g("validations.stringArrayItemEnum","Value {0} is not one of {1}",t(a),"["+r.map(t).join(", ")+"]"),s+=`
`)})}else(e.type==="integer"||e.type==="number")&&o.forEach(r=>{const a=Q1(e,r);a&&(s+=`${r}: ${a}
`)});return s}}}return null}Xn(wJ,"getArrayValidator");function CJ(i){if(i.type==="object"){const{properties:e,patternProperties:t,additionalProperties:n}=i;return s=>{if(!s)return null;const o=[];return On(s)?Object.keys(s).forEach(r=>{const a=s[r];if(e&&r in e){const l=Q1(e[r],a);l&&o.push(`${r}: ${l}
`);return}if(t){for(const l in t)if(RegExp(l).test(r)){const c=Q1(t[l],a);c&&o.push(`${r}: ${c}
`);return}}if(n===!1)o.push(g("validations.objectPattern",`Property {0} is not allowed.
`,r));else if(typeof n=="object"){const l=Q1(n,a);l&&o.push(`${r}: ${l}
`)}}):o.push(g("validations.objectIncorrectType","Incorrect type. Expected an object.")),o.length?i.errorMessage?[i.errorMessage,...o].join(" "):o.join(" "):""}}return null}Xn(CJ,"getObjectValidator");function Q1(i,e){return W6(i)(e)}Xn(Q1,"getErrorsForSchema");var yJ=Object.defineProperty,XDe=Object.getOwnPropertyDescriptor,Hs=(i,e)=>yJ(i,"name",{value:e,configurable:!0}),SJ=(i,e,t,n)=>{for(var s=n>1?void 0:n?XDe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&yJ(e,t,s),s},EJ=(i,e)=>(t,n)=>e(t,n,i);const eo={startLineNumber:-1,startColumn:-1,endLineNumber:-1,endColumn:-1};function FT(i){return i.startLineNumber===-1&&i.startColumn===-1&&i.endLineNumber===-1&&i.endColumn===-1}Hs(FT,"isNullRange");class U6 extends n6{static{Hs(this,"AbstractSettingsModel")}_currentResultGroups=new Map;updateResultGroup(e,t){return t?this._currentResultGroups.set(e,t):this._currentResultGroups.delete(e),this.removeDuplicateResults(),this.update()}removeDuplicateResults(){const e=new Set;[...this._currentResultGroups.keys()].sort((t,n)=>this._currentResultGroups.get(t).order-this._currentResultGroups.get(n).order).forEach(t=>{const n=this._currentResultGroups.get(t);n.result.filterMatches=n.result.filterMatches.filter(s=>!e.has(s.setting.key)),n.result.filterMatches.forEach(s=>e.add(s.setting.key))})}filterSettings(e,t,n){const s=this.filterGroups,o=[];for(const r of s){const a=t(r);for(const l of r.sections)for(const c of l.settings){const d=n(c,r);(a||d)&&o.push({setting:c,matches:d&&d.matches,matchType:d?.matchType??IJ.None,score:d?.score??0})}}return o}getPreference(e){for(const t of this.settingsGroups)for(const n of t.sections)for(const s of n.settings)if(e===s.key)return s}collectMetadata(e){const t=Object.create(null);let n=!1;return e.forEach(s=>{s.result.metadata&&(t[s.id]=s.result.metadata,n=!0)}),n?t:null}get filterGroups(){return this.settingsGroups}}class QDe extends U6{constructor(e,t){super(),this._configurationTarget=t,this.settingsModel=e.object.textEditorModel,this._register(this.onWillDispose(()=>e.dispose())),this._register(this.settingsModel.onDidChangeContent(()=>{this._settingsGroups=void 0,this._onDidChangeGroups.fire()}))}static{Hs(this,"SettingsEditorModel")}_settingsGroups;settingsModel;_onDidChangeGroups=this._register(new x);onDidChangeGroups=this._onDidChangeGroups.event;get uri(){return this.settingsModel.uri}get configurationTarget(){return this._configurationTarget}get settingsGroups(){return this._settingsGroups||this.parse(),this._settingsGroups}get content(){return this.settingsModel.getValue()}findValueMatches(e,t){return this.settingsModel.findMatches(e,t.valueRange,!1,!1,null,!1).map(n=>n.range)}isSettingsProperty(e,t){return t.length===0}parse(){this._settingsGroups=z6(this.settingsModel,(e,t)=>this.isSettingsProperty(e,t))}update(){const e=[...this._currentResultGroups.values()];if(!e.length)return;const t=[],n=[];e.forEach(a=>{a.result.filterMatches.forEach(l=>{t.push(l.setting),l.matches&&n.push(...l.matches)})});let s;const o=this.settingsGroups[0];o&&(s={id:o.id,range:o.range,sections:[{settings:t}],title:o.title,titleRange:o.titleRange,order:o.order,extensionInfo:o.extensionInfo});const r=this.collectMetadata(e);return{allGroups:this.settingsGroups,filteredGroups:s?[s]:[],matches:n,metadata:r}}}let cU=class extends U6{constructor(i,e){super(),this._defaultSettings=i,this._register(e.onDidChangeConfiguration(t=>{t.source===Ca.DEFAULT&&(this.dirty=!0,this._onDidChangeGroups.fire())})),this._register(Xt.as(uf.Configuration).onDidSchemaChange(t=>{this.dirty=!0,this._onDidChangeGroups.fire()}))}static{Hs(this,"Settings2EditorModel")}_onDidChangeGroups=this._register(new x);onDidChangeGroups=this._onDidChangeGroups.event;additionalGroups=[];dirty=!1;get filterGroups(){return this.settingsGroups.slice(1)}get settingsGroups(){const i=this._defaultSettings.getSettingsGroups(this.dirty);return this.dirty=!1,[...i,...this.additionalGroups]}setAdditionalGroups(i){this.additionalGroups=i}findValueMatches(i,e){return[]}update(){throw new Error("Not supported")}};cU=SJ([EJ(1,Pe)],cU);function z6(i,e){const t=[];let n=null,s=null,o=[];const r=[];let a=-1;const l={startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0};function c(h,u,f){if(Array.isArray(o)?o.push(h):s&&(o[s]=h),r.length===a+1||r.length===a+2&&n!==null){const p=r.length===a+1?t[t.length-1]:n.overrides[n.overrides.length-1];if(p){const m=i.getPositionAt(u),_=i.getPositionAt(u+f);p.value=h,p.valueRange={startLineNumber:m.lineNumber,startColumn:m.column,endLineNumber:_.lineNumber,endColumn:_.column},p.range=Object.assign(p.range,{endLineNumber:_.lineNumber,endColumn:_.column})}}}Hs(c,"onValue");const d={onObjectBegin:Hs((h,u)=>{if(e(s,r)){a=r.length;const p=i.getPositionAt(h);l.startLineNumber=p.lineNumber,l.startColumn=p.column}const f={};c(f,h,u),o=f,s=null,r.push(o)},"onObjectBegin"),onObjectProperty:Hs((h,u,f)=>{if(s=h,r.length===a+1||r.length===a+2&&n!==null){const p=i.getPositionAt(u),m={description:[],descriptionIsMarkdown:!1,key:h,keyRange:{startLineNumber:p.lineNumber,startColumn:p.column+1,endLineNumber:p.lineNumber,endColumn:p.column+f},range:{startLineNumber:p.lineNumber,startColumn:p.column,endLineNumber:0,endColumn:0},value:null,valueRange:eo,descriptionRanges:[],overrides:[],overrideOf:n??void 0};r.length===a+1?(t.push(m),Rp.test(h)&&(n=m)):n.overrides.push(m)}},"onObjectProperty"),onObjectEnd:Hs((h,u)=>{if(o=r.pop(),a!==-1&&(r.length===a+1||r.length===a+2&&n!==null)){const f=r.length===a+1?t[t.length-1]:n.overrides[n.overrides.length-1];if(f){const p=i.getPositionAt(h+u);f.valueRange=Object.assign(f.valueRange,{endLineNumber:p.lineNumber,endColumn:p.column}),f.range=Object.assign(f.range,{endLineNumber:p.lineNumber,endColumn:p.column})}r.length===a+1&&(n=null)}if(r.length===a){const f=i.getPositionAt(h);l.endLineNumber=f.lineNumber,l.endColumn=f.column,a=-1}},"onObjectEnd"),onArrayBegin:Hs((h,u)=>{const f=[];c(f,h,u),r.push(o),o=f,s=null},"onArrayBegin"),onArrayEnd:Hs((h,u)=>{if(o=r.pop(),r.length===a+1||r.length===a+2&&n!==null){const f=r.length===a+1?t[t.length-1]:n.overrides[n.overrides.length-1];if(f){const p=i.getPositionAt(h+u);f.valueRange=Object.assign(f.valueRange,{endLineNumber:p.lineNumber,endColumn:p.column}),f.range=Object.assign(f.range,{endLineNumber:p.lineNumber,endColumn:p.column})}}},"onArrayEnd"),onLiteralValue:c,onError:Hs(h=>{const u=t[t.length-1];u&&(FT(u.range)||FT(u.keyRange)||FT(u.valueRange))&&t.pop()},"onError")};return i.isDisposed()||dD(i.getValue(),d),t.length>0?[{sections:[{settings:t}],title:"",titleRange:eo,range:l}]:[]}Hs(z6,"parse");class v$e extends QDe{static{Hs(this,"WorkspaceConfigurationEditorModel")}_configurationGroups=[];get configurationGroups(){return this._configurationGroups}parse(){super.parse(),this._configurationGroups=z6(this.settingsModel,(e,t)=>t.length===0)}isSettingsProperty(e,t){return e==="settings"&&t.length===1}}class w$e extends ${constructor(e,t,n){super(),this._mostCommonlyUsedSettingsKeys=e,this.target=t,this.configurationService=n,this._register(n.onDidChangeConfiguration(s=>{s.source===Ca.DEFAULT&&(this.reset(),this._onDidChange.fire())}))}static{Hs(this,"DefaultSettings")}_allSettingsGroups;_content;_contentWithoutMostCommonlyUsed;_settingsByName=new Map;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;getContent(e=!1){return(!this._content||e)&&this.initialize(),this._content}getContentWithoutMostCommonlyUsed(e=!1){return(!this._contentWithoutMostCommonlyUsed||e)&&this.initialize(),this._contentWithoutMostCommonlyUsed}getSettingsGroups(e=!1){return(!this._allSettingsGroups||e)&&this.initialize(),this._allSettingsGroups}initialize(){this._allSettingsGroups=this.parse(),this._content=this.toContent(this._allSettingsGroups,0),this._contentWithoutMostCommonlyUsed=this.toContent(this._allSettingsGroups,1)}reset(){this._content=void 0,this._contentWithoutMostCommonlyUsed=void 0,this._allSettingsGroups=void 0}parse(){const e=this.getRegisteredGroups();return this.initAllSettingsMap(e),[this.getMostCommonlyUsedSettings(),...e]}getRegisteredGroups(){const e=Xt.as(uf.Configuration).getConfigurations().slice(),t=this.removeEmptySettingsGroups(e.sort(this.compareConfigurationNodes).reduce((n,s,o,r)=>this.parseConfig(s,n,r),[]));return this.sortGroups(t)}sortGroups(e){return e.forEach(t=>{t.sections.forEach(n=>{n.settings.sort((s,o)=>s.key.localeCompare(o.key))})}),e}initAllSettingsMap(e){this._settingsByName=new Map;for(const t of e)for(const n of t.sections)for(const s of n.settings)this._settingsByName.set(s.key,s)}getMostCommonlyUsedSettings(){const e=To(this._mostCommonlyUsedSettingsKeys.map(t=>{const n=this._settingsByName.get(t);return n?{description:n.description,key:n.key,value:n.value,keyRange:eo,range:eo,valueRange:eo,overrides:[],scope:vt.RESOURCE,type:n.type,enum:n.enum,enumDescriptions:n.enumDescriptions,descriptionRanges:[]}:null}));return{id:"mostCommonlyUsed",range:eo,title:g("commonlyUsed","Commonly Used"),titleRange:eo,sections:[{settings:e}]}}parseConfig(e,t,n,s,o){o=o||{};let r=e.title;if(!r){const a=n.find(l=>l.id===e.id&&l.title);a&&(r=a.title)}if(r&&(s?s.sections[s.sections.length-1].title=r:(s=t.find(a=>a.title===r&&a.extensionInfo?.id===e.extensionInfo?.id),s||(s={sections:[{settings:[]}],id:e.id||"",title:r||"",titleRange:eo,order:e.order,range:eo,extensionInfo:e.extensionInfo},t.push(s)))),e.properties){s||(s={sections:[{settings:[]}],id:e.id||"",title:e.id||"",titleRange:eo,order:e.order,range:eo,extensionInfo:e.extensionInfo},t.push(s));const a=[];for(const l of[...s.sections[s.sections.length-1].settings,...this.parseSettings(e)])o[l.key]||(a.push(l),o[l.key]=!0);a.length&&(s.sections[s.sections.length-1].settings=a)}return e.allOf?.forEach(a=>this.parseConfig(a,t,n,s,o)),t}removeEmptySettingsGroups(e){const t=[];for(const n of e)n.sections=n.sections.filter(s=>s.settings.length>0),n.sections.length&&t.push(n);return t}parseSettings(e){const t=[],n=e.properties,s=e.extensionInfo,o=e.extensionInfo?.id===e.id?e.title:e.id;for(const r in n){const a=n[r];if(this.matchesScope(a)){const l=a.default;let c=a.markdownDescription||a.description||"";typeof c!="string"&&(c="");const d=c.split(`
`),h=Rp.test(r)?this.parseOverrideSettings(a.default):[];let u;a.type==="array"&&a.items&&!Array.isArray(a.items)&&a.items.type&&(a.items.enum?u="enum":Array.isArray(a.items.type)||(u=a.items.type));const f=a.type==="object"?a.properties:void 0,p=a.type==="object"?a.patternProperties:void 0,m=a.type==="object"?a.additionalProperties:void 0;let _=a.enum,w=a.markdownEnumDescriptions??a.enumDescriptions,v=!!a.markdownEnumDescriptions;u==="enum"&&!Array.isArray(a.items)&&(_=a.items.enum,w=a.items.markdownEnumDescriptions??a.items.enumDescriptions,v=!!a.items.markdownEnumDescriptions);let b=!1;a.type==="object"&&!a.additionalProperties&&a.properties&&Object.keys(a.properties).length&&(b=Object.keys(a.properties).every(D=>a.properties[D].type==="boolean"));let C=!1;Rp.test(r)&&(C=!0);let S;if(!C){const D=a;D&&D.defaultValueSource&&(S=D.defaultValueSource)}!_&&(a.enumItemLabels||w||v)&&console.error(`The setting ${r} has enum-related fields, but doesn't have an enum field. This setting may render improperly in the Settings editor.`),t.push({key:r,value:l,description:d,descriptionIsMarkdown:!!a.markdownDescription,range:eo,keyRange:eo,valueRange:eo,descriptionRanges:[],overrides:h,scope:a.scope,type:a.type,arrayItemType:u,objectProperties:f,objectPatternProperties:p,objectAdditionalProperties:m,enum:_,enumDescriptions:w,enumDescriptionsAreMarkdown:v,enumItemLabels:a.enumItemLabels,uniqueItems:a.uniqueItems,tags:a.tags,disallowSyncIgnore:a.disallowSyncIgnore,restricted:a.restricted,extensionInfo:s,deprecationMessage:a.markdownDeprecationMessage||a.deprecationMessage,deprecationMessageIsMarkdown:!!a.markdownDeprecationMessage,validator:W6(a),allKeysAreBoolean:b,editPresentation:a.editPresentation,order:a.order,nonLanguageSpecificDefaultValueSource:S,isLanguageTagSetting:C,categoryLabel:o})}}return t}parseOverrideSettings(e){return Object.keys(e).map(t=>({key:t,value:e[t],description:[],descriptionIsMarkdown:!1,range:eo,keyRange:eo,valueRange:eo,descriptionRanges:[],overrides:[]}))}matchesScope(e){return e.scope?this.target===Ca.WORKSPACE_FOLDER?jDe.indexOf(e.scope)!==-1:this.target===Ca.WORKSPACE?KDe.indexOf(e.scope)!==-1:!0:!0}compareConfigurationNodes(e,t){if(typeof e.order!="number")return 1;if(typeof t.order!="number")return-1;if(e.order===t.order){const n=e.title||"",s=t.title||"";return n.localeCompare(s)}return e.order-t.order}toContent(e,t){const n=new $6;for(let s=t;s<e.length;s++)n.pushGroup(e[s],s===t,s===e.length-1);return n.getContent()}}class C$e extends U6{constructor(e,t,n){super(),this._uri=e,this.defaultSettings=n,this._register(n.onDidChange(()=>this._onDidChangeGroups.fire())),this._model=t.object.textEditorModel,this._register(this.onWillDispose(()=>t.dispose()))}static{Hs(this,"DefaultSettingsEditorModel")}_model;_onDidChangeGroups=this._register(new x);onDidChangeGroups=this._onDidChangeGroups.event;get uri(){return this._uri}get target(){return this.defaultSettings.target}get settingsGroups(){return this.defaultSettings.getSettingsGroups()}get filterGroups(){return this.settingsGroups.slice(1)}update(){if(this._model.isDisposed())return;const e=[...this._currentResultGroups.values()].sort((a,l)=>a.order-l.order),t=e.filter(a=>a.result.filterMatches.length),n=Ur(this.settingsGroups).range.endLineNumber+2,{settingsGroups:s,matches:o}=this.writeResultGroups(t,n),r=this.collectMetadata(e);return e.length?{allGroups:this.settingsGroups,filteredGroups:s,matches:o,metadata:r}:void 0}writeResultGroups(e,t){const n=t-1,s=new $6(n),o=[],r=[];e.length&&(s.pushLine(","),e.forEach(u=>{const f=this.getGroup(u);o.push(f),r.push(...this.writeSettingsGroupToBuilder(s,f,u.result.filterMatches))}));const a=s.getContent()+`
`,l=this._model.getLineCount(),c=new St(t,1,t,1),d={text:a,forceMoveMarkers:!0,range:new V(t,1,l,1)};this._model.pushEditOperations([c],[d],()=>[c]);const h=Math.min(t+60,this._model.getLineCount());return this._model.tokenization.forceTokenization(h),{matches:r,settingsGroups:o}}writeSettingsGroupToBuilder(e,t,n){return n=n.map(o=>({setting:o.setting,score:o.score,matches:o.matches&&o.matches.map(r=>new V(r.startLineNumber-o.setting.range.startLineNumber,r.startColumn,r.endLineNumber-o.setting.range.startLineNumber,r.endColumn))})),e.pushGroup(t),n.map(o=>o.matches||[]).flatMap((o,r)=>{const a=t.sections[0].settings[r];return o.map(l=>new V(l.startLineNumber+a.range.startLineNumber,l.startColumn,l.endLineNumber+a.range.startLineNumber,l.endColumn))})}copySetting(e){return{description:e.description,scope:e.scope,type:e.type,enum:e.enum,enumDescriptions:e.enumDescriptions,key:e.key,value:e.value,range:e.range,overrides:[],overrideOf:e.overrideOf,tags:e.tags,deprecationMessage:e.deprecationMessage,keyRange:eo,valueRange:eo,descriptionIsMarkdown:void 0,descriptionRanges:[]}}findValueMatches(e,t){return[]}getPreference(e){for(const t of this.settingsGroups)for(const n of t.sections)for(const s of n.settings)if(s.key===e)return s}getGroup(e){return{id:e.id,range:eo,title:e.label,titleRange:eo,sections:[{settings:e.result.filterMatches.map(t=>this.copySetting(t.setting))}]}}}class $6{constructor(e=0){this._rangeOffset=e,this._contentByLines=[]}static{Hs(this,"SettingsContentBuilder")}_contentByLines;get lineCountWithOffset(){return this._contentByLines.length+this._rangeOffset}get lastLine(){return this._contentByLines[this._contentByLines.length-1]||""}pushLine(...e){this._contentByLines.push(...e)}pushGroup(e,t,n){this._contentByLines.push(t?"[{":"{");const s=this._pushGroup(e,"  ");if(s){const o=s.range.endLineNumber-this._rangeOffset,r=this._contentByLines[o-2];this._contentByLines[o-2]=r.substring(0,r.length-1)}this._contentByLines.push(n?"}]":"},")}_pushGroup(e,t){let n=null;const s=this.lineCountWithOffset+1;for(const o of e.sections){if(o.title){const r=this.lineCountWithOffset+1;this.addDescription([o.title],t,this._contentByLines),o.titleRange={startLineNumber:r,startColumn:1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length}}if(o.settings.length)for(const r of o.settings)this.pushSetting(r,t),n=r}return e.range={startLineNumber:s,startColumn:1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length},n}getContent(){return this._contentByLines.join(`
`)}pushSetting(e,t){const n=this.lineCountWithOffset+1;this.pushSettingDescription(e,t);let s=t;const o=JSON.stringify(e.key);s+=o,e.keyRange={startLineNumber:this.lineCountWithOffset+1,startColumn:s.indexOf(e.key)+1,endLineNumber:this.lineCountWithOffset+1,endColumn:e.key.length},s+=": ";const r=this.lineCountWithOffset+1;this.pushValue(e,s,t),e.valueRange={startLineNumber:r,startColumn:s.length+1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length+1},this._contentByLines[this._contentByLines.length-1]+=",",this._contentByLines.push(""),e.range={startLineNumber:n,startColumn:1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length}}pushSettingDescription(e,t){const n=Hs(r=>r.replace(/`#(.*)#`/g,(a,l)=>`\`${l}\``),"fixSettingLink");e.descriptionRanges=[];const s=t+"// ",o=e.deprecationMessage?.split(/\n/g)??[];for(let r of[...o,...e.description])r=n(r),this._contentByLines.push(s+r),e.descriptionRanges.push({startLineNumber:this.lineCountWithOffset,startColumn:this.lastLine.indexOf(r)+1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length});e.enum&&e.enumDescriptions?.some(r=>!!r)&&e.enumDescriptions.forEach((r,a)=>{const l=LJ(String(e.enum[a])),c=r?`${l}: ${n(r)}`:l,d=c.split(/\n/g);d[0]=" - "+d[0],this._contentByLines.push(...d.map(h=>`${t}// ${h}`)),e.descriptionRanges.push({startLineNumber:this.lineCountWithOffset,startColumn:this.lastLine.indexOf(c)+1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length})})}pushValue(e,t,n){const s=JSON.stringify(e.value,null,n);if(s&&typeof e.value=="object")if(e.overrides&&e.overrides.length){this._contentByLines.push(t+" {");for(const a of e.overrides)this.pushSetting(a,n+n),this._contentByLines.pop();const o=e.overrides[e.overrides.length-1],r=this._contentByLines[o.range.endLineNumber-2];this._contentByLines[o.range.endLineNumber-2]=r.substring(0,r.length-1),this._contentByLines.push(n+"}")}else{const o=s.split(`
`);this._contentByLines.push(t+o[0]);for(let r=1;r<o.length;r++)this._contentByLines.push(n+o[r])}else this._contentByLines.push(t+s)}addDescription(e,t,n){for(const s of e)n.push(t+"// "+s)}}class JDe extends $6{constructor(e="	"){super(0),this.indent=e}static{Hs(this,"RawSettingsContentBuilder")}pushGroup(e){this._pushGroup(e,this.indent)}}class y$e extends ${constructor(e){super(),this.defaultSettings=e,this._register(e.onDidChange(()=>{this._content=null,this._onDidContentChanged.fire()}))}static{Hs(this,"DefaultRawSettingsEditorModel")}_content=null;_onDidContentChanged=this._register(new x);onDidContentChanged=this._onDidContentChanged.event;get content(){if(this._content===null){const e=new JDe;e.pushLine("{");for(const t of this.defaultSettings.getRegisteredGroups())e.pushGroup(t);e.pushLine("}"),this._content=e.getContent()}return this._content}}function LJ(i){return i&&i.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}Hs(LJ,"escapeInvisibleChars");function DJ(i){return"// "+g("defaultKeybindingsHeader","Override key bindings by placing them into your key bindings file.")+`
`+i.getDefaultKeybindingsContent()}Hs(DJ,"defaultKeybindingsContents");let dU=class{constructor(i,e){this._uri=i,this.keybindingService=e}static{Hs(this,"DefaultKeybindingsEditorModel")}_content;get uri(){return this._uri}get content(){return this._content||(this._content=DJ(this.keybindingService)),this._content}getPreference(){return null}dispose(){}};dU=SJ([EJ(1,ni)],dU);var eIe=Object.defineProperty,tIe=(i,e)=>eIe(i,"name",{value:e,configurable:!0}),IJ=(i=>(i[i.None=0]="None",i[i.LanguageTagSettingMatch=1]="LanguageTagSettingMatch",i[i.RemoteMatch=2]="RemoteMatch",i[i.DescriptionOrValueMatch=4]="DescriptionOrValueMatch",i[i.KeyMatch=8]="KeyMatch",i))(IJ||{});function iIe(i){return{...i,override:OP.id,pinned:!0}}tIe(iIe,"validateSettingsEditorOptions");const RP=De("preferencesService");var nIe=Object.defineProperty,kn=(i,e)=>nIe(i,"name",{value:e,configurable:!0});const jp={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},OP={id:"default",displayName:g("promptOpenWith.defaultEditor.displayName","Text Editor"),providerDisplayName:g("builtinProviderDisplayName","Built-in")},sIe="workbench.editor.sidebysideEditor",TJ="workbench.editors.textDiffEditor",oIe="workbench.editors.binaryResourceDiffEditor";var nw=(i=>(i[i.PROGRAMMATIC=1]="PROGRAMMATIC",i[i.USER=2]="USER",i[i.EDIT=3]="EDIT",i[i.NAVIGATION=4]="NAVIGATION",i[i.JUMP=5]="JUMP",i))(nw||{}),N_=(i=>(i[i.IDENTICAL=1]="IDENTICAL",i[i.SIMILAR=2]="SIMILAR",i[i.DIFFERENT=3]="DIFFERENT",i))(N_||{});function kF(i){const e=i;return!!e&&typeof e.getSelection=="function"&&!!e.onDidChangeSelection}kn(kF,"isEditorPaneWithSelection");function rIe(i){const e=i;return!!e&&typeof e.getScrollPosition=="function"&&typeof e.setScrollPosition=="function"&&!!e.onDidChangeScroll}kn(rIe,"isEditorPaneWithScrolling");function VT(i,e,t){for(const n of t.visibleEditorPanes)if(n.group.id===e&&i.matches(n.input))return n.getViewState()}kn(VT,"findViewStateForEditor");function yw(i){if(ho(i))return!1;const e=i;return ne.isUri(e?.resource)}kn(yw,"isResourceEditorInput");function Bd(i){if(ho(i))return!1;const e=i;return e?.original!==void 0&&e.modified!==void 0}kn(Bd,"isResourceDiffEditorInput");function oC(i){if(ho(i))return!1;const e=i;return!e||e.resources&&!Array.isArray(e.resources)?!1:!!e.resources||!!e.multiDiffSource}kn(oC,"isResourceMultiDiffEditorInput");function mg(i){if(ho(i)||Bd(i))return!1;const e=i;return e?.primary!==void 0&&e.secondary!==void 0}kn(mg,"isResourceSideBySideEditorInput");function aIe(i){if(ho(i))return!1;const e=i;return e?e.resource===void 0||e.resource.scheme===Ve.untitled||e.forceUntitled===!0:!1}kn(aIe,"isUntitledResourceEditorInput");function _g(i){if(ho(i))return!1;const e=i;return ne.isUri(e?.base?.resource)&&ne.isUri(e?.input1?.resource)&&ne.isUri(e?.input2?.resource)&&ne.isUri(e?.result?.resource)}kn(_g,"isResourceMergeEditorInput");var Ii=(i=>(i[i.SHORT=0]="SHORT",i[i.MEDIUM=1]="MEDIUM",i[i.LONG=2]="LONG",i))(Ii||{}),wo=(i=>(i[i.EXPLICIT=1]="EXPLICIT",i[i.AUTO=2]="AUTO",i[i.FOCUS_CHANGE=3]="FOCUS_CHANGE",i[i.WINDOW_CHANGE=4]="WINDOW_CHANGE",i))(wo||{});class S$e{static{kn(this,"SaveSourceFactory")}mapIdToSaveSource=new Map;registerSource(e,t){let n=this.mapIdToSaveSource.get(e);return n||(n={source:e,label:t},this.mapIdToSaveSource.set(e,n)),n.source}getSourceLabel(e){return this.mapIdToSaveSource.get(e)?.label??e}}var Wo=(i=>(i[i.None=0]="None",i[i.Readonly=2]="Readonly",i[i.Untitled=4]="Untitled",i[i.Singleton=8]="Singleton",i[i.RequiresTrust=16]="RequiresTrust",i[i.CanSplitInGroup=32]="CanSplitInGroup",i[i.ForceDescription=64]="ForceDescription",i[i.CanDropIntoEditor=128]="CanDropIntoEditor",i[i.MultipleEditors=256]="MultipleEditors",i[i.Scratchpad=512]="Scratchpad",i))(Wo||{});class AJ extends ${static{kn(this,"AbstractEditorInput")}}function ho(i){return i instanceof AJ}kn(ho,"isEditorInput");function xJ(i){const e=i;return ne.isUri(e?.preferredResource)}kn(xJ,"isEditorInputWithPreferredResource");function kJ(i){const e=i;return ho(e?.primary)&&ho(e?.secondary)}kn(kJ,"isSideBySideEditorInput");function G6(i){const e=i;return ho(e?.modified)&&ho(e?.original)}kn(G6,"isDiffEditorInput");function NJ(i,e,t,n,s){return OJ(n,[Ei({id:"workbench.action.openLargeFile",label:g("openLargeFile","Open Anyway"),run:kn(()=>{const o={...t,limits:{size:Number.MAX_VALUE}};i.openEditor(e,o)},"run")}),Ei({id:"workbench.action.configureEditorLargeFileConfirmation",label:g("configureEditorLargeFileConfirmation","Configure Limit"),run:kn(()=>s.openUserSettings({query:"workbench.editorLargeFileConfirmation"}),"run")})],{forceMessage:!0,forceSeverity:So.Warning})}kn(NJ,"createTooLargeFileError");function PJ(i){return ho(i?.editor)}kn(PJ,"isEditorInputWithOptions");function RJ(i){const e=i;return PJ(i)&&e?.group!==void 0}kn(RJ,"isEditorInputWithOptionsAndGroup");function Ax(i){const e=i;return typeof e?.groupId=="number"&&ho(e.editor)}kn(Ax,"isEditorIdentifier");function NF(i){return typeof i?.groupId=="number"}kn(NF,"isEditorCommandsContext");var cb=(i=>(i[i.UNKNOWN=0]="UNKNOWN",i[i.REPLACE=1]="REPLACE",i[i.MOVE=2]="MOVE",i[i.UNPIN=3]="UNPIN",i))(cb||{}),Wn=(i=>(i[i.GROUP_ACTIVE=0]="GROUP_ACTIVE",i[i.GROUP_INDEX=1]="GROUP_INDEX",i[i.GROUP_LABEL=2]="GROUP_LABEL",i[i.GROUP_LOCKED=3]="GROUP_LOCKED",i[i.EDITORS_SELECTION=4]="EDITORS_SELECTION",i[i.EDITOR_OPEN=5]="EDITOR_OPEN",i[i.EDITOR_CLOSE=6]="EDITOR_CLOSE",i[i.EDITOR_MOVE=7]="EDITOR_MOVE",i[i.EDITOR_ACTIVE=8]="EDITOR_ACTIVE",i[i.EDITOR_LABEL=9]="EDITOR_LABEL",i[i.EDITOR_CAPABILITIES=10]="EDITOR_CAPABILITIES",i[i.EDITOR_PIN=11]="EDITOR_PIN",i[i.EDITOR_TRANSIENT=12]="EDITOR_TRANSIENT",i[i.EDITOR_STICKY=13]="EDITOR_STICKY",i[i.EDITOR_DIRTY=14]="EDITOR_DIRTY",i[i.EDITOR_WILL_DISPOSE=15]="EDITOR_WILL_DISPOSE",i))(Wn||{}),Is=(i=>(i[i.PRIMARY=1]="PRIMARY",i[i.SECONDARY=2]="SECONDARY",i[i.BOTH=3]="BOTH",i[i.ANY=4]="ANY",i))(Is||{});class lIe{static{kn(this,"EditorResourceAccessorImpl")}getOriginalUri(e,t){if(!e)return;if(_g(e))return Io.getOriginalUri(e.result,t);if(t?.supportSideBySide){const{primary:s,secondary:o}=this.getSideEditors(e);if(s&&o){if(t?.supportSideBySide===3)return{primary:this.getOriginalUri(s,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(o,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===4)return this.getOriginalUri(s,{filterByScheme:t.filterByScheme})??this.getOriginalUri(o,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===1?s:o}}if(Bd(e)||oC(e)||mg(e)||_g(e))return;const n=xJ(e)?e.preferredResource:e.resource;return!n||!t||!t.filterByScheme?n:this.filterUri(n,t.filterByScheme)}getSideEditors(e){return kJ(e)||mg(e)?{primary:e.primary,secondary:e.secondary}:G6(e)||Bd(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(_g(e))return Io.getCanonicalUri(e.result,t);if(t?.supportSideBySide){const{primary:s,secondary:o}=this.getSideEditors(e);if(s&&o){if(t?.supportSideBySide===3)return{primary:this.getCanonicalUri(s,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(o,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===4)return this.getCanonicalUri(s,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(o,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===1?s:o}}if(Bd(e)||oC(e)||mg(e)||_g(e))return;const n=e.resource;return!n||!t||!t.filterByScheme?n:this.filterUri(n,t.filterByScheme)}filterUri(e,t){if(Array.isArray(t)){if(t.some(n=>e.scheme===n))return e}else if(t===e.scheme)return e}}var K6=(i=>(i[i.UNKNOWN=0]="UNKNOWN",i[i.KEYBOARD=1]="KEYBOARD",i[i.MOUSE=2]="MOUSE",i))(K6||{});function j6(i,e,t,n){if(!i.isSticky(e))return!1;switch(n.preventPinnedEditorClose){case"keyboardAndMouse":return t===2||t===1;case"mouse":return t===2;case"keyboard":return t===1}return!1}kn(j6,"preventEditorClose");const Io=new lIe;var q6=(i=>(i[i.LEFT=0]="LEFT",i[i.RIGHT=1]="RIGHT",i))(q6||{});class cIe{static{kn(this,"EditorFactoryRegistry")}instantiationService;fileEditorFactory;editorSerializerConstructors=new Map;editorSerializerInstances=new Map;start(e){const t=this.instantiationService=e.get(He);for(const[n,s]of this.editorSerializerConstructors)this.createEditorSerializer(n,s,t);this.editorSerializerConstructors.clear()}createEditorSerializer(e,t,n){const s=n.createInstance(t);this.editorSerializerInstances.set(e,s)}registerFileEditorFactory(e){if(this.fileEditorFactory)throw new Error("Can only register one file editor factory.");this.fileEditorFactory=e}getFileEditorFactory(){return pt(this.fileEditorFactory)}registerEditorSerializer(e,t){if(this.editorSerializerConstructors.has(e)||this.editorSerializerInstances.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.instantiationService?this.createEditorSerializer(e,t,this.instantiationService):this.editorSerializerConstructors.set(e,t),ye(()=>{this.editorSerializerConstructors.delete(e),this.editorSerializerInstances.delete(e)})}getEditorSerializer(e){return this.editorSerializerInstances.get(typeof e=="string"?e:e.typeId)}}Xt.add(jp.EditorFactory,new cIe);async function WT(i,e,t){return!i||!i.length?[]:await Promise.all(i.map(async n=>{const s=ne.revive(n.fileUri);if(!s){t.info("Cannot resolve the path because it is not valid.",n);return}if(!await e.canHandleResource(s)){t.info("Cannot resolve the path because it cannot be handled",n);return}let r=n.exists,a=n.type;if(typeof r!="boolean"||typeof a!="number")try{a=(await e.stat(s)).isDirectory?yp.Directory:yp.Unknown,r=!0}catch(c){t.error(c),r=!1}if(!r&&n.openOnlyIfExists){t.info("Cannot resolve the path because it does not exist",n);return}if(a===yp.Directory){t.info("Cannot resolve the path because it is a directory",n);return}const l={...n.options,pinned:!0};return r?{resource:s,options:l}:{resource:s,options:l,forceUntitled:!0}}))}kn(WT,"pathsToEditors");var mn=(i=>(i[i.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",i[i.SEQUENTIAL=1]="SEQUENTIAL",i))(mn||{});function MP(i){const e=i;if(!e)return!1;const t=e;if(t.modified)return MP(t.modified);const n=e;return!!(n.contributionsState&&n.viewState&&Array.isArray(n.cursorState))}kn(MP,"isTextEditorViewState");function dIe(i){return iP(i)}kn(dIe,"isEditorOpenError");function OJ(i,e,t){const n=Kq(i,e);return n.forceMessage=t?.forceMessage,n.forceSeverity=t?.forceSeverity,n.allowDialog=t?.allowDialog,n}kn(OJ,"createEditorOpenError");const hIe=De("editorPaneService");var uIe=Object.defineProperty,AE=(i,e)=>uIe(i,"name",{value:e,configurable:!0}),xE;(i=>{i.Workbench="workbench.contributions.kind"})(xE||(xE={}));var P_=(i=>(i[i.BlockStartup=an.Starting]="BlockStartup",i[i.BlockRestore=an.Ready]="BlockRestore",i[i.AfterRestored=an.Restored]="AfterRestored",i[i.Eventually=an.Eventually]="Eventually",i))(P_||{});function PF(i){const e=i;return!!e&&typeof e.editorTypeId=="string"}AE(PF,"isOnEditorWorkbenchContributionInstantiation");function MJ(i){switch(i){case an.Restored:return P_.AfterRestored;case an.Eventually:return P_.Eventually}}AE(MJ,"toWorkbenchPhase");function RF(i){switch(i){case P_.BlockStartup:return an.Starting;case P_.BlockRestore:return an.Ready;case P_.AfterRestored:return an.Restored;case P_.Eventually:return an.Eventually}}AE(RF,"toLifecyclePhase");class Pg extends ${static{AE(this,"WorkbenchContributionsRegistry")}static INSTANCE=new Pg;static BLOCK_BEFORE_RESTORE_WARN_THRESHOLD=20;static BLOCK_AFTER_RESTORE_WARN_THRESHOLD=100;instantiationService;lifecycleService;logService;environmentService;editorPaneService;contributionsByPhase=new Map;contributionsByEditor=new Map;contributionsById=new Map;instancesById=new Map;instanceDisposables=this._register(new te);timingsByPhase=new Map;get timings(){return this.timingsByPhase}pendingRestoredContributions=new jg;whenRestored=this.pendingRestoredContributions.p;registerWorkbenchContribution2(e,t,n){const s={id:e,ctor:t};this.instantiationService&&this.lifecycleService&&this.logService&&this.environmentService&&this.editorPaneService&&(typeof n=="number"&&this.lifecycleService.phase>=n||typeof e=="string"&&PF(n)&&this.editorPaneService.didInstantiateEditorPane(n.editorTypeId))?this.safeCreateContribution(this.instantiationService,this.logService,this.environmentService,s,typeof n=="number"?RF(n):this.lifecycleService.phase):(typeof n=="number"&&q_(this.contributionsByPhase,RF(n),[]).push(s),typeof e=="string"&&(this.contributionsById.has(e)?console.error(`IWorkbenchContributionsRegistry#registerWorkbenchContribution(): Can't register multiple contributions with same id '${e}'`):this.contributionsById.set(e,s),PF(n)&&q_(this.contributionsByEditor,n.editorTypeId,[]).push(s)))}registerWorkbenchContribution(e,t){this.registerWorkbenchContribution2(void 0,e,MJ(t))}getWorkbenchContribution(e){if(this.instancesById.has(e))return this.instancesById.get(e);const t=this.instantiationService,n=this.lifecycleService,s=this.logService,o=this.environmentService;if(!t||!n||!s||!o)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): cannot be called before registry started`);const r=this.contributionsById.get(e);if(!r)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution with that identifier is unknown.`);n.phase<an.Restored&&s.warn(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution instantiated before LifecyclePhase.Restored!`),this.safeCreateContribution(t,s,o,r,n.phase);const a=this.instancesById.get(e);if(!a)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): failed to create contribution.`);return a}start(e){const t=this.instantiationService=e.get(He),n=this.lifecycleService=e.get(eh),s=this.logService=e.get(jo),o=this.environmentService=e.get(Vy),r=this.editorPaneService=e.get(hIe);this._register(n.onDidShutdown(()=>{this.instanceDisposables.clear()}));for(const a of[an.Starting,an.Ready,an.Restored,an.Eventually])this.instantiateByPhase(t,n,s,o,a);for(const a of this.contributionsByEditor.keys())r.didInstantiateEditorPane(a)&&this.onEditor(a,t,n,s,o);this._register(r.onWillInstantiateEditorPane(a=>this.onEditor(a.typeId,t,n,s,o)))}onEditor(e,t,n,s,o){const r=this.contributionsByEditor.get(e);if(r){this.contributionsByEditor.delete(e);for(const a of r)this.safeCreateContribution(t,s,o,a,n.phase)}}instantiateByPhase(e,t,n,s,o){t.phase>=o?this.doInstantiateByPhase(e,n,s,o):t.when(o).then(()=>this.doInstantiateByPhase(e,n,s,o))}async doInstantiateByPhase(e,t,n,s){const o=this.contributionsByPhase.get(s);if(o)switch(this.contributionsByPhase.delete(s),s){case an.Starting:case an.Ready:{_i(`code/willCreateWorkbenchContributions/${s}`);for(const r of o)this.safeCreateContribution(e,t,n,r,s);_i(`code/didCreateWorkbenchContributions/${s}`);break}case an.Restored:case an.Eventually:{s===an.Eventually&&await this.pendingRestoredContributions.p,this.doInstantiateWhenIdle(o,e,t,n,s);break}}}doInstantiateWhenIdle(e,t,n,s,o){_i(`code/willCreateWorkbenchContributions/${o}`);let r=0;const a=o===an.Eventually?3e3:500,l=AE(c=>{for(;r<e.length;){const d=e[r++];if(this.safeCreateContribution(t,n,s,d,o),c.timeRemaining()<1){Z0(l,a);break}}r===e.length&&(_i(`code/didCreateWorkbenchContributions/${o}`),o===an.Restored&&this.pendingRestoredContributions.complete())},"instantiateSome");Z0(l,a)}safeCreateContribution(e,t,n,s,o){if(typeof s.id=="string"&&this.instancesById.has(s.id))return;const r=Date.now();try{typeof s.id=="string"&&_i(`code/willCreateWorkbenchContribution/${o}/${s.id}`);const a=e.createInstance(s.ctor);typeof s.id=="string"&&(this.instancesById.set(s.id,a),this.contributionsById.delete(s.id)),DL(a)&&this.instanceDisposables.add(a)}catch(a){t.error(`Unable to create workbench contribution '${s.id??s.ctor.name}'.`,a)}finally{typeof s.id=="string"&&_i(`code/didCreateWorkbenchContribution/${o}/${s.id}`)}if(typeof s.id=="string"||!n.isBuilt){const a=Date.now()-r;if(a>(o<an.Restored?Pg.BLOCK_BEFORE_RESTORE_WARN_THRESHOLD:Pg.BLOCK_AFTER_RESTORE_WARN_THRESHOLD)&&t.warn(`Creation of workbench contribution '${s.id??s.ctor.name}' took ${a}ms.`),typeof s.id=="string"){let l=this.timingsByPhase.get(o);l||(l=[],this.timingsByPhase.set(o,l)),l.push([s.id,a])}}}}Pg.INSTANCE.registerWorkbenchContribution2.bind(Pg.INSTANCE);Pg.INSTANCE.getWorkbenchContribution.bind(Pg.INSTANCE);Xt.add(xE.Workbench,Pg.INSTANCE);const gIe=De("layoutService");var fIe=Object.defineProperty,BP=(i,e)=>fIe(i,"name",{value:e,configurable:!0});function Y6(i){return JSON.stringify(i,BJ)}BP(Y6,"stringify");function FP(i){let e=JSON.parse(i);return e=ty(e),e}BP(FP,"parse");function BJ(i,e){return e instanceof RegExp?{$mid:zw.Regexp,source:e.source,flags:e.flags}:e}BP(BJ,"replacer");function ty(i,e=0){if(!i||e>200)return i;if(typeof i=="object"){switch(i.$mid){case zw.Uri:return ne.revive(i);case zw.Regexp:return new RegExp(i.source,i.flags);case zw.Date:return new Date(i.source)}if(i instanceof mt||i instanceof Uint8Array)return i;if(Array.isArray(i))for(let t=0;t<i.length;++t)i[t]=ty(i[t],e+1);else for(const t in i)Object.hasOwnProperty.call(i,t)&&(i[t]=ty(i[t],e+1))}return i}BP(ty,"revive");var pIe=Object.defineProperty,Z6=(i,e)=>pIe(i,"name",{value:e,configurable:!0}),HT=(i=>(i[i.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",i[i.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY",i))(HT||{});function mIe(i){const e=i;return e?.changed instanceof Map||e?.deleted instanceof Set}Z6(mIe,"isStorageItemsChangeEvent");class J1 extends ${constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this.registerListeners()}static{Z6(this,"Storage")}static DEFAULT_FLUSH_DELAY=100;_onDidChangeStorage=this._register(new NA);onDidChangeStorage=this._onDidChangeStorage.event;state=0;cache=new Map;flushDelayer=this._register(new tj(J1.DEFAULT_FLUSH_DELAY));pendingDeletes=new Set;pendingInserts=new Map;pendingClose=void 0;whenFlushedCallbacks=[];registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){this._onDidChangeStorage.pause();try{e.changed?.forEach((t,n)=>this.acceptExternal(n,t)),e.deleted?.forEach(t=>this.acceptExternal(t,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===2)return;let n=!1;Ls(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire({key:e,external:!0})}get items(){return this.cache}get size(){return this.cache.size}async init(){this.state===0&&(this.state=1,this.options.hint!==0&&(this.cache=await this.database.getItems()))}get(e,t){const n=this.cache.get(e);return Ls(n)?t:n}getBoolean(e,t){const n=this.get(e);return Ls(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return Ls(n)?t:parseInt(n,10)}getObject(e,t){const n=this.get(e);return Ls(n)?t:FP(n)}async set(e,t,n=!1){if(this.state===2)return;if(Ls(t))return this.delete(e,n);const s=On(t)||Array.isArray(t)?Y6(t):String(t);if(this.cache.get(e)!==s)return this.cache.set(e,s),this.pendingInserts.set(e,s),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:n}),this.doFlush()}async delete(e,t=!1){if(!(this.state===2||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}async optimize(){if(this.state!==2)return await this.flush(0),this.database.optimize()}async close(){return this.pendingClose||(this.pendingClose=this.doClose()),this.pendingClose}async doClose(){this.state=2;try{await this.doFlush(0)}catch{}await this.database.close(()=>this.cache)}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)this.whenFlushedCallbacks.pop()?.()})}async flush(e){if(!(this.state===2||this.pendingClose))return this.doFlush(e)}async doFlush(e){return this.options.hint===1?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}async whenFlushed(){if(this.hasPending)return new Promise(e=>this.whenFlushedCallbacks.push(e))}isInMemory(){return this.options.hint===1}}class UO{static{Z6(this,"InMemoryStorageDatabase")}onDidChangeItemsExternal=H.None;items=new Map;async getItems(){return this.items}async updateItems(e){e.insert?.forEach((t,n)=>this.items.set(n,t)),e.delete?.forEach(t=>this.items.delete(t))}async optimize(){}async close(){}}var _Ie=Object.defineProperty,hS=(i,e)=>_Ie(i,"name",{value:e,configurable:!0});const bIe="__$__isNewStorageMarker",UT="__$__targetStorageMarker",Si=De("storageService");var rC=(i=>(i[i.NONE=0]="NONE",i[i.SHUTDOWN=1]="SHUTDOWN",i))(rC||{}),Be=(i=>(i[i.APPLICATION=-1]="APPLICATION",i[i.PROFILE=0]="PROFILE",i[i.WORKSPACE=1]="WORKSPACE",i))(Be||{}),ai=(i=>(i[i.USER=0]="USER",i[i.MACHINE=1]="MACHINE",i))(ai||{});function FJ(i){const e=i.get(UT);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}hS(FJ,"loadKeyTargets");class X6 extends ${constructor(e={flushInterval:X6.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e}static{hS(this,"AbstractStorageService")}static DEFAULT_FLUSH_INTERVAL=60*1e3;_onDidChangeValue=this._register(new NA);_onDidChangeTarget=this._register(new NA);onDidChangeTarget=this._onDidChangeTarget.event;_onWillSaveState=this._register(new x);onWillSaveState=this._onWillSaveState.event;initializationPromise;flushWhenIdleScheduler=this._register(new xn(()=>this.doFlushWhenIdle(),this.options.flushInterval));runFlushWhenIdle=this._register(new Yi);onDidChangeValue(e,t,n){return H.filter(this._onDidChangeValue.event,s=>s.scope===e&&(t===void 0||s.key===t),n)}doFlushWhenIdle(){this.runFlushWhenIdle.value=Z0(()=>{this.shouldFlushWhenIdle()&&this.flush(),this.flushWhenIdleScheduler.schedule()})}shouldFlushWhenIdle(){return!0}stopFlushWhenIdle(){ii([this.runFlushWhenIdle,this.flushWhenIdleScheduler])}initialize(){return this.initializationPromise||(this.initializationPromise=(async()=>{_i("code/willInitStorage");try{await this.doInitialize()}finally{_i("code/didInitStorage")}this.flushWhenIdleScheduler.schedule()})()),this.initializationPromise}emitDidChangeValue(e,t){const{key:n,external:s}=t;if(n===UT){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:n,target:this.getKeyTargets(e)[n],external:s})}emitWillSaveState(e){this._onWillSaveState.fire({reason:e})}get(e,t,n){return this.getStorage(t)?.get(e,n)}getBoolean(e,t,n){return this.getStorage(t)?.getBoolean(e,n)}getNumber(e,t,n){return this.getStorage(t)?.getNumber(e,n)}getObject(e,t,n){return this.getStorage(t)?.getObject(e,n)}storeAll(e,t){this.withPausedEmitters(()=>{for(const n of e)this.store(n.key,n.value,n.scope,n.target,t)})}store(e,t,n,s,o=!1){if(Ls(t)){this.remove(e,n,o);return}this.withPausedEmitters(()=>{this.updateKeyTarget(e,n,s),this.getStorage(n)?.set(e,t,o)})}remove(e,t,n=!1){this.withPausedEmitters(()=>{this.updateKeyTarget(e,t,void 0),this.getStorage(t)?.delete(e,n)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}keys(e,t){const n=[],s=this.getKeyTargets(e);for(const o of Object.keys(s))s[o]===t&&n.push(o);return n}updateKeyTarget(e,t,n,s=!1){const o=this.getKeyTargets(t);typeof n=="number"?o[e]!==n&&(o[e]=n,this.getStorage(t)?.set(UT,JSON.stringify(o),s)):typeof o[e]=="number"&&(delete o[e],this.getStorage(t)?.set(UT,JSON.stringify(o),s))}_workspaceKeyTargets=void 0;get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}_profileKeyTargets=void 0;get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}_applicationKeyTargets=void 0;get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?FJ(t):Object.create(null)}isNew(e){return this.getBoolean(bIe,e)===!0}async flush(e=0){this._onWillSaveState.fire({reason:e});const t=this.getStorage(-1),n=this.getStorage(0),s=this.getStorage(1);switch(e){case 0:await Ka.settled([t?.whenFlushed()??Promise.resolve(),n?.whenFlushed()??Promise.resolve(),s?.whenFlushed()??Promise.resolve()]);break;case 1:await Ka.settled([t?.flush(0)??Promise.resolve(),n?.flush(0)??Promise.resolve(),s?.flush(0)??Promise.resolve()]);break}}async log(){const e=this.getStorage(-1)?.items??new Map,t=this.getStorage(0)?.items??new Map,n=this.getStorage(1)?.items??new Map;return VJ(e,t,n,this.getLogDetails(-1)??"",this.getLogDetails(0)??"",this.getLogDetails(1)??"")}async optimize(e){return await this.flush(),this.getStorage(e)?.optimize()}async switch(e,t){return this.emitWillSaveState(0),PQ(e)?this.switchToProfile(e,t):this.switchToWorkspace(e,t)}canSwitchProfile(e,t){return!(e.id===t.id||OF(t)&&OF(e))}switchData(e,t,n){this.withPausedEmitters(()=>{const s=new Set;for(const[o,r]of e)s.add(o),t.get(o)!==r&&this.emitDidChangeValue(n,{key:o,external:!0});for(const[o]of t.items)s.has(o)||this.emitDidChangeValue(n,{key:o,external:!0})})}}function OF(i){return i.isDefault||!!i.useDefaultFlags?.globalState}hS(OF,"isProfileUsingDefaultStorage");class vIe extends X6{static{hS(this,"InMemoryStorageService")}applicationStorage=this._register(new J1(new UO,{hint:HT.STORAGE_IN_MEMORY}));profileStorage=this._register(new J1(new UO,{hint:HT.STORAGE_IN_MEMORY}));workspaceStorage=this._register(new J1(new UO,{hint:HT.STORAGE_IN_MEMORY}));constructor(){super(),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}getLogDetails(e){switch(e){case-1:return"inMemory (application)";case 0:return"inMemory (profile)";default:return"inMemory (workspace)"}}async doInitialize(){}async switchToProfile(){}async switchToWorkspace(){}shouldFlushWhenIdle(){return!1}hasScope(e){return!1}}async function VJ(i,e,t,n,s,o){const r=hS(m=>{try{return JSON.parse(m)}catch{return m}},"safeParse"),a=new Map,l=new Map;i.forEach((m,_)=>{a.set(_,m),l.set(_,r(m))});const c=new Map,d=new Map;e.forEach((m,_)=>{c.set(_,m),d.set(_,r(m))});const h=new Map,u=new Map;t.forEach((m,_)=>{h.set(_,m),u.set(_,r(m))}),console.group(n!==s?`Storage: Application (path: ${n})`:`Storage: Application & Profile (path: ${n}, default profile)`);const f=[];if(a.forEach((m,_)=>{f.push({key:_,value:m})}),console.table(f),console.groupEnd(),console.log(l),n!==s){console.group(`Storage: Profile (path: ${s}, profile specific)`);const m=[];c.forEach((_,w)=>{m.push({key:w,value:_})}),console.table(m),console.groupEnd(),console.log(d)}console.group(`Storage: Workspace (path: ${o})`);const p=[];h.forEach((m,_)=>{p.push({key:_,value:m})}),console.table(p),console.groupEnd(),console.log(u)}hS(VJ,"logStorage");var wIe=Object.defineProperty,WJ=(i,e)=>wIe(i,"name",{value:e,configurable:!0});class er{constructor(e,t){this.storageService=t,this.id=er.COMMON_PREFIX+e}static{WJ(this,"Memento")}static applicationMementos=new Map;static profileMementos=new Map;static workspaceMementos=new Map;static COMMON_PREFIX="memento/";id;getMemento(e,t){switch(e){case Be.WORKSPACE:{let n=er.workspaceMementos.get(this.id);return n||(n=new zO(this.id,e,t,this.storageService),er.workspaceMementos.set(this.id,n)),n.getMemento()}case Be.PROFILE:{let n=er.profileMementos.get(this.id);return n||(n=new zO(this.id,e,t,this.storageService),er.profileMementos.set(this.id,n)),n.getMemento()}case Be.APPLICATION:{let n=er.applicationMementos.get(this.id);return n||(n=new zO(this.id,e,t,this.storageService),er.applicationMementos.set(this.id,n)),n.getMemento()}}}onDidChangeValue(e,t){return this.storageService.onDidChangeValue(e,this.id,t)}saveMemento(){er.workspaceMementos.get(this.id)?.save(),er.profileMementos.get(this.id)?.save(),er.applicationMementos.get(this.id)?.save()}reloadMemento(e){let t;switch(e){case Be.APPLICATION:t=er.applicationMementos.get(this.id);break;case Be.PROFILE:t=er.profileMementos.get(this.id);break;case Be.WORKSPACE:t=er.workspaceMementos.get(this.id);break}t?.reload()}static clear(e){switch(e){case Be.WORKSPACE:er.workspaceMementos.clear();break;case Be.PROFILE:er.profileMementos.clear();break;case Be.APPLICATION:er.applicationMementos.clear();break}}}class zO{constructor(e,t,n,s){this.id=e,this.scope=t,this.target=n,this.storageService=s,this.mementoObj=this.doLoad()}static{WJ(this,"ScopedMemento")}mementoObj;doLoad(){try{return this.storageService.getObject(this.id,this.scope,{})}catch(e){Kt(`[memento]: failed to parse contents: ${e} (id: ${this.id}, scope: ${this.scope}, contents: ${this.storageService.get(this.id,this.scope)})`)}return{}}getMemento(){return this.mementoObj}reload(){for(const e of Object.getOwnPropertyNames(this.mementoObj))delete this.mementoObj[e];Object.assign(this.mementoObj,this.doLoad())}save(){R0(this.mementoObj)?this.storageService.remove(this.id,this.scope):this.storageService.store(this.id,this.mementoObj,this.scope,this.target)}}var CIe=Object.defineProperty,yIe=(i,e)=>CIe(i,"name",{value:e,configurable:!0});class VP extends Ky{constructor(e,t,n){super(t),this.id=e,this.memento=new er(this.id,n),this._register(n.onWillSaveState(()=>{this.saveState(),this.memento.saveMemento()}))}static{yIe(this,"Component")}memento;getId(){return this.id}getMemento(e,t){return this.memento.getMemento(e,t)}reloadMemento(e){return this.memento.reloadMemento(e)}onDidChangeMementoValue(e,t){return this.memento.onDidChangeValue(e,t)}saveState(){}}var SIe=Object.defineProperty,WP=(i,e)=>SIe(i,"name",{value:e,configurable:!0});function Q6(i){return(e,t,n)=>{let s=null,o=null;if(typeof n.value=="function"?(s="value",o=n.value):typeof n.get=="function"&&(s="get",o=n.get),!o)throw new Error("not supported");n[s]=i(o,t)}}WP(Q6,"createDecorator");function Ie(i,e,t){let n=null,s=null;if(typeof t.value=="function"?(n="value",s=t.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",s=t.get),!s)throw new Error("not supported");const o=`$memoize$${e}`;t[n]=function(...r){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,r)}),this[o]}}WP(Ie,"memoize");function EIe(i,e,t){return Q6((n,s)=>{const o=`$debounce$${s}`,r=`$debounce$result$${s}`;return function(...a){this[r]||(this[r]=t?t():void 0),clearTimeout(this[o]),e&&(this[r]=e(this[r],...a),a=[this[r]]),this[o]=setTimeout(()=>{n.apply(this,a),this[r]=t?t():void 0},i)}})}WP(EIe,"debounce");function LIe(i,e,t){return Q6((n,s)=>{const o=`$throttle$timer$${s}`,r=`$throttle$result$${s}`,a=`$throttle$lastRun$${s}`,l=`$throttle$pending$${s}`;return function(...c){if(this[r]||(this[r]=t?t():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),e&&(this[r]=e(this[r],...c)),this[l])return;const d=this[a]+i;d<=Date.now()?(this[a]=Date.now(),n.apply(this,[this[r]]),this[r]=t?t():void 0):(this[l]=!0,this[o]=setTimeout(()=>{this[l]=!1,this[a]=Date.now(),n.apply(this,[this[r]]),this[r]=t?t():void 0},d-Date.now()))}})}WP(LIe,"throttle");var HJ=Object.defineProperty,DIe=Object.getOwnPropertyDescriptor,IIe=(i,e)=>HJ(i,"name",{value:e,configurable:!0}),TIe=(i,e,t,n)=>{for(var s=DIe(e,t),o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=r(e,t,s)||s);return s&&HJ(e,t,s),s},wt;(i=>{i.Tap="-monaco-gesturetap",i.Change="-monaco-gesturechange",i.Start="-monaco-gesturestart",i.End="-monaco-gesturesend",i.Contextmenu="-monaco-gesturecontextmenu"})(wt||(wt={}));const UJ=class Vr extends ${static{IIe(this,"Gesture")}static SCROLL_FRICTION=-.005;static INSTANCE;static HOLD_DELAY=700;dispatched=!1;targets=new ru;ignoreTargets=new ru;handle;activeTouches;_lastSetTapCountTime;static CLEAR_TAP_COUNT_TIME=400;constructor(){super(),this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(H.runAndSubscribe(JN,({window:e,disposables:t})=>{t.add(F(e.document,"touchstart",n=>this.onTouchStart(n),{passive:!1})),t.add(F(e.document,"touchend",n=>this.onTouchEnd(e,n))),t.add(F(e.document,"touchmove",n=>this.onTouchMove(n),{passive:!1}))},{window:_e,disposables:this._store}))}static addTarget(e){if(!Vr.isTouchDevice())return $.None;Vr.INSTANCE||(Vr.INSTANCE=Eb(new Vr));const t=Vr.INSTANCE.targets.push(e);return ye(t)}static ignoreTarget(e){if(!Vr.isTouchDevice())return $.None;Vr.INSTANCE||(Vr.INSTANCE=Eb(new Vr));const t=Vr.INSTANCE.ignoreTargets.push(e);return ye(t)}static isTouchDevice(){return"ontouchstart"in _e||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,s=e.targetTouches.length;n<s;n++){const o=e.targetTouches.item(n);this.activeTouches[o.identifier]={id:o.identifier,initialTarget:o.target,initialTimeStamp:t,initialPageX:o.pageX,initialPageY:o.pageY,rollingTimestamps:[t],rollingPageX:[o.pageX],rollingPageY:[o.pageY]};const r=this.newGestureEvent(wt.Start,o.target);r.pageX=o.pageX,r.pageY=o.pageY,this.dispatchEvent(r)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const n=Date.now(),s=Object.keys(this.activeTouches).length;for(let o=0,r=t.changedTouches.length;o<r;o++){const a=t.changedTouches.item(o);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}const l=this.activeTouches[a.identifier],c=Date.now()-l.initialTimeStamp;if(c<Vr.HOLD_DELAY&&Math.abs(l.initialPageX-Ur(l.rollingPageX))<30&&Math.abs(l.initialPageY-Ur(l.rollingPageY))<30){const d=this.newGestureEvent(wt.Tap,l.initialTarget);d.pageX=Ur(l.rollingPageX),d.pageY=Ur(l.rollingPageY),this.dispatchEvent(d)}else if(c>=Vr.HOLD_DELAY&&Math.abs(l.initialPageX-Ur(l.rollingPageX))<30&&Math.abs(l.initialPageY-Ur(l.rollingPageY))<30){const d=this.newGestureEvent(wt.Contextmenu,l.initialTarget);d.pageX=Ur(l.rollingPageX),d.pageY=Ur(l.rollingPageY),this.dispatchEvent(d)}else if(s===1){const d=Ur(l.rollingPageX),h=Ur(l.rollingPageY),u=Ur(l.rollingTimestamps)-l.rollingTimestamps[0],f=d-l.rollingPageX[0],p=h-l.rollingPageY[0],m=[...this.targets].filter(_=>l.initialTarget instanceof Node&&_.contains(l.initialTarget));this.inertia(e,m,n,Math.abs(f)/u,f>0?1:-1,d,Math.abs(p)/u,p>0?1:-1,h)}this.dispatchEvent(this.newGestureEvent(wt.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===wt.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>Vr.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===wt.Change||e.type===wt.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const n of this.ignoreTargets)if(n.contains(e.initialTarget))return;const t=[];for(const n of this.targets)if(n.contains(e.initialTarget)){let s=0,o=e.initialTarget;for(;o&&o!==n;)s++,o=o.parentElement;t.push([s,n])}t.sort((n,s)=>n[0]-s[0]);for(const[n,s]of t)s.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,n,s,o,r,a,l,c){this.handle=xo(e,()=>{const d=Date.now(),h=d-n;let u=0,f=0,p=!0;s+=Vr.SCROLL_FRICTION*h,a+=Vr.SCROLL_FRICTION*h,s>0&&(p=!1,u=o*s*h),a>0&&(p=!1,f=l*a*h);const m=this.newGestureEvent(wt.Change);m.translationX=u,m.translationY=f,t.forEach(_=>_.dispatchEvent(m)),p||this.inertia(e,t,d,s,o,r+u,a,l,c+f)})}onTouchMove(e){const t=Date.now();for(let n=0,s=e.changedTouches.length;n<s;n++){const o=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("end of an UNKNOWN touch",o);continue}const r=this.activeTouches[o.identifier],a=this.newGestureEvent(wt.Change,r.initialTarget);a.translationX=o.pageX-Ur(r.rollingPageX),a.translationY=o.pageY-Ur(r.rollingPageY),a.pageX=o.pageX,a.pageY=o.pageY,this.dispatchEvent(a),r.rollingPageX.length>3&&(r.rollingPageX.shift(),r.rollingPageY.shift(),r.rollingTimestamps.shift()),r.rollingPageX.push(o.pageX),r.rollingPageY.push(o.pageY),r.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};TIe([Ie],UJ,"isTouchDevice");let Gn=UJ;var AIe=Object.defineProperty,SI=(i,e)=>AIe(i,"name",{value:e,configurable:!0});class Je{static{SI(this,"DomEmitter")}emitter;get event(){return this.emitter.event}constructor(e,t,n){const s=SI(o=>this.emitter.fire(o),"fn");this.emitter=new x({onWillAddFirstListener:SI(()=>e.addEventListener(t,s,n),"onWillAddFirstListener"),onDidRemoveLastListener:SI(()=>e.removeEventListener(t,s,n),"onDidRemoveLastListener")})}dispose(){this.emitter.dispose()}}var zJ=Object.defineProperty,xIe=Object.getOwnPropertyDescriptor,Td=(i,e)=>zJ(i,"name",{value:e,configurable:!0}),uS=(i,e,t,n)=>{for(var s=xIe(e,t),o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=r(e,t,s)||s);return s&&zJ(e,t,s),s};const kIe=!1;var ke=(i=>(i[i.VERTICAL=0]="VERTICAL",i[i.HORIZONTAL=1]="HORIZONTAL",i))(ke||{}),eg=(i=>(i[i.Disabled=0]="Disabled",i[i.AtMinimum=1]="AtMinimum",i[i.AtMaximum=2]="AtMaximum",i[i.Enabled=3]="Enabled",i))(eg||{});let $J=4;const GJ=new x;function NIe(i){$J=i,GJ.fire(i)}Td(NIe,"setGlobalSashSize");let KJ=300;const jJ=new x;function PIe(i){KJ=i,jJ.fire(i)}Td(PIe,"setGlobalHoverDelay");class J6{constructor(e){this.el=e}static{Td(this,"MouseEventFactory")}disposables=new te;get onPointerMove(){return this.disposables.add(new Je(ve(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new Je(ve(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}uS([Ie],J6.prototype,"onPointerMove");uS([Ie],J6.prototype,"onPointerUp");class e3{constructor(e){this.el=e}static{Td(this,"GestureEventFactory")}disposables=new te;get onPointerMove(){return this.disposables.add(new Je(this.el,wt.Change)).event}get onPointerUp(){return this.disposables.add(new Je(this.el,wt.End)).event}dispose(){this.disposables.dispose()}}uS([Ie],e3.prototype,"onPointerMove");uS([Ie],e3.prototype,"onPointerUp");class xx{constructor(e){this.factory=e}static{Td(this,"OrthogonalPointerEventFactory")}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}uS([Ie],xx.prototype,"onPointerMove");uS([Ie],xx.prototype,"onPointerUp");const hU="pointer-events-disabled";class El extends ${static{Td(this,"Sash")}el;layoutProvider;orientation;size;hoverDelay=KJ;hoverDelayer=this._register(new $y(this.hoverDelay));_state=3;onDidEnablementChange=this._register(new x);_onDidStart=this._register(new x);_onDidChange=this._register(new x);_onDidReset=this._register(new x);_onDidEnd=this._register(new x);orthogonalStartSashDisposables=this._register(new te);_orthogonalStartSash;orthogonalStartDragHandleDisposables=this._register(new te);_orthogonalStartDragHandle;orthogonalEndSashDisposables=this._register(new te);_orthogonalEndSash;orthogonalEndDragHandleDisposables=this._register(new te);_orthogonalEndDragHandle;get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}onDidStart=this._onDidStart.event;onDidChange=this._onDidChange.event;onDidReset=this._onDidReset.event;onDidEnd=this._onDidEnd.event;linkedSash=void 0;set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=Td(n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=Le(this.el,ce(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(ye(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Je(this._orthogonalStartDragHandle,"mouseenter")).event(()=>El.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Je(this._orthogonalStartDragHandle,"mouseleave")).event(()=>El.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))},"onChange");this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=Td(n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=Le(this.el,ce(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(ye(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Je(this._orthogonalEndDragHandle,"mouseenter")).event(()=>El.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Je(this._orthogonalEndDragHandle,"mouseleave")).event(()=>El.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))},"onChange");this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,n){super(),this.el=Le(e,ce(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),Ue&&this.el.classList.add("mac");const s=this._register(new Je(this.el,"mousedown")).event;this._register(s(h=>this.onPointerStart(h,new J6(e)),this));const o=this._register(new Je(this.el,"dblclick")).event;this._register(o(this.onPointerDoublePress,this));const r=this._register(new Je(this.el,"mouseenter")).event;this._register(r(()=>El.onMouseEnter(this)));const a=this._register(new Je(this.el,"mouseleave")).event;this._register(a(()=>El.onMouseLeave(this))),this._register(Gn.addTarget(this.el));const l=this._register(new Je(this.el,wt.Start)).event;this._register(l(h=>this.onPointerStart(h,new e3(this.el)),this));const c=this._register(new Je(this.el,wt.Tap)).event;let d;this._register(c(h=>{if(d){clearTimeout(d),d=void 0,this.onPointerDoublePress(h);return}clearTimeout(d),d=setTimeout(()=>d=void 0,250)},this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=$J,this._register(GJ.event(h=>{this.size=h,this.layout()}))),this._register(jJ.event(h=>this.hoverDelay=h)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",kIe),this.layout()}onPointerStart(e,t){Fe.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const p=this.getOrthogonalSash(e);p&&(n=!0,e.__orthogonalSashEvent=!0,p.onPointerStart(e,new xx(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new xx(t))),!this.state)return;const s=this.el.ownerDocument.getElementsByTagName("iframe");for(const p of s)p.classList.add(hU);const o=e.pageX,r=e.pageY,a=e.altKey,l={startX:o,currentX:o,startY:r,currentY:r,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=ic(this.el),d=Td(()=>{let p="";n?p="all-scroll":this.orientation===1?this.state===1?p="s-resize":this.state===2?p="n-resize":p=Ue?"row-resize":"ns-resize":this.state===1?p="e-resize":this.state===2?p="w-resize":p=Ue?"col-resize":"ew-resize",c.textContent=`* { cursor: ${p} !important; }`},"updateStyle"),h=new te;d(),n||this.onDidEnablementChange.event(d,null,h);const u=Td(p=>{Fe.stop(p,!1);const m={startX:o,currentX:p.pageX,startY:r,currentY:p.pageY,altKey:a};this._onDidChange.fire(m)},"onPointerMove"),f=Td(p=>{Fe.stop(p,!1),c.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),h.dispose();for(const m of s)m.classList.remove(hU)},"onPointerUp");t.onPointerMove(u,null,h),t.onPointerUp(f,null,h),h.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&El.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&El.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){El.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){const t=e.initialTarget??e.target;if(!(!t||!xs(t))&&t.classList.contains("orthogonal-drag-handle"))return t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}var RIe=Object.defineProperty,t3=(i,e)=>RIe(i,"name",{value:e,configurable:!0});class i3{constructor(e){this.domNode=e}static{t3(this,"FastDomNode")}_maxWidth="";_width="";_height="";_top="";_left="";_bottom="";_right="";_paddingTop="";_paddingLeft="";_paddingBottom="";_paddingRight="";_fontFamily="";_fontWeight="";_fontSize="";_fontStyle="";_fontFeatureSettings="";_fontVariationSettings="";_textDecoration="";_lineHeight="";_letterSpacing="";_className="";_display="";_position="";_visibility="";_color="";_backgroundColor="";_layerHint=!1;_contain="none";_boxShadow="";setMaxWidth(e){const t=_a(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=_a(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=_a(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=_a(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=_a(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=_a(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=_a(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){const t=_a(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){const t=_a(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){const t=_a(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){const t=_a(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=_a(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=_a(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=_a(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function _a(i){return typeof i=="number"?`${i}px`:i}t3(_a,"numberAsPixels");function Ut(i){return new i3(i)}t3(Ut,"createFastDomNode");var OIe=Object.defineProperty,MIe=(i,e)=>OIe(i,"name",{value:e,configurable:!0});class HP{static{MIe(this,"GlobalPointerMoveMonitor")}_hooks=new te;_pointerMoveCallback=null;_onStopCallback=null;dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,s,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=s,this._onStopCallback=o;let r=e;try{e.setPointerCapture(t),this._hooks.add(ye(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{r=ve(e)}this._hooks.add(F(r,Q.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(F(r,Q.POINTER_UP,a=>this.stopMonitoring(!0)))}}var BIe=Object.defineProperty,FIe=(i,e)=>BIe(i,"name",{value:e,configurable:!0});let Jc=class extends ${static{FIe(this,"Widget")}onclick(e,t){this._register(F(e,Q.CLICK,n=>t(new $n(ve(e),n))))}onmousedown(e,t){this._register(F(e,Q.MOUSE_DOWN,n=>t(new $n(ve(e),n))))}onmouseover(e,t){this._register(F(e,Q.MOUSE_OVER,n=>t(new $n(ve(e),n))))}onmouseleave(e,t){this._register(F(e,Q.MOUSE_LEAVE,n=>t(new $n(ve(e),n))))}onkeydown(e,t){this._register(F(e,Q.KEY_DOWN,n=>t(new Pt(n))))}onkeyup(e,t){this._register(F(e,Q.KEY_UP,n=>t(new Pt(n))))}oninput(e,t){this._register(F(e,Q.INPUT,t))}onblur(e,t){this._register(F(e,Q.BLUR,t))}onfocus(e,t){this._register(F(e,Q.FOCUS,t))}onchange(e,t){this._register(F(e,Q.CHANGE,t))}ignoreGesture(e){return Gn.ignoreTarget(e)}};var VIe=Object.defineProperty,uU=(i,e)=>VIe(i,"name",{value:e,configurable:!0});const iy=11;class WIe extends Jc{static{uU(this,"ScrollbarArrow")}_onActivate;bgDomNode;domNode;_pointerdownRepeatTimer;_pointerdownScheduleRepeatTimer;_pointerMoveMonitor;constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...Ne.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=iy+"px",this.domNode.style.height=iy+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new HP),this._register(Gs(this.bgDomNode,Q.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(Gs(this.domNode,Q.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new yq),this._pointerdownScheduleRepeatTimer=this._register(new NL)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=uU(()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,ve(e))},"scheduleRepeater");this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}var HIe=Object.defineProperty,UIe=(i,e)=>HIe(i,"name",{value:e,configurable:!0});const zIe=20;class ny{static{UIe(this,"ScrollbarState")}_scrollbarSize;_oppositeScrollbarSize;_arrowSize;_visibleSize;_scrollSize;_scrollPosition;_computedAvailableSize;_computedIsNeeded;_computedSliderSize;_computedSliderRatio;_computedSliderPosition;constructor(e,t,n,s,o,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=s,this._scrollSize=o,this._scrollPosition=r,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new ny(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,s,o){const r=Math.max(0,n-e),a=Math.max(0,r-2*t),l=s>0&&s>n;if(!l)return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(zIe,Math.floor(n*a/s))),d=(a-c)/(s-n),h=o*d;return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:d,computedSliderPosition:Math.round(h)}}_refreshComputedValues(){const e=ny._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}var $Ie=Object.defineProperty,GIe=(i,e)=>$Ie(i,"name",{value:e,configurable:!0});class KIe extends ${static{GIe(this,"ScrollbarVisibilityController")}_visibility;_visibleClassName;_invisibleClassName;_domNode;_rawShouldBeVisible;_shouldBeVisible;_isNeeded;_isVisible;_revealTimer;constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new NL)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===Bi.Hidden?!1:this._visibility===Bi.Visible?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?" fade":"")))}}var jIe=Object.defineProperty,qIe=(i,e)=>jIe(i,"name",{value:e,configurable:!0});const YIe=140;class qJ extends Jc{static{qIe(this,"AbstractScrollbar")}_host;_scrollable;_scrollByPage;_lazyRender;_scrollbarState;_visibilityController;_pointerMoveMonitor;domNode;slider;_shouldRender;constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new KIe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new HP),this._shouldRender=!0,this.domNode=Ut(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(F(this.domNode.domNode,Q.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new WIe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,s){this.slider=Ut(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(F(this.slider.domNode,Q.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),s=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);n<=o&&o<=s?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,n=e.offsetY;else{const o=Xr(this.domNode.domNode);t=e.pageX-o.left,n=e.pageY-o.top}const s=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{const r=this._sliderOrthogonalPointerPosition(o),a=Math.abs(r-n);if(Nt&&a>YIe){this._setDesiredScrollPositionNow(s.getScrollPosition());return}const c=this._sliderPointerPosition(o)-t;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}var ZIe=Object.defineProperty,$O=(i,e)=>ZIe(i,"name",{value:e,configurable:!0});class XIe extends qJ{static{$O(this,"HorizontalScrollbar")}constructor(e,t,n){const s=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new ny(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===Bi.Hidden?0:t.horizontalScrollbarSize,t.vertical===Bi.Hidden?0:t.verticalScrollbarSize,s.width,s.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const r=(t.arrowSize-iy)/2,a=(t.horizontalScrollbarSize-iy)/2;this._createArrow({className:"scra",icon:ee.scrollbarButtonLeft,top:a,left:r,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:$O(()=>this._host.onMouseWheel(new Nb(null,1,0)),"onActivate")}),this._createArrow({className:"scra",icon:ee.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:r,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:$O(()=>this._host.onMouseWheel(new Nb(null,-1,0)),"onActivate")})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===Bi.Hidden?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===Bi.Hidden?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}var QIe=Object.defineProperty,GO=(i,e)=>QIe(i,"name",{value:e,configurable:!0});class JIe extends qJ{static{GO(this,"VerticalScrollbar")}constructor(e,t,n){const s=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new ny(t.verticalHasArrows?t.arrowSize:0,t.vertical===Bi.Hidden?0:t.verticalScrollbarSize,0,s.height,s.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const r=(t.arrowSize-iy)/2,a=(t.verticalScrollbarSize-iy)/2;this._createArrow({className:"scra",icon:ee.scrollbarButtonUp,top:r,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:GO(()=>this._host.onMouseWheel(new Nb(null,0,1)),"onActivate")}),this._createArrow({className:"scra",icon:ee.scrollbarButtonDown,top:void 0,left:a,bottom:r,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:GO(()=>this._host.onMouseWheel(new Nb(null,0,-1)),"onActivate")})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===Bi.Hidden?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}var eTe=Object.defineProperty,Rl=(i,e)=>eTe(i,"name",{value:e,configurable:!0});const tTe=500,gU=50;class iTe{static{Rl(this,"MouseWheelClassifierItem")}timestamp;deltaX;deltaY;score;constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}class UP{static{Rl(this,"MouseWheelClassifier")}static INSTANCE=new UP;_capacity;_memory;_front;_rear;constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,s=this._rear;do{const o=s===this._front?e:Math.pow(2,-n);if(e-=o,t+=this._memory[s].score*o,s===this._front)break;s=(this._capacity+s-1)%this._capacity,n++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(qy){const t=ve(e.browserEvent),n=Kw(t);this.accept(Date.now(),e.deltaX*n,e.deltaY*n)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,n){let s=null;const o=new iTe(e,t,n);this._front===-1&&this._rear===-1?(this._memory[0]=o,this._front=0,this._rear=0):(s=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=o),o.score=this._computeScore(o,s)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let n=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(n+=.25),t){const s=Math.abs(e.deltaX),o=Math.abs(e.deltaY),r=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(s,r),1),c=Math.max(Math.min(o,a),1),d=Math.max(s,r),h=Math.max(o,a);d%l===0&&h%c===0&&(n-=.5)}return Math.min(Math.max(n,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}class n3 extends Jc{static{Rl(this,"AbstractScrollableElement")}_options;_scrollable;_verticalScrollbar;_horizontalScrollbar;_domNode;_leftShadowDomNode;_topShadowDomNode;_topLeftShadowDomNode;_listenOnDomNode;_mouseWheelToDispose;_isDragging;_mouseIsOver;_hideTimeout;_shouldRender;_revealOnScroll;_onScroll=this._register(new x);onScroll=this._onScroll.event;_onWillScroll=this._register(new x);onWillScroll=this._onWillScroll.event;get options(){return this._options}constructor(e,t,n){super(),e.style.overflow="hidden",this._options=ZJ(t),this._scrollable=n,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));const s={onMouseWheel:Rl(o=>this._onMouseWheel(o),"onMouseWheel"),onDragStart:Rl(()=>this._onDragStart(),"onDragStart"),onDragEnd:Rl(()=>this._onDragEnd(),"onDragEnd")};this._verticalScrollbar=this._register(new JIe(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new XIe(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Ut(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Ut(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Ut(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new NL),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=ii(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Ue&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Nb(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=ii(this._mouseWheelToDispose),e)){const n=Rl(s=>{this._onMouseWheel(new Nb(s))},"onMouseWheel");this._mouseWheelToDispose.push(F(this._listenOnDomNode,Q.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;const t=UP.INSTANCE;t.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,r=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&r+o===0?r=o=0:Math.abs(o)>=Math.abs(r)?r=0:o=0),this._options.flipAxes&&([o,r]=[r,o]);const a=!Ue&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!r&&(r=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(r=r*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);const l=this._scrollable.getFutureScrollPosition();let c={};if(o){const d=gU*o,h=l.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(c,h)}if(r){const d=gU*r,h=l.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(c,h)}c=this._scrollable.validateScrollPosition(c),(l.scrollLeft!==c.scrollLeft||l.scrollTop!==c.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),n=!0)}let s=n;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,s=n?" left":"",o=t?" top":"",r=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${r}${o}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),tTe)}}class YJ extends n3{static{Rl(this,"ScrollableElement")}constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new qL({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:Rl(s=>xo(ve(e),s),"scheduleAtNextAnimationFrame")});super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class s3 extends n3{static{Rl(this,"SmoothScrollableElement")}constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class hD extends n3{static{Rl(this,"DomScrollableElement")}_element;constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new qL({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:Rl(s=>xo(ve(e),s),"scheduleAtNextAnimationFrame")});super(e,t,n),this._register(n),this._element=e,this._register(this.onScroll(s=>{s.scrollTopChanged&&(this._element.scrollTop=s.scrollTop),s.scrollLeftChanged&&(this._element.scrollLeft=s.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function ZJ(i){const e={lazyRender:typeof i.lazyRender<"u"?i.lazyRender:!1,className:typeof i.className<"u"?i.className:"",useShadows:typeof i.useShadows<"u"?i.useShadows:!0,handleMouseWheel:typeof i.handleMouseWheel<"u"?i.handleMouseWheel:!0,flipAxes:typeof i.flipAxes<"u"?i.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof i.consumeMouseWheelIfScrollbarIsNeeded<"u"?i.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof i.alwaysConsumeMouseWheel<"u"?i.alwaysConsumeMouseWheel:!1,scrollYToX:typeof i.scrollYToX<"u"?i.scrollYToX:!1,mouseWheelScrollSensitivity:typeof i.mouseWheelScrollSensitivity<"u"?i.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof i.fastScrollSensitivity<"u"?i.fastScrollSensitivity:5,scrollPredominantAxis:typeof i.scrollPredominantAxis<"u"?i.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof i.mouseWheelSmoothScroll<"u"?i.mouseWheelSmoothScroll:!0,arrowSize:typeof i.arrowSize<"u"?i.arrowSize:11,listenOnDomNode:typeof i.listenOnDomNode<"u"?i.listenOnDomNode:null,horizontal:typeof i.horizontal<"u"?i.horizontal:Bi.Auto,horizontalScrollbarSize:typeof i.horizontalScrollbarSize<"u"?i.horizontalScrollbarSize:10,horizontalSliderSize:typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:0,horizontalHasArrows:typeof i.horizontalHasArrows<"u"?i.horizontalHasArrows:!1,vertical:typeof i.vertical<"u"?i.vertical:Bi.Auto,verticalScrollbarSize:typeof i.verticalScrollbarSize<"u"?i.verticalScrollbarSize:10,verticalHasArrows:typeof i.verticalHasArrows<"u"?i.verticalHasArrows:!1,verticalSliderSize:typeof i.verticalSliderSize<"u"?i.verticalSliderSize:0,scrollByPage:typeof i.scrollByPage<"u"?i.scrollByPage:!1};return e.horizontalSliderSize=typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof i.verticalSliderSize<"u"?i.verticalSliderSize:e.verticalScrollbarSize,Ue&&(e.className+=" mac"),e}Rl(ZJ,"resolveOptions");var nTe=Object.defineProperty,Nd=(i,e)=>nTe(i,"name",{value:e,configurable:!0});const sTe={separatorBorder:U.transparent};var Fh=(i=>(i[i.Normal=0]="Normal",i[i.Low=1]="Low",i[i.High=2]="High",i))(Fh||{});class XJ{constructor(e,t,n,s){this.container=e,this.view=t,this.disposable=s,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}static{Nd(this,"ViewItem")}_size;set size(e){this._size=e}get size(){return this._size}_cachedVisibleSize=void 0;get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){if(e!==this.visible){e?(this.size=Kr(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{this.view.setVisible?.(e)}catch(n){console.error("Splitview: Failed to set visible view"),console.error(n)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(n){console.error("Splitview: Failed to layout view"),console.error(n)}}dispose(){this.disposable.dispose()}}class oTe extends XJ{static{Nd(this,"VerticalViewItem")}layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class rTe extends XJ{static{Nd(this,"HorizontalViewItem")}layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var Ea;(i=>{i.Distribute={type:"distribute"};function e(s){return{type:"split",index:s}}i.Split=e,Nd(e,"Split");function t(s){return{type:"auto",index:s}}i.Auto=t,Nd(t,"Auto");function n(s){return{type:"invisible",cachedVisibleSize:s}}i.Invisible=n,Nd(n,"Invisible")})(Ea||(Ea={}));class sy extends ${static{Nd(this,"SplitView")}orientation;el;sashContainer;viewContainer;scrollable;scrollableElement;size=0;layoutContext;_contentSize=0;proportions=void 0;viewItems=[];sashItems=[];sashDragState;state=0;inverseAltBehavior;proportionalLayout;getSashOrthogonalSize;_onDidSashChange=this._register(new x);_onDidSashReset=this._register(new x);_orthogonalStartSash;_orthogonalEndSash;_startSnappingEnabled=!0;_endSnappingEnabled=!0;get contentSize(){return this._contentSize}onDidSashChange=this._onDidSashChange.event;onDidSashReset=this._onDidSashReset.event;onDidScroll;get length(){return this.viewItems.length}get minimumSize(){return this.viewItems.reduce((e,t)=>e+t.minimumSize,0)}get maximumSize(){return this.length===0?Number.POSITIVE_INFINITY:this.viewItems.reduce((e,t)=>e+t.maximumSize,0)}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}get sashes(){return this.sashItems.map(e=>e.sash)}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.orientation=t.orientation??ke.VERTICAL,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===ke.VERTICAL?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=Le(this.el,ce(".sash-container")),this.viewContainer=ce(".split-view-container"),this.scrollable=this._register(new qL({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:Nd(s=>xo(ve(this.el),s),"scheduleAtNextAnimationFrame")})),this.scrollableElement=this._register(new s3(this.viewContainer,{vertical:this.orientation===ke.VERTICAL?t.scrollbarVisibility??Bi.Auto:Bi.Hidden,horizontal:this.orientation===ke.HORIZONTAL?t.scrollbarVisibility??Bi.Auto:Bi.Hidden},this.scrollable));const n=this._register(new Je(this.viewContainer,"scroll")).event;this._register(n(s=>{const o=this.scrollableElement.getScrollPosition(),r=Math.abs(this.viewContainer.scrollLeft-o.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,a=Math.abs(this.viewContainer.scrollTop-o.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(r!==void 0||a!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:r,scrollTop:a})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(s=>{s.scrollTopChanged&&(this.viewContainer.scrollTop=s.scrollTop),s.scrollLeftChanged&&(this.viewContainer.scrollLeft=s.scrollLeft)})),Le(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||sTe),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((s,o)=>{const r=oo(s.visible)||s.visible?s.size:{type:"invisible",cachedVisibleSize:s.size},a=s.view;this.doAddView(a,r,o,!0)}),this._contentSize=this.viewItems.reduce((s,o)=>s+o.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,s){this.doAddView(e,t,n,s)}removeView(e,t){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");if(this.state!==0)throw new Error("Cant modify splitview");this.state=1;try{t?.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index});const n=t?.type==="split"?this.viewItems[t.index]:void 0,s=this.viewItems.splice(e,1)[0];if(n&&(n.size+=s.size),this.viewItems.length>=1){const r=Math.max(e-1,0);this.sashItems.splice(r,1)[0].disposable.dispose()}this.relayout(),t?.type==="distribute"&&this.distributeViewSizes();const o=s.view;return s.dispose(),o}finally{this.state=0}}removeAllViews(){if(this.state!==0)throw new Error("Cant modify splitview");this.state=1;try{const e=this.viewItems.splice(0,this.viewItems.length);for(const n of e)n.dispose();const t=this.sashItems.splice(0,this.sashItems.length);for(const n of t)n.disposable.dispose();return this.relayout(),e.map(n=>n.view)}finally{this.state=0}}moveView(e,t){if(this.state!==0)throw new Error("Cant modify splitview");const n=this.getViewCachedVisibleSize(e),s=typeof n>"u"?this.getViewSize(e):Ea.Invisible(n),o=this.removeView(e);this.addView(o,s,t)}swapViews(e,t){if(this.state!==0)throw new Error("Cant modify splitview");if(e>t)return this.swapViews(t,e);const n=this.getViewSize(e),s=this.getViewSize(t),o=this.removeView(t),r=this.removeView(e);this.addView(o,n,e),this.addView(r,s,t)}isViewVisible(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].visible}setViewVisible(e,t){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");this.viewItems[e].setVisible(t),this.distributeEmptySpace(e),this.layoutViews(),this.saveProportions()}getViewCachedVisibleSize(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].cachedVisibleSize}layout(e,t){const n=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let s=0;for(let o=0;o<this.viewItems.length;o++){const r=this.viewItems[o],a=this.proportions[o];typeof a=="number"?s+=a:e-=r.size}for(let o=0;o<this.viewItems.length;o++){const r=this.viewItems[o],a=this.proportions[o];typeof a=="number"&&s>0&&(r.size=Kr(Math.round(a*e/s),r.minimumSize,r.maximumSize))}}else{const s=nr(this.viewItems.length),o=s.filter(a=>this.viewItems[a].priority===1),r=s.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,o,r)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const s=this.sashItems.findIndex(a=>a.sash===e),o=Ia(F(this.el.ownerDocument.body,"keydown",a=>r(this.sashDragState.current,a.altKey)),F(this.el.ownerDocument.body,"keyup",()=>r(this.sashDragState.current,!1))),r=Nd((a,l)=>{const c=this.viewItems.map(p=>p.size);let d=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(s===this.sashItems.length-1){const m=this.viewItems[s];d=(m.minimumSize-m.size)/2,h=(m.maximumSize-m.size)/2}else{const m=this.viewItems[s+1];d=(m.size-m.maximumSize)/2,h=(m.size-m.minimumSize)/2}let u,f;if(!l){const p=nr(s,-1),m=nr(s+1,this.viewItems.length),_=p.reduce((I,R)=>I+(this.viewItems[R].minimumSize-c[R]),0),w=p.reduce((I,R)=>I+(this.viewItems[R].viewMaximumSize-c[R]),0),v=m.length===0?Number.POSITIVE_INFINITY:m.reduce((I,R)=>I+(c[R]-this.viewItems[R].minimumSize),0),b=m.length===0?Number.NEGATIVE_INFINITY:m.reduce((I,R)=>I+(c[R]-this.viewItems[R].viewMaximumSize),0),C=Math.max(_,b),S=Math.min(v,w),D=this.findFirstSnapIndex(p),T=this.findFirstSnapIndex(m);if(typeof D=="number"){const I=this.viewItems[D],R=Math.floor(I.viewMinimumSize/2);u={index:D,limitDelta:I.visible?C-R:C+R,size:I.size}}if(typeof T=="number"){const I=this.viewItems[T],R=Math.floor(I.viewMinimumSize/2);f={index:T,limitDelta:I.visible?S+R:S-R,size:I.size}}}this.sashDragState={start:a,current:a,index:s,sizes:c,minDelta:d,maxDelta:h,alt:l,snapBefore:u,snapAfter:f,disposable:o}},"resetSashDragState");r(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:s,alt:o,minDelta:r,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const d=e-n,h=this.resize(t,d,s,void 0,void 0,r,a,l,c);if(o){const u=t===this.sashItems.length-1,f=this.viewItems.map(b=>b.size),p=u?t:t+1,m=this.viewItems[p],_=m.size-m.maximumSize,w=m.size-m.minimumSize,v=u?t-1:t+1;this.resize(v,-h,f,void 0,void 0,_,w)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=Kr(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==0)throw new Error("Cant modify splitview");this.state=1;try{const n=nr(this.viewItems.length).filter(a=>a!==e),s=[...n.filter(a=>this.viewItems[a].priority===1),e],o=n.filter(a=>this.viewItems[a].priority===2),r=this.viewItems[e];t=Math.round(t),t=Kr(t,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=t,this.relayout(s,o)}finally{this.state=0}}}isViewExpanded(e){if(e<0||e>=this.viewItems.length)return!1;for(const t of this.viewItems)if(t!==this.viewItems[e]&&t.size>t.minimumSize)return!1;return!0}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=Kr(n,a.minimumSize,a.maximumSize);const s=nr(this.viewItems.length),o=s.filter(a=>this.viewItems[a].priority===1),r=s.filter(a=>this.viewItems[a].priority===2);this.relayout(o,r)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,s){if(this.state!==0)throw new Error("Cant modify splitview");this.state=1;try{const o=ce(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(o):this.viewContainer.insertBefore(o,this.viewContainer.children.item(n));const r=e.onDidChange(u=>this.onViewChange(d,u)),a=ye(()=>o.remove()),l=Ia(r,a);let c;typeof t=="number"?c=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize);const d=this.orientation===ke.VERTICAL?new oTe(o,e,c,l):new rTe(o,e,c,l);if(this.viewItems.splice(n,0,d),this.viewItems.length>1){const u={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},f=this.orientation===ke.VERTICAL?new El(this.sashContainer,{getHorizontalSashTop:Nd(I=>this.getSashPosition(I),"getHorizontalSashTop"),getHorizontalSashWidth:this.getSashOrthogonalSize},{...u,orientation:ke.HORIZONTAL}):new El(this.sashContainer,{getVerticalSashLeft:Nd(I=>this.getSashPosition(I),"getVerticalSashLeft"),getVerticalSashHeight:this.getSashOrthogonalSize},{...u,orientation:ke.VERTICAL}),p=this.orientation===ke.VERTICAL?I=>({sash:f,start:I.startY,current:I.currentY,alt:I.altKey}):I=>({sash:f,start:I.startX,current:I.currentX,alt:I.altKey}),_=H.map(f.onDidStart,p)(this.onSashStart,this),v=H.map(f.onDidChange,p)(this.onSashChange,this),C=H.map(f.onDidEnd,()=>this.sashItems.findIndex(I=>I.sash===f))(this.onSashEnd,this),S=f.onDidReset(()=>{const I=this.sashItems.findIndex(we=>we.sash===f),R=nr(I,-1),G=nr(I+1,this.viewItems.length),K=this.findFirstSnapIndex(R),X=this.findFirstSnapIndex(G);typeof K=="number"&&!this.viewItems[K].visible||typeof X=="number"&&!this.viewItems[X].visible||this._onDidSashReset.fire(I)}),D=Ia(_,v,C,S,f),T={sash:f,disposable:D};this.sashItems.splice(n-1,0,T)}o.appendChild(e.element);let h;typeof t!="number"&&t.type==="split"&&(h=[t.index]),s||this.relayout([n],h),!s&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=0}}relayout(e,t){const n=this.viewItems.reduce((s,o)=>s+o.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(d=>d.size),s,o,r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const d=nr(e,-1),h=nr(e+1,this.viewItems.length);if(o)for(const T of o)qI(d,T),qI(h,T);if(s)for(const T of s)e1(d,T),e1(h,T);const u=d.map(T=>this.viewItems[T]),f=d.map(T=>n[T]),p=h.map(T=>this.viewItems[T]),m=h.map(T=>n[T]),_=d.reduce((T,I)=>T+(this.viewItems[I].minimumSize-n[I]),0),w=d.reduce((T,I)=>T+(this.viewItems[I].maximumSize-n[I]),0),v=h.length===0?Number.POSITIVE_INFINITY:h.reduce((T,I)=>T+(n[I]-this.viewItems[I].minimumSize),0),b=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((T,I)=>T+(n[I]-this.viewItems[I].maximumSize),0),C=Math.max(_,b,r),S=Math.min(v,w,a);let D=!1;if(l){const T=this.viewItems[l.index],I=t>=l.limitDelta;D=I!==T.visible,T.setVisible(I,l.size)}if(!D&&c){const T=this.viewItems[c.index],I=t<c.limitDelta;D=I!==T.visible,T.setVisible(I,c.size)}if(D)return this.resize(e,t,n,s,o,r,a);t=Kr(t,C,S);for(let T=0,I=t;T<u.length;T++){const R=u[T],G=Kr(f[T]+I,R.minimumSize,R.maximumSize),K=G-f[T];I-=K,R.size=G}for(let T=0,I=t;T<p.length;T++){const R=p[T],G=Kr(m[T]-I,R.minimumSize,R.maximumSize),K=G-m[T];I+=K,R.size=G}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let n=this.size-t;const s=nr(this.viewItems.length-1,-1),o=s.filter(a=>this.viewItems[a].priority===1),r=s.filter(a=>this.viewItems[a].priority===2);for(const a of r)qI(s,a);for(const a of o)e1(s,a);typeof e=="number"&&e1(s,e);for(let a=0;n!==0&&a<s.length;a++){const l=this.viewItems[s[a]],c=Kr(l.size+n,l.minimumSize,l.maximumSize),d=c-l.size;n-=d,l.size=c}}layoutViews(){this._contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===ke.VERTICAL?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),s=[...this.viewItems].reverse();e=!1;const o=s.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const r=s.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],d=this.viewItems[l];a+=d.size;const h=!(t[l]&&r[l+1]),u=!(n[l]&&o[l+1]);if(h&&u){const f=nr(l,-1),p=nr(l+1,this.viewItems.length),m=this.findFirstSnapIndex(f),_=this.findFirstSnapIndex(p),w=typeof m=="number"&&!this.viewItems[m].visible,v=typeof _=="number"&&!this.viewItems[_].visible;w&&o[l]&&(a>0||this.startSnappingEnabled)?c.state=eg.AtMinimum:v&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?c.state=eg.AtMaximum:c.state=eg.Disabled}else h&&!u?c.state=eg.AtMinimum:!h&&u?c.state=eg.AtMaximum:c.state=eg.Enabled}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}areViewsDistributed(){let e,t;for(const n of this.viewItems)if(e=e===void 0?n.size:Math.min(e,n.size),t=t===void 0?n.size:Math.max(t,n.size),t-e>2)return!1;return!0}dispose(){this.sashDragState?.disposable.dispose(),ii(this.viewItems),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[],super.dispose()}}var aTe=Object.defineProperty,Zl=(i,e)=>aTe(i,"name",{value:e,configurable:!0});const lTe={separatorBorder:U.transparent};function qh(i){return i===ke.VERTICAL?ke.HORIZONTAL:ke.VERTICAL}Zl(qh,"orthogonal");function cTe(i){return!!i.children}Zl(cTe,"isGridBranchNode");class dTe{constructor(e){this.isLayoutEnabled=e}static{Zl(this,"LayoutController")}}function QJ(i,e){return e===ke.HORIZONTAL?{left:i.start,right:i.end,top:i.orthogonalStart,bottom:i.orthogonalEnd}:{top:i.start,bottom:i.end,left:i.orthogonalStart,right:i.orthogonalEnd}}Zl(QJ,"toAbsoluteBoundarySashes");function JJ(i,e){return e===ke.HORIZONTAL?{start:i.left,end:i.right,orthogonalStart:i.top,orthogonalEnd:i.bottom}:{start:i.top,end:i.bottom,orthogonalStart:i.left,orthogonalEnd:i.right}}Zl(JJ,"fromAbsoluteBoundarySashes");function vc(i,e){if(Math.abs(i)>e)throw new Error("Invalid index");return _q(i,e+1)}Zl(vc,"validateIndex");class Yn{constructor(e,t,n,s,o=0,r=0,a=!1,l){if(this.orientation=e,this.layoutController=t,this.splitviewProportionalLayout=s,this._styles=n,this._size=o,this._orthogonalSize=r,this.element=ce(".monaco-grid-branch-node"),!l)this.splitview=new sy(this.element,{orientation:e,styles:n,proportionalLayout:s}),this.splitview.layout(o,{orthogonalSize:r,absoluteOffset:0,absoluteOrthogonalOffset:0,absoluteSize:o,absoluteOrthogonalSize:r});else{const d={views:l.map(u=>({view:u.node,size:u.node.size,visible:u.visible!==!1})),size:this.orthogonalSize},h={proportionalLayout:s,orientation:e,styles:n};this.children=l.map(u=>u.node),this.splitview=new sy(this.element,{...h,descriptor:d}),this.children.forEach((u,f)=>{const p=f===0,m=f===this.children.length;u.boundarySashes={start:this.boundarySashes.orthogonalStart,end:this.boundarySashes.orthogonalEnd,orthogonalStart:p?this.boundarySashes.start:this.splitview.sashes[f-1],orthogonalEnd:m?this.boundarySashes.end:this.splitview.sashes[f]}})}const c=H.map(this.splitview.onDidSashReset,d=>[d]);this.splitviewSashResetDisposable=c(this._onDidSashReset.fire,this._onDidSashReset),this.updateChildrenEvents()}static{Zl(this,"BranchNode")}element;children=[];splitview;_size;get size(){return this._size}_orthogonalSize;get orthogonalSize(){return this._orthogonalSize}_absoluteOffset=0;get absoluteOffset(){return this._absoluteOffset}_absoluteOrthogonalOffset=0;get absoluteOrthogonalOffset(){return this._absoluteOrthogonalOffset}absoluteOrthogonalSize=0;_styles;get styles(){return this._styles}get width(){return this.orientation===ke.HORIZONTAL?this.size:this.orthogonalSize}get height(){return this.orientation===ke.HORIZONTAL?this.orthogonalSize:this.size}get top(){return this.orientation===ke.HORIZONTAL?this._absoluteOffset:this._absoluteOrthogonalOffset}get left(){return this.orientation===ke.HORIZONTAL?this._absoluteOrthogonalOffset:this._absoluteOffset}get minimumSize(){return this.children.length===0?0:Math.max(...this.children.map((e,t)=>this.splitview.isViewVisible(t)?e.minimumOrthogonalSize:0))}get maximumSize(){return Math.min(...this.children.map((e,t)=>this.splitview.isViewVisible(t)?e.maximumOrthogonalSize:Number.POSITIVE_INFINITY))}get priority(){if(this.children.length===0)return Fh.Normal;const e=this.children.map(t=>typeof t.priority>"u"?Fh.Normal:t.priority);return e.some(t=>t===Fh.High)?Fh.High:e.some(t=>t===Fh.Low)?Fh.Low:Fh.Normal}get proportionalLayout(){return this.children.length===0?!0:this.children.every(e=>e.proportionalLayout)}get minimumOrthogonalSize(){return this.splitview.minimumSize}get maximumOrthogonalSize(){return this.splitview.maximumSize}get minimumWidth(){return this.orientation===ke.HORIZONTAL?this.minimumOrthogonalSize:this.minimumSize}get minimumHeight(){return this.orientation===ke.HORIZONTAL?this.minimumSize:this.minimumOrthogonalSize}get maximumWidth(){return this.orientation===ke.HORIZONTAL?this.maximumOrthogonalSize:this.maximumSize}get maximumHeight(){return this.orientation===ke.HORIZONTAL?this.maximumSize:this.maximumOrthogonalSize}_onDidChange=new x;onDidChange=this._onDidChange.event;_onDidVisibilityChange=new x;onDidVisibilityChange=this._onDidVisibilityChange.event;childrenVisibilityChangeDisposable=new te;_onDidScroll=new x;onDidScrollDisposable=$.None;onDidScroll=this._onDidScroll.event;childrenChangeDisposable=$.None;_onDidSashReset=new x;onDidSashReset=this._onDidSashReset.event;splitviewSashResetDisposable=$.None;childrenSashResetDisposable=$.None;_boundarySashes={};get boundarySashes(){return this._boundarySashes}set boundarySashes(e){if(!(this._boundarySashes.start===e.start&&this._boundarySashes.end===e.end&&this._boundarySashes.orthogonalStart===e.orthogonalStart&&this._boundarySashes.orthogonalEnd===e.orthogonalEnd)){this._boundarySashes=e,this.splitview.orthogonalStartSash=e.orthogonalStart,this.splitview.orthogonalEndSash=e.orthogonalEnd;for(let t=0;t<this.children.length;t++){const n=this.children[t],s=t===0,o=t===this.children.length-1;n.boundarySashes={start:e.orthogonalStart,end:e.orthogonalEnd,orthogonalStart:s?e.start:n.boundarySashes.orthogonalStart,orthogonalEnd:o?e.end:n.boundarySashes.orthogonalEnd}}}}_edgeSnapping=!1;get edgeSnapping(){return this._edgeSnapping}set edgeSnapping(e){if(this._edgeSnapping!==e){this._edgeSnapping=e;for(const t of this.children)t instanceof Yn&&(t.edgeSnapping=e);this.updateSplitviewEdgeSnappingEnablement()}}style(e){this._styles=e,this.splitview.style(e);for(const t of this.children)t instanceof Yn&&t.style(e)}layout(e,t,n){if(this.layoutController.isLayoutEnabled){if(typeof n>"u")throw new Error("Invalid state");this._size=n.orthogonalSize,this._orthogonalSize=e,this._absoluteOffset=n.absoluteOffset+t,this._absoluteOrthogonalOffset=n.absoluteOrthogonalOffset,this.absoluteOrthogonalSize=n.absoluteOrthogonalSize,this.splitview.layout(n.orthogonalSize,{orthogonalSize:e,absoluteOffset:this._absoluteOrthogonalOffset,absoluteOrthogonalOffset:this._absoluteOffset,absoluteSize:n.absoluteOrthogonalSize,absoluteOrthogonalSize:n.absoluteSize}),this.updateSplitviewEdgeSnappingEnablement()}}setVisible(e){for(const t of this.children)t.setVisible(e)}addChild(e,t,n,s){n=vc(n,this.children.length),this.splitview.addView(e,t,n,s),this.children.splice(n,0,e),this.updateBoundarySashes(),this.onDidChildrenChange()}removeChild(e,t){e=vc(e,this.children.length);const n=this.splitview.removeView(e,t);return this.children.splice(e,1),this.updateBoundarySashes(),this.onDidChildrenChange(),n}removeAllChildren(){const e=this.splitview.removeAllViews();return this.children.splice(0,this.children.length),this.updateBoundarySashes(),this.onDidChildrenChange(),e}moveChild(e,t){e=vc(e,this.children.length),t=vc(t,this.children.length),e!==t&&(e<t&&(t-=1),this.splitview.moveView(e,t),this.children.splice(t,0,this.children.splice(e,1)[0]),this.updateBoundarySashes(),this.onDidChildrenChange())}swapChildren(e,t){e=vc(e,this.children.length),t=vc(t,this.children.length),e!==t&&(this.splitview.swapViews(e,t),[this.children[e].boundarySashes,this.children[t].boundarySashes]=[this.children[e].boundarySashes,this.children[t].boundarySashes],[this.children[e],this.children[t]]=[this.children[t],this.children[e]],this.onDidChildrenChange())}resizeChild(e,t){e=vc(e,this.children.length),this.splitview.resizeView(e,t)}isChildExpanded(e){return this.splitview.isViewExpanded(e)}distributeViewSizes(e=!1){if(this.splitview.distributeViewSizes(),e)for(const t of this.children)t instanceof Yn&&t.distributeViewSizes(!0)}getChildSize(e){return e=vc(e,this.children.length),this.splitview.getViewSize(e)}isChildVisible(e){return e=vc(e,this.children.length),this.splitview.isViewVisible(e)}setChildVisible(e,t){if(e=vc(e,this.children.length),this.splitview.isViewVisible(e)===t)return;const n=this.splitview.contentSize===0;this.splitview.setViewVisible(e,t);const s=this.splitview.contentSize===0;(t&&n||!t&&s)&&this._onDidVisibilityChange.fire(t)}getChildCachedVisibleSize(e){return e=vc(e,this.children.length),this.splitview.getViewCachedVisibleSize(e)}updateBoundarySashes(){for(let e=0;e<this.children.length;e++)this.children[e].boundarySashes={start:this.boundarySashes.orthogonalStart,end:this.boundarySashes.orthogonalEnd,orthogonalStart:e===0?this.boundarySashes.start:this.splitview.sashes[e-1],orthogonalEnd:e===this.children.length-1?this.boundarySashes.end:this.splitview.sashes[e]}}onDidChildrenChange(){this.updateChildrenEvents(),this._onDidChange.fire(void 0)}updateChildrenEvents(){const e=H.map(H.any(...this.children.map(s=>s.onDidChange)),()=>{});this.childrenChangeDisposable.dispose(),this.childrenChangeDisposable=e(this._onDidChange.fire,this._onDidChange);const t=H.any(...this.children.map((s,o)=>H.map(s.onDidSashReset,r=>[o,...r])));this.childrenSashResetDisposable.dispose(),this.childrenSashResetDisposable=t(this._onDidSashReset.fire,this._onDidSashReset);const n=H.any(H.signal(this.splitview.onDidScroll),...this.children.map(s=>s.onDidScroll));this.onDidScrollDisposable.dispose(),this.onDidScrollDisposable=n(this._onDidScroll.fire,this._onDidScroll),this.childrenVisibilityChangeDisposable.clear(),this.children.forEach((s,o)=>{s instanceof Yn&&this.childrenVisibilityChangeDisposable.add(s.onDidVisibilityChange(r=>{this.setChildVisible(o,r)}))})}trySet2x2(e){if(this.children.length!==2||e.children.length!==2||this.getChildSize(0)!==e.getChildSize(0))return $.None;const[t,n]=this.children,[s,o]=e.children;if(!(t instanceof Js)||!(n instanceof Js)||!(s instanceof Js)||!(o instanceof Js))return $.None;this.orientation===ke.VERTICAL?(n.linkedWidthNode=s.linkedHeightNode=t,t.linkedWidthNode=o.linkedHeightNode=n,o.linkedWidthNode=t.linkedHeightNode=s,s.linkedWidthNode=n.linkedHeightNode=o):(s.linkedWidthNode=n.linkedHeightNode=t,o.linkedWidthNode=t.linkedHeightNode=n,t.linkedWidthNode=o.linkedHeightNode=s,n.linkedWidthNode=s.linkedHeightNode=o);const r=this.splitview.sashes[0],a=e.splitview.sashes[0];return r.linkedSash=a,a.linkedSash=r,this._onDidChange.fire(void 0),e._onDidChange.fire(void 0),ye(()=>{r.linkedSash=a.linkedSash=void 0,t.linkedHeightNode=t.linkedWidthNode=void 0,n.linkedHeightNode=n.linkedWidthNode=void 0,s.linkedHeightNode=s.linkedWidthNode=void 0,o.linkedHeightNode=o.linkedWidthNode=void 0})}updateSplitviewEdgeSnappingEnablement(){this.splitview.startSnappingEnabled=this._edgeSnapping||this._absoluteOrthogonalOffset>0,this.splitview.endSnappingEnabled=this._edgeSnapping||this._absoluteOrthogonalOffset+this._size<this.absoluteOrthogonalSize}dispose(){for(const e of this.children)e.dispose();this._onDidChange.dispose(),this._onDidSashReset.dispose(),this._onDidVisibilityChange.dispose(),this.childrenVisibilityChangeDisposable.dispose(),this.splitviewSashResetDisposable.dispose(),this.childrenSashResetDisposable.dispose(),this.childrenChangeDisposable.dispose(),this.onDidScrollDisposable.dispose(),this.splitview.dispose()}}function eee(i){const[e,t]=H.split(i.onDidChange,oo);return H.any(t,H.map(H.latch(H.map(e,n=>[i.minimumWidth,i.maximumWidth,i.minimumHeight,i.maximumHeight]),ks),n=>{}))}Zl(eee,"createLatchedOnDidChangeViewEvent");class Js{constructor(e,t,n,s,o=0){this.view=e,this.orientation=t,this.layoutController=n,this._orthogonalSize=s,this._size=o;const r=eee(e);this._onDidViewChange=H.map(r,a=>a&&(this.orientation===ke.VERTICAL?a.width:a.height),this.disposables),this.onDidChange=H.any(this._onDidViewChange,this._onDidSetLinkedNode.event,this._onDidLinkedWidthNodeChange.event,this._onDidLinkedHeightNodeChange.event)}static{Zl(this,"LeafNode")}_size=0;get size(){return this._size}_orthogonalSize;get orthogonalSize(){return this._orthogonalSize}absoluteOffset=0;absoluteOrthogonalOffset=0;onDidScroll=H.None;onDidSashReset=H.None;_onDidLinkedWidthNodeChange=new Nl;_linkedWidthNode=void 0;get linkedWidthNode(){return this._linkedWidthNode}set linkedWidthNode(e){this._onDidLinkedWidthNodeChange.input=e?e._onDidViewChange:H.None,this._linkedWidthNode=e,this._onDidSetLinkedNode.fire(void 0)}_onDidLinkedHeightNodeChange=new Nl;_linkedHeightNode=void 0;get linkedHeightNode(){return this._linkedHeightNode}set linkedHeightNode(e){this._onDidLinkedHeightNodeChange.input=e?e._onDidViewChange:H.None,this._linkedHeightNode=e,this._onDidSetLinkedNode.fire(void 0)}_onDidSetLinkedNode=new x;_onDidViewChange;onDidChange;disposables=new te;get width(){return this.orientation===ke.HORIZONTAL?this.orthogonalSize:this.size}get height(){return this.orientation===ke.HORIZONTAL?this.size:this.orthogonalSize}get top(){return this.orientation===ke.HORIZONTAL?this.absoluteOffset:this.absoluteOrthogonalOffset}get left(){return this.orientation===ke.HORIZONTAL?this.absoluteOrthogonalOffset:this.absoluteOffset}get element(){return this.view.element}get minimumWidth(){return this.linkedWidthNode?Math.max(this.linkedWidthNode.view.minimumWidth,this.view.minimumWidth):this.view.minimumWidth}get maximumWidth(){return this.linkedWidthNode?Math.min(this.linkedWidthNode.view.maximumWidth,this.view.maximumWidth):this.view.maximumWidth}get minimumHeight(){return this.linkedHeightNode?Math.max(this.linkedHeightNode.view.minimumHeight,this.view.minimumHeight):this.view.minimumHeight}get maximumHeight(){return this.linkedHeightNode?Math.min(this.linkedHeightNode.view.maximumHeight,this.view.maximumHeight):this.view.maximumHeight}get minimumSize(){return this.orientation===ke.HORIZONTAL?this.minimumHeight:this.minimumWidth}get maximumSize(){return this.orientation===ke.HORIZONTAL?this.maximumHeight:this.maximumWidth}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return this.view.snap}get minimumOrthogonalSize(){return this.orientation===ke.HORIZONTAL?this.minimumWidth:this.minimumHeight}get maximumOrthogonalSize(){return this.orientation===ke.HORIZONTAL?this.maximumWidth:this.maximumHeight}_boundarySashes={};get boundarySashes(){return this._boundarySashes}set boundarySashes(e){this._boundarySashes=e,this.view.setBoundarySashes?.(QJ(e,this.orientation))}layout(e,t,n){if(this.layoutController.isLayoutEnabled){if(typeof n>"u")throw new Error("Invalid state");this._size=e,this._orthogonalSize=n.orthogonalSize,this.absoluteOffset=n.absoluteOffset+t,this.absoluteOrthogonalOffset=n.absoluteOrthogonalOffset,this._layout(this.width,this.height,this.top,this.left)}}cachedWidth=0;cachedHeight=0;cachedTop=0;cachedLeft=0;_layout(e,t,n,s){this.cachedWidth===e&&this.cachedHeight===t&&this.cachedTop===n&&this.cachedLeft===s||(this.cachedWidth=e,this.cachedHeight=t,this.cachedTop=n,this.cachedLeft=s,this.view.layout(e,t,n,s))}setVisible(e){this.view.setVisible?.(e)}dispose(){this.disposables.dispose()}}function o3(i,e,t){if(i instanceof Yn){const n=new Yn(qh(i.orientation),i.layoutController,i.styles,i.splitviewProportionalLayout,e,t,i.edgeSnapping);let s=0;for(let o=i.children.length-1;o>=0;o--){const r=i.children[o],a=r instanceof Yn?r.orthogonalSize:r.size;let l=i.size===0?0:Math.round(e*a/i.size);s+=l,o===0&&(l+=e-s),n.addChild(o3(r,t,l),l,0,!0)}return i.dispose(),n}else{const n=new Js(i.view,qh(i.orientation),i.layoutController,t);return i.dispose(),n}}Zl(o3,"flipNode");class aC{static{Zl(this,"GridView")}element;styles;proportionalLayout;_root;onDidSashResetRelay=new Nl;_onDidScroll=new Nl;_onDidChange=new Nl;_boundarySashes={};layoutController;disposable2x2=$.None;get root(){return this._root}set root(e){const t=this._root;t&&(t.element.remove(),t.dispose()),this._root=e,this.element.appendChild(e.element),this.onDidSashResetRelay.input=e.onDidSashReset,this._onDidChange.input=H.map(e.onDidChange,()=>{}),this._onDidScroll.input=e.onDidScroll}onDidSashReset=this.onDidSashResetRelay.event;onDidScroll=this._onDidScroll.event;onDidChange=this._onDidChange.event;get width(){return this.root.width}get height(){return this.root.height}get minimumWidth(){return this.root.minimumWidth}get minimumHeight(){return this.root.minimumHeight}get maximumWidth(){return this.root.maximumHeight}get maximumHeight(){return this.root.maximumHeight}get orientation(){return this._root.orientation}get boundarySashes(){return this._boundarySashes}set orientation(e){if(this._root.orientation===e)return;const{size:t,orthogonalSize:n,absoluteOffset:s,absoluteOrthogonalOffset:o}=this._root;this.root=o3(this._root,n,t),this.root.layout(t,0,{orthogonalSize:n,absoluteOffset:o,absoluteOrthogonalOffset:s,absoluteSize:t,absoluteOrthogonalSize:n}),this.boundarySashes=this.boundarySashes}set boundarySashes(e){this._boundarySashes=e,this.root.boundarySashes=JJ(e,this.orientation)}set edgeSnapping(e){this.root.edgeSnapping=e}maximizedNode=void 0;_onDidChangeViewMaximized=new x;onDidChangeViewMaximized=this._onDidChangeViewMaximized.event;constructor(e={}){this.element=ce(".monaco-grid-view"),this.styles=e.styles||lTe,this.proportionalLayout=typeof e.proportionalLayout<"u"?!!e.proportionalLayout:!0,this.layoutController=new dTe(!1),this.root=new Yn(ke.VERTICAL,this.layoutController,this.styles,this.proportionalLayout)}style(e){this.styles=e,this.root.style(e)}layout(e,t,n=0,s=0){this.layoutController.isLayoutEnabled=!0;const[o,r,a,l]=this.root.orientation===ke.HORIZONTAL?[t,e,n,s]:[e,t,s,n];this.root.layout(o,0,{orthogonalSize:r,absoluteOffset:a,absoluteOrthogonalOffset:l,absoluteSize:o,absoluteOrthogonalSize:r})}addView(e,t,n){this.hasMaximizedView()&&this.exitMaximizedView(),this.disposable2x2.dispose(),this.disposable2x2=$.None;const[s,o]=cs(n),[r,a]=this.getNode(s);if(a instanceof Yn){const l=new Js(e,qh(a.orientation),this.layoutController,a.orthogonalSize);try{a.addChild(l,t,o)}catch(c){throw l.dispose(),c}}else{const[,l]=cs(r),[,c]=cs(s);let d=0;const h=l.getChildCachedVisibleSize(c);typeof h=="number"&&(d=Ea.Invisible(h)),l.removeChild(c).dispose();const f=new Yn(a.orientation,a.layoutController,this.styles,this.proportionalLayout,a.size,a.orthogonalSize,l.edgeSnapping);l.addChild(f,a.size,c);const p=new Js(a.view,l.orientation,this.layoutController,a.size);f.addChild(p,d,0),typeof t!="number"&&t.type==="split"&&(t=Ea.Split(0));const m=new Js(e,l.orientation,this.layoutController,a.size);f.addChild(m,t,o)}this.trySet2x2()}removeView(e,t){this.hasMaximizedView()&&this.exitMaximizedView(),this.disposable2x2.dispose(),this.disposable2x2=$.None;const[n,s]=cs(e),[o,r]=this.getNode(n);if(!(r instanceof Yn))throw new Error("Invalid location");const a=r.children[s];if(!(a instanceof Js))throw new Error("Invalid location");if(r.removeChild(s,t),a.dispose(),r.children.length===0)throw new Error("Invalid grid state");if(r.children.length>1)return this.trySet2x2(),a.view;if(o.length===0){const f=r.children[0];return f instanceof Js||(r.removeChild(0),r.dispose(),this.root=f,this.boundarySashes=this.boundarySashes,this.trySet2x2()),a.view}const[,l]=cs(o),[,c]=cs(n),d=r.isChildVisible(0),h=r.removeChild(0),u=l.children.map((f,p)=>l.getChildSize(p));if(l.removeChild(c,t),r.dispose(),h instanceof Yn){u.splice(c,1,...h.children.map(p=>p.size));const f=h.removeAllChildren();for(let p=0;p<f.length;p++)l.addChild(f[p],f[p].size,c+p)}else{const f=new Js(h.view,qh(h.orientation),this.layoutController,h.size),p=d?h.orthogonalSize:Ea.Invisible(h.orthogonalSize);l.addChild(f,p,c)}h.dispose();for(let f=0;f<u.length;f++)l.resizeChild(f,u[f]);return this.trySet2x2(),a.view}moveView(e,t,n){this.hasMaximizedView()&&this.exitMaximizedView();const[,s]=this.getNode(e);if(!(s instanceof Yn))throw new Error("Invalid location");s.moveChild(t,n),this.trySet2x2()}swapViews(e,t){this.hasMaximizedView()&&this.exitMaximizedView();const[n,s]=cs(e),[,o]=this.getNode(n);if(!(o instanceof Yn))throw new Error("Invalid from location");const r=o.getChildSize(s),a=o.children[s];if(!(a instanceof Js))throw new Error("Invalid from location");const[l,c]=cs(t),[,d]=this.getNode(l);if(!(d instanceof Yn))throw new Error("Invalid to location");const h=d.getChildSize(c),u=d.children[c];if(!(u instanceof Js))throw new Error("Invalid to location");o===d?o.swapChildren(s,c):(o.removeChild(s),d.removeChild(c),o.addChild(u,r,s),d.addChild(a,h,c)),this.trySet2x2()}resizeView(e,t){this.hasMaximizedView()&&this.exitMaximizedView();const[n,s]=cs(e),[o,r]=this.getNode(n);if(!(r instanceof Yn))throw new Error("Invalid location");if(!t.width&&!t.height)return;const[a,l]=r.orientation===ke.HORIZONTAL?[t.width,t.height]:[t.height,t.width];if(typeof l=="number"&&o.length>0){const[,c]=cs(o),[,d]=cs(n);c.resizeChild(d,l)}typeof a=="number"&&r.resizeChild(s,a),this.trySet2x2()}getViewSize(e){if(!e)return{width:this.root.width,height:this.root.height};const[,t]=this.getNode(e);return{width:t.width,height:t.height}}getViewCachedVisibleSize(e){const[t,n]=cs(e),[,s]=this.getNode(t);if(!(s instanceof Yn))throw new Error("Invalid location");return s.getChildCachedVisibleSize(n)}expandView(e){this.hasMaximizedView()&&this.exitMaximizedView();const[t,n]=this.getNode(e);if(!(n instanceof Js))throw new Error("Invalid location");for(let s=0;s<t.length;s++)t[s].resizeChild(e[s],Number.POSITIVE_INFINITY)}isViewExpanded(e){if(this.hasMaximizedView())return!1;const[t,n]=this.getNode(e);if(!(n instanceof Js))throw new Error("Invalid location");for(let s=0;s<t.length;s++)if(!t[s].isChildExpanded(e[s]))return!1;return!0}maximizeView(e){const[,t]=this.getNode(e);if(!(t instanceof Js))throw new Error("Location is not a LeafNode");if(this.maximizedNode===t)return;this.hasMaximizedView()&&this.exitMaximizedView();function n(s,o){for(let r=0;r<s.children.length;r++){const a=s.children[r];a instanceof Js?a!==o&&s.setChildVisible(r,!1):n(a,o)}}Zl(n,"hideAllViewsBut"),n(this.root,t),this.maximizedNode=t,this._onDidChangeViewMaximized.fire(!0)}exitMaximizedView(){if(!this.maximizedNode)return;this.maximizedNode=void 0;function e(t){for(let n=t.children.length-1;n>=0;n--){const s=t.children[n];s instanceof Js?t.setChildVisible(n,!0):e(s)}}Zl(e,"showViewsInReverseOrder"),e(this.root),this._onDidChangeViewMaximized.fire(!1)}hasMaximizedView(){return this.maximizedNode!==void 0}isViewMaximized(e){const[,t]=this.getNode(e);if(!(t instanceof Js))throw new Error("Location is not a LeafNode");return t===this.maximizedNode}distributeViewSizes(e){if(this.hasMaximizedView()&&this.exitMaximizedView(),!e){this.root.distributeViewSizes(!0);return}const[,t]=this.getNode(e);if(!(t instanceof Yn))throw new Error("Invalid location");t.distributeViewSizes(),this.trySet2x2()}isViewVisible(e){const[t,n]=cs(e),[,s]=this.getNode(t);if(!(s instanceof Yn))throw new Error("Invalid from location");return s.isChildVisible(n)}setViewVisible(e,t){if(this.hasMaximizedView()){this.exitMaximizedView();return}const[n,s]=cs(e),[,o]=this.getNode(n);if(!(o instanceof Yn))throw new Error("Invalid from location");o.setChildVisible(s,t)}getView(e){const t=e?this.getNode(e)[1]:this._root;return this._getViews(t,this.orientation)}static deserialize(e,t,n={}){if(typeof e.orientation!="number")throw new Error("Invalid JSON: 'orientation' property must be a number.");if(typeof e.width!="number")throw new Error("Invalid JSON: 'width' property must be a number.");if(typeof e.height!="number")throw new Error("Invalid JSON: 'height' property must be a number.");if(e.root?.type!=="branch")throw new Error("Invalid JSON: 'root' property must have 'type' value of branch.");const s=e.orientation,o=e.height,r=new aC(n);return r._deserialize(e.root,s,t,o),r}_deserialize(e,t,n,s){this.root=this._deserializeNode(e,t,n,s)}_deserializeNode(e,t,n,s){let o;if(e.type==="branch"){const a=e.data.map(l=>({node:this._deserializeNode(l,qh(t),n,e.size),visible:l.visible}));o=new Yn(t,this.layoutController,this.styles,this.proportionalLayout,e.size,s,void 0,a)}else o=new Js(n.fromJSON(e.data),t,this.layoutController,s,e.size),e.maximized&&!this.maximizedNode&&(this.maximizedNode=o,this._onDidChangeViewMaximized.fire(!0));return o}_getViews(e,t,n){const s={top:e.top,left:e.left,width:e.width,height:e.height};if(e instanceof Js)return{view:e.view,box:s,cachedVisibleSize:n,maximized:this.maximizedNode===e};const o=[];for(let r=0;r<e.children.length;r++){const a=e.children[r],l=e.getChildCachedVisibleSize(r);o.push(this._getViews(a,qh(t),l))}return{children:o,box:s}}getNode(e,t=this.root,n=[]){if(e.length===0)return[n,t];if(!(t instanceof Yn))throw new Error("Invalid location");const[s,...o]=e;if(s<0||s>=t.children.length)throw new Error("Invalid location");const r=t.children[s];return n.push(t),this.getNode(o,r,n)}trySet2x2(){if(this.disposable2x2.dispose(),this.disposable2x2=$.None,this.root.children.length!==2)return;const[e,t]=this.root.children;!(e instanceof Yn)||!(t instanceof Yn)||(this.disposable2x2=e.trySet2x2(t))}getViewMap(e,t){t||(t=this.root),t instanceof Yn?t.children.forEach(n=>this.getViewMap(e,n)):e.set(t.view,t.element)}dispose(){this.onDidSashResetRelay.dispose(),this.root.dispose(),this.element.remove()}}var hTe=Object.defineProperty,Ks=(i,e)=>hTe(i,"name",{value:e,configurable:!0}),Wr=(i=>(i[i.Up=0]="Up",i[i.Down=1]="Down",i[i.Left=2]="Left",i[i.Right=3]="Right",i))(Wr||{});function tee(i){switch(i){case 0:return 1;case 1:return 0;case 2:return 3;case 3:return 2}}Ks(tee,"oppositeDirection");function uD(i){return!!i.children}Ks(uD,"isGridBranchNode");function r3(i,e){if(e.length===0)return i;if(!uD(i))throw new Error("Invalid location");const[t,...n]=e;return r3(i.children[t],n)}Ks(r3,"getGridNode");function iee(i,e){return!(i.start>=e.end||e.start>=i.end)}Ks(iee,"intersects");function a3(i,e){const t=zP(e),n=e===0?i.top:e===3?i.left+i.width:e===1?i.top+i.height:i.left,s={start:t===ke.HORIZONTAL?i.top:i.left,end:t===ke.HORIZONTAL?i.top+i.height:i.left+i.width};return{offset:n,range:s}}Ks(a3,"getBoxBoundary");function nee(i,e,t){const n=[];function s(o,r,a){if(uD(o))for(const l of o.children)s(l,r,a);else{const{offset:l,range:c}=a3(o.box,r);l===a.offset&&iee(c,a.range)&&n.push(o)}}return Ks(s,"_"),s(i,e,t),n}Ks(nee,"findAdjacentBoxLeafNodes");function kx(i,e){return e.length%2===0?qh(i):i}Ks(kx,"getLocationOrientation");function zP(i){return i===0||i===1?ke.VERTICAL:ke.HORIZONTAL}Ks(zP,"getDirectionOrientation");function MF(i,e,t){const n=kx(i,e),s=zP(t);if(n===s){let[o,r]=cs(e);return(t===3||t===1)&&(r+=1),[...o,r]}else{const o=t===3||t===1?1:0;return[...e,o]}}Ks(MF,"getRelativeLocation");function see(i){const e=i.parentElement;if(!e)throw new Error("Invalid grid element");let t=e.firstElementChild,n=0;for(;t!==i&&t!==e.lastElementChild&&t;)t=t.nextElementSibling,n++;return n}Ks(see,"indexInParent");function l3(i){const e=i.parentElement;if(!e)throw new Error("Invalid grid element");if(/\bmonaco-grid-view\b/.test(e.className))return[];const t=see(e),n=e.parentElement.parentElement.parentElement.parentElement;return[...l3(n),t]}Ks(l3,"getGridLocation");var tp;(i=>{i.Distribute={type:"distribute"},i.Split={type:"split"},i.Auto={type:"auto"};function e(t){return{type:"invisible",cachedVisibleSize:t}}i.Invisible=e,Ks(e,"Invisible")})(tp||(tp={}));class uTe extends ${static{Ks(this,"Grid")}gridview;views=new Map;get orientation(){return this.gridview.orientation}set orientation(e){this.gridview.orientation=e}get width(){return this.gridview.width}get height(){return this.gridview.height}get minimumWidth(){return this.gridview.minimumWidth}get minimumHeight(){return this.gridview.minimumHeight}get maximumWidth(){return this.gridview.maximumWidth}get maximumHeight(){return this.gridview.maximumHeight}onDidChange;onDidScroll;get boundarySashes(){return this.gridview.boundarySashes}set boundarySashes(e){this.gridview.boundarySashes=e}set edgeSnapping(e){this.gridview.edgeSnapping=e}get element(){return this.gridview.element}didLayout=!1;onDidChangeViewMaximized;constructor(e,t={}){super(),e instanceof aC?(this.gridview=e,this.gridview.getViewMap(this.views)):this.gridview=new aC(t),this._register(this.gridview),this._register(this.gridview.onDidSashReset(this.onDidSashReset,this)),e instanceof aC||this._addView(e,0,[0]),this.onDidChange=this.gridview.onDidChange,this.onDidScroll=this.gridview.onDidScroll,this.onDidChangeViewMaximized=this.gridview.onDidChangeViewMaximized}style(e){this.gridview.style(e)}layout(e,t,n=0,s=0){this.gridview.layout(e,t,n,s),this.didLayout=!0}addView(e,t,n,s){if(this.views.has(e))throw new Error("Can't add same view twice");const o=zP(s);this.views.size===1&&this.orientation!==o&&(this.orientation=o);const r=this.getViewLocation(n),a=MF(this.gridview.orientation,r,s);let l;if(typeof t=="number")l=t;else if(t.type==="split"){const[,c]=cs(r);l=Ea.Split(c)}else if(t.type==="distribute")l=Ea.Distribute;else if(t.type==="auto"){const[,c]=cs(r);l=Ea.Auto(c)}else l=t;this._addView(e,l,a)}addViewAt(e,t,n){if(this.views.has(e))throw new Error("Can't add same view twice");let s;typeof t=="number"?s=t:t.type==="distribute"?s=Ea.Distribute:s=t,this._addView(e,s,n)}_addView(e,t,n){this.views.set(e,e.element),this.gridview.addView(e,t,n)}removeView(e,t){if(this.views.size===1)throw new Error("Can't remove last view");const n=this.getViewLocation(e);let s;if(t?.type==="distribute")s=Ea.Distribute;else if(t?.type==="auto"){const o=n[n.length-1];s=Ea.Auto(o===0?1:o-1)}this.gridview.removeView(n,s),this.views.delete(e)}moveView(e,t,n,s){const o=this.getViewLocation(e),[r,a]=cs(o),l=this.getViewLocation(n),c=MF(this.gridview.orientation,l,s),[d,h]=cs(c);ks(r,d)?this.gridview.moveView(r,a,h):(this.removeView(e,typeof t=="number"?void 0:t),this.addView(e,t,n,s))}moveViewTo(e,t){const n=this.getViewLocation(e),[s,o]=cs(n),[r,a]=cs(t);if(ks(s,r))this.gridview.moveView(s,o,a);else{const l=this.getViewSize(e),c=kx(this.gridview.orientation,n),d=this.getViewCachedVisibleSize(e),h=typeof d>"u"?c===ke.HORIZONTAL?l.width:l.height:tp.Invisible(d);this.removeView(e),this.addViewAt(e,h,t)}}swapViews(e,t){const n=this.getViewLocation(e),s=this.getViewLocation(t);return this.gridview.swapViews(n,s)}resizeView(e,t){const n=this.getViewLocation(e);return this.gridview.resizeView(n,t)}isViewExpanded(e){const t=this.getViewLocation(e);return this.gridview.isViewExpanded(t)}isViewMaximized(e){const t=this.getViewLocation(e);return this.gridview.isViewMaximized(t)}hasMaximizedView(){return this.gridview.hasMaximizedView()}getViewSize(e){if(!e)return this.gridview.getViewSize();const t=this.getViewLocation(e);return this.gridview.getViewSize(t)}getViewCachedVisibleSize(e){const t=this.getViewLocation(e);return this.gridview.getViewCachedVisibleSize(t)}maximizeView(e){if(this.views.size<2)throw new Error("At least two views are required to maximize a view");const t=this.getViewLocation(e);this.gridview.maximizeView(t)}exitMaximizedView(){this.gridview.exitMaximizedView()}expandView(e){const t=this.getViewLocation(e);this.gridview.expandView(t)}distributeViewSizes(){this.gridview.distributeViewSizes()}isViewVisible(e){const t=this.getViewLocation(e);return this.gridview.isViewVisible(t)}setViewVisible(e,t){const n=this.getViewLocation(e);this.gridview.setViewVisible(n,t)}getViews(){return this.gridview.getView()}getNeighborViews(e,t,n=!1){if(!this.didLayout)throw new Error("Can't call getNeighborViews before first layout");const s=this.getViewLocation(e),o=this.getViews(),r=r3(o,s);let a=a3(r.box,t);return n&&(t===0&&r.box.top===0?a={offset:o.box.top+o.box.height,range:a.range}:t===3&&r.box.left+r.box.width===o.box.width?a={offset:0,range:a.range}:t===1&&r.box.top+r.box.height===o.box.height?a={offset:0,range:a.range}:t===2&&r.box.left===0&&(a={offset:o.box.left+o.box.width,range:a.range})),nee(o,tee(t),a).map(l=>l.view)}getViewLocation(e){const t=this.views.get(e);if(!t)throw new Error("View not found");return l3(t)}onDidSashReset(e){const t=Ks(o=>{const r=this.gridview.getView(o);if(uD(r))return!1;const a=kx(this.orientation,o),l=a===ke.HORIZONTAL?r.view.preferredWidth:r.view.preferredHeight;if(typeof l!="number")return!1;const c=a===ke.HORIZONTAL?{width:Math.round(l)}:{height:Math.round(l)};return this.gridview.resizeView(o,c),!0},"resizeToPreferredSize");if(t(e))return;const[n,s]=cs(e);t([...n,s+1])||this.gridview.distributeViewSizes(n)}}class Sw extends uTe{static{Ks(this,"SerializableGrid")}static serializeNode(e,t){const n=t===ke.VERTICAL?e.box.width:e.box.height;if(!uD(e)){const o={type:"leaf",data:e.view.toJSON(),size:n};return typeof e.cachedVisibleSize=="number"?(o.size=e.cachedVisibleSize,o.visible=!1):e.maximized&&(o.maximized=!0),o}const s=e.children.map(o=>Sw.serializeNode(o,qh(t)));return s.some(o=>o.visible!==!1)?{type:"branch",data:s,size:n}:{type:"branch",data:s,size:n,visible:!1}}static deserialize(e,t,n={}){if(typeof e.orientation!="number")throw new Error("Invalid JSON: 'orientation' property must be a number.");if(typeof e.width!="number")throw new Error("Invalid JSON: 'width' property must be a number.");if(typeof e.height!="number")throw new Error("Invalid JSON: 'height' property must be a number.");const s=aC.deserialize(e,t,n);return new Sw(s,n)}static from(e,t={}){return Sw.deserialize(oee(e),{fromJSON:Ks(n=>n,"fromJSON")},t)}initialLayoutContext=!0;serialize(){return{root:Sw.serializeNode(this.getViews(),this.orientation),orientation:this.orientation,width:this.width,height:this.height}}layout(e,t,n=0,s=0){super.layout(e,t,n,s),this.initialLayoutContext&&(this.initialLayoutContext=!1,this.gridview.trySet2x2())}}function c3(i){return!!i.groups}Ks(c3,"isGridBranchNodeDescriptor");function d3(i,e){if(!e&&i.groups&&i.groups.length<=1&&(i.groups=void 0),!c3(i))return;let t=0,n=0;for(const a of i.groups)d3(a,!1),a.size&&(t+=a.size,n++);const s=n>0?t:1,o=i.groups.length-n,r=s/o;for(const a of i.groups)a.size||(a.size=r)}Ks(d3,"sanitizeGridNodeDescriptor");function h3(i){return c3(i)?{type:"branch",data:i.groups.map(e=>h3(e)),size:i.size}:{type:"leaf",data:i.data,size:i.size}}Ks(h3,"createSerializedNode");function u3(i,e){if(i.type==="branch"){const t=i.data.map(n=>u3(n,qh(e)));if(e===ke.VERTICAL){const n=i.size||(t.length===0?void 0:Math.max(...t.map(o=>o.width||0))),s=t.length===0?void 0:t.reduce((o,r)=>o+(r.height||0),0);return{width:n,height:s}}else{const n=t.length===0?void 0:t.reduce((o,r)=>o+(r.width||0),0),s=i.size||(t.length===0?void 0:Math.max(...t.map(o=>o.height||0)));return{width:n,height:s}}}else{const t=e===ke.VERTICAL?i.size:void 0,n=e===ke.VERTICAL?void 0:i.size;return{width:t,height:n}}}Ks(u3,"getDimensions");function oee(i){d3(i,!0);const e=h3(i),{width:t,height:n}=u3(e,i.orientation);return{root:e,orientation:i.orientation,width:t||1,height:n||1}}Ks(oee,"createSerializedGrid");var gTe=Object.defineProperty,g3=(i,e)=>gTe(i,"name",{value:e,configurable:!0});class gD extends VP{constructor(e,t,n,s,o){super(e,n,s),this.options=t,this.layoutService=o,this._register(o.registerPart(this))}static{g3(this,"Part")}_dimension;get dimension(){return this._dimension}_contentPosition;get contentPosition(){return this._contentPosition}_onDidVisibilityChange=this._register(new x);onDidVisibilityChange=this._onDidVisibilityChange.event;parent;headerArea;titleArea;contentArea;footerArea;partLayout;onThemeChange(e){this.parent&&super.onThemeChange(e)}create(e,t){this.parent=e,this.titleArea=this.createTitleArea(e,t),this.contentArea=this.createContentArea(e,t),this.partLayout=new e0(this.options,this.contentArea),this.updateStyles()}getContainer(){return this.parent}createTitleArea(e,t){}getTitleArea(){return this.titleArea}createContentArea(e,t){}getContentArea(){return this.contentArea}setHeaderArea(e){if(this.headerArea)throw new Error("Header already exists");!this.parent||!this.titleArea||(jC(this.parent,e),e.classList.add("header-or-footer"),e.classList.add("header"),this.headerArea=e,this.partLayout?.setHeaderVisibility(!0),this.relayout())}setFooterArea(e){if(this.footerArea)throw new Error("Footer already exists");!this.parent||!this.titleArea||(this.parent.appendChild(e),e.classList.add("header-or-footer"),e.classList.add("footer"),this.footerArea=e,this.partLayout?.setFooterVisibility(!0),this.relayout())}removeHeaderArea(){this.headerArea&&(this.headerArea.remove(),this.headerArea=void 0,this.partLayout?.setHeaderVisibility(!1),this.relayout())}removeFooterArea(){this.footerArea&&(this.footerArea.remove(),this.footerArea=void 0,this.partLayout?.setFooterVisibility(!1),this.relayout())}relayout(){this.dimension&&this.contentPosition&&this.layout(this.dimension.width,this.dimension.height,this.contentPosition.top,this.contentPosition.left)}layoutContents(e,t){return pt(this.partLayout).layout(e,t)}_onDidChange=this._register(new x);get onDidChange(){return this._onDidChange.event}element;layout(e,t,n,s){this._dimension=new Lt(e,t),this._contentPosition={top:n,left:s}}setVisible(e){this._onDidVisibilityChange.fire(e)}}class e0{constructor(e,t){this.options=e,this.contentArea=t}static{g3(this,"PartLayout")}static HEADER_HEIGHT=35;static TITLE_HEIGHT=35;static Footer_HEIGHT=35;headerVisible=!1;footerVisible=!1;layout(e,t){let n;this.options.hasTitle?n=new Lt(e,Math.min(t,e0.TITLE_HEIGHT)):n=Lt.None;let s;this.headerVisible?s=new Lt(e,Math.min(t,e0.HEADER_HEIGHT)):s=Lt.None;let o;this.footerVisible?o=new Lt(e,Math.min(t,e0.Footer_HEIGHT)):o=Lt.None;let r=e;this.options&&typeof this.options.borderWidth=="function"&&(r-=this.options.borderWidth());const a=new Lt(r,t-n.height-s.height-o.height);return this.contentArea&&W5(this.contentArea,a.width,a.height),{headerSize:s,titleSize:n,contentSize:a,footerSize:o}}setFooterVisibility(e){this.footerVisible=e}setHeaderVisibility(e){this.headerVisible=e}}class ree extends VP{static{g3(this,"MultiWindowParts")}_parts=new Set;get parts(){return Array.from(this._parts)}registerPart(e){return this._parts.add(e),ye(()=>this.unregisterPart(e))}unregisterPart(e){this._parts.delete(e)}getPart(e){return this.getPartByDocument(e.ownerDocument)}getPartByDocument(e){if(this._parts.size>1){for(const t of this._parts)if(t.element?.ownerDocument===e)return t}return this.mainPart}get activePart(){return this.getPartByDocument(om())}}var fTe=Object.defineProperty,Cv=(i,e)=>fTe(i,"name",{value:e,configurable:!0});const yt=gIe;var Y=(i=>(i.TITLEBAR_PART="workbench.parts.titlebar",i.BANNER_PART="workbench.parts.banner",i.ACTIVITYBAR_PART="workbench.parts.activitybar",i.SIDEBAR_PART="workbench.parts.sidebar",i.PANEL_PART="workbench.parts.panel",i.AUXILIARYBAR_PART="workbench.parts.auxiliarybar",i.EDITOR_PART="workbench.parts.editor",i.STATUSBAR_PART="workbench.parts.statusbar",i))(Y||{}),vs=(i=>(i.SHOW_TABS="zenMode.showTabs",i.HIDE_LINENUMBERS="zenMode.hideLineNumbers",i.HIDE_STATUSBAR="zenMode.hideStatusBar",i.HIDE_ACTIVITYBAR="zenMode.hideActivityBar",i.CENTER_LAYOUT="zenMode.centerLayout",i.FULLSCREEN="zenMode.fullScreen",i.RESTORE="zenMode.restore",i.SILENT_NOTIFICATIONS="zenMode.silentNotifications",i))(vs||{}),rt=(i=>(i.ACTIVITY_BAR_LOCATION="workbench.activityBar.location",i.EDITOR_TABS_MODE="workbench.editor.showTabs",i.EDITOR_ACTIONS_LOCATION="workbench.editor.editorActionsLocation",i.COMMAND_CENTER="window.commandCenter",i.LAYOUT_ACTIONS="workbench.layoutControl.enabled",i))(rt||{}),ti=(i=>(i.DEFAULT="default",i.TOP="top",i.BOTTOM="bottom",i.HIDDEN="hidden",i))(ti||{}),ra=(i=>(i.MULTIPLE="multiple",i.SINGLE="single",i.NONE="none",i))(ra||{}),Uc=(i=>(i.DEFAULT="default",i.TITLEBAR="titleBar",i.HIDDEN="hidden",i))(Uc||{}),Ht=(i=>(i[i.LEFT=0]="LEFT",i[i.RIGHT=1]="RIGHT",i[i.BOTTOM=2]="BOTTOM",i[i.TOP=3]="TOP",i))(Ht||{});function vo(i){return i===2||i===3}Cv(vo,"isHorizontal");var BF=(i=>(i[i.ALWAYS=0]="ALWAYS",i[i.NEVER=1]="NEVER",i[i.REMEMBER_LAST=2]="REMEMBER_LAST",i))(BF||{});function Qa(i){switch(i){case 0:return"left";case 1:return"right";case 2:return"bottom";case 3:return"top";default:return"bottom"}}Cv(Qa,"positionToString");const pTe={[Qa(0)]:0,[Qa(1)]:1,[Qa(2)]:2,[Qa(3)]:3};function t0(i){return pTe[i]}Cv(t0,"positionFromString");function zT(i){switch(i){case 0:return"always";case 1:return"never";case 2:return"preserve";default:return"preserve"}}Cv(zT,"panelOpensMaximizedSettingToString");const mTe={[zT(0)]:0,[zT(1)]:1,[zT(2)]:2};function aee(i){return mTe[i]}Cv(aee,"panelOpensMaximizedFromString");function Mf(i,e,t,n){if(n)return!i.getValue("zenMode.fullScreen");const s=kb(e),o=Rc(i);if(!ui){const a=i.getValue(Ho.CUSTOM_TITLE_BAR_VISIBILITY);if(a===Cr.NEVER&&o||a===Cr.WINDOWED&&s)return!1}if(!lee(i))return!0;if(o)return!1;if(Ue&&ao)return!s;if(ao&&!s||J0()&&!s)return!0;switch(N5(e)?"hidden":Jh(i)){case"classic":return!s||!!t;case"compact":case"hidden":return!1;case"toggle":return!!t;case"visible":return!0;default:return ui?!1:!s||!!t}}Cv(Mf,"shouldShowCustomTitleBar");function lee(i){if(i.getValue("window.commandCenter"))return!1;const e=i.getValue("workbench.activityBar.location");if(e==="top"||e==="bottom")return!1;const t=i.getValue("workbench.editor.editorActionsLocation"),n=i.getValue("workbench.editor.showTabs");return!(t==="titleBar"||t==="default"&&n==="none"||i.getValue("workbench.layoutControl.enabled"))}Cv(lee,"isTitleBarEmpty");var cee=Object.defineProperty,_Te=Object.getOwnPropertyDescriptor,dee=(i,e)=>cee(i,"name",{value:e,configurable:!0}),bTe=(i,e,t,n)=>{for(var s=_Te(e,t),o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=r(e,t,s)||s);return s&&cee(e,t,s),s};class hee{constructor(e){this.nodes=e}static{dee(this,"LinkedText")}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}bTe([Ie],hee.prototype,"toString");const vTe=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function f3(i){const e=[];let t=0,n;for(;n=vTe.exec(i);){n.index-t>0&&e.push(i.substring(t,n.index));const[,s,o,,r]=n;r?e.push({label:s,href:o,title:r}):e.push({label:s,href:o}),t=n.index+n[0].length}return t<i.length&&e.push(i.substring(t)),new hee(e)}dee(f3,"parseLinkedText");var wTe=Object.defineProperty,qp=(i,e)=>wTe(i,"name",{value:e,configurable:!0}),Ja=(i=>(i[i.ADD=0]="ADD",i[i.CHANGE=1]="CHANGE",i[i.EXPAND_COLLAPSE=2]="EXPAND_COLLAPSE",i[i.REMOVE=3]="REMOVE",i))(Ja||{}),FF=(i=>(i[i.ADD=0]="ADD",i[i.REMOVE=1]="REMOVE",i))(FF||{});class CTe extends ${constructor(e,t){super(),this.item=e,this.onClose=t,this.registerListeners()}static{qp(this,"NotificationHandle")}_onDidClose=this._register(new x);onDidClose=this._onDidClose.event;_onDidChangeVisibility=this._register(new x);onDidChangeVisibility=this._onDidChangeVisibility.event;registerListeners(){this._register(this.item.onDidChangeVisibility(e=>this._onDidChangeVisibility.fire(e))),H.once(this.item.onDidClose)(()=>{this._onDidClose.fire(),this.dispose()})}get progress(){return this.item.progress}updateSeverity(e){this.item.updateSeverity(e)}updateMessage(e){this.item.updateMessage(e)}updateActions(e){this.item.updateActions(e)}close(){this.onClose(this.item),this.dispose()}}class p3 extends ${static{qp(this,"NotificationsModel")}static NO_OP_NOTIFICATION=new mF;_onDidChangeNotification=this._register(new x);onDidChangeNotification=this._onDidChangeNotification.event;_onDidChangeStatusMessage=this._register(new x);onDidChangeStatusMessage=this._onDidChangeStatusMessage.event;_onDidChangeFilter=this._register(new x);onDidChangeFilter=this._onDidChangeFilter.event;_notifications=[];get notifications(){return this._notifications}_statusMessage;get statusMessage(){return this._statusMessage}filter={global:Ci.OFF,sources:new Map};setFilter(e){let t=!1;typeof e.global=="number"&&(t=this.filter.global!==e.global,this.filter.global=e.global);let n=!1;e.sources&&(n=!$G(this.filter.sources,e.sources),this.filter.sources=e.sources),(t||n)&&this._onDidChangeFilter.fire({global:t?e.global:void 0,sources:n?e.sources:void 0})}addNotification(e){const t=this.createViewItem(e);return t?(this.findNotification(t)?.close(),this._notifications.splice(0,0,t),this._onDidChangeNotification.fire({item:t,index:0,kind:0}),new CTe(t,s=>this.onClose(s))):p3.NO_OP_NOTIFICATION}onClose(e){const t=this.findNotification(e);t&&t!==e?t.close():e.close()}findNotification(e){return this._notifications.find(t=>t.equals(e))}createViewItem(e){const t=lg.create(e,this.filter);if(!t)return;const n=qp((r,a)=>{const l=this._notifications.indexOf(t);l>=0&&this._onDidChangeNotification.fire({item:t,index:l,kind:r,detail:a})},"fireNotificationChangeEvent"),s=t.onDidChangeExpansion(()=>n(2)),o=t.onDidChangeContent(r=>n(1,r.kind));return H.once(t.onDidClose)(()=>{s.dispose(),o.dispose();const r=this._notifications.indexOf(t);r>=0&&(this._notifications.splice(r,1),this._onDidChangeNotification.fire({item:t,index:r,kind:3}))}),t}showStatusMessage(e,t){const n=STe.create(e,t);return n?(this._statusMessage=n,this._onDidChangeStatusMessage.fire({kind:0,item:n}),ye(()=>{this._statusMessage===n&&(this._statusMessage=void 0,this._onDidChangeStatusMessage.fire({kind:1,item:n}))})):$.None}}function i0(i){return i instanceof lg}qp(i0,"isNotificationViewItem");var Rg=(i=>(i[i.SEVERITY=0]="SEVERITY",i[i.MESSAGE=1]="MESSAGE",i[i.ACTIONS=2]="ACTIONS",i[i.PROGRESS=3]="PROGRESS",i))(Rg||{});class yTe extends ${static{qp(this,"NotificationViewItemProgress")}_state;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;constructor(){super(),this._state=Object.create(null)}get state(){return this._state}infinite(){this._state.infinite||(this._state.infinite=!0,this._state.total=void 0,this._state.worked=void 0,this._state.done=void 0,this._onDidChange.fire())}done(){this._state.done||(this._state.done=!0,this._state.infinite=void 0,this._state.total=void 0,this._state.worked=void 0,this._onDidChange.fire())}total(e){this._state.total!==e&&(this._state.total=e,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire())}worked(e){typeof this._state.worked=="number"?this._state.worked+=e:this._state.worked=e,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire()}}class lg extends ${constructor(e,t,n,s,o,r,a,l){super(),this.id=e,this._severity=t,this._sticky=n,this._priority=s,this._message=o,this._source=r,a&&this.setProgress(a),this.setActions(l)}static{qp(this,"NotificationViewItem")}static MAX_MESSAGE_LENGTH=1e3;_expanded;_visible=!1;_actions;_progress;_onDidChangeExpansion=this._register(new x);onDidChangeExpansion=this._onDidChangeExpansion.event;_onDidClose=this._register(new x);onDidClose=this._onDidClose.event;_onDidChangeContent=this._register(new x);onDidChangeContent=this._onDidChangeContent.event;_onDidChangeVisibility=this._register(new x);onDidChangeVisibility=this._onDidChangeVisibility.event;static create(e,t){if(!e||!e.message||lf(e.message))return;let n;typeof e.severity=="number"?n=e.severity:n=zs.Info;const s=lg.parseNotificationMessage(e.message);if(!s)return;let o;e.actions?o=e.actions:iP(e.message)&&(o={primary:e.message.actions});let r=e.priority??Ul.DEFAULT;return r===Ul.DEFAULT&&n!==zs.Error&&(t.global===Ci.ERROR||NP(e.source)&&t.sources.get(e.source.id)===Ci.ERROR)&&(r=Ul.SILENT),new lg(e.id,n,e.sticky,r,s,e.source,e.progress,o)}static parseNotificationMessage(e){let t;if(e instanceof Error?t=hh(e,!1):typeof e=="string"&&(t=e),!t)return;const n=t;t.length>lg.MAX_MESSAGE_LENGTH&&(t=`${t.substr(0,lg.MAX_MESSAGE_LENGTH)}...`),t=t.replace(/(\r\n|\n|\r)/gm," ").trim();const s=f3(t);return{raw:n,linkedText:s,original:e}}setProgress(e){e.infinite?this.progress.infinite():e.total&&(this.progress.total(e.total),e.worked&&this.progress.worked(e.worked))}setActions(e={primary:[],secondary:[]}){this._actions={primary:Array.isArray(e.primary)?e.primary:[],secondary:Array.isArray(e.secondary)?e.secondary:[]},this._expanded=e.primary&&e.primary.length>0}get canCollapse(){return!this.hasActions}get expanded(){return!!this._expanded}get severity(){return this._severity}get sticky(){if(this._sticky)return!0;const e=this.hasActions;return!!(e&&this._severity===zs.Error||!e&&this._expanded||this._progress&&!this._progress.state.done)}get priority(){return this._priority}get hasActions(){return!this._actions||!this._actions.primary?!1:this._actions.primary.length>0}get hasProgress(){return!!this._progress}get progress(){return this._progress||(this._progress=this._register(new yTe),this._register(this._progress.onDidChange(()=>this._onDidChangeContent.fire({kind:3})))),this._progress}get message(){return this._message}get source(){return typeof this._source=="string"?this._source:this._source?this._source.label:void 0}get sourceId(){return this._source&&typeof this._source!="string"&&"id"in this._source?this._source.id:void 0}get actions(){return this._actions}get visible(){return this._visible}updateSeverity(e){e!==this._severity&&(this._severity=e,this._onDidChangeContent.fire({kind:0}))}updateMessage(e){const t=lg.parseNotificationMessage(e);!t||t.raw===this._message.raw||(this._message=t,this._onDidChangeContent.fire({kind:1}))}updateActions(e){this.setActions(e),this._onDidChangeContent.fire({kind:2})}updateVisibility(e){this._visible!==e&&(this._visible=e,this._onDidChangeVisibility.fire(e))}expand(){this._expanded||!this.canCollapse||(this._expanded=!0,this._onDidChangeExpansion.fire())}collapse(e){!this._expanded||!this.canCollapse||(this._expanded=!1,e||this._onDidChangeExpansion.fire())}toggle(){this._expanded?this.collapse():this.expand()}close(){this._onDidClose.fire(),this.dispose()}equals(e){if(this.hasProgress||e.hasProgress)return!1;if(typeof this.id=="string"||typeof e.id=="string")return this.id===e.id;if(typeof this._source=="object"){if(this._source.label!==e.source||this._source.id!==e.sourceId)return!1}else if(this._source!==e.source)return!1;if(this._message.raw!==e.message.raw)return!1;const t=this._actions&&this._actions.primary||[],n=e.actions&&e.actions.primary||[];return ks(t,n,(s,o)=>s.id+s.label===o.id+o.label)}}class kE extends Mt{static{qp(this,"ChoiceAction")}_onDidRun=this._register(new x);onDidRun=this._onDidRun.event;_keepOpen;_menu;constructor(e,t){super(e,t.label,void 0,!0,async()=>{t.run(),this._onDidRun.fire()}),this._keepOpen=!!t.keepOpen,this._menu=!t.isSecondary&&t.menu?t.menu.map((n,s)=>new kE(`${e}.${s}`,n)):void 0}get menu(){return this._menu}get keepOpen(){return this._keepOpen}}class STe{static{qp(this,"StatusMessageViewItem")}static create(e,t){if(!e||lf(e))return;let n;if(e instanceof Error?n=hh(e,!1):typeof e=="string"&&(n=e),!!n)return{message:n,options:t}}}var uee=Object.defineProperty,ETe=Object.getOwnPropertyDescriptor,fU=(i,e)=>uee(i,"name",{value:e,configurable:!0}),LTe=(i,e,t,n)=>{for(var s=n>1?void 0:n?ETe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&uee(e,t,s),s},DTe=(i,e)=>(t,n)=>e(t,n,i);let R_=class extends ${constructor(i){super(),this.storageService=i,this.updateFilters(),this.registerListeners()}static{fU(this,"NotificationService")}model=this._register(new p3);_onDidAddNotification=this._register(new x);onDidAddNotification=this._onDidAddNotification.event;_onDidRemoveNotification=this._register(new x);onDidRemoveNotification=this._onDidRemoveNotification.event;registerListeners(){this._register(this.model.onDidChangeNotification(i=>{switch(i.kind){case Ja.ADD:case Ja.REMOVE:{const e=typeof i.item.sourceId=="string"&&typeof i.item.source=="string"?{id:i.item.sourceId,label:i.item.source}:i.item.source,t={message:i.item.message.original,severity:i.item.severity,source:e,priority:i.item.priority};i.kind===Ja.ADD&&(NP(e)&&(this.mapSourceToFilter.has(e.id)?this.updateSourceFilter(e):this.setFilter({...e,filter:Ci.OFF})),this._onDidAddNotification.fire(t)),i.kind===Ja.REMOVE&&this._onDidRemoveNotification.fire(t);break}}}))}static GLOBAL_FILTER_SETTINGS_KEY="notifications.doNotDisturbMode";static PER_SOURCE_FILTER_SETTINGS_KEY="notifications.perSourceDoNotDisturbMode";_onDidChangeFilter=this._register(new x);onDidChangeFilter=this._onDidChangeFilter.event;globalFilterEnabled=this.storageService.getBoolean(R_.GLOBAL_FILTER_SETTINGS_KEY,Be.APPLICATION,!1);mapSourceToFilter=(()=>{const i=new Map;for(const e of this.storageService.getObject(R_.PER_SOURCE_FILTER_SETTINGS_KEY,Be.APPLICATION,[]))i.set(e.id,e);return i})();setFilter(i){if(typeof i=="number"){if(this.globalFilterEnabled===(i===Ci.ERROR))return;this.globalFilterEnabled=i===Ci.ERROR,this.storageService.store(R_.GLOBAL_FILTER_SETTINGS_KEY,this.globalFilterEnabled,Be.APPLICATION,ai.MACHINE),this.updateFilters(),this._onDidChangeFilter.fire()}else{const e=this.mapSourceToFilter.get(i.id);if(e?.filter===i.filter&&e.label===i.label)return;this.mapSourceToFilter.set(i.id,{id:i.id,label:i.label,filter:i.filter}),this.saveSourceFilters(),this.updateFilters()}}getFilter(i){return i?this.mapSourceToFilter.get(i.id)?.filter??Ci.OFF:this.globalFilterEnabled?Ci.ERROR:Ci.OFF}updateSourceFilter(i){const e=this.mapSourceToFilter.get(i.id);e&&e.label!==i.label&&(this.mapSourceToFilter.set(i.id,{id:i.id,label:i.label,filter:e.filter}),this.saveSourceFilters())}saveSourceFilters(){this.storageService.store(R_.PER_SOURCE_FILTER_SETTINGS_KEY,JSON.stringify([...this.mapSourceToFilter.values()]),Be.APPLICATION,ai.MACHINE)}getFilters(){return[...this.mapSourceToFilter.values()]}updateFilters(){this.model.setFilter({global:this.globalFilterEnabled?Ci.ERROR:Ci.OFF,sources:new Map([...this.mapSourceToFilter.values()].map(i=>[i.id,i.filter]))})}removeFilter(i){this.mapSourceToFilter.delete(i)&&(this.saveSourceFilters(),this.updateFilters())}info(i){if(Array.isArray(i)){for(const e of i)this.info(e);return}this.model.addNotification({severity:zs.Info,message:i})}warn(i){if(Array.isArray(i)){for(const e of i)this.warn(e);return}this.model.addNotification({severity:zs.Warning,message:i})}error(i){if(Array.isArray(i)){for(const e of i)this.error(e);return}this.model.addNotification({severity:zs.Error,message:i})}notify(i){const e=new te;if(i.neverShowAgain){const n=this.toStorageScope(i.neverShowAgain),s=i.neverShowAgain.id;if(this.storageService.getBoolean(s,n))return new mF;const o=e.add(new Mt("workbench.notification.neverShowAgain",g("neverShowAgain","Don't Show Again"),void 0,!0,async()=>{t.close(),this.storageService.store(s,!0,n,ai.USER)})),r={primary:i.actions?.primary||[],secondary:i.actions?.secondary||[]};i.neverShowAgain.isSecondary?r.secondary=[...r.secondary,o]:r.primary=[o,...r.primary],i.actions=r}const t=this.model.addNotification(i);return H.once(t.onDidClose)(()=>e.dispose()),t}toStorageScope(i){switch(i.scope){case OT.APPLICATION:return Be.APPLICATION;case OT.PROFILE:return Be.PROFILE;case OT.WORKSPACE:return Be.WORKSPACE;default:return Be.APPLICATION}}prompt(i,e,t,n){const s=new te;if(n?.neverShowAgain){const d=this.toStorageScope(n.neverShowAgain),h=n.neverShowAgain.id;if(this.storageService.getBoolean(h,d))return new mF;const u={label:g("neverShowAgain","Don't Show Again"),run:fU(()=>this.storageService.store(h,!0,d,ai.USER),"run"),isSecondary:n.neverShowAgain.isSecondary};n.neverShowAgain.isSecondary?t=[...t,u]:t=[u,...t]}let o=!1;const r=[],a=[];t.forEach((d,h)=>{const u=new kE(`workbench.dialog.choice.${h}`,d);d.isSecondary?a.push(u):r.push(u),s.add(u.onDidRun(()=>{o=!0,d.keepOpen||c.close()})),s.add(u)});const l={primary:r,secondary:a},c=this.notify({severity:i,message:e,actions:l,sticky:n?.sticky,priority:n?.priority});return H.once(c.onDidClose)(()=>{s.dispose(),n&&typeof n.onCancel=="function"&&!o&&n.onCancel()}),c}status(i,e){return this.model.showStatusMessage(i,e)}};R_=LTe([DTe(0,Si)],R_);Rr(fs,R_,Pr.Delayed);var ITe=Object.defineProperty,EI=(i,e)=>ITe(i,"name",{value:e,configurable:!0}),Mo;(i=>{function e(o,r){if(o.start>=r.end||r.start>=o.end)return{start:0,end:0};const a=Math.max(o.start,r.start),l=Math.min(o.end,r.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}i.intersect=e,EI(e,"intersect");function t(o){return o.end-o.start<=0}i.isEmpty=t,EI(t,"isEmpty");function n(o,r){return!t(e(o,r))}i.intersects=n,EI(n,"intersects");function s(o,r){const a=[],l={start:o.start,end:Math.min(r.start,o.end)},c={start:Math.max(r.end,o.start),end:o.end};return t(l)||a.push(l),t(c)||a.push(c),a}i.relativeComplement=s,EI(s,"relativeComplement")})(Mo||(Mo={}));var TTe=Object.defineProperty,m3=(i,e)=>TTe(i,"name",{value:e,configurable:!0});function gee(i){const e=i;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}m3(gee,"isAnchor");var cu=(i=>(i[i.LEFT=0]="LEFT",i[i.RIGHT=1]="RIGHT",i))(cu||{}),Ym=(i=>(i[i.BELOW=0]="BELOW",i[i.ABOVE=1]="ABOVE",i))(Ym||{}),fee=(i=>(i[i.VERTICAL=0]="VERTICAL",i[i.HORIZONTAL=1]="HORIZONTAL",i))(fee||{}),$T=(i=>(i[i.Before=0]="Before",i[i.After=1]="After",i))($T||{});function O_(i,e,t){const n=t.mode===1?t.offset:t.offset+t.size,s=t.mode===1?t.offset+t.size:t.offset;return t.position===0?e<=i-n?n:e<=s?s-e:Math.max(i-e,0):e<=s?s-e:e<=i-n?n:0}m3(O_,"layout");class VF extends ${static{m3(this,"ContextView")}static BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];static BUBBLE_DOWN_EVENTS=["click"];container=null;view;useFixedPosition=!1;useShadowDOM=!1;delegate=null;toDisposeOnClean=$.None;toDisposeOnSetContainer=$.None;shadowRoot=null;shadowRootHostElement=null;constructor(e,t){super(),this.view=ce(".context-view"),Wc(this.view),this.setContainer(e,t),this._register(ye(()=>this.setContainer(null,1)))}setContainer(e,t){this.useFixedPosition=t!==1;const n=this.useShadowDOM;if(this.useShadowDOM=t===3,!(e===this.container&&n===this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,this.shadowRootHostElement?.remove(),this.shadowRootHostElement=null),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=ce(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const o=document.createElement("style");o.textContent=ATe,this.shadowRoot.appendChild(o),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(ce("slot"))}else this.container.appendChild(this.view);const s=new te;VF.BUBBLE_UP_EVENTS.forEach(o=>{s.add(Gs(this.container,o,r=>{this.onDOMEvent(r,!1)}))}),VF.BUBBLE_DOWN_EVENTS.forEach(o=>{s.add(Gs(this.container,o,r=>{this.onDOMEvent(r,!0)},!0))}),this.toDisposeOnSetContainer=s}}show(e){this.isVisible()&&this.hide(),Mn(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+(e.layer??0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",Gl(this.view),this.toDisposeOnClean=e.render(this.view)||$.None,this.delegate=e,this.doLayout(),this.delegate.focus?.()}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(ol&&Yy.pointerEvents)){this.hide();return}this.delegate?.layout?.(),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(xs(e)){const u=Xr(e),f=U5(e);t={top:u.top*f,left:u.left*f,width:u.width*f,height:u.height*f}}else gee(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const n=KC(this.view),s=ZA(this.view),o=this.delegate.anchorPosition||0,r=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;const d=sn();if(a===0){const u={offset:t.top-d.pageYOffset,size:t.height,position:o===0?0:1},f={offset:t.left,size:t.width,position:r===0?0:1,mode:1};l=O_(d.innerHeight,s,u)+d.pageYOffset,Mo.intersects({start:l,end:l+s},{start:u.offset,end:u.offset+u.size})&&(f.mode=0),c=O_(d.innerWidth,n,f)}else{const u={offset:t.left,size:t.width,position:r===0?0:1},f={offset:t.top,size:t.height,position:o===0?0:1,mode:1};c=O_(d.innerWidth,n,u),Mo.intersects({start:c,end:c+n},{start:u.offset,end:u.offset+u.size})&&(f.mode=0),l=O_(d.innerHeight,s,f)+d.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(o===0?"bottom":"top"),this.view.classList.add(r===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const h=Xr(this.container);this.view.style.top=`${l-(this.useFixedPosition?Xr(this.view).top:h.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?Xr(this.view).left:h.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t?.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),Wc(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,ve(e).document.activeElement):t&&!As(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}const ATe=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var xTe=Object.defineProperty,pee=(i,e)=>xTe(i,"name",{value:e,configurable:!0});class kTe extends ${static{pee(this,"DelayedDragHandler")}timeout;constructor(e,t){super(),this._register(F(e,"dragover",n=>{n.preventDefault(),this.timeout||(this.timeout=setTimeout(()=>{t(),this.timeout=null},800))})),["dragleave","drop","dragend"].forEach(n=>{this._register(F(e,n,()=>{this.clearDragTimeout()}))})}clearDragTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){super.dispose(),this.clearDragTimeout()}}const Yh={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:Vb.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"};function _3(i,e,t,n,s){const o=document.createElement("div");o.className=t,o.textContent=e,s&&(o.style.color=s),n&&(o.style.background=n),i.dataTransfer&&(ve(i).document.body.appendChild(o),i.dataTransfer.setDragImage(o,-10,-10),setTimeout(()=>o.remove(),0))}pee(_3,"applyDragImage");var NTe=Object.defineProperty,fD=(i,e)=>NTe(i,"name",{value:e,configurable:!0});function WF(i,e){const t=[];for(const n of e){if(i.start>=n.range.end)continue;if(i.end<n.range.start)break;const s=Mo.intersect(i,n.range);Mo.isEmpty(s)||t.push({range:s,size:n.size})}return t}fD(WF,"groupIntersect");function Nx({start:i,end:e},t){return{start:i+t,end:e+t}}fD(Nx,"shift");function mee(i){const e=[];let t=null;for(const n of i){const s=n.range.start,o=n.range.end,r=n.size;if(t&&r===t.size){t.range.end=o;continue}t={range:{start:s,end:o},size:r},e.push(t)}return e}fD(mee,"consolidate");function _ee(...i){return mee(i.reduce((e,t)=>e.concat(t),[]))}fD(_ee,"concat");class PTe{static{fD(this,"RangeMap")}groups=[];_size=0;_paddingTop=0;get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,n=[]){const s=n.length-t,o=WF({start:0,end:e},this.groups),r=WF({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:Nx(l.range,s),size:l.size})),a=n.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=_ee(o,a,r),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,n=this._paddingTop;for(const s of this.groups){const o=s.range.end-s.range.start,r=n+o*s.size;if(e<r)return t+Math.floor((e-n)/s.size);t+=o,n=r}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(const s of this.groups){const o=s.range.end-s.range.start,r=n+o;if(e<r)return this._paddingTop+t+(e-n)*s.size;t+=o*s.size,n=r}return-1}}var RTe=Object.defineProperty,OTe=(i,e)=>RTe(i,"name",{value:e,configurable:!0});class MTe{constructor(e){this.renderers=e}static{OTe(this,"RowCache")}cache=new Map;transactionNodesPendingRemoval=new Set;inTransaction=!1;alloc(e){let t=this.getTemplateCache(e).pop(),n=!1;if(t)n=this.transactionNodesPendingRemoval.has(t.domNode),n&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const s=ce(".monaco-list-row"),r=this.getRenderer(e).renderTemplate(s);t={domNode:s,templateId:e,templateData:r}}return{row:t,isReusingConnectedDomNode:n}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(n).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var BTe=Object.defineProperty,oy=(i,e)=>BTe(i,"name",{value:e,configurable:!0});const pU=2e4;let f_,GT,HF,KT,UF;function bee(i){f_=document.createElement("div"),f_.className="monaco-aria-container";const e=oy(()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),f_.appendChild(n),n},"createAlertContainer");GT=e(),HF=e();const t=oy(()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),f_.appendChild(n),n},"createStatusContainer");KT=t(),UF=t(),i.appendChild(f_)}oy(bee,"setARIAContainer");function Ub(i){f_&&(GT.textContent!==i?(Mn(HF),NE(GT,i)):(Mn(GT),NE(HF,i)))}oy(Ub,"alert");function Px(i){f_&&(KT.textContent!==i?(Mn(UF),NE(KT,i)):(Mn(KT),NE(UF,i)))}oy(Px,"status");function NE(i,e){Mn(i),e.length>pU&&(e=e.substr(0,pU)),i.textContent=e,i.style.visibility="hidden",i.style.visibility="visible"}oy(NE,"insertMessage");var vee=Object.defineProperty,FTe=Object.getOwnPropertyDescriptor,bg=(i,e)=>vee(i,"name",{value:e,configurable:!0}),ph=(i,e,t,n)=>{for(var s=FTe(e,t),o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=r(e,t,s)||s);return s&&vee(e,t,s),s};const Am={CurrentDragAndDropData:void 0},Sh={useShadows:!0,verticalScrollMode:Bi.Auto,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(i){return[i]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class pD{static{bg(this,"ElementsDragAndDropData")}elements;_context;get context(){return this._context}set context(e){this._context=e}constructor(e){this.elements=e}update(){}getData(){return this.elements}}class VTe{static{bg(this,"ExternalElementsDragAndDropData")}elements;constructor(e){this.elements=e}update(){}getData(){return this.elements}}class WTe{static{bg(this,"NativeDragAndDropData")}types;files;constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}function wee(i,e){return Array.isArray(i)&&Array.isArray(e)?ks(i,e):i===e}bg(wee,"equalsDragFeedback");class HTe{static{bg(this,"ListViewAccessibilityProvider")}getSetSize;getPosInSet;getRole;isChecked;constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,s)=>s,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}const ed=class Cee{constructor(e,t,n,s=Sh){if(this.virtualDelegate=t,s.horizontalScrolling&&s.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(s.paddingTop??0);for(const r of n)this.renderers.set(r.templateId,r);this.cache=this.disposables.add(new MTe(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof s.mouseSupport=="boolean"?s.mouseSupport:!0),this._horizontalScrolling=s.horizontalScrolling??Sh.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof s.paddingBottom>"u"?0:s.paddingBottom,this.accessibilityProvider=new HTe(s.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(s.transformOptimization??Sh.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(Gn.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new qL({forceIntegerValues:!0,smoothScrollDuration:s.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:bg(r=>xo(ve(this.domNode),r),"scheduleAtNextAnimationFrame")})),this.scrollableElement=this.disposables.add(new s3(this.rowsContainer,{alwaysConsumeMouseWheel:s.alwaysConsumeMouseWheel??Sh.alwaysConsumeMouseWheel,horizontal:Bi.Auto,vertical:s.verticalScrollMode??Sh.verticalScrollMode,useShadows:s.useShadows??Sh.useShadows,mouseWheelScrollSensitivity:s.mouseWheelScrollSensitivity,fastScrollSensitivity:s.fastScrollSensitivity,scrollByPage:s.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(F(this.rowsContainer,wt.Change,r=>this.onTouchChange(r))),this.disposables.add(F(this.scrollableElement.getDomNode(),"scroll",r=>r.target.scrollTop=0)),this.disposables.add(F(this.domNode,"dragover",r=>this.onDragOver(this.toDragEvent(r)))),this.disposables.add(F(this.domNode,"drop",r=>this.onDrop(this.toDragEvent(r)))),this.disposables.add(F(this.domNode,"dragleave",r=>this.onDragLeave(this.toDragEvent(r)))),this.disposables.add(F(this.domNode,"dragend",r=>this.onDragEnd(r))),this.setRowLineHeight=s.setRowLineHeight??Sh.setRowLineHeight,this.setRowHeight=s.setRowHeight??Sh.setRowHeight,this.supportDynamicHeights=s.supportDynamicHeights??Sh.supportDynamicHeights,this.dnd=s.dnd??this.disposables.add(Sh.dnd),this.layout(s.initialSize?.height,s.initialSize?.width)}static{bg(this,"ListView")}static InstanceCount=0;domId=`list_id_${++Cee.InstanceCount}`;domNode;items;itemId;rangeMap;cache;renderers=new Map;lastRenderTop;lastRenderHeight;renderWidth=0;rowsContainer;scrollable;scrollableElement;_scrollHeight=0;scrollableElementUpdateDisposable=null;scrollableElementWidthDelayer=new $y(50);splicing=!1;dragOverAnimationDisposable;dragOverAnimationStopDisposable=$.None;dragOverMouseY=0;setRowLineHeight;setRowHeight;supportDynamicHeights;paddingBottom;accessibilityProvider;scrollWidth;dnd;canDrop=!1;currentDragData;currentDragFeedback;currentDragFeedbackPosition;currentDragFeedbackDisposable=$.None;onDragLeaveTimeout=$.None;disposables=new te;_onDidChangeContentHeight=new x;_onDidChangeContentWidth=new x;onDidChangeContentHeight=H.latch(this._onDidChangeContentHeight.event,void 0,this.disposables);onDidChangeContentWidth=H.latch(this._onDidChangeContentWidth.event,void 0,this.disposables);get contentHeight(){return this.rangeMap.size}get contentWidth(){return this.scrollWidth??0}get onDidScroll(){return this.scrollableElement.onScroll}get onWillScroll(){return this.scrollableElement.onWillScroll}get containerDomNode(){return this.rowsContainer}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}_horizontalScrolling=!1;get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:U1(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(n,Math.max(0,this.lastRenderTop+s),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}delegateScrollFromMouseWheelEvent(e){this.scrollableElement.delegateScrollFromMouseWheelEvent(e)}delegateVerticalScrollbarPointerDown(e){this.scrollableElement.delegateVerticalScrollbarPointerDown(e)}updateElementHeight(e,t,n){if(e<0||e>=this.items.length)return;const s=this.items[e].size;if(typeof t>"u"){if(!this.supportDynamicHeights){console.warn("Dynamic heights not supported",new Error().stack);return}this.items[e].lastDynamicHeightWidth=void 0,t=s+this.probeDynamicHeight(e)}if(s===t)return;const o=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);let r=0;e<o.start||n!==null&&n>e&&n<o.end?r=t-s:r=0,this.rangeMap.splice(e,1,[{size:t}]),this.items[e].size=t,this.render(o,Math.max(0,this.lastRenderTop+r),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}createRangeMap(e){return new PTe(e)}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o={start:e,end:e+t},r=Mo.intersect(s,o),a=new Map;for(let S=r.end-1;S>=r.start;S--){const D=this.items[S];if(D.dragStartDisposable.dispose(),D.checkedDisposable.dispose(),D.row){let T=a.get(D.templateId);T||(T=[],a.set(D.templateId,T));const I=this.renderers.get(D.templateId);I&&I.disposeElement&&I.disposeElement(D.element,S,D.row.templateData,D.size),T.unshift(D.row)}D.row=null,D.stale=!0}const l={start:e+t,end:this.items.length},c=Mo.intersect(l,s),d=Mo.relativeComplement(l,s),h=n.map(S=>({id:String(this.itemId++),element:S,templateId:this.virtualDelegate.getTemplateId(S),size:this.virtualDelegate.getHeight(S),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(S),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:$.None,checkedDisposable:$.None,stale:!1}));let u;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,h),u=this.items,this.items=h):(this.rangeMap.splice(e,t,h),u=this.items.splice(e,t,...h));const f=n.length-t,p=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),m=Nx(c,f),_=Mo.intersect(p,m);for(let S=_.start;S<_.end;S++)this.updateItemInDOM(this.items[S],S);const w=Mo.relativeComplement(m,p);for(const S of w)for(let D=S.start;D<S.end;D++)this.removeItemFromDOM(D);const v=d.map(S=>Nx(S,f)),C=[{start:e,end:e+n.length},...v].map(S=>Mo.intersect(p,S)).reverse();for(const S of C)for(let D=S.end-1;D>=S.start;D--){const T=this.items[D],R=a.get(T.templateId)?.pop();this.insertItemInDOM(D,R)}for(const S of a.values())for(const D of S)this.cache.release(D);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),u.map(S=>S.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=xo(ve(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}updateWidth(e){if(!this.horizontalScrolling||typeof this.scrollWidth>"u")return;const t=this.items[e];this.measureItemWidth(t),typeof t.width<"u"&&t.width>this.scrollWidth&&(this.scrollWidth=t.width,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth+10}),this._onDidChangeContentWidth.fire(this.scrollWidth))}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}get firstMostlyVisibleIndex(){const e=this.firstVisibleIndex,t=this.rangeMap.positionAt(e),n=this.rangeMap.positionAt(e+1);return n!==-1&&(n-t)/2+t<this.scrollTop?e+1:e}get lastVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).end-1}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const n={height:typeof e=="number"?e:z5(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:U1(this.domNode)})}render(e,t,n,s,o,r=!1){const a=this.getRenderRange(t,n),l=Mo.relativeComplement(a,e).reverse(),c=Mo.relativeComplement(e,a);if(r){const d=Mo.intersect(e,a);for(let h=d.start;h<d.end;h++)this.updateItemInDOM(this.items[h],h)}this.cache.transact(()=>{for(const d of c)for(let h=d.start;h<d.end;h++)this.removeItemFromDOM(h);for(const d of l)for(let h=d.end-1;h>=d.start;h--)this.insertItemInDOM(h)}),s!==void 0&&(this.rowsContainer.style.left=`-${s}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&o!==void 0&&(this.rowsContainer.style.width=`${Math.max(o,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t){const n=this.items[e];if(!n.row)if(t)n.row=t,n.stale=!0;else{const l=this.cache.alloc(n.templateId);n.row=l.row,n.stale||=l.isReusingConnectedDomNode}const s=this.accessibilityProvider.getRole(n.element)||"listitem";n.row.domNode.setAttribute("role",s);const o=this.accessibilityProvider.isChecked(n.element);if(typeof o=="boolean")n.row.domNode.setAttribute("aria-checked",String(!!o));else if(o){const l=bg(c=>n.row.domNode.setAttribute("aria-checked",String(!!c)),"update");l(o.value),n.checkedDisposable=o.onDidChange(()=>l(o.value))}if(n.stale||!n.row.domNode.parentElement){const l=this.items.at(e+1)?.row?.domNode??null;(n.row.domNode.parentElement!==this.rowsContainer||n.row.domNode.nextElementSibling!==l)&&this.rowsContainer.insertBefore(n.row.domNode,l),n.stale=!1}this.updateItemInDOM(n,e);const r=this.renderers.get(n.templateId);if(!r)throw new Error(`No renderer found for template id ${n.templateId}`);r?.renderElement(n.element,e,n.row.templateData,n.size);const a=this.dnd.getDragURI(n.element);n.dragStartDisposable.dispose(),n.row.domNode.draggable=!!a,a&&(n.dragStartDisposable=F(n.row.domNode,"dragstart",l=>this.onDragStart(n.element,a,l))),this.horizontalScrolling&&(this.measureItemWidth(n),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=U1(e.row.domNode);const t=ve(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}getScrollLeft(){return this.scrollableElement.getScrollPosition().scrollLeft}setScrollLeft(e){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth})),this.scrollableElement.setScrollPosition({scrollLeft:e})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return H.map(this.disposables.add(new Je(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return H.map(this.disposables.add(new Je(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return H.filter(H.map(this.disposables.add(new Je(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseUp(){return H.map(this.disposables.add(new Je(this.domNode,"mouseup")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDown(){return H.map(this.disposables.add(new Je(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return H.map(this.disposables.add(new Je(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMove(){return H.map(this.disposables.add(new Je(this.domNode,"mousemove")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return H.map(this.disposables.add(new Je(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return H.any(H.map(this.disposables.add(new Je(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),H.map(this.disposables.add(new Je(this.domNode,wt.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return H.map(this.disposables.add(new Je(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return H.map(this.disposables.add(new Je(this.rowsContainer,wt.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element,o=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:s,sector:o}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;const s=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(Yh.TEXT,t),n.dataTransfer.setDragImage){let o;this.dnd.getDragLabel&&(o=this.dnd.getDragLabel(s,n)),typeof o>"u"&&(o=String(s.length));const r=ce(".monaco-drag-image");r.textContent=o,bg(c=>{for(;c&&!c.classList.contains("monaco-workbench");)c=c.parentElement;return c||this.domNode.ownerDocument},"getDragImageContainer")(this.domNode).appendChild(r),n.dataTransfer.setDragImage(r,-10,-10),setTimeout(()=>r.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new pD(s),Am.CurrentDragAndDropData=new VTe(s),this.dnd.onDragStart?.(this.currentDragData,n)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),Am.CurrentDragAndDropData&&Am.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(Am.CurrentDragAndDropData)this.currentDragData=Am.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new WTe}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect?.type===See.Copy?"copy":"move";let n;typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=yb(n).filter(o=>o>=-1&&o<this.length).sort((o,r)=>o-r),n=n[0]===-1?[-1]:n;let s=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:S1.Over;if(wee(this.currentDragFeedback,n)&&this.currentDragFeedbackPosition===s)return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackPosition=s,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add(s),this.rowsContainer.classList.add(s),this.currentDragFeedbackDisposable=ye(()=>{this.domNode.classList.remove(s),this.rowsContainer.classList.remove(s)});else{if(n.length>1&&s!==S1.Over)throw new Error("Can't use multiple feedbacks with position different than 'over'");s===S1.After&&n[0]<this.length-1&&(n[0]+=1,s=S1.Before);for(const o of n){const r=this.items[o];r.dropTarget=!0,r.row?.domNode.classList.add(s)}this.currentDragFeedbackDisposable=ye(()=>{for(const o of n){const r=this.items[o];r.dropTarget=!1,r.row?.domNode.classList.remove(s)}})}return!0}onDragLeave(e){this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=HA(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&this.dnd.onDragLeave?.(this.currentDragData,e.element,e.index,e.browserEvent)}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Am.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Am.CurrentDragAndDropData=void 0,this.dnd.onDragEnd?.(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=$.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=GC(this.domNode).top;this.dragOverAnimationDisposable=Wq(ve(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=HA(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;const n=e.offsetY/this.items[t].size,s=Math.floor(n/.25);return Kr(s,0,3)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;(xs(n)||Rq(n))&&n!==this.rowsContainer&&t.contains(n);){const s=n.getAttribute("data-index");if(s){const o=Number(s);if(!isNaN(o))return o}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const s=this.getRenderRange(e,t);let o,r;e===this.elementTop(s.start)?(o=s.start,r=0):s.end-s.start>1&&(o=s.start+1,r=this.elementTop(o)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let d=l.start;d<l.end;d++){const h=this.probeDynamicHeight(d);h!==0&&this.rangeMap.splice(d,1,[this.items[d]]),a+=h,c=c||h!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const d=Mo.relativeComplement(s,l);for(const u of d)for(let f=u.start;f<u.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const h=Mo.relativeComplement(l,s).reverse();for(const u of h)for(let f=u.end-1;f>=u.start;f--)this.insertItemInDOM(f);for(let u=l.start;u<l.end;u++)this.items[u].row&&this.updateItemInDOM(this.items[u],u);if(typeof o=="number"){const u=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(o)-r+u;this.setScrollTop(f,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const r=this.virtualDelegate.getDynamicHeight(t.element);if(r!==null){const a=t.size;return t.size=r,t.lastDynamicHeightWidth=this.renderWidth,r-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const n=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!As(t.row.domNode,ve(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-n;const{row:s}=this.cache.alloc(t.templateId);s.domNode.style.height="",this.rowsContainer.appendChild(s.domNode);const o=this.renderers.get(t.templateId);if(!o)throw new Et("Missing renderer for templateId: "+t.templateId);return o.renderElement(t.element,e,s.templateData,void 0),t.size=s.domNode.offsetHeight,o.disposeElement?.(t.element,e,s.templateData,void 0),this.virtualDelegate.setDynamicHeight?.(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,s.domNode.remove(),this.cache.release(s),t.size-n}getElementDomId(e){return`${this.domId}_${e}`}dispose(){for(const e of this.items)if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement?.(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[],this.domNode?.remove(),this.dragOverAnimationDisposable?.dispose(),this.disposables.dispose()}};ph([Ie],ed.prototype,"onMouseClick");ph([Ie],ed.prototype,"onMouseDblClick");ph([Ie],ed.prototype,"onMouseMiddleClick");ph([Ie],ed.prototype,"onMouseUp");ph([Ie],ed.prototype,"onMouseDown");ph([Ie],ed.prototype,"onMouseOver");ph([Ie],ed.prototype,"onMouseMove");ph([Ie],ed.prototype,"onMouseOut");ph([Ie],ed.prototype,"onContextMenu");ph([Ie],ed.prototype,"onTouchStart");ph([Ie],ed.prototype,"onTap");let UTe=ed;var zTe=Object.defineProperty,yee=(i,e)=>zTe(i,"name",{value:e,configurable:!0}),See=(i=>(i[i.Copy=0]="Copy",i[i.Move=1]="Move",i))(See||{}),S1=(i=>(i.Over="drop-target",i.Before="drop-target-before",i.After="drop-target-after",i))(S1||{});class xm extends Error{static{yee(this,"ListError")}constructor(e,t){super(`ListError [${e}] ${t}`)}}class L$e{static{yee(this,"CachedListVirtualDelegate")}cache=new WeakMap;getHeight(e){return this.cache.get(e)??this.estimateHeight(e)}setDynamicHeight(e,t){t>0&&this.cache.set(e,t)}}var $Te=Object.defineProperty,yv=(i,e)=>$Te(i,"name",{value:e,configurable:!0});function zF(i){return{isResolved:!!i,promise:null,cts:null,promiseIndexes:new Set,elements:i||[]}}yv(zF,"createPage");function Eee(i){return{firstPage:i,total:i.length,pageSize:i.length,getPage:yv((e,t)=>Promise.resolve(i),"getPage")}}yv(Eee,"singlePagePager");class D$e{static{yv(this,"PagedModel")}pager;pages=[];get length(){return this.pager.total}constructor(e){this.pager=Array.isArray(e)?Eee(e):e;const t=Math.ceil(this.pager.total/this.pager.pageSize);this.pages=[zF(this.pager.firstPage.slice()),...nr(t-1).map(()=>zF())]}isResolved(e){const t=Math.floor(e/this.pager.pageSize);return!!this.pages[t].isResolved}get(e){const t=Math.floor(e/this.pager.pageSize),n=e%this.pager.pageSize;return this.pages[t].elements[n]}resolve(e,t){if(t.isCancellationRequested)return Promise.reject(new ar);const n=Math.floor(e/this.pager.pageSize),s=e%this.pager.pageSize,o=this.pages[n];if(o.isResolved)return Promise.resolve(o.elements[s]);o.promise||(o.cts=new xr,o.promise=this.pager.getPage(n,o.cts.token).then(a=>{o.elements=a,o.isResolved=!0,o.promise=null,o.cts=null},a=>(o.isResolved=!1,o.promise=null,o.cts=null,Promise.reject(a))));const r=t.onCancellationRequested(()=>{o.cts&&(o.promiseIndexes.delete(e),o.promiseIndexes.size===0&&o.cts.cancel())});return o.promiseIndexes.add(e),o.promise.then(()=>o.elements[s]).finally(()=>r.dispose())}}class I$e{constructor(e,t=500){this.model=e,this.timeout=t}static{yv(this,"DelayedPagedModel")}get length(){return this.model.length}isResolved(e){return this.model.isResolved(e)}get(e){return this.model.get(e)}resolve(e,t){return new Promise((n,s)=>{if(t.isCancellationRequested)return s(new ar);const o=setTimeout(()=>{if(t.isCancellationRequested)return s(new ar);r.dispose(),this.model.resolve(e,t).then(n,s)},this.timeout),r=t.onCancellationRequested(()=>{clearTimeout(o),r.dispose(),s(new ar)})})}}function GTe(i,e){return{firstPage:i.firstPage.map(e),total:i.total,pageSize:i.pageSize,getPage:yv((t,n)=>i.getPage(t,n).then(s=>s.map(e)),"getPage")}}yv(GTe,"mapPager");var KTe=Object.defineProperty,jTe=(i,e)=>KTe(i,"name",{value:e,configurable:!0});class qTe{constructor(e){this.spliceables=e}static{jTe(this,"CombinedSpliceable")}splice(e,t,n){this.spliceables.forEach(s=>s.splice(e,t,n))}}var Lee=Object.defineProperty,YTe=Object.getOwnPropertyDescriptor,Bn=(i,e)=>Lee(i,"name",{value:e,configurable:!0}),vu=(i,e,t,n)=>{for(var s=YTe(e,t),o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=r(e,t,s)||s);return s&&Lee(e,t,s),s};class ZTe{constructor(e){this.trait=e}static{Bn(this,"TraitRenderer")}renderedElements=[];get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){const s=this.renderedElements.findIndex(o=>o.templateData===n);if(s>=0){const o=this.renderedElements[s];this.trait.unrender(n),o.index=t}else{const o={index:t,templateData:n};this.renderedElements.push(o)}this.trait.renderIndex(t,n)}splice(e,t,n){const s=[];for(const o of this.renderedElements)o.index<e?s.push(o):o.index>=e+t&&s.push({index:o.index+n-t,templateData:o.templateData});this.renderedElements=s}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}let Rx=class{constructor(e){this._trait=e}static{Bn(this,"Trait")}indexes=[];sortedIndexes=[];_onChange=new x;onChange=this._onChange.event;get name(){return this._trait}get renderer(){return new ZTe(this)}splice(e,t,n){const s=n.length-t,o=e+t,r=[];let a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)r.push(this.sortedIndexes[a++]);for(let l=0;l<n.length;l++)n[l]&&r.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=o;)r.push(this.sortedIndexes[a++]+s);this.renderer.splice(e,t,n.length),this._set(r,r)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(_U),t)}_set(e,t,n){const s=this.indexes,o=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const r=Ox(o,e);return this.renderer.renderIndexes(r),this._onChange.fire({indexes:e,browserEvent:n}),s}get(){return this.indexes}contains(e){return sG(this.sortedIndexes,e,_U)>=0}dispose(){ii(this._onChange)}};vu([Ie],Rx.prototype,"renderer");class XTe extends Rx{constructor(e){super("selected"),this.setAriaSelected=e}static{Bn(this,"SelectionTrait")}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class KO{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}static{Bn(this,"TraitSpliceable")}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,new Array(n.length).fill(!1));const s=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(s.length===0)return this.trait.splice(e,t,new Array(n.length).fill(!1));const o=new Set(s),r=n.map(a=>o.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,r)}}function Sv(i,e){return i.classList.contains(e)?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:Sv(i.parentElement,e)}Bn(Sv,"isListElementDescendantOfClass");function Ew(i){return Sv(i,"monaco-editor")}Bn(Ew,"isMonacoEditor");function Dee(i){return Sv(i,"monaco-custom-toggle")}Bn(Dee,"isMonacoCustomToggle");function Iee(i){return Sv(i,"action-item")}Bn(Iee,"isActionItem");function QTe(i){return Sv(i,"monaco-tl-twistie")}Bn(QTe,"isMonacoTwistie");function lC(i){return Sv(i,"monaco-tree-sticky-row")}Bn(lC,"isStickyScrollElement");function ry(i){return i.classList.contains("monaco-tree-sticky-container")}Bn(ry,"isStickyScrollContainer");function b3(i){return i.tagName==="A"&&i.classList.contains("monaco-button")||i.tagName==="DIV"&&i.classList.contains("monaco-button-dropdown")?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:b3(i.parentElement)}Bn(b3,"isButton");class Tee{constructor(e,t,n){this.list=e,this.view=t,this.multipleSelectionSupport=n.multipleSelectionSupport,this.disposables.add(this.onKeyDown(s=>{switch(s.keyCode){case E.Enter:return this.onEnter(s);case E.UpArrow:return this.onUpArrow(s);case E.DownArrow:return this.onDownArrow(s);case E.PageUp:return this.onPageUpArrow(s);case E.PageDown:return this.onPageDownArrow(s);case E.Escape:return this.onEscape(s);case E.KeyA:this.multipleSelectionSupport&&(Ue?s.metaKey:s.ctrlKey)&&this.onCtrlA(s)}}))}static{Bn(this,"KeyboardController")}disposables=new te;multipleSelectionDisposables=new te;multipleSelectionSupport;get onKeyDown(){return H.chain(this.disposables.add(new Je(this.view.domNode,"keydown")).event,e=>e.filter(t=>!Gd(t.target)).map(t=>new Pt(t)))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(nr(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}vu([Ie],Tee.prototype,"onKeyDown");var sw=(i=>(i[i.Automatic=0]="Automatic",i[i.Trigger=1]="Trigger",i))(sw||{});const JTe=new class{mightProducePrintableCharacter(i){return i.ctrlKey||i.metaKey||i.altKey?!1:i.keyCode>=E.KeyA&&i.keyCode<=E.KeyZ||i.keyCode>=E.Digit0&&i.keyCode<=E.Digit9||i.keyCode>=E.Numpad0&&i.keyCode<=E.Numpad9||i.keyCode>=E.Semicolon&&i.keyCode<=E.Quote}};class eAe{constructor(e,t,n,s,o){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.keyboardNavigationEventFilter=s,this.delegate=o,this.updateOptions(e.options)}static{Bn(this,"TypeNavigationController")}enabled=!1;state=0;mode=0;triggered=!1;previouslyFocused=-1;enabledDisposables=new te;disposables=new te;updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??0}trigger(){this.triggered=!this.triggered}enable(){if(this.enabled)return;let e=!1;const t=H.chain(this.enabledDisposables.add(new Je(this.view.domNode,"keydown")).event,o=>o.filter(r=>!Gd(r.target)).filter(()=>this.mode===0||this.triggered).map(r=>new Pt(r)).filter(r=>e||this.keyboardNavigationEventFilter(r)).filter(r=>this.delegate.mightProducePrintableCharacter(r)).forEach(r=>Fe.stop(r,!0)).map(r=>r.browserEvent.key)),n=H.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);H.reduce(H.any(t,n),(o,r)=>r===null?null:(o||"")+r,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){const e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){const t=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(e[0]));typeof t=="string"?Ub(t):t&&Ub(t.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=0,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,s=this.state===0?1:0;this.state=1;for(let o=0;o<this.list.length;o++){const r=(n+o+s)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(r)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(aE(e,l)){this.previouslyFocused=n,this.list.setFocus([r]),this.list.reveal(r);return}const c=cY(e,l);if(c&&c[0].end-c[0].start>1&&c.length===1){this.previouslyFocused=n,this.list.setFocus([r]),this.list.reveal(r);return}}}else if(typeof l>"u"||aE(e,l)){this.previouslyFocused=n,this.list.setFocus([r]),this.list.reveal(r);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class tAe{constructor(e,t){this.list=e,this.view=t;const n=H.chain(this.disposables.add(new Je(t.domNode,"keydown")).event,o=>o.filter(r=>!Gd(r.target)).map(r=>new Pt(r)));H.chain(n,o=>o.filter(r=>r.keyCode===E.Tab&&!r.ctrlKey&&!r.metaKey&&!r.shiftKey&&!r.altKey))(this.onTab,this,this.disposables)}static{Bn(this,"DOMFocusController")}disposables=new te;onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const s=n.querySelector("[tabIndex]");if(!s||!xs(s)||s.tabIndex===-1)return;const o=ve(s).getComputedStyle(s);o.visibility==="hidden"||o.display==="none"||(e.preventDefault(),e.stopPropagation(),s.focus())}dispose(){this.disposables.dispose()}}function v3(i){return Ue?i.browserEvent.metaKey:i.browserEvent.ctrlKey}Bn(v3,"isSelectionSingleChangeEvent");function w3(i){return i.browserEvent.shiftKey}Bn(w3,"isSelectionRangeChangeEvent");function Aee(i){return gg(i)&&i.button===2}Bn(Aee,"isMouseRightClick");const mU={isSelectionSingleChangeEvent:v3,isSelectionRangeChangeEvent:w3};class xee{constructor(e){this.list=e,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||mU),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Gn.addTarget(e.getHTMLElement()))),H.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}static{Bn(this,"MouseController")}multipleSelectionController;mouseSupport;disposables=new te;_onPointer=new x;onPointer=this._onPointer.event;updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||mU))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){Ew(e.browserEvent.target)||Lr()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(Gd(e.browserEvent.target)||Ew(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||Gd(e.browserEvent.target)||Ew(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),Aee(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(Gd(e.browserEvent.target)||Ew(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof n>"u"&&(n=this.list.getFocus()[0]??t,this.list.setAnchor(n));const s=Math.min(n,t),o=Math.max(n,t),r=nr(s,o+1),a=this.list.getSelection(),l=Nee(Ox(a,[n]),n);if(l.length===0)return;const c=Ox(r,Pee(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const s=this.list.getSelection(),o=s.filter(r=>r!==t);this.list.setFocus([t]),this.list.setAnchor(t),s.length===o.length?this.list.setSelection([...o,t],e.browserEvent):this.list.setSelection(o,e.browserEvent)}}dispose(){this.disposables.dispose()}}class iAe{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}static{Bn(this,"DefaultStyleController")}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const s=$d(e.listFocusAndSelectionOutline,$d(e.listSelectionOutline,e.listFocusOutline??""));s&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${s}; outline-offset: -1px;}`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const o=$d(e.listSelectionOutline,e.listInactiveFocusOutline??"");o&&n.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${o}; outline-offset: -1px; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&n.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}}const kee={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:U.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:U.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:U.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},nAe={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function Nee(i,e){const t=i.indexOf(e);if(t===-1)return[];const n=[];let s=t-1;for(;s>=0&&i[s]===e-(t-s);)n.push(i[s--]);for(n.reverse(),s=t;s<i.length&&i[s]===e+(s-t);)n.push(i[s++]);return n}Bn(Nee,"getContiguousRangeContaining");function Ox(i,e){const t=[];let n=0,s=0;for(;n<i.length||s<e.length;)if(n>=i.length)t.push(e[s++]);else if(s>=e.length)t.push(i[n++]);else if(i[n]===e[s]){t.push(i[n]),n++,s++;continue}else i[n]<e[s]?t.push(i[n++]):t.push(e[s++]);return t}Bn(Ox,"disjunction");function Pee(i,e){const t=[];let n=0,s=0;for(;n<i.length||s<e.length;)if(n>=i.length)t.push(e[s++]);else if(s>=e.length)t.push(i[n++]);else if(i[n]===e[s]){n++,s++;continue}else i[n]<e[s]?t.push(i[n++]):s++;return t}Bn(Pee,"relativeComplement");const _U=Bn((i,e)=>i-e,"numericSort");class sAe{constructor(e,t){this._templateId=e,this.renderers=t}static{Bn(this,"PipelineRenderer")}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,s){let o=0;for(const r of this.renderers)r.renderElement(e,t,n[o++],s)}disposeElement(e,t,n,s){let o=0;for(const r of this.renderers)r.disposeElement?.(e,t,n[o],s),o+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class oAe{constructor(e){this.accessibilityProvider=e}static{Bn(this,"AccessibiltyRenderer")}templateId="a18n";renderTemplate(e){return{container:e,disposables:new te}}renderElement(e,t,n){const s=this.accessibilityProvider.getAriaLabel(e),o=s&&typeof s!="string"?s:$0(s);n.disposables.add(Li(a=>{this.setAriaLabel(a.readObservable(o),n.container)}));const r=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof r=="number"?n.container.setAttribute("aria-level",`${r}`):n.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,n,s){n.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}}class rAe{constructor(e,t){this.list=e,this.dnd=t}static{Bn(this,"ListViewDragAndDrop")}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart?.(e,t)}onDragOver(e,t,n,s,o){return this.dnd.onDragOver(e,t,n,s,o)}onDragLeave(e,t,n,s){this.dnd.onDragLeave?.(e,t,n,s)}onDragEnd(e){this.dnd.onDragEnd?.(e)}drop(e,t,n,s,o){this.dnd.drop(e,t,n,s,o)}dispose(){this.dnd.dispose()}}class fl{constructor(e,t,n,s,o=nAe){this.user=e,this._options=o;const r=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():"list";this.selection=new XTe(r!=="listbox");const a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=o.accessibilityProvider,this.accessibilityProvider&&(a.push(new oAe(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant,this,this.disposables)),s=s.map(c=>new sAe(c.templateId,[...a,c]));const l={...o,dnd:o.dnd&&new rAe(this,o.dnd)};if(this.view=this.createListView(t,n,s,l),this.view.domNode.setAttribute("role",r),o.styleController)this.styleController=o.styleController(this.view.domId);else{const c=ic(this.view.domNode);this.styleController=new iAe(c,this.view.domId)}if(this.spliceable=new qTe([new KO(this.focus,this.view,o.identityProvider),new KO(this.selection,this.view,o.identityProvider),new KO(this.anchor,this.view,o.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new tAe(this,this.view)),(typeof o.keyboardSupport!="boolean"||o.keyboardSupport)&&(this.keyboardController=new Tee(this,this.view,o),this.disposables.add(this.keyboardController)),o.keyboardNavigationLabelProvider){const c=o.keyboardNavigationDelegate||JTe;this.typeNavigationController=new eAe(this,this.view,o.keyboardNavigationLabelProvider,o.keyboardNavigationEventFilter??(()=>!0),c),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(o),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}static{Bn(this,"List")}focus=new Rx("focused");selection;anchor=new Rx("anchor");eventBufferer=new a5;view;spliceable;styleController;typeNavigationController;accessibilityProvider;keyboardController;mouseController;_ariaLabel="";disposables=new te;get onDidChangeFocus(){return H.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return H.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseUp(){return this.view.onMouseUp}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseMove(){return this.view.onMouseMove}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=H.chain(this.disposables.add(new Je(this.view.domNode,"keydown")).event,o=>o.map(r=>new Pt(r)).filter(r=>e=r.keyCode===E.ContextMenu||r.shiftKey&&r.keyCode===E.F10).map(r=>Fe.stop(r,!0)).filter(()=>!1)),n=H.chain(this.disposables.add(new Je(this.view.domNode,"keyup")).event,o=>o.forEach(()=>e=!1).map(r=>new Pt(r)).filter(r=>r.keyCode===E.ContextMenu||r.shiftKey&&r.keyCode===E.F10).map(r=>Fe.stop(r,!0)).map(({browserEvent:r})=>{const a=this.getFocus(),l=a.length?a[0]:void 0,c=typeof l<"u"?this.view.element(l):void 0,d=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:c,anchor:d,browserEvent:r}})),s=H.chain(this.view.onContextMenu,o=>o.filter(r=>!e).map(({element:r,index:a,browserEvent:l})=>({element:r,index:a,anchor:new $n(ve(this.view.domNode),l),browserEvent:l})));return H.any(t,n,s)}get onKeyDown(){return this.disposables.add(new Je(this.view.domNode,"keydown")).event}get onKeyUp(){return this.disposables.add(new Je(this.view.domNode,"keyup")).event}get onKeyPress(){return this.disposables.add(new Je(this.view.domNode,"keypress")).event}get onDidFocus(){return H.signal(this.disposables.add(new Je(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return H.signal(this.disposables.add(new Je(this.view.domNode,"blur",!0)).event)}_onDidDispose=new x;onDidDispose=this._onDidDispose.event;createListView(e,t,n,s){return new UTe(e,t,n,s)}createMouseController(e){return new xee(this)}updateOptions(e={}){this._options={...this._options,...e},this.typeNavigationController?.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),this.keyboardController?.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new xm(this.user,`Invalid start index: ${e}`);if(t<0)throw new xm(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}updateWidth(e){this.view.updateWidth(e)}updateElementHeight(e,t){this.view.updateElementHeight(e,t,null)}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get contentWidth(){return this.view.contentWidth}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.view.onDidChangeContentWidth}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollLeft(){return this.view.getScrollLeft()}set scrollLeft(e){this.view.setScrollLeft(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get firstMostlyVisibleIndex(){return this.view.firstMostlyVisibleIndex}get lastVisibleIndex(){return this.view.lastVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}triggerTypeNavigation(){this.typeNavigationController?.trigger()}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new xm(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new xm(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return this.anchor.get().at(0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new xm(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,s){if(this.length===0)return;const o=this.focus.get(),r=this.findNextIndex(o.length>0?o[0]+e:0,t,s);r>-1&&this.setFocus([r],n)}focusPrevious(e=1,t=!1,n,s){if(this.length===0)return;const o=this.focus.get(),r=this.findPreviousIndex(o.length>0?o[0]-e:0,t,s);r>-1&&this.setFocus([r],n)}async focusNextPage(e,t){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const s=this.getFocus()[0];if(s!==n&&(s===void 0||n>s)){const o=this.findPreviousIndex(n,!1,t);o>-1&&s!==o?this.setFocus([o],e):this.setFocus([n],e)}else{const o=this.view.getScrollTop();let r=o+this.view.renderHeight;n>s&&(r-=this.view.elementHeight(n)),this.view.setScrollTop(r),this.view.getScrollTop()!==o&&(this.setFocus([]),await xa(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,n=()=>0){let s;const o=n(),r=this.view.getScrollTop()+o;r===0?s=this.view.indexAt(r):s=this.view.indexAfter(r-1);const a=this.getFocus()[0];if(a!==s&&(a===void 0||a>=s)){const l=this.findNextIndex(s,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([s],e)}else{const l=r;this.view.setScrollTop(r-this.view.renderHeight-o),this.view.getScrollTop()+n()!==l&&(this.setFocus([]),await xa(0),await this.focusPreviousPage(e,t,n))}}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const s=this.findNextIndex(e,!1,n);s>-1&&this.setFocus([s],t)}findNextIndex(e,t=!1,n){for(let s=0;s<this.length;s++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let s=0;s<this.length;s++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,n=0){if(e<0||e>=this.length)throw new xm(this.user,`Invalid index ${e}`);const s=this.view.getScrollTop(),o=this.view.elementTop(e),r=this.view.elementHeight(e);if(Gc(t)){const a=r-this.view.renderHeight+n;this.view.setScrollTop(a*Kr(t,0,1)+o-n)}else{const a=o+r,l=s+this.view.renderHeight;o<s+n&&a>=l||(o<s+n||a>=l&&r>=this.view.renderHeight?this.view.setScrollTop(o-n):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new xm(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),s=this.view.elementTop(e),o=this.view.elementHeight(e);if(s<n+t||s+o>n+this.view.renderHeight)return null;const r=o-this.view.renderHeight+t;return Math.abs((n+t-s)/r)}isDOMFocused(){return dh(this.view.domNode)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){const e=this.focus.get();if(e.length>0){let t;this.accessibilityProvider?.getActiveDescendantId&&(t=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",t||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}vu([Ie],fl.prototype,"onDidChangeFocus");vu([Ie],fl.prototype,"onDidChangeSelection");vu([Ie],fl.prototype,"onContextMenu");vu([Ie],fl.prototype,"onKeyDown");vu([Ie],fl.prototype,"onKeyUp");vu([Ie],fl.prototype,"onKeyPress");vu([Ie],fl.prototype,"onDidFocus");vu([Ie],fl.prototype,"onDidBlur");var aAe=Object.defineProperty,ay=(i,e)=>aAe(i,"name",{value:e,configurable:!0});class lAe{constructor(e,t){this.renderer=e,this.modelProvider=t}static{ay(this,"PagedRenderer")}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:$.None}}renderElement(e,t,n,s){if(n.disposable?.dispose(),!n.data)return;const o=this.modelProvider();if(o.isResolved(e))return this.renderer.renderElement(o.get(e),e,n.data,s);const r=new xr,a=o.resolve(e,r.token);n.disposable={dispose:ay(()=>r.cancel(),"dispose")},this.renderer.renderPlaceholder(e,n.data),a.then(l=>this.renderer.renderElement(l,e,n.data,s))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class cAe{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}static{ay(this,"PagedAccessibilityProvider")}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function Ree(i,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new cAe(i,e.accessibilityProvider)}}ay(Ree,"fromPagedListOptions");class dAe{static{ay(this,"PagedList")}list;_model;constructor(e,t,n,s,o={}){const r=ay(()=>this.model,"modelProvider"),a=s.map(l=>new lAe(l,r));this.list=new fl(e,t,n,a,Ree(r,o))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}isDOMFocused(){return dh(this.getHTMLElement())}domFocus(){this.list.domFocus()}get onDidFocus(){return this.list.onDidFocus}get onDidBlur(){return this.list.onDidBlur}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseClick(){return H.map(this.list.onMouseClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onMouseDblClick(){return H.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onTap(){return H.map(this.list.onTap,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return H.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeFocus(){return H.map(this.list.onDidChangeFocus,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(s=>this._model.get(s)),indexes:t,browserEvent:n}))}get onDidChangeSelection(){return H.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(s=>this._model.get(s)),indexes:t,browserEvent:n}))}get onContextMenu(){return H.map(this.list.onContextMenu,({element:e,index:t,anchor:n,browserEvent:s})=>typeof e>"u"?{element:e,index:t,anchor:n,browserEvent:s}:{element:this._model.get(e),index:t,anchor:n,browserEvent:s})}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,nr(e.length))}get length(){return this.list.length}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollLeft(){return this.list.scrollLeft}set scrollLeft(e){this.list.scrollLeft=e}setAnchor(e){this.list.setAnchor(e)}getAnchor(){return this.list.getAnchor()}setFocus(e){this.list.setFocus(e)}focusNext(e,t){this.list.focusNext(e,t)}focusPrevious(e,t){this.list.focusPrevious(e,t)}focusNextPage(){return this.list.focusNextPage()}focusPreviousPage(){return this.list.focusPreviousPage()}focusLast(){this.list.focusLast()}focusFirst(){this.list.focusFirst()}getFocus(){return this.list.getFocus()}setSelection(e,t){this.list.setSelection(e,t)}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}layout(e,t){this.list.layout(e,t)}triggerTypeNavigation(){this.list.triggerTypeNavigation()}reveal(e,t){this.list.reveal(e,t)}style(e){this.list.style(e)}dispose(){this.list.dispose()}}var hAe=Object.defineProperty,uAe=(i,e)=>hAe(i,"name",{value:e,configurable:!0});class A$e extends Error{static{uAe(this,"TableError")}constructor(e,t){super(`TableError [${e}] ${t}`)}}var gAe=Object.defineProperty,p_=(i,e)=>gAe(i,"name",{value:e,configurable:!0});let Oee={showHover:p_(()=>{},"showHover"),hideHover:p_(()=>{},"hideHover"),showAndFocusLastHover:p_(()=>{},"showAndFocusLastHover"),setupManagedHover:p_(()=>null,"setupManagedHover"),showManagedHover:p_(()=>{},"showManagedHover")};function Mee(i){Oee=i}p_(Mee,"setBaseLayerHoverDelegate");function pl(){return Oee}p_(pl,"getBaseLayerHoverDelegate");var fAe=Object.defineProperty,mD=(i,e)=>fAe(i,"name",{value:e,configurable:!0});const LI=ce;var zc=(i=>(i[i.LEFT=0]="LEFT",i[i.RIGHT=1]="RIGHT",i[i.BELOW=2]="BELOW",i[i.ABOVE=3]="ABOVE",i))(zc||{});class x$e extends ${static{mD(this,"HoverWidget")}containerDomNode;contentsDomNode;scrollbar;constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new hD(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}}class Bee extends ${static{mD(this,"HoverAction")}static render(e,t,n){return new Bee(e,t,n)}actionLabel;actionKeybindingLabel;actionContainer;action;constructor(e,t,n){super(),this.actionLabel=t.label,this.actionKeybindingLabel=n,this.actionContainer=Le(e,LI("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=Le(this.actionContainer,LI("a.action")),this.action.setAttribute("role","button"),t.iconClass&&Le(this.action,LI(`span.icon.${t.iconClass}`));const s=Le(this.action,LI("span"));s.textContent=n?`${t.label} (${n})`:t.label,this._store.add(new mAe(this.actionContainer,t.run)),this._store.add(new _Ae(this.actionContainer,t.run,[E.Enter,E.Space])),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function pAe(i,e){return i&&e?g("acessibleViewHint","Inspect this in the accessible view with {0}.",e):i?g("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}mD(pAe,"getHoverAccessibleViewHint");class mAe extends ${static{mD(this,"ClickAction")}constructor(e,t){super(),this._register(F(e,Q.CLICK,n=>{n.stopPropagation(),n.preventDefault(),t(e)}))}}class _Ae extends ${static{mD(this,"KeyDownAction")}constructor(e,t,n){super(),this._register(F(e,Q.KEY_DOWN,s=>{const o=new Pt(s);n.some(r=>o.equals(r))&&(s.stopPropagation(),s.preventDefault(),t(e))}))}}var bAe=Object.defineProperty,cC=(i,e)=>bAe(i,"name",{value:e,configurable:!0});const vAe=cC(()=>({get delay(){return-1},dispose:cC(()=>{},"dispose"),showHover:cC(()=>{},"showHover")}),"nullHoverDelegateFactory");let $P=vAe;const wAe=new cr(()=>$P("mouse",!1)),CAe=new cr(()=>$P("element",!1));function Fee(i){$P=i}cC(Fee,"setHoverDelegateFactory");function bn(i){return i==="element"?CAe.value:wAe.value}cC(bn,"getDefaultHoverDelegate");function cm(){return $P("element",!0)}cC(cm,"createInstantHoverDelegate");var yAe=Object.defineProperty,PE=(i,e)=>yAe(i,"name",{value:e,configurable:!0});class GP{constructor(e,t,n){this.columns=e,this.getColumnSize=n;const s=new Map(t.map(o=>[o.templateId,o]));this.renderers=[];for(const o of e){const r=s.get(o.templateId);if(!r)throw new Error(`Table cell renderer for template id ${o.templateId} not found.`);this.renderers.push(r)}}static{PE(this,"TableListRenderer")}static TemplateId="row";templateId=GP.TemplateId;renderers;renderedTemplates=new Set;renderTemplate(e){const t=Le(e,ce(".monaco-table-tr")),n=[],s=[];for(let r=0;r<this.columns.length;r++){const a=this.renderers[r],l=Le(t,ce(".monaco-table-td",{"data-col-index":r}));l.style.width=`${this.getColumnSize(r)}px`,n.push(l),s.push(a.renderTemplate(l))}const o={container:e,cellContainers:n,cellTemplateData:s};return this.renderedTemplates.add(o),o}renderElement(e,t,n,s){for(let o=0;o<this.columns.length;o++){const a=this.columns[o].project(e);this.renderers[o].renderElement(a,t,n.cellTemplateData[o],s)}}disposeElement(e,t,n,s){for(let o=0;o<this.columns.length;o++){const r=this.renderers[o];if(r.disposeElement){const l=this.columns[o].project(e);r.disposeElement(l,t,n.cellTemplateData[o],s)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Mn(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}}function Vee(i){return{getHeight(e){return i.getHeight(e)},getTemplateId(){return GP.TemplateId}}}PE(Vee,"asListVirtualDelegate");class SAe extends ${constructor(e,t){super(),this.column=e,this.index=t,this.element=ce(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register(pl().setupManagedHover(bn("mouse"),this.element,e.tooltip))}static{PE(this,"ColumnHeader")}element;get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??H.None}_onDidLayout=new x;onDidLayout=this._onDidLayout.event;layout(e){this._onDidLayout.fire([this.index,e])}}class C3{constructor(e,t,n,s,o,r){this.virtualDelegate=n,this.columns=s,this.domNode=Le(t,ce(`.monaco-table.${this.domId}`));const a=s.map((d,h)=>this.disposables.add(new SAe(d,h))),l={size:a.reduce((d,h)=>d+h.column.weight,0),views:a.map(d=>({size:d.column.weight,view:d}))};this.splitview=this.disposables.add(new sy(this.domNode,{orientation:ke.HORIZONTAL,scrollbarVisibility:Bi.Hidden,getSashOrthogonalSize:PE(()=>this.cachedHeight,"getSashOrthogonalSize"),descriptor:l})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const c=new GP(s,o,d=>this.splitview.getViewSize(d));this.list=this.disposables.add(new fl(e,this.domNode,Vee(n),[c],r)),H.any(...a.map(d=>d.onDidLayout))(([d,h])=>c.layoutColumn(d,h),null,this.disposables),this.splitview.onDidSashReset(d=>{const h=s.reduce((f,p)=>f+p.weight,0),u=s[d].weight/h*this.cachedWidth;this.splitview.resizeView(d,u)},null,this.disposables),this.styleElement=ic(this.domNode),this.style(kee)}static{PE(this,"Table")}static InstanceCount=0;domId=`table_id_${++C3.InstanceCount}`;domNode;splitview;list;styleElement;disposables=new te;cachedWidth=0;cachedHeight=0;get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseClick(){return this.list.onMouseClick}get onMouseDblClick(){return this.list.onMouseDblClick}get onMouseMiddleClick(){return this.list.onMouseMiddleClick}get onPointer(){return this.list.onPointer}get onMouseUp(){return this.list.onMouseUp}get onMouseDown(){return this.list.onMouseDown}get onMouseOver(){return this.list.onMouseOver}get onMouseMove(){return this.list.onMouseMove}get onMouseOut(){return this.list.onMouseOut}get onTouchStart(){return this.list.onTouchStart}get onTap(){return this.list.onTap}get onContextMenu(){return this.list.onContextMenu}get onDidFocus(){return this.list.onDidFocus}get onDidBlur(){return this.list.onDidBlur}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollLeft(){return this.list.scrollLeft}set scrollLeft(e){this.list.scrollLeft=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}getColumnLabels(){return this.columns.map(e=>e.label)}resizeColumn(e,t){const n=Math.round(t/100*this.cachedWidth);this.splitview.resizeView(e,n)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}rerender(){this.list.rerender()}row(e){return this.list.element(e)}indexOf(e){return this.list.indexOf(e)}get length(){return this.list.length}getHTMLElement(){return this.domNode}layout(e,t){e=e??z5(this.domNode),t=t??U1(this.domNode),this.cachedWidth=t,this.cachedHeight=e,this.splitview.layout(t);const n=e-this.virtualDelegate.headerRowHeight;this.list.getHTMLElement().style.height=`${n}px`,this.list.layout(n,t)}triggerTypeNavigation(){this.list.triggerTypeNavigation()}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}domFocus(){this.list.domFocus()}setAnchor(e){this.list.setAnchor(e)}getAnchor(){return this.list.getAnchor()}getSelectedElements(){return this.list.getSelectedElements()}setSelection(e,t){this.list.setSelection(e,t)}getSelection(){return this.list.getSelection()}setFocus(e,t){this.list.setFocus(e,t)}focusNext(e=1,t=!1,n){this.list.focusNext(e,t,n)}focusPrevious(e=1,t=!1,n){this.list.focusPrevious(e,t,n)}focusNextPage(e){return this.list.focusNextPage(e)}focusPreviousPage(e){return this.list.focusPreviousPage(e)}focusFirst(e){this.list.focusFirst(e)}focusLast(e){this.list.focusLast(e)}getFocus(){return this.list.getFocus()}getFocusedElements(){return this.list.getFocusedElements()}getRelativeTop(e){return this.list.getRelativeTop(e)}reveal(e,t){this.list.reveal(e,t)}dispose(){this.disposables.dispose()}}var EAe=Object.defineProperty,dm=(i,e)=>EAe(i,"name",{value:e,configurable:!0});function Wee(i,e={}){const t=KP(e);return t.textContent=i,t}dm(Wee,"renderText");function Hee(i,e={}){const t=KP(e);return y3(t,Uee(i,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}dm(Hee,"renderFormattedText");function KP(i){const e=i.inline?"span":"div",t=document.createElement(e);return i.className&&(t.className=i.className),t}dm(KP,"createElement");class LAe{static{dm(this,"StringStream")}source;index;constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function y3(i,e,t,n){let s;if(e.type===2)s=document.createTextNode(e.content||"");else if(e.type===3)s=document.createElement("b");else if(e.type===4)s=document.createElement("i");else if(e.type===7&&n)s=document.createElement("code");else if(e.type===5&&t){const o=document.createElement("a");t.disposables.add(Gs(o,"click",r=>{t.callback(String(e.index),r)})),s=o}else e.type===8?s=document.createElement("br"):e.type===1&&(s=i);s&&i!==s&&i.appendChild(s),s&&Array.isArray(e.children)&&e.children.forEach(o=>{y3(s,o,t,n)})}dm(y3,"_renderFormattedText");function Uee(i,e){const t={type:1,children:[]};let n=0,s=t;const o=[],r=new LAe(i);for(;!r.eos();){let a=r.next();const l=a==="\\"&&Mx(r.peek(),e)!==0;if(l&&(a=r.next()),!l&&zee(a,e)&&a===r.peek()){r.advance(),s.type===2&&(s=o.pop());const c=Mx(a,e);if(s.type===c||s.type===5&&c===6)s=o.pop();else{const d={type:c,children:[]};c===5&&(d.index=n,n++),s.children.push(d),o.push(s),s=d}}else if(a===`
`)s.type===2&&(s=o.pop()),s.children.push({type:8});else if(s.type!==2){const c={type:2,content:a};s.children.push(c),o.push(s),s=c}else s.content+=a}return s.type===2&&(s=o.pop()),t}dm(Uee,"parseFormattedText");function zee(i,e){return Mx(i,e)!==0}dm(zee,"isFormatTag");function Mx(i,e){switch(i){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}dm(Mx,"formatTagType");var DAe=Object.defineProperty,$ee=(i,e)=>DAe(i,"name",{value:e,configurable:!0});const IAe=new RegExp(`(\\\\)?\\$\\((${Ne.iconNameExpression}(?:${Ne.iconModifierExpression})?)\\)`,"g");function eu(i){const e=new Array;let t,n=0,s=0;for(;(t=IAe.exec(i))!==null;){s=t.index||0,n<s&&e.push(i.substring(n,s)),n=(t.index||0)+t[0].length;const[,o,r]=t;e.push(o?`$(${r})`:Yp({id:r}))}return n<i.length&&e.push(i.substring(n)),e}$ee(eu,"renderLabelWithIcons");function Yp(i){const e=ce("span");return e.classList.add(...Ne.asClassNameArray(i)),e}$ee(Yp,"renderIcon");var TAe=Object.defineProperty,AAe=(i,e)=>TAe(i,"name",{value:e,configurable:!0});class xAe{static{AAe(this,"IdGenerator")}_prefix;_lastId;constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const $F=new xAe("id#");var kAe=Object.defineProperty,ls=(i,e)=>kAe(i,"name",{value:e,configurable:!0});let qo={};(function(){function i(e,t){t(qo)}ls(i,"define"),i.amd=!0,function(e,t){typeof i=="function"&&i.amd?i(["exports"],t):typeof fo=="object"&&typeof ade<"u"?t(fo):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}ls(t,"_getDefaults"),e.defaults=t();function n(Dt){e.defaults=Dt}ls(n,"changeDefaults");const s=/[&<>"']/,o=new RegExp(s.source,"g"),r=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(r.source,"g"),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=ls(Dt=>l[Dt],"getEscapeReplacement");function d(Dt,P){if(P){if(s.test(Dt))return Dt.replace(o,c)}else if(r.test(Dt))return Dt.replace(a,c);return Dt}ls(d,"escape$1");const h=/(^|[^\[])\^/g;function u(Dt,P){let O=typeof Dt=="string"?Dt:Dt.source;P=P||"";const B={replace:ls((z,q)=>{let ae=typeof q=="string"?q:q.source;return ae=ae.replace(h,"$1"),O=O.replace(z,ae),B},"replace"),getRegex:ls(()=>new RegExp(O,P),"getRegex")};return B}ls(u,"edit");function f(Dt){try{Dt=encodeURI(Dt).replace(/%25/g,"%")}catch{return null}return Dt}ls(f,"cleanUrl");const p={exec:ls(()=>null,"exec")};function m(Dt,P){const O=Dt.replace(/\|/g,(q,ae,pe)=>{let ze=!1,Ke=ae;for(;--Ke>=0&&pe[Ke]==="\\";)ze=!ze;return ze?"|":" |"}),B=O.split(/ \|/);let z=0;if(B[0].trim()||B.shift(),B.length>0&&!B[B.length-1].trim()&&B.pop(),P)if(B.length>P)B.splice(P);else for(;B.length<P;)B.push("");for(;z<B.length;z++)B[z]=B[z].trim().replace(/\\\|/g,"|");return B}ls(m,"splitCells");function _(Dt,P,O){const B=Dt.length;if(B===0)return"";let z=0;for(;z<B;){const q=Dt.charAt(B-z-1);if(q===P&&!O)z++;else if(q!==P&&O)z++;else break}return Dt.slice(0,B-z)}ls(_,"rtrim");function w(Dt,P){if(Dt.indexOf(P[1])===-1)return-1;let O=0;for(let B=0;B<Dt.length;B++)if(Dt[B]==="\\")B++;else if(Dt[B]===P[0])O++;else if(Dt[B]===P[1]&&(O--,O<0))return B;return-1}ls(w,"findClosingBracket");function v(Dt,P,O,B){const z=P.href,q=P.title?d(P.title):null,ae=Dt[1].replace(/\\([\[\]])/g,"$1");if(Dt[0].charAt(0)!=="!"){B.state.inLink=!0;const pe={type:"link",raw:O,href:z,title:q,text:ae,tokens:B.inlineTokens(ae)};return B.state.inLink=!1,pe}return{type:"image",raw:O,href:z,title:q,text:d(ae)}}ls(v,"outputLink");function b(Dt,P){const O=Dt.match(/^(\s+)(?:```)/);if(O===null)return P;const B=O[1];return P.split(`
`).map(z=>{const q=z.match(/^\s+/);if(q===null)return z;const[ae]=q;return ae.length>=B.length?z.slice(B.length):z}).join(`
`)}ls(b,"indentCodeCompensation");class C{static{ls(this,"_Tokenizer")}options;rules;lexer;constructor(P){this.options=P||e.defaults}space(P){const O=this.rules.block.newline.exec(P);if(O&&O[0].length>0)return{type:"space",raw:O[0]}}code(P){const O=this.rules.block.code.exec(P);if(O){const B=O[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:O[0],codeBlockStyle:"indented",text:this.options.pedantic?B:_(B,`
`)}}}fences(P){const O=this.rules.block.fences.exec(P);if(O){const B=O[0],z=b(B,O[3]||"");return{type:"code",raw:B,lang:O[2]?O[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):O[2],text:z}}}heading(P){const O=this.rules.block.heading.exec(P);if(O){let B=O[2].trim();if(/#$/.test(B)){const z=_(B,"#");(this.options.pedantic||!z||/ $/.test(z))&&(B=z.trim())}return{type:"heading",raw:O[0],depth:O[1].length,text:B,tokens:this.lexer.inline(B)}}}hr(P){const O=this.rules.block.hr.exec(P);if(O)return{type:"hr",raw:_(O[0],`
`)}}blockquote(P){const O=this.rules.block.blockquote.exec(P);if(O){let B=_(O[0],`
`).split(`
`),z="",q="";const ae=[];for(;B.length>0;){let pe=!1;const ze=[];let Ke;for(Ke=0;Ke<B.length;Ke++)if(/^ {0,3}>/.test(B[Ke]))ze.push(B[Ke]),pe=!0;else if(!pe)ze.push(B[Ke]);else break;B=B.slice(Ke);const It=ze.join(`
`),vi=It.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");z=z?`${z}
${It}`:It,q=q?`${q}
${vi}`:vi;const En=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(vi,ae,!0),this.lexer.state.top=En,B.length===0)break;const Rs=ae[ae.length-1];if(Rs?.type==="code")break;if(Rs?.type==="blockquote"){const Fn=Rs,Xe=Fn.raw+`
`+B.join(`
`),J=this.blockquote(Xe);ae[ae.length-1]=J,z=z.substring(0,z.length-Fn.raw.length)+J.raw,q=q.substring(0,q.length-Fn.text.length)+J.text;break}else if(Rs?.type==="list"){const Fn=Rs,Xe=Fn.raw+`
`+B.join(`
`),J=this.list(Xe);ae[ae.length-1]=J,z=z.substring(0,z.length-Rs.raw.length)+J.raw,q=q.substring(0,q.length-Fn.raw.length)+J.raw,B=Xe.substring(ae[ae.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:z,tokens:ae,text:q}}}list(P){let O=this.rules.block.list.exec(P);if(O){let B=O[1].trim();const z=B.length>1,q={type:"list",raw:"",ordered:z,start:z?+B.slice(0,-1):"",loose:!1,items:[]};B=z?`\\d{1,9}\\${B.slice(-1)}`:`\\${B}`,this.options.pedantic&&(B=z?B:"[*+-]");const ae=new RegExp(`^( {0,3}${B})((?:[	 ][^\\n]*)?(?:\\n|$))`);let pe=!1;for(;P;){let ze=!1,Ke="",It="";if(!(O=ae.exec(P))||this.rules.block.hr.test(P))break;Ke=O[0],P=P.substring(Ke.length);let vi=O[2].split(`
`,1)[0].replace(/^\t+/,Me=>" ".repeat(3*Me.length)),En=P.split(`
`,1)[0],Rs=!vi.trim(),Fn=0;if(this.options.pedantic?(Fn=2,It=vi.trimStart()):Rs?Fn=O[1].length+1:(Fn=O[2].search(/[^ ]/),Fn=Fn>4?1:Fn,It=vi.slice(Fn),Fn+=O[1].length),Rs&&/^ *$/.test(En)&&(Ke+=En+`
`,P=P.substring(En.length+1),ze=!0),!ze){const Me=new RegExp(`^ {0,${Math.min(3,Fn-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),je=new RegExp(`^ {0,${Math.min(3,Fn-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),on=new RegExp(`^ {0,${Math.min(3,Fn-1)}}(?:\`\`\`|~~~)`),Ys=new RegExp(`^ {0,${Math.min(3,Fn-1)}}#`);for(;P;){const Br=P.split(`
`,1)[0];if(En=Br,this.options.pedantic&&(En=En.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),on.test(En)||Ys.test(En)||Me.test(En)||je.test(P))break;if(En.search(/[^ ]/)>=Fn||!En.trim())It+=`
`+En.slice(Fn);else{if(Rs||vi.search(/[^ ]/)>=4||on.test(vi)||Ys.test(vi)||je.test(vi))break;It+=`
`+En}!Rs&&!En.trim()&&(Rs=!0),Ke+=Br+`
`,P=P.substring(Br.length+1),vi=En.slice(Fn)}}q.loose||(pe?q.loose=!0:/\n *\n *$/.test(Ke)&&(pe=!0));let Xe=null,J;this.options.gfm&&(Xe=/^\[[ xX]\] /.exec(It),Xe&&(J=Xe[0]!=="[ ] ",It=It.replace(/^\[[ xX]\] +/,""))),q.items.push({type:"list_item",raw:Ke,task:!!Xe,checked:J,loose:!1,text:It,tokens:[]}),q.raw+=Ke}q.items[q.items.length-1].raw=q.items[q.items.length-1].raw.trimEnd(),q.items[q.items.length-1].text=q.items[q.items.length-1].text.trimEnd(),q.raw=q.raw.trimEnd();for(let ze=0;ze<q.items.length;ze++)if(this.lexer.state.top=!1,q.items[ze].tokens=this.lexer.blockTokens(q.items[ze].text,[]),!q.loose){const Ke=q.items[ze].tokens.filter(vi=>vi.type==="space"),It=Ke.length>0&&Ke.some(vi=>/\n.*\n/.test(vi.raw));q.loose=It}if(q.loose)for(let ze=0;ze<q.items.length;ze++)q.items[ze].loose=!0;return q}}html(P){const O=this.rules.block.html.exec(P);if(O)return{type:"html",block:!0,raw:O[0],pre:O[1]==="pre"||O[1]==="script"||O[1]==="style",text:O[0]}}def(P){const O=this.rules.block.def.exec(P);if(O){const B=O[1].toLowerCase().replace(/\s+/g," "),z=O[2]?O[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",q=O[3]?O[3].substring(1,O[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):O[3];return{type:"def",tag:B,raw:O[0],href:z,title:q}}}table(P){const O=this.rules.block.table.exec(P);if(!O||!/[:|]/.test(O[2]))return;const B=m(O[1]),z=O[2].replace(/^\||\| *$/g,"").split("|"),q=O[3]&&O[3].trim()?O[3].replace(/\n[ \t]*$/,"").split(`
`):[],ae={type:"table",raw:O[0],header:[],align:[],rows:[]};if(B.length===z.length){for(const pe of z)/^ *-+: *$/.test(pe)?ae.align.push("right"):/^ *:-+: *$/.test(pe)?ae.align.push("center"):/^ *:-+ *$/.test(pe)?ae.align.push("left"):ae.align.push(null);for(let pe=0;pe<B.length;pe++)ae.header.push({text:B[pe],tokens:this.lexer.inline(B[pe]),header:!0,align:ae.align[pe]});for(const pe of q)ae.rows.push(m(pe,ae.header.length).map((ze,Ke)=>({text:ze,tokens:this.lexer.inline(ze),header:!1,align:ae.align[Ke]})));return ae}}lheading(P){const O=this.rules.block.lheading.exec(P);if(O)return{type:"heading",raw:O[0],depth:O[2].charAt(0)==="="?1:2,text:O[1],tokens:this.lexer.inline(O[1])}}paragraph(P){const O=this.rules.block.paragraph.exec(P);if(O){const B=O[1].charAt(O[1].length-1)===`
`?O[1].slice(0,-1):O[1];return{type:"paragraph",raw:O[0],text:B,tokens:this.lexer.inline(B)}}}text(P){const O=this.rules.block.text.exec(P);if(O)return{type:"text",raw:O[0],text:O[0],tokens:this.lexer.inline(O[0])}}escape(P){const O=this.rules.inline.escape.exec(P);if(O)return{type:"escape",raw:O[0],text:d(O[1])}}tag(P){const O=this.rules.inline.tag.exec(P);if(O)return!this.lexer.state.inLink&&/^<a /i.test(O[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(O[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(O[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(O[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:O[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:O[0]}}link(P){const O=this.rules.inline.link.exec(P);if(O){const B=O[2].trim();if(!this.options.pedantic&&/^</.test(B)){if(!/>$/.test(B))return;const ae=_(B.slice(0,-1),"\\");if((B.length-ae.length)%2===0)return}else{const ae=w(O[2],"()");if(ae>-1){const ze=(O[0].indexOf("!")===0?5:4)+O[1].length+ae;O[2]=O[2].substring(0,ae),O[0]=O[0].substring(0,ze).trim(),O[3]=""}}let z=O[2],q="";if(this.options.pedantic){const ae=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(z);ae&&(z=ae[1],q=ae[3])}else q=O[3]?O[3].slice(1,-1):"";return z=z.trim(),/^</.test(z)&&(this.options.pedantic&&!/>$/.test(B)?z=z.slice(1):z=z.slice(1,-1)),v(O,{href:z&&z.replace(this.rules.inline.anyPunctuation,"$1"),title:q&&q.replace(this.rules.inline.anyPunctuation,"$1")},O[0],this.lexer)}}reflink(P,O){let B;if((B=this.rules.inline.reflink.exec(P))||(B=this.rules.inline.nolink.exec(P))){const z=(B[2]||B[1]).replace(/\s+/g," "),q=O[z.toLowerCase()];if(!q){const ae=B[0].charAt(0);return{type:"text",raw:ae,text:ae}}return v(B,q,B[0],this.lexer)}}emStrong(P,O,B=""){let z=this.rules.inline.emStrongLDelim.exec(P);if(!z||z[3]&&B.match(/[\p{L}\p{N}]/u))return;if(!(z[1]||z[2]||"")||!B||this.rules.inline.punctuation.exec(B)){const ae=[...z[0]].length-1;let pe,ze,Ke=ae,It=0;const vi=z[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(vi.lastIndex=0,O=O.slice(-1*P.length+ae);(z=vi.exec(O))!=null;){if(pe=z[1]||z[2]||z[3]||z[4]||z[5]||z[6],!pe)continue;if(ze=[...pe].length,z[3]||z[4]){Ke+=ze;continue}else if((z[5]||z[6])&&ae%3&&!((ae+ze)%3)){It+=ze;continue}if(Ke-=ze,Ke>0)continue;ze=Math.min(ze,ze+Ke+It);const En=[...z[0]][0].length,Rs=P.slice(0,ae+z.index+En+ze);if(Math.min(ae,ze)%2){const Xe=Rs.slice(1,-1);return{type:"em",raw:Rs,text:Xe,tokens:this.lexer.inlineTokens(Xe)}}const Fn=Rs.slice(2,-2);return{type:"strong",raw:Rs,text:Fn,tokens:this.lexer.inlineTokens(Fn)}}}}codespan(P){const O=this.rules.inline.code.exec(P);if(O){let B=O[2].replace(/\n/g," ");const z=/[^ ]/.test(B),q=/^ /.test(B)&&/ $/.test(B);return z&&q&&(B=B.substring(1,B.length-1)),B=d(B,!0),{type:"codespan",raw:O[0],text:B}}}br(P){const O=this.rules.inline.br.exec(P);if(O)return{type:"br",raw:O[0]}}del(P){const O=this.rules.inline.del.exec(P);if(O)return{type:"del",raw:O[0],text:O[2],tokens:this.lexer.inlineTokens(O[2])}}autolink(P){const O=this.rules.inline.autolink.exec(P);if(O){let B,z;return O[2]==="@"?(B=d(O[1]),z="mailto:"+B):(B=d(O[1]),z=B),{type:"link",raw:O[0],text:B,href:z,tokens:[{type:"text",raw:B,text:B}]}}}url(P){let O;if(O=this.rules.inline.url.exec(P)){let B,z;if(O[2]==="@")B=d(O[0]),z="mailto:"+B;else{let q;do q=O[0],O[0]=this.rules.inline._backpedal.exec(O[0])?.[0]??"";while(q!==O[0]);B=d(O[0]),O[1]==="www."?z="http://"+O[0]:z=O[0]}return{type:"link",raw:O[0],text:B,href:z,tokens:[{type:"text",raw:B,text:B}]}}}inlineText(P){const O=this.rules.inline.text.exec(P);if(O){let B;return this.lexer.state.inRawBlock?B=O[0]:B=d(O[0]),{type:"text",raw:O[0],text:B}}}}const S=/^(?: *(?:\n|$))+/,D=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,T=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,I=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,R=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,G=/(?:[*+-]|\d{1,9}[.)])/,K=u(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,G).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),X=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,we=/^[^\n]+/,re=/(?!\s*\])(?:\\.|[^\[\]\\])+/,le=u(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",re).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ee=u(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,G).getRegex(),Se="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ue=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,fe=u("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",ue).replace("tag",Se).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),$e=u(X).replace("hr",I).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Se).getRegex(),Qt={blockquote:u(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",$e).getRegex(),code:D,def:le,fences:T,heading:R,hr:I,html:fe,lheading:K,list:Ee,newline:S,paragraph:$e,table:p,text:we},qt=u("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",I).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Se).getRegex(),en={...Qt,table:qt,paragraph:u(X).replace("hr",I).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",qt).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Se).getRegex()},as={...Qt,html:u(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ue).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:p,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:u(X).replace("hr",I).replace("heading",` *#{1,6} *[^
]`).replace("lheading",K).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Zo=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Sn=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Mr=/^( {2,}|\\)\n(?!\s*$)/,Bv=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,gc="\\p{P}\\p{S}",Eu=u(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,gc).getRegex(),TS=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,AS=u(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,gc).getRegex(),Lf=u("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,gc).getRegex(),Fv=u("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,gc).getRegex(),Vv=u(/\\([punct])/,"gu").replace(/punct/g,gc).getRegex(),KD=u(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),jD=u(ue).replace("(?:-->|$)","-->").getRegex(),oO=u("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",jD).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Df=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Sm=u(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Df).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Lu=u(/^!?\[(label)\]\[(ref)\]/).replace("label",Df).replace("ref",re).getRegex(),Du=u(/^!?\[(ref)\](?:\[\])?/).replace("ref",re).getRegex(),qD=u("reflink|nolink(?!\\()","g").replace("reflink",Lu).replace("nolink",Du).getRegex(),Wv={_backpedal:p,anyPunctuation:Vv,autolink:KD,blockSkip:TS,br:Mr,code:Sn,del:p,emStrongLDelim:AS,emStrongRDelimAst:Lf,emStrongRDelimUnd:Fv,escape:Zo,link:Sm,nolink:Du,punctuation:Eu,reflink:Lu,reflinkSearch:qD,tag:oO,text:Bv,url:p},YD={...Wv,link:u(/^!?\[(label)\]\((.*?)\)/).replace("label",Df).getRegex(),reflink:u(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Df).getRegex()},Em={...Wv,escape:u(Zo).replace("])","~|])").getRegex(),url:u(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ZD={...Em,br:u(Mr).replace("{2,}","*").getRegex(),text:u(Em.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Iu={normal:Qt,gfm:en,pedantic:as},bh={normal:Wv,gfm:Em,breaks:ZD,pedantic:YD};class qs{static{ls(this,"_Lexer")}tokens;options;state;tokenizer;inlineQueue;constructor(P){this.tokens=[],this.tokens.links=Object.create(null),this.options=P||e.defaults,this.options.tokenizer=this.options.tokenizer||new C,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const O={block:Iu.normal,inline:bh.normal};this.options.pedantic?(O.block=Iu.pedantic,O.inline=bh.pedantic):this.options.gfm&&(O.block=Iu.gfm,this.options.breaks?O.inline=bh.breaks:O.inline=bh.gfm),this.tokenizer.rules=O}static get rules(){return{block:Iu,inline:bh}}static lex(P,O){return new qs(O).lex(P)}static lexInline(P,O){return new qs(O).inlineTokens(P)}lex(P){P=P.replace(/\r\n|\r/g,`
`),this.blockTokens(P,this.tokens);for(let O=0;O<this.inlineQueue.length;O++){const B=this.inlineQueue[O];this.inlineTokens(B.src,B.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(P,O=[],B=!1){this.options.pedantic?P=P.replace(/\t/g,"    ").replace(/^ +$/gm,""):P=P.replace(/^( *)(\t+)/gm,(pe,ze,Ke)=>ze+"    ".repeat(Ke.length));let z,q,ae;for(;P;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(pe=>(z=pe.call({lexer:this},P,O))?(P=P.substring(z.raw.length),O.push(z),!0):!1))){if(z=this.tokenizer.space(P)){P=P.substring(z.raw.length),z.raw.length===1&&O.length>0?O[O.length-1].raw+=`
`:O.push(z);continue}if(z=this.tokenizer.code(P)){P=P.substring(z.raw.length),q=O[O.length-1],q&&(q.type==="paragraph"||q.type==="text")?(q.raw+=`
`+z.raw,q.text+=`
`+z.text,this.inlineQueue[this.inlineQueue.length-1].src=q.text):O.push(z);continue}if(z=this.tokenizer.fences(P)){P=P.substring(z.raw.length),O.push(z);continue}if(z=this.tokenizer.heading(P)){P=P.substring(z.raw.length),O.push(z);continue}if(z=this.tokenizer.hr(P)){P=P.substring(z.raw.length),O.push(z);continue}if(z=this.tokenizer.blockquote(P)){P=P.substring(z.raw.length),O.push(z);continue}if(z=this.tokenizer.list(P)){P=P.substring(z.raw.length),O.push(z);continue}if(z=this.tokenizer.html(P)){P=P.substring(z.raw.length),O.push(z);continue}if(z=this.tokenizer.def(P)){P=P.substring(z.raw.length),q=O[O.length-1],q&&(q.type==="paragraph"||q.type==="text")?(q.raw+=`
`+z.raw,q.text+=`
`+z.raw,this.inlineQueue[this.inlineQueue.length-1].src=q.text):this.tokens.links[z.tag]||(this.tokens.links[z.tag]={href:z.href,title:z.title});continue}if(z=this.tokenizer.table(P)){P=P.substring(z.raw.length),O.push(z);continue}if(z=this.tokenizer.lheading(P)){P=P.substring(z.raw.length),O.push(z);continue}if(ae=P,this.options.extensions&&this.options.extensions.startBlock){let pe=1/0;const ze=P.slice(1);let Ke;this.options.extensions.startBlock.forEach(It=>{Ke=It.call({lexer:this},ze),typeof Ke=="number"&&Ke>=0&&(pe=Math.min(pe,Ke))}),pe<1/0&&pe>=0&&(ae=P.substring(0,pe+1))}if(this.state.top&&(z=this.tokenizer.paragraph(ae))){q=O[O.length-1],B&&q?.type==="paragraph"?(q.raw+=`
`+z.raw,q.text+=`
`+z.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=q.text):O.push(z),B=ae.length!==P.length,P=P.substring(z.raw.length);continue}if(z=this.tokenizer.text(P)){P=P.substring(z.raw.length),q=O[O.length-1],q&&q.type==="text"?(q.raw+=`
`+z.raw,q.text+=`
`+z.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=q.text):O.push(z);continue}if(P){const pe="Infinite loop on byte: "+P.charCodeAt(0);if(this.options.silent){console.error(pe);break}else throw new Error(pe)}}return this.state.top=!0,O}inline(P,O=[]){return this.inlineQueue.push({src:P,tokens:O}),O}inlineTokens(P,O=[]){let B,z,q,ae=P,pe,ze,Ke;if(this.tokens.links){const It=Object.keys(this.tokens.links);if(It.length>0)for(;(pe=this.tokenizer.rules.inline.reflinkSearch.exec(ae))!=null;)It.includes(pe[0].slice(pe[0].lastIndexOf("[")+1,-1))&&(ae=ae.slice(0,pe.index)+"["+"a".repeat(pe[0].length-2)+"]"+ae.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(pe=this.tokenizer.rules.inline.blockSkip.exec(ae))!=null;)ae=ae.slice(0,pe.index)+"["+"a".repeat(pe[0].length-2)+"]"+ae.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(pe=this.tokenizer.rules.inline.anyPunctuation.exec(ae))!=null;)ae=ae.slice(0,pe.index)+"++"+ae.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;P;)if(ze||(Ke=""),ze=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(It=>(B=It.call({lexer:this},P,O))?(P=P.substring(B.raw.length),O.push(B),!0):!1))){if(B=this.tokenizer.escape(P)){P=P.substring(B.raw.length),O.push(B);continue}if(B=this.tokenizer.tag(P)){P=P.substring(B.raw.length),z=O[O.length-1],z&&B.type==="text"&&z.type==="text"?(z.raw+=B.raw,z.text+=B.text):O.push(B);continue}if(B=this.tokenizer.link(P)){P=P.substring(B.raw.length),O.push(B);continue}if(B=this.tokenizer.reflink(P,this.tokens.links)){P=P.substring(B.raw.length),z=O[O.length-1],z&&B.type==="text"&&z.type==="text"?(z.raw+=B.raw,z.text+=B.text):O.push(B);continue}if(B=this.tokenizer.emStrong(P,ae,Ke)){P=P.substring(B.raw.length),O.push(B);continue}if(B=this.tokenizer.codespan(P)){P=P.substring(B.raw.length),O.push(B);continue}if(B=this.tokenizer.br(P)){P=P.substring(B.raw.length),O.push(B);continue}if(B=this.tokenizer.del(P)){P=P.substring(B.raw.length),O.push(B);continue}if(B=this.tokenizer.autolink(P)){P=P.substring(B.raw.length),O.push(B);continue}if(!this.state.inLink&&(B=this.tokenizer.url(P))){P=P.substring(B.raw.length),O.push(B);continue}if(q=P,this.options.extensions&&this.options.extensions.startInline){let It=1/0;const vi=P.slice(1);let En;this.options.extensions.startInline.forEach(Rs=>{En=Rs.call({lexer:this},vi),typeof En=="number"&&En>=0&&(It=Math.min(It,En))}),It<1/0&&It>=0&&(q=P.substring(0,It+1))}if(B=this.tokenizer.inlineText(q)){P=P.substring(B.raw.length),B.raw.slice(-1)!=="_"&&(Ke=B.raw.slice(-1)),ze=!0,z=O[O.length-1],z&&z.type==="text"?(z.raw+=B.raw,z.text+=B.text):O.push(B);continue}if(P){const It="Infinite loop on byte: "+P.charCodeAt(0);if(this.options.silent){console.error(It);break}else throw new Error(It)}}return O}}class fc{static{ls(this,"_Renderer")}options;parser;constructor(P){this.options=P||e.defaults}space(P){return""}code({text:P,lang:O,escaped:B}){const z=(O||"").match(/^\S*/)?.[0],q=P.replace(/\n$/,"")+`
`;return z?'<pre><code class="language-'+d(z)+'">'+(B?q:d(q,!0))+`</code></pre>
`:"<pre><code>"+(B?q:d(q,!0))+`</code></pre>
`}blockquote({tokens:P}){return`<blockquote>
${this.parser.parse(P)}</blockquote>
`}html({text:P}){return P}heading({tokens:P,depth:O}){return`<h${O}>${this.parser.parseInline(P)}</h${O}>
`}hr(P){return`<hr>
`}list(P){const O=P.ordered,B=P.start;let z="";for(let pe=0;pe<P.items.length;pe++){const ze=P.items[pe];z+=this.listitem(ze)}const q=O?"ol":"ul",ae=O&&B!==1?' start="'+B+'"':"";return"<"+q+ae+`>
`+z+"</"+q+`>
`}listitem(P){let O="";if(P.task){const B=this.checkbox({checked:!!P.checked});P.loose?P.tokens.length>0&&P.tokens[0].type==="paragraph"?(P.tokens[0].text=B+" "+P.tokens[0].text,P.tokens[0].tokens&&P.tokens[0].tokens.length>0&&P.tokens[0].tokens[0].type==="text"&&(P.tokens[0].tokens[0].text=B+" "+P.tokens[0].tokens[0].text)):P.tokens.unshift({type:"text",raw:B+" ",text:B+" "}):O+=B+" "}return O+=this.parser.parse(P.tokens,!!P.loose),`<li>${O}</li>
`}checkbox({checked:P}){return"<input "+(P?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:P}){return`<p>${this.parser.parseInline(P)}</p>
`}table(P){let O="",B="";for(let q=0;q<P.header.length;q++)B+=this.tablecell(P.header[q]);O+=this.tablerow({text:B});let z="";for(let q=0;q<P.rows.length;q++){const ae=P.rows[q];B="";for(let pe=0;pe<ae.length;pe++)B+=this.tablecell(ae[pe]);z+=this.tablerow({text:B})}return z&&(z=`<tbody>${z}</tbody>`),`<table>
<thead>
`+O+`</thead>
`+z+`</table>
`}tablerow({text:P}){return`<tr>
${P}</tr>
`}tablecell(P){const O=this.parser.parseInline(P.tokens),B=P.header?"th":"td";return(P.align?`<${B} align="${P.align}">`:`<${B}>`)+O+`</${B}>
`}strong({tokens:P}){return`<strong>${this.parser.parseInline(P)}</strong>`}em({tokens:P}){return`<em>${this.parser.parseInline(P)}</em>`}codespan({text:P}){return`<code>${P}</code>`}br(P){return"<br>"}del({tokens:P}){return`<del>${this.parser.parseInline(P)}</del>`}link({href:P,title:O,tokens:B}){const z=this.parser.parseInline(B),q=f(P);if(q===null)return z;P=q;let ae='<a href="'+P+'"';return O&&(ae+=' title="'+O+'"'),ae+=">"+z+"</a>",ae}image({href:P,title:O,text:B}){const z=f(P);if(z===null)return B;P=z;let q=`<img src="${P}" alt="${B}"`;return O&&(q+=` title="${O}"`),q+=">",q}text(P){return"tokens"in P&&P.tokens?this.parser.parseInline(P.tokens):P.text}}class If{static{ls(this,"_TextRenderer")}strong({text:P}){return P}em({text:P}){return P}codespan({text:P}){return P}del({text:P}){return P}html({text:P}){return P}text({text:P}){return P}link({text:P}){return""+P}image({text:P}){return""+P}br(){return""}}class ua{static{ls(this,"_Parser")}options;renderer;textRenderer;constructor(P){this.options=P||e.defaults,this.options.renderer=this.options.renderer||new fc,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new If}static parse(P,O){return new ua(O).parse(P)}static parseInline(P,O){return new ua(O).parseInline(P)}parse(P,O=!0){let B="";for(let z=0;z<P.length;z++){const q=P[z];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[q.type]){const pe=q,ze=this.options.extensions.renderers[pe.type].call({parser:this},pe);if(ze!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(pe.type)){B+=ze||"";continue}}const ae=q;switch(ae.type){case"space":{B+=this.renderer.space(ae);continue}case"hr":{B+=this.renderer.hr(ae);continue}case"heading":{B+=this.renderer.heading(ae);continue}case"code":{B+=this.renderer.code(ae);continue}case"table":{B+=this.renderer.table(ae);continue}case"blockquote":{B+=this.renderer.blockquote(ae);continue}case"list":{B+=this.renderer.list(ae);continue}case"html":{B+=this.renderer.html(ae);continue}case"paragraph":{B+=this.renderer.paragraph(ae);continue}case"text":{let pe=ae,ze=this.renderer.text(pe);for(;z+1<P.length&&P[z+1].type==="text";)pe=P[++z],ze+=`
`+this.renderer.text(pe);O?B+=this.renderer.paragraph({type:"paragraph",raw:ze,text:ze,tokens:[{type:"text",raw:ze,text:ze}]}):B+=ze;continue}default:{const pe='Token with "'+ae.type+'" type was not found.';if(this.options.silent)return console.error(pe),"";throw new Error(pe)}}}return B}parseInline(P,O){O=O||this.renderer;let B="";for(let z=0;z<P.length;z++){const q=P[z];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[q.type]){const pe=this.options.extensions.renderers[q.type].call({parser:this},q);if(pe!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(q.type)){B+=pe||"";continue}}const ae=q;switch(ae.type){case"escape":{B+=O.text(ae);break}case"html":{B+=O.html(ae);break}case"link":{B+=O.link(ae);break}case"image":{B+=O.image(ae);break}case"strong":{B+=O.strong(ae);break}case"em":{B+=O.em(ae);break}case"codespan":{B+=O.codespan(ae);break}case"br":{B+=O.br(ae);break}case"del":{B+=O.del(ae);break}case"text":{B+=O.text(ae);break}default:{const pe='Token with "'+ae.type+'" type was not found.';if(this.options.silent)return console.error(pe),"";throw new Error(pe)}}}return B}}class Lm{static{ls(this,"_Hooks")}options;constructor(P){this.options=P||e.defaults}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(P){return P}postprocess(P){return P}processAllTokens(P){return P}}class vh{static{ls(this,"Marked")}defaults=t();options=this.setOptions;parse=this.parseMarkdown(qs.lex,ua.parse);parseInline=this.parseMarkdown(qs.lexInline,ua.parseInline);Parser=ua;Renderer=fc;TextRenderer=If;Lexer=qs;Tokenizer=C;Hooks=Lm;constructor(...P){this.use(...P)}walkTokens(P,O){let B=[];for(const z of P)switch(B=B.concat(O.call(this,z)),z.type){case"table":{const q=z;for(const ae of q.header)B=B.concat(this.walkTokens(ae.tokens,O));for(const ae of q.rows)for(const pe of ae)B=B.concat(this.walkTokens(pe.tokens,O));break}case"list":{const q=z;B=B.concat(this.walkTokens(q.items,O));break}default:{const q=z;this.defaults.extensions?.childTokens?.[q.type]?this.defaults.extensions.childTokens[q.type].forEach(ae=>{const pe=q[ae].flat(1/0);B=B.concat(this.walkTokens(pe,O))}):q.tokens&&(B=B.concat(this.walkTokens(q.tokens,O)))}}return B}use(...P){const O=this.defaults.extensions||{renderers:{},childTokens:{}};return P.forEach(B=>{const z={...B};if(z.async=this.defaults.async||z.async||!1,B.extensions&&(B.extensions.forEach(q=>{if(!q.name)throw new Error("extension name required");if("renderer"in q){const ae=O.renderers[q.name];ae?O.renderers[q.name]=function(...pe){let ze=q.renderer.apply(this,pe);return ze===!1&&(ze=ae.apply(this,pe)),ze}:O.renderers[q.name]=q.renderer}if("tokenizer"in q){if(!q.level||q.level!=="block"&&q.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const ae=O[q.level];ae?ae.unshift(q.tokenizer):O[q.level]=[q.tokenizer],q.start&&(q.level==="block"?O.startBlock?O.startBlock.push(q.start):O.startBlock=[q.start]:q.level==="inline"&&(O.startInline?O.startInline.push(q.start):O.startInline=[q.start]))}"childTokens"in q&&q.childTokens&&(O.childTokens[q.name]=q.childTokens)}),z.extensions=O),B.renderer){const q=this.defaults.renderer||new fc(this.defaults);for(const ae in B.renderer){if(!(ae in q))throw new Error(`renderer '${ae}' does not exist`);if(["options","parser"].includes(ae))continue;const pe=ae,ze=B.renderer[pe],Ke=q[pe];q[pe]=(...It)=>{let vi=ze.apply(q,It);return vi===!1&&(vi=Ke.apply(q,It)),vi||""}}z.renderer=q}if(B.tokenizer){const q=this.defaults.tokenizer||new C(this.defaults);for(const ae in B.tokenizer){if(!(ae in q))throw new Error(`tokenizer '${ae}' does not exist`);if(["options","rules","lexer"].includes(ae))continue;const pe=ae,ze=B.tokenizer[pe],Ke=q[pe];q[pe]=(...It)=>{let vi=ze.apply(q,It);return vi===!1&&(vi=Ke.apply(q,It)),vi}}z.tokenizer=q}if(B.hooks){const q=this.defaults.hooks||new Lm;for(const ae in B.hooks){if(!(ae in q))throw new Error(`hook '${ae}' does not exist`);if(ae==="options")continue;const pe=ae,ze=B.hooks[pe],Ke=q[pe];Lm.passThroughHooks.has(ae)?q[pe]=It=>{if(this.defaults.async)return Promise.resolve(ze.call(q,It)).then(En=>Ke.call(q,En));const vi=ze.call(q,It);return Ke.call(q,vi)}:q[pe]=(...It)=>{let vi=ze.apply(q,It);return vi===!1&&(vi=Ke.apply(q,It)),vi}}z.hooks=q}if(B.walkTokens){const q=this.defaults.walkTokens,ae=B.walkTokens;z.walkTokens=function(pe){let ze=[];return ze.push(ae.call(this,pe)),q&&(ze=ze.concat(q.call(this,pe))),ze}}this.defaults={...this.defaults,...z}}),this}setOptions(P){return this.defaults={...this.defaults,...P},this}lexer(P,O){return qs.lex(P,O??this.defaults)}parser(P,O){return ua.parse(P,O??this.defaults)}parseMarkdown(P,O){return ls((z,q)=>{const ae={...q},pe={...this.defaults,...ae},ze=this.onError(!!pe.silent,!!pe.async);if(this.defaults.async===!0&&ae.async===!1)return ze(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof z>"u"||z===null)return ze(new Error("marked(): input parameter is undefined or null"));if(typeof z!="string")return ze(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(z)+", string expected"));if(pe.hooks&&(pe.hooks.options=pe),pe.async)return Promise.resolve(pe.hooks?pe.hooks.preprocess(z):z).then(Ke=>P(Ke,pe)).then(Ke=>pe.hooks?pe.hooks.processAllTokens(Ke):Ke).then(Ke=>pe.walkTokens?Promise.all(this.walkTokens(Ke,pe.walkTokens)).then(()=>Ke):Ke).then(Ke=>O(Ke,pe)).then(Ke=>pe.hooks?pe.hooks.postprocess(Ke):Ke).catch(ze);try{pe.hooks&&(z=pe.hooks.preprocess(z));let Ke=P(z,pe);pe.hooks&&(Ke=pe.hooks.processAllTokens(Ke)),pe.walkTokens&&this.walkTokens(Ke,pe.walkTokens);let It=O(Ke,pe);return pe.hooks&&(It=pe.hooks.postprocess(It)),It}catch(Ke){return ze(Ke)}},"parse")}onError(P,O){return B=>{if(B.message+=`
Please report this to https://github.com/markedjs/marked.`,P){const z="<p>An error occurred:</p><pre>"+d(B.message+"",!0)+"</pre>";return O?Promise.resolve(z):z}if(O)return Promise.reject(B);throw B}}}const Tu=new vh;function ji(Dt,P){return Tu.parse(Dt,P)}ls(ji,"marked"),ji.options=ji.setOptions=function(Dt){return Tu.setOptions(Dt),ji.defaults=Tu.defaults,n(ji.defaults),ji},ji.getDefaults=t,ji.defaults=e.defaults,ji.use=function(...Dt){return Tu.use(...Dt),ji.defaults=Tu.defaults,n(ji.defaults),ji},ji.walkTokens=function(Dt,P){return Tu.walkTokens(Dt,P)},ji.parseInline=Tu.parseInline,ji.Parser=ua,ji.parser=ua.parse,ji.Renderer=fc,ji.TextRenderer=If,ji.Lexer=qs,ji.lexer=qs.lex,ji.Tokenizer=C,ji.Hooks=Lm,ji.parse=ji;const _o=ji.options,Tf=ji.setOptions,rO=ji.use,XD=ji.walkTokens,xS=ji.parseInline,QD=ji,JD=ua.parse,aO=qs.lex;e.Hooks=Lm,e.Lexer=qs,e.Marked=vh,e.Parser=ua,e.Renderer=fc,e.TextRenderer=If,e.Tokenizer=C,e.getDefaults=t,e.lexer=aO,e.marked=ji,e.options=_o,e.parse=QD,e.parseInline=xS,e.parser=JD,e.setOptions=Tf,e.use=rO,e.walkTokens=XD})})();qo.Hooks||fo.Hooks;qo.Lexer||fo.Lexer;qo.Marked||fo.Marked;qo.Parser||fo.Parser;var Gee=qo.Renderer||fo.Renderer;qo.TextRenderer||fo.TextRenderer;qo.Tokenizer||fo.Tokenizer;var NAe=qo.defaults||fo.defaults;qo.getDefaults||fo.getDefaults;var jP=qo.lexer||fo.lexer;qo.marked||fo.marked;qo.options||fo.options;var Kee=qo.parse||fo.parse;qo.parseInline||fo.parseInline;var PAe=qo.parser||fo.parser;qo.setOptions||fo.setOptions;qo.use||fo.use;qo.walkTokens||fo.walkTokens;var RAe=Object.defineProperty,dn=(i,e)=>RAe(i,"name",{value:e,configurable:!0});const jO=Object.freeze({image:dn(({href:i,title:e,text:t})=>{let n=[],s=[];return i&&({href:i,dimensions:n}=wY(i),s.push(`src="${u1(i)}"`)),t&&s.push(`alt="${u1(t)}"`),e&&s.push(`title="${u1(e)}"`),n.length&&(s=s.concat(n)),"<img "+s.join(" ")+">"},"image"),paragraph({tokens:i}){return`<p>${this.parser.parseInline(i)}</p>`},link({href:i,title:e,tokens:t}){let n=this.parser.parseInline(t);return typeof i!="string"?"":(i===n&&(n=fT(n)),e=typeof e=="string"?u1(fT(e)):"",i=fT(i),i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${i}" title="${e||i}" draggable="false">${n}</a>`)}});function S3(i,e={},t={}){const n=new te;let s=!1;const o=KP(e),r=dn(function(m){let _;try{_=FP(decodeURIComponent(m))}catch{}return _?(_=bH(_,w=>{if(i.uris&&i.uris[w])return ne.revive(i.uris[w])}),encodeURIComponent(JSON.stringify(_))):m},"_uriMassage"),a=dn(function(m,_){const w=i.uris&&i.uris[m];let v=ne.revive(w);return _?m.startsWith(Ve.data+":")?m:(v||(v=ne.parse(m)),Hp.uriToBrowserUri(v).toString(!0)):!v||ne.parse(m).toString()===v.toString()?m:(v.query&&(v=v.with({query:r(v.query)})),v.toString())},"_href"),l=new Gee;l.image=jO.image,l.link=jO.link,l.paragraph=jO.paragraph;const c=[],d=[];if(e.codeBlockRendererSync?l.code=({text:m,lang:_})=>{const w=$F.nextId(),v=e.codeBlockRendererSync(GF(_),m);return d.push([w,v]),`<div class="code" data-code="${w}">${Y_(m)}</div>`}:e.codeBlockRenderer&&(l.code=({text:m,lang:_})=>{const w=$F.nextId(),v=e.codeBlockRenderer(GF(_),m);return c.push(v.then(b=>[w,b])),`<div class="code" data-code="${w}">${Y_(m)}</div>`}),e.actionHandler){const m=dn(function(v){const b=v.target.closest("a[data-href]");if(xs(b))try{let C=b.dataset.href;C&&(i.baseUri&&(C=jT(ne.from(i.baseUri),C)),e.actionHandler.callback(C,v))}catch(C){Kt(C)}finally{v.preventDefault()}},"_activateLink"),_=e.actionHandler.disposables.add(new Je(o,"click")),w=e.actionHandler.disposables.add(new Je(o,"auxclick"));e.actionHandler.disposables.add(H.any(_.event,w.event)(v=>{const b=new $n(ve(o),v);!b.leftButton&&!b.middleButton||m(b)})),e.actionHandler.disposables.add(F(o,"keydown",v=>{const b=new Pt(v);!b.equals(E.Space)&&!b.equals(E.Enter)||m(b)}))}i.supportHtml||(l.html=({text:m})=>e.sanitizerOptions?.replaceWithPlaintext?Y_(m):(i.isTrusted?m.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?m:""),t.renderer=l;let h=i.value??"";h.length>1e5&&(h=`${h.substr(0,1e5)}`),i.supportThemeIcons&&(h=mY(h));let u;if(e.fillInIncompleteTokens){const m={...NAe,...t},_=jP(h,m),w=Qee(_);u=PAe(w,m)}else u=Kee(h,{...t,async:!1});i.supportThemeIcons&&(u=eu(u).map(_=>typeof _=="string"?_:_.outerHTML).join(""));const p=new DOMParser().parseFromString(Bx({isTrusted:i.isTrusted,...e.sanitizerOptions},u),"text/html");if(p.body.querySelectorAll("img, audio, video, source").forEach(m=>{const _=m.getAttribute("src");if(_){let w=_;try{i.baseUri&&(w=jT(ne.from(i.baseUri),w))}catch{}if(m.setAttribute("src",a(w,!0)),e.remoteImageIsAllowed){const v=ne.parse(w);v.scheme!==Ve.file&&v.scheme!==Ve.data&&!e.remoteImageIsAllowed(v)&&m.replaceWith(ce("",void 0,m.outerHTML))}}}),p.body.querySelectorAll("a").forEach(m=>{const _=m.getAttribute("href");if(m.setAttribute("href",""),!_||/^data:|javascript:/i.test(_)||/^command:/i.test(_)&&!i.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(_))m.replaceWith(...m.childNodes);else{let w=a(_,!1);i.baseUri&&(w=jT(ne.from(i.baseUri),_)),m.dataset.href=w}}),o.innerHTML=Bx({isTrusted:i.isTrusted,...e.sanitizerOptions},p.body.innerHTML),c.length>0)Promise.all(c).then(m=>{if(s)return;const _=new Map(m),w=o.querySelectorAll("div[data-code]");for(const v of w){const b=_.get(v.dataset.code??"");b&&dr(v,b)}e.asyncRenderCallback?.()});else if(d.length>0){const m=new Map(d),_=o.querySelectorAll("div[data-code]");for(const w of _){const v=m.get(w.dataset.code??"");v&&dr(w,v)}}if(e.asyncRenderCallback)for(const m of o.getElementsByTagName("img")){const _=n.add(F(m,"load",()=>{_.dispose(),e.asyncRenderCallback()}))}return{element:o,dispose:dn(()=>{s=!0,n.dispose()},"dispose")}}dn(S3,"renderMarkdown");function GF(i){if(!i)return"";const e=i.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:i}dn(GF,"postProcessCodeBlockLanguageId");function jT(i,e){return/^\w[\w\d+.-]*:/.test(e)?e:i.path.endsWith("/")?Z9(i,e).toString():Z9(zy(i),e).toString()}dn(jT,"resolveWithBaseUri");const OAe=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function Bx(i,e){const{config:t,allowedSchemes:n}=jee(i),s=new te;s.add(KF("uponSanitizeAttribute",(o,r)=>{if(r.attrName==="style"||r.attrName==="class"){if(o.tagName==="SPAN"){if(r.attrName==="style"){r.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(border-radius:[0-9]+px;)?$/.test(r.attrValue);return}else if(r.attrName==="class"){r.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(r.attrValue);return}}r.keepAttr=!1;return}else if(o.tagName==="INPUT"&&o.attributes.getNamedItem("type")?.value==="checkbox"){if(r.attrName==="type"&&r.attrValue==="checkbox"||r.attrName==="disabled"||r.attrName==="checked"){r.keepAttr=!0;return}r.keepAttr=!1}})),s.add(KF("uponSanitizeElement",(o,r)=>{if(r.tagName==="input"&&(o.attributes.getNamedItem("type")?.value==="checkbox"?o.setAttribute("disabled",""):i.replaceWithPlaintext||o.remove()),i.replaceWithPlaintext&&!r.allowedTags[r.tagName]&&r.tagName!=="body"&&o.parentElement){let a,l;if(r.tagName==="#comment")a=`<!--${o.textContent}-->`;else{const u=OAe.includes(r.tagName),f=o.attributes.length?" "+Array.from(o.attributes).map(p=>`${p.name}="${p.value}"`).join(" "):"";a=`<${r.tagName}${f}>`,u||(l=`</${r.tagName}>`)}const c=document.createDocumentFragment(),d=o.parentElement.ownerDocument.createTextNode(a);c.appendChild(d);const h=l?o.parentElement.ownerDocument.createTextNode(l):void 0;for(;o.firstChild;)c.appendChild(o.firstChild);h&&c.appendChild(h),o.parentElement.replaceChild(c,o)}})),s.add(eH(n));try{return F5(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{s.dispose()}}dn(Bx,"sanitizeRenderedMarkdown");const MAe=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function jee(i){const e=[Ve.http,Ve.https,Ve.mailto,Ve.data,Ve.file,Ve.vscodeFileResource,Ve.vscodeRemote,Ve.vscodeRemoteResource];return i.isTrusted&&e.push(Ve.command),{config:{ALLOWED_TAGS:i.allowedTags??[...bbe],ALLOWED_ATTR:MAe,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}dn(jee,"getSanitizerOptions");function E3(i){return typeof i=="string"?i:qee(i)}dn(E3,"renderStringAsPlaintext");function qee(i,e){let t=i.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}`);const n=Kee(t,{async:!1,renderer:e?VAe.value:FAe.value});return Bx({isTrusted:!1},n).toString().replace(/&(#\d+|[a-zA-Z]+);/g,s=>BAe.get(s)??s)}dn(qee,"renderMarkdownAsPlaintext");const BAe=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function L3(){const i=new Gee;return i.code=({text:e})=>e,i.blockquote=({text:e})=>e+`
`,i.html=e=>"",i.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},i.hr=()=>"",i.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},i.listitem=({text:e})=>e+`
`,i.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},i.table=function({header:e,rows:t}){return e.map(n=>this.tablecell(n)).join(" ")+`
`+t.map(n=>n.map(s=>this.tablecell(s)).join(" ")).join(`
`)+`
`},i.tablerow=({text:e})=>e,i.tablecell=function({tokens:e}){return this.parser.parseInline(e)},i.strong=({text:e})=>e,i.em=({text:e})=>e,i.codespan=({text:e})=>e,i.br=e=>`
`,i.del=({text:e})=>e,i.image=e=>"",i.text=({text:e})=>e,i.link=({text:e})=>e,i}dn(L3,"createRenderer");const FAe=new cr(i=>L3()),VAe=new cr(()=>{const i=L3();return i.code=({text:e})=>`
\`\`\`
${e}
\`\`\`
`,i});function RE(i){let e="";return i.forEach(t=>{e+=t.raw}),e}dn(RE,"mergeRawTokenText");function D3(i){if(i.tokens)for(let e=i.tokens.length-1;e>=0;e--){const t=i.tokens[e];if(t.type==="text"){const n=t.raw.split(`
`),s=n[n.length-1];if(s.includes("`"))return ete(i);if(s.includes("**"))return rte(i);if(s.match(/\*\w/))return tte(i);if(s.match(/(^|\s)__\w/))return ate(i);if(s.match(/(^|\s)_\w/))return ite(i);if(Yee(s)||Zee(s)&&i.tokens.slice(0,e).some(o=>o.type==="text"&&o.raw.match(/\[[^\]]*$/))){const o=i.tokens.slice(e+1);return o[0]?.type==="link"&&o[1]?.type==="text"&&o[1].raw.match(/^ *"[^"]*$/)||s.match(/^[^"]* +"[^"]*$/)?ste(i):nte(i)}else if(s.match(/(^|\s)\[\w*/))return ote(i)}}}dn(D3,"completeSingleLinePattern");function Yee(i){return!!i.match(/(^|\s)\[.*\]\(\w*/)}dn(Yee,"hasLinkTextAndStartOfLinkTarget");function Zee(i){return!!i.match(/^[^\[]*\]\([^\)]*$/)}dn(Zee,"hasStartOfLinkTargetAndNoLinkText");function Xee(i){const e=i.items[i.items.length-1],t=e.tokens?e.tokens[e.tokens.length-1]:void 0;let n;if(t?.type==="text"&&!("inRawBlock"in e)&&(n=D3(t)),!n||n.type!=="paragraph")return;const s=RE(i.items.slice(0,-1)),o=e.raw.match(/^(\s*(-|\d+\.|\*) +)/)?.[0];if(!o)return;const r=o+RE(e.tokens.slice(0,-1))+n.raw,a=jP(s+r)[0];if(a.type==="list")return a}dn(Xee,"completeListItemPattern");const WAe=3;function Qee(i){for(let e=0;e<WAe;e++){const t=Jee(i);if(t)i=t;else break}return i}dn(Qee,"fillInIncompleteTokens");function Jee(i){let e,t;for(e=0;e<i.length;e++){const n=i[e];if(n.type==="paragraph"&&n.raw.match(/(\n|^)\|/)){t=lte(i.slice(e));break}if(e===i.length-1&&n.type==="list"){const s=Xee(n);if(s){t=[s];break}}if(e===i.length-1&&n.type==="paragraph"){const s=D3(n);if(s){t=[s];break}}}if(t){const n=[...i.slice(0,e),...t];return n.links=i.links,n}return null}dn(Jee,"fillInIncompleteTokensOnce");function ete(i){return _f(i,"`")}dn(ete,"completeCodespan");function tte(i){return _f(i,"*")}dn(tte,"completeStar");function ite(i){return _f(i,"_")}dn(ite,"completeUnderscore");function nte(i){return _f(i,")")}dn(nte,"completeLinkTarget");function ste(i){return _f(i,'")')}dn(ste,"completeLinkTargetArg");function ote(i){return _f(i,"](https://microsoft.com)")}dn(ote,"completeLinkText");function rte(i){return _f(i,"**")}dn(rte,"completeDoublestar");function ate(i){return _f(i,"__")}dn(ate,"completeDoubleUnderscore");function _f(i,e){const t=RE(Array.isArray(i)?i:[i]);return jP(t+e)[0]}dn(_f,"completeWithString");function lte(i){const e=RE(i),t=e.split(`
`);let n,s=!1;for(let o=0;o<t.length;o++){const r=t[o].trim();if(typeof n>"u"&&r.match(/^\s*\|/)){const a=r.match(/(\|[^\|]+)(?=\||$)/g);a&&(n=a.length)}else if(typeof n=="number")if(r.match(/^\s*\|/)){if(o!==t.length-1)return;s=!0}else return}if(typeof n=="number"&&n>0){const o=s?t.slice(0,-1).join(`
`):e,r=!!o.match(/\|\s*$/),a=o+(r?"":"|")+`
|${" --- |".repeat(n)}`;return jP(a)}}dn(lte,"completeTable");function KF(i,e){return hq(i,e),ye(()=>uq(i))}dn(KF,"addDompurifyHook");var HAe=Object.defineProperty,Hr=(i,e)=>HAe(i,"name",{value:e,configurable:!0});const M_=ce,cte="selectOption.entry.template";class UAe{static{Hr(this,"SelectListRenderer")}get templateId(){return cte}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=Le(e,M_(".option-text")),t.detail=Le(e,M_(".option-detail")),t.decoratorRight=Le(e,M_(".option-decorator-right")),t}renderElement(e,t,n){const s=n,o=e.text,r=e.detail,a=e.decoratorRight,l=e.isDisabled;s.text.textContent=o,s.detail.textContent=r||"",s.decoratorRight.innerText=a||"",l?s.root.classList.add("option-disabled"):s.root.classList.remove("option-disabled")}disposeTemplate(e){}}class m_ extends ${static{Hr(this,"SelectBoxList")}static DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32;static DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2;static DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;_isVisible;selectBoxOptions;selectElement;container;options=[];selected;_onDidSelect;styles;listRenderer;contextViewProvider;selectDropDownContainer;styleElement;selectList;selectDropDownListContainer;widthControlElement;_currentSelection=0;_dropDownPosition;_hasDetails=!1;selectionDetailsPane;_skipLayout=!1;_cachedMaxDetailsHeight;_hover;_sticky=!1;constructor(e,t,n,s,o){super(),this._isVisible=!1,this.styles=s,this.selectBoxOptions=o||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=m_.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new x,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(n),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(pl().setupManagedHover(bn("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return cte}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=ce(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=Le(this.selectDropDownContainer,M_(".select-box-details-pane"));const t=Le(this.selectDropDownContainer,M_(".select-box-dropdown-container-width-control")),n=Le(t,M_(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",Le(n,this.widthControlElement),this._dropDownPosition=Ym.BELOW,this.styleElement=ic(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(F(this.selectDropDownContainer,Q.DRAG_START,s=>{Fe.stop(s,!0)}))}registerListeners(){this._register(Gs(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(F(this.selectElement,Q.CLICK,t=>{Fe.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(F(this.selectElement,Q.MOUSE_DOWN,t=>{Fe.stop(t)}));let e;this._register(F(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(F(this.selectElement,"touchend",t=>{Fe.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(F(this.selectElement,Q.KEY_DOWN,t=>{const n=new Pt(t);let s=!1;Ue?(n.keyCode===E.DownArrow||n.keyCode===E.UpArrow||n.keyCode===E.Space||n.keyCode===E.Enter)&&(s=!0):(n.keyCode===E.DownArrow&&n.altKey||n.keyCode===E.UpArrow&&n.altKey||n.keyCode===E.Space||n.keyCode===E.Enter)&&(s=!0),s&&(this.showSelectDropDown(),Fe.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){ks(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((n,s)=>{this.selectElement.add(this.createOption(n.text,s,n.isDisabled)),typeof n.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setEnabled(e){this.selectElement.disabled=!e}setOptionsList(){this.selectList?.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}setAriaLabel(e){this.selectBoxOptions.ariaLabel=e,this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){const e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",n=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=n}styleList(){const e=this.styles.selectBackground??"",t=$d(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;const n=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=n,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,n){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!n,s}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:Hr(()=>this.selectElement,"getAnchor"),render:Hr(e=>this.renderSelectDropDown(e,!0),"render"),layout:Hr(()=>{this.layoutSelectDropDown()},"layout"),onHide:Hr(()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},"onHide"),anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:Hr(()=>this.selectElement,"getAnchor"),render:Hr(e=>this.renderSelectDropDown(e),"render"),layout:Hr(()=>this.layoutSelectDropDown(),"layout"),onHide:Hr(()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},"onHide"),anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:Hr(()=>{this.selectDropDownContainer.remove()},"dispose")}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,n)=>{this.updateDetail(n),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=ve(this.selectElement),n=Xr(this.selectElement),s=ve(this.selectElement).getComputedStyle(this.selectElement),o=parseFloat(s.getPropertyValue("--dropdown-padding-top"))+parseFloat(s.getPropertyValue("--dropdown-padding-bottom")),r=t.innerHeight-n.top-n.height-(this.selectBoxOptions.minBottomMargin||0),a=n.top-m_.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,c=this.setWidthControlElement(this.widthControlElement),d=Math.max(c,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=d,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let h=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const u=this._hasDetails?this._cachedMaxDetailsHeight:0,f=h+o+u,p=Math.floor((r-o-u)/this.getHeight()),m=Math.floor((a-o-u)/this.getHeight());if(e)return n.top+n.height>t.innerHeight-22||n.top<m_.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||p<1&&m<1?!1:(p<m_.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&m>p&&this.options.length>p?(this._dropDownPosition=Ym.ABOVE,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=Ym.BELOW,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(n.top+n.height>t.innerHeight-22||n.top<m_.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===Ym.BELOW&&p<1||this._dropDownPosition===Ym.ABOVE&&m<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===Ym.BELOW){if(this._isVisible&&p+m<1)return this.hideSelectDropDown(!0),!1;f>r&&(h=p*this.getHeight())}else f>a&&(h=m*this.getHeight());return this.selectList.layout(h),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=h+o+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=h+o+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=d,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let n=0,s=0;this.options.forEach((o,r)=>{const a=o.detail?o.detail.length:0,l=o.decoratorRight?o.decoratorRight.length:0,c=o.text.length+a+l;c>s&&(n=r,s=c)}),e.textContent=this.options[n].text+(this.options[n].decoratorRight?this.options[n].decoratorRight+" ":""),t=KC(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=Le(e,M_(".select-box-dropdown-list-container")),this.listRenderer=new UAe,this.selectList=this._register(new fl("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:Bi.Visible,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:Hr(s=>{let o=s.text;return s.detail&&(o+=`. ${s.detail}`),s.decoratorRight&&(o+=`. ${s.decoratorRight}`),s.description&&(o+=`. ${s.description}`),o},"getAriaLabel"),getWidgetAriaLabel:Hr(()=>g({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),"getWidgetAriaLabel"),getRole:Hr(()=>Ue?"":"option","getRole"),getWidgetRole:Hr(()=>"listbox","getWidgetRole")}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new Je(this.selectDropDownListContainer,"keydown")),n=H.chain(t.event,s=>s.filter(()=>this.selectList.length>0).map(o=>new Pt(o)));this._register(H.chain(n,s=>s.filter(o=>o.keyCode===E.Enter))(this.onEnter,this)),this._register(H.chain(n,s=>s.filter(o=>o.keyCode===E.Tab))(this.onEnter,this)),this._register(H.chain(n,s=>s.filter(o=>o.keyCode===E.Escape))(this.onEscape,this)),this._register(H.chain(n,s=>s.filter(o=>o.keyCode===E.UpArrow))(this.onUpArrow,this)),this._register(H.chain(n,s=>s.filter(o=>o.keyCode===E.DownArrow))(this.onDownArrow,this)),this._register(H.chain(n,s=>s.filter(o=>o.keyCode===E.PageDown))(this.onPageDown,this)),this._register(H.chain(n,s=>s.filter(o=>o.keyCode===E.PageUp))(this.onPageUp,this)),this._register(H.chain(n,s=>s.filter(o=>o.keyCode===E.Home))(this.onHome,this)),this._register(H.chain(n,s=>s.filter(o=>o.keyCode===E.End))(this.onEnd,this)),this._register(H.chain(n,s=>s.filter(o=>o.keyCode>=E.Digit0&&o.keyCode<=E.KeyZ||o.keyCode>=E.Semicolon&&o.keyCode<=E.NumpadDivide))(this.onCharacter,this)),this._register(F(this.selectList.getHTMLElement(),Q.POINTER_UP,s=>this.onPointerUp(s))),this._register(this.selectList.onMouseOver(s=>typeof s.index<"u"&&this.selectList.setFocus([s.index]))),this._register(this.selectList.onDidChangeFocus(s=>this.onListFocus(s))),this._register(F(this.selectDropDownContainer,Q.FOCUS_OUT,s=>{!this._isVisible||As(s.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;Fe.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const n=t.closest(".monaco-list-row");if(!n)return;const s=Number(n.getAttribute("data-index")),o=n.classList.contains("option-disabled");s>=0&&s<this.options.length&&!o&&(this.selected=s,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const n=Hr(o=>{for(let r=0;r<o.childNodes.length;r++){const a=o.childNodes.item(r);(a.tagName&&a.tagName.toLowerCase())==="img"?a.remove():n(a)}},"cleanRenderedMarkdown"),s=S3({value:e,supportThemeIcons:!0},{actionHandler:t});return s.element.classList.add("select-box-description-markdown"),n(s.element),s.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.innerText="";const t=this.options[e],n=t?.description??"",s=t?.descriptionIsMarkdown??!1;if(n){if(s){const o=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(n,o))}else this.selectionDetailsPane.innerText=n;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){Fe.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){Fe.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){Fe.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(Fe.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){Fe.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){Fe.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){Fe.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){Fe.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=eE.toString(e.keyCode);let n=-1;for(let s=0;s<this.options.length-1;s++)if(n=(s+this.selected+1)%this.options.length,this.options[n].text.charAt(0).toUpperCase()===t&&!this.options[n].isDisabled){this.select(n),this.selectList.setFocus([n]),this.selectList.reveal(this.selectList.getFocus()[0]),Fe.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}}var zAe=Object.defineProperty,$Ae=(i,e)=>zAe(i,"name",{value:e,configurable:!0});class GAe extends ${static{$Ae(this,"SelectBoxNative")}selectElement;selectBoxOptions;options;selected=0;_onDidSelect;styles;constructor(e,t,n,s){super(),this.selectBoxOptions=s||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new x),this.styles=n,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(Gn.addTarget(this.selectElement)),[wt.Tap].forEach(e=>{this._register(F(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(Gs(this.selectElement,"click",e=>{Fe.stop(e,!0)})),this._register(Gs(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(Gs(this.selectElement,"keydown",e=>{let t=!1;Ue?(e.keyCode===E.DownArrow||e.keyCode===E.UpArrow||e.keyCode===E.Space)&&(t=!0):(e.keyCode===E.DownArrow&&e.altKey||e.keyCode===E.Space||e.keyCode===E.Enter)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!ks(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((n,s)=>{this.selectElement.add(this.createOption(n.text,s,n.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}setAriaLabel(e){this.selectBoxOptions.ariaLabel=e,this.selectElement.setAttribute("aria-label",e)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setEnabled(e){this.selectElement.disabled=!e}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}style(e){this.styles=e,this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,n){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!n,s}}var KAe=Object.defineProperty,jAe=(i,e)=>KAe(i,"name",{value:e,configurable:!0});({...kee});class qAe extends Jc{static{jAe(this,"SelectBox")}selectBoxDelegate;constructor(e,t,n,s,o){super(),Ue&&!o?.useCustomDrawn?this.selectBoxDelegate=new GAe(e,t,s,o):this.selectBoxDelegate=new m_(e,t,n,s,o),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}setAriaLabel(e){this.selectBoxDelegate.setAriaLabel(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}setEnabled(e){this.selectBoxDelegate.setEnabled(e)}render(e){this.selectBoxDelegate.render(e)}}var YAe=Object.defineProperty,qP=(i,e)=>YAe(i,"name",{value:e,configurable:!0});const dte={inputActiveOptionBorder:"#007ACC00",inputActiveOptionForeground:"#FFFFFF",inputActiveOptionBackground:"#0E639C50"};class k$e extends yr{static{qP(this,"ToggleActionViewItem")}toggle;constructor(e,t,n){super(e,t,n),this.toggle=this._register(new hm({actionClassName:this._action.class,isChecked:!!this._action.checked,title:this.options.keybinding?`${this._action.label} (${this.options.keybinding})`:this._action.label,notFocusable:!0,inputActiveOptionBackground:n.toggleStyles?.inputActiveOptionBackground,inputActiveOptionBorder:n.toggleStyles?.inputActiveOptionBorder,inputActiveOptionForeground:n.toggleStyles?.inputActiveOptionForeground,hoverDelegate:n.hoverDelegate})),this._register(this.toggle.onChange(()=>this._action.checked=!!this.toggle&&this.toggle.checked))}render(e){this.element=e,this.element.appendChild(this.toggle.domNode)}updateEnabled(){this.toggle&&(this.isEnabled()?this.toggle.enable():this.toggle.disable())}updateChecked(){this.toggle.checked=!!this._action.checked}focus(){this.toggle.domNode.tabIndex=0,this.toggle.focus()}blur(){this.toggle.domNode.tabIndex=-1,this.toggle.domNode.blur()}setFocusable(e){this.toggle.domNode.tabIndex=e?0:-1}}class hm extends Jc{static{qP(this,"Toggle")}_onChange=this._register(new x);onChange=this._onChange.event;_onKeyDown=this._register(new x);onKeyDown=this._onKeyDown.event;_opts;_icon;domNode;_checked;_hover;constructor(e){super(),this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...Ne.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(pl().setupManagedHover(e.hoverDelegate??bn("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,n=>{if(n.keyCode===E.Space||n.keyCode===E.Enter){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault(),n.stopPropagation();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}setIcon(e){this._icon&&this.domNode.classList.remove(...Ne.asClassNameArray(this._icon)),this._icon=e,this._icon&&this.domNode.classList.add(...Ne.asClassNameArray(this._icon))}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}setTitle(e){this._hover.update(e),this.domNode.setAttribute("aria-label",e)}set visible(e){this.domNode.style.display=e?"":"none"}get visible(){return this.domNode.style.display!=="none"}}class YP extends Jc{constructor(e,t,n){super(),this.title=e,this.isChecked=t,this.checkbox=this._register(new hm({title:this.title,isChecked:this.isChecked,icon:ee.check,actionClassName:YP.CLASS_NAME,...dte})),this.domNode=this.checkbox.domNode,this.styles=n,this.applyStyles(),this._register(this.checkbox.onChange(s=>{this.applyStyles(),this._onChange.fire(s)}))}static{qP(this,"Checkbox")}static CLASS_NAME="monaco-checkbox";_onChange=this._register(new x);onChange=this._onChange.event;checkbox;styles;domNode;get checked(){return this.checkbox.checked}set checked(e){this.checkbox.checked=e,this.applyStyles()}focus(){this.domNode.focus()}hasFocus(){return dh(this.domNode)}enable(){this.checkbox.enable()}disable(){this.checkbox.disable()}applyStyles(){this.domNode.style.color=this.styles.checkboxForeground||"",this.domNode.style.backgroundColor=this.styles.checkboxBackground||"",this.domNode.style.borderColor=this.styles.checkboxBorder||""}}class N$e extends yr{static{qP(this,"CheckboxActionViewItem")}toggle;cssClass;constructor(e,t,n){super(e,t,n),this.toggle=this._register(new YP(this._action.label,!!this._action.checked,n.checkboxStyles)),this._register(this.toggle.onChange(()=>this.onChange()))}render(e){if(this.element=e,this.element.classList.add("checkbox-action-item"),this.element.appendChild(this.toggle.domNode),this.options.label&&this._action.label){const t=this.element.appendChild(ce("span.checkbox-label",void 0,this._action.label));this._register(F(t,Q.CLICK,n=>{this.toggle.checked=!this.toggle.checked,n.stopPropagation(),n.preventDefault(),this.onChange()}))}this.updateEnabled(),this.updateClass(),this.updateChecked()}onChange(){this._action.checked=!!this.toggle&&this.toggle.checked,this.actionRunner.run(this._action,this._context)}updateEnabled(){this.isEnabled()?this.toggle.enable():this.toggle.disable(),this.action.enabled?this.element?.classList.remove("disabled"):this.element?.classList.add("disabled")}updateChecked(){this.toggle.checked=!!this._action.checked}updateClass(){this.cssClass&&this.toggle.domNode.classList.remove(...this.cssClass.split(" ")),this.cssClass=this.getClass(),this.cssClass&&this.toggle.domNode.classList.add(...this.cssClass.split(" "))}focus(){this.toggle.domNode.tabIndex=0,this.toggle.focus()}blur(){this.toggle.domNode.tabIndex=-1,this.toggle.domNode.blur()}setFocusable(e){this.toggle.domNode.tabIndex=e?0:-1}}var ZAe=Object.defineProperty,I3=(i,e)=>ZAe(i,"name",{value:e,configurable:!0});class yr extends ${constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof Mt&&this._register(t.onDidChange(s=>{this.element&&this.handleActionChangeEvent(s)}))}static{I3(this,"BaseActionViewItem")}element;_context;_action;customHover;get action(){return this._action}_actionRunner;handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new nc)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Gn.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,na&&this._register(F(e,Q.DRAG_START,s=>s.dataTransfer?.setData(Yh.TEXT,this._action.label)))),this._register(F(t,wt.Tap,s=>this.onClick(s,!0))),this._register(F(t,Q.MOUSE_DOWN,s=>{n||Fe.stop(s,!0),this._action.enabled&&s.button===0&&t.classList.add("active")})),Ue&&this._register(F(t,Q.CONTEXT_MENU,s=>{s.button===0&&s.ctrlKey===!0&&this.onClick(s)})),this._register(F(t,Q.CLICK,s=>{Fe.stop(s,!0),this.options&&this.options.isMenu||this.onClick(s)})),this._register(F(t,Q.DBLCLICK,s=>{Fe.stop(s,!0)})),[Q.MOUSE_UP,Q.MOUSE_OUT].forEach(s=>{this._register(F(t,s,o=>{Fe.stop(o),t.classList.remove("active")}))})}onClick(e,t=!1){Fe.stop(e,!0);const n=Ls(this._context)?this.options?.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,n)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}isFocused(){return!!this.element?.classList.contains("focused")}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){if(!this.element)return;const e=this.getTooltip()??"";if(this.updateAriaLabel(),this.options.hoverDelegate?.showNativeHover)this.element.title=e;else if(!this.customHover&&e!==""){const t=this.options.hoverDelegate??bn("element");this.customHover=this._store.add(pl().setupManagedHover(t,this.element,e))}else this.customHover&&this.customHover.update(e)}updateAriaLabel(){if(this.element){const e=this.getTooltip()??"";this.element.setAttribute("aria-label",e)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class _D extends yr{static{I3(this,"ActionViewItem")}label;options;cssClass;constructor(e,t,n){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),MC(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){const n=document.createElement("span");n.classList.add("keybinding"),n.textContent=this.options.keybinding,this.element.appendChild(n)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===zt.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}isFocused(){return!!this.label&&this.label?.tabIndex===0}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=g({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label?.classList.remove("codicon")}updateEnabled(){this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element?.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element?.classList.add("disabled"))}updateAriaLabel(){if(this.label){const e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class XAe extends yr{static{I3(this,"SelectActionViewItem")}selectBox;constructor(e,t,n,s,o,r,a){super(e,t),this.selectBox=new qAe(n,s,o,r,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}setOptions(e,t){this.selectBox.setOptions(e,t)}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){this.selectBox?.focus()}blur(){this.selectBox?.blur()}render(e){this.selectBox.render(e)}}var QAe=Object.defineProperty,jF=(i,e)=>QAe(i,"name",{value:e,configurable:!0}),Ns=(i=>(i[i.HORIZONTAL=0]="HORIZONTAL",i[i.VERTICAL=1]="VERTICAL",i))(Ns||{});class td extends ${static{jF(this,"ActionBar")}options;_hoverDelegate;_actionRunner;_actionRunnerDisposables=this._register(new te);_context;_orientation;_triggerKeys;viewItems;viewItemDisposables=this._register(new ah);previouslyFocusedItem;focusedItem;focusTracker;triggerKeyDown=!1;focusable=!0;domNode;actionsList;_onDidBlur=this._register(new x);onDidBlur=this._onDidBlur.event;_onDidCancel=this._register(new x({onWillAddFirstListener:jF(()=>this.cancelHasListener=!0,"onWillAddFirstListener")}));onDidCancel=this._onDidCancel.event;cancelHasListener=!1;_onDidRun=this._register(new x);onDidRun=this._onDidRun.event;_onWillRun=this._register(new x);onWillRun=this._onWillRun.event;constructor(e,t={}){super(),this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:this.options.triggerKeys?.keyDown??!1,keys:this.options.triggerKeys?.keys??[E.Enter,E.Space]},this._hoverDelegate=t.hoverDelegate??this._register(cm()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new nc,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(o=>this._onDidRun.fire(o))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(o=>this._onWillRun.fire(o))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let n,s;switch(this._orientation){case 0:n=[E.LeftArrow],s=[E.RightArrow];break;case 1:n=[E.UpArrow],s=[E.DownArrow],this.domNode.className+=" vertical";break}this._register(F(this.domNode,Q.KEY_DOWN,o=>{const r=new Pt(o);let a=!0;const l=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;n&&(r.equals(n[0])||r.equals(n[1]))?a=this.focusPrevious():s&&(r.equals(s[0])||r.equals(s[1]))?a=this.focusNext():r.equals(E.Escape)&&this.cancelHasListener?this._onDidCancel.fire():r.equals(E.Home)?a=this.focusFirst():r.equals(E.End)?a=this.focusLast():r.equals(E.Tab)&&l instanceof yr&&l.trapsArrowNavigation?a=this.focusNext(void 0,!0):this.isTriggerKeyEvent(r)?this._triggerKeys.keyDown?this.doTrigger(r):this.triggerKeyDown=!0:a=!1,a&&(r.preventDefault(),r.stopPropagation())})),this._register(F(this.domNode,Q.KEY_UP,o=>{const r=new Pt(o);this.isTriggerKeyEvent(r)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(r)),r.preventDefault(),r.stopPropagation()):(r.equals(E.Tab)||r.equals(M.Shift|E.Tab)||r.equals(E.UpArrow)||r.equals(E.DownArrow)||r.equals(E.LeftArrow)||r.equals(E.RightArrow))&&this.updateFocusedItem()})),this.focusTracker=this._register(al(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(Lr()===this.domNode||!As(Lr(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setAriaLabel(e){e?this.actionsList.setAttribute("aria-label",e):this.actionsList.removeAttribute("aria-label")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(n=>n instanceof yr&&n.isEnabled());t instanceof yr&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof yr&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(As(Lr(),t)){this.focusedItem=e,this.viewItems[this.focusedItem]?.showHover?.();break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}hasAction(e){return this.viewItems.findIndex(t=>t.action.id===e.id)!==-1}getAction(e){if(typeof e=="number")return this.viewItems[e]?.action;if(xs(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let t=0;t<this.actionsList.childNodes.length;t++)if(this.actionsList.childNodes[t]===e)return this.viewItems[t].action}}push(e,t={}){const n=Array.isArray(e)?e:[e];let s=Gc(t.index)?t.index:null;n.forEach(o=>{const r=document.createElement("li");r.className="action-item",r.setAttribute("role","presentation");let a;const l={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(o,l)),a||(a=new _D(this.context,o,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,F(r,Q.CONTEXT_MENU,c=>{Fe.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(r),this.focusable&&a instanceof yr&&this.viewItems.length===0&&a.setFocusable(!0),s===null||s<0||s>=this.actionsList.children.length?(this.actionsList.appendChild(r),this.viewItems.push(a)):(this.actionsList.insertBefore(r,this.actionsList.children[s]),this.viewItems.splice(s,0,a),s++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}getWidth(e){if(e>=0&&e<this.actionsList.children.length){const t=this.actionsList.children.item(e);if(t)return t.clientWidth}return 0}getHeight(e){if(e>=0&&e<this.actionsList.children.length){const t=this.actionsList.children.item(e);if(t)return t.clientHeight}return 0}pull(e){e>=0&&e<this.viewItems.length&&(this.actionsList.childNodes[e].remove(),this.viewItemDisposables.deleteAndDispose(this.viewItems[e]),ii(this.viewItems.splice(e,1)),this.refreshRole())}clear(){this.isEmpty()||(this.viewItems=ii(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),Mn(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const s=this.viewItems.findIndex(o=>o.isEnabled());this.focusedItem=s===-1?void 0:s,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const n=this.focusedItem;let s;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=n,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,s=this.viewItems[this.focusedItem]}while(this.focusedItem!==n&&(this.options.focusOnlyEnabledItems&&!s.isEnabled()||s.action.id===zt.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===zt.ID));return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&this.viewItems[this.previouslyFocusedItem]?.blur();const s=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(s){let o=!0;zg(s.focus)||(o=!1),this.options.focusOnlyEnabledItems&&zg(s.isEnabled)&&!s.isEnabled()&&(o=!1),s.action.id===zt.ID&&(o=!1),o?(n||this.previouslyFocusedItem!==this.focusedItem)&&(s.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),o&&s.showHover?.()}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof yr){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=ii(this.viewItems),this.getContainer().remove(),super.dispose()}}function sc(i){if(!i.length)return i;let e=-1;for(let n=0;n<i.length;n++)if(i[n].id!==zt.ID){e=n;break}if(e===-1)return[];i=i.slice(e);for(let n=i.length-1;n>=0&&i[n].id===zt.ID;n--)i.splice(n,1);let t=!1;for(let n=i.length-1;n>=0;n--){const s=i[n].id===zt.ID;s&&!t?i.splice(n,1):s?s&&(t=!1):t=!0}return i}jF(sc,"prepareActions");var JAe=Object.defineProperty,T3=(i,e)=>JAe(i,"name",{value:e,configurable:!0});const exe=g("caseDescription","Match Case"),txe=g("wordsDescription","Match Whole Word"),ixe=g("regexDescription","Use Regular Expression");class nxe extends hm{static{T3(this,"CaseSensitiveToggle")}constructor(e){super({icon:ee.caseSensitive,title:exe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??bn("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class sxe extends hm{static{T3(this,"WholeWordsToggle")}constructor(e){super({icon:ee.wholeWord,title:txe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??bn("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class oxe extends hm{static{T3(this,"RegexToggle")}constructor(e){super({icon:ee.regex,title:ixe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??bn("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}var rxe=Object.defineProperty,axe=(i,e)=>rxe(i,"name",{value:e,configurable:!0});class lxe{constructor(e,t=0,n=e.length,s=t-1){this.items=e,this.start=t,this.end=n,this.index=s}static{axe(this,"ArrayNavigator")}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}var cxe=Object.defineProperty,hte=(i,e)=>cxe(i,"name",{value:e,configurable:!0});class dxe{static{hte(this,"HistoryNavigator")}_history;_limit;_navigator;constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isFirst(){return this._currentPosition()===0}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}clear(){this._initialize([]),this._onChange()}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new lxe(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}class P$e{constructor(e,t=10,n=s=>s){if(this.capacity=t,this.identityFn=n,e.length<1)throw new Error("not supported");this._size=1,this.head=this.tail=this.cursor={value:e[0],previous:void 0,next:void 0},this.valueSet=new qde([e[0]],n);for(let s=1;s<e.length;s++)this.add(e[s])}static{hte(this,"HistoryNavigator2")}valueSet;head;tail;cursor;_size;get size(){return this._size}add(e){const t={value:e,previous:this.tail,next:void 0};for(this.tail.next=t,this.tail=t,this.cursor=this.tail,this._size++,this.valueSet.has(e)?this._deleteFromList(e):this.valueSet.add(e);this._size>this.capacity;)this.valueSet.delete(this.head.value),this.head=this.head.next,this.head.previous=void 0,this._size--}replaceLast(e){if(this.identityFn(this.tail.value)===this.identityFn(e))return e;const t=this.tail.value;return this.valueSet.delete(t),this.tail.value=e,this.valueSet.has(e)?this._deleteFromList(e):this.valueSet.add(e),t}prepend(e){if(this._size===this.capacity||this.valueSet.has(e))return;const t={value:e,previous:void 0,next:this.head};this.head.previous=t,this.head=t,this._size++,this.valueSet.add(e)}isAtEnd(){return this.cursor===this.tail}current(){return this.cursor.value}previous(){return this.cursor.previous&&(this.cursor=this.cursor.previous),this.cursor.value}next(){return this.cursor.next&&(this.cursor=this.cursor.next),this.cursor.value}has(e){return this.valueSet.has(e)}resetCursor(){return this.cursor=this.tail,this.cursor.value}*[Symbol.iterator](){let e=this.head;for(;e;)yield e.value,e=e.next}_deleteFromList(e){let t=this.head;const n=this.identityFn(e);for(;t!==this.tail;)this.identityFn(t.value)===n&&(t===this.head?(this.head=this.head.next,this.head.previous=void 0):(t.previous.next=t.next,t.next.previous=t.previous),this._size--),t=t.next}}var hxe=Object.defineProperty,ip=(i,e)=>hxe(i,"name",{value:e,configurable:!0});const WS=ce;var qF=(i=>(i[i.INFO=1]="INFO",i[i.WARNING=2]="WARNING",i[i.ERROR=3]="ERROR",i))(qF||{});const uxe={inputBackground:"#3C3C3C",inputForeground:"#CCCCCC",inputValidationInfoBorder:"#55AAFF",inputValidationInfoBackground:"#063B49",inputValidationWarningBorder:"#B89500",inputValidationWarningBackground:"#352A05",inputValidationErrorBorder:"#BE1100",inputValidationErrorBackground:"#5A1D1D",inputBorder:void 0,inputValidationErrorForeground:void 0,inputValidationInfoForeground:void 0,inputValidationWarningForeground:void 0};class ute extends Jc{static{ip(this,"InputBox")}contextViewProvider;element;input;actionbar;options;message;placeholder;tooltip;ariaLabel;validation;state="idle";mirror;cachedHeight;cachedContentHeight;maxHeight=Number.POSITIVE_INFINITY;scrollableElement;hover;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_onDidHeightChange=this._register(new x);onDidHeightChange=this._onDidHeightChange.event;constructor(e,t,n){super(),this.contextViewProvider=t,this.options=n,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=Le(e,WS(".monaco-inputbox.idle"));const s=this.options.flexibleHeight?"textarea":"input",o=Le(this.element,WS(".ibwrapper"));if(this.input=Le(o,WS(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=Le(o,WS("div.mirror")),this.mirror.innerText="\xa0",this.scrollableElement=new YJ(this.element,{vertical:Bi.Auto}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),Le(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(l=>this.input.scrollTop=l.scrollTop));const r=this._register(new Je(e.ownerDocument,"selectionchange")),a=H.filter(r.event,()=>e.ownerDocument.getSelection()?.anchorNode===o);this._register(a(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new td(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(pl().setupManagedHover(bn("mouse"),this.input,e))}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get mirrorElement(){return this.mirror}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get step(){return this.input.step}set step(e){this.input.step=e}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:ZA(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return dh(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){const e=this.input.selectionStart;if(e===null)return null;const t=this.input.selectionEnd??e;return{start:e,end:t}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}setEnabled(e){e?this.enable():this.disable()}get width(){return KC(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){const n=parseFloat(this.mirror.style.paddingLeft||"")||0,s=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+s}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){if(this.state==="open"&&lo(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${$d(n.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}isInputValid(){return!!this.validation&&!this.validation(this.value)}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e?.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=ip(()=>e.style.width=KC(this.element)+"px","layout");this.contextViewProvider.showContextView({getAnchor:ip(()=>this.element,"getAnchor"),anchorAlignment:cu.RIGHT,render:ip(s=>{if(!this.message)return null;e=Le(s,WS(".monaco-inputbox-container")),t();const o={inline:!0,className:"monaco-inputbox-message"},r=this.message.formatContent?Hee(this.message.content,o):Wee(this.message.content,o);r.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return r.style.backgroundColor=a.background??"",r.style.color=a.foreground??"",r.style.border=a.border?`1px solid ${a.border}`:"",Le(e,r),null},"render"),onHide:ip(()=>{this.state="closed"},"onHide"),layout:t});let n;this.message.type===3?n=g("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=g("alertWarningMessage","Warning: {0}",this.message.content):n=g("alertInfoMessage","Info: {0}",this.message.content),Ub(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText="\xa0",this.layout()}applyStyles(){const e=this.options.inputBoxStyles,t=e.inputBackground??"",n=e.inputForeground??"",s=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=n,this.input.style.backgroundColor="inherit",this.input.style.color=n,this.element.style.border=`1px solid ${$d(s,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=ZA(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,s=t.selectionEnd,o=t.value;n!==null&&s!==null&&(this.value=o.substr(0,n)+e+o.substr(s),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar?.dispose(),super.dispose()}}class A3 extends ute{static{ip(this,"HistoryInputBox")}history;observer;_onDidFocus=this._register(new x);onDidFocus=this._onDidFocus.event;_onDidBlur=this._register(new x);onDidBlur=this._onDidBlur.event;constructor(e,t,n){const s=g({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is  to represent the up and down arrow keys.']}," or {0} for history",""),o=g({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is  to represent the up and down arrow keys.']}," ({0} for history)","");super(e,t,n),this.history=new dxe(n.history,100);const r=ip(()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(s)&&!this.placeholder.endsWith(o)&&this.history.getHistory().length){const a=this.placeholder.endsWith(")")?s:o,l=this.placeholder+a;n.showPlaceholderOnFocus&&!dh(this.input)?this.placeholder=l:this.setPlaceHolder(l)}},"addSuffix");this.observer=new MutationObserver((a,l)=>{a.forEach(c=>{c.target.textContent||r()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>r()),this.onblur(this.input,()=>{const a=ip(l=>{if(this.placeholder.endsWith(l)){const c=this.placeholder.slice(0,this.placeholder.length-l.length);return n.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1},"resetPlaceholder");a(o)||a(s)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}prependHistory(e){const t=this.getHistory();this.clearHistory(),e.forEach(n=>{this.history.add(n)}),t.forEach(n=>{this.history.add(n)})}getHistory(){return this.history.getHistory()}isAtFirstInHistory(){return this.history.isFirst()}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",Px(this.value?this.value:g("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,Px(this.value))}clearHistory(){this.history.clear()}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}var gxe=Object.defineProperty,fxe=(i,e)=>gxe(i,"name",{value:e,configurable:!0});const pxe=g("defaultLabel","input");class gte extends Jc{static{fxe(this,"FindInput")}static OPTION_CHANGE="optionChange";placeholder;validation;label;showCommonFindToggles;fixFocusOnOptionClickEnabled=!0;imeSessionInProgress=!1;additionalTogglesDisposables=this._register(new Yi);controls;regex;wholeWords;caseSensitive;additionalToggles=[];domNode;inputBox;_onDidOptionChange=this._register(new x);onDidOptionChange=this._onDidOptionChange.event;_onKeyDown=this._register(new x);onKeyDown=this._onKeyDown.event;_onMouseDown=this._register(new x);onMouseDown=this._onMouseDown.event;_onInput=this._register(new x);onInput=this._onInput.event;_onKeyUp=this._register(new x);onKeyUp=this._onKeyUp.event;_onCaseSensitiveKeyDown=this._register(new x);onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event;_onRegexKeyDown=this._register(new x);onRegexKeyDown=this._onRegexKeyDown.event;constructor(e,t,n){super(),this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||pxe,this.showCommonFindToggles=!!n.showCommonFindToggles;const s=n.appendCaseSensitiveLabel||"",o=n.appendWholeWordsLabel||"",r=n.appendRegexLabel||"",a=n.history||[],l=!!n.flexibleHeight,c=!!n.flexibleWidth,d=n.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new A3(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:n.showHistoryHint,flexibleHeight:l,flexibleWidth:c,flexibleMaxHeight:d,inputBoxStyles:n.inputBoxStyles}));const h=this._register(cm());if(this.showCommonFindToggles){this.regex=this._register(new oxe({appendTitle:r,isChecked:!1,hoverDelegate:h,...n.toggleStyles})),this._register(this.regex.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(f=>{this._onRegexKeyDown.fire(f)})),this.wholeWords=this._register(new sxe({appendTitle:o,isChecked:!1,hoverDelegate:h,...n.toggleStyles})),this._register(this.wholeWords.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new nxe({appendTitle:s,isChecked:!1,hoverDelegate:h,...n.toggleStyles})),this._register(this.caseSensitive.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(f=>{this._onCaseSensitiveKeyDown.fire(f)}));const u=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,f=>{if(f.equals(E.LeftArrow)||f.equals(E.RightArrow)||f.equals(E.Escape)){const p=u.indexOf(this.domNode.ownerDocument.activeElement);if(p>=0){let m=-1;f.equals(E.RightArrow)?m=(p+1)%u.length:f.equals(E.LeftArrow)&&(p===0?m=u.length-1:m=p-1),f.equals(E.Escape)?(u[p].blur(),this.inputBox.focus()):m>=0&&u[m].focus(),Fe.stop(f,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(n?.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e?.appendChild(this.domNode),this._register(F(this.inputBox.inputElement,"compositionstart",u=>{this.imeSessionInProgress=!0})),this._register(F(this.inputBox.inputElement,"compositionend",u=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,u=>this._onKeyDown.fire(u)),this.onkeyup(this.inputBox.inputElement,u=>this._onKeyUp.fire(u)),this.oninput(this.inputBox.inputElement,u=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,u=>this._onMouseDown.fire(u))}get isImeSessionInProgress(){return this.imeSessionInProgress}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex?.enable(),this.wholeWords?.enable(),this.caseSensitive?.enable();for(const e of this.additionalToggles)e.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex?.disable(),this.wholeWords?.disable(),this.caseSensitive?.disable();for(const e of this.additionalToggles)e.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new te;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(n=>{this._onDidOptionChange.fire(n),!n&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(this.caseSensitive?.width()??0)+(this.wholeWords?.width()??0)+(this.regex?.width()??0)+this.additionalToggles.reduce((t,n)=>t+n.width(),0)}clear(){this.clearValidation(),this.setValue(""),this.focus()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}onSearchSubmit(){this.inputBox.addToHistory()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive?.checked??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){return this.wholeWords?.checked??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){return this.regex?.checked??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){this.caseSensitive?.focus()}focusOnRegex(){this.regex?.focus()}_lastHighlightFindOptions=0;highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}clearValidation(){this.inputBox.hideMessage()}}var mxe=Object.defineProperty,fte=(i,e)=>mxe(i,"name",{value:e,configurable:!0}),tn=(i=>(i[i.Hidden=0]="Hidden",i[i.Visible=1]="Visible",i[i.Recurse=2]="Recurse",i))(tn||{}),Dl=(i=>(i[i.Expanded=0]="Expanded",i[i.Collapsed=1]="Collapsed",i[i.PreserveOrExpanded=2]="PreserveOrExpanded",i[i.PreserveOrCollapsed=3]="PreserveOrCollapsed",i))(Dl||{}),Lw=(i=>(i[i.Unknown=0]="Unknown",i[i.Twistie=1]="Twistie",i[i.Element=2]="Element",i[i.Filter=3]="Filter",i))(Lw||{}),pte=(i=>(i[i.Down=0]="Down",i[i.Up=1]="Up",i))(pte||{});class Uo extends Error{static{fte(this,"TreeError")}constructor(e,t){super(`TreeError [${e}] ${t}`)}}class x3{constructor(e){this.fn=e}static{fte(this,"WeakMapper")}_map=new WeakMap;map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}var _xe=Object.defineProperty,bxe=(i,e)=>_xe(i,"name",{value:e,configurable:!0});class Bf{static{bxe(this,"DiffChange")}originalStart;originalLength;modifiedStart;modifiedLength;constructor(e,t,n,s){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=s}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}var vxe=Object.defineProperty,gS=(i,e)=>vxe(i,"name",{value:e,configurable:!0});class bU{constructor(e){this.source=e}static{gS(this,"StringDiffSequence")}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,s=e.length;n<s;n++)t[n]=e.charCodeAt(n);return t}}function wxe(i,e,t){return new cg(new bU(i),new bU(e)).ComputeDiff(t).changes}gS(wxe,"stringDiff");class zv{static{gS(this,"Debug")}static Assert(e,t){if(!e)throw new Error(t)}}class $v{static{gS(this,"MyArray")}static Copy(e,t,n,s,o){for(let r=0;r<o;r++)n[s+r]=e[t+r]}static Copy2(e,t,n,s,o){for(let r=0;r<o;r++)n[s+r]=e[t+r]}}class vU{static{gS(this,"DiffChangeHelper")}m_changes;m_originalStart;m_modifiedStart;m_originalCount;m_modifiedCount;constructor(){this.m_changes=[],this.m_originalStart=fn.MAX_SAFE_SMALL_INTEGER,this.m_modifiedStart=fn.MAX_SAFE_SMALL_INTEGER,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Bf(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=fn.MAX_SAFE_SMALL_INTEGER,this.m_modifiedStart=fn.MAX_SAFE_SMALL_INTEGER}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class cg{static{gS(this,"LcsDiff")}ContinueProcessingPredicate;_originalSequence;_modifiedSequence;_hasStrings;_originalStringElements;_originalElementsOrHash;_modifiedStringElements;_modifiedElementsOrHash;m_forwardHistory;m_reverseHistory;constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[s,o,r]=cg._getElements(e),[a,l,c]=cg._getElements(t);this._hasStrings=r&&c,this._originalStringElements=s,this._originalElementsOrHash=o,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(cg._isStringArray(t)){const n=new Int32Array(t.length);for(let s=0,o=t.length;s<o;s++)n[s]=QN(t[s],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=cg._getStrictElement(this._originalSequence,e),s=cg._getStrictElement(this._modifiedSequence,t);return n===s}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,s,o){const r=[!1];let a=this.ComputeDiffRecursive(e,t,n,s,r);return o&&(a=this.PrettifyChanges(a)),{quitEarly:r[0],changes:a}}ComputeDiffRecursive(e,t,n,s,o){for(o[0]=!1;e<=t&&n<=s&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&s>=n&&this.ElementsAreEqual(t,s);)t--,s--;if(e>t||n>s){let h;return n<=s?(zv.Assert(e===t+1,"originalStart should only be one more than originalEnd"),h=[new Bf(e,0,n,s-n+1)]):e<=t?(zv.Assert(n===s+1,"modifiedStart should only be one more than modifiedEnd"),h=[new Bf(e,t-e+1,n,0)]):(zv.Assert(e===t+1,"originalStart should only be one more than originalEnd"),zv.Assert(n===s+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}const r=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,s,r,a,o),c=r[0],d=a[0];if(l!==null)return l;if(!o[0]){const h=this.ComputeDiffRecursive(e,c,n,d,o);let u=[];return o[0]?u=[new Bf(c+1,t-(c+1)+1,d+1,s-(d+1)+1)]:u=this.ComputeDiffRecursive(c+1,t,d+1,s,o),this.ConcatenateChanges(h,u)}return[new Bf(e,t-e+1,n,s-n+1)]}WALKTRACE(e,t,n,s,o,r,a,l,c,d,h,u,f,p,m,_,w,v){let b=null,C=null,S=new vU,D=t,T=n,I=f[0]-_[0]-s,R=fn.MIN_SAFE_SMALL_INTEGER,G=this.m_forwardHistory.length-1;do{const K=I+e;K===D||K<T&&c[K-1]<c[K+1]?(h=c[K+1],p=h-I-s,h<R&&S.MarkNextChange(),R=h,S.AddModifiedElement(h+1,p),I=K+1-e):(h=c[K-1]+1,p=h-I-s,h<R&&S.MarkNextChange(),R=h-1,S.AddOriginalElement(h,p+1),I=K-1-e),G>=0&&(c=this.m_forwardHistory[G],e=c[0],D=1,T=c.length-1)}while(--G>=-1);if(b=S.getReverseChanges(),v[0]){let K=f[0]+1,X=_[0]+1;if(b!==null&&b.length>0){const we=b[b.length-1];K=Math.max(K,we.getOriginalEnd()),X=Math.max(X,we.getModifiedEnd())}C=[new Bf(K,u-K+1,X,m-X+1)]}else{S=new vU,D=r,T=a,I=f[0]-_[0]-l,R=fn.MAX_SAFE_SMALL_INTEGER,G=w?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const K=I+o;K===D||K<T&&d[K-1]>=d[K+1]?(h=d[K+1]-1,p=h-I-l,h>R&&S.MarkNextChange(),R=h+1,S.AddOriginalElement(h+1,p+1),I=K+1-o):(h=d[K-1],p=h-I-l,h>R&&S.MarkNextChange(),R=h,S.AddModifiedElement(h+1,p+1),I=K-1-o),G>=0&&(d=this.m_reverseHistory[G],o=d[0],D=1,T=d.length-1)}while(--G>=-1);C=S.getChanges()}return this.ConcatenateChanges(b,C)}ComputeRecursionPoint(e,t,n,s,o,r,a){let l=0,c=0,d=0,h=0,u=0,f=0;e--,n--,o[0]=0,r[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const p=t-e+(s-n),m=p+1,_=new Int32Array(m),w=new Int32Array(m),v=s-n,b=t-e,C=e-n,S=t-s,T=(b-v)%2===0;_[v]=e,w[b]=t,a[0]=!1;for(let I=1;I<=p/2+1;I++){let R=0,G=0;d=this.ClipDiagonalBound(v-I,I,v,m),h=this.ClipDiagonalBound(v+I,I,v,m);for(let X=d;X<=h;X+=2){X===d||X<h&&_[X-1]<_[X+1]?l=_[X+1]:l=_[X-1]+1,c=l-(X-v)-C;const we=l;for(;l<t&&c<s&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(_[X]=l,l+c>R+G&&(R=l,G=c),!T&&Math.abs(X-b)<=I-1&&l>=w[X])return o[0]=l,r[0]=c,we<=w[X]&&I<=1448?this.WALKTRACE(v,d,h,C,b,u,f,S,_,w,l,t,o,c,s,r,T,a):null}const K=(R-e+(G-n)-I)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(R,K))return a[0]=!0,o[0]=R,r[0]=G,K>0&&I<=1448?this.WALKTRACE(v,d,h,C,b,u,f,S,_,w,l,t,o,c,s,r,T,a):(e++,n++,[new Bf(e,t-e+1,n,s-n+1)]);u=this.ClipDiagonalBound(b-I,I,b,m),f=this.ClipDiagonalBound(b+I,I,b,m);for(let X=u;X<=f;X+=2){X===u||X<f&&w[X-1]>=w[X+1]?l=w[X+1]-1:l=w[X-1],c=l-(X-b)-S;const we=l;for(;l>e&&c>n&&this.ElementsAreEqual(l,c);)l--,c--;if(w[X]=l,T&&Math.abs(X-v)<=I&&l<=_[X])return o[0]=l,r[0]=c,we>=_[X]&&I<=1448?this.WALKTRACE(v,d,h,C,b,u,f,S,_,w,l,t,o,c,s,r,T,a):null}if(I<=1447){let X=new Int32Array(h-d+2);X[0]=v-d+1,$v.Copy2(_,d,X,1,h-d+1),this.m_forwardHistory.push(X),X=new Int32Array(f-u+2),X[0]=b-u+1,$v.Copy2(w,u,X,1,f-u+1),this.m_reverseHistory.push(X)}}return this.WALKTRACE(v,d,h,C,b,u,f,S,_,w,l,t,o,c,s,r,T,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],s=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,o=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,r=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<s&&n.modifiedStart+n.modifiedLength<o&&(!r||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const c=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!c)break;n.originalStart++,n.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let s=0,o=0;if(t>0){const h=e[t-1];s=h.originalStart+h.originalLength,o=h.modifiedStart+h.modifiedLength}const r=n.originalLength>0,a=n.modifiedLength>0;let l=0,c=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let h=1;;h++){const u=n.originalStart-h,f=n.modifiedStart-h;if(u<s||f<o||r&&!this.OriginalElementsAreEqual(u,u+n.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+n.modifiedLength))break;const m=(u===s&&f===o?5:0)+this._boundaryScore(u,n.originalLength,f,n.modifiedLength);m>c&&(c=m,l=h)}n.originalStart-=l,n.modifiedStart-=l;const d=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],d)){e[t-1]=d[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const s=e[t-1],o=e[t],r=o.originalStart-s.originalStart-s.originalLength,a=s.originalStart,l=o.originalStart+o.originalLength,c=l-a,d=s.modifiedStart,h=o.modifiedStart+o.modifiedLength,u=h-d;if(r<5&&c<20&&u<20){const f=this._findBetterContiguousSequence(a,c,d,u,r);if(f){const[p,m]=f;(p!==s.originalStart+s.originalLength||m!==s.modifiedStart+s.modifiedLength)&&(s.originalLength=p-s.originalStart,s.modifiedLength=m-s.modifiedStart,o.originalStart=p+r,o.modifiedStart=m+r,o.originalLength=l-o.originalStart,o.modifiedLength=h-o.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,s,o){if(t<o||s<o)return null;const r=e+t-o+1,a=n+s-o+1;let l=0,c=0,d=0;for(let h=e;h<r;h++)for(let u=n;u<a;u++){const f=this._contiguousSequenceScore(h,u,o);f>0&&f>l&&(l=f,c=h,d=u)}return l>0?[c,d]:null}_contiguousSequenceScore(e,t,n){let s=0;for(let o=0;o<n;o++){if(!this.ElementsAreEqual(e+o,t+o))return 0;s+=this._originalStringElements[e+o].length}return s}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,s){const o=this._OriginalRegionIsBoundary(e,t)?1:0,r=this._ModifiedRegionIsBoundary(n,s)?1:0;return o+r}ConcatenateChanges(e,t){const n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const s=new Array(e.length+t.length-1);return $v.Copy(e,0,s,0,e.length-1),s[e.length-1]=n[0],$v.Copy(t,1,s,e.length,t.length-1),s}else{const s=new Array(e.length+t.length);return $v.Copy(e,0,s,0,e.length),$v.Copy(t,0,s,e.length,t.length),s}}ChangesOverlap(e,t,n){if(zv.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),zv.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const s=e.originalStart;let o=e.originalLength;const r=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(o=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new Bf(s,o,r,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,s){if(e>=0&&e<s)return e;const o=n,r=s-n-1,a=t%2===0;if(e<0){const l=o%2===0;return a===l?0:1}else{const l=r%2===0;return a===l?s-1:s-2}}}var Cxe=Object.defineProperty,np=(i,e)=>Cxe(i,"name",{value:e,configurable:!0});function ZP(i){return typeof i=="object"&&"visibility"in i&&"data"in i}np(ZP,"isFilterResult");function ly(i){switch(i){case!0:return tn.Visible;case!1:return tn.Hidden;default:return i}}np(ly,"getVisibleState");function qT(i){return typeof i.collapsible=="boolean"}np(qT,"isCollapsibleStateUpdate");class yxe{constructor(e,t,n={}){this.user=e,this.collapseByDefault=typeof n.collapseByDefault>"u"?!1:n.collapseByDefault,this.allowNonCollapsibleParents=n.allowNonCollapsibleParents??!1,this.filter=n.filter,this.autoExpandSingleChildren=typeof n.autoExpandSingleChildren>"u"?!1:n.autoExpandSingleChildren,this.root={parent:void 0,element:t,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:tn.Visible,visible:!0,filterData:void 0}}static{np(this,"IndexTreeModel")}rootRef=[];root;eventBufferer=new a5;_onDidSpliceModel=new x;onDidSpliceModel=this._onDidSpliceModel.event;_onDidSpliceRenderedNodes=new x;onDidSpliceRenderedNodes=this._onDidSpliceRenderedNodes.event;_onDidChangeCollapseState=new x;onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event);_onDidChangeRenderNodeCount=new x;onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event);collapseByDefault;allowNonCollapsibleParents;filter;autoExpandSingleChildren;refilterDelayer=new $y(EK);splice(e,t,n=Zt.empty(),s={}){if(e.length===0)throw new Uo(this.user,"Invalid tree location");s.diffIdentityProvider?this.spliceSmart(s.diffIdentityProvider,e,t,n,s):this.spliceSimple(e,t,n,s)}spliceSmart(e,t,n,s=Zt.empty(),o,r=o.diffDepth??0){const{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,n,s,o);const l=[...s],c=t[t.length-1],d=new cg({getElements:np(()=>a.lastDiffIds,"getElements")},{getElements:np(()=>[...a.children.slice(0,c),...l,...a.children.slice(c+n)].map(m=>e.getId(m.element).toString()),"getElements")}).ComputeDiff(!1);if(d.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,n,l,o);const h=t.slice(0,-1),u=np((m,_,w)=>{if(r>0)for(let v=0;v<w;v++)m--,_--,this.spliceSmart(e,[...h,m,0],Number.MAX_SAFE_INTEGER,l[_].children,o,r-1)},"recurseSplice");let f=Math.min(a.children.length,c+n),p=l.length;for(const m of d.changes.sort((_,w)=>w.originalStart-_.originalStart))u(f,p,f-(m.originalStart+m.originalLength)),f=m.originalStart,p=m.modifiedStart-c,this.spliceSimple([...h,f],m.originalLength,Zt.slice(l,p,p+m.modifiedLength),o);u(f,p,f)}spliceSimple(e,t,n=Zt.empty(),{onDidCreateNode:s,onDidDeleteNode:o,diffIdentityProvider:r}){const{parentNode:a,listIndex:l,revealed:c,visible:d}=this.getParentNodeWithListIndex(e),h=[],u=Zt.map(n,S=>this.createTreeNode(S,a,a.visible?tn.Visible:tn.Hidden,c,h,s)),f=e[e.length-1];let p=0;for(let S=f;S>=0&&S<a.children.length;S--){const D=a.children[S];if(D.visible){p=D.visibleChildIndex;break}}const m=[];let _=0,w=0;for(const S of u)m.push(S),w+=S.renderNodeCount,S.visible&&(S.visibleChildIndex=p+_++);const v=PM(a.children,f,t,m);r?a.lastDiffIds?PM(a.lastDiffIds,f,t,m.map(S=>r.getId(S.element).toString())):a.lastDiffIds=a.children.map(S=>r.getId(S.element).toString()):a.lastDiffIds=void 0;let b=0;for(const S of v)S.visible&&b++;if(b!==0)for(let S=f+m.length;S<a.children.length;S++){const D=a.children[S];D.visible&&(D.visibleChildIndex-=b)}if(a.visibleChildrenCount+=_-b,c&&d){const S=v.reduce((D,T)=>D+(T.visible?T.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,w-S),this._onDidSpliceRenderedNodes.fire({start:l,deleteCount:S,elements:h})}if(v.length>0&&o){const S=np(D=>{o(D),D.children.forEach(S)},"visit");v.forEach(S)}this._onDidSpliceModel.fire({insertedNodes:m,deletedNodes:v});let C=a;for(;C;){if(C.visibility===tn.Recurse){this.refilterDelayer.trigger(()=>this.refilter());break}C=C.parent}}rerender(e){if(e.length===0)throw new Uo(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:s}=this.getTreeNodeWithListIndex(e);t.visible&&s&&this._onDidSpliceRenderedNodes.fire({start:n,deleteCount:1,elements:[t]})}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:s}=this.getTreeNodeWithListIndex(e);return n&&s?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const s={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const s=this.getTreeNode(e);typeof t>"u"&&(t=!s.collapsed);const o={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,o))}_setCollapseState(e,t){const{node:n,listIndex:s,revealed:o}=this.getTreeNodeWithListIndex(e),r=this._setListNodeCollapseState(n,s,o,t);if(n!==this.root&&this.autoExpandSingleChildren&&r&&!qT(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return r}_setListNodeCollapseState(e,t,n,s){const o=this._setNodeCollapseState(e,s,!1);if(!n||!e.visible||!o)return o;const r=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=r-(t===-1?0:1);return this._onDidSpliceRenderedNodes.fire({start:t+1,deleteCount:l,elements:a.slice(1)}),o}_setNodeCollapseState(e,t,n){let s;if(e===this.root?s=!1:(qT(t)?(s=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(s=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):s=!1,s&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!qT(t)&&t.recursive)for(const o of e.children)s=this._setNodeCollapseState(o,t,!0)||s;return s}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this._onDidSpliceRenderedNodes.fire({start:0,deleteCount:e,elements:t}),this.refilterDelayer.cancel()}createTreeNode(e,t,n,s,o,r){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:tn.Visible,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,s&&o.push(a);const c=e.children||Zt.empty(),d=s&&l!==tn.Hidden&&!a.collapsed;let h=0,u=1;for(const f of c){const p=this.createTreeNode(f,a,l,d,o,r);a.children.push(p),u+=p.renderNodeCount,p.visible&&(p.visibleChildIndex=h++)}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=h,a.visible=l===tn.Recurse?h>0:l===tn.Visible,a.visible?a.collapsed||(a.renderNodeCount=u):(a.renderNodeCount=0,s&&o.pop()),r?.(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?tn.Visible:tn.Hidden,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,s=!0){let o;if(e!==this.root){if(o=this._filterNode(e,t),o===tn.Hidden)return e.visible=!1,e.renderNodeCount=0,!1;s&&n.push(e)}const r=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||o!==tn.Hidden){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,o,n,s&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=o===tn.Recurse?a:o===tn.Visible,e.visibility=o),e.visible?e.collapsed||(e.renderNodeCount+=n.length-r):(e.renderNodeCount=0,s&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):tn.Visible;return typeof n=="boolean"?(e.filterData=void 0,n?tn.Visible:tn.Hidden):ZP(n)?(e.filterData=n.data,ly(n.visibility)):(e.filterData=void 0,ly(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...s]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(s,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...s]=e;if(n<0||n>t.children.length)throw new Uo(this.user,"Invalid tree location");return this.getTreeNode(s,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:s,visible:o}=this.getParentNodeWithListIndex(e),r=e[e.length-1];if(r<0||r>t.children.length)throw new Uo(this.user,"Invalid tree location");const a=t.children[r];return{node:a,listIndex:n,revealed:s,visible:o&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,s=!0,o=!0){const[r,...a]=e;if(r<0||r>t.children.length)throw new Uo(this.user,"Invalid tree location");for(let l=0;l<r;l++)n+=t.children[l].renderNodeCount;return s=s&&!t.collapsed,o=o&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:s,visible:o}:this.getParentNodeWithListIndex(a,t.children[r],n+1,s,o)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:cs(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}getLastElementAncestor(e=[]){const t=this.getTreeNode(e);if(t.children.length!==0)return this._getLastElementAncestor(t)}_getLastElementAncestor(e){return e.children.length===0?e.element:this._getLastElementAncestor(e.children[e.children.length-1])}}var Sxe=Object.defineProperty,zi=(i,e)=>Sxe(i,"name",{value:e,configurable:!0});class Exe extends pD{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}static{zi(this,"TreeElementsDragAndDropData")}set context(e){this.data.context=e}get context(){return this.data.context}}function YT(i){return i instanceof pD?new Exe(i):i}zi(YT,"asTreeDragAndDropData");class Lxe{constructor(e,t){this.modelProvider=e,this.dnd=t}static{zi(this,"TreeNodeListDragAndDrop")}autoExpandNode;autoExpandDisposable=$.None;disposables=new te;getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart?.(YT(e),t)}onDragOver(e,t,n,s,o,r=!0){const a=this.dnd.onDragOver(YT(e),t&&t.element,n,s,o),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(l&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=HA(()=>{const f=this.modelProvider(),p=f.getNodeLocation(t);f.isCollapsed(p)&&f.setCollapsed(p,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"||a.feedback){if(!r){const f=typeof a=="boolean"?a:a.accept,p=typeof a=="boolean"?void 0:a.effect;return{accept:f,effect:p,feedback:[n]}}return a}if(a.bubble===pte.Up){const f=this.modelProvider(),p=f.getNodeLocation(t),m=f.getParentNodeLocation(p),_=f.getNode(m),w=m&&f.getListIndex(m);return this.onDragOver(e,_,w,s,o,!1)}const c=this.modelProvider(),d=c.getNodeLocation(t),h=c.getListIndex(d),u=c.getListRenderCount(d);return{...a,feedback:nr(h,h+u)}}drop(e,t,n,s,o){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(YT(e),t&&t.element,n,s,o)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function mte(i,e){return e&&{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new Lxe(i,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element})},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})}},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getSetSize(t){const n=i(),s=n.getNodeLocation(t),o=n.getParentNodeLocation(s);return n.getNode(o).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}}}zi(mte,"asListOptions");class k3{constructor(e){this.delegate=e}static{zi(this,"ComposedTreeDelegate")}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight?.(e.element,t)}}class n0{static{zi(this,"AbstractTreeViewState")}focus;selection;expanded;scrollTop;static lift(e){return e instanceof n0?e:new n0(e)}static empty(e=0){return new n0({focus:[],selection:[],expanded:Object.create(null),scrollTop:e})}constructor(e){if(this.focus=new Set(e.focus),this.selection=new Set(e.selection),e.expanded instanceof Array){this.expanded=Object.create(null);for(const t of e.expanded)this.expanded[t]=1}else this.expanded=e.expanded;this.expanded=e.expanded,this.scrollTop=e.scrollTop}toJSON(){return{focus:Array.from(this.focus),selection:Array.from(this.selection),expanded:this.expanded,scrollTop:this.scrollTop}}}class Dxe{constructor(e,t=[]){this._elements=t,this.onDidChange=H.forEach(e,n=>this._elements=n,this.disposables)}static{zi(this,"EventCollection")}disposables=new te;onDidChange;get elements(){return this._elements}dispose(){this.disposables.dispose()}}class Fx{constructor(e,t,n,s,o,r={}){this.renderer=e,this.model=t,this.activeNodes=s,this.renderedIndentGuides=o,this.templateId=e.templateId,this.updateOptions(r),H.map(n,a=>a.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState?.(this.onDidChangeTwistieState,this,this.disposables)}static{zi(this,"TreeRenderer")}static DefaultIndent=8;templateId;renderedElements=new Map;renderedNodes=new Map;indent=Fx.DefaultIndent;hideTwistiesOfChildlessElements=!1;shouldRenderIndentGuides=!1;activeIndentNodes=new Set;indentGuidesDisposable=$.None;disposables=new te;updateOptions(e={}){if(typeof e.indent<"u"){const t=Kr(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[n,s]of this.renderedNodes)this.renderTreeElement(n,s)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!=="none";if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[n,s]of this.renderedNodes)this._renderIndentGuides(n,s);if(this.indentGuidesDisposable.dispose(),t){const n=new te;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=Le(e,ce(".monaco-tl-row")),n=Le(t,ce(".monaco-tl-indent")),s=Le(t,ce(".monaco-tl-twistie")),o=Le(t,ce(".monaco-tl-contents")),r=this.renderer.renderTemplate(o);return{container:e,indent:n,twistie:s,indentGuidesDisposable:$.None,templateData:r}}renderElement(e,t,n,s){this.renderedNodes.set(e,n),this.renderedElements.set(e.element,e),this.renderTreeElement(e,n),this.renderer.renderElement(e,t,n.templateData,s)}disposeElement(e,t,n,s){n.indentGuidesDisposable.dispose(),this.renderer.disposeElement?.(e,t,n.templateData,s),typeof s=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const n=Fx.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${n}px`,t.indent.style.width=`${n+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...Ne.asClassNameArray(ee.treeItemExpanded));let s=!1;this.renderer.renderTwistie&&(s=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(s||t.twistie.classList.add(...Ne.asClassNameArray(ee.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(Mn(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new te;for(;;){const s=this.model.getNodeLocation(e),o=this.model.getParentNodeLocation(s);if(!o)break;const r=this.model.getNode(o),a=ce(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(r)&&a.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(a):t.indent.insertBefore(a,t.indent.firstElementChild),this.renderedIndentGuides.add(r,a),n.add(ye(()=>this.renderedIndentGuides.delete(r,a))),e=r}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set;e.forEach(n=>{const s=this.model.getNodeLocation(n);try{const o=this.model.getParentNodeLocation(s);n.collapsible&&n.children.length>0&&!n.collapsed?t.add(n):o&&t.add(this.model.getNode(o))}catch{}}),this.activeIndentNodes.forEach(n=>{t.has(n)||this.renderedIndentGuides.forEach(n,s=>s.classList.remove("active"))}),t.forEach(n=>{this.activeIndentNodes.has(n)||this.renderedIndentGuides.forEach(n,s=>s.classList.add("active"))}),this.activeIndentNodes=t}setModel(e){this.model=e}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),ii(this.disposables)}}class Ixe{constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,e.onWillRefilter(this.reset,this,this.disposables)}static{zi(this,"FindFilter")}_totalCount=0;get totalCount(){return this._totalCount}_matchCount=0;get matchCount(){return this._matchCount}_pattern="";_lowercasePattern="";disposables=new te;set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,t){let n=tn.Visible;if(this._filter){const r=this._filter.filter(e,t);if(typeof r=="boolean"?n=r?tn.Visible:tn.Hidden:ZP(r)?n=ly(r.visibility):n=r,n===tn.Hidden)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:tb.Default,visibility:n};const s=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),o=Array.isArray(s)?s:[s];for(const r of o){const a=r&&r.toString();if(typeof a>"u")return{data:tb.Default,visibility:n};let l;if(this.tree.findMatchType===1){const c=a.toLowerCase().indexOf(this._lowercasePattern);if(c>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let d=this._lowercasePattern.length;d>0;d--)l.push(c+d-1)}}else l=Mb(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,o.length===1?{data:l,visibility:n}:{data:{label:a,score:l},visibility:n}}return this.tree.findMode===1?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):tn.Recurse:{data:tb.Default,visibility:n}}reset(){this._totalCount=0,this._matchCount=0}dispose(){ii(this.disposables)}}class Txe extends hm{static{zi(this,"ModeToggle")}constructor(e){super({icon:ee.listFilter,title:g("filter","Filter"),isChecked:e.isChecked??!1,hoverDelegate:e.hoverDelegate??bn("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Axe extends hm{static{zi(this,"FuzzyToggle")}constructor(e){super({icon:ee.searchFuzzy,title:g("fuzzySearch","Fuzzy Match"),isChecked:e.isChecked??!1,hoverDelegate:e.hoverDelegate??bn("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}const xxe={inputBoxStyles:uxe,toggleStyles:dte,listFilterWidgetBackground:void 0,listFilterWidgetNoMatchesOutline:void 0,listFilterWidgetOutline:void 0,listFilterWidgetShadow:void 0};var E1=(i=>(i[i.Highlight=0]="Highlight",i[i.Filter=1]="Filter",i))(E1||{}),YF=(i=>(i[i.Fuzzy=0]="Fuzzy",i[i.Contiguous=1]="Contiguous",i))(YF||{});class kxe extends ${constructor(e,t,n,s,o,r){super(),this.tree=t,e.appendChild(this.elements.root),this._register(ye(()=>this.elements.root.remove()));const a=r?.styles??xxe;a.listFilterWidgetBackground&&(this.elements.root.style.backgroundColor=a.listFilterWidgetBackground),a.listFilterWidgetShadow&&(this.elements.root.style.boxShadow=`0 0 8px 2px ${a.listFilterWidgetShadow}`);const l=this._register(cm());this.modeToggle=this._register(new Txe({...a.toggleStyles,isChecked:s===1,hoverDelegate:l})),this.matchTypeToggle=this._register(new Axe({...a.toggleStyles,isChecked:o===0,hoverDelegate:l})),this.onDidChangeMode=H.map(this.modeToggle.onChange,()=>this.modeToggle.checked?1:0,this._store),this.onDidChangeMatchType=H.map(this.matchTypeToggle.onChange,()=>this.matchTypeToggle.checked?0:1,this._store),this.findInput=this._register(new gte(this.elements.findInput,n,{label:g("type to search","Type to search"),additionalToggles:[this.modeToggle,this.matchTypeToggle],showCommonFindToggles:!1,inputBoxStyles:a.inputBoxStyles,toggleStyles:a.toggleStyles,history:r?.history})),this.actionbar=this._register(new td(this.elements.actionbar)),this.mode=s;const c=this._register(new Je(this.findInput.inputBox.inputElement,"keydown")),d=H.chain(c.event,p=>p.map(m=>new Pt(m)));this._register(d(p=>{if(p.equals(E.Enter)){p.preventDefault(),p.stopPropagation(),this.findInput.inputBox.addToHistory(),this.tree.domFocus();return}if(p.equals(E.DownArrow)){p.preventDefault(),p.stopPropagation(),this.findInput.inputBox.isAtLastInHistory()||this.findInput.inputBox.isNowhereInHistory()?(this.findInput.inputBox.addToHistory(),this.tree.domFocus()):this.findInput.inputBox.showNextValue();return}if(p.equals(E.UpArrow)){p.preventDefault(),p.stopPropagation(),this.findInput.inputBox.showPreviousValue();return}}));const h=this._register(new Mt("close",g("close","Close"),"codicon codicon-close",!0,()=>this.dispose()));this.actionbar.push(h,{icon:!0,label:!1});const u=this._register(new Je(this.elements.grab,"mousedown"));this._register(u.event(p=>{const m=new te,_=m.add(new Je(ve(p),"mousemove")),w=m.add(new Je(ve(p),"mouseup")),v=this.right,b=p.pageX,C=this.top,S=p.pageY;this.elements.grab.classList.add("grabbing");const D=this.elements.root.style.transition;this.elements.root.style.transition="unset";const T=zi(I=>{const R=I.pageX-b;this.right=v-R;const G=I.pageY-S;this.top=C+G,this.layout()},"update");m.add(_.event(T)),m.add(w.event(I=>{T(I),this.elements.grab.classList.remove("grabbing"),this.elements.root.style.transition=D,m.dispose()}))}));const f=H.chain(this._register(new Je(this.elements.grab,"keydown")).event,p=>p.map(m=>new Pt(m)));this._register(f(p=>{let m,_;if(p.keyCode===E.LeftArrow?m=Number.POSITIVE_INFINITY:p.keyCode===E.RightArrow?m=0:p.keyCode===E.Space&&(m=this.right===0?Number.POSITIVE_INFINITY:0),p.keyCode===E.UpArrow?_=0:p.keyCode===E.DownArrow&&(_=Number.POSITIVE_INFINITY),m!==void 0&&(p.preventDefault(),p.stopPropagation(),this.right=m,this.layout()),_!==void 0){p.preventDefault(),p.stopPropagation(),this.top=_;const w=this.elements.root.style.transition;this.elements.root.style.transition="unset",this.layout(),setTimeout(()=>{this.elements.root.style.transition=w},0)}})),this.onDidChangeValue=this.findInput.onDidChange}static{zi(this,"FindWidget")}elements=Oi(".monaco-tree-type-filter",[Oi(".monaco-tree-type-filter-grab.codicon.codicon-debug-gripper@grab",{tabIndex:0}),Oi(".monaco-tree-type-filter-input@findInput"),Oi(".monaco-tree-type-filter-actionbar@actionbar")]);set mode(e){this.modeToggle.checked=e===1,this.findInput.inputBox.setPlaceHolder(e===1?g("type to filter","Type to filter"):g("type to search","Type to search"))}set matchType(e){this.matchTypeToggle.checked=e===0}get value(){return this.findInput.inputBox.value}set value(e){this.findInput.inputBox.value=e}modeToggle;matchTypeToggle;findInput;actionbar;width=0;right=0;top=0;_onDidDisable=new x;onDidDisable=this._onDidDisable.event;onDidChangeValue;onDidChangeMode;onDidChangeMatchType;getHistory(){return this.findInput.inputBox.getHistory()}focus(){this.findInput.focus()}select(){this.findInput.select(),this.findInput.inputBox.addToHistory(!0)}layout(e=this.width){this.width=e,this.right=Kr(this.right,0,Math.max(0,e-212)),this.elements.root.style.right=`${this.right}px`,this.top=Kr(this.top,0,24),this.elements.root.style.top=`${this.top}px`}showMessage(e){this.findInput.showMessage(e)}clearMessage(){this.findInput.clearMessage()}async dispose(){this._onDidDisable.fire(),this.elements.root.classList.add("disabled"),await xa(300),super.dispose()}}class Nxe{constructor(e,t,n,s={}){this.tree=e,this.filter=t,this.contextViewProvider=n,this.options=s,this._mode=e.options.defaultFindMode??0,this._matchType=e.options.defaultFindMatchType??0}static{zi(this,"FindController")}_history;_pattern="";get pattern(){return this._pattern}previousPattern="";_mode;get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}_matchType;get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}widget;width=0;_onDidChangeMode=new x;onDidChangeMode=this._onDidChangeMode.event;_onDidChangeMatchType=new x;onDidChangeMatchType=this._onDidChangeMatchType.event;_onDidChangePattern=new x;onDidChangePattern=this._onDidChangePattern.event;_onDidChangeOpenState=new x;onDidChangeOpenState=this._onDidChangeOpenState.event;enabledDisposables=new te;disposables=new te;updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}isOpened(){return!!this.widget}open(){if(this.widget){this.widget.focus(),this.widget.select();return}this.widget=new kxe(this.tree.getHTMLElement(),this.tree,this.contextViewProvider,this.mode,this.matchType,{...this.options,history:this._history}),this.enabledDisposables.add(this.widget),this.widget.onDidChangeValue(this.onDidChangeValue,this,this.enabledDisposables),this.widget.onDidChangeMode(e=>this.mode=e,void 0,this.enabledDisposables),this.widget.onDidChangeMatchType(e=>this.matchType=e,void 0,this.enabledDisposables),this.widget.onDidDisable(this.close,this,this.enabledDisposables),this.widget.layout(this.width),this.widget.focus(),this.widget.value=this.previousPattern,this.widget.select(),this._onDidChangeOpenState.fire(!0)}close(){this.widget&&(this._history=this.widget.getHistory(),this.widget=void 0,this.enabledDisposables.clear(),this.previousPattern=this.pattern,this.onDidChangeValue(""),this.tree.domFocus(),this._onDidChangeOpenState.fire(!1))}onDidChangeValue(e){this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,n=>!tb.isDefault(n.filterData));const t=this.tree.getFocus();if(t.length>0){const n=t[0];this.tree.getRelativeTop(n)===null&&this.tree.reveal(n,.5)}this.render()}render(){const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&e?(Ub(g("replFindNoResults","No results")),this.tree.options.showNotFoundMessage??!0?this.widget?.showMessage({type:qF.WARNING,content:g("not found","No elements found.")}):this.widget?.showMessage({type:qF.WARNING})):(this.widget?.clearMessage(),this.pattern&&Ub(g("replFindResults","{0} results",this.filter.matchCount)))}shouldAllowFocus(e){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!tb.isDefault(e.filterData)}layout(e){this.width=e,this.widget?.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function _te(i,e){return i.position===e.position&&N3(i,e)}zi(_te,"stickyScrollNodeStateEquals");function N3(i,e){return i.node.element===e.node.element&&i.startIndex===e.startIndex&&i.height===e.height&&i.endIndex===e.endIndex}zi(N3,"stickyScrollNodeEquals");class Pxe{constructor(e=[]){this.stickyNodes=e}static{zi(this,"StickyScrollState")}get count(){return this.stickyNodes.length}equal(e){return ks(this.stickyNodes,e.stickyNodes,_te)}lastNodePartiallyVisible(){if(this.count===0)return!1;const e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!ks(this.stickyNodes,e.stickyNodes,N3)||this.count===0)return!1;const t=this.stickyNodes[this.count-1],n=e.stickyNodes[e.count-1];return t.position!==n.position}}class Rxe{static{zi(this,"DefaultStickyScrollDelegate")}constrainStickyScrollNodes(e,t,n){for(let s=0;s<e.length;s++){const o=e[s];if(o.position+o.height>n||s>=t)return e.slice(0,s)}return e}}class wU extends ${constructor(e,t,n,s,o,r={}){super(),this.tree=e,this.model=t,this.view=n,this.treeDelegate=o;const a=this.validateStickySettings(r);this.stickyScrollMaxItemCount=a.stickyScrollMaxItemCount,this.stickyScrollDelegate=r.stickyScrollDelegate??new Rxe,this._widget=this._register(new Oxe(n.getScrollableElement(),n,e,s,o,r.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(n.onDidScroll(()=>this.update())),this._register(n.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this.update()}static{zi(this,"StickyScrollController")}onDidChangeHasFocus;onContextMenu;stickyScrollDelegate;stickyScrollMaxItemCount;maxWidgetViewRatio=.4;_widget;get height(){return this._widget.height}get count(){return this._widget.count}getNode(e){return this._widget.getNode(e)}getNodeAtHeight(e){let t;if(e===0?t=this.view.firstVisibleIndex:t=this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(0);if(!e||this.tree.scrollTop===0){this._widget.setState(void 0);return}const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let n=e,s=0,o=this.getNextStickyNode(n,void 0,s);for(;o&&(t.push(o),s+=o.height,!(t.length<=this.stickyScrollMaxItemCount&&(n=this.getNextVisibleNode(o),!n)));)o=this.getNextStickyNode(n,o.node,s);const r=this.constrainStickyNodes(t);return r.length?new Pxe(r):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,n){const s=this.getAncestorUnderPrevious(e,t);if(s&&!(s===e&&(!this.nodeIsUncollapsedParent(e)||this.nodeTopAlignsWithStickyNodesBottom(e,n))))return this.createStickyScrollNode(s,n)}nodeTopAlignsWithStickyNodesBottom(e,t){const n=this.getNodeIndex(e),s=this.view.getElementTop(n),o=t;return this.view.scrollTop===s-o}createStickyScrollNode(e,t){const n=this.treeDelegate.getHeight(e),{startIndex:s,endIndex:o}=this.getNodeRange(e),r=this.calculateStickyNodePosition(o,t,n);return{node:e,position:r,height:n,startIndex:s,endIndex:o}}getAncestorUnderPrevious(e,t=void 0){let n=e,s=this.getParentNode(n);for(;s;){if(s===t)return n;n=s,s=this.getParentNode(n)}if(t===void 0)return n}calculateStickyNodePosition(e,t,n){let s=this.view.getRelativeTop(e);if(s===null&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const c=this.treeDelegate.getHeight(this.view.element(e)),d=this.view.getRelativeTop(e+1);s=d?d-c/this.view.renderHeight:null}if(s===null)return t;const o=this.view.element(e),r=this.treeDelegate.getHeight(o),l=s*this.view.renderHeight+r;return t+n>l&&t<=l?l-n:t}constrainStickyNodes(e){if(e.length===0)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,n=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&n.position+n.height<=t)return e;const s=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!s.length)return[];const o=s[s.length-1];if(s.length>this.stickyScrollMaxItemCount||o.position+o.height>t)throw new Error("stickyScrollDelegate violates constraints");return s}getParentNode(e){const t=this.model.getNodeLocation(e),n=this.model.getParentNodeLocation(t);return n?this.model.getNode(n):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),n=this.model.getListIndex(t);if(n<0)throw new Error("Node not found in tree");const s=this.model.getListRenderCount(t),o=n+s-1;return{startIndex:n,endIndex:o}}nodePositionTopBelowWidget(e){const t=[];let n=this.getParentNode(e);for(;n;)t.push(n),n=this.getParentNode(n);let s=0;for(let o=0;o<t.length&&o<this.stickyScrollMaxItemCount;o++)s+=this.treeDelegate.getHeight(t[o]);return s}getFocus(){return this._widget.getFocus()}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(!e.stickyScrollMaxItemCount)return;const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}validateStickySettings(e){let t=7;return typeof e.stickyScrollMaxItemCount=="number"&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}setModel(e){this.model=e}}class Oxe{constructor(e,t,n,s,o,r){this.view=t,this.tree=n,this.treeRenderers=s,this.treeDelegate=o,this.accessibilityProvider=r,this._rootDomNode=ce(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const a=ce(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(a),this.stickyScrollFocus=new Mxe(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}static{zi(this,"StickyScrollWidget")}_rootDomNode;_previousState;_previousElements=[];_previousStateDisposables=new te;stickyScrollFocus;onDidChangeHasFocus;onContextMenu;get height(){if(!this._previousState)return 0;const e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}get count(){return this._previousState?.count??0}getNode(e){return this._previousState?.stickyNodes.find(t=>t.node===e)}setState(e){const t=!!this._previousState&&this._previousState.count>0,n=!!e&&e.count>0;if(!t&&!n||t&&n&&this._previousState.equal(e))return;if(t!==n&&this.setVisible(n),!n){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}const s=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${s.position}px`;else{this._previousStateDisposables.clear();const o=Array(e.count);for(let r=e.count-1;r>=0;r--){const a=e.stickyNodes[r],{element:l,disposable:c}=this.createElement(a,r,e.count);o[r]=l,this._rootDomNode.appendChild(l),this._previousStateDisposables.add(c)}this.stickyScrollFocus.updateElements(o,e),this._previousElements=o}this._previousState=e,this._rootDomNode.style.height=`${s.position+s.height}px`}createElement(e,t,n){const s=e.startIndex,o=document.createElement("div");o.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(o.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(o.style.lineHeight=`${e.height}px`),o.classList.add("monaco-tree-sticky-row"),o.classList.add("monaco-list-row"),o.setAttribute("data-index",`${s}`),o.setAttribute("data-parity",s%2===0?"even":"odd"),o.setAttribute("id",this.view.getElementID(s));const r=this.setAccessibilityAttributes(o,e.node.element,t,n),a=this.treeDelegate.getTemplateId(e.node),l=this.treeRenderers.find(u=>u.templateId===a);if(!l)throw new Error(`No renderer found for template id ${a}`);let c=e.node;c===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(c=new Proxy(e.node,{}));const d=l.renderTemplate(o);l.renderElement(c,e.startIndex,d,e.height);const h=ye(()=>{r.dispose(),l.disposeElement(c,e.startIndex,d,e.height),l.disposeTemplate(d),o.remove()});return{element:o,disposable:h}}setAccessibilityAttributes(e,t,n,s){if(!this.accessibilityProvider)return $.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,n,s))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,n))),this.accessibilityProvider.getRole&&e.setAttribute("role",this.accessibilityProvider.getRole(t)??"treeitem");const o=this.accessibilityProvider.getAriaLabel(t),r=o&&typeof o!="string"?o:$0(o),a=Li(c=>{const d=c.readObservable(r);d?e.setAttribute("aria-label",d):e.removeAttribute("aria-label")});typeof o=="string"||o&&e.setAttribute("aria-label",o.get());const l=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof l=="number"&&e.setAttribute("aria-level",`${l}`),e.setAttribute("aria-selected",String(!1)),a}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}getFocus(){return this.stickyScrollFocus.getFocus()}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}}class Mxe extends ${constructor(e,t){super(),this.container=e,this.view=t,this._register(F(this.container,"focus",()=>this.onFocus())),this._register(F(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(n=>this.onKeyDown(n))),this._register(this.view.onMouseDown(n=>this.onMouseDown(n))),this._register(this.view.onContextMenu(n=>this.handleContextMenu(n)))}static{zi(this,"StickyScrollFocus")}focusedIndex=-1;elements=[];state;_onDidChangeHasFocus=new x;onDidChangeHasFocus=this._onDidChangeHasFocus.event;_onContextMenu=new x;onContextMenu=this._onContextMenu.event;_domHasFocus=!1;get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}handleContextMenu(e){const t=e.browserEvent.target;if(!ry(t)&&!lC(t)){this.focusedLast()&&this.view.domFocus();return}if(!Vh(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const r=this.state.stickyNodes.findIndex(a=>a.node.element===e.element?.element);if(r===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(r);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const s=this.state.stickyNodes[this.focusedIndex].node.element,o=this.elements[this.focusedIndex];this._onContextMenu.fire({element:s,anchor:o,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state){if(e.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if(e.key==="ArrowDown"||e.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const t=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([t]),this.scrollNodeUnderWidget(t,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}}onMouseDown(e){const t=e.browserEvent.target;!ry(t)&&!lC(t)||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&t.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const n=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const s=Kr(n,0,t.count-1);this.setFocus(s)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const n=t.stickyNodes[e];this.scrollNodeUnderWidget(n.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const n=t.stickyNodes[t.count-1],s=t.count>1?t.stickyNodes[t.count-2]:void 0,o=this.view.getElementTop(e),r=s?s.position+s.height+n.height:n.height;this.view.scrollTop=o-r}getFocus(){if(!(!this.state||this.focusedIndex===-1))return this.state.stickyNodes[this.focusedIndex].node.element}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function Zm(i){let e=Lw.Unknown;return cT(i.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=Lw.Twistie:cT(i.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=Lw.Element:cT(i.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=Lw.Filter),{browserEvent:i.browserEvent,element:i.element?i.element.element:null,target:e}}zi(Zm,"asTreeMouseEvent");function bte(i){const e=ry(i.browserEvent.target);return{element:i.element?i.element.element:null,browserEvent:i.browserEvent,anchor:i.anchor,isStickyScroll:e}}zi(bte,"asTreeContextMenuEvent");function s0(i,e){e(i),i.children.forEach(t=>s0(t,e))}zi(s0,"dfs");class qO{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t}static{zi(this,"Trait")}nodes=[];elements;_onDidChange=new x;onDidChange=this._onDidChange.event;_nodeSet;get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){!t?.__forceEvent&&ks(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const s=this;this._onDidChange.fire({get elements(){return s.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=zi(d=>l.delete(d),"visit");t.forEach(d=>s0(d,c)),this.set([...l.values()]);return}const n=new Set,s=zi(l=>n.add(this.identityProvider.getId(l.element).toString()),"deletedNodesVisitor");t.forEach(l=>s0(l,s));const o=new Map,r=zi(l=>o.set(this.identityProvider.getId(l.element).toString(),l),"insertedNodesVisitor");e.forEach(l=>s0(l,r));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!n.has(c))a.push(l);else{const h=o.get(c);h&&h.visible&&a.push(h)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class Bxe extends xee{constructor(e,t,n){super(e),this.tree=t,this.stickyScrollProvider=n}static{zi(this,"TreeNodeListMouseController")}onViewPointer(e){if(b3(e.browserEvent.target)||Gd(e.browserEvent.target)||Ew(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,s=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,o=lC(e.browserEvent.target);let r=!1;if(o?r=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?r=this.tree.expandOnlyOnTwistieClick(t.element):r=!!this.tree.expandOnlyOnTwistieClick,o)this.handleStickyScrollMouseEvent(e,t);else{if(r&&!s&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e)}if(t.collapsible&&(!o||s)){const a=this.tree.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),this.tree.toggleCollapsed(a,l),s){e.browserEvent.isHandledByList=!0;return}}o||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(Dee(e.browserEvent.target)||Iee(e.browserEvent.target))return;const n=this.stickyScrollProvider();if(!n)throw new Error("Sticky scroll controller not found");const s=this.list.indexOf(t),o=this.list.getElementTop(s),r=n.nodePositionTopBelowWidget(t);this.tree.scrollTop=o-r,this.list.domFocus(),this.list.setFocus([s]),this.list.setSelection([s])}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){const t=e.browserEvent.target;if(!ry(t)&&!lC(t)){super.onMouseDown(e);return}}onContextMenu(e){const t=e.browserEvent.target;if(!ry(t)&&!lC(t)){super.onContextMenu(e);return}}}class Fxe extends fl{constructor(e,t,n,s,o,r,a,l){super(e,t,n,s,l),this.focusTrait=o,this.selectionTrait=r,this.anchorTrait=a}static{zi(this,"TreeNodeList")}createMouseController(e){return new Bxe(this,e.tree,e.stickyScrollProvider)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const s=[],o=[];let r;n.forEach((a,l)=>{this.focusTrait.has(a)&&s.push(e+l),this.selectionTrait.has(a)&&o.push(e+l),this.anchorTrait.has(a)&&(r=e+l)}),s.length>0&&super.setFocus(yb([...super.getFocus(),...s])),o.length>0&&super.setSelection(yb([...super.getSelection(),...o])),typeof r=="number"&&super.setAnchor(r)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(s=>this.element(s)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(s=>this.element(s)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class vte{constructor(e,t,n,s,o={}){this._user=e,this._options=o;let r;o.keyboardNavigationLabelProvider&&(r=new Ixe(this,o.keyboardNavigationLabelProvider,o.filter),o={...o,filter:r},this.disposables.add(r)),this.model=this.createModel(e,o),this.treeDelegate=new k3(n);const a=this.disposables.add(new Dxe(this.onDidChangeActiveNodesRelay.event)),l=new LN;this.renderers=s.map(c=>new Fx(c,this.model,this.onDidChangeCollapseStateRelay.event,a,l,o));for(const c of this.renderers)this.disposables.add(c);if(this.focus=new qO(()=>this.view.getFocusedElements()[0],o.identityProvider),this.selection=new qO(()=>this.view.getSelectedElements()[0],o.identityProvider),this.anchor=new qO(()=>this.view.getAnchorElement(),o.identityProvider),this.view=new Fxe(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...mte(()=>this.model,o),tree:this,stickyScrollProvider:zi(()=>this.stickyScrollController,"stickyScrollProvider")}),this.setupModel(this.model),o.keyboardSupport!==!1){const c=H.chain(this.view.onKeyDown,d=>d.filter(h=>!Gd(h.target)).map(h=>new Pt(h)));H.chain(c,d=>d.filter(h=>h.keyCode===E.LeftArrow))(this.onLeftArrow,this,this.disposables),H.chain(c,d=>d.filter(h=>h.keyCode===E.RightArrow))(this.onRightArrow,this,this.disposables),H.chain(c,d=>d.filter(h=>h.keyCode===E.Space))(this.onSpace,this,this.disposables)}if((o.findWidgetEnabled??!0)&&o.keyboardNavigationLabelProvider&&o.contextViewProvider){const c=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new Nxe(this,r,o.contextViewProvider,c),this.focusNavigationFilter=d=>this.findController.shouldAllowFocus(d),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType,this.disposables.add(this.onDidSpliceModelRelay.event(()=>{!this.findController.isOpened()||this.findController.pattern.length===0||(this.refilter(),this.findController.render())}))}else this.onDidChangeFindMode=H.None,this.onDidChangeFindMatchType=H.None;o.enableStickyScroll&&(this.stickyScrollController=new wU(this,this.model,this.view,this.renderers,this.treeDelegate,o),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=ic(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides==="always")}static{zi(this,"AbstractTree")}view;renderers;model;treeDelegate;focus;selection;anchor;eventBufferer=new a5;findController;onDidChangeFindOpenState=H.None;onDidChangeStickyScrollFocused=H.None;focusNavigationFilter;stickyScrollController;styleElement;disposables=new te;get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseClick(){return H.map(this.view.onMouseClick,Zm)}get onMouseDblClick(){return H.filter(H.map(this.view.onMouseDblClick,Zm),e=>e.target!==Lw.Filter)}get onMouseOver(){return H.map(this.view.onMouseOver,Zm)}get onMouseOut(){return H.map(this.view.onMouseOut,Zm)}get onContextMenu(){return H.any(H.filter(H.map(this.view.onContextMenu,bte),e=>!e.isStickyScroll),this.stickyScrollController?.onContextMenu??H.None)}get onTap(){return H.map(this.view.onTap,Zm)}get onPointer(){return H.map(this.view.onPointer,Zm)}get onKeyDown(){return this.view.onKeyDown}get onKeyUp(){return this.view.onKeyUp}get onKeyPress(){return this.view.onKeyPress}get onDidFocus(){return this.view.onDidFocus}get onDidBlur(){return this.view.onDidBlur}onDidSwapModel=this.disposables.add(new x);onDidChangeModelRelay=this.disposables.add(new Nl);onDidSpliceModelRelay=this.disposables.add(new Nl);onDidChangeCollapseStateRelay=this.disposables.add(new Nl);onDidChangeRenderNodeCountRelay=this.disposables.add(new Nl);onDidChangeActiveNodesRelay=this.disposables.add(new Nl);get onDidChangeModel(){return H.any(this.onDidChangeModelRelay.event,this.onDidSwapModel.event)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}_onWillRefilter=new x;onWillRefilter=this._onWillRefilter.event;get findMode(){return this.findController?.mode??0}set findMode(e){this.findController&&(this.findController.mode=e)}onDidChangeFindMode;get findMatchType(){return this.findController?.matchType??0}set findMatchType(e){this.findController&&(this.findController.matchType=e)}onDidChangeFindMatchType;get onDidChangeFindPattern(){return this.findController?this.findController.onDidChangePattern:H.None}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}_onDidUpdateOptions=new x;onDidUpdateOptions=this._onDidUpdateOptions.event;get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options={...this._options,...e};for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(this._options),this.findController?.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides==="always")}get options(){return this._options}updateStickyScroll(e){!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new wU(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=H.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),this.stickyScrollController?.updateOptions(e)}updateWidth(e){const t=this.model.getListIndex(e);t!==-1&&this.view.updateWidth(t)}getHTMLElement(){return this.view.getHTMLElement()}get contentHeight(){return this.view.contentHeight}get contentWidth(){return this.view.contentWidth}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.view.onDidChangeContentWidth}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollLeft(){return this.view.scrollLeft}set scrollLeft(e){this.view.scrollLeft=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleElement(){let e=this.view.firstVisibleIndex;return this.stickyScrollController&&(e+=this.stickyScrollController.count),e<0||e>=this.view.length?void 0:this.view.element(e).element}get lastVisibleElement(){const e=this.view.lastVisibleIndex;return this.view.element(e).element}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}get selectionSize(){return this.selection.getNodes().length}domFocus(){this.stickyScrollController?.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}isDOMFocused(){return dh(this.getHTMLElement())}layout(e,t){this.view.layout(e,t),Gc(t)&&this.findController?.layout(t)}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`));const s=e.treeStickyScrollBackground??e.listBackground;s&&(n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${s}; }`),n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${s}; }`)),e.treeStickyScrollBorder&&n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const o=$d(e.listFocusAndSelectionOutline,$d(e.listSelectionOutline,e.listFocusOutline??""));o&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${o}; outline-offset: -1px;}`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}expandAll(){this.model.setCollapsed(this.model.rootRef,!1,!0)}collapseAll(){this.model.setCollapsed(this.model.rootRef,!0,!0)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}expandTo(e){this.model.expandTo(e)}triggerTypeNavigation(){this.view.triggerTypeNavigation()}openFind(){this.findController?.open()}closeFind(){this.findController?.close()}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setAnchor(e){if(typeof e>"u")return this.view.setAnchor(void 0);this.eventBufferer.bufferEvents(()=>{const t=this.model.getNode(e);this.anchor.set([t]);const n=this.model.getListIndex(e);n>-1&&this.view.setAnchor(n,!0)})}getAnchor(){return this.anchor.get().at(0)}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{const n=e.map(o=>this.model.getNode(o));this.selection.set(n,t);const s=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setSelection(s,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{const n=e.map(o=>this.model.getNode(o));this.focus.set(n,t);const s=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setFocus(s,t,!0)})}focusNext(e=1,t=!1,n,s=Vh(n)&&n.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,n,s)}focusPrevious(e=1,t=!1,n,s=Vh(n)&&n.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,n,s)}focusNextPage(e,t=Vh(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=Vh(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>this.stickyScrollController?.height??0)}focusLast(e,t=Vh(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(e,t)}focusFirst(e,t=Vh(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}getStickyScrollFocus(){const e=this.stickyScrollController?.getFocus();return e!==void 0?[e]:[]}getFocusedPart(){return this.stickyScrollController?.focusedLast()?1:0}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);if(n!==-1)if(!this.stickyScrollController)this.view.reveal(n,t);else{const s=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(n,t,s)}}getRelativeTop(e){const t=this.model.getListIndex(e);if(t===-1)return null;const n=this.stickyScrollController?.getNode(this.getNode(e));return this.view.getRelativeTop(t,n?.position??this.stickyScrollController?.height)}getViewState(e=this.options.identityProvider){if(!e)throw new Uo(this._user,"Can't get tree view state without an identity provider");const t=zi(r=>e.getId(r).toString(),"getId"),n=n0.empty(this.scrollTop);for(const r of this.getFocus())n.focus.add(t(r));for(const r of this.getSelection())n.selection.add(t(r));const s=this.model.getNode(),o=[s];for(;o.length>0;){const r=o.shift();r!==s&&r.collapsible&&(n.expanded[t(r.element)]=r.collapsed?0:1),o.push(...r.children)}return n}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n);if(!this.model.setCollapsed(s,!0)){const r=this.model.getParentNodeLocation(s);if(!r)return;const a=this.model.getListIndex(r);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n);if(!this.model.setCollapsed(s,!1)){if(!n.children.some(l=>l.visible))return;const[r]=this.view.getFocus(),a=r+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n),o=e.browserEvent.altKey;this.model.setCollapsed(s,void 0,o)}modelDisposables=new te;setupModel(e){this.modelDisposables.clear(),this.modelDisposables.add(e.onDidSpliceRenderedNodes(({start:o,deleteCount:r,elements:a})=>this.view.splice(o,r,a)));const t=H.forEach(e.onDidSpliceModel,o=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(o),this.selection.onDidModelSplice(o)})},this.modelDisposables);t(()=>null,null,this.modelDisposables);const n=this.modelDisposables.add(new x),s=this.modelDisposables.add(new $y(0));this.modelDisposables.add(H.any(t,this.focus.onDidChange,this.selection.onDidChange)(()=>{s.trigger(()=>{const o=new Set;for(const r of this.focus.getNodes())o.add(r);for(const r of this.selection.getNodes())o.add(r);n.fire([...o.values()])})})),this.onDidChangeActiveNodesRelay.input=n.event,this.onDidChangeModelRelay.input=H.signal(e.onDidSpliceModel),this.onDidChangeCollapseStateRelay.input=e.onDidChangeCollapseState,this.onDidChangeRenderNodeCountRelay.input=e.onDidChangeRenderNodeCount}setModel(e){const t=this.model;this.model=e,this.setupModel(e),this.renderers.forEach(n=>n.setModel(e)),this.stickyScrollController?.setModel(e),this.focus.set([]),this.selection.set([]),this.anchor.set([]),this.view.splice(0,t.getListRenderCount(t.rootRef)),this.model.refilter(),this.onDidSwapModel.fire()}getModel(){return this.model}navigate(e){return new Vxe(this.view,this.model,e)}dispose(){ii(this.disposables),this.stickyScrollController?.dispose(),this.view.dispose(),this.modelDisposables.dispose()}}class Vxe{constructor(e,t,n){this.view=e,this.model=t,n?this.index=this.model.getListIndex(n):this.index=-1}static{zi(this,"TreeNavigator")}index;current(){return this.index<0||this.index>=this.view.length?null:this.view.element(this.index).element}previous(){return this.index--,this.current()}next(){return this.index++,this.current()}first(){return this.index=0,this.current()}last(){return this.index=this.view.length-1,this.current()}}var Wxe=Object.defineProperty,YO=(i,e)=>Wxe(i,"name",{value:e,configurable:!0});class P3{constructor(e,t={}){this.user=e,this.model=new yxe(e,null,t),this.onDidSpliceModel=this.model.onDidSpliceModel,this.onDidSpliceRenderedNodes=this.model.onDidSpliceRenderedNodes,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,t.sorter&&(this.sorter={compare(n,s){return t.sorter.compare(n.element,s.element)}}),this.identityProvider=t.identityProvider}static{YO(this,"ObjectTreeModel")}rootRef=null;model;nodes=new Map;nodesByIdentity=new Map;identityProvider;sorter;onDidSpliceModel;onDidSpliceRenderedNodes;onDidChangeCollapseState;onDidChangeRenderNodeCount;get size(){return this.nodes.size}setChildren(e,t=Zt.empty(),n={}){const s=this.getElementLocation(e);this._setChildren(s,this.preserveCollapseState(t),n)}_setChildren(e,t=Zt.empty(),n){const s=new Set,o=new Set,r=YO(l=>{if(l.element===null)return;const c=l;if(s.add(c.element),this.nodes.set(c.element,c),this.identityProvider){const d=this.identityProvider.getId(c.element).toString();o.add(d),this.nodesByIdentity.set(d,c)}n.onDidCreateNode?.(c)},"onDidCreateNode"),a=YO(l=>{if(l.element===null)return;const c=l;if(s.has(c.element)||this.nodes.delete(c.element),this.identityProvider){const d=this.identityProvider.getId(c.element).toString();o.has(d)||this.nodesByIdentity.delete(d)}n.onDidDeleteNode?.(c)},"onDidDeleteNode");this.model.splice([...e,0],Number.MAX_VALUE,t,{...n,onDidCreateNode:r,onDidDeleteNode:a})}preserveCollapseState(e=Zt.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),Zt.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const r=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(r)}if(!n){let r;return typeof t.collapsed>"u"?r=void 0:t.collapsed===Dl.Collapsed||t.collapsed===Dl.PreserveOrCollapsed?r=!0:t.collapsed===Dl.Expanded||t.collapsed===Dl.PreserveOrExpanded?r=!1:r=!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:r}}const s=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible;let o;return typeof t.collapsed>"u"||t.collapsed===Dl.PreserveOrCollapsed||t.collapsed===Dl.PreserveOrExpanded?o=n.collapsed:t.collapsed===Dl.Collapsed?o=!0:t.collapsed===Dl.Expanded?o=!1:o=!!t.collapsed,{...t,collapsible:s,collapsed:o,children:this.preserveCollapseState(t.children)}})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}resort(e=null,t=!0){if(!this.sorter)return;const n=this.getElementLocation(e),s=this.model.getNode(n);this._setChildren(n,this.resortChildren(s,t),{})}resortChildren(e,t,n=!0){let s=[...e.children];return(t||n)&&(s=s.sort(this.sorter.compare.bind(this.sorter))),Zt.map(s,o=>({element:o.element,collapsible:o.collapsible,collapsed:o.collapsed,children:this.resortChildren(o,t,!1)}))}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}getLastElementAncestor(e=null){const t=this.getElementLocation(e);return this.model.getLastElementAncestor(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const s=this.getElementLocation(e);return this.model.setCollapsed(s,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Uo(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Uo(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Uo(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),s=this.model.getParentNodeLocation(n);return this.model.getNode(s).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Uo(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}var Hxe=Object.defineProperty,il=(i,e)=>Hxe(i,"name",{value:e,configurable:!0});function o0(i){const e=[i.element],t=i.incompressible||!1;return{element:{elements:e,incompressible:t},children:Zt.map(Zt.from(i.children),o0),collapsible:i.collapsible,collapsed:i.collapsed}}il(o0,"noCompress");function r0(i){const e=[i.element],t=i.incompressible||!1;let n,s;for(;[s,n]=Zt.consume(Zt.from(i.children),2),!(s.length!==1||s[0].incompressible);)i=s[0],e.push(i.element);return{element:{elements:e,incompressible:t},children:Zt.map(Zt.concat(s,n),r0),collapsible:i.collapsible,collapsed:i.collapsed}}il(r0,"compress");function Vx(i,e=0){let t;return e<i.element.elements.length-1?t=[Vx(i,e+1)]:t=Zt.map(Zt.from(i.children),n=>Vx(n,0)),e===0&&i.element.incompressible?{element:i.element.elements[e],children:t,incompressible:!0,collapsible:i.collapsible,collapsed:i.collapsed}:{element:i.element.elements[e],children:t,collapsible:i.collapsible,collapsed:i.collapsed}}il(Vx,"_decompress");function ZF(i){return Vx(i,0)}il(ZF,"decompress");function R3(i,e,t){return i.element===e?{...i,children:t}:{...i,children:Zt.map(Zt.from(i.children),n=>R3(n,e,t))}}il(R3,"splice");const Uxe=il(i=>({getId(e){return e.elements.map(t=>i.getId(t).toString()).join("\0")}}),"wrapIdentityProvider");class zxe{constructor(e,t={}){this.user=e,this.model=new P3(e,t),this.enabled=typeof t.compressionEnabled>"u"?!0:t.compressionEnabled,this.identityProvider=t.identityProvider}static{il(this,"CompressedObjectTreeModel")}rootRef=null;get onDidSpliceRenderedNodes(){return this.model.onDidSpliceRenderedNodes}get onDidSpliceModel(){return this.model.onDidSpliceModel}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}model;nodes=new Map;enabled;identityProvider;get size(){return this.nodes.size}setChildren(e,t=Zt.empty(),n){const s=n.diffIdentityProvider&&Uxe(n.diffIdentityProvider);if(e===null){const p=Zt.map(t,this.enabled?r0:o0);this._setChildren(null,p,{diffIdentityProvider:s,diffDepth:1/0});return}const o=this.nodes.get(e);if(!o)throw new Uo(this.user,"Unknown compressed tree node");const r=this.model.getNode(o),a=this.model.getParentNodeLocation(o),l=this.model.getNode(a),c=ZF(r),d=R3(c,e,t),h=(this.enabled?r0:o0)(d),u=n.diffIdentityProvider?(p,m)=>n.diffIdentityProvider.getId(p)===n.diffIdentityProvider.getId(m):void 0;if(ks(h.element.elements,r.element.elements,u)){this._setChildren(o,h.children||Zt.empty(),{diffIdentityProvider:s,diffDepth:1});return}const f=l.children.map(p=>p===r?h:p);this._setChildren(l.element,f,{diffIdentityProvider:s,diffDepth:r.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,s=Zt.map(n,ZF),o=Zt.map(s,e?r0:o0);this._setChildren(null,o,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const s=new Set,o=il(a=>{for(const l of a.element.elements)s.add(l),this.nodes.set(l,a.element)},"onDidCreateNode"),r=il(a=>{for(const l of a.element.elements)s.has(l)||this.nodes.delete(l)},"onDidDeleteNode");this.model.setChildren(e,t,{...n,onDidCreateNode:o,onDidDeleteNode:r})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}getLastElementAncestor(e){const t=typeof e>"u"?void 0:this.getCompressedNode(e);return this.model.getLastElementAncestor(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const s=this.getCompressedNode(e);return this.model.setCollapsed(s,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}resort(e=null,t=!0){const n=this.getCompressedNode(e);this.model.resort(n,t)}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Uo(this.user,`Tree element not found: ${e}`);return t}}const $xe=il(i=>i[i.length-1],"DefaultElementMapper");class O3{constructor(e,t){this.unwrapper=e,this.node=t}static{il(this,"CompressedTreeNodeWrapper")}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new O3(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}function wte(i,e){return{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(i(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(i(t),n)}}}}il(wte,"mapOptions");class Gxe{static{il(this,"CompressibleObjectTreeModel")}rootRef=null;get onDidSpliceModel(){return H.map(this.model.onDidSpliceModel,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidSpliceRenderedNodes(){return H.map(this.model.onDidSpliceRenderedNodes,({start:e,deleteCount:t,elements:n})=>({start:e,deleteCount:t,elements:n.map(s=>this.nodeMapper.map(s))}))}get onDidChangeCollapseState(){return H.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return H.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}elementMapper;nodeMapper;model;constructor(e,t={}){this.elementMapper=t.elementMapper||$xe;const n=il(s=>this.elementMapper(s.elements),"compressedNodeUnwrapper");this.nodeMapper=new x3(s=>new O3(n,s)),this.model=new zxe(e,wte(n,t))}setChildren(e,t=Zt.empty(),n={}){this.model.setChildren(e,t,n)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}getLastElementAncestor(e){const t=this.model.getLastElementAncestor(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}resort(e=null,t=!0){return this.model.resort(e,t)}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var Cte=Object.defineProperty,Kxe=Object.getOwnPropertyDescriptor,cy=(i,e)=>Cte(i,"name",{value:e,configurable:!0}),jxe=(i,e,t,n)=>{for(var s=Kxe(e,t),o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=r(e,t,s)||s);return s&&Cte(e,t,s),s};class M3 extends vte{constructor(e,t,n,s,o={}){super(e,t,n,s,o),this.user=e}static{cy(this,"ObjectTree")}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=Zt.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}updateElementHeight(e,t){const n=this.model.getListIndex(e);n!==-1&&this.view.updateElementHeight(n,t)}resort(e,t=!0){this.model.resort(e,t)}hasElement(e){return this.model.has(e)}createModel(e,t){return new P3(e,t)}}class yte{constructor(e,t,n){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=n,this.templateId=n.templateId,n.onDidChangeTwistieState&&(this.onDidChangeTwistieState=n.onDidChangeTwistieState)}static{cy(this,"CompressibleRenderer")}templateId;onDidChangeTwistieState;get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){let o=this.stickyScrollDelegate.getCompressedNode(e);o||(o=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),o.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,s)):(n.compressedTreeNode=o,this.renderer.renderCompressedElements(o,t,n.data,s))}disposeElement(e,t,n,s){n.compressedTreeNode?this.renderer.disposeCompressedElements?.(n.compressedTreeNode,t,n.data,s):this.renderer.disposeElement?.(e,t,n.data,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}jxe([Ie],yte.prototype,"compressedTreeNodeProvider");class qxe{constructor(e){this.modelProvider=e}static{cy(this,"CompressibleStickyScrollDelegate")}compressedStickyNodes=new Map;getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,n){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let s=0;s<e.length;s++){const o=e[s],r=o.position+o.height;if(s+1<e.length&&r+e[s+1].height>n||s>=t-1&&t<e.length){const l=e.slice(0,s),c=e.slice(s),d=this.compressStickyNodes(c);return[...l,d]}}return e}compressStickyNodes(e){if(e.length===0)throw new Error("Can't compress empty sticky nodes");const t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];const n=[];for(let c=0;c<e.length;c++){const d=e[c],h=t.getCompressedTreeNode(d.node.element);if(h.element){if(c!==0&&h.element.incompressible)break;n.push(...h.element.elements)}}if(n.length<2)return e[0];const s=e[e.length-1],o={elements:n,incompressible:!1},r={...s.node,children:[],element:o},a=new Proxy(e[0].node,{}),l={node:a,startIndex:e[0].startIndex,endIndex:s.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(a,r),l}}function Ste(i,e){return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=i().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}}}cy(Ste,"asObjectTreeOptions");class Ete extends M3{static{cy(this,"CompressibleObjectTree")}constructor(e,t,n,s,o={}){const r=cy(()=>this,"compressedTreeNodeProvider"),a=new qxe(()=>this.model),l=s.map(c=>new yte(r,a,c));super(e,t,n,l,{...Ste(r,o),stickyScrollDelegate:a})}setChildren(e,t=Zt.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t){return new Gxe(e,t)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var Yxe=Object.defineProperty,os=(i,e)=>Yxe(i,"name",{value:e,configurable:!0});function ZT(i){return{...i,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}os(ZT,"createAsyncDataTreeNode");function Wx(i,e){return e.parent?e.parent===i?!0:Wx(i,e.parent):!1}os(Wx,"isAncestor");function Lte(i,e){return i===e||Wx(i,e)||Wx(e,i)}os(Lte,"intersects");class B3{constructor(e){this.node=e}static{os(this,"AsyncDataTreeNodeWrapper")}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new B3(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class Zxe{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.templateId=e.templateId}static{os(this,"AsyncDataTreeRenderer")}templateId;renderedNodes=new Map;renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...Ne.asClassNameArray(ee.treeItemLoading)),!0):(t.classList.remove(...Ne.asClassNameArray(ee.treeItemLoading)),!1)}disposeElement(e,t,n,s){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,n.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function XF(i){return{browserEvent:i.browserEvent,elements:i.elements.map(e=>e.element)}}os(XF,"asTreeEvent");function L1(i){return{browserEvent:i.browserEvent,element:i.element&&i.element.element,target:i.target}}os(L1,"asTreeMouseEvent");function Dte(i){return{browserEvent:i.browserEvent,element:i.element&&i.element.element,anchor:i.anchor,isStickyScroll:i.isStickyScroll}}os(Dte,"asTreeContextMenuEvent");class Xxe extends pD{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}static{os(this,"AsyncDataTreeElementsDragAndDropData")}set context(e){this.data.context=e}get context(){return this.data.context}}function XT(i){return i instanceof pD?new Xxe(i):i}os(XT,"asAsyncDataTreeDragAndDropData");class Qxe{constructor(e){this.dnd=e}static{os(this,"AsyncDataTreeNodeListDragAndDrop")}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart?.(XT(e),t)}onDragOver(e,t,n,s,o,r=!0){return this.dnd.onDragOver(XT(e),t&&t.element,n,s,o)}drop(e,t,n,s,o){this.dnd.drop(XT(e),t&&t.element,n,s,o)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.dnd.dispose()}}function F3(i){return i&&{...i,collapseByDefault:!0,identityProvider:i.identityProvider&&{getId(e){return i.identityProvider.getId(e.element)}},dnd:i.dnd&&new Qxe(i.dnd),multipleSelectionController:i.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return i.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return i.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:i.accessibilityProvider&&{...i.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:i.accessibilityProvider.getRole?e=>i.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:i.accessibilityProvider.isChecked?e=>!!i.accessibilityProvider?.isChecked(e.element):void 0,getAriaLabel(e){return i.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return i.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:i.accessibilityProvider.getWidgetRole?()=>i.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:i.accessibilityProvider.getAriaLevel&&(e=>i.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:i.accessibilityProvider.getActiveDescendantId&&(e=>i.accessibilityProvider.getActiveDescendantId(e.element))},filter:i.filter&&{filter(e,t){return i.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:i.keyboardNavigationLabelProvider&&{...i.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return i.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof i.expandOnlyOnTwistieClick>"u"?void 0:typeof i.expandOnlyOnTwistieClick!="function"?i.expandOnlyOnTwistieClick:e=>i.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:os(e=>e.hasChildren&&e.stale?tn.Visible:typeof i.defaultFindVisibility=="number"?i.defaultFindVisibility:typeof i.defaultFindVisibility>"u"?tn.Recurse:i.defaultFindVisibility(e.element),"defaultFindVisibility")}}os(F3,"asObjectTreeOptions");function Hx(i,e){e(i),i.children.forEach(t=>Hx(t,e))}os(Hx,"dfs");class Ite{constructor(e,t,n,s,o,r={}){this.user=e,this.dataSource=o,this.identityProvider=r.identityProvider,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.sorter=r.sorter,this.getDefaultCollapseState=a=>r.collapseByDefault?r.collapseByDefault(a)?Dl.PreserveOrCollapsed:Dl.PreserveOrExpanded:void 0,this.tree=this.createTree(e,t,n,s,r),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=ZT({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}static{os(this,"AsyncDataTree")}tree;root;nodes=new Map;sorter;getDefaultCollapseState;subTreeRefreshPromises=new Map;refreshPromises=new Map;identityProvider;autoExpandSingleChildren;_onDidRender=new x;_onDidChangeNodeSlowState=new x;nodeMapper=new x3(e=>new B3(e));disposables=new te;get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return H.map(this.tree.onDidChangeFocus,XF)}get onDidChangeSelection(){return H.map(this.tree.onDidChangeSelection,XF)}get onKeyDown(){return this.tree.onKeyDown}get onMouseClick(){return H.map(this.tree.onMouseClick,L1)}get onMouseDblClick(){return H.map(this.tree.onMouseDblClick,L1)}get onContextMenu(){return H.map(this.tree.onContextMenu,Dte)}get onTap(){return H.map(this.tree.onTap,L1)}get onPointer(){return H.map(this.tree.onPointer,L1)}get onDidFocus(){return this.tree.onDidFocus}get onDidBlur(){return this.tree.onDidBlur}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidUpdateOptions(){return this.tree.onDidUpdateOptions}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get findMode(){return this.tree.findMode}set findMode(e){this.tree.findMode=e}onDidChangeFindMode;get findMatchType(){return this.tree.findMatchType}set findMatchType(e){this.tree.findMatchType=e}onDidChangeFindMatchType;get expandOnlyOnTwistieClick(){if(typeof this.tree.expandOnlyOnTwistieClick=="boolean")return this.tree.expandOnlyOnTwistieClick;const e=this.tree.expandOnlyOnTwistieClick;return t=>e(this.nodes.get(t===this.root.element?null:t)||null)}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,n,s,o){const r=new k3(n),a=s.map(c=>new Zxe(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=F3(o)||{};return new M3(e,t,r,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}get options(){return this.tree.options}getHTMLElement(){return this.tree.getHTMLElement()}get contentHeight(){return this.tree.contentHeight}get contentWidth(){return this.tree.contentWidth}get onDidChangeContentHeight(){return this.tree.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.tree.onDidChangeContentWidth}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollLeft(){return this.tree.scrollLeft}set scrollLeft(e){this.tree.scrollLeft=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}get lastVisibleElement(){return this.tree.lastVisibleElement.element}get ariaLabel(){return this.tree.ariaLabel}set ariaLabel(e){this.tree.ariaLabel=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach(s=>s.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}async updateChildren(e=this.root.element,t=!0,n=!1,s){await this._updateChildren(e,t,n,void 0,s)}async _updateChildren(e=this.root.element,t=!0,n=!1,s,o){if(typeof this.root.element>"u")throw new Uo(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await H.toPromise(this._onDidRender.event));const r=this.getDataNode(e);if(await this.refreshAndRenderNode(r,t,s,o),n)try{this.tree.rerender(r)}catch{}}resort(e=this.root.element,t=!0){this.tree.resort(this.getDataNode(e),t)}hasNode(e){return e===this.root.element||this.nodes.has(e)}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}updateElementHeight(e,t){const n=this.getDataNode(e);this.tree.updateElementHeight(n,t)}updateWidth(e){const t=this.getDataNode(e);this.tree.updateWidth(t)}getNode(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}async expand(e,t=!1){if(typeof this.root.element>"u")throw new Uo(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await H.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(await this.root.refreshPromise,await H.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const s=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(await this.root.refreshPromise,await H.toPromise(this._onDidRender.event)),s}toggleCollapsed(e,t=!1){return this.tree.toggleCollapsed(this.getDataNode(e),t)}expandAll(){this.tree.expandAll()}async expandTo(e){if(!this.dataSource.getParent)throw new Error("Can't expand to element without getParent method");const t=[];for(;!this.hasNode(e);)e=this.dataSource.getParent(e),e!==this.root.element&&t.push(e);for(const n of Zt.reverse(t))await this.expand(n);this.tree.expandTo(this.getDataNode(e))}collapseAll(){this.tree.collapseAll()}isCollapsible(e){return this.tree.isCollapsible(this.getDataNode(e))}isCollapsed(e){return this.tree.isCollapsed(this.getDataNode(e))}triggerTypeNavigation(){this.tree.triggerTypeNavigation()}openFind(){this.tree.openFind()}closeFind(){this.tree.closeFind()}refilter(){this.tree.refilter()}setAnchor(e){this.tree.setAnchor(typeof e>"u"?void 0:this.getDataNode(e))}getAnchor(){return this.tree.getAnchor()?.element}setSelection(e,t){const n=e.map(s=>this.getDataNode(s));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(s=>this.getDataNode(s));this.tree.setFocus(n,t)}focusNext(e=1,t=!1,n){this.tree.focusNext(e,t,n)}focusPrevious(e=1,t=!1,n){this.tree.focusPrevious(e,t,n)}focusNextPage(e){return this.tree.focusNextPage(e)}focusPreviousPage(e){return this.tree.focusPreviousPage(e)}focusLast(e){this.tree.focusLast(e)}focusFirst(e){this.tree.focusFirst(e)}getFocus(){return this.tree.getFocus().map(t=>t.element)}getStickyScrollFocus(){return this.tree.getStickyScrollFocus().map(t=>t.element)}getFocusedPart(){return this.tree.getFocusedPart()}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getRelativeTop(e){return this.tree.getRelativeTop(this.getDataNode(e))}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Uo(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,n,s){await this.refreshNode(e,t,n),!this.disposables.isDisposed&&this.render(e,n,s)}async refreshNode(e,t,n){let s;if(this.subTreeRefreshPromises.forEach((o,r)=>{!s&&Lte(r,e)&&(s=o.then(()=>this.refreshNode(e,t,n)))}),s)return s;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,n);return}return this.doRefreshSubTree(e,t,n)}async doRefreshSubTree(e,t,n){let s;e.refreshPromise=new Promise(o=>s=o),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const o=await this.doRefreshNode(e,t,n);e.stale=!1,await Ka.settled(o.map(r=>this.doRefreshSubTree(r,t,n)))}finally{s()}}async doRefreshNode(e,t,n){e.hasChildren=!!this.dataSource.hasChildren(e.element);let s;if(!e.hasChildren)s=Promise.resolve(Zt.empty());else{const o=this.doGetChildren(e);if(TM(o))s=Promise.resolve(o);else{const r=xa(800);r.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),s=o.finally(()=>r.cancel())}}try{const o=await s;return this.setChildren(e,o,t,n)}catch(o){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),lf(o))return[];throw o}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const n=this.dataSource.getChildren(e.element);return TM(n)?this.processChildren(n):(t=UC(async()=>this.processChildren(await n)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Kt))}setChildren(e,t,n,s){const o=[...t];if(e.children.length===0&&o.length===0)return[];const r=new Map,a=new Map;for(const d of e.children)r.set(d.element,d),this.identityProvider&&a.set(d.id,{node:d,collapsed:this.tree.hasElement(d)&&this.tree.isCollapsed(d)});const l=[],c=o.map(d=>{const h=!!this.dataSource.hasChildren(d);if(!this.identityProvider){const m=ZT({element:d,parent:e,hasChildren:h,defaultCollapseState:this.getDefaultCollapseState(d)});return h&&m.defaultCollapseState===Dl.PreserveOrExpanded&&l.push(m),m}const u=this.identityProvider.getId(d).toString(),f=a.get(u);if(f){const m=f.node;return r.delete(m.element),this.nodes.delete(m.element),this.nodes.set(d,m),m.element=d,m.hasChildren=h,n?f.collapsed?(m.children.forEach(_=>Hx(_,w=>this.nodes.delete(w.element))),m.children.splice(0,m.children.length),m.stale=!0):l.push(m):h&&!f.collapsed&&l.push(m),m}const p=ZT({element:d,parent:e,id:u,hasChildren:h,defaultCollapseState:this.getDefaultCollapseState(d)});return s&&s.viewState.focus&&s.viewState.focus.indexOf(u)>-1&&s.focus.push(p),s&&s.viewState.selection&&s.viewState.selection.indexOf(u)>-1&&s.selection.push(p),(s&&s.viewState.expanded&&s.viewState.expanded.indexOf(u)>-1||h&&p.defaultCollapseState===Dl.PreserveOrExpanded)&&l.push(p),p});for(const d of r.values())Hx(d,h=>this.nodes.delete(h.element));for(const d of c)this.nodes.set(d.element,d);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].forceExpanded=!0,l.push(c[0])),l}render(e,t,n){const s=e.children.map(r=>this.asTreeElement(r,t)),o=n&&{...n,diffIdentityProvider:n.diffIdentityProvider&&{getId(r){return n.diffIdentityProvider.getId(r.element)}}};this.tree.setChildren(e===this.root?null:e,s,o),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:e.forceExpanded?(n=!1,e.forceExpanded=!1):n=e.defaultCollapseState,{element:e,children:e.hasChildren?Zt.map(e.children,s=>this.asTreeElement(s,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}getViewState(){if(!this.identityProvider)throw new Uo(this.user,"Can't get tree view state without an identity provider");const e=os(a=>this.identityProvider.getId(a).toString(),"getId"),t=this.getFocus().map(e),n=this.getSelection().map(e),s=[],o=this.tree.getNode(),r=[o];for(;r.length>0;){const a=r.pop();a!==o&&a.collapsible&&!a.collapsed&&s.push(e(a.element.element)),r.push(...a.children)}return{focus:t,selection:n,expanded:s,scrollTop:this.scrollTop}}dispose(){this.disposables.dispose(),this.tree.dispose()}}class V3{constructor(e){this.node=e}static{os(this,"CompressibleAsyncDataTreeNodeWrapper")}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new V3(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class Jxe{constructor(e,t,n,s){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=s,this.templateId=e.templateId}static{os(this,"CompressibleAsyncDataTreeRenderer")}templateId;renderedNodes=new Map;disposables=[];renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,s)}renderCompressedElements(e,t,n,s){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...Ne.asClassNameArray(ee.treeItemLoading)),!0):(t.classList.remove(...Ne.asClassNameArray(ee.treeItemLoading)),!1)}disposeElement(e,t,n,s){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,n.templateData,s)}disposeCompressedElements(e,t,n,s){this.renderer.disposeCompressedElements?.(this.compressibleNodeMapperProvider().map(e),t,n.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=ii(this.disposables)}}function Tte(i){const e=i&&F3(i);return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return i.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}}}}os(Tte,"asCompressibleObjectTreeOptions");class eke extends Ite{constructor(e,t,n,s,o,r,a={}){super(e,t,n,o,r,a),this.compressionDelegate=s,this.filter=a.filter}static{os(this,"CompressibleAsyncDataTree")}compressibleNodeMapper=new x3(e=>new V3(e));filter;createTree(e,t,n,s,o){const r=new k3(n),a=s.map(c=>new Jxe(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=Tte(o)||{};return new Ete(e,t,r,a,l)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}updateOptions(e={}){this.tree.updateOptions(e)}getViewState(){if(!this.identityProvider)throw new Uo(this.user,"Can't get tree view state without an identity provider");const e=os(a=>this.identityProvider.getId(a).toString(),"getId"),t=this.getFocus().map(e),n=this.getSelection().map(e),s=[],o=this.tree.getCompressedTreeNode(),r=[o];for(;r.length>0;){const a=r.pop();if(a!==o&&a.collapsible&&!a.collapsed)for(const l of a.element.elements)s.push(e(l.element));r.push(...a.children)}return{focus:t,selection:n,expanded:s,scrollTop:this.scrollTop}}render(e,t,n){if(!this.identityProvider)return super.render(e,t);const s=os(f=>this.identityProvider.getId(f).toString(),"getId"),o=os(f=>{const p=new Set;for(const m of f){const _=this.tree.getCompressedTreeNode(m===this.root?null:m);if(_.element)for(const w of _.element.elements)p.add(s(w.element))}return p},"getUncompressedIds"),r=o(this.tree.getSelection()),a=o(this.tree.getFocus());super.render(e,t,n);const l=this.getSelection();let c=!1;const d=this.getFocus();let h=!1;const u=os(f=>{const p=f.element;if(p)for(let m=0;m<p.elements.length;m++){const _=s(p.elements[m].element),w=p.elements[p.elements.length-1].element;r.has(_)&&l.indexOf(w)===-1&&(l.push(w),c=!0),a.has(_)&&d.indexOf(w)===-1&&(d.push(w),h=!0)}f.children.forEach(u)},"visit");u(this.tree.getCompressedTreeNode(e===this.root?null:e)),c&&this.setSelection(l),h&&this.setFocus(d)}processChildren(e){return this.filter&&(e=Zt.filter(e,t=>{const n=this.filter.filter(t,tn.Visible),s=Ate(n);if(s===tn.Recurse)throw new Error("Recursive tree visibility not supported in async data compressed trees");return s===tn.Visible})),super.processChildren(e)}}function Ate(i){return typeof i=="boolean"?i?tn.Visible:tn.Hidden:ZP(i)?ly(i.visibility):ly(i)}os(Ate,"getVisibility");var tke=Object.defineProperty,Gv=(i,e)=>tke(i,"name",{value:e,configurable:!0});class ike extends vte{constructor(e,t,n,s,o,r={}){super(e,t,n,s,r),this.user=e,this.dataSource=o,this.identityProvider=r.identityProvider}static{Gv(this,"DataTree")}input;identityProvider;nodesByIdentity=new Map;getInput(){return this.input}setInput(e,t){if(t&&!this.identityProvider)throw new Uo(this.user,"Can't restore tree view state without an identity provider");if(this.input=e,!e){this.nodesByIdentity.clear(),this.model.setChildren(null,Zt.empty());return}if(!t){this._refresh(e);return}const n=[],s=[],o=Gv(a=>{const l=this.identityProvider.getId(a).toString();return!t.expanded[l]},"isCollapsed"),r=Gv(a=>{const l=this.identityProvider.getId(a.element).toString();t.focus.has(l)&&n.push(a.element),t.selection.has(l)&&s.push(a.element)},"onDidCreateNode");this._refresh(e,o,r),this.setFocus(n),this.setSelection(s),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}updateChildren(e=this.input){if(typeof this.input>"u")throw new Uo(this.user,"Tree input not set");let t;this.identityProvider&&(t=Gv(n=>{const s=this.identityProvider.getId(n).toString(),o=this.nodesByIdentity.get(s);if(o)return o.collapsed},"isCollapsed")),this._refresh(e,t)}resort(e=this.input,t=!0){this.model.resort(e===this.input?null:e,t)}refresh(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}_refresh(e,t,n){let s;if(this.identityProvider){const o=new Set,r=n;n=Gv(a=>{const l=this.identityProvider.getId(a.element).toString();o.add(l),this.nodesByIdentity.set(l,a),r?.(a)},"onDidCreateNode"),s=Gv(a=>{const l=this.identityProvider.getId(a.element).toString();o.has(l)||this.nodesByIdentity.delete(l)},"onDidDeleteNode")}this.model.setChildren(e===this.input?null:e,this.iterate(e,t).elements,{onDidCreateNode:n,onDidDeleteNode:s})}iterate(e,t){const n=[...this.dataSource.getChildren(e)];return{elements:Zt.map(n,o=>{const{elements:r,size:a}=this.iterate(o,t),l=this.dataSource.hasChildren?this.dataSource.hasChildren(o):void 0,c=a===0?void 0:t&&t(o);return{element:o,children:r,collapsible:l,collapsed:c}}),size:n.length}}createModel(e,t){return new P3(e,t)}}const nke=new ie("isMac",Ue,g("isMac","Whether the operating system is macOS")),ske=new ie("isLinux",Gi,g("isLinux","Whether the operating system is Linux")),oke=new ie("isWindows",Nt,g("isWindows","Whether the operating system is Windows")),W3=new ie("isWeb",ui,g("isWeb","Whether the platform is a web browser")),dy=new ie("isMacNative",Ue&&!ui,g("isMacNative","Whether the operating system is macOS on a non-browser platform")),xte=new ie("isIOS",ol,g("isIOS","Whether the operating system is iOS")),rke=new ie("isMobile",EG,g("isMobile","Whether the platform is a mobile web browser")),QF=new ie("isDevelopment",!1,!0),ake=new ie("productQualityType","",g("productQualityType","Quality type of VS Code")),kte="inputFocus",lke=new ie(kte,!1,g("inputFocus","Whether keyboard focus is inside an input box")),XP=De("contextViewService"),Hi=De("contextMenuService");var cke=Object.defineProperty,Jg=(i,e)=>cke(i,"name",{value:e,configurable:!0});const OE=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,dC=/(&amp;)?(&amp;)([^\s&])/g;var sp=(i=>(i[i.Right=0]="Right",i[i.Left=1]="Left",i))(sp||{}),hC=(i=>(i[i.Above=0]="Above",i[i.Below=1]="Below",i))(hC||{});class uC extends td{constructor(e,t,n,s){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const o=document.createElement("div");o.classList.add("monaco-menu"),o.setAttribute("role","presentation"),super(o,{orientation:Ns.VERTICAL,actionViewItemProvider:Jg(c=>this.doGetActionViewItem(c,n,r),"actionViewItemProvider"),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[E.Enter,...Ue||Gi?[E.Space]:[]],keyDown:!0}}),this.menuStyles=s,this.menuElement=o,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,s),this._register(Gn.addTarget(o)),this._register(F(o,Q.KEY_DOWN,c=>{new Pt(c).equals(E.Tab)&&c.preventDefault()})),n.enableMnemonics&&this._register(F(o,Q.KEY_DOWN,c=>{const d=c.key.toLocaleLowerCase();if(this.mnemonics.has(d)){Fe.stop(c,!0);const h=this.mnemonics.get(d);if(h.length===1&&(h[0]instanceof ZO&&h[0].container&&this.focusItemByElement(h[0].container),h[0].onClick(c)),h.length>1){const u=h.shift();u&&u.container&&(this.focusItemByElement(u.container),h.push(u)),this.mnemonics.set(d,h)}}})),Gi&&this._register(F(o,Q.KEY_DOWN,c=>{const d=new Pt(c);d.equals(E.Home)||d.equals(E.PageUp)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Fe.stop(c,!0)):(d.equals(E.End)||d.equals(E.PageDown))&&(this.focusedItem=0,this.focusPrevious(),Fe.stop(c,!0))})),this._register(F(this.domNode,Q.MOUSE_OUT,c=>{const d=c.relatedTarget;As(d,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),c.stopPropagation())})),this._register(F(this.actionsList,Q.MOUSE_OVER,c=>{let d=c.target;if(!(!d||!As(d,this.actionsList)||d===this.actionsList)){for(;d.parentElement!==this.actionsList&&d.parentElement!==null;)d=d.parentElement;if(d.classList.contains("action-item")){const h=this.focusedItem;this.setFocusedItem(d),h!==this.focusedItem&&this.updateFocus()}}})),this._register(Gn.addTarget(this.actionsList)),this._register(F(this.actionsList,wt.Tap,c=>{let d=c.initialTarget;if(!(!d||!As(d,this.actionsList)||d===this.actionsList)){for(;d.parentElement!==this.actionsList&&d.parentElement!==null;)d=d.parentElement;if(d.classList.contains("action-item")){const h=this.focusedItem;this.setFocusedItem(d),h!==this.focusedItem&&this.updateFocus()}}}));const r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new hD(o,{alwaysConsumeMouseWheel:!0,horizontal:Bi.Hidden,vertical:Bi.Visible,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,s),this._register(F(o,wt.Change,c=>{Fe.stop(c,!0);const d=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:d-c.translationY})})),this._register(F(a,Q.MOUSE_UP,c=>{c.preventDefault()}));const l=ve(e);o.style.maxHeight=`${Math.max(10,l.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((c,d)=>n.submenuIds?.has(c.id)?(console.warn(`Found submenu cycle: ${c.id}`),!1):!(c instanceof zt&&(d===t.length-1||d===0||t[d-1]instanceof zt))),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(c=>!(c instanceof CU)).forEach((c,d,h)=>{c.updatePositionInSet(d+1,h.length)})}static{Jg(this,"Menu")}mnemonics;scrollableElement;menuElement;static globalStyleSheet;styleSheet;initializeOrUpdateStyleSheet(e,t){this.styleSheet||(XA(e)?this.styleSheet=ic(e):(uC.globalStyleSheet||(uC.globalStyleSheet=ic()),this.styleSheet=uC.globalStyleSheet)),this.styleSheet.textContent=Nte(t,XA(e))}styleScrollElement(e,t){const n=t.foregroundColor??"",s=t.backgroundColor??"",o=t.borderColor?`1px solid ${t.borderColor}`:"",r="5px",a=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=o,e.style.borderRadius=r,e.style.color=n,e.style.backgroundColor=s,e.style.boxShadow=a}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}get scrollOffset(){return this.menuElement.scrollTop}trigger(e){if(e<=this.viewItems.length&&e>=0){const t=this.viewItems[e];if(t instanceof ZO)super.focus(e),t.open(!0);else if(t instanceof JF)super.run(t._action,t._context);else return}}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof zt)return new CU(t.context,e,{icon:!0},this.menuStyles);if(e instanceof ll){const s=new ZO(e,e.actions,n,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const o=s.getMnemonic();if(o&&s.isEnabled()){let r=[];this.mnemonics.has(o)&&(r=this.mnemonics.get(o)),r.push(s),this.mnemonics.set(o,r)}}return s}else{const s={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const r=t.getKeyBinding(e);if(r){const a=r.getLabel();a&&(s.keybinding=a)}}const o=new JF(t.context,e,s,this.menuStyles);if(t.enableMnemonics){const r=o.getMnemonic();if(r&&o.isEnabled()){let a=[];this.mnemonics.has(r)&&(a=this.mnemonics.get(r)),a.push(o),this.mnemonics.set(r,a)}}return o}}}class JF extends yr{constructor(e,t,n,s){if(n.isMenu=!0,super(t,t,n),this.menuStyle=s,this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){const o=this.action.label;if(o){const r=OE.exec(o);r&&(this.mnemonic=(r[1]?r[1]:r[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new xn(()=>{this.element&&(this._register(F(this.element,Q.MOUSE_UP,o=>{if(Fe.stop(o,!0),na){if(new $n(ve(this.element),o).rightButton)return;this.onClick(o)}else setTimeout(()=>{this.onClick(o)},0)})),this._register(F(this.element,Q.CONTEXT_MENU,o=>{Fe.stop(o,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}static{Jg(this,"BaseMenuActionViewItem")}container;options;item;runOnceToEnableMouseUp;label;check;mnemonic;cssClass;render(e){super.render(e),this.element&&(this.container=e,this.item=Le(this.element,ce("a.action-menu-item")),this._action.id===zt.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=Le(this.item,ce("span.menu-item-check"+Ne.asCSSSelector(ee.menuSelection))),this.check.setAttribute("role","none"),this.label=Le(this.item,ce("span.action-label")),this.options.label&&this.options.keybinding&&(Le(this.item,ce("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item?.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(this.label&&this.options.label){Mn(this.label);let e=pH(this.action.label);if(e){const t=Ux(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const n=OE.exec(e);if(n){e=Y_(e),dC.lastIndex=0;let s=dC.exec(e);for(;s&&s[1];)s=dC.exec(e);const o=Jg(r=>r.replace(/&amp;&amp;/g,"&amp;"),"replaceDoubleEscapes");s?this.label.append(Wy(o(e.substr(0,s.index))," "),ce("u",{"aria-hidden":"true"},s[3]),Lb(o(e.substr(s.index+s[0].length))," ")):this.label.innerText=o(e).trim(),this.item?.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,s=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",o=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=n??"",this.item.style.outline=s,this.item.style.outlineOffset=o),this.check&&(this.check.style.color=t??"")}}class ZO extends JF{constructor(e,t,n,s,o){super(e,e,s,o),this.submenuActions=t,this.parentData=n,this.submenuOptions=s,this.expandDirection=s&&s.expandDirection!==void 0?s.expandDirection:{horizontal:0,vertical:1},this.showScheduler=new xn(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new xn(()=>{this.element&&!As(Lr(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}static{Jg(this,"SubmenuMenuActionViewItem")}mysubmenu=null;submenuContainer;submenuIndicator;submenuDisposables=this._register(new te);mouseOver=!1;showScheduler;hideScheduler;expandDirection;render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=Le(this.item,ce("span.submenu-indicator"+Ne.asCSSSelector(ee.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(F(this.element,Q.KEY_UP,t=>{const n=new Pt(t);(n.equals(E.RightArrow)||n.equals(E.Enter))&&(Fe.stop(t,!0),this.createSubmenu(!0))})),this._register(F(this.element,Q.KEY_DOWN,t=>{const n=new Pt(t);Lr()===this.item&&(n.equals(E.RightArrow)||n.equals(E.Enter))&&Fe.stop(t,!0)})),this._register(F(this.element,Q.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(F(this.element,Q.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(F(this.element,Q.FOCUS_OUT,t=>{this.element&&!As(Lr(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}open(e){this.cleanupExistingSubmenu(!1),this.createSubmenu(e)}onClick(e){Fe.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,s){const o={top:0,left:0};return o.left=O_(e.width,t.width,{position:s.horizontal===0?$T.Before:$T.After,offset:n.left,size:n.width}),o.left>=n.left&&o.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(o.left=n.left+10),n.top+=10,n.height=0),o.top=O_(e.height,t.height,{position:$T.Before,offset:n.top,size:0}),o.top+t.height===n.top&&o.top+n.height+t.height<=e.height&&(o.top+=n.height),o}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=Le(this.element,ce("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=ve(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new uC(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new tH],this.submenuOptions,this.menuStyle);const s=this.element.getBoundingClientRect(),o={top:s.top-n,left:s.left,height:s.height+2*n,width:s.width},r=this.submenuContainer.getBoundingClientRect(),a=ve(this.element),{top:l,left:c}=this.calculateSubmenuMenuLayout(new Lt(a.innerWidth,a.innerHeight),Lt.lift(r),o,this.expandDirection);this.submenuContainer.style.left=`${c-r.left}px`,this.submenuContainer.style.top=`${l-r.top}px`,this.submenuDisposables.add(F(this.submenuContainer,Q.KEY_UP,d=>{new Pt(d).equals(E.LeftArrow)&&(Fe.stop(d,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(F(this.submenuContainer,Q.KEY_DOWN,d=>{new Pt(d).equals(E.LeftArrow)&&Fe.stop(d,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){this.item&&this.item?.setAttribute("aria-expanded",e)}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class CU extends _D{constructor(e,t,n,s){super(e,t,n),this.menuStyles=s}static{Jg(this,"MenuSeparatorActionViewItem")}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function Ux(i){const e=OE,t=e.exec(i);if(!t)return i;const n=!t[1];return i.replace(e,n?"$2$3":"").trim()}Jg(Ux,"cleanMnemonic");function eV(i){const e=HW()[i.id];return`.codicon-${i.id}:before { content: '\\${e.toString(16)}'; }`}Jg(eV,"formatRule");function Nte(i,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${eV(ee.menuSelection)}
${eV(ee.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
	max-height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const n=i.scrollbarShadow;n&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${n} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${n} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${n} 6px 6px 6px -6px inset;
				}
			`);const s=i.scrollbarSliderBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${s};
				}
			`);const o=i.scrollbarSliderHoverBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${o};
				}
			`);const r=i.scrollbarSliderActiveBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${r};
				}
			`)}return t}Jg(Nte,"getMenuWidgetCSS");var dke=Object.defineProperty,Rh=(i,e)=>dke(i,"name",{value:e,configurable:!0});class hke extends nc{static{Rh(this,"BaseDropdown")}_element;boxContainer;_label;contents;visible;_onDidChangeVisibility=this._register(new x);onDidChangeVisibility=this._onDidChangeVisibility.event;hover;constructor(e,t){super(),this._element=Le(e,ce(".monaco-dropdown")),this._label=Le(this._element,ce(".dropdown-label"));let n=t.labelRenderer;n||(n=Rh(o=>(o.textContent=t.label||"",null),"labelRenderer"));for(const o of[Q.CLICK,Q.MOUSE_DOWN,wt.Tap])this._register(F(this.element,o,r=>Fe.stop(r,!0)));for(const o of[Q.MOUSE_DOWN,wt.Tap])this._register(F(this._label,o,r=>{gg(r)&&(r.detail>1||r.button!==0)||(this.visible?this.hide():this.show())}));this._register(F(this._label,Q.KEY_UP,o=>{const r=new Pt(o);(r.equals(E.Enter)||r.equals(E.Space))&&(Fe.stop(o,!0),this.visible?this.hide():this.show())}));const s=n(this._label);s&&this._register(s),this._register(Gn.addTarget(this._label))}get element(){return this._element}get label(){return this._label}set tooltip(e){this._label&&(!this.hover&&e!==""?this.hover=this._register(pl().setupManagedHover(bn("mouse"),this._label,e)):this.hover&&this.hover.update(e))}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}isVisible(){return!!this.visible}onEvent(e,t){this.hide()}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class uke extends hke{constructor(e,t){super(e,t),this._options=t,this.actions=t.actions||[]}static{Rh(this,"DropdownMenu")}_menuOptions;_actions=[];set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:Rh(()=>this.element,"getAnchor"),getActions:Rh(()=>this.actions,"getActions"),getActionsContext:Rh(()=>this.menuOptions?this.menuOptions.context:null,"getActionsContext"),getActionViewItem:Rh((e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,"getActionViewItem"),getKeyBinding:Rh(e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,"getKeyBinding"),getMenuClassName:Rh(()=>this._options.menuClassName||"","getMenuClassName"),onHide:Rh(()=>this.onHide(),"onHide"),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:cu.LEFT,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}var gke=Object.defineProperty,B_=(i,e)=>gke(i,"name",{value:e,configurable:!0});U.white.toString(),U.white.toString();class hy extends ${static{B_(this,"Button")}options;_element;_label="";_labelElement;_labelShortElement;_hover;_onDidClick=this._register(new x);get onDidClick(){return this._onDidClick.event}_onDidEscape=this._register(new x);get onDidEscape(){return this._onDidEscape.event}focusTracker;constructor(e,t){super(),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const n=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,s=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=s||"",this._element.style.backgroundColor=n||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(Gn.addTarget(this._element)),[Q.CLICK,wt.Tap].forEach(o=>{this._register(F(this._element,o,r=>{if(!this.enabled){Fe.stop(r);return}this._onDidClick.fire(r)}))}),this._register(F(this._element,Q.KEY_DOWN,o=>{const r=new Pt(o);let a=!1;this.enabled&&(r.equals(E.Enter)||r.equals(E.Space))?(this._onDidClick.fire(o),a=!0):r.equals(E.Escape)&&(this._onDidEscape.fire(o),this._element.blur(),a=!0),a&&Fe.stop(r,!0)})),this._register(F(this._element,Q.MOUSE_OVER,o=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(F(this._element,Q.MOUSE_OUT,o=>{this.updateBackground(!1)})),this.focusTracker=this._register(al(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let n of eu(e))if(typeof n=="string"){if(n=n.trim(),n==="")continue;const s=document.createElement("span");s.textContent=n,t.push(s)}else t.push(n);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){if(this._label===e||Pp(this._label)&&Pp(e)&&_H(this._label,e))return;this._element.classList.add("monaco-text-button");const t=this.options.supportShortLabel?this._labelElement:this._element;if(Pp(e)){const s=S3(e,{inline:!0});s.dispose();const o=s.element.querySelector("p")?.innerHTML;if(o){const r=F5(o,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});t.innerHTML=r}else dr(t)}else this.options.supportIcons?dr(t,...this.getContentElements(e)):t.textContent=e;let n="";typeof this.options.title=="string"?n=this.options.title:this.options.title&&(n=E3(e)),this.setTitle(n),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",n),this._label=e}get label(){return this._label}set labelShort(e){!this.options.supportShortLabel||!this._labelShortElement||(this.options.supportIcons?dr(this._labelShortElement,...this.getContentElements(e)):this._labelShortElement.textContent=e)}set icon(e){this._element.classList.add(...Ne.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}set checked(e){e?(this._element.classList.add("checked"),this._element.setAttribute("aria-checked","true")):(this._element.classList.remove("checked"),this._element.setAttribute("aria-checked","false"))}get checked(){return this._element.classList.contains("checked")}setTitle(e){!this._hover&&e!==""?this._hover=this._register(pl().setupManagedHover(this.options.hoverDelegate??bn("mouse"),this._element,e)):this._hover&&this._hover.update(e)}focus(){this._element.focus()}hasFocus(){return dh(this._element)}}class fke extends ${static{B_(this,"ButtonWithDropdown")}button;action;dropdownButton;separatorContainer;separator;element;_onDidClick=this._register(new x);onDidClick=this._onDidClick.event;constructor(e,t){super(),this.element=document.createElement("div"),this.element.classList.add("monaco-button-dropdown"),e.appendChild(this.element),this.button=this._register(new hy(this.element,t)),this._register(this.button.onDidClick(o=>this._onDidClick.fire(o))),this.action=this._register(new Mt("primaryAction",E3(this.button.label),void 0,!0,async()=>this._onDidClick.fire(void 0))),this.separatorContainer=document.createElement("div"),this.separatorContainer.classList.add("monaco-button-dropdown-separator"),this.separator=document.createElement("div"),this.separatorContainer.appendChild(this.separator),this.element.appendChild(this.separatorContainer);const n=t.buttonBorder;n&&(this.separatorContainer.style.borderTop="1px solid "+n,this.separatorContainer.style.borderBottom="1px solid "+n);const s=t.secondary?t.buttonSecondaryBackground:t.buttonBackground;this.separatorContainer.style.backgroundColor=s??"",this.separator.style.backgroundColor=t.buttonSeparator??"",this.dropdownButton=this._register(new hy(this.element,{...t,title:!1,supportIcons:!0})),this._register(pl().setupManagedHover(bn("mouse"),this.dropdownButton.element,g("button dropdown more actions","More Actions..."))),this.dropdownButton.element.setAttribute("aria-haspopup","true"),this.dropdownButton.element.setAttribute("aria-expanded","false"),this.dropdownButton.element.classList.add("monaco-dropdown-button"),this.dropdownButton.icon=ee.dropDownButton,this._register(this.dropdownButton.onDidClick(o=>{const r=Array.isArray(t.actions)?t.actions:t.actions.getActions();t.contextMenuProvider.showContextMenu({getAnchor:B_(()=>this.dropdownButton.element,"getAnchor"),getActions:B_(()=>t.addPrimaryActionToDropdown===!1?[...r]:[this.action,...r],"getActions"),actionRunner:t.actionRunner,onHide:B_(()=>this.dropdownButton.element.setAttribute("aria-expanded","false"),"onHide")}),this.dropdownButton.element.setAttribute("aria-expanded","true")}))}dispose(){super.dispose(),this.element.remove()}set label(e){this.button.label=e,this.action.label=e}set icon(e){this.button.icon=e}set enabled(e){this.button.enabled=e,this.dropdownButton.enabled=e,this.element.classList.toggle("disabled",!e)}get enabled(){return this.button.enabled}set checked(e){this.button.checked=e}get checked(){return this.button.checked}focus(){this.button.focus()}hasFocus(){return this.button.hasFocus()||this.dropdownButton.hasFocus()}}class Pte{constructor(e,t){this.options=t,this._element=document.createElement("div"),this._element.classList.add("monaco-description-button"),this._button=new hy(this._element,t),this._descriptionElement=document.createElement("div"),this._descriptionElement.classList.add("monaco-button-description"),this._element.appendChild(this._descriptionElement),e.appendChild(this._element)}static{B_(this,"ButtonWithDescription")}_button;_element;_descriptionElement;get onDidClick(){return this._button.onDidClick}get element(){return this._element}set label(e){this._button.label=e}set icon(e){this._button.icon=e}get enabled(){return this._button.enabled}set enabled(e){this._button.enabled=e}set checked(e){this._button.checked=e}get checked(){return this._button.checked}focus(){this._button.focus()}hasFocus(){return this._button.hasFocus()}dispose(){this._button.dispose()}set description(e){this.options.supportIcons?dr(this._descriptionElement,...eu(e)):this._descriptionElement.textContent=e}}class Rte{constructor(e){this.container=e}static{B_(this,"ButtonBar")}_buttons=[];_buttonStore=new te;dispose(){this._buttonStore.dispose()}get buttons(){return this._buttons}clear(){this._buttonStore.clear(),this._buttons.length=0}addButton(e){const t=this._buttonStore.add(new hy(this.container,e));return this.pushButton(t),t}addButtonWithDescription(e){const t=this._buttonStore.add(new Pte(this.container,e));return this.pushButton(t),t}addButtonWithDropdown(e){const t=this._buttonStore.add(new fke(this.container,e));return this.pushButton(t),t}pushButton(e){this._buttons.push(e);const t=this._buttons.length-1;this._buttonStore.add(F(e.element,Q.KEY_DOWN,n=>{const s=new Pt(n);let o=!0,r;s.equals(E.LeftArrow)?r=t>0?t-1:this._buttons.length-1:s.equals(E.RightArrow)?r=t===this._buttons.length-1?0:t+1:o=!1,o&&typeof r=="number"&&(this._buttons[r].focus(),Fe.stop(n,!0))}))}}var pke=Object.defineProperty,Ote=(i,e)=>pke(i,"name",{value:e,configurable:!0});class QP{static{Ote(this,"ModifierLabelProvider")}modifierLabels;constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[Ts.Macintosh]=e,this.modifierLabels[Ts.Windows]=t,this.modifierLabels[Ts.Linux]=n}toLabel(e,t,n){if(t.length===0)return null;const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=n(a);if(l===null)return null;s[o]=Bte(a,l,this.modifierLabels[e])}return s.join(" ")}}const Mte=new QP({ctrlKey:"",shiftKey:"",altKey:"",metaKey:"",separator:""},{ctrlKey:g({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:g({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:g({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:g({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:g({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:g({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:g({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:g({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"});new QP({ctrlKey:g({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:g({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:g({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:g({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:g({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:g({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:g({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:g({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:g({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:g({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:g({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:g({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"});new QP({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});new QP({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function Bte(i,e,t){if(e===null)return"";const n=[];return i.ctrlKey&&n.push(t.ctrlKey),i.shiftKey&&n.push(t.shiftKey),i.altKey&&n.push(t.altKey),i.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}Ote(Bte,"_simpleAsString");var mke=Object.defineProperty,_ke=(i,e)=>mke(i,"name",{value:e,configurable:!0});const DI=ce;class Fte extends ${constructor(e,t,n){super(),this.os=t,this.options=n||Object.create(null);const s=this.options.keybindingLabelForeground;this.domNode=Le(e,DI(".monaco-keybinding")),s&&(this.domNode.style.color=s),this.hover=this._register(pl().setupManagedHover(bn("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}static{_ke(this,"KeybindingLabel")}domNode;options;keyElements=new Set;hover;keybinding;matches;didEverRender;get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&Fte.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const e=this.keybinding.getChords();e[0]&&this.renderChord(this.domNode,e[0],this.matches?this.matches.firstPart:null);for(let n=1;n<e.length;n++)Le(this.domNode,DI("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,e[n],this.matches?this.matches.chordPart:null);const t=this.options.disableTitle??!1?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(t),this.domNode.setAttribute("aria-label",t||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){Mn(this.domNode),this.keyElements.clear()}renderChord(e,t,n){const s=Mte.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,s.ctrlKey,!!n?.ctrlKey,s.separator),t.shiftKey&&this.renderKey(e,s.shiftKey,!!n?.shiftKey,s.separator),t.altKey&&this.renderKey(e,s.altKey,!!n?.altKey,s.separator),t.metaKey&&this.renderKey(e,s.metaKey,!!n?.metaKey,s.separator);const o=t.keyLabel;o&&this.renderKey(e,o,!!n?.keyCode,"")}renderKey(e,t,n,s){Le(e,this.createKeyElement(t,n?".highlight":"")),s&&Le(e,DI("span.monaco-keybinding-key-separator",void 0,s))}renderUnbound(e){Le(e,this.createKeyElement(g("unbound","Unbound")))}createKeyElement(e,t=""){const n=DI("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),this.options.keybindingLabelBackground&&(n.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(n.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(n.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(n.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),n}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&lo(e.firstPart,t.firstPart)&&lo(e.chordPart,t.chordPart)}}var bke=Object.defineProperty,zx=(i,e)=>bke(i,"name",{value:e,configurable:!0});const vke=zx(()=>({msLoopTime:-1,msDelayTime:-1,dispose:zx(()=>{},"dispose")}),"nullScopedAccessibilityProgressSignalFactory");let Vte=vke;function Wte(i){Vte=i}zx(Wte,"setProgressAcccessibilitySignalScheduler");function Hte(i,e){return Vte(i,e)}zx(Hte,"getProgressAcccessibilitySignalScheduler");var wke=Object.defineProperty,Cke=(i,e)=>wke(i,"name",{value:e,configurable:!0});const XO="done",QO="active",II="infinite",TI="infinite-long-running",JO="discrete";class uy extends ${static{Cke(this,"ProgressBar")}static LONG_RUNNING_INFINITE_THRESHOLD=1e4;static PROGRESS_SIGNAL_DEFAULT_DELAY=3e3;workedVal;element;bit;totalWork;showDelayedScheduler;longRunningScheduler;progressSignal=this._register(new Yi);constructor(e,t){super(),this.workedVal=0,this.showDelayedScheduler=this._register(new xn(()=>Gl(this.element),0)),this.longRunningScheduler=this._register(new xn(()=>this.infiniteLongRunning(),uy.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=t?.progressBarBackground||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(QO,II,TI,JO),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}done(){return this.doDone(!0)}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(XO),this.element.classList.contains(II)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(JO,XO,TI),this.element.classList.add(QO,II),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(TI)}total(e){return this.workedVal=0,this.totalWork=e,this.element.setAttribute("aria-valuemax",e.toString()),this}hasTotal(){return Gc(this.totalWork)}worked(e){return e=Math.max(1,Number(e)),this.doSetWorked(this.workedVal+e)}setWorked(e){return e=Math.max(1,Number(e)),this.doSetWorked(e)}doSetWorked(e){const t=this.totalWork||100;return this.workedVal=e,this.workedVal=Math.min(t,this.workedVal),this.element.classList.remove(II,TI,XO),this.element.classList.add(QO,JO),this.element.setAttribute("aria-valuenow",e.toString()),this.bit.style.width=100*(this.workedVal/t)+"%",this}getContainer(){return this.element}show(e){this.showDelayedScheduler.cancel(),this.progressSignal.value=Hte(uy.PROGRESS_SIGNAL_DEFAULT_DELAY),typeof e=="number"?this.showDelayedScheduler.schedule(e):Gl(this.element)}hide(){Wc(this.element),this.showDelayedScheduler.cancel(),this.progressSignal.clear()}}var yke=Object.defineProperty,Ske=(i,e)=>yke(i,"name",{value:e,configurable:!0});class R$e extends ${constructor(e,t,n,s){super(),this.container=e,this.message=t,this.options=s,this.modalElement=this.container.appendChild(ce(".monaco-dialog-modal-block.dimmed")),this.shadowElement=this.modalElement.appendChild(ce(".dialog-shadow")),this.element=this.shadowElement.appendChild(ce(".monaco-dialog-box")),this.element.setAttribute("role","dialog"),this.element.tabIndex=-1,Wc(this.element),this.buttonStyles=s.buttonStyles,Array.isArray(n)&&n.length>0?this.buttons=n:this.options.disableDefaultAction?this.buttons=[]:this.buttons=[g("ok","OK")];const o=this.element.appendChild(ce(".dialog-buttons-row"));this.buttonsContainer=o.appendChild(ce(".dialog-buttons"));const r=this.element.appendChild(ce(".dialog-message-row"));if(this.iconElement=r.appendChild(ce("#monaco-dialog-icon.dialog-icon")),this.iconElement.setAttribute("aria-label",this.getIconAriaLabel()),this.messageContainer=r.appendChild(ce(".dialog-message-container")),this.options.detail||this.options.renderBody){const c=this.messageContainer.appendChild(ce(".dialog-message")).appendChild(ce("#monaco-dialog-message-text.dialog-message-text"));c.innerText=this.message}if(this.messageDetailElement=this.messageContainer.appendChild(ce("#monaco-dialog-message-detail.dialog-message-detail")),this.options.detail||!this.options.renderBody?this.messageDetailElement.innerText=this.options.detail?this.options.detail:t:this.messageDetailElement.style.display="none",this.options.renderBody){const l=this.messageContainer.appendChild(ce("#monaco-dialog-message-body.dialog-message-body"));this.options.renderBody(l);for(const c of this.messageContainer.querySelectorAll("a"))c.tabIndex=0}if(this.options.inputs?this.inputs=this.options.inputs.map(l=>{const c=this.messageContainer.appendChild(ce(".dialog-message-input")),d=this._register(new ute(c,void 0,{placeholder:l.placeholder,type:l.type??"text",inputBoxStyles:s.inputBoxStyles}));return l.value&&(d.value=l.value),d}):this.inputs=[],this.options.checkboxLabel){const l=this.messageContainer.appendChild(ce(".dialog-checkbox-row")),c=this.checkbox=this._register(new YP(this.options.checkboxLabel,!!this.options.checkboxChecked,s.checkboxStyles));l.appendChild(c.domNode);const d=l.appendChild(ce(".dialog-checkbox-message"));d.innerText=this.options.checkboxLabel,this._register(F(d,Q.CLICK,()=>c.checked=!c.checked))}const a=this.element.appendChild(ce(".dialog-toolbar-row"));this.toolbarContainer=a.appendChild(ce(".dialog-toolbar")),this.applyStyles()}static{Ske(this,"Dialog")}element;shadowElement;modalElement;buttonsContainer;messageDetailElement;messageContainer;iconElement;checkbox;toolbarContainer;buttonBar;focusToReturn;inputs;buttons;buttonStyles;getIconAriaLabel(){let e=g("dialogInfoMessage","Info");switch(this.options.type){case"error":e=g("dialogErrorMessage","Error");break;case"warning":e=g("dialogWarningMessage","Warning");break;case"pending":e=g("dialogPendingMessage","In Progress");break}return e}updateMessage(e){this.messageDetailElement.innerText=e}async show(){return this.focusToReturn=this.container.ownerDocument.activeElement,new Promise(e=>{Mn(this.buttonsContainer);const t=this.buttonBar=this._register(new Rte(this.buttonsContainer)),n=this.rearrangeButtons(this.buttons,this.options.cancelId);n.forEach((r,a)=>{const l=n[a].index===0,c=this.options.buttonDetails?this._register(t.addButtonWithDescription({secondary:!l,...this.buttonStyles})):this._register(t.addButton({secondary:!l,...this.buttonStyles}));c.label=D6(n[a].label,!0),c instanceof Pte&&(c.description=this.options.buttonDetails[n[a].index]),this._register(c.onDidClick(d=>{d&&Fe.stop(d),e({button:n[a].index,checkboxChecked:this.checkbox?this.checkbox.checked:void 0,values:this.inputs.length>0?this.inputs.map(h=>h.value):void 0})}))});const s=ve(this.container);this._register(F(s,"keydown",r=>{const a=new Pt(r);if(a.equals(M.Alt)&&a.preventDefault(),a.equals(E.Enter)){this.inputs.some(c=>c.hasFocus())&&(Fe.stop(r),e({button:n.find(c=>c.index!==this.options.cancelId)?.index??0,checkboxChecked:this.checkbox?this.checkbox.checked:void 0,values:this.inputs.length>0?this.inputs.map(c=>c.value):void 0}));return}if(a.equals(E.Space))return;let l=!1;if(a.equals(E.Tab)||a.equals(E.RightArrow)||a.equals(M.Shift|E.Tab)||a.equals(E.LeftArrow)){const c=[];let d=-1;if(this.messageContainer){const h=this.messageContainer.querySelectorAll("a");for(const u of h)c.push(u),dh(u)&&(d=c.length-1)}for(const h of this.inputs)c.push(h),h.hasFocus()&&(d=c.length-1);if(this.checkbox&&(c.push(this.checkbox),this.checkbox.hasFocus()&&(d=c.length-1)),this.buttonBar)for(const h of this.buttonBar.buttons)c.push(h),h.hasFocus()&&(d=c.length-1);if(a.equals(E.Tab)||a.equals(E.RightArrow)){d===-1&&(d=0);const h=(d+1)%c.length;c[h].focus()}else{d===-1&&(d=c.length);let h=d-1;h===-1&&(h=c.length-1),c[h].focus()}l=!0}l?Fe.stop(r,!0):this.options.keyEventProcessor&&this.options.keyEventProcessor(a)},!0)),this._register(F(s,"keyup",r=>{Fe.stop(r,!0);const a=new Pt(r);!this.options.disableCloseAction&&a.equals(E.Escape)&&e({button:this.options.cancelId||0,checkboxChecked:this.checkbox?this.checkbox.checked:void 0})},!0)),this._register(F(this.element,"focusout",r=>{r.relatedTarget&&this.element&&(As(r.relatedTarget,this.element)||(this.focusToReturn=r.relatedTarget,r.target&&(r.target.focus(),Fe.stop(r,!0))))},!1));const o="codicon-modifier-spin";if(this.iconElement.classList.remove(...Ne.asClassNameArray(ee.dialogError),...Ne.asClassNameArray(ee.dialogWarning),...Ne.asClassNameArray(ee.dialogInfo),...Ne.asClassNameArray(ee.loading),o),this.options.icon)this.iconElement.classList.add(...Ne.asClassNameArray(this.options.icon));else switch(this.options.type){case"error":this.iconElement.classList.add(...Ne.asClassNameArray(ee.dialogError));break;case"warning":this.iconElement.classList.add(...Ne.asClassNameArray(ee.dialogWarning));break;case"pending":this.iconElement.classList.add(...Ne.asClassNameArray(ee.loading),o);break;case"none":this.iconElement.classList.add("no-codicon");break;case"info":case"question":default:this.iconElement.classList.add(...Ne.asClassNameArray(ee.dialogInfo));break}if(!this.options.disableCloseAction){const r=this._register(new td(this.toolbarContainer,{})),a=this._register(new Mt("dialog.close",g("dialogClose","Close Dialog"),Ne.asClassName(ee.dialogClose),!0,async()=>{e({button:this.options.cancelId||0,checkboxChecked:this.checkbox?this.checkbox.checked:void 0})}));r.push(a,{icon:!0,label:!1})}this.applyStyles(),this.element.setAttribute("aria-modal","true"),this.element.setAttribute("aria-labelledby","monaco-dialog-icon monaco-dialog-message-text"),this.element.setAttribute("aria-describedby","monaco-dialog-icon monaco-dialog-message-text monaco-dialog-message-detail monaco-dialog-message-body"),Gl(this.element),this.inputs.length>0?(this.inputs[0].focus(),this.inputs[0].select()):n.forEach((r,a)=>{r.index===0&&t.buttons[a].focus()})})}applyStyles(){const e=this.options.dialogStyles,t=e.dialogForeground,n=e.dialogBackground,s=e.dialogShadow?`0 0px 8px ${e.dialogShadow}`:"",o=e.dialogBorder?`1px solid ${e.dialogBorder}`:"",r=e.textLinkForeground;if(this.shadowElement.style.boxShadow=s,this.element.style.color=t??"",this.element.style.backgroundColor=n??"",this.element.style.border=o,r)for(const l of this.messageContainer.getElementsByTagName("a"))l.style.color=r;let a;switch(this.options.type){case"error":a=e.errorIconForeground;break;case"warning":a=e.warningIconForeground;break;default:a=e.infoIconForeground;break}a&&(this.iconElement.style.color=a)}dispose(){super.dispose(),this.modalElement&&(this.modalElement.remove(),this.modalElement=void 0),this.focusToReturn&&As(this.focusToReturn,this.container.ownerDocument.body)&&(this.focusToReturn.focus(),this.focusToReturn=void 0)}rearrangeButtons(e,t){const n=e.map((s,o)=>({label:s,index:o}));if(e.length<2)return n;if(Ue||Gi){if(typeof t=="number"&&n[t]){const s=n.splice(t,1)[0];n.splice(1,0,s)}n.reverse()}else if(Nt&&typeof t=="number"&&n[t]){const s=n.splice(t,1)[0];n.push(s)}return n}}var Eke=Object.defineProperty,Lke=(i,e)=>Eke(i,"name",{value:e,configurable:!0});class O$e{constructor(e,t,n){this.options=t,this.styles=n,this.element=Le(e,ce(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}static{Lke(this,"CountBadge")}element;count=0;countFormat;titleFormat;setCount(e){this.count=e,this.render()}setCountFormat(e){this.countFormat=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=zM(this.countFormat,this.count),this.element.title=zM(this.titleFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??"",this.element.style.color=this.styles.badgeForeground??"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}var Dke=Object.defineProperty,Ute=(i,e)=>Dke(i,"name",{value:e,configurable:!0});class H3{static{Ute(this,"BreadcrumbsItem")}}class Ike{static{Ute(this,"BreadcrumbsWidget")}_disposables=new te;_domNode;_scrollable;_onDidSelectItem=new x;_onDidFocusItem=new x;_onDidChangeFocus=new x;onDidSelectItem=this._onDidSelectItem.event;onDidFocusItem=this._onDidFocusItem.event;onDidChangeFocus=this._onDidChangeFocus.event;_items=new Array;_nodes=new Array;_freeNodes=new Array;_separatorIcon;_enabled=!0;_focusedItemIdx=-1;_selectedItemIdx=-1;_pendingDimLayout;_pendingLayout;_dimension;constructor(e,t,n,s){this._domNode=document.createElement("div"),this._domNode.className="monaco-breadcrumbs",this._domNode.tabIndex=0,this._domNode.setAttribute("role","list"),this._scrollable=new hD(this._domNode,{vertical:Bi.Hidden,horizontal:Bi.Auto,horizontalScrollbarSize:t,useShadows:!1,scrollYToX:!0}),this._separatorIcon=n,this._disposables.add(this._scrollable),this._disposables.add(Gs(this._domNode,"click",a=>this._onClick(a))),e.appendChild(this._scrollable.getDomNode());const o=ic(this._domNode);this._style(o,s);const r=al(this._domNode);this._disposables.add(r),this._disposables.add(r.onDidBlur(a=>this._onDidChangeFocus.fire(!1))),this._disposables.add(r.onDidFocus(a=>this._onDidChangeFocus.fire(!0)))}setHorizontalScrollbarSize(e){this._scrollable.updateOptions({horizontalScrollbarSize:e})}dispose(){this._disposables.dispose(),this._pendingLayout?.dispose(),this._pendingDimLayout?.dispose(),this._onDidSelectItem.dispose(),this._onDidFocusItem.dispose(),this._onDidChangeFocus.dispose(),this._domNode.remove(),this._nodes.length=0,this._freeNodes.length=0}layout(e){e&&Lt.equals(e,this._dimension)||(e?(this._pendingDimLayout?.dispose(),this._pendingDimLayout=this._updateDimensions(e)):(this._pendingLayout?.dispose(),this._pendingLayout=this._updateScrollbar()))}_updateDimensions(e){const t=new te;return t.add(Sq(ve(this._domNode),()=>{this._dimension=e,this._domNode.style.width=`${e.width}px`,this._domNode.style.height=`${e.height}px`,t.add(this._updateScrollbar())})),t}_updateScrollbar(){return _B(ve(this._domNode),()=>{_B(ve(this._domNode),()=>{this._scrollable.setRevealOnScroll(!1),this._scrollable.scanDomNode(),this._scrollable.setRevealOnScroll(!0)})})}_style(e,t){let n="";t.breadcrumbsBackground&&(n+=`.monaco-breadcrumbs { background-color: ${t.breadcrumbsBackground}}`),t.breadcrumbsForeground&&(n+=`.monaco-breadcrumbs .monaco-breadcrumb-item { color: ${t.breadcrumbsForeground}}
`),t.breadcrumbsFocusForeground&&(n+=`.monaco-breadcrumbs .monaco-breadcrumb-item.focused { color: ${t.breadcrumbsFocusForeground}}
`),t.breadcrumbsFocusAndSelectionForeground&&(n+=`.monaco-breadcrumbs .monaco-breadcrumb-item.focused.selected { color: ${t.breadcrumbsFocusAndSelectionForeground}}
`),t.breadcrumbsHoverForeground&&(n+=`.monaco-breadcrumbs:not(.disabled	) .monaco-breadcrumb-item:hover:not(.focused):not(.selected) { color: ${t.breadcrumbsHoverForeground}}
`),e.innerText=n}setEnabled(e){this._enabled=e,this._domNode.classList.toggle("disabled",!this._enabled)}domFocus(){const e=this._focusedItemIdx>=0?this._focusedItemIdx:this._items.length-1;e>=0&&e<this._items.length?this._focus(e,void 0):this._domNode.focus()}isDOMFocused(){return Yg(this._domNode)}getFocused(){return this._items[this._focusedItemIdx]}setFocused(e,t){this._focus(this._items.indexOf(e),t)}focusPrev(e){this._focusedItemIdx>0&&this._focus(this._focusedItemIdx-1,e)}focusNext(e){this._focusedItemIdx+1<this._nodes.length&&this._focus(this._focusedItemIdx+1,e)}_focus(e,t){this._focusedItemIdx=-1;for(let n=0;n<this._nodes.length;n++){const s=this._nodes[n];n!==e?s.classList.remove("focused"):(this._focusedItemIdx=n,s.classList.add("focused"),s.focus())}this._reveal(this._focusedItemIdx,!0),this._onDidFocusItem.fire({type:"focus",item:this._items[this._focusedItemIdx],node:this._nodes[this._focusedItemIdx],payload:t})}reveal(e){const t=this._items.indexOf(e);t>=0&&this._reveal(t,!1)}revealLast(){this._reveal(this._items.length-1,!1)}_reveal(e,t){if(e<0||e>=this._nodes.length)return;const n=this._nodes[e];if(!n)return;const{width:s}=this._scrollable.getScrollDimensions(),{scrollLeft:o}=this._scrollable.getScrollPosition();(!t||n.offsetLeft>o+s||n.offsetLeft<o)&&(this._scrollable.setRevealOnScroll(!1),this._scrollable.setScrollPosition({scrollLeft:n.offsetLeft}),this._scrollable.setRevealOnScroll(!0))}getSelection(){return this._items[this._selectedItemIdx]}setSelection(e,t){this._select(this._items.indexOf(e),t)}_select(e,t){this._selectedItemIdx=-1;for(let n=0;n<this._nodes.length;n++){const s=this._nodes[n];n!==e?s.classList.remove("selected"):(this._selectedItemIdx=n,s.classList.add("selected"))}this._onDidSelectItem.fire({type:"select",item:this._items[this._selectedItemIdx],node:this._nodes[this._selectedItemIdx],payload:t})}getItems(){return this._items}setItems(e){let t,n=[];try{t=lG(this._items,e,(s,o)=>s.equals(o)),n=this._items.splice(t,this._items.length-t,...e.slice(t)),this._render(t),ii(n),this._focus(-1,void 0)}catch(s){const o=new Error(`BreadcrumbsItem#setItems: newItems: ${e.length}, prefix: ${t}, removed: ${n.length}`);throw o.name=s.name,o.stack=s.stack,o}}_render(e){let t=!1;for(;e<this._items.length&&e<this._nodes.length;e++){const n=this._items[e],s=this._nodes[e];this._renderItem(n,s),t=!0}for(;e<this._nodes.length;){const n=this._nodes.pop();n&&(this._freeNodes.push(n),n.remove(),t=!0)}for(;e<this._items.length;e++){const n=this._items[e],s=this._freeNodes.length>0?this._freeNodes.pop():document.createElement("div");s&&(this._renderItem(n,s),this._domNode.appendChild(s),this._nodes.push(s),t=!0)}t&&this.layout(void 0)}_renderItem(e,t){Mn(t),t.className="";try{e.render(t)}catch(s){t.innerText="<<RENDER ERROR>>",console.error(s)}t.tabIndex=-1,t.setAttribute("role","listitem"),t.classList.add("monaco-breadcrumb-item");const n=ce(Ne.asCSSSelector(this._separatorIcon));t.appendChild(n)}_onClick(e){if(this._enabled)for(let t=e.target;t;t=t.parentElement){const n=this._nodes.indexOf(t);if(n>=0){this._focus(n,e),this._select(n,e);break}}}}var Tke=Object.defineProperty,yU=(i,e)=>Tke(i,"name",{value:e,configurable:!0});class M$e extends Jc{static{yU(this,"Radio")}_onDidSelect=this._register(new x);onDidSelect=this._onDidSelect.event;domNode;hoverDelegate;items=[];activeItem;buttons=this._register(new ah);constructor(e){super(),this.hoverDelegate=e.hoverDelegate??this._register(cm()),this.domNode=ce(".monaco-custom-radio"),this.domNode.setAttribute("role","radio"),this.setItems(e.items)}setItems(e){this.buttons.clearAndDisposeAll(),this.items=e,this.activeItem=this.items.find(t=>t.isActive)??this.items[0];for(let t=0;t<this.items.length;t++){const n=this.items[t],s=new te,o=s.add(new hy(this.domNode,{hoverDelegate:this.hoverDelegate,title:n.tooltip,supportIcons:!0}));o.enabled=!n.disabled,s.add(o.onDidClick(()=>{this.activeItem!==n&&(this.activeItem=n,this.updateButtons(),this._onDidSelect.fire(t))})),this.buttons.set(o,{item:n,dispose:yU(()=>s.dispose(),"dispose")})}this.updateButtons()}setActiveItem(e){if(e<0||e>=this.items.length)throw new Error("Invalid Index");this.activeItem=this.items[e],this.updateButtons()}setEnabled(e){for(const[t]of this.buttons)t.enabled=e}updateButtons(){let e=!1;for(const[t,{item:n}]of this.buttons){const s=e;e=n===this.activeItem,t.element.classList.toggle("active",e),t.element.classList.toggle("previous-active",s),t.label=n.text}}}var Ake=Object.defineProperty,lc=(i,e)=>Ake(i,"name",{value:e,configurable:!0});function cc(i,e){const t={...e};for(const n in i){const s=i[n];t[n]=s!==void 0?be(s):void 0}return t}lc(cc,"overrideStyles");const xke={keybindingLabelBackground:be(lpe),keybindingLabelForeground:be(cpe),keybindingLabelBorder:be(dpe),keybindingLabelBottomBorder:be(hpe),keybindingLabelShadow:be(lv)};function kke(i){return cc(i,xke)}lc(kke,"getKeybindingLabelStyles");const U3={buttonForeground:be(Dj),buttonSeparator:be(qfe),buttonBackground:be(s1),buttonHoverBackground:be(Yfe),buttonSecondaryForeground:be(Xfe),buttonSecondaryBackground:be(iB),buttonSecondaryHoverBackground:be(Qfe),buttonBorder:be(Zfe)};function Nke(i){return cc(i,U3)}lc(Nke,"getButtonStyles");const JP={progressBarBackground:be(_fe)};function Pke(i){return cc(i,JP)}lc(Pke,"getProgressBarStyles");const zte={inputActiveOptionBorder:be(Sj),inputActiveOptionForeground:be(Lj),inputActiveOptionBackground:be(Ej)};be(o1),be(Jfe),be(epe),be(tpe),be(ipe),be(npe),be(spe);function Rke(i){return cc(i,zte)}lc(Rke,"getToggleStyles");const Oke={checkboxBackground:be(ope),checkboxBorder:be(ape),checkboxForeground:be(rpe)};function Mke(i){return cc(i,Oke)}lc(Mke,"getCheckboxStyles");const Bke={dialogBackground:be(Ya),dialogForeground:be(Gy),dialogShadow:be(lv),dialogBorder:be(Re),errorIconForeground:be(Afe),warningIconForeground:be(xfe),infoIconForeground:be(kfe),textLinkForeground:be(fj)};function Fke(i){return cc(i,Bke)}lc(Fke,"getDialogStyle");const z3={inputBackground:be(Ofe),inputForeground:be(Mfe),inputBorder:be(nT),inputValidationInfoBorder:be(Wfe),inputValidationInfoBackground:be(Ffe),inputValidationInfoForeground:be(Vfe),inputValidationWarningBorder:be(zfe),inputValidationWarningBackground:be(Hfe),inputValidationWarningForeground:be(Ufe),inputValidationErrorBorder:be(Kfe),inputValidationErrorBackground:be($fe),inputValidationErrorForeground:be(Gfe)};function Vke(i){return cc(i,z3)}lc(Vke,"getInputBoxStyle");const Wke={listFilterWidgetBackground:be(Spe),listFilterWidgetOutline:be(Epe),listFilterWidgetNoMatchesOutline:be(Lpe),listFilterWidgetShadow:be(Dpe),inputBoxStyles:z3,toggleStyles:zte},Hke={badgeBackground:be(X_),badgeForeground:be(UN),badgeBorder:be(Re)};function Uke(i){return cc(i,Hke)}lc(Uke,"getCountBadgeStyle");const $3={breadcrumbsBackground:be(Ife),breadcrumbsForeground:be(Dfe),breadcrumbsHoverForeground:be(t8),breadcrumbsFocusForeground:be(t8),breadcrumbsFocusAndSelectionForeground:be(Tfe)};function zke(i){return cc(i,$3)}lc(zke,"getBreadcrumbsWidgetStyles");const bD={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:be(upe),listFocusForeground:be(gpe),listFocusOutline:be(fpe),listActiveSelectionBackground:be(Wl),listActiveSelectionForeground:be(Up),listActiveSelectionIconForeground:be(Ij),listFocusAndSelectionOutline:be(ppe),listFocusAndSelectionBackground:be(Wl),listFocusAndSelectionForeground:be(Up),listInactiveSelectionBackground:be(mpe),listInactiveSelectionIconForeground:be(bpe),listInactiveSelectionForeground:be(_pe),listInactiveFocusBackground:be(vpe),listInactiveFocusOutline:be(wpe),listHoverBackground:be(Tj),listHoverForeground:be(Aj),listDropOverBackground:be(Cpe),listDropBetweenBackground:be(ype),listSelectionOutline:be(Vi),listHoverOutline:be(Vi),treeIndentGuidesStroke:be(GA),treeInactiveIndentGuidesStroke:be(Ipe),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:be(OL),tableColumnsBorder:be(Tpe),tableOddRowsBackgroundColor:be(Ape)};function vD(i){return cc(i,bD)}lc(vD,"getListStyles");const $te={selectBackground:be($N),selectListBackground:be(jfe),selectForeground:be(E5),decoratorRightForeground:be(Bpe),selectBorder:be(L5),focusBorder:be(ec),listFocusBackground:be(Wpe),listInactiveSelectionIconForeground:be(Vpe),listFocusForeground:be(Fpe),listFocusOutline:lj(Vi,U.transparent.toString()),listHoverBackground:be(Tj),listHoverForeground:be(Aj),listHoverOutline:be(Vi),selectListBorder:be(bj),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0};function $ke(i){return cc(i,$te)}lc($ke,"getSelectBoxStyles");const Gte={shadowColor:be(lv),borderColor:be(xpe),foregroundColor:be(kpe),backgroundColor:be(Npe),selectionForegroundColor:be(Ppe),selectionBackgroundColor:be(Rpe),selectionBorderColor:be(Ope),separatorColor:be(Mpe),scrollbarShadow:be(OL),scrollbarSliderBackground:be(pj),scrollbarSliderHoverBackground:be(mj),scrollbarSliderActiveBackground:be(_j)};function Gke(i){return cc(i,Gte)}lc(Gke,"getMenuStyles");var Kte=Object.defineProperty,Kke=Object.getOwnPropertyDescriptor,Kn=(i,e)=>Kte(i,"name",{value:e,configurable:!0}),bf=(i,e,t,n)=>{for(var s=n>1?void 0:n?Kke(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Kte(e,t,s),s},Fi=(i,e)=>(t,n)=>e(t,n,i);const xi=De("listService");class B$e{static{Kn(this,"ListService")}disposables=new te;lists=[];_lastFocusedWidget=void 0;get lastFocusedList(){return this._lastFocusedWidget}constructor(){}setLastFocusedList(e){e!==this._lastFocusedWidget&&(this._lastFocusedWidget?.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,this._lastFocusedWidget?.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this.lists.some(s=>s.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),dh(e.getHTMLElement())&&this.setLastFocusedList(e),Ia(e.onDidFocus(()=>this.setLastFocusedList(e)),ye(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(s=>s!==n),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const ME=new ie("listScrollAtBoundary","none");Z.or(ME.isEqualTo("top"),ME.isEqualTo("both"));Z.or(ME.isEqualTo("bottom"),ME.isEqualTo("both"));const jte=new ie("listFocus",!0),qte=new ie("treestickyScrollFocused",!1),eR=new ie("listSupportsMultiselect",!0),G3=Z.and(jte,Z.not(kte),qte.negate()),K3=new ie("listHasSelectionOrFocus",!1),j3=new ie("listDoubleSelection",!1),q3=new ie("listMultiSelection",!1),tR=new ie("listSelectionNavigation",!1),jke=new ie("listSupportsFind",!0),qke=new ie("treeElementCanCollapse",!1),Yke=new ie("treeElementHasParent",!1),Zke=new ie("treeElementCanExpand",!1),Xke=new ie("treeElementHasChild",!1),Qke=new ie("treeFindOpen",!1),Yte="listTypeNavigationMode",Zte="listAutomaticKeyboardNavigation";function wD(i,e){const t=i.createScoped(e.getHTMLElement());return jte.bindTo(t),t}Kn(wD,"createScopedContextKeyService");function CD(i,e){const t=ME.bindTo(i),n=Kn(()=>{const s=e.scrollTop===0,o=e.scrollHeight-e.renderHeight-e.scrollTop<1;s&&o?t.set("both"):s?t.set("top"):o?t.set("bottom"):t.set("none")},"update");return n(),e.onDidScroll(n)}Kn(CD,"createScrollObserver");const Ev="workbench.list.multiSelectModifier",QT="workbench.list.openMode",Xl="workbench.list.horizontalScrolling",Y3="workbench.list.defaultFindMode",Z3="workbench.list.typeNavigationMode",$x="workbench.list.keyboardNavigation",th="workbench.list.scrollByPage",X3="workbench.list.defaultFindMatchType",BE="workbench.tree.indent",Gx="workbench.tree.renderIndentGuides",ih="workbench.list.smoothScrolling",du="workbench.list.mouseWheelScrollSensitivity",hu="workbench.list.fastScrollSensitivity",Kx="workbench.tree.expandMode",jx="workbench.tree.enableStickyScroll",qx="workbench.tree.stickyScrollMaxItemCount";function nh(i){return i.getValue(Ev)==="alt"}Kn(nh,"useAltAsMultipleSelectionModifier");class Jke extends ${constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=nh(e),this.registerListeners()}static{Kn(this,"MultipleSelectionController")}useAltAsMultipleSelectionModifier;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(Ev)&&(this.useAltAsMultipleSelectionModifier=nh(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:v3(e)}isSelectionRangeChangeEvent(e){return w3(e)}}function yD(i,e){const t=i.get(Pe),n=i.get(ni),s=new te;return[{...e,keyboardNavigationDelegate:{mightProducePrintableCharacter(r){return n.mightProducePrintableCharacter(r)}},smoothScrolling:!!t.getValue(ih),mouseWheelScrollSensitivity:t.getValue(du),fastScrollSensitivity:t.getValue(hu),multipleSelectionController:e.multipleSelectionController??s.add(new Jke(t)),keyboardNavigationEventFilter:Qte(n),scrollByPage:!!t.getValue(th)},s]}Kn(yD,"toWorkbenchListOptions");let FE=class extends fl{static{Kn(this,"WorkbenchList")}contextKeyService;listSupportsMultiSelect;listHasSelectionOrFocus;listDoubleSelection;listMultiSelection;horizontalScrolling;_useAltAsMultipleSelectionModifier;navigator;get onDidOpen(){return this.navigator.onDidOpen}constructor(i,e,t,n,s,o,r,a,l){const c=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!a.getValue(Xl),[d,h]=l.invokeFunction(yD,s);super(i,e,t,n,{keyboardSupport:!1,...d,horizontalScrolling:c}),this.disposables.add(h),this.contextKeyService=wD(o,this),this.disposables.add(CD(this.contextKeyService,this)),this.listSupportsMultiSelect=eR.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),tR.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this.listHasSelectionOrFocus=K3.bindTo(this.contextKeyService),this.listDoubleSelection=j3.bindTo(this.contextKeyService),this.listMultiSelection=q3.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=nh(a),this.disposables.add(this.contextKeyService),this.disposables.add(r.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const f=this.getSelection(),p=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(f.length>0||p.length>0),this.listMultiSelection.set(f.length>1),this.listDoubleSelection.set(f.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const f=this.getSelection(),p=this.getFocus();this.listHasSelectionOrFocus.set(f.length>0||p.length>0)})),this.disposables.add(a.onDidChangeConfiguration(f=>{f.affectsConfiguration(Ev)&&(this._useAltAsMultipleSelectionModifier=nh(a));let p={};if(f.affectsConfiguration(Xl)&&this.horizontalScrolling===void 0){const m=!!a.getValue(Xl);p={...p,horizontalScrolling:m}}if(f.affectsConfiguration(th)){const m=!!a.getValue(th);p={...p,scrollByPage:m}}if(f.affectsConfiguration(ih)){const m=!!a.getValue(ih);p={...p,smoothScrolling:m}}if(f.affectsConfiguration(du)){const m=a.getValue(du);p={...p,mouseWheelScrollSensitivity:m}}if(f.affectsConfiguration(hu)){const m=a.getValue(hu);p={...p,fastScrollSensitivity:m}}Object.keys(p).length>0&&this.updateOptions(p)})),this.navigator=new Xte(this,{configurationService:a,...s}),this.disposables.add(this.navigator)}updateOptions(i){super.updateOptions(i),i.overrideStyles!==void 0&&this.updateStyles(i.overrideStyles),i.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!i.multipleSelectionSupport)}updateStyles(i){this.style(i?vD(i):bD)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}};FE=bf([Fi(5,Ye),Fi(6,xi),Fi(7,Pe),Fi(8,He)],FE);let SU=class extends dAe{static{Kn(this,"WorkbenchPagedList")}contextKeyService;disposables;listSupportsMultiSelect;_useAltAsMultipleSelectionModifier;horizontalScrolling;navigator;get onDidOpen(){return this.navigator.onDidOpen}constructor(i,e,t,n,s,o,r,a,l){const c=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!a.getValue(Xl),[d,h]=l.invokeFunction(yD,s);super(i,e,t,n,{keyboardSupport:!1,...d,horizontalScrolling:c}),this.disposables=new te,this.disposables.add(h),this.contextKeyService=wD(o,this),this.disposables.add(CD(this.contextKeyService,this.widget)),this.horizontalScrolling=s.horizontalScrolling,this.listSupportsMultiSelect=eR.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),tR.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this._useAltAsMultipleSelectionModifier=nh(a),this.disposables.add(this.contextKeyService),this.disposables.add(r.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(a.onDidChangeConfiguration(f=>{f.affectsConfiguration(Ev)&&(this._useAltAsMultipleSelectionModifier=nh(a));let p={};if(f.affectsConfiguration(Xl)&&this.horizontalScrolling===void 0){const m=!!a.getValue(Xl);p={...p,horizontalScrolling:m}}if(f.affectsConfiguration(th)){const m=!!a.getValue(th);p={...p,scrollByPage:m}}if(f.affectsConfiguration(ih)){const m=!!a.getValue(ih);p={...p,smoothScrolling:m}}if(f.affectsConfiguration(du)){const m=a.getValue(du);p={...p,mouseWheelScrollSensitivity:m}}if(f.affectsConfiguration(hu)){const m=a.getValue(hu);p={...p,fastScrollSensitivity:m}}Object.keys(p).length>0&&this.updateOptions(p)})),this.navigator=new Xte(this,{configurationService:a,...s}),this.disposables.add(this.navigator)}updateOptions(i){super.updateOptions(i),i.overrideStyles!==void 0&&this.updateStyles(i.overrideStyles),i.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!i.multipleSelectionSupport)}updateStyles(i){this.style(i?vD(i):bD)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}dispose(){this.disposables.dispose(),super.dispose()}};SU=bf([Fi(5,Ye),Fi(6,xi),Fi(7,Pe),Fi(8,He)],SU);let EU=class extends C3{static{Kn(this,"WorkbenchTable")}contextKeyService;listSupportsMultiSelect;listHasSelectionOrFocus;listDoubleSelection;listMultiSelection;horizontalScrolling;_useAltAsMultipleSelectionModifier;navigator;get onDidOpen(){return this.navigator.onDidOpen}constructor(i,e,t,n,s,o,r,a,l,c){const d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!l.getValue(Xl),[h,u]=c.invokeFunction(yD,o);super(i,e,t,n,s,{keyboardSupport:!1,...h,horizontalScrolling:d}),this.disposables.add(u),this.contextKeyService=wD(r,this),this.disposables.add(CD(this.contextKeyService,this)),this.listSupportsMultiSelect=eR.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),tR.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=K3.bindTo(this.contextKeyService),this.listDoubleSelection=j3.bindTo(this.contextKeyService),this.listMultiSelection=q3.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=nh(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const p=this.getSelection(),m=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(p.length>0||m.length>0),this.listMultiSelection.set(p.length>1),this.listDoubleSelection.set(p.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const p=this.getSelection(),m=this.getFocus();this.listHasSelectionOrFocus.set(p.length>0||m.length>0)})),this.disposables.add(l.onDidChangeConfiguration(p=>{p.affectsConfiguration(Ev)&&(this._useAltAsMultipleSelectionModifier=nh(l));let m={};if(p.affectsConfiguration(Xl)&&this.horizontalScrolling===void 0){const _=!!l.getValue(Xl);m={...m,horizontalScrolling:_}}if(p.affectsConfiguration(th)){const _=!!l.getValue(th);m={...m,scrollByPage:_}}if(p.affectsConfiguration(ih)){const _=!!l.getValue(ih);m={...m,smoothScrolling:_}}if(p.affectsConfiguration(du)){const _=l.getValue(du);m={...m,mouseWheelScrollSensitivity:_}}if(p.affectsConfiguration(hu)){const _=l.getValue(hu);m={...m,fastScrollSensitivity:_}}Object.keys(m).length>0&&this.updateOptions(m)})),this.navigator=new tNe(this,{configurationService:l,...o}),this.disposables.add(this.navigator)}updateOptions(i){super.updateOptions(i),i.overrideStyles!==void 0&&this.updateStyles(i.overrideStyles),i.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!i.multipleSelectionSupport)}updateStyles(i){this.style(i?vD(i):bD)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}dispose(){this.disposables.dispose(),super.dispose()}};EU=bf([Fi(6,Ye),Fi(7,xi),Fi(8,Pe),Fi(9,He)],EU);function eNe(i="keydown",e,t){const n=new KeyboardEvent(i);return n.preserveFocus=e,n.pinned=t,n.__forceEvent=!0,n}Kn(eNe,"getSelectionKeyboardEvent");class Q3 extends ${constructor(e,t){super(),this.widget=e,this._register(H.filter(this.widget.onDidChangeSelection,n=>Vh(n.browserEvent))(n=>this.onSelectionFromKeyboard(n))),this._register(this.widget.onPointer(n=>this.onPointer(n.element,n.browserEvent))),this._register(this.widget.onMouseDblClick(n=>this.onMouseDblClick(n.element,n.browserEvent))),typeof t?.openOnSingleClick!="boolean"&&t?.configurationService?(this.openOnSingleClick=t?.configurationService.getValue(QT)!=="doubleClick",this._register(t?.configurationService.onDidChangeConfiguration(n=>{n.affectsConfiguration(QT)&&(this.openOnSingleClick=t?.configurationService.getValue(QT)!=="doubleClick")}))):this.openOnSingleClick=t?.openOnSingleClick??!0}static{Kn(this,"ResourceNavigator")}openOnSingleClick;_onDidOpen=this._register(new x);onDidOpen=this._onDidOpen.event;onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,s=typeof t.pinned=="boolean"?t.pinned:!n;this._open(this.getSelectedElement(),n,s,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const s=t.button===1,o=!0,r=s,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,r,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const o=!1,r=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,r,a,t)}_open(e,t,n,s,o){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:s,element:e,browserEvent:o})}}class Xte extends Q3{static{Kn(this,"ListResourceNavigator")}widget;constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class tNe extends Q3{static{Kn(this,"TableResourceNavigator")}constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class iNe extends Q3{static{Kn(this,"TreeResourceNavigator")}constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}}function Qte(i){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const n=i.softDispatch(t,t.target);return n.kind===IF.MoreChordsNeeded?(e=!0,!1):(e=!1,n.kind===IF.NoMatchingKb)}}Kn(Qte,"createKeyboardNavigationEventFilter");let LU=class extends M3{static{Kn(this,"WorkbenchObjectTree")}internals;get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(i,e,t,n,s,o,r,a,l){const{options:c,getTypeNavigationMode:d,disposable:h}=o.invokeFunction(fS,s);super(i,e,t,n,c),this.disposables.add(h),this.internals=new zb(this,s,d,s.overrideStyles,r,a,l),this.disposables.add(this.internals)}updateOptions(i){super.updateOptions(i),this.internals.updateOptions(i)}};LU=bf([Fi(5,He),Fi(6,Ye),Fi(7,xi),Fi(8,Pe)],LU);let DU=class extends Ete{static{Kn(this,"WorkbenchCompressibleObjectTree")}internals;get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(i,e,t,n,s,o,r,a,l){const{options:c,getTypeNavigationMode:d,disposable:h}=o.invokeFunction(fS,s);super(i,e,t,n,c),this.disposables.add(h),this.internals=new zb(this,s,d,s.overrideStyles,r,a,l),this.disposables.add(this.internals)}updateOptions(i={}){super.updateOptions(i),i.overrideStyles&&this.internals.updateStyleOverrides(i.overrideStyles),this.internals.updateOptions(i)}};DU=bf([Fi(5,He),Fi(6,Ye),Fi(7,xi),Fi(8,Pe)],DU);let Yx=class extends ike{static{Kn(this,"WorkbenchDataTree")}internals;get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(i,e,t,n,s,o,r,a,l,c){const{options:d,getTypeNavigationMode:h,disposable:u}=r.invokeFunction(fS,o);super(i,e,t,n,s,d),this.disposables.add(u),this.internals=new zb(this,o,h,o.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(i={}){super.updateOptions(i),i.overrideStyles!==void 0&&this.internals.updateStyleOverrides(i.overrideStyles),this.internals.updateOptions(i)}};Yx=bf([Fi(6,He),Fi(7,Ye),Fi(8,xi),Fi(9,Pe)],Yx);let Zx=class extends Ite{static{Kn(this,"WorkbenchAsyncDataTree")}internals;get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(i,e,t,n,s,o,r,a,l,c){const{options:d,getTypeNavigationMode:h,disposable:u}=r.invokeFunction(fS,o);super(i,e,t,n,s,d),this.disposables.add(u),this.internals=new zb(this,o,h,o.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(i={}){super.updateOptions(i),i.overrideStyles&&this.internals.updateStyleOverrides(i.overrideStyles),this.internals.updateOptions(i)}};Zx=bf([Fi(6,He),Fi(7,Ye),Fi(8,xi),Fi(9,Pe)],Zx);let IU=class extends eke{static{Kn(this,"WorkbenchCompressibleAsyncDataTree")}internals;get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(i,e,t,n,s,o,r,a,l,c,d){const{options:h,getTypeNavigationMode:u,disposable:f}=a.invokeFunction(fS,r);super(i,e,t,n,s,o,h),this.disposables.add(f),this.internals=new zb(this,r,u,r.overrideStyles,l,c,d),this.disposables.add(this.internals)}updateOptions(i){super.updateOptions(i),this.internals.updateOptions(i)}};IU=bf([Fi(7,He),Fi(8,Ye),Fi(9,xi),Fi(10,Pe)],IU);function J3(i){const e=i.getValue(Y3);if(e==="highlight")return E1.Highlight;if(e==="filter")return E1.Filter;const t=i.getValue($x);if(t==="simple"||t==="highlight")return E1.Highlight;if(t==="filter")return E1.Filter}Kn(J3,"getDefaultTreeFindMode");function e7(i){const e=i.getValue(X3);if(e==="fuzzy")return YF.Fuzzy;if(e==="contiguous")return YF.Contiguous}Kn(e7,"getDefaultTreeFindMatchType");function fS(i,e){const t=i.get(Pe),n=i.get(XP),s=i.get(Ye),o=i.get(He),r=Kn(()=>{const u=s.getContextKeyValue(Yte);if(u==="automatic")return sw.Automatic;if(u==="trigger"||s.getContextKeyValue(Zte)===!1)return sw.Trigger;const p=t.getValue(Z3);if(p==="automatic")return sw.Automatic;if(p==="trigger")return sw.Trigger},"getTypeNavigationMode"),a=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!t.getValue(Xl),[l,c]=o.invokeFunction(yD,e),d=e.paddingBottom,h=e.renderIndentGuides!==void 0?e.renderIndentGuides:t.getValue(Gx);return{getTypeNavigationMode:r,disposable:c,options:{keyboardSupport:!1,...l,indent:typeof t.getValue(BE)=="number"?t.getValue(BE):void 0,renderIndentGuides:h,smoothScrolling:!!t.getValue(ih),defaultFindMode:J3(t),defaultFindMatchType:e7(t),horizontalScrolling:a,scrollByPage:!!t.getValue(th),paddingBottom:d,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:e.expandOnlyOnTwistieClick??t.getValue(Kx)==="doubleClick",contextViewProvider:n,findWidgetStyles:Wke,enableStickyScroll:!!t.getValue(jx),stickyScrollMaxItemCount:Number(t.getValue(qx))}}}Kn(fS,"workbenchTreeDataPreamble");let zb=class{constructor(i,e,t,n,s,o,r){this.tree=i,this.contextKeyService=wD(s,i),this.disposables.push(CD(this.contextKeyService,i)),this.listSupportsMultiSelect=eR.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(e.multipleSelectionSupport!==!1),tR.bindTo(this.contextKeyService).set(!!e.selectionNavigation),this.listSupportFindWidget=jke.bindTo(this.contextKeyService),this.listSupportFindWidget.set(e.findWidgetEnabled??!0),this.hasSelectionOrFocus=K3.bindTo(this.contextKeyService),this.hasDoubleSelection=j3.bindTo(this.contextKeyService),this.hasMultiSelection=q3.bindTo(this.contextKeyService),this.treeElementCanCollapse=qke.bindTo(this.contextKeyService),this.treeElementHasParent=Yke.bindTo(this.contextKeyService),this.treeElementCanExpand=Zke.bindTo(this.contextKeyService),this.treeElementHasChild=Xke.bindTo(this.contextKeyService),this.treeFindOpen=Qke.bindTo(this.contextKeyService),this.treeStickyScrollFocused=qte.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=nh(r),this.updateStyleOverrides(n);const l=Kn(()=>{const d=i.getFocus()[0];if(!d)return;const h=i.getNode(d);this.treeElementCanCollapse.set(h.collapsible&&!h.collapsed),this.treeElementHasParent.set(!!i.getParentElement(d)),this.treeElementCanExpand.set(h.collapsible&&h.collapsed),this.treeElementHasChild.set(!!i.getFirstElementChild(d))},"updateCollapseContextKeys"),c=new Set;c.add(Yte),c.add(Zte),this.disposables.push(this.contextKeyService,o.register(i),i.onDidChangeSelection(()=>{const d=i.getSelection(),h=i.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(d.length>0||h.length>0),this.hasMultiSelection.set(d.length>1),this.hasDoubleSelection.set(d.length===2)})}),i.onDidChangeFocus(()=>{const d=i.getSelection(),h=i.getFocus();this.hasSelectionOrFocus.set(d.length>0||h.length>0),l()}),i.onDidChangeCollapseState(l),i.onDidChangeModel(l),i.onDidChangeFindOpenState(d=>this.treeFindOpen.set(d)),i.onDidChangeStickyScrollFocused(d=>this.treeStickyScrollFocused.set(d)),r.onDidChangeConfiguration(d=>{let h={};if(d.affectsConfiguration(Ev)&&(this._useAltAsMultipleSelectionModifier=nh(r)),d.affectsConfiguration(BE)){const u=r.getValue(BE);h={...h,indent:u}}if(d.affectsConfiguration(Gx)&&e.renderIndentGuides===void 0){const u=r.getValue(Gx);h={...h,renderIndentGuides:u}}if(d.affectsConfiguration(ih)){const u=!!r.getValue(ih);h={...h,smoothScrolling:u}}if(d.affectsConfiguration(Y3)||d.affectsConfiguration($x)){const u=J3(r);h={...h,defaultFindMode:u}}if(d.affectsConfiguration(Z3)||d.affectsConfiguration($x)){const u=t();h={...h,typeNavigationMode:u}}if(d.affectsConfiguration(X3)){const u=e7(r);h={...h,defaultFindMatchType:u}}if(d.affectsConfiguration(Xl)&&e.horizontalScrolling===void 0){const u=!!r.getValue(Xl);h={...h,horizontalScrolling:u}}if(d.affectsConfiguration(th)){const u=!!r.getValue(th);h={...h,scrollByPage:u}}if(d.affectsConfiguration(Kx)&&e.expandOnlyOnTwistieClick===void 0&&(h={...h,expandOnlyOnTwistieClick:r.getValue(Kx)==="doubleClick"}),d.affectsConfiguration(jx)){const u=r.getValue(jx);h={...h,enableStickyScroll:u}}if(d.affectsConfiguration(qx)){const u=Math.max(1,r.getValue(qx));h={...h,stickyScrollMaxItemCount:u}}if(d.affectsConfiguration(du)){const u=r.getValue(du);h={...h,mouseWheelScrollSensitivity:u}}if(d.affectsConfiguration(hu)){const u=r.getValue(hu);h={...h,fastScrollSensitivity:u}}Object.keys(h).length>0&&i.updateOptions(h)}),this.contextKeyService.onDidChangeContext(d=>{d.affectsSome(c)&&i.updateOptions({typeNavigationMode:t()})})),this.navigator=new iNe(i,{configurationService:r,...e}),this.disposables.push(this.navigator)}static{Kn(this,"WorkbenchTreeInternals")}contextKeyService;listSupportsMultiSelect;listSupportFindWidget;hasSelectionOrFocus;hasDoubleSelection;hasMultiSelection;treeElementCanCollapse;treeElementHasParent;treeElementCanExpand;treeElementHasChild;treeFindOpen;treeStickyScrollFocused;_useAltAsMultipleSelectionModifier;disposables=[];navigator;get onDidOpen(){return this.navigator.onDidOpen}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}updateOptions(i){i.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!i.multipleSelectionSupport)}updateStyleOverrides(i){this.tree.style(i?vD(i):bD)}dispose(){this.disposables=ii(this.disposables)}};zb=bf([Fi(4,Ye),Fi(5,xi),Fi(6,Pe)],zb);const nNe=Xt.as(uf.Configuration);nNe.registerConfiguration({id:"workbench",order:7,title:g("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[Ev]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[g("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),g("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:g({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[QT]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:g({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Xl]:{type:"boolean",default:!1,description:g("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[th]:{type:"boolean",default:!1,description:g("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[BE]:{type:"number",default:8,minimum:4,maximum:40,description:g("tree indent setting","Controls tree indentation in pixels.")},[Gx]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:g("render tree indent guides","Controls whether the tree should render indent guides.")},[ih]:{type:"boolean",default:!1,description:g("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[du]:{type:"number",default:1,markdownDescription:g("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[hu]:{type:"number",default:5,markdownDescription:g("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[Y3]:{type:"string",enum:["highlight","filter"],enumDescriptions:[g("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),g("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:g("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[$x]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[g("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),g("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),g("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:g("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:g("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[X3]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[g("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),g("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:g("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[Kx]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:g("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[jx]:{type:"boolean",default:!0,description:g("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[qx]:{type:"number",minimum:1,default:7,markdownDescription:g("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[Z3]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:g("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});var Jte=Object.defineProperty,sNe=Object.getOwnPropertyDescriptor,eie=(i,e)=>Jte(i,"name",{value:e,configurable:!0}),oNe=(i,e,t,n)=>{for(var s=n>1?void 0:n?sNe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Jte(e,t,s),s},TU=(i,e)=>(t,n)=>e(t,n,i);function VE(i,e,t){return{id:Jd(i.toString()).toString(),silent:t,source:e||"core"}}eie(VE,"notificationToMetrics");let tV=class extends ${constructor(i,e){super(),this.telemetryService=i,this.notificationService=e,this.registerListeners()}static{eie(this,"NotificationsTelemetry")}registerListeners(){this._register(this.notificationService.onDidAddNotification(i=>{const e=i.source&&typeof i.source!="string"?i.source.id:i.source;this.telemetryService.publicLog2("notification:show",VE(i.message,e,i.priority===Ul.SILENT))})),this._register(this.notificationService.onDidRemoveNotification(i=>{const e=i.source&&typeof i.source!="string"?i.source.id:i.source;this.telemetryService.publicLog2("notification:close",VE(i.message,e,i.priority===Ul.SILENT))}))}};tV=oNe([TU(0,rs),TU(1,fs)],tV);var tie=Object.defineProperty,rNe=Object.getOwnPropertyDescriptor,Ui=(i,e)=>tie(i,"name",{value:e,configurable:!0}),aNe=(i,e,t,n)=>{for(var s=rNe(e,t),o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=r(e,t,s)||s);return s&&tie(e,t,s),s};function F_(i){switch(i){case 100:return"req";case 101:return"cancel";case 102:return"subscribe";case 103:return"unsubscribe"}}Ui(F_,"requestTypeToStr");function WE(i){switch(i){case 200:return"init";case 201:return"reply:";case 202:case 203:return"replyErr:";case 204:return"event:"}}Ui(WE,"responseTypeToStr");function Xm(i){let e=0;for(let t=0;;t+=7){const n=i.read(1);if(e|=(n.buffer[0]&127)<<t,!(n.buffer[0]&128))return e}}Ui(Xm,"readIntVQL");const lNe=Zu(0);function Qm(i,e){if(e===0){i.write(lNe);return}let t=0;for(let s=e;s!==0;s=s>>>7)t++;const n=mt.alloc(t);for(let s=0;e!==0;s++)n.buffer[s]=e&127,e=e>>>7,e>0&&(n.buffer[s]|=128);i.write(n)}Ui(Qm,"writeInt32VQL");class t7{constructor(e){this.buffer=e}static{Ui(this,"BufferReader")}pos=0;read(e){const t=this.buffer.slice(this.pos,this.pos+e);return this.pos+=t.byteLength,t}}class i7{static{Ui(this,"BufferWriter")}buffers=[];get buffer(){return mt.concat(this.buffers)}write(e){this.buffers.push(e)}}function Zu(i){const e=mt.alloc(1);return e.writeUInt8(i,0),e}Ui(Zu,"createOneByteBuffer");const km={Undefined:Zu(0),String:Zu(1),Buffer:Zu(2),VSBuffer:Zu(3),Array:Zu(4),Object:Zu(5),Uint:Zu(6)},cNe=typeof Buffer<"u";function $b(i,e){if(typeof e>"u")i.write(km.Undefined);else if(typeof e=="string"){const t=mt.fromString(e);i.write(km.String),Qm(i,t.byteLength),i.write(t)}else if(cNe&&Buffer.isBuffer(e)){const t=mt.wrap(e);i.write(km.Buffer),Qm(i,t.byteLength),i.write(t)}else if(e instanceof mt)i.write(km.VSBuffer),Qm(i,e.byteLength),i.write(e);else if(Array.isArray(e)){i.write(km.Array),Qm(i,e.length);for(const t of e)$b(i,t)}else if(typeof e=="number"&&(e|0)===e)i.write(km.Uint),Qm(i,e);else{const t=mt.fromString(JSON.stringify(e));i.write(km.Object),Qm(i,t.byteLength),i.write(t)}}Ui($b,"serialize");function Gb(i){switch(i.read(1).readUInt8(0)){case 0:return;case 1:return i.read(Xm(i)).toString();case 2:return i.read(Xm(i)).buffer;case 3:return i.read(Xm(i));case 4:{const t=Xm(i),n=[];for(let s=0;s<t;s++)n.push(Gb(i));return n}case 5:return JSON.parse(i.read(Xm(i)).toString());case 6:return Xm(i)}}Ui(Gb,"deserialize");class iie{constructor(e,t,n=null,s=1e3){this.protocol=e,this.ctx=t,this.logger=n,this.timeoutDelay=s,this.protocolListener=this.protocol.onMessage(o=>this.onRawMessage(o)),this.sendResponse({type:200})}static{Ui(this,"ChannelServer")}channels=new Map;activeRequests=new Map;protocolListener;pendingRequests=new Map;registerChannel(e,t){this.channels.set(e,t),setTimeout(()=>this.flushPendingRequests(e),0)}sendResponse(e){switch(e.type){case 200:{const t=this.send([e.type]);this.logger?.logOutgoing(t,0,1,WE(e.type));return}case 201:case 202:case 204:case 203:{const t=this.send([e.type,e.id],e.data);this.logger?.logOutgoing(t,e.id,1,WE(e.type),e.data);return}}}send(e,t=void 0){const n=new i7;return $b(n,e),$b(n,t),this.sendBuffer(n.buffer)}sendBuffer(e){try{return this.protocol.send(e),e.byteLength}catch{return 0}}onRawMessage(e){const t=new t7(e),n=Gb(t),s=Gb(t),o=n[0];switch(o){case 100:return this.logger?.logIncoming(e.byteLength,n[1],1,`${F_(o)}: ${n[2]}.${n[3]}`,s),this.onPromise({type:o,id:n[1],channelName:n[2],name:n[3],arg:s});case 102:return this.logger?.logIncoming(e.byteLength,n[1],1,`${F_(o)}: ${n[2]}.${n[3]}`,s),this.onEventListen({type:o,id:n[1],channelName:n[2],name:n[3],arg:s});case 101:return this.logger?.logIncoming(e.byteLength,n[1],1,`${F_(o)}`),this.disposeActiveRequest({type:o,id:n[1]});case 103:return this.logger?.logIncoming(e.byteLength,n[1],1,`${F_(o)}`),this.disposeActiveRequest({type:o,id:n[1]})}}onPromise(e){const t=this.channels.get(e.channelName);if(!t){this.collectPendingRequest(e);return}const n=new xr;let s;try{s=t.call(this.ctx,e.name,e.arg,n.token)}catch(a){s=Promise.reject(a)}const o=e.id;s.then(a=>{this.sendResponse({id:o,data:a,type:201})},a=>{a instanceof Error?this.sendResponse({id:o,data:{message:a.message,name:a.name,stack:a.stack?a.stack.split(`
`):void 0},type:202}):this.sendResponse({id:o,data:a,type:203})}).finally(()=>{r.dispose(),this.activeRequests.delete(e.id)});const r=ye(()=>n.cancel());this.activeRequests.set(e.id,r)}onEventListen(e){const t=this.channels.get(e.channelName);if(!t){this.collectPendingRequest(e);return}const n=e.id,o=t.listen(this.ctx,e.name,e.arg)(r=>this.sendResponse({id:n,data:r,type:204}));this.activeRequests.set(e.id,o)}disposeActiveRequest(e){const t=this.activeRequests.get(e.id);t&&(t.dispose(),this.activeRequests.delete(e.id))}collectPendingRequest(e){let t=this.pendingRequests.get(e.channelName);t||(t=[],this.pendingRequests.set(e.channelName,t));const n=setTimeout(()=>{console.error(`Unknown channel: ${e.channelName}`),e.type===100&&this.sendResponse({id:e.id,data:{name:"Unknown channel",message:`Channel name '${e.channelName}' timed out after ${this.timeoutDelay}ms`,stack:void 0},type:202})},this.timeoutDelay);t.push({request:e,timeoutTimer:n})}flushPendingRequests(e){const t=this.pendingRequests.get(e);if(t){for(const n of t)switch(clearTimeout(n.timeoutTimer),n.request.type){case 100:this.onPromise(n.request);break;case 102:this.onEventListen(n.request);break}this.pendingRequests.delete(e)}}dispose(){this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),ii(this.activeRequests.values()),this.activeRequests.clear()}}class n7{constructor(e,t=null){this.protocol=e,this.protocolListener=this.protocol.onMessage(n=>this.onBuffer(n)),this.logger=t}static{Ui(this,"ChannelClient")}isDisposed=!1;state=0;activeRequests=new Set;handlers=new Map;lastRequestId=0;protocolListener;logger;_onDidInitialize=new x;onDidInitialize=this._onDidInitialize.event;getChannel(e){const t=this;return{call(n,s,o){return t.isDisposed?Promise.reject(new ar):t.requestPromise(e,n,s,o)},listen(n,s){return t.isDisposed?H.None:t.requestEvent(e,n,s)}}}requestPromise(e,t,n,s=Ws.None){const o=this.lastRequestId++,a={id:o,type:100,channelName:e,name:t,arg:n};if(s.isCancellationRequested)return Promise.reject(new ar);let l;return new Promise((d,h)=>{if(s.isCancellationRequested)return h(new ar);const u=Ui(()=>{const _=Ui(w=>{switch(w.type){case 201:this.handlers.delete(o),d(w.data);break;case 202:{this.handlers.delete(o);const v=new Error(w.data.message);v.stack=Array.isArray(w.data.stack)?w.data.stack.join(`
`):w.data.stack,v.name=w.data.name,h(v);break}case 203:this.handlers.delete(o),h(w.data);break}},"handler");this.handlers.set(o,_),this.sendRequest(a)},"doRequest");let f=null;this.state===1?u():(f=UC(_=>this.whenInitialized()),f.then(()=>{f=null,u()}));const p=Ui(()=>{f?(f.cancel(),f=null):this.sendRequest({id:o,type:101}),h(new ar)},"cancel"),m=s.onCancellationRequested(p);l=Ia(ye(p),m),this.activeRequests.add(l)}).finally(()=>{l.dispose(),this.activeRequests.delete(l)})}requestEvent(e,t,n){const s=this.lastRequestId++,r={id:s,type:102,channelName:e,name:t,arg:n};let a=null;const l=new x({onWillAddFirstListener:Ui(()=>{a=UC(d=>this.whenInitialized()),a.then(()=>{a=null,this.activeRequests.add(l),this.sendRequest(r)})},"onWillAddFirstListener"),onDidRemoveLastListener:Ui(()=>{a?(a.cancel(),a=null):(this.activeRequests.delete(l),this.sendRequest({id:s,type:103}))},"onDidRemoveLastListener")}),c=Ui(d=>l.fire(d.data),"handler");return this.handlers.set(s,c),l.event}sendRequest(e){switch(e.type){case 100:case 102:{const t=this.send([e.type,e.id,e.channelName,e.name],e.arg);this.logger?.logOutgoing(t,e.id,0,`${F_(e.type)}: ${e.channelName}.${e.name}`,e.arg);return}case 101:case 103:{const t=this.send([e.type,e.id]);this.logger?.logOutgoing(t,e.id,0,F_(e.type));return}}}send(e,t=void 0){const n=new i7;return $b(n,e),$b(n,t),this.sendBuffer(n.buffer)}sendBuffer(e){try{return this.protocol.send(e),e.byteLength}catch{return 0}}onBuffer(e){const t=new t7(e),n=Gb(t),s=Gb(t),o=n[0];switch(o){case 200:return this.logger?.logIncoming(e.byteLength,0,0,WE(o)),this.onResponse({type:n[0]});case 201:case 202:case 204:case 203:return this.logger?.logIncoming(e.byteLength,n[1],0,WE(o),s),this.onResponse({type:n[0],id:n[1],data:s})}}onResponse(e){if(e.type===200){this.state=1,this._onDidInitialize.fire();return}this.handlers.get(e.id)?.(e)}get onDidInitializePromise(){return H.toPromise(this.onDidInitialize)}whenInitialized(){return this.state===1?Promise.resolve():this.onDidInitializePromise}dispose(){this.isDisposed=!0,this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),ii(this.activeRequests.values()),this.activeRequests.clear()}}aNe([Ie],n7.prototype,"onDidInitializePromise");class F$e{static{Ui(this,"IPCServer")}channels=new Map;_connections=new Set;_onDidAddConnection=new x;onDidAddConnection=this._onDidAddConnection.event;_onDidRemoveConnection=new x;onDidRemoveConnection=this._onDidRemoveConnection.event;disposables=new te;get connections(){const e=[];return this._connections.forEach(t=>e.push(t)),e}constructor(e,t,n){this.disposables.add(e(({protocol:s,onDidClientDisconnect:o})=>{const r=H.once(s.onMessage);this.disposables.add(r(a=>{const l=new t7(a),c=Gb(l),d=new iie(s,c,t,n),h=new n7(s,t);this.channels.forEach((f,p)=>d.registerChannel(p,f));const u={channelServer:d,channelClient:h,ctx:c};this._connections.add(u),this._onDidAddConnection.fire(u),this.disposables.add(o(()=>{d.dispose(),h.dispose(),this._connections.delete(u),this._onDidRemoveConnection.fire(u)}))}))}))}getChannel(e,t){const n=this;return{call(s,o,r){let a;if(zg(t)){const c=hG(n.connections.filter(t));a=c?Promise.resolve(c):H.toPromise(H.filter(n.onDidAddConnection,t))}else a=t.routeCall(n,s,o);const l=a.then(c=>c.channelClient.getChannel(e));return iV(l).call(s,o,r)},listen(s,o){if(zg(t))return n.getMulticastEvent(e,t,s,o);const r=t.routeEvent(n,s,o).then(a=>a.channelClient.getChannel(e));return iV(r).listen(s,o)}}}getMulticastEvent(e,t,n,s){const o=this;let r;const a=new x({onWillAddFirstListener:Ui(()=>{r=new te;const l=new r5,c=new Map,d=Ui(u=>{const p=u.channelClient.getChannel(e).listen(n,s),m=l.add(p);c.set(u,m)},"onDidAddConnection"),h=Ui(u=>{const f=c.get(u);f&&(f.dispose(),c.delete(u))},"onDidRemoveConnection");o.connections.filter(t).forEach(d),H.filter(o.onDidAddConnection,t)(d,void 0,r),o.onDidRemoveConnection(h,void 0,r),l.event(a.fire,a,r),r.add(l)},"onWillAddFirstListener"),onDidRemoveLastListener:Ui(()=>{r?.dispose(),r=void 0},"onDidRemoveLastListener")});return a.event}registerChannel(e,t){this.channels.set(e,t);for(const n of this._connections)n.channelServer.registerChannel(e,t)}dispose(){this.disposables.dispose();for(const e of this._connections)e.channelClient.dispose(),e.channelServer.dispose();this._connections.clear(),this.channels.clear(),this._onDidAddConnection.dispose(),this._onDidRemoveConnection.dispose()}}class dNe{static{Ui(this,"IPCClient")}channelClient;channelServer;constructor(e,t,n=null){const s=new i7;$b(s,t),e.send(s.buffer),this.channelClient=new n7(e,n),this.channelServer=new iie(e,t,n)}getChannel(e){return this.channelClient.getChannel(e)}registerChannel(e,t){this.channelServer.registerChannel(e,t)}dispose(){this.channelClient.dispose(),this.channelServer.dispose()}}function iV(i){return{call(e,t,n){return i.then(s=>s.call(e,t,n))},listen(e,t){const n=new Nl;return i.then(s=>n.input=s.listen(e,t)),n.event}}}Ui(iV,"getDelayedChannel");function hNe(i){let e=!1;return{call(t,n,s){return e?i.call(t,n,s):xa(0).then(()=>e=!0).then(()=>i.call(t,n,s))},listen(t,n){if(e)return i.listen(t,n);const s=new Nl;return xa(0).then(()=>e=!0).then(()=>s.input=i.listen(t,n)),s.event}}}Ui(hNe,"getNextTickChannel");class V$e{constructor(e){this.fn=e}static{Ui(this,"StaticRouter")}routeCall(e){return this.route(e)}routeEvent(e){return this.route(e)}async route(e){for(const t of e.connections)if(await Promise.resolve(this.fn(t.ctx)))return Promise.resolve(t);return await H.toPromise(e.onDidAddConnection),await this.route(e)}}var AU;(i=>{function e(o,r,a){const l=o,c=a&&a.disableMarshalling,d=new Map;for(const h in l)n(h)&&d.set(h,H.buffer(l[h],!0,void 0,r));return new class{listen(h,u,f){const p=d.get(u);if(p)return p;const m=l[u];if(typeof m=="function"){if(s(u))return m.call(l,f);if(n(u))return d.set(u,H.buffer(l[u],!0,void 0,r)),d.get(u)}throw new Da(`Event not found: ${u}`)}call(h,u,f){const p=l[u];if(typeof p=="function"){if(!c&&Array.isArray(f))for(let _=0;_<f.length;_++)f[_]=ty(f[_]);let m=p.apply(l,f);return m instanceof Promise||(m=Promise.resolve(m)),m}throw new Da(`Method not found: ${u}`)}}}i.fromService=e,Ui(e,"fromService");function t(o,r){const a=r&&r.disableMarshalling;return new Proxy({},{get(l,c){if(typeof c=="string")return r?.properties?.has(c)?r.properties.get(c):s(c)?function(d){return o.listen(c,d)}:n(c)?o.listen(c):async function(...d){let h;r&&!Ls(r.context)?h=[r.context,...d]:h=d;const u=await o.call(c,h);return a?u:ty(u)};throw new Da(`Property not found: ${String(c)}`)}})}i.toService=t,Ui(t,"toService");function n(o){return o[0]==="o"&&o[1]==="n"&&Qu(o.charCodeAt(2))}Ui(n,"propertyIsEvent");function s(o){return/^onDynamic/.test(o)&&Qu(o.charCodeAt(9))}Ui(s,"propertyIsDynamicEvent")})(AU||(AU={}));const uNe=[["#2977B1","#FC802D","#34A13A","#D3282F","#9366BA"],["#8B564C","#E177C0","#7F7F7F","#BBBE3D","#2EBECD"]];function nV(i){if(Array.isArray(i))return i;if(i&&typeof i=="object"&&typeof i.toString=="function"){const e=i.toString();if(e!=="[object Object]")return e}return i}Ui(nV,"prettyWithoutArrays");function nie(i){return Array.isArray(i)?i.map(nV):nV(i)}Ui(nie,"pretty");function sV(i,e,t,n,s,o,r){r=nie(r);const a=uNe[s],l=a[n%a.length];let c=[`%c[${i}]%c[${String(e).padStart(7," ")}]%c[len: ${String(t).padStart(5," ")}]%c${String(n).padStart(5," ")} - ${o}`,"color: darkgreen","color: grey","color: grey",`color: ${l}`];/\($/.test(o)?(c=c.concat(r),c.push(")")):c.push(r),console.log.apply(console,c)}Ui(sV,"logWithColors");class W$e{constructor(e,t){this._outgoingPrefix=e,this._incomingPrefix=t}static{Ui(this,"IPCLogger")}_totalIncoming=0;_totalOutgoing=0;logOutgoing(e,t,n,s,o){this._totalOutgoing+=e,sV(this._outgoingPrefix,this._totalOutgoing,e,t,n,s,o)}logIncoming(e,t,n,s,o){this._totalIncoming+=e,sV(this._incomingPrefix,this._totalIncoming,e,t,n,s,o)}}var gNe=Object.defineProperty,sie=(i,e)=>gNe(i,"name",{value:e,configurable:!0});function fNe(i,...e){const t=e.reduce((o,r)=>(o[r]=!0,o),{}),n=[/^ELECTRON_.+$/,/^VSCODE_(?!(PORTABLE|SHELL_LOGIN|ENV_REPLACE|ENV_APPEND|ENV_PREPEND)).+$/,/^SNAP(|_.*)$/,/^GDK_PIXBUF_.+$/];Object.keys(i).filter(o=>!t[o]).forEach(o=>{for(let r=0;r<n.length;r++)if(o.search(n[r])!==-1){delete i[o];break}})}sie(fNe,"sanitizeProcessEnvironment");function pNe(i){i&&(delete i.DEBUG,Gi&&delete i.LD_PRELOAD)}sie(pNe,"removeDangerousEnvVariables");var mNe=Object.defineProperty,oie=(i,e)=>mNe(i,"name",{value:e,configurable:!0});const _Ne="diagnosticsService";De(_Ne);function bNe(i){return!!i.hostName&&!!i.errorMessage}oie(bNe,"isRemoteDiagnosticError");class H$e{static{oie(this,"NullDiagnosticsService")}_serviceBrand;async getPerformanceInfo(e,t){return{}}async getSystemInfo(e,t){return{processArgs:"nullProcessArgs",gpuStatus:"nullGpuStatus",screenReader:"nullScreenReader",remoteData:[],os:"nullOs",memory:"nullMemory",vmHint:"nullVmHint"}}async getDiagnostics(e,t){return""}async getWorkspaceFileExtensions(e){return{extensions:[]}}async reportWorkspaceStats(e){}}var vNe=Object.defineProperty,Dr=(i,e)=>vNe(i,"name",{value:e,configurable:!0}),xU;(i=>{i.enableDiagnostics=!1,i.records=[];const e=new WeakMap;let t=0;function n(o,r){if(!e.has(o)){const a=String(++t);e.set(o,a)}return e.get(o)}Dr(n,"getSocketId");function s(o,r,a,l){if(!i.enableDiagnostics)return;const c=n(o);if(l instanceof mt||l instanceof Uint8Array||l instanceof ArrayBuffer||ArrayBuffer.isView(l)){const d=mt.alloc(l.byteLength);d.set(l),i.records.push({timestamp:Date.now(),id:c,label:r,type:a,buff:d})}else i.records.push({timestamp:Date.now(),id:c,label:r,type:a,data:l})}i.traceSocketEvent=s,Dr(s,"traceSocketEvent")})(xU||(xU={}));var rie=(i=>(i[i.NodeSocketCloseEvent=0]="NodeSocketCloseEvent",i[i.WebSocketCloseEvent=1]="WebSocketCloseEvent",i))(rie||{});let eM=null;function Xu(){return eM||(eM=mt.alloc(0)),eM}Dr(Xu,"getEmptyBuffer");class wNe{static{Dr(this,"ChunkStream")}_chunks;_totalLength;get byteLength(){return this._totalLength}constructor(){this._chunks=[],this._totalLength=0}acceptChunk(e){this._chunks.push(e),this._totalLength+=e.byteLength}read(e){return this._read(e,!0)}peek(e){return this._read(e,!1)}_read(e,t){if(e===0)return Xu();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const r=this._chunks[0];return t&&(this._chunks.shift(),this._totalLength-=e),r}if(this._chunks[0].byteLength>e){const r=this._chunks[0].slice(0,e);return t&&(this._chunks[0]=this._chunks[0].slice(e),this._totalLength-=e),r}const n=mt.alloc(e);let s=0,o=0;for(;e>0;){const r=this._chunks[o];if(r.byteLength>e){const a=r.slice(0,e);n.set(a,s),s+=e,t&&(this._chunks[o]=r.slice(e),this._totalLength-=e),e-=e}else n.set(r,s),s+=r.byteLength,t?(this._chunks.shift(),this._totalLength-=r.byteLength):o++,e-=r.byteLength}return n}}function s7(i){switch(i){case 0:return"None";case 1:return"Regular";case 2:return"Control";case 3:return"Ack";case 5:return"Disconnect";case 6:return"ReplayRequest";case 7:return"PauseWriting";case 8:return"ResumeWriting";case 9:return"KeepAlive"}}Dr(s7,"protocolMessageTypeToString");class _d{constructor(e,t,n,s){this.type=e,this.id=t,this.ack=n,this.data=s,this.writtenTime=0}static{Dr(this,"ProtocolMessage")}writtenTime;get size(){return this.data.byteLength}}class oV extends ${static{Dr(this,"ProtocolReader")}_socket;_isDisposed;_incomingData;lastReadTime;_onMessage=this._register(new x);onMessage=this._onMessage.event;_state={readHead:!0,readLen:13,messageType:0,id:0,ack:0};constructor(e){super(),this._socket=e,this._isDisposed=!1,this._incomingData=new wNe,this._register(this._socket.onData(t=>this.acceptChunk(t))),this.lastReadTime=Date.now()}acceptChunk(e){if(!(!e||e.byteLength===0))for(this.lastReadTime=Date.now(),this._incomingData.acceptChunk(e);this._incomingData.byteLength>=this._state.readLen;){const t=this._incomingData.read(this._state.readLen);if(this._state.readHead)this._state.readHead=!1,this._state.readLen=t.readUInt32BE(9),this._state.messageType=t.readUInt8(0),this._state.id=t.readUInt32BE(1),this._state.ack=t.readUInt32BE(5),this._socket.traceSocketEvent("protocolHeaderRead",{messageType:s7(this._state.messageType),id:this._state.id,ack:this._state.ack,messageSize:this._state.readLen});else{const n=this._state.messageType,s=this._state.id,o=this._state.ack;if(this._state.readHead=!0,this._state.readLen=13,this._state.messageType=0,this._state.id=0,this._state.ack=0,this._socket.traceSocketEvent("protocolMessageRead",t),this._onMessage.fire(new _d(n,s,o,t)),this._isDisposed)break}}}readEntireBuffer(){return this._incomingData.read(this._incomingData.byteLength)}dispose(){this._isDisposed=!0,super.dispose()}}class rV{static{Dr(this,"ProtocolWriter")}_isDisposed;_isPaused;_socket;_data;_totalLength;lastWriteTime;constructor(e){this._isDisposed=!1,this._isPaused=!1,this._socket=e,this._data=[],this._totalLength=0,this.lastWriteTime=0}dispose(){try{this.flush()}catch{}this._isDisposed=!0}drain(){return this.flush(),this._socket.drain()}flush(){this._writeNow()}pause(){this._isPaused=!0}resume(){this._isPaused=!1,this._scheduleWriting()}write(e){if(this._isDisposed)return;e.writtenTime=Date.now(),this.lastWriteTime=Date.now();const t=mt.alloc(13);t.writeUInt8(e.type,0),t.writeUInt32BE(e.id,1),t.writeUInt32BE(e.ack,5),t.writeUInt32BE(e.data.byteLength,9),this._socket.traceSocketEvent("protocolHeaderWrite",{messageType:s7(e.type),id:e.id,ack:e.ack,messageSize:e.data.byteLength}),this._socket.traceSocketEvent("protocolMessageWrite",e.data),this._writeSoon(t,e.data)}_bufferAdd(e,t){const n=this._totalLength===0;return this._data.push(e,t),this._totalLength+=e.byteLength+t.byteLength,n}_bufferTake(){const e=mt.concat(this._data,this._totalLength);return this._data.length=0,this._totalLength=0,e}_writeSoon(e,t){this._bufferAdd(e,t)&&this._scheduleWriting()}_writeNowTimeout=null;_scheduleWriting(){this._writeNowTimeout||(this._writeNowTimeout=setTimeout(()=>{this._writeNowTimeout=null,this._writeNow()}))}_writeNow(){if(this._totalLength===0||this._isPaused)return;const e=this._bufferTake();this._socket.traceSocketEvent("protocolWrite",{byteLength:e.byteLength}),this._socket.write(e)}}class CNe extends ${static{Dr(this,"Protocol")}_socket;_socketWriter;_socketReader;_onMessage=new x;onMessage=this._onMessage.event;_onDidDispose=new x;onDidDispose=this._onDidDispose.event;constructor(e){super(),this._socket=e,this._socketWriter=this._register(new rV(this._socket)),this._socketReader=this._register(new oV(this._socket)),this._register(this._socketReader.onMessage(t=>{t.type===1&&this._onMessage.fire(t.data)})),this._register(this._socket.onClose(()=>this._onDidDispose.fire()))}drain(){return this._socketWriter.drain()}getSocket(){return this._socket}sendDisconnect(){}send(e){this._socketWriter.write(new _d(1,0,0,e))}}class o7 extends dNe{constructor(e,t,n=null){super(e,t,n),this.protocol=e}static{Dr(this,"Client")}static fromSocket(e,t){return new o7(new CNe(e),t)}get onDidDispose(){return this.protocol.onDidDispose}dispose(){super.dispose();const e=this.protocol.getSocket();this.protocol.sendDisconnect(),this.protocol.dispose(),e.end()}}class HS{static{Dr(this,"BufferedEmitter")}_emitter;event;_hasListeners=!1;_isDeliveringMessages=!1;_bufferedMessages=[];constructor(){this._emitter=new x({onWillAddFirstListener:Dr(()=>{this._hasListeners=!0,queueMicrotask(()=>this._deliverMessages())},"onWillAddFirstListener"),onDidRemoveLastListener:Dr(()=>{this._hasListeners=!1},"onDidRemoveLastListener")}),this.event=this._emitter.event}_deliverMessages(){if(!this._isDeliveringMessages){for(this._isDeliveringMessages=!0;this._hasListeners&&this._bufferedMessages.length>0;)this._emitter.fire(this._bufferedMessages.shift());this._isDeliveringMessages=!1}}fire(e){this._hasListeners?this._bufferedMessages.length>0?this._bufferedMessages.push(e):this._emitter.fire(e):this._bufferedMessages.push(e)}flushBuffer(){this._bufferedMessages=[]}}class yNe{static{Dr(this,"QueueElement")}data;next;constructor(e){this.data=e,this.next=null}}class SNe{static{Dr(this,"Queue")}_first;_last;constructor(){this._first=null,this._last=null}length(){let e=0,t=this._first;for(;t;)t=t.next,e++;return e}peek(){return this._first?this._first.data:null}toArray(){const e=[];let t=0,n=this._first;for(;n;)e[t++]=n.data,n=n.next;return e}pop(){if(this._first){if(this._first===this._last){this._first=null,this._last=null;return}this._first=this._first.next}}push(e){const t=new yNe(e);if(!this._first){this._first=t,this._last=t;return}this._last.next=t,this._last=t}}class bd{static{Dr(this,"LoadEstimator")}static _HISTORY_LENGTH=10;static _INSTANCE=null;static getInstance(){return bd._INSTANCE||(bd._INSTANCE=new bd),bd._INSTANCE}lastRuns;constructor(){this.lastRuns=[];const e=Date.now();for(let t=0;t<bd._HISTORY_LENGTH;t++)this.lastRuns[t]=e-1e3*t;setInterval(()=>{for(let t=bd._HISTORY_LENGTH;t>=1;t--)this.lastRuns[t]=this.lastRuns[t-1];this.lastRuns[0]=Date.now()},1e3)}load(){const e=Date.now(),t=(1+bd._HISTORY_LENGTH)*1e3;let n=0;for(let s=0;s<bd._HISTORY_LENGTH;s++)e-this.lastRuns[s]<=t&&n++;return 1-n/bd._HISTORY_LENGTH}hasHighLoad(){return this.load()>=.5}}class ENe{static{Dr(this,"PersistentProtocol")}_isReconnecting;_didSendDisconnect;_outgoingUnackMsg;_outgoingMsgId;_outgoingAckId;_outgoingAckTimeout;_incomingMsgId;_incomingAckId;_incomingMsgLastTime;_incomingAckTimeout;_keepAliveInterval;_lastReplayRequestTime;_lastSocketTimeoutTime;_socket;_socketWriter;_socketReader;_socketDisposables;_loadEstimator;_shouldSendKeepAlive;_onControlMessage=new HS;onControlMessage=this._onControlMessage.event;_onMessage=new HS;onMessage=this._onMessage.event;_onDidDispose=new HS;onDidDispose=this._onDidDispose.event;_onSocketClose=new HS;onSocketClose=this._onSocketClose.event;_onSocketTimeout=new HS;onSocketTimeout=this._onSocketTimeout.event;get unacknowledgedCount(){return this._outgoingMsgId-this._outgoingAckId}constructor(e){this._loadEstimator=e.loadEstimator??bd.getInstance(),this._shouldSendKeepAlive=e.sendKeepAlive??!0,this._isReconnecting=!1,this._outgoingUnackMsg=new SNe,this._outgoingMsgId=0,this._outgoingAckId=0,this._outgoingAckTimeout=null,this._incomingMsgId=0,this._incomingAckId=0,this._incomingMsgLastTime=0,this._incomingAckTimeout=null,this._lastReplayRequestTime=0,this._lastSocketTimeoutTime=Date.now(),this._socketDisposables=new te,this._socket=e.socket,this._socketWriter=this._socketDisposables.add(new rV(this._socket)),this._socketReader=this._socketDisposables.add(new oV(this._socket)),this._socketDisposables.add(this._socketReader.onMessage(t=>this._receiveMessage(t))),this._socketDisposables.add(this._socket.onClose(t=>this._onSocketClose.fire(t))),e.initialChunk&&this._socketReader.acceptChunk(e.initialChunk),this._shouldSendKeepAlive?this._keepAliveInterval=setInterval(()=>{this._sendKeepAlive()},5e3):this._keepAliveInterval=null}dispose(){this._outgoingAckTimeout&&(clearTimeout(this._outgoingAckTimeout),this._outgoingAckTimeout=null),this._incomingAckTimeout&&(clearTimeout(this._incomingAckTimeout),this._incomingAckTimeout=null),this._keepAliveInterval&&(clearInterval(this._keepAliveInterval),this._keepAliveInterval=null),this._socketDisposables.dispose()}drain(){return this._socketWriter.drain()}sendDisconnect(){if(!this._didSendDisconnect){this._didSendDisconnect=!0;const e=new _d(5,0,0,Xu());this._socketWriter.write(e),this._socketWriter.flush()}}sendPause(){const e=new _d(7,0,0,Xu());this._socketWriter.write(e)}sendResume(){const e=new _d(8,0,0,Xu());this._socketWriter.write(e)}pauseSocketWriting(){this._socketWriter.pause()}getSocket(){return this._socket}getMillisSinceLastIncomingData(){return Date.now()-this._socketReader.lastReadTime}beginAcceptReconnection(e,t){this._isReconnecting=!0,this._socketDisposables.dispose(),this._socketDisposables=new te,this._onControlMessage.flushBuffer(),this._onSocketClose.flushBuffer(),this._onSocketTimeout.flushBuffer(),this._socket.dispose(),this._lastReplayRequestTime=0,this._lastSocketTimeoutTime=Date.now(),this._socket=e,this._socketWriter=this._socketDisposables.add(new rV(this._socket)),this._socketReader=this._socketDisposables.add(new oV(this._socket)),this._socketDisposables.add(this._socketReader.onMessage(n=>this._receiveMessage(n))),this._socketDisposables.add(this._socket.onClose(n=>this._onSocketClose.fire(n))),this._socketReader.acceptChunk(t)}endAcceptReconnection(){this._isReconnecting=!1,this._incomingAckId=this._incomingMsgId;const e=new _d(3,0,this._incomingAckId,Xu());this._socketWriter.write(e);const t=this._outgoingUnackMsg.toArray();for(let n=0,s=t.length;n<s;n++)this._socketWriter.write(t[n]);this._recvAckCheck()}acceptDisconnect(){this._onDidDispose.fire()}_receiveMessage(e){if(e.ack>this._outgoingAckId){this._outgoingAckId=e.ack;do{const t=this._outgoingUnackMsg.peek();if(t&&t.id<=e.ack)this._outgoingUnackMsg.pop();else break}while(!0)}switch(e.type){case 0:break;case 1:{if(e.id>this._incomingMsgId)if(e.id!==this._incomingMsgId+1){const t=Date.now();t-this._lastReplayRequestTime>1e4&&(this._lastReplayRequestTime=t,this._socketWriter.write(new _d(6,0,0,Xu())))}else this._incomingMsgId=e.id,this._incomingMsgLastTime=Date.now(),this._sendAckCheck(),this._onMessage.fire(e.data);break}case 2:{this._onControlMessage.fire(e.data);break}case 3:break;case 5:{this._onDidDispose.fire();break}case 6:{const t=this._outgoingUnackMsg.toArray();for(let n=0,s=t.length;n<s;n++)this._socketWriter.write(t[n]);this._recvAckCheck();break}case 7:{this._socketWriter.pause();break}case 8:{this._socketWriter.resume();break}}}readEntireBuffer(){return this._socketReader.readEntireBuffer()}flush(){this._socketWriter.flush()}send(e){const t=++this._outgoingMsgId;this._incomingAckId=this._incomingMsgId;const n=new _d(1,t,this._incomingAckId,e);this._outgoingUnackMsg.push(n),this._isReconnecting||(this._socketWriter.write(n),this._recvAckCheck())}sendControl(e){const t=new _d(2,0,0,e);this._socketWriter.write(t)}_sendAckCheck(){if(this._incomingMsgId<=this._incomingAckId||this._incomingAckTimeout)return;const e=Date.now()-this._incomingMsgLastTime;if(e>=2e3){this._sendAck();return}this._incomingAckTimeout=setTimeout(()=>{this._incomingAckTimeout=null,this._sendAckCheck()},2e3-e+5)}_recvAckCheck(){if(this._outgoingMsgId<=this._outgoingAckId||this._outgoingAckTimeout||this._isReconnecting)return;const e=this._outgoingUnackMsg.peek(),t=Date.now()-e.writtenTime,n=Date.now()-this._socketReader.lastReadTime,s=Date.now()-this._lastSocketTimeoutTime;if(t>=2e4&&n>=2e4&&s>=2e4&&!this._loadEstimator.hasHighLoad()){this._lastSocketTimeoutTime=Date.now(),this._onSocketTimeout.fire({unacknowledgedMsgCount:this._outgoingUnackMsg.length(),timeSinceOldestUnacknowledgedMsg:t,timeSinceLastReceivedSomeData:n});return}const o=Math.max(2e4-t,2e4-n,2e4-s,500);this._outgoingAckTimeout=setTimeout(()=>{this._outgoingAckTimeout=null,this._recvAckCheck()},o)}_sendAck(){if(this._incomingMsgId<=this._incomingAckId)return;this._incomingAckId=this._incomingMsgId;const e=new _d(3,0,this._incomingAckId,Xu());this._socketWriter.write(e)}_sendKeepAlive(){this._incomingAckId=this._incomingMsgId;const e=new _d(9,0,this._incomingAckId,Xu());this._socketWriter.write(e)}}var LNe=Object.defineProperty,iR=(i,e)=>LNe(i,"name",{value:e,configurable:!0});De("remoteAuthorityResolverService");class U$e{constructor(e){this.id=e}static{iR(this,"ManagedRemoteConnection")}type=1;toString(){return`Managed(${this.id})`}}class z$e{constructor(e,t){this.host=e,this.port=t}static{iR(this,"WebSocketRemoteConnection")}type=0;toString(){return`WebSocket(${this.host}:${this.port})`}}class Ad extends Da{static{iR(this,"RemoteAuthorityResolverError")}static isNotAvailable(e){return e instanceof Ad&&e._code==="NotAvailable"}static isTemporarilyNotAvailable(e){return e instanceof Ad&&e._code==="TemporarilyNotAvailable"}static isNoResolverFound(e){return e instanceof Ad&&e._code==="NoResolverFound"}static isInvalidAuthority(e){return e instanceof Ad&&e._code==="InvalidAuthority"}static isHandled(e){return e instanceof Ad&&e.isHandled}_message;_code;_detail;isHandled;constructor(e,t="Unknown",n){super(e),this._message=e,this._code=t,this._detail=n,this.isHandled=t==="NotAvailable"&&n===!0,Object.setPrototypeOf(this,Ad.prototype)}}function DNe(i){const e=i.indexOf("+");return e===-1?i:i.substring(0,e)}iR(DNe,"getRemoteAuthorityPrefix");var INe=Object.defineProperty,TNe=(i,e)=>INe(i,"name",{value:e,configurable:!0});De("remoteSocketFactoryService");class $$e{static{TNe(this,"RemoteSocketFactoryService")}factories={};register(e,t){return this.factories[e]??=[],this.factories[e].push(t),ye(()=>{const n=this.factories[e]?.indexOf(t);typeof n=="number"&&n>=0&&this.factories[e]?.splice(n,1)})}getSocketFactory(e){return(this.factories[e.type]||[]).find(n=>n.supports(e))}connect(e,t,n,s){const o=this.getSocketFactory(e);if(!o)throw new Error(`No socket factory found for ${e}`);return o.connect(e,t,n,s)}}const ANe="signService";De(ANe);var xNe=Object.defineProperty,Ji=(i,e)=>xNe(i,"name",{value:e,configurable:!0});const kNe=30*1e3;function Xx(i){switch(i){case 1:return"Management";case 2:return"ExtensionHost";case 3:return"Tunnel"}}Ji(Xx,"connectionTypeToString");function r7(i){const e=new xr;return setTimeout(()=>e.cancel(),i),e.token}Ji(r7,"createTimeoutCancellation");function aie(i,e){if(i.isCancellationRequested||e.isCancellationRequested)return Ws.Cancelled;const t=new xr;return i.onCancellationRequested(()=>t.cancel()),e.onCancellationRequested(()=>t.cancel()),t.token}Ji(aie,"combineTimeoutCancellation");class nR{static{Ji(this,"PromiseWithTimeout")}_state;_disposables;promise;_resolvePromise;_rejectPromise;get didTimeout(){return this._state==="timedout"}constructor(e){this._state="pending",this._disposables=new te,{promise:this.promise,resolve:this._resolvePromise,reject:this._rejectPromise}=w5(),e.isCancellationRequested?this._timeout():this._disposables.add(e.onCancellationRequested(()=>this._timeout()))}registerDisposable(e){this._state==="pending"?this._disposables.add(e):e.dispose()}_timeout(){this._state==="pending"&&(this._disposables.dispose(),this._state="timedout",this._rejectPromise(this._createTimeoutError()))}_createTimeoutError(){const e=new Error("Time limit reached");return e.code="ETIMEDOUT",e.syscall="connect",e}resolve(e){this._state==="pending"&&(this._disposables.dispose(),this._state="resolved",this._resolvePromise(e))}reject(e){this._state==="pending"&&(this._disposables.dispose(),this._state="rejected",this._rejectPromise(e))}}function lie(i,e){const t=new nR(e);return t.registerDisposable(i.onControlMessage(n=>{const s=JSON.parse(n.toString()),o=u7(s);o?t.reject(o):t.resolve(s)})),t.promise}Ji(lie,"readOneControlMessage");function cie(i,e,t,n,s,o,r,a){const l=new nR(a),c=rv.create(!1);return i.info(`Creating a socket (${r})...`),_i(`code/willCreateSocket/${o}`),e.connect(t,n,s,r).then(d=>{l.didTimeout?(_i(`code/didCreateSocketError/${o}`),i.info(`Creating a socket (${r}) finished after ${c.elapsed()} ms, but this is too late and has timed out already.`),d?.dispose()):(_i(`code/didCreateSocketOK/${o}`),i.info(`Creating a socket (${r}) was successful after ${c.elapsed()} ms.`),l.resolve(d))},d=>{_i(`code/didCreateSocketError/${o}`),i.info(`Creating a socket (${r}) returned an error after ${c.elapsed()} ms.`),i.error(d),l.reject(d)}),l.promise}Ji(cie,"createSocket");function JT(i,e){const t=new nR(e);return i.then(n=>{t.didTimeout||t.resolve(n)},n=>{t.didTimeout||t.reject(n)}),t.promise}Ji(JT,"raceWithTimeoutCancellation");async function a7(i,e,t,n){const s=rR(i,e);i.logService.trace(`${s} 1/6. invoking socketFactory.connect().`);let o;try{o=await cie(i.logService,i.remoteSocketFactoryService,i.connectTo,m5.getServerRootPath(),`reconnectionToken=${i.reconnectionToken}&reconnection=${i.reconnectionProtocol?"true":"false"}`,Xx(e),`renderer-${Xx(e)}-${i.reconnectionToken}`,n)}catch(d){throw i.logService.error(`${s} socketFactory.connect() failed or timed out. Error:`),i.logService.error(d),d}i.logService.trace(`${s} 2/6. socketFactory.connect() was successful.`);let r,a;i.reconnectionProtocol?(i.reconnectionProtocol.beginAcceptReconnection(o,null),r=i.reconnectionProtocol,a=!1):(r=new ENe({socket:o}),a=!0),i.logService.trace(`${s} 3/6. sending AuthRequest control message.`);const l=await JT(i.signService.createNewMessage(Gp()),n),c={type:"auth",auth:i.connectionToken||"00000000000000000000",data:l.data};r.sendControl(mt.fromString(JSON.stringify(c)));try{const d=await lie(r,aie(n,r7(1e4)));if(d.type!=="sign"||typeof d.data!="string"){const p=new Error("Unexpected handshake message");throw p.code="VSCODE_CONNECTION_ERROR",p}if(i.logService.trace(`${s} 4/6. received SignRequest control message.`),!await JT(i.signService.validate(l,d.signedData),n)){const p=new Error("Refused to connect to unsupported server");throw p.code="VSCODE_CONNECTION_ERROR",p}const u=await JT(i.signService.sign(d.data),n),f={type:"connectionType",commit:i.commit,signedData:u,desiredConnectionType:e};return t&&(f.args=t),i.logService.trace(`${s} 5/6. sending ConnectionTypeRequest control message.`),r.sendControl(mt.fromString(JSON.stringify(f))),{protocol:r,ownsProtocol:a}}catch(d){throw d&&d.code==="ETIMEDOUT"&&(i.logService.error(`${s} the handshake timed out. Error:`),i.logService.error(d)),d&&d.code==="VSCODE_CONNECTION_ERROR"&&(i.logService.error(`${s} received error control message when negotiating connection. Error:`),i.logService.error(d)),a&&oR(r),d}}Ji(a7,"connectToRemoteExtensionHostAgent");async function l7(i,e,t,n){const s=Date.now(),o=rR(i,e),{protocol:r,ownsProtocol:a}=await a7(i,e,t,n),l=new nR(n);return l.registerDisposable(r.onControlMessage(c=>{const d=JSON.parse(c.toString()),h=u7(d);h?(i.logService.error(`${o} received error control message when negotiating connection. Error:`),i.logService.error(h),a&&oR(r),l.reject(h)):(i.reconnectionProtocol?.endAcceptReconnection(),i.logService.trace(`${o} 6/6. handshake finished, connection is up and running after ${g7(s)}!`),l.resolve({protocol:r,firstMessage:d}))})),l.promise}Ji(l7,"connectToRemoteExtensionHostAgentAndReadOneMessage");async function c7(i,e){const{protocol:t}=await l7(i,1,void 0,e);return{protocol:t}}Ji(c7,"doConnectRemoteAgentManagement");async function d7(i,e,t){const{protocol:n,firstMessage:s}=await l7(i,2,e,t),o=s&&s.debugPort;return{protocol:n,debugPort:o}}Ji(d7,"doConnectRemoteAgentExtensionHost");async function die(i,e,t){const n=Date.now(),s=rR(i,3),{protocol:o}=await a7(i,3,e,t);return i.logService.trace(`${s} 6/6. handshake finished, connection is up and running after ${g7(n)}!`),o}Ji(die,"doConnectRemoteAgentTunnel");async function sR(i,e,t){const{connectTo:n,connectionToken:s}=await i.addressProvider.getAddress();return{commit:i.commit,quality:i.quality,connectTo:n,connectionToken:s,reconnectionToken:e,reconnectionProtocol:t,remoteSocketFactoryService:i.remoteSocketFactoryService,signService:i.signService,logService:i.logService}}Ji(sR,"resolveConnectionOptions");async function NNe(i,e,t){return h7(i,async n=>{const{protocol:s}=await c7(n,Ws.None);return new VNe(i,e,t,n.reconnectionToken,s)})}Ji(NNe,"connectRemoteAgentManagement");async function PNe(i,e){return h7(i,async t=>{const{protocol:n,debugPort:s}=await d7(t,e,Ws.None);return new WNe(i,e,t.reconnectionToken,n,s)})}Ji(PNe,"connectRemoteAgentExtensionHost");async function h7(i,e){for(let n=1;;n++)try{const s=Gp(),o=await sR(i,s,null);return await e(o)}catch(s){if(n<5)i.logService.error(`[remote-connection][attempt ${n}] An error occurred in initial connection! Will retry... Error:`),i.logService.error(s);else throw i.logService.error(`[remote-connection][attempt ${n}]  An error occurred in initial connection! It will be treated as a permanent error. Error:`),i.logService.error(s),Tc.triggerPermanentFailure(0,0,Ad.isHandled(s)),s}}Ji(h7,"createInitialConnection");async function RNe(i,e,t){const n=await sR(i,Gp(),null);return await die(n,{host:e,port:t},Ws.None)}Ji(RNe,"connectRemoteAgentTunnel");function hie(i){return UC(e=>new Promise((t,n)=>{const s=setTimeout(t,i*1e3);e.onCancellationRequested(()=>{clearTimeout(s),t()})}))}Ji(hie,"sleep");class ONe{constructor(e,t){this.reconnectionToken=e,this.millisSinceLastIncomingData=t}static{Ji(this,"ConnectionLostEvent")}type=0}class MNe{constructor(e,t,n,s){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.durationSeconds=n,this.cancellableTimer=s}static{Ji(this,"ReconnectionWaitEvent")}type=1;skipWait(){this.cancellableTimer.cancel()}}class BNe{constructor(e,t,n){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=n}static{Ji(this,"ReconnectionRunningEvent")}type=2}class kU{constructor(e,t,n){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=n}static{Ji(this,"ConnectionGainEvent")}type=4}class FNe{constructor(e,t,n,s){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=n,this.handled=s}static{Ji(this,"ReconnectionPermanentFailureEvent")}type=3}class Tc extends ${constructor(e,t,n,s,o){super(),this._connectionType=e,this._options=t,this.reconnectionToken=n,this.protocol=s,this._reconnectionFailureIsFatal=o,this._onDidStateChange.fire(new kU(this.reconnectionToken,0,0)),this._register(s.onSocketClose(r=>{const a=a0(this._connectionType,this.reconnectionToken,!0);r?r.type===rie.NodeSocketCloseEvent?(this._options.logService.info(`${a} received socket close event (hadError: ${r.hadError}).`),r.error&&this._options.logService.error(r.error)):(this._options.logService.info(`${a} received socket close event (wasClean: ${r.wasClean}, code: ${r.code}, reason: ${r.reason}).`),r.event&&this._options.logService.error(r.event)):this._options.logService.info(`${a} received socket close event.`),this._beginReconnecting()})),this._register(s.onSocketTimeout(r=>{const a=a0(this._connectionType,this.reconnectionToken,!0);this._options.logService.info(`${a} received socket timeout event (unacknowledgedMsgCount: ${r.unacknowledgedMsgCount}, timeSinceOldestUnacknowledgedMsg: ${r.timeSinceOldestUnacknowledgedMsg}, timeSinceLastReceivedSomeData: ${r.timeSinceLastReceivedSomeData}).`),this._beginReconnecting()})),Tc._instances.push(this),this._register(ye(()=>{const r=Tc._instances.indexOf(this);r>=0&&Tc._instances.splice(r,1)})),this._isPermanentFailure&&this._gotoPermanentFailure(Tc._permanentFailureMillisSinceLastIncomingData,Tc._permanentFailureAttempt,Tc._permanentFailureHandled)}static{Ji(this,"PersistentConnection")}static triggerPermanentFailure(e,t,n){this._permanentFailure=!0,this._permanentFailureMillisSinceLastIncomingData=e,this._permanentFailureAttempt=t,this._permanentFailureHandled=n,this._instances.forEach(s=>s._gotoPermanentFailure(this._permanentFailureMillisSinceLastIncomingData,this._permanentFailureAttempt,this._permanentFailureHandled))}static debugTriggerReconnection(){this._instances.forEach(e=>e._beginReconnecting())}static debugPauseSocketWriting(){this._instances.forEach(e=>e._pauseSocketWriting())}static _permanentFailure=!1;static _permanentFailureMillisSinceLastIncomingData=0;static _permanentFailureAttempt=0;static _permanentFailureHandled=!1;static _instances=[];_onDidStateChange=this._register(new x);onDidStateChange=this._onDidStateChange.event;_permanentFailure=!1;get _isPermanentFailure(){return this._permanentFailure||Tc._permanentFailure}_isReconnecting=!1;_isDisposed=!1;dispose(){super.dispose(),this._isDisposed=!0}async _beginReconnecting(){if(!this._isReconnecting)try{this._isReconnecting=!0,await this._runReconnectingLoop()}finally{this._isReconnecting=!1}}async _runReconnectingLoop(){if(this._isPermanentFailure||this._isDisposed)return;const e=a0(this._connectionType,this.reconnectionToken,!0);this._options.logService.info(`${e} starting reconnecting loop. You can get more information with the trace log level.`),this._onDidStateChange.fire(new ONe(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData()));const t=[0,5,5,10,10,10,10,10,30];let n=-1;do{n++;const s=n<t.length?t[n]:t[t.length-1];try{if(s>0){const r=hie(s);this._onDidStateChange.fire(new MNe(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),s,r)),this._options.logService.info(`${e} waiting for ${s} seconds before reconnecting...`);try{await r}catch{}}if(this._isPermanentFailure){this._options.logService.error(`${e} permanent failure occurred while running the reconnecting loop.`);break}this._onDidStateChange.fire(new BNe(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),n+1)),this._options.logService.info(`${e} resolving connection...`);const o=await sR(this._options,this.reconnectionToken,this.protocol);this._options.logService.info(`${e} connecting to ${o.connectTo}...`),await this._reconnect(o,r7(kNe)),this._options.logService.info(`${e} reconnected!`),this._onDidStateChange.fire(new kU(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),n+1));break}catch(o){if(o.code==="VSCODE_CONNECTION_ERROR"){this._options.logService.error(`${e} A permanent error occurred in the reconnecting loop! Will give up now! Error:`),this._options.logService.error(o),this._onReconnectionPermanentFailure(this.protocol.getMillisSinceLastIncomingData(),n+1,!1);break}if(n>360){this._options.logService.error(`${e} An error occurred while reconnecting, but it will be treated as a permanent error because the reconnection grace time has expired! Will give up now! Error:`),this._options.logService.error(o),this._onReconnectionPermanentFailure(this.protocol.getMillisSinceLastIncomingData(),n+1,!1);break}if(Ad.isTemporarilyNotAvailable(o)){this._options.logService.info(`${e} A temporarily not available error occurred while trying to reconnect, will try again...`),this._options.logService.trace(o);continue}if((o.code==="ETIMEDOUT"||o.code==="ENETUNREACH"||o.code==="ECONNREFUSED"||o.code==="ECONNRESET")&&o.syscall==="connect"){this._options.logService.info(`${e} A network error occurred while trying to reconnect, will try again...`),this._options.logService.trace(o);continue}if(lf(o)){this._options.logService.info(`${e} A promise cancelation error occurred while trying to reconnect, will try again...`),this._options.logService.trace(o);continue}if(o instanceof Ad){this._options.logService.error(`${e} A RemoteAuthorityResolverError occurred while trying to reconnect. Will give up now! Error:`),this._options.logService.error(o),this._onReconnectionPermanentFailure(this.protocol.getMillisSinceLastIncomingData(),n+1,Ad.isHandled(o));break}this._options.logService.error(`${e} An unknown error occurred while trying to reconnect, since this is an unknown case, it will be treated as a permanent error! Will give up now! Error:`),this._options.logService.error(o),this._onReconnectionPermanentFailure(this.protocol.getMillisSinceLastIncomingData(),n+1,!1);break}}while(!this._isPermanentFailure&&!this._isDisposed)}_onReconnectionPermanentFailure(e,t,n){this._reconnectionFailureIsFatal?Tc.triggerPermanentFailure(e,t,n):this._gotoPermanentFailure(e,t,n)}_gotoPermanentFailure(e,t,n){this._onDidStateChange.fire(new FNe(this.reconnectionToken,e,t,n)),oR(this.protocol)}_pauseSocketWriting(){this.protocol.pauseSocketWriting()}}class VNe extends Tc{static{Ji(this,"ManagementPersistentConnection")}client;constructor(e,t,n,s,o){super(1,e,s,o,!0),this.client=this._register(new o7(o,{remoteAuthority:t,clientId:n},e.ipcLogger))}async _reconnect(e,t){await c7(e,t)}}class WNe extends Tc{static{Ji(this,"ExtensionHostPersistentConnection")}_startArguments;debugPort;constructor(e,t,n,s,o){super(2,e,n,s,!1),this._startArguments=t,this.debugPort=o}async _reconnect(e,t){await d7(e,this._startArguments,t)}}function oR(i){try{i.acceptDisconnect();const e=i.getSocket();i.dispose(),e.dispose()}catch(e){Kt(e)}}Ji(oR,"safeDisposeProtocolAndSocket");function u7(i){if(i&&i.type==="error"){const e=new Error(`Connection error: ${i.reason}`);return e.code="VSCODE_CONNECTION_ERROR",e}return null}Ji(u7,"getErrorFromMessage");function uie(i,e){for(;i.length<e;)i+=" ";return i}Ji(uie,"stringRightPad");function gie(i,e){return`[remote-connection][${uie(Xx(i),13)}][${e.substr(0,5)}]`}Ji(gie,"_commonLogPrefix");function a0(i,e,t){return`${gie(i,e)}[${t?"reconnect":"initial"}]`}Ji(a0,"commonLogPrefix");function rR(i,e){return`${a0(e,i.reconnectionToken,!!i.reconnectionProtocol)}[${i.connectTo}]`}Ji(rR,"connectLogPrefix");function g7(i){return`${Date.now()-i} ms`}Ji(g7,"logElapsed");const fie=De("remoteAgentService");var pie=Object.defineProperty,HNe=Object.getOwnPropertyDescriptor,HE=(i,e)=>pie(i,"name",{value:e,configurable:!0}),f7=(i,e,t,n)=>{for(var s=n>1?void 0:n?HNe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&pie(e,t,s),s},UE=(i,e)=>(t,n)=>e(t,n,i);Object.freeze({id:"application",order:100,title:g("applicationConfigurationTitle","Application"),type:"object"});const UNe=Object.freeze({id:"workbench",order:7,title:g("workbenchConfigurationTitle","Workbench"),type:"object"}),zNe=Object.freeze({id:"security",scope:vt.APPLICATION,title:g("securityConfigurationTitle","Security"),type:"object",order:7});Object.freeze({id:"problems",title:g("problemsConfigurationTitle","Problems"),type:"object",order:101});const $Ne=Object.freeze({id:"window",order:8,title:g("windowConfigurationTitle","Window"),type:"object"}),GNe={ConfigurationMigration:"base.contributions.configuration.migration"};class KNe{static{HE(this,"ConfigurationMigrationRegistry")}migrations=[];_onDidRegisterConfigurationMigrations=new x;onDidRegisterConfigurationMigration=this._onDidRegisterConfigurationMigrations.event;registerConfigurationMigrations(e){this.migrations.push(...e)}}const eA=new KNe;Xt.add(GNe.ConfigurationMigration,eA);let NU=class extends ${constructor(i,e){super(),this.configurationService=i,this.workspaceService=e,this._register(this.workspaceService.onDidChangeWorkspaceFolders(async t=>{for(const n of t.added)await this.migrateConfigurationsForFolder(n,eA.migrations)})),this.migrateConfigurations(eA.migrations),this._register(eA.onDidRegisterConfigurationMigration(t=>this.migrateConfigurations(t)))}static{HE(this,"ConfigurationMigrationWorkbenchContribution")}static ID="workbench.contrib.configurationMigration";async migrateConfigurations(i){await this.migrateConfigurationsForFolder(void 0,i);for(const e of this.workspaceService.getWorkspace().folders)await this.migrateConfigurationsForFolder(e,i)}async migrateConfigurationsForFolder(i,e){await Promise.all([e.map(t=>this.migrateConfigurationsForFolderAndOverride(t,i?.uri))])}async migrateConfigurationsForFolderAndOverride(i,e){const t=this.configurationService.inspect(i.key,{resource:e}),n=this.workspaceService.getWorkbenchState()===Mc.WORKSPACE?[["user",Ca.USER],["userLocal",Ca.USER_LOCAL],["userRemote",Ca.USER_REMOTE],["workspace",Ca.WORKSPACE],["workspaceFolder",Ca.WORKSPACE_FOLDER]]:[["user",Ca.USER],["userLocal",Ca.USER_LOCAL],["userRemote",Ca.USER_REMOTE],["workspace",Ca.WORKSPACE]];for(const[s,o]of n){const r=t[s];if(!r)continue;const a=[];if(r.value!==void 0){const l=await this.runMigration(i,s,r.value,e,void 0);for(const c of l??[])a.push([c,[]])}for(const{identifiers:l,value:c}of r.overrides??[])if(c!==void 0){const d=await this.runMigration(i,s,c,e,l);for(const h of d??[])a.push([h,l])}a.length&&await Promise.allSettled(a.map(async([[l,c],d])=>this.configurationService.updateValue(l,c.value,{resource:e,overrideIdentifiers:d},o)))}}async runMigration(i,e,t,n,s){const o=HE(a=>{const c=this.configurationService.inspect(a,{resource:n})[e];if(c)return s?c.overrides?.find(({identifiers:d})=>lo(d,s))?.value:c.value},"valueAccessor"),r=await i.migrateFn(t,o);return Array.isArray(r)?r:[[i.key,r]]}};NU=f7([UE(0,Pe),UE(1,po)],NU);let PU=class extends ${constructor(i){super(),this.remoteAgentService=i,this.create()}static{HE(this,"DynamicWorkbenchSecurityConfiguration")}static ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration";_ready=new jg;ready=this._ready.p;async create(){try{await this.doCreate()}finally{this._ready.complete()}}async doCreate(){if(!Nt&&(await this.remoteAgentService.getEnvironment())?.os!==Ts.Windows)return;Xt.as(uf.Configuration).registerConfiguration({...zNe,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:g("security.allowedUNCHosts.patternErrorMessage","UNC host names must not contain backslashes.")},default:[],markdownDescription:g("security.allowedUNCHosts","A set of UNC host names (without leading or trailing backslash, for example `192.168.0.1` or `my-server`) to allow without user confirmation. If a UNC host is being accessed that is not allowed via this setting or has not been acknowledged via user confirmation, an error will occur and the operation stopped. A restart is required when changing this setting. Find out more about this setting at https://aka.ms/vscode-windows-unc."),scope:vt.MACHINE},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:g("security.restrictUNCAccess","If enabled, only allows access to UNC host names that are allowed by the `#security.allowedUNCHosts#` setting or after user confirmation. Find out more about this setting at https://aka.ms/vscode-windows-unc."),scope:vt.MACHINE}}})}};PU=f7([UE(0,fie)],PU);const US="window.newWindowProfile";let RU=class extends ${constructor(i,e){super(),this.userDataProfilesService=i,this.configurationService=e,this.registerNewWindowProfileConfiguration(),this._register(this.userDataProfilesService.onDidChangeProfiles(t=>this.registerNewWindowProfileConfiguration())),this.setNewWindowProfile(),this.checkAndResetNewWindowProfileConfig(),this._register(e.onDidChangeConfiguration(t=>{t.source!==Ca.DEFAULT&&t.affectsConfiguration(US)&&this.setNewWindowProfile()})),this._register(this.userDataProfilesService.onDidChangeProfiles(()=>this.checkAndResetNewWindowProfileConfig()))}static{HE(this,"DynamicWindowConfiguration")}static ID="workbench.contrib.dynamicWindowConfiguration";configurationNode;newWindowProfile;registerNewWindowProfileConfiguration(){const i=Xt.as(uf.Configuration),e={...$Ne,properties:{[US]:{type:["string","null"],default:null,enum:[...this.userDataProfilesService.profiles.map(t=>t.name),null],enumItemLabels:[...this.userDataProfilesService.profiles.map(t=>""),g("active window","Active Window")],description:g("newWindowProfile","Specifies the profile to use when opening a new window. If a profile name is provided, the new window will use that profile. If no profile name is provided, the new window will use the profile of the active window or the Default profile if no active window exists."),scope:vt.APPLICATION}}};this.configurationNode?i.updateConfigurations({add:[e],remove:[this.configurationNode]}):i.registerConfiguration(e),this.configurationNode=e}setNewWindowProfile(){const i=this.configurationService.getValue(US);this.newWindowProfile=i?this.userDataProfilesService.profiles.find(e=>e.name===i):void 0}checkAndResetNewWindowProfileConfig(){const i=this.configurationService.getValue(US);if(!i)return;const e=this.newWindowProfile?this.userDataProfilesService.profiles.find(t=>t.id===this.newWindowProfile.id):void 0;i!==e?.name&&this.configurationService.updateValue(US,e?.name)}};RU=f7([UE(0,dLe),UE(1,Pe)],RU);var jNe=Object.defineProperty,mie=(i,e)=>jNe(i,"name",{value:e,configurable:!0});const aR=De("editorResolverService"),qNe=Xt.as(uf.Configuration),YNe={...UNe,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:g("editor.editorAssociations",'Configure [glob patterns](https://aka.ms/vscode-glob-patterns) to editors (for example `"*.hex": "hexEditor.hexedit"`). These have precedence over the default behavior.'),additionalProperties:{type:"string"}}}};qNe.registerConfiguration(YNe);function ZNe(i){switch(i){case"exclusive":return 5;case"default":return 4;case"builtin":return 3;case"option":default:return 1}}mie(ZNe,"priorityToRank");function XNe(i,e){if(new Set([Ve.extension,Ve.webviewPanel,Ve.vscodeWorkspaceTrust,Ve.vscodeSettings]).has(e.scheme))return!1;const s=typeof i=="string"&&i.indexOf(kt.sep)>=0?`${e.scheme}:${e.path}`:lh(e);return AH(typeof i=="string"?i.toLowerCase():i,s.toLowerCase())}mie(XNe,"globMatchesResource");var _ie=Object.defineProperty,QNe=Object.getOwnPropertyDescriptor,p7=(i,e)=>_ie(i,"name",{value:e,configurable:!0}),JNe=(i,e,t,n)=>{for(var s=n>1?void 0:n?QNe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&_ie(e,t,s),s},AI=(i,e)=>(t,n)=>e(t,n,i);const ePe=new ie("workbenchState",void 0,{type:"string",description:g("workbenchState","The kind of workspace opened in the window, either 'empty' (no workspace), 'folder' (single folder) or 'workspace' (multi-root workspace)")}),tPe=new ie("workspaceFolderCount",0,g("workspaceFolderCount","The number of root folders in the workspace")),iPe=new ie("openFolderWorkspaceSupport",!0,!0),nPe=new ie("enterMultiRootWorkspaceSupport",!0,!0),sPe=new ie("emptyWorkspaceSupport",!0,!0),oPe=new ie("dirtyWorkingCopies",!1,g("dirtyWorkingCopies","Whether there are any working copies with unsaved changes")),rPe=new ie("remoteName","",g("remoteName","The name of the remote the window is connected to or an empty string if not connected to any remote")),aPe=new ie("virtualWorkspace","",g("virtualWorkspace","The scheme of the current workspace is from a virtual file system or an empty string.")),lPe=new ie("temporaryWorkspace",!1,g("temporaryWorkspace","The scheme of the current workspace is from a temporary file system.")),ef=new ie("isFullscreen",!1,g("isFullscreen","Whether the main window is in fullscreen mode")),dc=new ie("isAuxiliaryWindowFocusedContext",!1,g("isAuxiliaryWindowFocusedContext","Whether an auxiliary window is focused")),cPe=new ie("hasWebFileSystemAccess",!1,!0),dPe=new ie("embedderIdentifier",void 0,g("embedderIdentifier","The identifier of the embedder according to the product service, if one is defined"));new ie("activeEditorIsDirty",!1,g("activeEditorIsDirty","Whether the active editor has unsaved changes"));const hPe=new ie("activeEditorIsNotPreview",!1,g("activeEditorIsNotPreview","Whether the active editor is not in preview mode")),uPe=new ie("activeEditorIsFirstInGroup",!1,g("activeEditorIsFirstInGroup","Whether the active editor is the first one in its group")),gPe=new ie("activeEditorIsLastInGroup",!1,g("activeEditorIsLastInGroup","Whether the active editor is the last one in its group")),aV=new ie("activeEditorIsPinned",!1,g("activeEditorIsPinned","Whether the active editor is pinned"));new ie("activeEditorIsReadonly",!1,g("activeEditorIsReadonly","Whether the active editor is read-only"));const fPe=new ie("activeCompareEditorCanSwap",!1,g("activeCompareEditorCanSwap","Whether the active compare editor can swap sides"));new ie("activeEditorCanToggleReadonly",!0,g("activeEditorCanToggleReadonly","Whether the active editor can toggle between being read-only or writeable"));new ie("activeEditorCanRevert",!1,g("activeEditorCanRevert","Whether the active editor can revert"));const tA=new ie("activeEditorCanSplitInGroup",!0),pPe=new ie("activeEditor",null,{type:"string",description:g("activeEditor","The identifier of the active editor")}),m7=new ie("activeEditorAvailableEditorIds","",g("activeEditorAvailableEditorIds","The available editor identifiers that are usable for the active editor")),OU=new ie("textCompareEditorVisible",!1,g("textCompareEditorVisible","Whether a text compare editor is visible")),l0=new ie("textCompareEditorActive",!1,g("textCompareEditorActive","Whether a text compare editor is active")),Ep=new ie("sideBySideEditorActive",!1,g("sideBySideEditorActive","Whether a side by side editor is active"));new ie("groupEditorsCount",0,g("groupEditorsCount","The number of opened editor groups"));const lR=new ie("activeEditorGroupEmpty",!1,g("activeEditorGroupEmpty","Whether the active editor group is empty")),mPe=new ie("activeEditorGroupIndex",0,g("activeEditorGroupIndex","The index of the active editor group")),_Pe=new ie("activeEditorGroupLast",!1,g("activeEditorGroupLast","Whether the active editor group is the last group")),Qx=new ie("activeEditorGroupLocked",!1,g("activeEditorGroupLocked","Whether the active editor group is locked")),SD=new ie("multipleEditorGroups",!1,g("multipleEditorGroups","Whether there are multiple editor groups opened"));SD.toNegated();new ie("multipleEditorsSelectedInGroup",!1,g("multipleEditorsSelectedInGroup","Whether multiple editors have been selected in an editor group"));new ie("twoEditorsSelectedInGroup",!1,g("twoEditorsSelectedInGroup","Whether exactly two editors have been selected in an editor group"));new ie("SelectedEditorsInGroupFileOrUntitledResourceContextKey",!0,g("SelectedEditorsInGroupFileOrUntitledResourceContextKey","Whether all selected editors in a group have a file or untitled resource associated"));const _7=new ie("editorPartMultipleEditorGroups",!1,g("editorPartMultipleEditorGroups","Whether there are multiple editor groups opened in an editor part"));_7.toNegated();const D1=new ie("editorPartMaximizedEditorGroup",!1,g("editorPartEditorGroupMaximized","Editor Part has a maximized group"));new ie("isAuxiliaryEditorPart",!1,g("isAuxiliaryEditorPart","Editor Part is in an auxiliary window"));const bPe=new ie("editorIsOpen",!1,g("editorIsOpen","Whether an editor is open")),oc=new ie("inZenMode",!1,g("inZenMode","Whether Zen mode is enabled")),b7=new ie("isCenteredLayout",!1,g("isMainEditorCenteredLayout","Whether centered layout is enabled for the main editor")),vPe=new ie("splitEditorsVertically",!1,g("splitEditorsVertically","Whether editors split vertically")),bie=new ie("mainEditorAreaVisible",!0,g("mainEditorAreaVisible","Whether the editor area in the main window is visible")),wPe=new ie("editorTabsVisible",!0,g("editorTabsVisible","Whether editor tabs are visible")),vg=new ie("sideBarVisible",!1,g("sideBarVisible","Whether the sidebar is visible")),CPe=new ie("sideBarFocus",!1,g("sideBarFocus","Whether the sidebar has keyboard focus")),yPe=new ie("activeViewlet","",g("activeViewlet","The identifier of the active viewlet")),pS=new ie("statusBarFocused",!1,g("statusBarFocused","Whether the status bar has keyboard focus")),zE=new ie("titleBarStyle",Gi?"native":"custom",g("titleBarStyle","Style of the window title bar")),ED=new ie("titleBarVisible",!1,g("titleBarVisible","Whether the title bar is visible"));new ie("bannerFocused",!1,g("bannerFocused","Whether the banner has keyboard focus"));const Cc=new ie("notificationFocus",!0,g("notificationFocus","Whether a notification has keyboard focus")),Jx=new ie("notificationCenterVisible",!1,g("notificationCenterVisible","Whether the notifications center is visible")),zu=new ie("notificationToastsVisible",!1,g("notificationToastsVisible","Whether a notification toast is visible")),SPe=new ie("activeAuxiliary","",g("activeAuxiliary","The identifier of the active auxiliary panel")),EPe=new ie("auxiliaryBarFocus",!1,g("auxiliaryBarFocus","Whether the auxiliary bar has keyboard focus")),Og=new ie("auxiliaryBarVisible",!1,g("auxiliaryBarVisible","Whether the auxiliary bar is visible")),LPe=new ie("activePanel","",g("activePanel","The identifier of the active panel")),DPe=new ie("panelFocus",!1,g("panelFocus","Whether the panel has keyboard focus")),V_=new ie("panelPosition","bottom",g("panelPosition","The position of the panel, always 'bottom'")),wg=new ie("panelAlignment","center",g("panelAlignment","The alignment of the panel, either 'center', 'left', 'right' or 'justify'")),gy=new ie("panelVisible",!1,g("panelVisible","Whether the panel is visible")),vie=new ie("panelMaximized",!1,g("panelMaximized","Whether the panel is maximized")),uu=new ie("focusedView","",g("focusedView","The identifier of the view that has keyboard focus"));function IPe(i){return`view.${i}.visible`}p7(IPe,"getVisbileViewContextKey");let Lc=class{constructor(i,e,t,n){this._contextKeyService=i,this._fileService=e,this._languageService=t,this._modelService=n,this._schemeKey=Lc.Scheme.bindTo(this._contextKeyService),this._filenameKey=Lc.Filename.bindTo(this._contextKeyService),this._dirnameKey=Lc.Dirname.bindTo(this._contextKeyService),this._pathKey=Lc.Path.bindTo(this._contextKeyService),this._langIdKey=Lc.LangId.bindTo(this._contextKeyService),this._resourceKey=Lc.Resource.bindTo(this._contextKeyService),this._extensionKey=Lc.Extension.bindTo(this._contextKeyService),this._hasResource=Lc.HasResource.bindTo(this._contextKeyService),this._isFileSystemResource=Lc.IsFileSystemResource.bindTo(this._contextKeyService),this._disposables.add(e.onDidChangeFileSystemProviderRegistrations(()=>{const s=this.get();this._isFileSystemResource.set(!!(s&&e.hasProvider(s)))})),this._disposables.add(n.onModelAdded(s=>{Ta(s.uri,this.get())&&this._setLangId()})),this._disposables.add(n.onModelLanguageChanged(s=>{Ta(s.model.uri,this.get())&&this._setLangId()}))}static{p7(this,"ResourceContextKey")}static Scheme=new ie("resourceScheme",void 0,{type:"string",description:g("resourceScheme","The scheme of the resource")});static Filename=new ie("resourceFilename",void 0,{type:"string",description:g("resourceFilename","The file name of the resource")});static Dirname=new ie("resourceDirname",void 0,{type:"string",description:g("resourceDirname","The folder name the resource is contained in")});static Path=new ie("resourcePath",void 0,{type:"string",description:g("resourcePath","The full path of the resource")});static LangId=new ie("resourceLangId",void 0,{type:"string",description:g("resourceLangId","The language identifier of the resource")});static Resource=new ie("resource",void 0,{type:"URI",description:g("resource","The full value of the resource including scheme and path")});static Extension=new ie("resourceExtname",void 0,{type:"string",description:g("resourceExtname","The extension name of the resource")});static HasResource=new ie("resourceSet",void 0,{type:"boolean",description:g("resourceSet","Whether a resource is present or not")});static IsFileSystemResource=new ie("isFileSystemResource",void 0,{type:"boolean",description:g("isFileSystemResource","Whether the resource is backed by a file system provider")});_disposables=new te;_value;_resourceKey;_schemeKey;_filenameKey;_dirnameKey;_pathKey;_langIdKey;_extensionKey;_hasResource;_isFileSystemResource;dispose(){this._disposables.dispose()}_setLangId(){const i=this.get();if(!i){this._langIdKey.set(null);return}const e=this._modelService.getModel(i)?.getLanguageId()??this._languageService.guessLanguageIdByFilepathOrFirstLine(i);this._langIdKey.set(e)}set(i){i=i??void 0,!Ta(this._value,i)&&(this._value=i,this._contextKeyService.bufferChangeEvents(()=>{this._resourceKey.set(i?i.toString():null),this._schemeKey.set(i?i.scheme:null),this._filenameKey.set(i?lh(i):null),this._dirnameKey.set(i?this.uriToPath(zy(i)):null),this._pathKey.set(i?this.uriToPath(i):null),this._setLangId(),this._extensionKey.set(i?v5(i):null),this._hasResource.set(!!i),this._isFileSystemResource.set(i?this._fileService.hasProvider(i):!1)}))}uriToPath(i){return i.scheme===Ve.file?i.fsPath:i.path}reset(){this._value=void 0,this._contextKeyService.bufferChangeEvents(()=>{this._resourceKey.reset(),this._schemeKey.reset(),this._filenameKey.reset(),this._dirnameKey.reset(),this._pathKey.reset(),this._langIdKey.reset(),this._extensionKey.reset(),this._hasResource.reset(),this._isFileSystemResource.reset()})}get(){return this._value}};Lc=JNe([AI(0,Ye),AI(1,la),AI(2,Ra),AI(3,Zc)],Lc);function wie(i,e,t){if(!e){i.set("");return}const n=e.resource;if(n?.scheme===Ve.untitled&&e.editorId!==OP.id)i.set("");else{const s=n?t.getEditors(n).map(o=>o.id):[];i.set(s.join(","))}}p7(wie,"applyAvailableEditorIds");var TPe=Object.defineProperty,APe=(i,e)=>TPe(i,"name",{value:e,configurable:!0});const xPe={Quickaccess:"workbench.contributions.quickaccess"};class kPe{static{APe(this,"QuickAccessRegistry")}providers=[];defaultProvider=void 0;registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),ye(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return To([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}clear(){const e=[...this.providers],t=this.defaultProvider;return this.providers=[],this.defaultProvider=void 0,()=>{this.providers=e,this.defaultProvider=t}}}Xt.add(xPe.Quickaccess,new kPe);var NPe=Object.defineProperty,mo=(i,e)=>NPe(i,"name",{value:e,configurable:!0});const Dw=new cr(()=>{const i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:i,collatorIsNumeric:i.resolvedOptions().numeric}}),mS=new cr(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),v7=new cr(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function cR(i,e,t=!1){const n=i||"",s=e||"",o=Dw.value.collator.compare(n,s);return Dw.value.collatorIsNumeric&&o===0&&n!==s?n<s?-1:1:o}mo(cR,"compareFileNames");function PPe(i,e){const t=mS.value.collator;return i=i||"",e=e||"",gu(t,i,e)}mo(PPe,"compareFileNamesDefault");function RPe(i,e){const t=mS.value.collator;return i=i||"",e=e||"",C7(i,e)||gu(t,i,e)}mo(RPe,"compareFileNamesUpper");function OPe(i,e){const t=mS.value.collator;return i=i||"",e=e||"",w7(i,e)||gu(t,i,e)}mo(OPe,"compareFileNamesLower");function MPe(i,e){return i=i||"",e=e||"",i===e?0:i<e?-1:1}mo(MPe,"compareFileNamesUnicode");function BPe(i,e){const[t,n]=lV(i),[s,o]=lV(e);let r=Dw.value.collator.compare(n,o);if(r===0){if(Dw.value.collatorIsNumeric&&n!==o)return n<o?-1:1;if(r=Dw.value.collator.compare(t,s),Dw.value.collatorIsNumeric&&r===0&&t!==s)return t<s?-1:1}return r}mo(BPe,"compareFileExtensions");function FPe(i,e){i=i||"",e=e||"";const t=tf(i),n=tf(e),s=mS.value.collator,o=v7.value.collator;return gu(o,t,n)||gu(s,i,e)}mo(FPe,"compareFileExtensionsDefault");function VPe(i,e){i=i||"",e=e||"";const t=tf(i),n=tf(e),s=mS.value.collator,o=v7.value.collator;return gu(o,t,n)||C7(i,e)||gu(s,i,e)}mo(VPe,"compareFileExtensionsUpper");function WPe(i,e){i=i||"",e=e||"";const t=tf(i),n=tf(e),s=mS.value.collator,o=v7.value.collator;return gu(o,t,n)||w7(i,e)||gu(s,i,e)}mo(WPe,"compareFileExtensionsLower");function HPe(i,e){i=i||"",e=e||"";const t=tf(i).toLowerCase(),n=tf(e).toLowerCase();return t!==n?t<n?-1:1:i!==e?i<e?-1:1:0}mo(HPe,"compareFileExtensionsUnicode");const Cie=/^(.*?)(\.([^.]*))?$/;function lV(i,e=!1){const t=i?Cie.exec(i):[];let n=[t&&t[1]||"",t&&t[3]||""];return e&&(!n[0]&&n[1]||n[0]&&n[0].charAt(0)===".")&&(n=[n[0]+"."+n[1],""]),n}mo(lV,"extractNameAndExtension");function tf(i){const e=i?Cie.exec(i):[];return e&&e[1]&&e[1].charAt(0)!=="."&&e[3]||""}mo(tf,"extractExtension");function gu(i,e,t){const n=i.compare(e,t);return n!==0?n:e.length!==t.length?e.length<t.length?-1:1:0}mo(gu,"compareAndDisambiguateByLength");function $E(i){const e=i.charAt(0);return e.toLocaleUpperCase()!==e}mo($E,"startsWithLower");function GE(i){const e=i.charAt(0);return e.toLocaleLowerCase()!==e}mo(GE,"startsWithUpper");function w7(i,e){return $E(i)&&GE(e)?-1:GE(i)&&$E(e)?1:0}mo(w7,"compareCaseLowerFirst");function C7(i,e){return GE(i)&&$E(e)?-1:$E(i)&&GE(e)?1:0}mo(C7,"compareCaseUpperFirst");function yie(i,e,t=!1){return t||(i=i&&i.toLowerCase(),e=e&&e.toLowerCase()),i===e?0:i<e?-1:1}mo(yie,"comparePathComponents");function UPe(i,e,t=!1){const n=i.split($s),s=e.split($s),o=n.length-1,r=s.length-1;let a,l;for(let c=0;;c++){if(a=o===c,l=r===c,a&&l)return cR(n[c],s[c],t);if(a)return-1;if(l)return 1;const d=yie(n[c],s[c],t);if(d!==0)return d}}mo(UPe,"comparePaths");function iA(i,e,t){const n=i.toLowerCase(),s=e.toLowerCase(),o=Sie(i,e,t);if(o)return o;const r=n.endsWith(t),a=s.endsWith(t);if(r!==a)return r?-1:1;const l=cR(n,s);return l!==0?l:n.localeCompare(s)}mo(iA,"compareAnything");function Sie(i,e,t){const n=i.toLowerCase(),s=e.toLowerCase(),o=n.startsWith(t),r=s.startsWith(t);if(o!==r)return o?-1:1;if(o&&r){if(n.length<s.length)return-1;if(n.length>s.length)return 1}return 0}mo(Sie,"compareByPrefix");var zPe=Object.defineProperty,ps=(i,e)=>zPe(i,"name",{value:e,configurable:!0});const ek=0,MU=[ek,[]];function cV(i,e,t,n){if(!i||!e)return MU;const s=i.length,o=e.length;if(s<o)return MU;const r=i.toLowerCase();return Eie(e,t,o,i,r,s,n)}ps(cV,"scoreFuzzy");function Eie(i,e,t,n,s,o,r){const a=[],l=[];for(let u=0;u<t;u++){const f=u*o,p=f-o,m=u>0,_=i[u],w=e[u];for(let v=0;v<o;v++){const b=v>0,C=f+v,S=C-1,D=p+v-1,T=b?a[S]:0,I=m&&b?a[D]:0,R=m&&b?l[D]:0;let G;!I&&m?G=0:G=Lie(_,w,n,s,v,R),G&&I+G>=T&&(r||m||s.startsWith(e,v))?(l[C]=R+1,a[C]=I+G):(l[C]=ek,a[C]=T)}}const c=[];let d=t-1,h=o-1;for(;d>=0&&h>=0;){const u=d*o+h;l[u]===ek||(c.push(h),d--),h--}return[a[t*o-1],c.reverse()]}ps(Eie,"doScoreFuzzy");function Lie(i,e,t,n,s,o){let r=0;if(!Die(e,n[s]))return r;if(r+=1,o>0&&(r+=o*5),i===t[s]&&(r+=1),s===0)r+=8;else{const a=Iie(t.charCodeAt(s-1));a?r+=a:Jy(t.charCodeAt(s))&&o===0&&(r+=2)}return r}ps(Lie,"computeCharScore");function Die(i,e){return i===e?!0:i==="/"||i==="\\"?e==="/"||e==="\\":!1}ps(Die,"considerAsEqual");function Iie(i){switch(i){case A.Slash:case A.Backslash:return 5;case A.Underline:case A.Dash:case A.Period:case A.Space:case A.SingleQuote:case A.DoubleQuote:case A.Colon:return 4;default:return 0}}ps(Iie,"scoreSeparatorAtPos");const Tie=[void 0,[]];function $Pe(i,e,t=0,n=0){const s=e;return s.values&&s.values.length>1?Aie(i,s.values,t,n):y7(i,e,t,n)}ps($Pe,"scoreFuzzy2");function Aie(i,e,t,n){let s=0;const o=[];for(const r of e){const[a,l]=y7(i,r,t,n);if(typeof a!="number")return Tie;s+=a,o.push(...l)}return[s,nk(o)]}ps(Aie,"doScoreFuzzy2Multiple");function y7(i,e,t,n){const s=Mb(e.original,e.originalLowercase,t,i,i.toLowerCase(),n,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return s?[s[0],cP(s)]:Tie}ps(y7,"doScoreFuzzy2Single");const tk=Object.freeze({score:0}),nA=1<<18,dV=1<<17,hV=65536;function xie(i,e,t,n){const s=n.values?n.values:[n];return Jd({[n.normalized]:{values:s.map(r=>({value:r.normalized,expectContiguousMatch:r.expectContiguousMatch})),label:i,description:e,allowNonContiguousMatches:t}})}ps(xie,"getCacheHash");function ik(i,e,t,n,s){if(!i||!e.normalized)return tk;const o=n.getItemLabel(i);if(!o)return tk;const r=n.getItemDescription(i),a=xie(o,r,t,e),l=s[a];if(l)return l;const c=kie(o,r,n.getItemPath(i),e,t);return s[a]=c,c}ps(ik,"scoreItemFuzzy");function kie(i,e,t,n,s){const o=!t||!n.containsPathSeparator;return t&&(Gi?n.pathNormalized===t:Gh(n.pathNormalized,t))?{score:nA,labelMatch:[{start:0,end:i.length}],descriptionMatch:e?[{start:0,end:e.length}]:void 0}:n.values&&n.values.length>1?Nie(i,e,t,n.values,o,s):S7(i,e,t,n,o,s)}ps(kie,"doScoreItemFuzzy");function Nie(i,e,t,n,s,o){let r=0;const a=[],l=[];for(const c of n){const{score:d,labelMatch:h,descriptionMatch:u}=S7(i,e,t,c,s,o);if(d===ek)return tk;r+=d,h&&a.push(...h),u&&l.push(...u)}return{score:r,labelMatch:nk(a),descriptionMatch:nk(l)}}ps(Nie,"doScoreItemFuzzyMultiple");function S7(i,e,t,n,s,o){if(s||!e){const[r,a]=cV(i,n.normalized,n.normalizedLowercase,o&&!n.expectContiguousMatch);if(r){const l=aE(n.normalized,i);let c;if(l){c=dV;const d=Math.round(n.normalized.length/i.length*100);c+=d}else c=hV;return{score:c+r,labelMatch:l||uV(a)}}}if(e){let r=e;t&&(r=`${e}${$s}`);const a=r.length,l=`${r}${i}`,[c,d]=cV(l,n.normalized,n.normalizedLowercase,o&&!n.expectContiguousMatch);if(c){const h=uV(d),u=[],f=[];return h.forEach(p=>{p.start<a&&p.end>a?(u.push({start:0,end:p.end-a}),f.push({start:p.start,end:a})):p.start>=a?u.push({start:p.start-a,end:p.end-a}):f.push(p)}),{score:c,labelMatch:u,descriptionMatch:f}}}return tk}ps(S7,"doScoreItemFuzzySingle");function uV(i){const e=[];if(!i)return e;let t;for(const n of i)t&&t.end===n?t.end+=1:(t={start:n,end:n+1},e.push(t));return e}ps(uV,"createMatches");function nk(i){const e=i.sort((s,o)=>s.start-o.start),t=[];let n;for(const s of e)!n||!Pie(n,s)?(n=s,t.push(s)):(n.start=Math.min(n.start,s.start),n.end=Math.max(n.end,s.end));return t}ps(nk,"normalizeMatches");function Pie(i,e){return!(i.end<e.start||e.end<i.start)}ps(Pie,"matchOverlaps");function Rie(i,e,t,n,s,o){const r=ik(i,t,n,s,o),a=ik(e,t,n,s,o),l=r.score,c=a.score;if((l===nA||c===nA)&&l!==c)return l===nA?-1:1;if(l>hV||c>hV){if(l!==c)return l>c?-1:1;if(l<dV&&c<dV){const _=Oie(r.labelMatch,a.labelMatch);if(_!==0)return _}const p=s.getItemLabel(i)||"",m=s.getItemLabel(e)||"";if(p.length!==m.length)return p.length-m.length}if(l!==c)return l>c?-1:1;const d=Array.isArray(r.labelMatch)&&r.labelMatch.length>0,h=Array.isArray(a.labelMatch)&&a.labelMatch.length>0;if(d&&!h)return-1;if(h&&!d)return 1;const u=gV(i,r,s),f=gV(e,a,s);return u&&f&&u!==f?f>u?-1:1:Mie(i,e,t,s)}ps(Rie,"compareItemsByFuzzyScore");function gV(i,e,t){let n=-1,s=-1;if(e.descriptionMatch&&e.descriptionMatch.length?n=e.descriptionMatch[0].start:e.labelMatch&&e.labelMatch.length&&(n=e.labelMatch[0].start),e.labelMatch&&e.labelMatch.length){if(s=e.labelMatch[e.labelMatch.length-1].end,e.descriptionMatch&&e.descriptionMatch.length){const o=t.getItemDescription(i);o&&(s+=o.length)}}else e.descriptionMatch&&e.descriptionMatch.length&&(s=e.descriptionMatch[e.descriptionMatch.length-1].end);return s-n}ps(gV,"computeLabelAndDescriptionMatchDistance");function Oie(i,e){if(!i&&!e||(!i||!i.length)&&(!e||!e.length))return 0;if(!e||!e.length)return-1;if(!i||!i.length)return 1;const t=i[0].start,s=i[i.length-1].end-t,o=e[0].start,a=e[e.length-1].end-o;return s===a?0:a<s?1:-1}ps(Oie,"compareByMatchLength");function Mie(i,e,t,n){const s=n.getItemLabel(i)||"",o=n.getItemLabel(e)||"",r=n.getItemDescription(i),a=n.getItemDescription(e),l=s.length+(r?r.length:0),c=o.length+(a?a.length:0);if(l!==c)return l-c;const d=n.getItemPath(i),h=n.getItemPath(e);return d&&h&&d.length!==h.length?d.length-h.length:s!==o?iA(s,o,t.normalized):r&&a&&r!==a?iA(r,a,t.normalized):d&&h&&d!==h?iA(d,h,t.normalized):0}ps(Mie,"fallbackCompare");function fV(i){return i.startsWith('"')&&i.endsWith('"')}ps(fV,"queryExpectsExactMatch");const Bie=" ";function sk(i){typeof i!="string"&&(i="");const e=i.toLowerCase(),{pathNormalized:t,normalized:n,normalizedLowercase:s}=pV(i),o=t.indexOf($s)>=0,r=fV(i);let a;const l=i.split(Bie);if(l.length>1)for(const c of l){const d=fV(c),{pathNormalized:h,normalized:u,normalizedLowercase:f}=pV(c);u&&(a||(a=[]),a.push({original:c,originalLowercase:c.toLowerCase(),pathNormalized:h,normalized:u,normalizedLowercase:f,expectContiguousMatch:d}))}return{original:i,originalLowercase:e,pathNormalized:t,normalized:n,normalizedLowercase:s,values:a,containsPathSeparator:o,expectContiguousMatch:r}}ps(sk,"prepareQuery");function pV(i){let e;Nt?e=i.replace(/\//g,$s):e=i.replace(/\\/g,$s);const t=NK(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}ps(pV,"normalizeQuery");function GPe(i){return Array.isArray(i)?sk(i.map(e=>e.original).join(Bie)):sk(i.original)}ps(GPe,"pieceToQuery");var KPe=Object.defineProperty,jPe=(i,e)=>KPe(i,"name",{value:e,configurable:!0}),E7=(i=>(i[i.NONE=0]="NONE",i[i.FIRST=1]="FIRST",i[i.SECOND=2]="SECOND",i[i.LAST=3]="LAST",i))(E7||{});class qPe{constructor(e){this.options=e}static{jPe(this,"QuickPickItemScorerAccessor")}getItemLabel(e){return e.label}getItemDescription(e){if(!this.options?.skipDescription)return e.description}getItemPath(e){if(!this.options?.skipPath)return e.resource?.scheme===Ve.file?e.resource.fsPath:e.resource?.path}}const BU=new qPe,ca=De("quickInputService");var YPe=Object.defineProperty,dR=(i,e)=>YPe(i,"name",{value:e,configurable:!0});function Fie(i,e,t){return sK({debugName:dR(()=>`Configuration Key "${i}"`,"debugName")},n=>t.onDidChangeConfiguration(s=>{s.affectsConfiguration(i)&&n(s)}),()=>t.getValue(i)??e)}dR(Fie,"observableConfigValue");function xh(i,e,t){const n=i.bindTo(e);return ov({debugName:dR(()=>`Set Context Key "${i.key}"`,"debugName")},s=>{n.set(t(s))})}dR(xh,"bindContextKey");var Vie=Object.defineProperty,ZPe=Object.getOwnPropertyDescriptor,Kb=(i,e)=>Vie(i,"name",{value:e,configurable:!0}),XPe=(i,e,t,n)=>{for(var s=n>1?void 0:n?ZPe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Vie(e,t,s),s},tM=(i,e)=>(t,n)=>e(t,n,i);const _S=De("accessibilitySignalService");let FU=class extends ${constructor(i,e,t){super(),this.configurationService=i,this.accessibilityService=e,this.telemetryService=t}static{Kb(this,"AccessibilitySignalService")}_serviceBrand;sounds=new Map;screenReaderAttached=pn(this,this.accessibilityService.onDidChangeScreenReaderOptimized,()=>this.accessibilityService.isScreenReaderOptimized());sentTelemetry=new Set;getEnabledState(i,e,t){return new lK(this._signalEnabledState.get({signal:i,userGesture:e,modality:t}))}async playSignal(i,e={}){const t=e.modality==="announcement"||e.modality===void 0,n=i.announcementMessage;t&&this.isAnnouncementEnabled(i,e.userGesture)&&n&&this.accessibilityService.status(n),(e.modality==="sound"||e.modality===void 0)&&this.isSoundEnabled(i,e.userGesture)&&(this.sendSignalTelemetry(i,e.source),await this.playSound(i.sound.getSound(),e.allowManyInParallel))}async playSignals(i){for(const s of i)this.sendSignalTelemetry("signal"in s?s.signal:s,"source"in s?s.source:void 0);const e=i.map(s=>"signal"in s?s.signal:s),t=e.filter(s=>this.isAnnouncementEnabled(s)).map(s=>s.announcementMessage);t.length&&this.accessibilityService.status(t.join(", "));const n=new Set(e.filter(s=>this.isSoundEnabled(s)).map(s=>s.sound.getSound()));await Promise.all(Array.from(n).map(s=>this.playSound(s,!0)))}sendSignalTelemetry(i,e){const t=this.accessibilityService.isScreenReaderOptimized(),n=i.name+(e?`::${e}`:"")+(t?"{screenReaderOptimized}":"");this.sentTelemetry.has(n)||this.getVolumeInPercent()===0||(this.sentTelemetry.add(n),this.telemetryService.publicLog2("signal.played",{signal:i.name,source:e??"",isScreenReaderOptimized:t}))}getVolumeInPercent(){const i=this.configurationService.getValue("accessibility.signalOptions.volume");return typeof i!="number"?50:Math.max(Math.min(i,100),0)}playingSounds=new Set;async playSound(i,e=!1){if(!e&&this.playingSounds.has(i))return;this.playingSounds.add(i);const t=Hp.asBrowserUri(`vs/platform/accessibilitySignal/browser/media/${i.fileName}`).toString(!0);try{const n=this.sounds.get(t);if(n)n.volume=this.getVolumeInPercent()/100,n.currentTime=0,await n.play();else{const s=await Wie(t,this.getVolumeInPercent()/100);this.sounds.set(t,s)}}catch(n){n.message.includes("play() can only be initiated by a user gesture")||console.error("Error while playing sound",n)}finally{this.playingSounds.delete(i)}}playSignalLoop(i,e){let t=!0;const n=Kb(()=>{t&&this.playSignal(i,{allowManyInParallel:!0}).finally(()=>{setTimeout(()=>{t&&n()},e)})},"playSound");return n(),ye(()=>t=!1)}_signalConfigValue=new PA(i=>Fie(i.settingsKey,{sound:"off",announcement:"off"},this.configurationService));_signalEnabledState=new PA({getCacheKey:iK},i=>ft(e=>{const t=this._signalConfigValue.get(i.signal).read(e);return!!((i.modality==="sound"||i.modality===void 0)&&mV(t.sound,()=>this.screenReaderAttached.read(e),i.userGesture)||(i.modality==="announcement"||i.modality===void 0)&&mV(t.announcement,()=>this.screenReaderAttached.read(e),i.userGesture))}).recomputeInitiallyAndOnChange(this._store));isAnnouncementEnabled(i,e){return i.announcementMessage?this._signalEnabledState.get({signal:i,userGesture:!!e,modality:"announcement"}).get():!1}isSoundEnabled(i,e){return this._signalEnabledState.get({signal:i,userGesture:!!e,modality:"sound"}).get()}onSoundEnabledChanged(i){return this.getEnabledState(i,!1).onDidChange}getDelayMs(i,e,t){if(!this.configurationService.getValue("accessibility.signalOptions.debouncePositionChanges"))return 0;let n;return i.name===Yt.errorAtPosition.name&&t==="positional"?n=this.configurationService.getValue("accessibility.signalOptions.experimental.delays.errorAtPosition"):i.name===Yt.warningAtPosition.name&&t==="positional"?n=this.configurationService.getValue("accessibility.signalOptions.experimental.delays.warningAtPosition"):n=this.configurationService.getValue("accessibility.signalOptions.experimental.delays.general"),e==="sound"?n.sound:n.announcement}};FU=XPe([tM(0,Pe),tM(1,hf),tM(2,rs)],FU);function mV(i,e,t){return i==="on"||i==="always"||i==="auto"&&e()||i==="userGesture"&&t}Kb(mV,"checkEnabledState");function Wie(i,e){return new Promise((t,n)=>{const s=new Audio(i);s.volume=e,s.addEventListener("ended",()=>{t(s)}),s.addEventListener("error",o=>{n(o.error)}),s.play().catch(o=>{n(o)})})}Kb(Wie,"playAudio");class bt{constructor(e){this.fileName=e}static{Kb(this,"Sound")}static register(e){return new bt(e.fileName)}static error=bt.register({fileName:"error.mp3"});static warning=bt.register({fileName:"warning.mp3"});static success=bt.register({fileName:"success.mp3"});static foldedArea=bt.register({fileName:"foldedAreas.mp3"});static break=bt.register({fileName:"break.mp3"});static quickFixes=bt.register({fileName:"quickFixes.mp3"});static taskCompleted=bt.register({fileName:"taskCompleted.mp3"});static taskFailed=bt.register({fileName:"taskFailed.mp3"});static terminalBell=bt.register({fileName:"terminalBell.mp3"});static diffLineInserted=bt.register({fileName:"diffLineInserted.mp3"});static diffLineDeleted=bt.register({fileName:"diffLineDeleted.mp3"});static diffLineModified=bt.register({fileName:"diffLineModified.mp3"});static chatRequestSent=bt.register({fileName:"chatRequestSent.mp3"});static chatResponseReceived1=bt.register({fileName:"chatResponseReceived1.mp3"});static chatResponseReceived2=bt.register({fileName:"chatResponseReceived2.mp3"});static chatResponseReceived3=bt.register({fileName:"chatResponseReceived3.mp3"});static chatResponseReceived4=bt.register({fileName:"chatResponseReceived4.mp3"});static clear=bt.register({fileName:"clear.mp3"});static save=bt.register({fileName:"save.mp3"});static format=bt.register({fileName:"format.mp3"});static voiceRecordingStarted=bt.register({fileName:"voiceRecordingStarted.mp3"});static voiceRecordingStopped=bt.register({fileName:"voiceRecordingStopped.mp3"});static progress=bt.register({fileName:"progress.mp3"})}class QPe{constructor(e){this.randomOneOf=e}static{Kb(this,"SoundSource")}getSound(e=!1){if(e||this.randomOneOf.length===1)return this.randomOneOf[0];{const t=Math.floor(Math.random()*this.randomOneOf.length);return this.randomOneOf[t]}}}class Yt{constructor(e,t,n,s,o,r){this.sound=e,this.name=t,this.legacySoundSettingsKey=n,this.settingsKey=s,this.legacyAnnouncementSettingsKey=o,this.announcementMessage=r}static{Kb(this,"AccessibilitySignal")}static _signals=new Set;static register(e){const t=new QPe("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),n=new Yt(t,e.name,e.legacySoundSettingsKey,e.settingsKey,e.legacyAnnouncementSettingsKey,e.announcementMessage);return Yt._signals.add(n),n}static get allAccessibilitySignals(){return[...this._signals]}static errorAtPosition=Yt.register({name:g("accessibilitySignals.positionHasError.name","Error at Position"),sound:bt.error,announcementMessage:g("accessibility.signals.positionHasError","Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"});static warningAtPosition=Yt.register({name:g("accessibilitySignals.positionHasWarning.name","Warning at Position"),sound:bt.warning,announcementMessage:g("accessibility.signals.positionHasWarning","Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"});static errorOnLine=Yt.register({name:g("accessibilitySignals.lineHasError.name","Error on Line"),sound:bt.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:g("accessibility.signals.lineHasError","Error on Line"),settingsKey:"accessibility.signals.lineHasError"});static warningOnLine=Yt.register({name:g("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:bt.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:g("accessibility.signals.lineHasWarning","Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"});static foldedArea=Yt.register({name:g("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:bt.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:g("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"});static break=Yt.register({name:g("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:bt.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:g("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"});static inlineSuggestion=Yt.register({name:g("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:bt.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"});static terminalQuickFix=Yt.register({name:g("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:bt.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:g("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"});static onDebugBreak=Yt.register({name:g("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:bt.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:g("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"});static noInlayHints=Yt.register({name:g("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:bt.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:g("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"});static taskCompleted=Yt.register({name:g("accessibilitySignals.taskCompleted","Task Completed"),sound:bt.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:g("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"});static taskFailed=Yt.register({name:g("accessibilitySignals.taskFailed","Task Failed"),sound:bt.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:g("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"});static terminalCommandFailed=Yt.register({name:g("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:bt.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:g("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"});static terminalCommandSucceeded=Yt.register({name:g("accessibilitySignals.terminalCommandSucceeded","Terminal Command Succeeded"),sound:bt.success,announcementMessage:g("accessibility.signals.terminalCommandSucceeded","Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"});static terminalBell=Yt.register({name:g("accessibilitySignals.terminalBell","Terminal Bell"),sound:bt.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:g("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"});static notebookCellCompleted=Yt.register({name:g("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:bt.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:g("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"});static notebookCellFailed=Yt.register({name:g("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:bt.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:g("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"});static diffLineInserted=Yt.register({name:g("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:bt.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"});static diffLineDeleted=Yt.register({name:g("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:bt.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"});static diffLineModified=Yt.register({name:g("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:bt.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"});static chatRequestSent=Yt.register({name:g("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:bt.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:g("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"});static chatResponseReceived=Yt.register({name:g("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[bt.chatResponseReceived1,bt.chatResponseReceived2,bt.chatResponseReceived3,bt.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"});static progress=Yt.register({name:g("accessibilitySignals.progress","Progress"),sound:bt.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:g("accessibility.signals.progress","Progress"),settingsKey:"accessibility.signals.progress"});static clear=Yt.register({name:g("accessibilitySignals.clear","Clear"),sound:bt.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:g("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"});static save=Yt.register({name:g("accessibilitySignals.save","Save"),sound:bt.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:g("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"});static format=Yt.register({name:g("accessibilitySignals.format","Format"),sound:bt.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:g("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"});static voiceRecordingStarted=Yt.register({name:g("accessibilitySignals.voiceRecordingStarted","Voice Recording Started"),sound:bt.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"});static voiceRecordingStopped=Yt.register({name:g("accessibilitySignals.voiceRecordingStopped","Voice Recording Stopped"),sound:bt.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"})}var Hie=Object.defineProperty,JPe=Object.getOwnPropertyDescriptor,za=(i,e)=>Hie(i,"name",{value:e,configurable:!0}),eRe=(i,e,t,n)=>{for(var s=n>1?void 0:n?JPe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Hie(e,t,s),s},VU=(i,e)=>(t,n)=>e(t,n,i);const _V="notifications.showList",KE="notifications.hideList",tRe="notifications.toggleList",iM="notifications.hideToasts",WU="notifications.focusToasts",iRe="notifications.focusNextToast",nRe="notifications.focusPreviousToast",sRe="notifications.focusFirstToast",oRe="notifications.focusLastToast",bV="notification.collapse",vV="notification.expand",HU="notification.acceptPrimaryAction",rRe="notification.toggle",wV="notification.clear",ok="notifications.clearAll",rk="notifications.toggleDoNotDisturbMode",ak="notifications.toggleDoNotDisturbModeBySource";function op(i,e){if(i0(e))return e;const t=i.lastFocusedList;if(t instanceof FE){let n=t.getFocusedElements()[0];if(i0(n)||t.isDOMFocused()&&(n=t.element(0)),i0(n))return n}}za(op,"getNotificationFromContext");function Uie(i,e,t){gt.registerCommandAndKeybindingRule({id:_V,weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|M.Shift|E.KeyN),handler:za(()=>{e.hide(),i.show()},"handler")}),gt.registerCommandAndKeybindingRule({id:KE,weight:Ce.WorkbenchContrib+50,when:Jx,primary:E.Escape,handler:za(s=>{const o=s.get(rs);for(const r of t.notifications)r.visible&&o.publicLog2("notification:hide",VE(r.message.original,r.sourceId,r.priority===Ul.SILENT));i.hide()},"handler")}),Mi.registerCommand(tRe,()=>{i.isVisible?i.hide():(e.hide(),i.show())}),gt.registerCommandAndKeybindingRule({id:wV,weight:Ce.WorkbenchContrib,when:Cc,primary:E.Delete,mac:{primary:M.CtrlCmd|E.Backspace},handler:za((s,o)=>{const r=s.get(_S),a=op(s.get(xi),o);a&&!a.hasProgress&&(a.close(),r.playSignal(Yt.clear))},"handler")}),gt.registerCommandAndKeybindingRule({id:vV,weight:Ce.WorkbenchContrib,when:Cc,primary:E.RightArrow,handler:za((s,o)=>{op(s.get(xi),o)?.expand()},"handler")}),gt.registerCommandAndKeybindingRule({id:HU,weight:Ce.WorkbenchContrib,when:Z.or(Cc,zu),primary:M.CtrlCmd|M.Shift|E.KeyA,handler:za(s=>{const o=s.get(He).createInstance(jE),r=op(s.get(xi))||t.notifications.at(0);if(!r)return;const a=r.actions?.primary?r.actions.primary.at(0):void 0;a&&(o.run(a,r),r.close())},"handler")}),gt.registerCommandAndKeybindingRule({id:bV,weight:Ce.WorkbenchContrib,when:Cc,primary:E.LeftArrow,handler:za((s,o)=>{op(s.get(xi),o)?.collapse()},"handler")}),gt.registerCommandAndKeybindingRule({id:rRe,weight:Ce.WorkbenchContrib,when:Cc,primary:E.Space,secondary:[E.Enter],handler:za(s=>{op(s.get(xi))?.toggle()},"handler")}),Mi.registerCommand(iM,s=>{const o=s.get(rs);for(const r of t.notifications)r.visible&&o.publicLog2("notification:hide",VE(r.message.original,r.sourceId,r.priority===Ul.SILENT));e.hide()}),gt.registerKeybindingRule({id:iM,weight:Ce.WorkbenchContrib-50,when:zu,primary:E.Escape}),gt.registerKeybindingRule({id:iM,weight:Ce.WorkbenchContrib+100,when:Z.and(zu,Cc),primary:E.Escape}),Mi.registerCommand(WU,()=>e.focus()),gt.registerCommandAndKeybindingRule({id:iRe,weight:Ce.WorkbenchContrib,when:Z.and(Cc,zu),primary:E.DownArrow,handler:za(()=>{e.focusNext()},"handler")}),gt.registerCommandAndKeybindingRule({id:nRe,weight:Ce.WorkbenchContrib,when:Z.and(Cc,zu),primary:E.UpArrow,handler:za(()=>{e.focusPrevious()},"handler")}),gt.registerCommandAndKeybindingRule({id:sRe,weight:Ce.WorkbenchContrib,when:Z.and(Cc,zu),primary:E.PageUp,secondary:[E.Home],handler:za(()=>{e.focusFirst()},"handler")}),gt.registerCommandAndKeybindingRule({id:oRe,weight:Ce.WorkbenchContrib,when:Z.and(Cc,zu),primary:E.PageDown,secondary:[E.End],handler:za(()=>{e.focusLast()},"handler")}),Mi.registerCommand(ok,()=>i.clearAll()),Mi.registerCommand(rk,s=>{const o=s.get(fs);o.setFilter(o.getFilter()===Ci.ERROR?Ci.OFF:Ci.ERROR)}),Mi.registerCommand(ak,s=>{const o=s.get(fs),r=s.get(ca),a=o.getFilters().sort((d,h)=>d.label.localeCompare(h.label)),l=new te,c=l.add(r.createQuickPick());c.items=a.map(d=>({id:d.id,label:d.label,tooltip:`${d.label} (${d.id})`,filter:d.filter})),c.canSelectMany=!0,c.placeholder=g("selectSources","Select sources to enable all notifications from"),c.selectedItems=c.items.filter(d=>d.filter===Ci.OFF),c.show(),l.add(c.onDidAccept(async()=>{for(const d of c.items)o.setFilter({id:d.id,label:d.label,filter:c.selectedItems.includes(d)?Ci.OFF:Ci.ERROR});c.hide()})),l.add(c.onDidHide(()=>l.dispose()))});const n=W("notifications","Notifications");xt.appendMenuItem(N.CommandPalette,{command:{id:_V,title:W("showNotifications","Show Notifications"),category:n}}),xt.appendMenuItem(N.CommandPalette,{command:{id:KE,title:W("hideNotifications","Hide Notifications"),category:n},when:Jx}),xt.appendMenuItem(N.CommandPalette,{command:{id:ok,title:W("clearAllNotifications","Clear All Notifications"),category:n}}),xt.appendMenuItem(N.CommandPalette,{command:{id:HU,title:W("acceptNotificationPrimaryAction","Accept Notification Primary Action"),category:n}}),xt.appendMenuItem(N.CommandPalette,{command:{id:rk,title:W("toggleDoNotDisturbMode","Toggle Do Not Disturb Mode"),category:n}}),xt.appendMenuItem(N.CommandPalette,{command:{id:ak,title:W("toggleDoNotDisturbModeBySource","Toggle Do Not Disturb Mode By Source..."),category:n}}),xt.appendMenuItem(N.CommandPalette,{command:{id:WU,title:W("focusNotificationToasts","Focus Notification Toast"),category:n},when:zu})}za(Uie,"registerNotificationCommands");let jE=class extends nc{constructor(i,e){super(),this.telemetryService=i,this.notificationService=e}static{za(this,"NotificationActionRunner")}async runAction(i,e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:i.id,from:"message"}),i0(e)&&this.telemetryService.publicLog2("notification:actionExecuted",{id:Jd(e.message.original.toString()).toString(),actionLabel:i.label,source:e.sourceId||"core",silent:e.priority===Ul.SILENT});try{await super.runAction(i,e)}catch(t){this.notificationService.error(t)}}};jE=eRe([VU(0,rs),VU(1,fs)],jE);var aRe=Object.defineProperty,zie=(i,e)=>aRe(i,"name",{value:e,configurable:!0});const Lv=De("openerService");function lRe(i,e){return i.with({fragment:`${e.startLineNumber},${e.startColumn}${e.endLineNumber?`-${e.endLineNumber}${e.endColumn?`,${e.endColumn}`:""}`:""}`})}zie(lRe,"withSelection");function L7(i){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(i.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},i=i.with({fragment:""})),{selection:e,uri:i}}zie(L7,"extractSelection");const D7=De("clipboardService");var $ie=Object.defineProperty,cRe=Object.getOwnPropertyDescriptor,wu=(i,e)=>$ie(i,"name",{value:e,configurable:!0}),um=(i,e,t,n)=>{for(var s=n>1?void 0:n?cRe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&$ie(e,t,s),s},gm=(i,e)=>(t,n)=>e(t,n,i);const dRe=Vt("notifications-clear",ee.close,g("clearIcon","Icon for the clear action in notifications.")),hRe=Vt("notifications-clear-all",ee.clearAll,g("clearAllIcon","Icon for the clear all action in notifications.")),uRe=Vt("notifications-hide",ee.chevronDown,g("hideIcon","Icon for the hide action in notifications.")),gRe=Vt("notifications-expand",ee.chevronUp,g("expandIcon","Icon for the expand action in notifications.")),fRe=Vt("notifications-collapse",ee.chevronDown,g("collapseIcon","Icon for the collapse action in notifications.")),pRe=Vt("notifications-configure",ee.gear,g("configureIcon","Icon for the configure action in notifications.")),Gie=Vt("notifications-do-not-disturb",ee.bellSlash,g("doNotDisturbIcon","Icon for the mute all action in notifications."));let c0=class extends Mt{constructor(i,e,t){super(i,e,Ne.asClassName(dRe)),this.commandService=t}static{wu(this,"ClearNotificationAction")}static ID=wV;static LABEL=g("clearNotification","Clear Notification");async run(i){this.commandService.executeCommand(wV,i)}};c0=um([gm(2,Xi)],c0);let d0=class extends Mt{constructor(i,e,t){super(i,e,Ne.asClassName(hRe)),this.commandService=t}static{wu(this,"ClearAllNotificationsAction")}static ID=ok;static LABEL=g("clearNotifications","Clear All Notifications");async run(){this.commandService.executeCommand(ok)}};d0=um([gm(2,Xi)],d0);let lk=class extends Mt{constructor(i,e,t){super(i,e,Ne.asClassName(Gie)),this.commandService=t}static{wu(this,"ToggleDoNotDisturbAction")}static ID=rk;static LABEL=g("toggleDoNotDisturbMode","Toggle Do Not Disturb Mode");async run(){this.commandService.executeCommand(rk)}};lk=um([gm(2,Xi)],lk);let ck=class extends Mt{constructor(i,e,t){super(i,e),this.commandService=t}static{wu(this,"ToggleDoNotDisturbBySourceAction")}static ID=ak;static LABEL=g("toggleDoNotDisturbModeBySource","Toggle Do Not Disturb Mode By Source...");async run(){this.commandService.executeCommand(ak)}};ck=um([gm(2,Xi)],ck);class xI extends Mt{static{wu(this,"ConfigureDoNotDisturbAction")}static ID="workbench.action.configureDoNotDisturbMode";static LABEL=g("configureDoNotDisturbMode","Configure Do Not Disturb...");constructor(e,t){super(e,t,Ne.asClassName(Gie))}}let h0=class extends Mt{constructor(i,e,t){super(i,e,Ne.asClassName(uRe)),this.commandService=t}static{wu(this,"HideNotificationsCenterAction")}static ID=KE;static LABEL=g("hideNotificationsCenter","Hide Notifications");async run(){this.commandService.executeCommand(KE)}};h0=um([gm(2,Xi)],h0);let u0=class extends Mt{constructor(i,e,t){super(i,e,Ne.asClassName(gRe)),this.commandService=t}static{wu(this,"ExpandNotificationAction")}static ID=vV;static LABEL=g("expandNotification","Expand Notification");async run(i){this.commandService.executeCommand(vV,i)}};u0=um([gm(2,Xi)],u0);let g0=class extends Mt{constructor(i,e,t){super(i,e,Ne.asClassName(fRe)),this.commandService=t}static{wu(this,"CollapseNotificationAction")}static ID=bV;static LABEL=g("collapseNotification","Collapse Notification");async run(i){this.commandService.executeCommand(bV,i)}};g0=um([gm(2,Xi)],g0);class sA extends Mt{constructor(e,t,n){super(e,t,Ne.asClassName(pRe)),this.notification=n}static{wu(this,"ConfigureNotificationAction")}static ID="workbench.action.configureNotification";static LABEL=g("configureNotification","More Actions...")}let f0=class extends Mt{constructor(i,e,t){super(i,e),this.clipboardService=t}static{wu(this,"CopyNotificationMessageAction")}static ID="workbench.action.copyNotificationMessage";static LABEL=g("copyNotification","Copy Text");run(i){return this.clipboardService.writeText(i.message.raw)}};f0=um([gm(2,D7)],f0);var mRe=Object.defineProperty,dk=(i,e)=>mRe(i,"name",{value:e,configurable:!0});class jb extends yr{static{dk(this,"DropdownMenuActionViewItem")}menuActionsOrProvider;dropdownMenu;contextMenuProvider;actionItem=null;_onDidChangeVisibility=this._register(new x);onDidChangeVisibility=this._onDidChangeVisibility.event;options;constructor(e,t,n,s=Object.create(null)){super(null,e,s),this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=s,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=dk(o=>{this.element=Le(o,ce("a.action-label"));let r=[];return typeof this.options.classNames=="string"?r=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(r=this.options.classNames),r.find(a=>a==="icon")||r.push("codicon"),this.element.classList.add(...r),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(pl().setupManagedHover(this.options.hoverDelegate??bn("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},"labelRenderer"),n=Array.isArray(this.menuActionsOrProvider),s={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new uke(e,s)),this._register(this.dropdownMenu.onDidChangeVisibility(o=>{this.element?.setAttribute("aria-expanded",`${o}`),this._onDidChangeVisibility.fire(o)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const o=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return o.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){this.dropdownMenu?.show()}updateEnabled(){const e=!this.action.enabled;this.actionItem?.classList.toggle("disabled",e),this.element?.classList.toggle("disabled",e)}}class G$e extends _D{constructor(e,t,n,s){super(e,t,n),this.contextMenuProvider=s}static{dk(this,"ActionWithDropdownActionViewItem")}dropdownMenuActionViewItem;render(e){if(super.render(e),this.element){this.element.classList.add("action-dropdown-item");const t={getActions:dk(()=>{const o=this.options.menuActionsOrProvider;return Array.isArray(o)?o:o.getActions()},"getActions")},n=this.options.menuActionClassNames||[],s=Oi("div.action-dropdown-item-separator",[Oi("div",{})]).root;s.classList.toggle("prominent",n.includes("prominent")),Le(this.element,s),this.dropdownMenuActionViewItem=this._register(new jb(this._register(new Mt("dropdownAction",g("moreActions","More Actions..."))),t,this.contextMenuProvider,{classNames:["dropdown",...Ne.asClassNameArray(ee.dropDownButton),...n],hoverDelegate:this.options.hoverDelegate})),this.dropdownMenuActionViewItem.render(this.element),this._register(F(this.element,Q.KEY_DOWN,o=>{if(t.getActions().length===0)return;const r=new Pt(o);let a=!1;this.dropdownMenuActionViewItem?.isFocused()&&r.equals(E.LeftArrow)?(a=!0,this.dropdownMenuActionViewItem?.blur(),this.focus()):this.isFocused()&&r.equals(E.RightArrow)&&(a=!0,this.blur(),this.dropdownMenuActionViewItem?.focus()),a&&(r.preventDefault(),r.stopPropagation())}))}}blur(){super.blur(),this.dropdownMenuActionViewItem?.blur()}setFocusable(e){super.setFocusable(e),this.dropdownMenuActionViewItem?.setFocusable(e)}}var Kie=Object.defineProperty,_Re=Object.getOwnPropertyDescriptor,bRe=(i,e)=>Kie(i,"name",{value:e,configurable:!0}),vRe=(i,e,t,n)=>{for(var s=n>1?void 0:n?_Re(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Kie(e,t,s),s},UU=(i,e)=>(t,n)=>e(t,n,i);const Po=De("hoverService");let qE=class extends ${constructor(i,e,t={},n,s){super(),this.placement=i,this.instantHover=e,this.overrideOptions=t,this.configurationService=n,this.hoverService=s,this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}static{bRe(this,"WorkbenchHoverDelegate")}lastHoverHideTime=0;timeLimit=200;_delay;get delay(){return this.isInstantlyHovering()?0:this._delay}hoverDisposables=this._register(new te);showHover(i,e){const t=typeof this.overrideOptions=="function"?this.overrideOptions(i,e):this.overrideOptions;this.hoverDisposables.clear();const n=xs(i.target)?[i.target]:i.target.targetElements;for(const o of n)this.hoverDisposables.add(Gs(o,"keydown",r=>{r.equals(E.Escape)&&this.hoverService.hideHover()}));const s=xs(i.content)?void 0:i.content.toString();return this.hoverService.showHover({...i,...t,persistence:{hideOnKeyDown:!0,...t.persistence},id:s,appearance:{...i.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...t.appearance}},e)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}setInstantHoverTimeLimit(i){if(!this.instantHover)throw new Error("Instant hover is not enabled");this.timeLimit=i}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};qE=vRe([UU(3,Pe),UU(4,Po)],qE);var jie=Object.defineProperty,wRe=Object.getOwnPropertyDescriptor,Mp=(i,e)=>jie(i,"name",{value:e,configurable:!0}),qie=(i,e,t,n)=>{for(var s=n>1?void 0:n?wRe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&jie(e,t,s),s},rp=(i,e)=>(t,n)=>e(t,n,i);class jf{static{Mp(this,"NotificationsListDelegate")}static ROW_HEIGHT=42;static LINE_HEIGHT=22;offsetHelper;constructor(e){this.offsetHelper=this.createOffsetHelper(e)}createOffsetHelper(e){const t=document.createElement("div");return t.classList.add("notification-offset-helper"),e.appendChild(t),t}getHeight(e){if(!e.expanded)return jf.ROW_HEIGHT;let t=jf.ROW_HEIGHT;const n=this.computePreferredHeight(e);if(jf.LINE_HEIGHT<n){const o=n-jf.LINE_HEIGHT;t+=o}return(e.source||B0(e.actions&&e.actions.primary))&&(t+=jf.ROW_HEIGHT),t===jf.ROW_HEIGHT&&e.collapse(!0),t}computePreferredHeight(e){let t=0;e.hasProgress||t++,e.canCollapse&&t++,B0(e.actions&&e.actions.secondary)&&t++,this.offsetHelper.style.width=`${450-(40+t*30-Math.max(t-1,0)*4)}px`;const n=Yie.render(e.message);this.offsetHelper.appendChild(n);const s=Math.max(this.offsetHelper.offsetHeight,this.offsetHelper.scrollHeight);return Mn(this.offsetHelper),s}getTemplateId(e){if(e instanceof lg)return YE.TEMPLATE_ID;throw new Error("unknown element type: "+e)}}class Yie{static{Mp(this,"NotificationMessageRenderer")}static render(e,t){const n=document.createElement("span");for(const s of e.linkedText.nodes)if(typeof s=="string")n.appendChild(document.createTextNode(s));else{let o=s.title;!o&&s.href.startsWith("command:")?o=g("executeCommand","Click to execute command '{0}'",s.href.substr(8)):o||(o=s.href);const r=ce("a",{href:s.href,title:o,tabIndex:0},s.label);if(t){const a=Mp(u=>{Oq(u)&&Fe.stop(u,!0),t.callback(s.href)},"handleOpen"),l=t.toDispose.add(new Je(r,Q.CLICK)).event,c=t.toDispose.add(new Je(r,Q.KEY_DOWN)).event,d=H.chain(c,u=>u.filter(f=>{const p=new Pt(f);return p.equals(E.Space)||p.equals(E.Enter)}));t.toDispose.add(Gn.addTarget(r));const h=t.toDispose.add(new Je(r,wt.Tap)).event;H.any(l,h,d)(a,null,t.toDispose)}n.appendChild(r)}return n}}let YE=class{constructor(i,e,t,n){this.actionRunner=i,this.contextMenuService=e,this.instantiationService=t,this.notificationService=n}static{Mp(this,"NotificationRenderer")}static TEMPLATE_ID="notification";get templateId(){return YE.TEMPLATE_ID}renderTemplate(i){const e=Object.create(null);e.toDispose=new te,e.container=document.createElement("div"),e.container.classList.add("notification-list-item"),e.mainRow=document.createElement("div"),e.mainRow.classList.add("notification-list-item-main-row"),e.icon=document.createElement("div"),e.icon.classList.add("notification-list-item-icon","codicon"),e.message=document.createElement("div"),e.message.classList.add("notification-list-item-message");const t=this,n=document.createElement("div");return n.classList.add("notification-list-item-toolbar-container"),e.toolbar=new td(n,{ariaLabel:g("notificationActions","Notification Actions"),actionViewItemProvider:Mp((s,o)=>{if(s instanceof sA)return e.toDispose.add(new jb(s,{getActions(){const r=[],a={id:s.notification.sourceId,label:s.notification.source};if(NP(a)){const l=t.notificationService.getFilter(a)===Ci.ERROR;r.push(Ei({id:a.id,label:l?g("turnOnNotifications","Turn On All Notifications from '{0}'",a.label):g("turnOffNotifications","Turn Off Info and Warning Notifications from '{0}'",a.label),run:Mp(()=>t.notificationService.setFilter({...a,filter:l?Ci.OFF:Ci.ERROR}),"run")})),s.notification.actions?.secondary?.length&&r.push(new zt)}return Array.isArray(s.notification.actions?.secondary)&&r.push(...s.notification.actions.secondary),r}},this.contextMenuService,{...o,actionRunner:this.actionRunner,classNames:s.class}))},"actionViewItemProvider"),actionRunner:this.actionRunner}),e.toDispose.add(e.toolbar),e.detailsRow=document.createElement("div"),e.detailsRow.classList.add("notification-list-item-details-row"),e.source=document.createElement("div"),e.source.classList.add("notification-list-item-source"),e.buttonsContainer=document.createElement("div"),e.buttonsContainer.classList.add("notification-list-item-buttons-container"),i.appendChild(e.container),e.container.appendChild(e.detailsRow),e.detailsRow.appendChild(e.source),e.detailsRow.appendChild(e.buttonsContainer),e.container.appendChild(e.mainRow),e.mainRow.appendChild(e.icon),e.mainRow.appendChild(e.message),e.mainRow.appendChild(n),e.progress=new uy(i,JP),e.toDispose.add(e.progress),e.renderer=this.instantiationService.createInstance(Sd,e,this.actionRunner),e.toDispose.add(e.renderer),e}renderElement(i,e,t){t.renderer.setInput(i)}disposeTemplate(i){ii(i.toDispose)}};YE=qie([rp(1,Hi),rp(2,He),rp(3,fs)],YE);let Sd=class extends ${constructor(i,e,t,n,s,o,r){super(),this.template=i,this.actionRunner=e,this.openerService=t,this.instantiationService=n,this.keybindingService=s,this.contextMenuService=o,this.hoverService=r,Sd.closeNotificationAction||(Sd.closeNotificationAction=n.createInstance(c0,c0.ID,c0.LABEL),Sd.expandNotificationAction=n.createInstance(u0,u0.ID,u0.LABEL),Sd.collapseNotificationAction=n.createInstance(g0,g0.ID,g0.LABEL))}static{Mp(this,"NotificationTemplateRenderer")}static closeNotificationAction;static expandNotificationAction;static collapseNotificationAction;static SEVERITIES=[zs.Info,zs.Warning,zs.Error];inputDisposables=this._register(new te);setInput(i){this.inputDisposables.clear(),this.render(i)}render(i){this.template.container.classList.toggle("expanded",i.expanded),this.inputDisposables.add(F(this.template.container,Q.MOUSE_UP,s=>{s.button===1&&Fe.stop(s,!0)})),this.inputDisposables.add(F(this.template.container,Q.AUXCLICK,s=>{!i.hasProgress&&s.button===1&&(Fe.stop(s,!0),i.close())})),this.renderSeverity(i);const e=this.inputDisposables.add(this.hoverService.setupManagedHover(bn("mouse"),this.template.message,"")),t=this.renderMessage(i,e);this.renderSecondaryActions(i,t);const n=this.inputDisposables.add(this.hoverService.setupManagedHover(bn("mouse"),this.template.source,""));this.renderSource(i,n),this.renderButtons(i),this.renderProgress(i),this.inputDisposables.add(i.onDidChangeContent(s=>{switch(s.kind){case Rg.SEVERITY:this.renderSeverity(i);break;case Rg.PROGRESS:this.renderProgress(i);break;case Rg.MESSAGE:this.renderMessage(i,e);break}}))}renderSeverity(i){Sd.SEVERITIES.forEach(e=>{i.severity!==e&&this.template.icon.classList.remove(...Ne.asClassNameArray(this.toSeverityIcon(e)))}),this.template.icon.classList.add(...Ne.asClassNameArray(this.toSeverityIcon(i.severity)))}renderMessage(i,e){Mn(this.template.message),this.template.message.appendChild(Yie.render(i.message,{callback:Mp(n=>this.openerService.open(ne.parse(n),{allowCommands:!0}),"callback"),toDispose:this.inputDisposables}));const t=i.canCollapse&&!i.expanded&&this.template.message.scrollWidth>this.template.message.clientWidth;return e.update(t?this.template.message.textContent+"":""),t}renderSecondaryActions(i,e){const t=[];if(B0(i.actions?.secondary)){const s=this.instantiationService.createInstance(sA,sA.ID,sA.LABEL,i);t.push(s),this.inputDisposables.add(s)}let n=!1;i.canCollapse&&(i.expanded||i.source||e)&&(n=!0),n&&t.push(i.expanded?Sd.collapseNotificationAction:Sd.expandNotificationAction),i.hasProgress||t.push(Sd.closeNotificationAction),this.template.toolbar.clear(),this.template.toolbar.context=i,t.forEach(s=>this.template.toolbar.push(s,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(s)}))}renderSource(i,e){i.expanded&&i.source?(this.template.source.textContent=g("notificationSource","Source: {0}",i.source),e.update(i.source)):(this.template.source.textContent="",e.update(""))}renderButtons(i){Mn(this.template.buttonsContainer);const e=i.actions?i.actions.primary:void 0;if(i.expanded&&B0(e)){const t=this,n=new class extends nc{async runAction(o){t.actionRunner.run(o,i),(!(o instanceof kE)||!o.keepOpen)&&i.close()}},s=this.inputDisposables.add(new Rte(this.template.buttonsContainer));for(let o=0;o<e.length;o++){const r=e[o],a={title:!0,secondary:o>0,...U3},l=r instanceof kE?r.menu:void 0,c=this.inputDisposables.add(l?s.addButtonWithDropdown({...a,contextMenuProvider:this.contextMenuService,actions:l,actionRunner:n}):s.addButton(a));c.label=r.label,this.inputDisposables.add(c.onDidClick(d=>{d&&Fe.stop(d,!0),n.run(r)}))}}}renderProgress(i){if(!i.hasProgress){this.template.progress.stop().hide();return}const e=i.progress.state;e.infinite?this.template.progress.infinite().show():typeof e.total=="number"||typeof e.worked=="number"?(typeof e.total=="number"&&!this.template.progress.hasTotal()&&this.template.progress.total(e.total),typeof e.worked=="number"&&this.template.progress.setWorked(e.worked).show()):this.template.progress.done().hide()}toSeverityIcon(i){switch(i){case zs.Warning:return ee.warning;case zs.Error:return ee.error}return ee.info}getKeybindingLabel(i){const e=this.keybindingService.lookupKeybinding(i.id);return e?e.getLabel():null}};Sd=qie([rp(2,Lv),rp(3,He),rp(4,ni),rp(5,Hi),rp(6,Po)],Sd);var Zie=Object.defineProperty,CRe=Object.getOwnPropertyDescriptor,I1=(i,e)=>Zie(i,"name",{value:e,configurable:!0}),Xie=(i,e,t,n)=>{for(var s=n>1?void 0:n?CRe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Zie(e,t,s),s},hk=(i,e)=>(t,n)=>e(t,n,i);let uk=class extends ${constructor(i,e,t,n){super(),this.container=i,this.options=e,this.instantiationService=t,this.contextMenuService=n}static{I1(this,"NotificationsList")}listContainer;list;listDelegate;viewModel=[];isVisible;show(){this.isVisible||(this.list||this.createNotificationsList(),this.isVisible=!0)}createNotificationsList(){this.listContainer=document.createElement("div"),this.listContainer.classList.add("notifications-list-container");const i=this._register(this.instantiationService.createInstance(jE)),e=this.instantiationService.createInstance(YE,i),t=this.listDelegate=new jf(this.listContainer),n=this.options,s=this.list=this._register(this.instantiationService.createInstance(FE,"NotificationsList",this.listContainer,t,[e],{...n,setRowLineHeight:!1,horizontalScrolling:!1,overrideStyles:{listBackground:fw},accessibilityProvider:this.instantiationService.createInstance(CV,n)})),o=this._register(this.instantiationService.createInstance(f0,f0.ID,f0.LABEL));this._register(s.onContextMenu(a=>{a.element&&this.contextMenuService.showContextMenu({getAnchor:I1(()=>a.anchor,"getAnchor"),getActions:I1(()=>[o],"getActions"),getActionsContext:I1(()=>a.element,"getActionsContext"),actionRunner:i})})),this._register(s.onMouseDblClick(a=>a.element.toggle()));const r=this._register(al(s.getHTMLElement()));this._register(r.onDidBlur(()=>{ve(this.listContainer).document.hasFocus()&&s.setFocus([])})),Cc.bindTo(s.contextKeyService),this._register(s.onDidChangeSelection(a=>{a.indexes.length>0&&s.setSelection([])})),this.container.appendChild(this.listContainer)}updateNotificationsList(i,e,t=[]){const[n,s]=Rd(this.list,this.listContainer),o=Yg(s),r=n.getFocus()[0],a=this.viewModel[r];let l=null;if(typeof r=="number"&&(l=n.getRelativeTop(r)),this.viewModel.splice(i,e,...t),n.splice(i,e,t),n.layout(),this.viewModel.length===0)this.hide();else if(typeof r=="number"){let c=0;if(a){let d=this.viewModel.indexOf(a);d===-1&&(d=r-1),d<this.viewModel.length&&d>=0&&(c=d)}typeof l=="number"&&n.reveal(c,l),n.setFocus([c])}this.isVisible&&o&&n.domFocus()}updateNotificationHeight(i){const e=this.viewModel.indexOf(i);if(e===-1)return;const[t,n]=Rd(this.list,this.listDelegate);t.updateElementHeight(e,n.getHeight(i)),t.layout()}hide(){!this.isVisible||!this.list||(this.isVisible=!1,this.list.splice(0,this.viewModel.length),this.viewModel=[])}focusFirst(){this.list&&(this.list.focusFirst(),this.list.domFocus())}hasFocus(){return this.listContainer?Yg(this.listContainer):!1}layout(i,e){this.listContainer&&this.list&&(this.listContainer.style.width=`${i}px`,typeof e=="number"&&(this.list.getHTMLElement().style.maxHeight=`${e}px`),this.list.layout())}dispose(){this.hide(),super.dispose()}};uk=Xie([hk(2,He),hk(3,Hi)],uk);let CV=class{constructor(i,e,t){this._options=i,this._keybindingService=e,this._configurationService=t}static{I1(this,"NotificationAccessibilityProvider")}getAriaLabel(i){let e;const t=this._keybindingService.lookupKeybinding("editor.action.accessibleView")?.getAriaLabel();return this._configurationService.getValue("accessibility.verbosity.notification")&&(e=t?g("notificationAccessibleViewHint","Inspect the response in the accessible view with {0}",t):g("notificationAccessibleViewHintNoKb","Inspect the response in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding")),i.source?e?g("notificationWithSourceAriaLabelHint","{0}, source: {1}, notification, {2}",i.message.raw,i.source,e):g("notificationWithSourceAriaLabel","{0}, source: {1}, notification",i.message.raw,i.source):e?g("notificationAriaLabelHint","{0}, notification, {1}",i.message.raw,e):g("notificationAriaLabel","{0}, notification",i.message.raw)}getWidgetAriaLabel(){return this._options.widgetAriaLabel??g("notificationsList","Notifications List")}getRole(){return"dialog"}};CV=Xie([hk(1,ni),hk(2,Pe)],CV);var Qie=Object.defineProperty,yRe=Object.getOwnPropertyDescriptor,zS=(i,e)=>Qie(i,"name",{value:e,configurable:!0}),SRe=(i,e,t,n)=>{for(var s=n>1?void 0:n?yRe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Qie(e,t,s),s},xu=(i,e)=>(t,n)=>e(t,n,i);let W_=class extends Ky{constructor(i,e,t,n,s,o,r,a,l,c,d){super(t),this.container=i,this.model=e,this.instantiationService=n,this.layoutService=s,this.contextKeyService=o,this.editorGroupService=r,this.keybindingService=a,this.notificationService=l,this.accessibilitySignalService=c,this.contextMenuService=d,this.notificationsCenterVisibleContextKey=Jx.bindTo(o),this.registerListeners()}static{zS(this,"NotificationsCenter")}static MAX_DIMENSIONS=new Lt(450,400);static MAX_NOTIFICATION_SOURCES=10;_onDidChangeVisibility=this._register(new x);onDidChangeVisibility=this._onDidChangeVisibility.event;notificationsCenterContainer;notificationsCenterHeader;notificationsCenterTitle;notificationsList;_isVisible;workbenchDimensions;notificationsCenterVisibleContextKey=Jx.bindTo(this.contextKeyService);clearAllAction;configureDoNotDisturbAction;registerListeners(){this._register(this.model.onDidChangeNotification(i=>this.onDidChangeNotification(i))),this._register(this.layoutService.onDidLayoutMainContainer(i=>this.layout(Lt.lift(i)))),this._register(this.notificationService.onDidChangeFilter(()=>this.onDidChangeFilter()))}onDidChangeFilter(){this.notificationService.getFilter()===Ci.ERROR&&this.hide()}get isVisible(){return!!this._isVisible}show(){if(this._isVisible){const t=pt(this.notificationsList);t.show(),t.focusFirst();return}this.notificationsCenterContainer||this.create(),this.updateTitle();const[i,e]=Rd(this.notificationsList,this.notificationsCenterContainer);this._isVisible=!0,e.classList.add("visible"),i.show(),this.layout(this.workbenchDimensions),i.updateNotificationsList(0,0,this.model.notifications),i.focusFirst(),this.updateStyles(),this.model.notifications.forEach(t=>t.updateVisibility(!0)),this.notificationsCenterVisibleContextKey.set(!0),this._onDidChangeVisibility.fire()}updateTitle(){const[i,e]=Rd(this.notificationsCenterTitle,this.clearAllAction);this.model.notifications.length===0?(i.textContent=g("notificationsEmpty","No new notifications"),e.enabled=!1):(i.textContent=g("notifications","Notifications"),e.enabled=this.model.notifications.some(t=>!t.hasProgress))}create(){this.notificationsCenterContainer=document.createElement("div"),this.notificationsCenterContainer.classList.add("notifications-center"),this.notificationsCenterHeader=document.createElement("div"),this.notificationsCenterHeader.classList.add("notifications-center-header"),this.notificationsCenterContainer.appendChild(this.notificationsCenterHeader),this.notificationsCenterTitle=document.createElement("span"),this.notificationsCenterTitle.classList.add("notifications-center-header-title"),this.notificationsCenterHeader.appendChild(this.notificationsCenterTitle);const i=document.createElement("div");i.classList.add("notifications-center-header-toolbar"),this.notificationsCenterHeader.appendChild(i);const e=this._register(this.instantiationService.createInstance(jE)),t=this,n=this._register(new td(i,{ariaLabel:g("notificationsToolbar","Notification Center Actions"),actionRunner:e,actionViewItemProvider:zS((o,r)=>{if(o.id===xI.ID)return this._register(this.instantiationService.createInstance(jb,o,{getActions(){const a=[Ei({id:lk.ID,label:t.notificationService.getFilter()===Ci.OFF?g("turnOnNotifications","Enable Do Not Disturb Mode"):g("turnOffNotifications","Disable Do Not Disturb Mode"),run:zS(()=>t.notificationService.setFilter(t.notificationService.getFilter()===Ci.OFF?Ci.ERROR:Ci.OFF),"run")})],l=t.notificationService.getFilters().sort((c,d)=>c.label.localeCompare(d.label));for(const c of l.slice(0,W_.MAX_NOTIFICATION_SOURCES))a.length===1&&a.push(new zt),a.push(Ei({id:`${lk.ID}.${c.id}`,label:c.label,checked:c.filter!==Ci.ERROR,run:zS(()=>t.notificationService.setFilter({...c,filter:c.filter===Ci.ERROR?Ci.OFF:Ci.ERROR}),"run")}));return l.length>W_.MAX_NOTIFICATION_SOURCES&&(a.push(new zt),a.push(t._register(t.instantiationService.createInstance(ck,ck.ID,g("moreSources","More"))))),a}},this.contextMenuService,{...r,actionRunner:e,classNames:o.class,keybindingProvider:zS(a=>this.keybindingService.lookupKeybinding(a.id),"keybindingProvider")}))},"actionViewItemProvider")}));this.clearAllAction=this._register(this.instantiationService.createInstance(d0,d0.ID,d0.LABEL)),n.push(this.clearAllAction,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(this.clearAllAction)}),this.configureDoNotDisturbAction=this._register(this.instantiationService.createInstance(xI,xI.ID,xI.LABEL)),n.push(this.configureDoNotDisturbAction,{icon:!0,label:!1});const s=this._register(this.instantiationService.createInstance(h0,h0.ID,h0.LABEL));n.push(s,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(s)}),this.notificationsList=this.instantiationService.createInstance(uk,this.notificationsCenterContainer,{widgetAriaLabel:g("notificationsCenterWidgetAriaLabel","Notifications Center")}),this.container.appendChild(this.notificationsCenterContainer)}getKeybindingLabel(i){const e=this.keybindingService.lookupKeybinding(i.id);return e?e.getLabel():null}onDidChangeNotification(i){if(!this._isVisible)return;let e=!1;const[t,n]=Rd(this.notificationsList,this.notificationsCenterContainer);switch(i.kind){case Ja.ADD:t.updateNotificationsList(i.index,0,[i.item]),i.item.updateVisibility(!0);break;case Ja.CHANGE:switch(i.detail){case Rg.ACTIONS:t.updateNotificationsList(i.index,1,[i.item]);break;case Rg.MESSAGE:i.item.expanded&&t.updateNotificationHeight(i.item);break}break;case Ja.EXPAND_COLLAPSE:t.updateNotificationsList(i.index,1,[i.item]);break;case Ja.REMOVE:e=Yg(n),t.updateNotificationsList(i.index,1),i.item.updateVisibility(!1);break}this.updateTitle(),this.model.notifications.length===0&&(this.hide(),e&&this.editorGroupService.activeGroup.focus())}hide(){if(!this._isVisible||!this.notificationsCenterContainer||!this.notificationsList)return;const i=Yg(this.notificationsCenterContainer);this._isVisible=!1,this.notificationsCenterContainer.classList.remove("visible"),this.notificationsList.hide(),this.model.notifications.forEach(e=>e.updateVisibility(!1)),this.notificationsCenterVisibleContextKey.set(!1),this._onDidChangeVisibility.fire(),i&&this.editorGroupService.activeGroup.focus()}updateStyles(){if(this.notificationsCenterContainer&&this.notificationsCenterHeader){const i=this.getColor(lv);this.notificationsCenterContainer.style.boxShadow=i?`0 0 8px 2px ${i}`:"";const e=this.getColor($me);this.notificationsCenterContainer.style.border=e?`1px solid ${e}`:"";const t=this.getColor(Kme);this.notificationsCenterHeader.style.color=t??"";const n=this.getColor(qj);this.notificationsCenterHeader.style.background=n??""}}layout(i){if(this.workbenchDimensions=i,this._isVisible&&this.notificationsCenterContainer){const e=W_.MAX_DIMENSIONS.width,t=W_.MAX_DIMENSIONS.height;let n=e,s=t;this.workbenchDimensions&&(n=this.workbenchDimensions.width,n-=2*8,s=this.workbenchDimensions.height-35,this.layoutService.isVisible(Y.STATUSBAR_PART,_e)&&(s-=22),this.layoutService.isVisible(Y.TITLEBAR_PART,_e)&&(s-=22),s-=2*12),pt(this.notificationsList).layout(Math.min(e,n),Math.min(t,s))}}clearAll(){this.hide();for(const i of[...this.model.notifications])i.hasProgress||i.close(),this.accessibilitySignalService.playSignal(Yt.clear)}};W_=SRe([xu(2,$t),xu(3,He),xu(4,yt),xu(5,Ye),xu(6,Ge),xu(7,ni),xu(8,fs),xu(9,_S),xu(10,Hi)],W_);var ERe=Object.defineProperty,LRe=(i,e)=>ERe(i,"name",{value:e,configurable:!0});class DRe extends ${constructor(e){super(),this.model=e;for(const t of e.notifications)this.triggerAriaAlert(t);this.registerListeners()}static{LRe(this,"NotificationsAlerts")}registerListeners(){this._register(this.model.onDidChangeNotification(e=>this.onDidChangeNotification(e)))}onDidChangeNotification(e){e.kind===Ja.ADD&&(this.triggerAriaAlert(e.item),e.item.severity===zs.Error&&(e.item.message.original instanceof Error?console.error(e.item.message.original):console.error(hh(e.item.message.linkedText.toString(),!0))))}triggerAriaAlert(e){if(e.priority===Ul.SILENT)return;const t=e.onDidChangeContent(n=>{n.kind===Rg.MESSAGE&&this.doTriggerAriaAlert(e)});H.once(e.onDidClose)(()=>t.dispose()),this.doTriggerAriaAlert(e)}doTriggerAriaAlert(e){let t;e.severity===zs.Error?t=g("alertErrorMessage","Error: {0}",e.message.linkedText.toString()):e.severity===zs.Warning?t=g("alertWarningMessage","Warning: {0}",e.message.linkedText.toString()):t=g("alertInfoMessage","Info: {0}",e.message.linkedText.toString()),Ub(t)}}var IRe=Object.defineProperty,bS=(i,e)=>IRe(i,"name",{value:e,configurable:!0});g("views log","Views");const TRe=Vt("default-view-icon",ee.window,g("defaultViewIcon","Default view icon."));var ZE;(i=>{i.ViewContainersRegistry="workbench.registry.view.containers",i.ViewsRegistry="workbench.registry.view"})(ZE||(ZE={}));var Te=(i=>(i[i.Sidebar=0]="Sidebar",i[i.Panel=1]="Panel",i[i.AuxiliaryBar=2]="AuxiliaryBar",i))(Te||{});function Sr(i){switch(i){case 0:return"sidebar";case 1:return"panel";case 2:return"auxiliarybar"}}bS(Sr,"ViewContainerLocationToString");class ARe extends ${static{bS(this,"ViewContainersRegistryImpl")}_onDidRegister=this._register(new x);onDidRegister=this._onDidRegister.event;_onDidDeregister=this._register(new x);onDidDeregister=this._onDidDeregister.event;viewContainers=new Map;defaultViewContainers=[];get all(){return[...this.viewContainers.values()].flat()}registerViewContainer(e,t,n){const s=this.get(e.id);if(s)return s;const o=e;return o.openCommandActionDescriptor=n?.doNotRegisterOpenCommand?void 0:o.openCommandActionDescriptor??{id:o.id},q_(this.viewContainers,t,[]).push(o),n?.isDefault&&this.defaultViewContainers.push(o),this._onDidRegister.fire({viewContainer:o,viewContainerLocation:t}),o}deregisterViewContainer(e){for(const t of this.viewContainers.keys()){const n=this.viewContainers.get(t),s=n?.indexOf(e);if(s!==-1){n?.splice(s,1),n.length===0&&this.viewContainers.delete(t),this._onDidDeregister.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.viewContainers.get(e)||[]]}getViewContainerLocation(e){return[...this.viewContainers.keys()].filter(t=>this.getViewContainers(t).filter(n=>n?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.defaultViewContainers.find(t=>this.getViewContainerLocation(t)===e)}}Xt.add(ZE.ViewContainersRegistry,new ARe);function Jie(i,e){const t=i.group??"9_more",n=e.group??"9_more";return t!==n?t.localeCompare(n):(i.order??5)-(e.order??5)}bS(Jie,"compareViewContentDescriptors");class xRe extends ${static{bS(this,"ViewsRegistry")}_onViewsRegistered=this._register(new x);onViewsRegistered=this._onViewsRegistered.event;_onViewsDeregistered=this._register(new x);onViewsDeregistered=this._onViewsDeregistered.event;_onDidChangeContainer=this._register(new x);onDidChangeContainer=this._onDidChangeContainer.event;_onDidChangeViewWelcomeContent=this._register(new x);onDidChangeViewWelcomeContent=this._onDidChangeViewWelcomeContent.event;_viewContainers=[];_views=new Map;_viewWelcomeContents=new LN;registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:n})=>this.addViews(t,n)),this._onViewsRegistered.fire(e)}deregisterViews(e,t){const n=this.removeViews(e,t);n.length&&this._onViewsDeregistered.fire({views:n,viewContainer:t})}moveViews(e,t){for(const n of this._views.keys())if(n!==t){const s=this.removeViews(e,n);s.length&&(this.addViews(s,t),this._onDidChangeContainer.fire({views:s,from:n,to:t}))}}getViews(e){return this._views.get(e)||[]}getView(e){for(const t of this._viewContainers){const n=(this._views.get(t)||[]).filter(s=>s.id===e)[0];if(n)return n}return null}getViewContainer(e){for(const t of this._viewContainers)if((this._views.get(t)||[]).filter(s=>s.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this._viewWelcomeContents.add(e,t),this._onDidChangeViewWelcomeContent.fire(e),ye(()=>{this._viewWelcomeContents.delete(e,t),this._onDidChangeViewWelcomeContent.fire(e)})}registerViewWelcomeContent2(e,t){const n=new Map;for(const[s,o]of t)this._viewWelcomeContents.add(e,o),n.set(s,ye(()=>{this._viewWelcomeContents.delete(e,o),this._onDidChangeViewWelcomeContent.fire(e)}));return this._onDidChangeViewWelcomeContent.fire(e),n}getViewWelcomeContent(e){const t=[];return this._viewWelcomeContents.forEach(e,n=>t.push(n)),t.sort(Jie)}addViews(e,t){let n=this._views.get(t);n||(n=[],this._views.set(t,n),this._viewContainers.push(t));for(const s of e){if(this.getView(s.id)!==null)throw new Error(g("duplicateId","A view with id '{0}' is already registered",s.id));n.push(s)}}removeViews(e,t){const n=this._views.get(t);if(!n)return[];const s=[],o=[];for(const r of n)e.includes(r)?s.push(r):o.push(r);return s.length&&(o.length?this._views.set(t,o):(this._views.delete(t),this._viewContainers.splice(this._viewContainers.indexOf(t),1))),s}}Xt.add(ZE.ViewsRegistry,new xRe);const Ro=De("viewDescriptorService");var ene=(i=>(i[i.Default=0]="Default",i[i.Expand=1]="Expand",i))(ene||{});class K$e{static{bS(this,"ResolvableTreeItem")}handle;parentHandle;collapsibleState;label;description;icon;iconDark;themeIcon;resourceUri;tooltip;contextValue;command;children;accessibilityInformation;resolve;resolved=!1;_hasResolve=!1;constructor(e,t){vH(this,e),this._hasResolve=!!t,this.resolve=async n=>{if(t&&!this.resolved){const s=await t(n);s&&(this.tooltip=this.tooltip??s.tooltip,this.command=this.command??s.command)}n.isCancellationRequested||(this.resolved=!0)}}get hasResolve(){return this._hasResolve}resetResolve(){this.resolved=!1}asTreeItem(){return{handle:this.handle,parentHandle:this.parentHandle,collapsibleState:this.collapsibleState,label:this.label,description:this.description,icon:this.icon,iconDark:this.iconDark,themeIcon:this.themeIcon,resourceUri:this.resourceUri,tooltip:this.tooltip,contextValue:this.contextValue,command:this.command,children:this.children,accessibilityInformation:this.accessibilityInformation}}}class j$e extends Error{static{bS(this,"NoTreeViewError")}name="NoTreeViewError";constructor(e){super(g("treeView.notRegistered","No tree view with id '{0}' registered.",e))}static is(e){return!!e&&e.name==="NoTreeViewError"}}const vf=De("viewsService");var kRe=Object.defineProperty,I7=(i,e)=>kRe(i,"name",{value:e,configurable:!0});class tne extends VP{constructor(e,t,n,s){super(e,n,s),this.telemetryService=t}static{I7(this,"Composite")}_onTitleAreaUpdate=this._register(new x);onTitleAreaUpdate=this._onTitleAreaUpdate.event;_onDidFocus;get onDidFocus(){return this._onDidFocus||(this._onDidFocus=this.registerFocusTrackEvents().onDidFocus),this._onDidFocus.event}_onDidBlur;get onDidBlur(){return this._onDidBlur||(this._onDidBlur=this.registerFocusTrackEvents().onDidBlur),this._onDidBlur.event}_hasFocus=!1;hasFocus(){return this._hasFocus}registerFocusTrackEvents(){const e=pt(this.getContainer()),t=this._register(al(e)),n=this._onDidFocus=this._register(new x);this._register(t.onDidFocus(()=>{this._hasFocus=!0,n.fire()}));const s=this._onDidBlur=this._register(new x);return this._register(t.onDidBlur(()=>{this._hasFocus=!1,s.fire()})),{onDidFocus:n,onDidBlur:s}}actionRunner;visible=!1;parent;getTitle(){}create(e){this.parent=e}getContainer(){return this.parent}setVisible(e){this.visible!==!!e&&(this.visible=e)}focus(){}getMenuIds(){return[]}getActions(){return[]}getSecondaryActions(){return[]}getContextMenuActions(){return[]}getActionViewItem(e,t){}getActionsContext(){return null}getActionRunner(){return this.actionRunner||(this.actionRunner=this._register(new nc)),this.actionRunner}updateTitleArea(){this._onTitleAreaUpdate.fire()}isVisible(){return this.visible}getControl(){}}class NRe{constructor(e,t,n,s,o,r){this.ctor=e,this.id=t,this.name=n,this.cssClass=s,this.order=o,this.requestedIndex=r}static{I7(this,"CompositeDescriptor")}instantiate(e){return e.createInstance(this.ctor)}}class PRe extends ${static{I7(this,"CompositeRegistry")}_onDidRegister=this._register(new x);onDidRegister=this._onDidRegister.event;_onDidDeregister=this._register(new x);onDidDeregister=this._onDidDeregister.event;composites=[];registerComposite(e){this.compositeById(e.id)||(this.composites.push(e),this._onDidRegister.fire(e))}deregisterComposite(e){const t=this.compositeById(e);t&&(this.composites.splice(this.composites.indexOf(t),1),this._onDidDeregister.fire(t))}getComposite(e){return this.compositeById(e)}getComposites(){return this.composites.slice(0)}compositeById(e){return this.composites.find(t=>t.id===e)}}var RRe=Object.defineProperty,hR=(i,e)=>RRe(i,"name",{value:e,configurable:!0});class gk extends ${static{hR(this,"Pane")}static HEADER_SIZE=22;element;header;body;_expanded;_orientation;expandedSize=void 0;_headerVisible=!0;_collapsible=!0;_bodyRendered=!1;_minimumBodySize;_maximumBodySize;_ariaHeaderLabel;styles={dropBackground:void 0,headerBackground:void 0,headerBorder:void 0,headerForeground:void 0,leftBorder:void 0};animationTimer=void 0;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_onDidChangeExpansionState=this._register(new x);onDidChangeExpansionState=this._onDidChangeExpansionState.event;get ariaHeaderLabel(){return this._ariaHeaderLabel}set ariaHeaderLabel(e){this._ariaHeaderLabel=e,this.header.setAttribute("aria-label",this.ariaHeaderLabel)}get draggableElement(){return this.header}get dropTargetElement(){return this.element}get dropBackground(){return this.styles.dropBackground}get minimumBodySize(){return this._minimumBodySize}set minimumBodySize(e){this._minimumBodySize=e,this._onDidChange.fire(void 0)}get maximumBodySize(){return this._maximumBodySize}set maximumBodySize(e){this._maximumBodySize=e,this._onDidChange.fire(void 0)}get headerSize(){return this.headerVisible?gk.HEADER_SIZE:0}get minimumSize(){const e=this.headerSize,n=!this.headerVisible||this.isExpanded()?this.minimumBodySize:0;return e+n}get maximumSize(){const e=this.headerSize,n=!this.headerVisible||this.isExpanded()?this.maximumBodySize:0;return e+n}orthogonalSize=0;constructor(e){super(),this._expanded=typeof e.expanded>"u"?!0:!!e.expanded,this._orientation=typeof e.orientation>"u"?ke.VERTICAL:e.orientation,this._ariaHeaderLabel=g("viewSection","{0} Section",e.title),this._minimumBodySize=typeof e.minimumBodySize=="number"?e.minimumBodySize:this._orientation===ke.HORIZONTAL?200:120,this._maximumBodySize=typeof e.maximumBodySize=="number"?e.maximumBodySize:Number.POSITIVE_INFINITY,this.element=ce(".pane")}isExpanded(){return this._expanded}setExpanded(e){return!e&&!this.collapsible||this._expanded===!!e?!1:(this.element?.classList.toggle("expanded",e),this._expanded=!!e,this.updateHeader(),e?(this._bodyRendered||(this.renderBody(this.body),this._bodyRendered=!0),typeof this.animationTimer=="number"&&ve(this.element).clearTimeout(this.animationTimer),Le(this.element,this.body)):this.animationTimer=ve(this.element).setTimeout(()=>{this.body.remove()},200),this._onDidChangeExpansionState.fire(e),this._onDidChange.fire(e?this.expandedSize:void 0),!0)}get headerVisible(){return this._headerVisible}set headerVisible(e){this._headerVisible!==!!e&&(this._headerVisible=!!e,this.updateHeader(),this._onDidChange.fire(void 0))}get collapsible(){return this._collapsible}set collapsible(e){this._collapsible!==!!e&&(this._collapsible=!!e,this.updateHeader())}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this.element&&(this.element.classList.toggle("horizontal",this.orientation===ke.HORIZONTAL),this.element.classList.toggle("vertical",this.orientation===ke.VERTICAL)),this.header&&this.updateHeader())}render(){this.element.classList.toggle("expanded",this.isExpanded()),this.element.classList.toggle("horizontal",this.orientation===ke.HORIZONTAL),this.element.classList.toggle("vertical",this.orientation===ke.VERTICAL),this.header=ce(".pane-header"),Le(this.element,this.header),this.header.setAttribute("tabindex","0"),this.header.setAttribute("role","button"),this.header.setAttribute("aria-label",this.ariaHeaderLabel),this.renderHeader(this.header);const e=al(this.header);this._register(e),this._register(e.onDidFocus(()=>this.header.classList.add("focused"),null)),this._register(e.onDidBlur(()=>this.header.classList.remove("focused"),null)),this.updateHeader();const t=this._register(new te),n=this._register(new Je(this.header,"keydown")),s=H.map(n.event,o=>new Pt(o),t);this._register(H.filter(s,o=>o.keyCode===E.Enter||o.keyCode===E.Space,t)(()=>this.setExpanded(!this.isExpanded()),null)),this._register(H.filter(s,o=>o.keyCode===E.LeftArrow,t)(()=>this.setExpanded(!1),null)),this._register(H.filter(s,o=>o.keyCode===E.RightArrow,t)(()=>this.setExpanded(!0),null)),this._register(Gn.addTarget(this.header)),[Q.CLICK,wt.Tap].forEach(o=>{this._register(F(this.header,o,r=>{r.defaultPrevented||this.setExpanded(!this.isExpanded())}))}),this.body=Le(this.element,ce(".pane-body")),!this._bodyRendered&&this.isExpanded()&&(this.renderBody(this.body),this._bodyRendered=!0),this.isExpanded()||this.body.remove()}layout(e){const t=this.headerVisible?gk.HEADER_SIZE:0,n=this._orientation===ke.VERTICAL?this.orthogonalSize:e,s=this._orientation===ke.VERTICAL?e-t:this.orthogonalSize-t;this.isExpanded()&&(this.body.classList.toggle("wide",n>=600),this.layoutBody(s,n),this.expandedSize=e)}style(e){this.styles=e,this.header&&this.updateHeader()}updateHeader(){const e=!this.headerVisible||this.isExpanded();this.collapsible?(this.header.setAttribute("tabindex","0"),this.header.setAttribute("role","button")):(this.header.removeAttribute("tabindex"),this.header.removeAttribute("role")),this.header.style.lineHeight=`${this.headerSize}px`,this.header.classList.toggle("hidden",!this.headerVisible),this.header.classList.toggle("expanded",e),this.header.classList.toggle("not-collapsible",!this.collapsible),this.header.setAttribute("aria-expanded",String(e)),this.header.style.color=this.collapsible?this.styles.headerForeground??"":"",this.header.style.backgroundColor=(this.collapsible?this.styles.headerBackground:"transparent")??"",this.header.style.borderTop=this.styles.headerBorder&&this.orientation===ke.VERTICAL?`1px solid ${this.styles.headerBorder}`:"",this.element.style.borderLeft=this.styles.leftBorder&&this.orientation===ke.HORIZONTAL?`1px solid ${this.styles.leftBorder}`:""}}class T7 extends ${constructor(e,t,n){super(),this.pane=e,this.dnd=t,this.context=n,e.draggableElement.draggable=!0,this._register(F(e.draggableElement,"dragstart",s=>this.onDragStart(s))),this._register(F(e.dropTargetElement,"dragenter",s=>this.onDragEnter(s))),this._register(F(e.dropTargetElement,"dragleave",s=>this.onDragLeave(s))),this._register(F(e.dropTargetElement,"dragend",s=>this.onDragEnd(s))),this._register(F(e.dropTargetElement,"drop",s=>this.onDrop(s)))}static{hR(this,"PaneDraggable")}static DefaultDragOverBackgroundColor=new U(new Wt(128,128,128,.5));dragOverCounter=0;_onDidDrop=this._register(new x);onDidDrop=this._onDidDrop.event;onDragStart(e){if(!this.dnd.canDrag(this.pane)||!e.dataTransfer){e.preventDefault(),e.stopPropagation();return}e.dataTransfer.effectAllowed="move",na&&e.dataTransfer?.setData(Yh.TEXT,this.pane.draggableElement.textContent||"");const t=Le(this.pane.element.ownerDocument.body,ce(".monaco-drag-image",{},this.pane.draggableElement.textContent||""));e.dataTransfer.setDragImage(t,-10,-10),setTimeout(()=>t.remove(),0),this.context.draggable=this}onDragEnter(e){!this.context.draggable||this.context.draggable===this||this.dnd.canDrop(this.context.draggable.pane,this.pane)&&(this.dragOverCounter++,this.render())}onDragLeave(e){!this.context.draggable||this.context.draggable===this||this.dnd.canDrop(this.context.draggable.pane,this.pane)&&(this.dragOverCounter--,this.dragOverCounter===0&&this.render())}onDragEnd(e){this.context.draggable&&(this.dragOverCounter=0,this.render(),this.context.draggable=null)}onDrop(e){this.context.draggable&&(Fe.stop(e),this.dragOverCounter=0,this.render(),this.dnd.canDrop(this.context.draggable.pane,this.pane)&&this.context.draggable!==this&&this._onDidDrop.fire({from:this.context.draggable.pane,to:this.pane}),this.context.draggable=null)}render(){let e=null;this.dragOverCounter>0&&(e=this.pane.dropBackground??T7.DefaultDragOverBackgroundColor.toString()),this.pane.dropTargetElement.style.backgroundColor=e||""}}class q$e{static{hR(this,"DefaultPaneDndController")}canDrag(e){return!0}canDrop(e,t){return!0}}class ORe extends ${static{hR(this,"PaneView")}dnd;dndContext={draggable:null};element;paneItems=[];orthogonalSize=0;size=0;splitview;animationTimer=void 0;_onDidDrop=this._register(new x);onDidDrop=this._onDidDrop.event;orientation;boundarySashes;onDidSashChange;onDidSashReset;onDidScroll;constructor(e,t={}){super(),this.dnd=t.dnd,this.orientation=t.orientation??ke.VERTICAL,this.element=Le(e,ce(".monaco-pane-view")),this.splitview=this._register(new sy(this.element,{orientation:this.orientation})),this.onDidSashReset=this.splitview.onDidSashReset,this.onDidSashChange=this.splitview.onDidSashChange,this.onDidScroll=this.splitview.onDidScroll;const n=this._register(new te),s=this._register(new Je(this.element,"keydown")),o=H.map(H.filter(s.event,r=>xs(r.target)&&r.target.classList.contains("pane-header"),n),r=>new Pt(r),n);this._register(H.filter(o,r=>r.keyCode===E.UpArrow,n)(()=>this.focusPrevious())),this._register(H.filter(o,r=>r.keyCode===E.DownArrow,n)(()=>this.focusNext()))}addPane(e,t,n=this.splitview.length){const s=new te;e.onDidChangeExpansionState(this.setupAnimation,this,s);const o={pane:e,disposable:s};if(this.paneItems.splice(n,0,o),e.orientation=this.orientation,e.orthogonalSize=this.orthogonalSize,this.splitview.addView(e,t,n),this.dnd){const r=new T7(e,this.dnd,this.dndContext);s.add(r),s.add(r.onDidDrop(this._onDidDrop.fire,this._onDidDrop))}}removePane(e){const t=this.paneItems.findIndex(s=>s.pane===e);if(t===-1)return;this.splitview.removeView(t,e.isExpanded()?Ea.Distribute:void 0),this.paneItems.splice(t,1)[0].disposable.dispose()}movePane(e,t){const n=this.paneItems.findIndex(r=>r.pane===e),s=this.paneItems.findIndex(r=>r.pane===t);if(n===-1||s===-1)return;const[o]=this.paneItems.splice(n,1);this.paneItems.splice(s,0,o),this.splitview.moveView(n,s)}resizePane(e,t){const n=this.paneItems.findIndex(s=>s.pane===e);n!==-1&&this.splitview.resizeView(n,t)}getPaneSize(e){const t=this.paneItems.findIndex(n=>n.pane===e);return t===-1?-1:this.splitview.getViewSize(t)}layout(e,t){this.orthogonalSize=this.orientation===ke.VERTICAL?t:e,this.size=this.orientation===ke.HORIZONTAL?t:e;for(const n of this.paneItems)n.pane.orthogonalSize=this.orthogonalSize;this.splitview.layout(this.size)}setBoundarySashes(e){this.boundarySashes=e,this.updateSplitviewOrthogonalSashes(e)}updateSplitviewOrthogonalSashes(e){this.orientation===ke.VERTICAL?(this.splitview.orthogonalStartSash=e?.left,this.splitview.orthogonalEndSash=e?.right):this.splitview.orthogonalEndSash=e?.bottom}flipOrientation(e,t){this.orientation=this.orientation===ke.VERTICAL?ke.HORIZONTAL:ke.VERTICAL;const n=this.paneItems.map(r=>this.getPaneSize(r.pane));this.splitview.dispose(),Mn(this.element),this.splitview=this._register(new sy(this.element,{orientation:this.orientation})),this.updateSplitviewOrthogonalSashes(this.boundarySashes);const s=this.orientation===ke.VERTICAL?t:e,o=this.orientation===ke.HORIZONTAL?t:e;this.paneItems.forEach((r,a)=>{r.pane.orthogonalSize=s,r.pane.orientation=this.orientation;const l=this.size===0?0:o*n[a]/this.size;this.splitview.addView(r.pane,l,a)}),this.size=o,this.orthogonalSize=s,this.splitview.layout(this.size)}setupAnimation(){typeof this.animationTimer=="number"&&ve(this.element).clearTimeout(this.animationTimer),this.element.classList.add("animated"),this.animationTimer=ve(this.element).setTimeout(()=>{this.animationTimer=void 0,this.element.classList.remove("animated")},200)}getPaneHeaderElements(){return[...this.element.querySelectorAll(".pane-header")]}focusPrevious(){const e=this.getPaneHeaderElements(),t=e.indexOf(this.element.ownerDocument.activeElement);t!==-1&&e[Math.max(t-1,0)].focus()}focusNext(){const e=this.getPaneHeaderElements(),t=e.indexOf(this.element.ownerDocument.activeElement);t!==-1&&e[Math.min(t+1,e.length-1)].focus()}dispose(){super.dispose(),this.paneItems.forEach(e=>e.disposable.dispose())}}var ine=Object.defineProperty,MRe=Object.getOwnPropertyDescriptor,Ql=(i,e)=>ine(i,"name",{value:e,configurable:!0}),uR=(i,e,t,n)=>{for(var s=n>1?void 0:n?MRe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&ine(e,t,s),s},qr=(i,e)=>(t,n)=>e(t,n,i);function fy(i,e,t,n){let s,o,r;if(Array.isArray(i))r=i,s=e,o=t;else{const c=e;r=i.getActions(c),s=t,o=n}const a=fg.getInstance(),l=a.keyStatus.altKey||(Nt||Gi)&&a.keyStatus.shiftKey;A7(r,s,l,o?c=>c===o:c=>c==="navigation")}Ql(fy,"createAndFillInContextMenuActions");function Dv(i,e,t,n,s,o){let r,a,l,c,d;if(Array.isArray(i))d=i,r=e,a=t,l=n,c=s;else{const u=e;d=i.getActions(u),r=t,a=n,l=s,c=o}A7(d,r,!1,typeof a=="string"?u=>u===a:a,l,c)}Ql(Dv,"createAndFillInActionBarActions");function A7(i,e,t,n=r=>r==="navigation",s=()=>!1,o=!1){let r,a;Array.isArray(e)?(r=e,a=e):(r=e.primary,a=e.secondary);const l=new Set;for(const[c,d]of i){let h;n(c)?(h=r,h.length>0&&o&&h.push(new zt)):(h=a,h.length>0&&h.push(new zt));for(let u of d){t&&(u=u instanceof Yl&&u.alt?u.alt:u);const f=h.push(u);u instanceof ll&&l.add({group:c,action:u,index:f-1})}}for(const{group:c,action:d,index:h}of l){const u=n(c)?r:a,f=d.actions;s(d,c,u.length)&&u.splice(h,1,...f)}}Ql(A7,"fillInActions");let py=class extends _D{constructor(i,e,t,n,s,o,r,a){super(void 0,i,{icon:!!(i.class||i.item.icon),label:!i.class&&!i.item.icon,draggable:e?.draggable,keybinding:e?.keybinding,hoverDelegate:e?.hoverDelegate}),this._options=e,this._keybindingService=t,this._notificationService=n,this._contextKeyService=s,this._themeService=o,this._contextMenuService=r,this._accessibilityService=a,this._altKey=fg.getInstance()}static{Ql(this,"MenuEntryActionViewItem")}_wantsAltCommand=!1;_itemClassDispose=this._register(new Yi);_altKey;get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(i){i.preventDefault(),i.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(e){this._notificationService.error(e)}}render(i){if(super.render(i),i.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let e=!1;const t=Ql(()=>{const n=!!this._menuItemAction.alt?.enabled&&(!this._accessibilityService.isMotionReduced()||e)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&e);n!==this._wantsAltCommand&&(this._wantsAltCommand=n,this.updateLabel(),this.updateTooltip(),this.updateClass())},"updateAltState");this._register(this._altKey.event(t)),this._register(F(i,"mouseleave",n=>{e=!1,t()})),this._register(F(i,"mouseenter",n=>{e=!0,t()})),t()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){const i=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),e=i&&i.getLabel(),t=this._commandAction.tooltip||this._commandAction.label;let n=e?g("titleAndKb","{0} ({1})",t,e):t;if(!this._wantsAltCommand&&this._menuItemAction.alt?.enabled){const s=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,o=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),r=o&&o.getLabel(),a=r?g("titleAndKb","{0} ({1})",s,r):s;n=g("titleAndKbAndAlt",`{0}
[{1}] {2}`,n,Mte.modifierLabels[gp].altKey,a)}return n}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(i){this._itemClassDispose.value=void 0;const{element:e,label:t}=this;if(!e||!t)return;const n=this._commandAction.checked&&sH(i.toggled)&&i.toggled.icon?i.toggled.icon:i.icon;if(n)if(Ne.isThemeIcon(n)){const s=Ne.asClassNameArray(n);t.classList.add(...s),this._itemClassDispose.value=ye(()=>{t.classList.remove(...s)})}else t.style.backgroundImage=D5(this._themeService.getColorTheme().type)?Zg(n.dark):Zg(n.light),t.classList.add("icon"),this._itemClassDispose.value=Ia(ye(()=>{t.style.backgroundImage="",t.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};py=uR([qr(2,ni),qr(3,fs),qr(4,Ye),qr(5,$t),qr(6,Hi),qr(7,hf)],py);class nne extends py{static{Ql(this,"TextOnlyMenuEntryActionViewItem")}render(e){this.options.label=!0,this.options.icon=!1,super.render(e),e.classList.add("text-only"),e.classList.toggle("use-comma",this._options?.useComma??!1)}updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=nne._symbolPrintEnter(e);this._options?.conversational?this.label.textContent=g({key:"content2",comment:['A label with keybindg like "ESC to dismiss"']},"{1} to {0}",this._action.label,t):this.label.textContent=g({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,t)}}static _symbolPrintEnter(e){return e.getLabel()?.replace(/\benter\b/gi,"").replace(/\bEscape\b/gi,"Esc")}}let fk=class extends jb{constructor(i,e,t,n,s){const o={...e,menuAsChild:e?.menuAsChild??!1,classNames:e?.classNames??(Ne.isThemeIcon(i.item.icon)?Ne.asClassName(i.item.icon):void 0),keybindingProvider:e?.keybindingProvider??(r=>t.lookupKeybinding(r.id))};super(i,{getActions:Ql(()=>i.actions,"getActions")},n,o),this._keybindingService=t,this._contextMenuService=n,this._themeService=s}static{Ql(this,"SubmenuEntryActionViewItem")}render(i){super.render(i),MC(this.element),i.classList.add("menu-entry");const e=this._action,{icon:t}=e.item;if(t&&!Ne.isThemeIcon(t)){this.element.classList.add("icon");const n=Ql(()=>{this.element&&(this.element.style.backgroundImage=D5(this._themeService.getColorTheme().type)?Zg(t.dark):Zg(t.light))},"setBackgroundImage");n(),this._register(this._themeService.onDidColorThemeChange(()=>{n()}))}}};fk=uR([qr(2,ni),qr(3,Hi),qr(4,$t)],fk);let yV=class extends yr{constructor(i,e,t,n,s,o,r,a){super(null,i),this._keybindingService=t,this._notificationService=n,this._contextMenuService=s,this._menuService=o,this._instaService=r,this._storageService=a,this._options=e,this._storageKey=`${i.item.submenu.id}_lastActionId`;let l;const c=e?.persistLastActionId?a.get(this._storageKey,Be.WORKSPACE):void 0;c&&(l=i.actions.find(h=>c===h.id)),l||(l=i.actions[0]),this._defaultAction=this._instaService.createInstance(py,l,{keybinding:this._getDefaultActionKeybindingLabel(l)});const d={keybindingProvider:Ql(h=>this._keybindingService.lookupKeybinding(h.id),"keybindingProvider"),...e,menuAsChild:e?.menuAsChild??!0,classNames:e?.classNames??["codicon","codicon-chevron-down"],actionRunner:e?.actionRunner??new nc};this._dropdown=new jb(i,i.actions,this._contextMenuService,d),this._register(this._dropdown.actionRunner.onDidRun(h=>{h.action instanceof Yl&&this.update(h.action)}))}static{Ql(this,"DropdownWithDefaultActionViewItem")}_options;_defaultAction;_dropdown;_container=null;_storageKey;get onDidChangeDropdownVisibility(){return this._dropdown.onDidChangeVisibility}update(i){this._options?.persistLastActionId&&this._storageService.store(this._storageKey,i.id,Be.WORKSPACE,ai.MACHINE),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(py,i,{keybinding:this._getDefaultActionKeybindingLabel(i)}),this._defaultAction.actionRunner=new class extends nc{async runAction(e,t){await e.run(void 0)}},this._container&&this._defaultAction.render(jC(this._container,ce(".action-container")))}_getDefaultActionKeybindingLabel(i){let e;if(this._options?.renderKeybindingWithDefaultActionLabel){const t=this._keybindingService.lookupKeybinding(i.id);t&&(e=`(${t.getLabel()})`)}return e}setActionContext(i){super.setActionContext(i),this._defaultAction.setActionContext(i),this._dropdown.setActionContext(i)}render(i){this._container=i,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const e=ce(".action-container");this._defaultAction.render(Le(this._container,e)),this._register(F(e,Q.KEY_DOWN,n=>{const s=new Pt(n);s.equals(E.RightArrow)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),s.stopPropagation())}));const t=ce(".dropdown-action-container");this._dropdown.render(Le(this._container,t)),this._register(F(t,Q.KEY_DOWN,n=>{const s=new Pt(n);s.equals(E.LeftArrow)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),this._defaultAction.element?.focus(),s.stopPropagation())}))}focus(i){i?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(i){i?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};yV=uR([qr(2,ni),qr(3,fs),qr(4,Hi),qr(5,No),qr(6,He),qr(7,Si)],yV);let SV=class extends XAe{static{Ql(this,"SubmenuEntrySelectActionViewItem")}constructor(i,e){super(null,i,i.actions.map(t=>({text:t.id===zt.ID?"":t.label,isDisabled:!t.enabled})),0,e,$te,{ariaLabel:i.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,i.actions.findIndex(t=>t.checked)))}render(i){super.render(i),i.style.borderColor=be(L5)}runAction(i,e){const t=this.action.actions[e];t&&this.actionRunner.run(t)}};SV=uR([qr(1,XP)],SV);function fm(i,e,t){return e instanceof Yl?i.createInstance(py,e,t):e instanceof ql?e.item.isSelection?i.createInstance(SV,e):e.item.rememberDefaultAction?i.createInstance(yV,e,{...t,persistLastActionId:!0}):i.createInstance(fk,e,t):void 0}Ql(fm,"createActionViewItem");var sne=Object.defineProperty,BRe=Object.getOwnPropertyDescriptor,one=(i,e)=>sne(i,"name",{value:e,configurable:!0}),FRe=(i,e,t,n)=>{for(var s=n>1?void 0:n?BRe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&sne(e,t,s),s},zU=(i,e)=>(t,n)=>e(t,n,i);class VRe extends ${constructor(e,t,n,s){super(),this.options=t,this.menuService=n,this.contextKeyService=s,this.menu=this._register(n.createMenu(e,s)),this._register(this.menu.onDidChange(()=>this.updateActions())),this.updateActions()}static{one(this,"MenuActions")}menu;_primaryActions=[];get primaryActions(){return this._primaryActions}_secondaryActions=[];get secondaryActions(){return this._secondaryActions}_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;disposables=this._register(new te);updateActions(){this.disposables.clear(),this._primaryActions=[],this._secondaryActions=[],Dv(this.menu,this.options,{primary:this._primaryActions,secondary:this._secondaryActions}),this.disposables.add(this.updateSubmenus([...this._primaryActions,...this._secondaryActions],{})),this._onDidChange.fire()}updateSubmenus(e,t){const n=new te;for(const s of e)if(s instanceof ql&&!t[s.item.submenu.id]){const o=t[s.item.submenu.id]=n.add(this.menuService.createMenu(s.item.submenu,this.contextKeyService));n.add(o.onDidChange(()=>this.updateActions())),n.add(this.updateSubmenus(s.actions,t))}return n}}let my=class extends ${constructor(i,e,t,n,s){super(),this.menuId=i,this.contextMenuId=e,this.options=t,this.contextKeyService=n,this.menuService=s,this.menuActions=this._register(new VRe(i,this.options,s,n)),this._register(this.menuActions.onDidChange(()=>this._onDidChange.fire()))}static{one(this,"CompositeMenuActions")}menuActions;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;getPrimaryActions(){return this.menuActions.primaryActions}getSecondaryActions(){return this.menuActions.secondaryActions}getContextMenuActions(){const i=[];if(this.contextMenuId){const e=this.menuService.getMenuActions(this.contextMenuId,this.contextKeyService,this.options);Dv(e,{primary:[],secondary:i})}return i}};my=FRe([zU(3,Ye),zU(4,No)],my);var WRe=Object.defineProperty,kI=(i,e)=>WRe(i,"name",{value:e,configurable:!0}),Pd;(i=>{function e(o){return typeof o?.showDirectoryPicker=="function"}i.supported=e,kI(e,"supported");function t(o){const r=o;return r?typeof r.kind=="string"&&typeof r.queryPermission=="function"&&typeof r.requestPermission=="function":!1}i.isFileSystemHandle=t,kI(t,"isFileSystemHandle");function n(o){return o.kind==="file"}i.isFileSystemFileHandle=n,kI(n,"isFileSystemFileHandle");function s(o){return o.kind==="directory"}i.isFileSystemDirectoryHandle=s,kI(s,"isFileSystemDirectoryHandle")})(Pd||(Pd={}));var HRe=Object.defineProperty,pk=(i,e)=>HRe(i,"name",{value:e,configurable:!0});class $U extends Error{constructor(e){super("Missing stores"),this.db=e}static{pk(this,"MissingStoresError")}}class GU extends Error{static{pk(this,"DBClosedError")}code="DBClosed";constructor(e){super(`IndexedDB database '${e}' is closed.`)}}class ow{constructor(e,t){this.name=t,this.database=e}static{pk(this,"IndexedDB")}static async create(e,t,n){const s=await ow.openDatabase(e,t,n);return new ow(s,e)}static async openDatabase(e,t,n){_i(`code/willOpenDatabase/${e}`);try{return await ow.doOpenDatabase(e,t,n)}catch(s){if(s instanceof $U){console.info("Attempting to recreate the IndexedDB once.",e);try{await ow.deleteDatabase(s.db)}catch(o){throw console.error("Error while deleting the IndexedDB",vN(o)),o}return await ow.doOpenDatabase(e,t,n)}throw s}finally{_i(`code/didOpenDatabase/${e}`)}}static doOpenDatabase(e,t,n){return new Promise((s,o)=>{const r=indexedDB.open(e,t);r.onerror=()=>o(r.error),r.onsuccess=()=>{const a=r.result;for(const l of n)if(!a.objectStoreNames.contains(l)){console.error(`Error while opening IndexedDB. Could not find '${l}'' object store`),o(new $U(a));return}s(a)},r.onupgradeneeded=()=>{const a=r.result;for(const l of n)a.objectStoreNames.contains(l)||a.createObjectStore(l)}})}static deleteDatabase(e){return new Promise((t,n)=>{e.close();const s=indexedDB.deleteDatabase(e.name);s.onerror=o=>n(s.error),s.onsuccess=()=>t()})}database=null;pendingTransactions=[];hasPendingTransactions(){return this.pendingTransactions.length>0}close(){this.pendingTransactions.length&&this.pendingTransactions.splice(0,this.pendingTransactions.length).forEach(e=>e.abort()),this.database?.close(),this.database=null}async runInTransaction(e,t,n){if(!this.database)throw new GU(this.name);const s=this.database.transaction(e,t);return this.pendingTransactions.push(s),new Promise((o,r)=>{s.oncomplete=()=>{Array.isArray(a)?o(a.map(l=>l.result)):o(a.result)},s.onerror=()=>r(s.error?Da.fromError(s.error):new Da("unknown error")),s.onabort=()=>r(s.error?Da.fromError(s.error):new Da("unknown error"));const a=n(s.objectStore(e))}).finally(()=>this.pendingTransactions.splice(this.pendingTransactions.indexOf(s),1))}async getKeyValues(e,t){if(!this.database)throw new GU(this.name);const n=this.database.transaction(e,"readonly");return this.pendingTransactions.push(n),new Promise(s=>{const o=new Map,a=n.objectStore(e).openCursor();if(!a)return s(o);a.onsuccess=()=>{a.result?(t(a.result.value)&&o.set(a.result.key.toString(),a.result.value),a.result.continue()):s(o)};const l=pk(c=>{console.error(`IndexedDB getKeyValues(): ${hh(c,!0)}`),s(o)},"onError");a.onerror=()=>l(a.error),n.onerror=()=>l(n.error)}).finally(()=>this.pendingTransactions.splice(this.pendingTransactions.indexOf(n),1))}}var URe=Object.defineProperty,zRe=(i,e)=>URe(i,"name",{value:e,configurable:!0});class $Re{constructor(e,t,n){this.indexedDB=e,this.store=t,this.logService=n}static{zRe(this,"HTMLFileSystemProvider")}onDidChangeCapabilities=H.None;onDidChangeFile=H.None;extUri=Gi?bi:JK;_capabilities;get capabilities(){return this._capabilities||(this._capabilities=ET.FileReadWrite|ET.FileReadStream,Gi&&(this._capabilities|=ET.PathCaseSensitive)),this._capabilities}async stat(e){try{const t=await this.getHandle(e);if(!t)throw this.createFileSystemProviderError(e,"No such file or directory, stat",ma.FileNotFound);if(Pd.isFileSystemFileHandle(t)){const n=await t.getFile();return{type:yp.File,mtime:n.lastModified,ctime:0,size:n.size}}return{type:yp.Directory,mtime:0,ctime:0,size:0}}catch(t){throw this.toFileSystemProviderError(t)}}async readdir(e){try{const t=await this.getDirectoryHandle(e);if(!t)throw this.createFileSystemProviderError(e,"No such file or directory, readdir",ma.FileNotFound);const n=[];for await(const[s,o]of t)n.push([s,Pd.isFileSystemFileHandle(o)?yp.File:yp.Directory]);return n}catch(t){throw this.toFileSystemProviderError(t)}}readFileStream(e,t,n){const s=lm(o=>mt.concat(o.map(r=>mt.wrap(r))).buffer,{highWaterMark:10});return(async()=>{try{const o=await this.getFileHandle(e);if(!o)throw this.createFileSystemProviderError(e,"No such file or directory, readFile",ma.FileNotFound);const r=await o.getFile();if(typeof t.length=="number"||typeof t.position=="number"){let a=new Uint8Array(await r.arrayBuffer());typeof t?.position=="number"&&(a=a.slice(t.position)),typeof t?.length=="number"&&(a=a.slice(0,t.length)),s.end(a)}else{const a=r.stream().getReader();let l=await a.read();for(;!l.done&&!(n.isCancellationRequested||(await s.write(l.value),n.isCancellationRequested));)l=await a.read();s.end(void 0)}}catch(o){s.error(this.toFileSystemProviderError(o)),s.end()}})(),s}async readFile(e){try{const t=await this.getFileHandle(e);if(!t)throw this.createFileSystemProviderError(e,"No such file or directory, readFile",ma.FileNotFound);const n=await t.getFile();return new Uint8Array(await n.arrayBuffer())}catch(t){throw this.toFileSystemProviderError(t)}}async writeFile(e,t,n){try{let s=await this.getFileHandle(e);if(!n.create||!n.overwrite){if(s){if(!n.overwrite)throw this.createFileSystemProviderError(e,"File already exists, writeFile",ma.FileExists)}else if(!n.create)throw this.createFileSystemProviderError(e,"No such file, writeFile",ma.FileNotFound)}if(!s){const r=await this.getDirectoryHandle(this.extUri.dirname(e));if(!r)throw this.createFileSystemProviderError(e,"No such parent directory, writeFile",ma.FileNotFound);if(s=await r.getFileHandle(this.extUri.basename(e),{create:!0}),!s)throw this.createFileSystemProviderError(e,"Unable to create file , writeFile",ma.Unknown)}const o=await s.createWritable();await o.write(t),await o.close()}catch(s){throw this.toFileSystemProviderError(s)}}async mkdir(e){try{const t=await this.getDirectoryHandle(this.extUri.dirname(e));if(!t)throw this.createFileSystemProviderError(e,"No such parent directory, mkdir",ma.FileNotFound);await t.getDirectoryHandle(this.extUri.basename(e),{create:!0})}catch(t){throw this.toFileSystemProviderError(t)}}async delete(e,t){try{const n=await this.getDirectoryHandle(this.extUri.dirname(e));if(!n)throw this.createFileSystemProviderError(e,"No such parent directory, delete",ma.FileNotFound);return n.removeEntry(this.extUri.basename(e),{recursive:t.recursive})}catch(n){throw this.toFileSystemProviderError(n)}}async rename(e,t,n){try{if(this.extUri.isEqual(e,t))return;const s=await this.getFileHandle(e);if(s){const o=await s.getFile(),r=new Uint8Array(await o.arrayBuffer());await this.writeFile(t,r,{create:!0,overwrite:n.overwrite,unlock:!1,atomic:!1}),await this.delete(e,{recursive:!1,useTrash:!1,atomic:!1})}else throw this.createFileSystemProviderError(e,g("fileSystemRenameError","Rename is only supported for files."),ma.Unavailable)}catch(s){throw this.toFileSystemProviderError(s)}}watch(e,t){return $.None}_files=new Map;_directories=new Map;registerFileHandle(e){return this.registerHandle(e,this._files)}registerDirectoryHandle(e){return this.registerHandle(e,this._directories)}get directories(){return this._directories.values()}async registerHandle(e,t){let n=`/${e.name}`;if(t.has(n)&&!await t.get(n)?.isSameEntry(e)){const s=LL(e.name),o=EN(e.name,s);let r=1;do n=`/${o}-${r++}${s}`;while(t.has(n)&&!await t.get(n)?.isSameEntry(e))}t.set(n,e);try{await this.indexedDB?.runInTransaction(this.store,"readwrite",s=>s.put(e,n))}catch(s){this.logService.error(s)}return ne.from({scheme:Ve.file,path:n})}async getHandle(e){let t=await this.doGetHandle(e);if(!t){const n=await this.getDirectoryHandle(this.extUri.dirname(e));if(n){const s=bi.basename(e);try{t=await n.getFileHandle(s)}catch{try{t=await n.getDirectoryHandle(s)}catch{}}}}return t}async getFileHandle(e){const t=await this.doGetHandle(e);if(t instanceof FileSystemFileHandle)return t;const n=await this.getDirectoryHandle(this.extUri.dirname(e));try{return await n?.getFileHandle(bi.basename(e))}catch{return}}async getDirectoryHandle(e){const t=await this.doGetHandle(e);if(t instanceof FileSystemDirectoryHandle)return t;const n=this.extUri.dirname(e);if(this.extUri.isEqual(n,e))return;const s=await this.getDirectoryHandle(n);try{return await s?.getDirectoryHandle(bi.basename(e))}catch{return}}async doGetHandle(e){if(this.extUri.dirname(e).path!=="/")return;const t=e.path.replace(/\/$/,""),n=this._files.get(t)??this._directories.get(t);if(n)return n;const s=await this.indexedDB?.runInTransaction(this.store,"readonly",o=>o.get(t));if(Pd.isFileSystemHandle(s)){let o=await s.queryPermission()==="granted";try{o||(o=await s.requestPermission()==="granted")}catch(r){this.logService.error(r)}if(o)return Pd.isFileSystemFileHandle(s)?this._files.set(t,s):Pd.isFileSystemDirectoryHandle(s)&&this._directories.set(t,s),s}throw this.createFileSystemProviderError(e,"No file system handle registered",ma.Unavailable)}toFileSystemProviderError(e){if(e instanceof oD)return e;let t=ma.Unknown;return e.name==="NotAllowedError"&&(e=new Error(g("fileSystemNotAllowedError","Insufficient permissions. Please retry and allow the operation.")),t=ma.Unavailable),Cx(e,t)}createFileSystemProviderError(e,t,n){return Cx(new Error(`${t} (${Np(e.path)})`),n)}}var GRe=Object.defineProperty,wf=(i,e)=>GRe(i,"name",{value:e,configurable:!0});const EV={EDITORS:"CodeEditors",FILES:"CodeFiles"};function rne(i){const e=[];if(i.dataTransfer&&i.dataTransfer.types.length>0){const s=i.dataTransfer.getData(EV.EDITORS);if(s)try{e.push(...FP(s))}catch{}else try{const a=i.dataTransfer.getData(Yh.RESOURCES);e.push(...x7(a))}catch{}if(i.dataTransfer?.files)for(let a=0;a<i.dataTransfer.files.length;a++){const l=i.dataTransfer.files[a];if(l&&l.path)try{e.push({resource:ne.file(l.path),isExternal:!0,allowWorkspaceOpen:!0})}catch{}}const o=i.dataTransfer.getData(EV.FILES);if(o)try{const a=JSON.parse(o);for(const l of a)e.push({resource:ne.file(l),isExternal:!0,allowWorkspaceOpen:!0})}catch{}const r=Xt.as(k7.DragAndDropContribution).getAll();for(const a of r){const l=i.dataTransfer.getData(a.dataFormatKey);if(l)try{e.push(...a.getEditorInputs(l))}catch{}}}const t=[],n=new ro;for(const s of e)s.resource?n.has(s.resource)||(t.push(s),n.set(s.resource,!0)):t.push(s);return t}wf(rne,"extractEditorsDropData");async function ane(i,e){const t=rne(e);if(e.dataTransfer&&ui&&hne(e,Yh.FILES)&&e.dataTransfer.items){const o=await i.get(He).invokeFunction(r=>lne(r,e));for(const r of o)t.push({resource:r.resource,contents:r.contents?.toString(),isExternal:!0,allowWorkspaceOpen:r.isDirectory})}return t}wf(ane,"extractEditorsAndFilesDropData");function x7(i){const e=[];if(i){const t=JSON.parse(i);for(const n of t)if(n.indexOf(":")>0){const{selection:s,uri:o}=L7(ne.parse(n));e.push({resource:o,options:{selection:s}})}}return e}wf(x7,"createDraggedEditorInputFromRawResourcesData");async function lne(i,e){if(Pd.supported(_e)){const n=e.dataTransfer?.items;if(n)return cne(i,n)}const t=e.dataTransfer?.files;return t?dne(i,t):[]}wf(lne,"extractFilesDropData");async function cne(i,e){const t=i.get(la).getProvider(Ve.file);if(!(t instanceof $Re))return[];const n=[];for(let s=0;s<e.length;s++){const o=e[s];if(o){const r=new jg;n.push(r),(async()=>{try{const a=await o.getAsFileSystemHandle();if(!a){r.complete(void 0);return}Pd.isFileSystemFileHandle(a)?r.complete({resource:await t.registerFileHandle(a),isDirectory:!1}):Pd.isFileSystemDirectoryHandle(a)?r.complete({resource:await t.registerDirectoryHandle(a),isDirectory:!0}):r.complete(void 0)}catch{r.complete(void 0)}})()}}return To(await Promise.all(n.map(s=>s.p)))}wf(cne,"extractFileTransferData");async function dne(i,e){const t=i.get(gh),n=[];for(let s=0;s<e.length;s++){const o=e.item(s);if(o){if(o.size>100*to.MB){t.warn(g("fileTooLarge","File is too large to open as untitled editor. Please upload it first into the file explorer and then try again."));continue}const r=new jg;n.push(r);const a=new FileReader;a.onerror=()=>r.complete(void 0),a.onabort=()=>r.complete(void 0),a.onload=async l=>{const c=o.name,d=l.target?.result??void 0;if(typeof c!="string"||typeof d>"u"){r.complete(void 0);return}r.complete({resource:ne.from({scheme:Ve.untitled,path:c}),contents:typeof d=="string"?mt.fromString(d):mt.wrap(new Uint8Array(d))})},a.readAsArrayBuffer(o)}}return To(await Promise.all(n.map(s=>s.p)))}wf(dne,"extractFileListData");function hne(i,...e){if(!i.dataTransfer)return!1;const t=i.dataTransfer.types,n=[];for(let s=0;s<t.length;s++)n.push(t[s].toLowerCase());for(const s of e)if(n.indexOf(s.toLowerCase())>=0)return!0;return!1}wf(hne,"containsDragType");class KRe{static{wf(this,"DragAndDropContributionRegistry")}_contributions=new Map;register(e){if(this._contributions.has(e.dataFormatKey))throw new Error(`A drag and drop contributiont with key '${e.dataFormatKey}' was already registered.`);this._contributions.set(e.dataFormatKey,e)}getAll(){return this._contributions.values()}}const k7={DragAndDropContribution:"workbench.contributions.dragAndDrop"};Xt.add(k7.DragAndDropContribution,new KRe);class db{static{wf(this,"LocalSelectionTransfer")}static INSTANCE=new db;data;proto;constructor(){}static getInstance(){return db.INSTANCE}hasData(e){return e&&e===this.proto}clearData(e){this.hasData(e)&&(this.proto=void 0,this.data=void 0)}getData(e){if(this.hasData(e))return this.data}setData(e,t){t&&(this.data=e,this.proto=t)}}var jRe=Object.defineProperty,Mg=(i,e)=>jRe(i,"name",{value:e,configurable:!0});function une(i,e,t){let n,s,o,r,a;if(e){for(r=e.offset,a=r+e.length,o=r;o>0&&!XE(i,o-1);)o--;let b=a;for(;b<i.length&&!XE(i,b);)b++;s=i.substring(o,b),n=gne(s,t)}else s=i,n=0,o=0,r=0,a=i.length;const l=fne(t,i);let c=!1,d=0,h;t.insertSpaces?h=oA(" ",t.tabSize||4):h="	";const u=F6(s,!1);let f=!1;function p(){return l+oA(h,n+d)}Mg(p,"newLineAndIndent");function m(){let b=u.scan();for(c=!1;b===Pi.Trivia||b===Pi.LineBreakTrivia;)c=c||b===Pi.LineBreakTrivia,b=u.scan();return f=b===Pi.Unknown||u.getTokenError()!==lJ.None,b}Mg(m,"scanNext");const _=[];function w(b,C,S){!f&&C<a&&S>r&&i.substring(C,S)!==b&&_.push({offset:C,length:S-C,content:b})}Mg(w,"addEdit");let v=m();if(v!==Pi.EOF){const b=u.getTokenOffset()+o,C=oA(h,n);w(C,o,b)}for(;v!==Pi.EOF;){let b=u.getTokenOffset()+u.getTokenLength()+o,C=m(),S="";for(;!c&&(C===Pi.LineCommentTrivia||C===Pi.BlockCommentTrivia);){const T=u.getTokenOffset()+o;w(" ",b,T),b=u.getTokenOffset()+u.getTokenLength()+o,S=C===Pi.LineCommentTrivia?p():"",C=m()}if(C===Pi.CloseBraceToken)v!==Pi.OpenBraceToken&&(d--,S=p());else if(C===Pi.CloseBracketToken)v!==Pi.OpenBracketToken&&(d--,S=p());else{switch(v){case Pi.OpenBracketToken:case Pi.OpenBraceToken:d++,S=p();break;case Pi.CommaToken:case Pi.LineCommentTrivia:S=p();break;case Pi.BlockCommentTrivia:c?S=p():S=" ";break;case Pi.ColonToken:S=" ";break;case Pi.StringLiteral:if(C===Pi.ColonToken){S="";break}case Pi.NullKeyword:case Pi.TrueKeyword:case Pi.FalseKeyword:case Pi.NumericLiteral:case Pi.CloseBraceToken:case Pi.CloseBracketToken:C===Pi.LineCommentTrivia||C===Pi.BlockCommentTrivia?S=" ":C!==Pi.CommaToken&&C!==Pi.EOF&&(f=!0);break;case Pi.Unknown:f=!0;break}c&&(C===Pi.LineCommentTrivia||C===Pi.BlockCommentTrivia)&&(S=p())}const D=u.getTokenOffset()+o;w(S,b,D),v=C}return _}Mg(une,"format");function qRe(i,e){const t=JSON.stringify(i,void 0,e.insertSpaces?e.tabSize||4:"	");return e.eol!==void 0?t.replace(/\r\n|\r|\n/g,e.eol):t}Mg(qRe,"toFormattedString");function oA(i,e){let t="";for(let n=0;n<e;n++)t+=i;return t}Mg(oA,"repeat");function gne(i,e){let t=0,n=0;const s=e.tabSize||4;for(;t<i.length;){const o=i.charAt(t);if(o===" ")n++;else if(o==="	")n+=s;else break;t++}return Math.floor(n/s)}Mg(gne,"computeIndentLevel");function fne(i,e){for(let t=0;t<e.length;t++){const n=e.charAt(t);if(n==="\r")return t+1<e.length&&e.charAt(t+1)===`
`?`\r
`:"\r";if(n===`
`)return`
`}return i&&i.eol||`
`}Mg(fne,"getEOL");function XE(i,e){return`\r
`.indexOf(i.charAt(e))!==-1}Mg(XE,"isEOL");var YRe=Object.defineProperty,LD=(i,e)=>YRe(i,"name",{value:e,configurable:!0});function pne(i,e,t){return N7(i,e,void 0,t)}LD(pne,"removeProperty");function N7(i,e,t,n,s){const o=e.slice(),a=dJ(i,[]);let l,c;for(;o.length>0&&(c=o.pop(),l=LF(a,o),l===void 0&&t!==void 0);)typeof c=="string"?t={[c]:t}:t=[t];if(l)if(l.type==="object"&&typeof c=="string"&&Array.isArray(l.children)){const d=LF(l,[c]);if(d!==void 0)if(t===void 0){if(!d.parent)throw new Error("Malformed AST");const h=l.children.indexOf(d.parent);let u,f=d.parent.offset+d.parent.length;if(h>0){const p=l.children[h-1];u=p.offset+p.length}else u=l.offset+1,l.children.length>1&&(f=l.children[1].offset);return Jm(i,{offset:u,length:f-u,content:""},n)}else return Jm(i,{offset:d.offset,length:d.length,content:JSON.stringify(t)},n);else{if(t===void 0)return[];const h=`${JSON.stringify(c)}: ${JSON.stringify(t)}`,u=s?s(l.children.map(p=>p.children[0].value)):l.children.length;let f;if(u>0){const p=l.children[u-1];f={offset:p.offset+p.length,length:0,content:","+h}}else l.children.length===0?f={offset:l.offset+1,length:0,content:h}:f={offset:l.offset+1,length:0,content:h+","};return Jm(i,f,n)}}else if(l.type==="array"&&typeof c=="number"&&Array.isArray(l.children))if(t!==void 0){const d=`${JSON.stringify(t)}`;let h;if(l.children.length===0||c===0)h={offset:l.offset+1,length:0,content:l.children.length===0?d:d+","};else{const u=c===-1||c>l.children.length?l.children.length:c,f=l.children[u-1];h={offset:f.offset+f.length,length:0,content:","+d}}return Jm(i,h,n)}else{const d=c,h=l.children[d];let u;if(l.children.length===1)u={offset:l.offset+1,length:l.length-2,content:""};else if(l.children.length-1===d){const f=l.children[d-1],p=f.offset+f.length,m=l.offset+l.length;u={offset:p,length:m-2-p,content:""}}else u={offset:h.offset,length:l.children[d+1].offset-h.offset,content:""};return Jm(i,u,n)}else throw new Error(`Can not add ${typeof c!="number"?"index":"property"} to parent of type ${l.type}`);else return t===void 0?[]:Jm(i,{offset:a?a.offset:0,length:a?a.length:0,content:JSON.stringify(t)},n)}LD(N7,"setProperty");function Jm(i,e,t){let n=mk(i,e),s=e.offset,o=e.offset+e.content.length;if(e.length===0||e.content.length===0){for(;s>0&&!XE(n,s-1);)s--;for(;o<n.length&&!XE(n,o);)o++}const r=une(n,{offset:s,length:o-s},t);for(let l=r.length-1;l>=0;l--){const c=r[l];n=mk(n,c),s=Math.min(s,c.offset),o=Math.max(o,c.offset+c.length),o+=c.content.length-c.length}const a=i.length-(n.length-o)-s;return[{offset:s,length:a,content:n.substring(s,o)}]}LD(Jm,"withFormatting");function mk(i,e){return i.substring(0,e.offset)+e.content+i.substring(e.offset+e.length)}LD(mk,"applyEdit");function LV(i,e){const t=e.slice(0).sort((s,o)=>{const r=s.offset-o.offset;return r===0?s.length-o.length:r});let n=i.length;for(let s=t.length-1;s>=0;s--){const o=t[s];if(o.offset+o.length<=n)i=mk(i,o);else throw new Error("Overlapping edit");n=o.offset}return i}LD(LV,"applyEdits");var ZRe=Object.defineProperty,mne=(i,e)=>ZRe(i,"name",{value:e,configurable:!0});function DV(i){return i&&i.hasOwnProperty("folderUri")}mne(DV,"isFolderBackupInfo");function _ne(i){return i&&i.hasOwnProperty("workspace")}mne(_ne,"isWorkspaceBackupInfo");var XRe=Object.defineProperty,Or=(i,e)=>XRe(i,"name",{value:e,configurable:!0});const gR=De("workspacesService");function _k(i){return i.hasOwnProperty("workspace")}Or(_k,"isRecentWorkspace");function gC(i){return i.hasOwnProperty("folderUri")}Or(gC,"isRecentFolder");function QRe(i){return i.hasOwnProperty("fileUri")}Or(QRe,"isRecentFile");function bne(i){return QE(i)||P7(i)}Or(bne,"isStoredWorkspaceFolder");function QE(i){const e=i;return typeof e?.path=="string"&&(!e.name||typeof e.name=="string")}Or(QE,"isRawFileWorkspaceFolder");function P7(i){const e=i;return typeof e?.uri=="string"&&(!e.name||typeof e.name=="string")}Or(P7,"isRawUriWorkspaceFolder");function vne(i,e,t,n,s){if(i.scheme!==n.scheme)return{name:t,uri:i.toString(!0)};let o=e?void 0:s.relativePath(n,i);if(o!==void 0)o.length===0?o=".":Nt&&(o=IV(o));else if(i.scheme===Ve.file)o=i.fsPath,Nt&&(o=IV(o));else if(s.isEqualAuthority(i.authority,n.authority))o=i.path;else return{name:t,uri:i.toString(!0)};return{name:t,path:o}}Or(vne,"getStoredWorkspaceFolder");function IV(i){return i=DP(i),zK(i)||(i=WC(i)),i}Or(IV,"massagePathForWindows");function JRe(i,e,t){const n=[],s=new Set,o=t.dirname(e);for(const r of i){let a;if(QE(r))r.path&&(a=t.resolvePath(o,r.path));else if(P7(r))try{a=ne.parse(r.uri),a.path[0]!==kt.sep&&(a=a.with({path:kt.sep+a.path}))}catch(l){console.warn(l)}if(a){const l=t.getComparisonKey(a);if(!s.has(l)){s.add(l);const c=r.name||t.basenameOrAuthority(a);n.push(new PY({uri:a,name:c,index:n.length},r))}}}return n}Or(JRe,"toWorkspaceFolders");function eOe(i,e,t,n,s){const o=wne(e,i),r=s.dirname(e),a=s.dirname(n),l=[];for(const u of o.folders){const f=QE(u)?s.resolvePath(r,u.path):ne.parse(u.uri);let p;t?p=!1:p=!QE(u)||SN(u.path),l.push(vne(f,p,u.name,a,s))}const c={insertSpaces:!1,tabSize:4,eol:Gi||Ue?`
`:`\r
`},d=N7(i,["folders"],l,c);let h=LV(i,d);return KM(o.remoteAuthority,MZ(n))&&(h=LV(h,pne(h,["remoteAuthority"],c))),h}Or(eOe,"rewriteWorkspaceFileForNewLocation");function wne(i,e){const t=cJ(e);if(t&&Array.isArray(t.folders))t.folders=t.folders.filter(n=>bne(n));else throw new Error(`${i} looks like an invalid workspace file.`);return t}Or(wne,"doParseStoredWorkspace");function Cne(i){return i.workspace&&typeof i.workspace=="object"&&typeof i.workspace.id=="string"&&typeof i.workspace.configPath=="string"}Or(Cne,"isSerializedRecentWorkspace");function yne(i){return typeof i.folderUri=="string"}Or(yne,"isSerializedRecentFolder");function Sne(i){return typeof i.fileUri=="string"}Or(Sne,"isSerializedRecentFile");function tOe(i,e){const t={workspaces:[],files:[]};if(i){const n=Or(function(o,r){for(let a=0;a<o.length;a++)try{r(o[a],a)}catch(l){e.warn(`Error restoring recent entry ${JSON.stringify(o[a])}: ${l.toString()}. Skip entry.`)}},"restoreGracefully"),s=i;Array.isArray(s.entries)&&n(s.entries,o=>{const r=o.label,a=o.remoteAuthority;Cne(o)?t.workspaces.push({label:r,remoteAuthority:a,workspace:{id:o.workspace.id,configPath:ne.parse(o.workspace.configPath)}}):yne(o)?t.workspaces.push({label:r,remoteAuthority:a,folderUri:ne.parse(o.folderUri)}):Sne(o)&&t.files.push({label:r,remoteAuthority:a,fileUri:ne.parse(o.fileUri)})})}return t}Or(tOe,"restoreRecentlyOpened");function iOe(i){const e={entries:[]};for(const t of i.workspaces)gC(t)?e.entries.push({folderUri:t.folderUri.toString(),label:t.label,remoteAuthority:t.remoteAuthority}):e.entries.push({workspace:{id:t.workspace.id,configPath:t.workspace.configPath.toString()},label:t.label,remoteAuthority:t.remoteAuthority});for(const t of i.files)e.entries.push({fileUri:t.fileUri.toString(),label:t.label,remoteAuthority:t.remoteAuthority});return e}Or(iOe,"toStoreData");const hr=De("hostService"),nOe=De("workspaceEditingService");var sOe=Object.defineProperty,nM=(i,e)=>sOe(i,"name",{value:e,configurable:!0});class oOe extends ${constructor(e){if(super(),this.channelName=e,"BroadcastChannel"in _e)try{this.broadcastChannel=new BroadcastChannel(e);const t=nM(n=>{this._onDidReceiveData.fire(n.data)},"listener");this.broadcastChannel.addEventListener("message",t),this._register(ye(()=>{this.broadcastChannel&&(this.broadcastChannel.removeEventListener("message",t),this.broadcastChannel.close())}))}catch(t){console.warn("Error while creating broadcast channel. Falling back to localStorage.",vN(t))}this.broadcastChannel||(this.channelName=`BroadcastDataChannel.${e}`,this.createBroadcastChannel())}static{nM(this,"BroadcastDataChannel")}broadcastChannel;_onDidReceiveData=this._register(new x);onDidReceiveData=this._onDidReceiveData.event;createBroadcastChannel(){const e=nM(t=>{t.key===this.channelName&&t.newValue&&this._onDidReceiveData.fire(JSON.parse(t.newValue))},"listener");_e.addEventListener("storage",e),this._register(ye(()=>_e.removeEventListener("storage",e)))}postData(e){this.broadcastChannel?this.broadcastChannel.postMessage(e):(localStorage.removeItem(this.channelName),localStorage.setItem(this.channelName,JSON.stringify(e)))}}var Ene=Object.defineProperty,rOe=Object.getOwnPropertyDescriptor,Cs=(i,e)=>Ene(i,"name",{value:e,configurable:!0}),Lne=(i,e,t,n)=>{for(var s=n>1?void 0:n?rOe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Ene(e,t,s),s},Ff=(i,e)=>(t,n)=>e(t,n,i);class Eh{constructor(e){this.identifier=e}static{Cs(this,"DraggedEditorIdentifier")}}class tg{constructor(e){this.identifier=e}static{Cs(this,"DraggedEditorGroupIdentifier")}}async function Dne(i){const e=[],t=Vb.uriList.toLowerCase();if(i.has(t))try{const n=await i.get(t)?.asString(),s=JSON.stringify(hx.parse(n??""));e.push(...x7(s))}catch{}return e}Cs(Dne,"extractTreeDropData");let TV=class{constructor(i,e,t,n,s,o,r,a){this.options=i,this.fileService=e,this.workspacesService=t,this.editorService=n,this.workspaceEditingService=s,this.hostService=o,this.contextService=r,this.instantiationService=a}static{Cs(this,"ResourcesDropHandler")}async handleDrop(i,e,t,n,s){const o=await this.instantiationService.invokeFunction(l=>ane(l,i));if(!o.length)return;if(await this.hostService.focus(e),this.options.allowWorkspaceOpen){const l=To(o.filter(c=>c.allowWorkspaceOpen&&c.resource?.scheme===Ve.file).map(c=>c.resource));if(l.length>0&&await this.handleWorkspaceDrop(l))return}const r=To(o.filter(l=>l.isExternal&&l.resource?.scheme===Ve.file).map(l=>l.resource));r.length&&this.workspacesService.addRecentlyOpened(r.map(l=>({fileUri:l})));const a=t?.();await this.editorService.openEditors(o.map(l=>({...l,resource:l.resource,options:{...l.options,...s,pinned:!0}})),a,{validateTrust:!0}),n?.(a)}async handleWorkspaceDrop(i){const e=[],t=[];return await Promise.all(i.map(async n=>{if(MY(n)){e.push({workspaceUri:n});return}try{const s=await this.fileService.stat(n);s.isDirectory&&(e.push({folderUri:s.resource}),t.push({uri:s.resource}))}catch{}})),e.length===0?!1:(e.length>t.length||t.length===1?await this.hostService.openWindow(e):ZL(this.contextService.getWorkspace())?await this.workspaceEditingService.addFolders(t):await this.workspaceEditingService.createAndEnterWorkspace(t),!0)}};TV=Lne([Ff(1,la),Ff(2,gR),Ff(3,nt),Ff(4,nOe),Ff(5,hr),Ff(6,po),Ff(7,He)],TV);function R7(i,e,t,n){if(e.length===0||!t.dataTransfer)return;const s=i.get(cD),o=i.get(nt),r=i.get(la),a=i.get(bu),l=To(e.map(f=>ne.isUri(f)?{resource:f}:Ax(f)?ne.isUri(f.editor.resource)?{resource:f.editor.resource}:void 0:f)),c=l.filter(({resource:f})=>r.hasProvider(f));if(!n?.disableStandardTransfer){const f=Nt?`\r
`:`
`;t.dataTransfer.setData(Yh.TEXT,c.map(({resource:m})=>a.getUriLabel(m,{noPrefix:!0})).join(f));const p=c.find(({isDirectory:m})=>!m);if(p){const m=Hp.uriToFileUri(p.resource);m.scheme===Ve.file&&t.dataTransfer.setData(Yh.DOWNLOAD_URL,[Vb.binary,lh(p.resource),m.toString()].join(":"))}}const d=c.filter(({isDirectory:f})=>!f);d.length&&t.dataTransfer.setData(Yh.RESOURCES,JSON.stringify(d.map(({resource:f})=>f.toString())));const h=Xt.as(k7.DragAndDropContribution).getAll();for(const f of h)f.setData(l,t);const u=[];for(const f of e){let p;if(Ax(f)){const m=f.editor.toUntyped({preserveViewState:f.groupId});m&&(p={...m,resource:Io.getCanonicalUri(m)})}else if(ne.isUri(f)){const{selection:m,uri:_}=L7(f);p={resource:_,options:m?{selection:m}:void 0}}else f.isDirectory||(p={resource:f.resource});if(p){{const m=p.resource;if(m){const _=s.files.get(m);_&&(typeof p.languageId!="string"&&(p.languageId=_.getLanguageId()),typeof p.encoding!="string"&&(p.encoding=_.getEncoding()),typeof p.contents!="string"&&_.isDirty()&&!_.textEditorModel.isTooLargeForHeapOperation()&&(p.contents=_.textEditorModel.getValue())),p.options?.viewState||(p.options={...p.options,viewState:(()=>{for(const w of o.visibleEditorPanes)if(Ta(w.input.resource,m)){const v=w.getViewState();if(v)return v}})()})}}u.push(p)}}if(u.length){t.dataTransfer.setData(EV.EDITORS,Y6(u));const f=[];for(const p of u)p.resource?f.push(p.resource):Bd(p)?p.modified.resource&&f.push(p.modified.resource):mg(p)?p.primary.resource&&f.push(p.primary.resource):_g(p)&&f.push(p.result.resource);n?.disableStandardTransfer||t.dataTransfer.setData(Vb.uriList,hx.create(f.slice(0,1))),t.dataTransfer.setData(Yh.INTERNAL_URI_LIST,hx.create(f))}}Cs(R7,"fillEditorsDragData");class aOe{constructor(e,t){this.type=e,this.id=t}static{Cs(this,"CompositeDragAndDropData")}update(e){}getData(){return{type:this.type,id:this.id}}}class $S{constructor(e){this.compositeId=e}static{Cs(this,"DraggedCompositeIdentifier")}get id(){return this.compositeId}}class GS{constructor(e){this.viewId=e}static{Cs(this,"DraggedViewIdentifier")}get id(){return this.viewId}}class Ol extends ${static{Cs(this,"CompositeDragAndDropObserver")}static instance;static get INSTANCE(){return Ol.instance||(Ol.instance=new Ol,Eb(Ol.instance)),Ol.instance}transferData=db.getInstance();onDragStart=this._register(new x);onDragEnd=this._register(new x);constructor(){super(),this._register(this.onDragEnd.event(e=>{const t=e.dragAndDropData.getData().id,n=e.dragAndDropData.getData().type;this.readDragData(n)?.getData().id===t&&this.transferData.clearData(n==="view"?GS.prototype:$S.prototype)}))}readDragData(e){if(this.transferData.hasData(e==="view"?GS.prototype:$S.prototype)){const t=this.transferData.getData(e==="view"?GS.prototype:$S.prototype);if(t&&t[0])return new aOe(e,t[0].id)}}writeDragData(e,t){this.transferData.setData([t==="view"?new GS(e):new $S(e)],t==="view"?GS.prototype:$S.prototype)}registerTarget(e,t){const n=new te;return n.add(new Rb(e,{onDragEnter:Cs(s=>{if(s.preventDefault(),t.onDragEnter){const o=this.readDragData("composite")||this.readDragData("view");o&&t.onDragEnter({eventData:s,dragAndDropData:o})}},"onDragEnter"),onDragLeave:Cs(s=>{const o=this.readDragData("composite")||this.readDragData("view");t.onDragLeave&&o&&t.onDragLeave({eventData:s,dragAndDropData:o})},"onDragLeave"),onDrop:Cs(s=>{if(t.onDrop){const o=this.readDragData("composite")||this.readDragData("view");if(!o)return;t.onDrop({eventData:s,dragAndDropData:o}),this.onDragEnd.fire({eventData:s,dragAndDropData:o})}},"onDrop"),onDragOver:Cs(s=>{if(s.preventDefault(),t.onDragOver){const o=this.readDragData("composite")||this.readDragData("view");if(!o)return;t.onDragOver({eventData:s,dragAndDropData:o})}},"onDragOver")})),t.onDragStart&&this.onDragStart.event(s=>{t.onDragStart(s)},this,n),t.onDragEnd&&this.onDragEnd.event(s=>{t.onDragEnd(s)},this,n),this._register(n)}registerDraggable(e,t,n){e.draggable=!0;const s=new te;return s.add(new Rb(e,{onDragStart:Cs(o=>{const{id:r,type:a}=t();this.writeDragData(r,a),o.dataTransfer?.setDragImage(e,0,0),this.onDragStart.fire({eventData:o,dragAndDropData:this.readDragData(a)})},"onDragStart"),onDragEnd:Cs(o=>{const{type:r}=t(),a=this.readDragData(r);a&&this.onDragEnd.fire({eventData:o,dragAndDropData:a})},"onDragEnd"),onDragEnter:Cs(o=>{if(n.onDragEnter){const r=this.readDragData("composite")||this.readDragData("view");if(!r)return;r&&n.onDragEnter({eventData:o,dragAndDropData:r})}},"onDragEnter"),onDragLeave:Cs(o=>{const r=this.readDragData("composite")||this.readDragData("view");r&&n.onDragLeave?.({eventData:o,dragAndDropData:r})},"onDragLeave"),onDrop:Cs(o=>{if(n.onDrop){const r=this.readDragData("composite")||this.readDragData("view");if(!r)return;n.onDrop({eventData:o,dragAndDropData:r}),this.onDragEnd.fire({eventData:o,dragAndDropData:r})}},"onDrop"),onDragOver:Cs(o=>{if(n.onDragOver){const r=this.readDragData("composite")||this.readDragData("view");if(!r)return;n.onDragOver({eventData:o,dragAndDropData:r})}},"onDragOver")})),n.onDragStart&&this.onDragStart.event(o=>{n.onDragStart(o)},this,s),n.onDragEnd&&this.onDragEnd.event(o=>{n.onDragEnd(o)},this,s),this._register(s)}}function _y(i,e,t){i&&(i.dropEffect=t?e:"none")}Cs(_y,"toggleDropEffect");let KU=class{constructor(i,e){this.toResource=i,this.instantiationService=e}static{Cs(this,"ResourceListDnDHandler")}getDragURI(i){const e=this.toResource(i);return e?e.toString():null}getDragLabel(i){const e=To(i.map(this.toResource));return e.length===1?lh(e[0]):e.length>1?String(e.length):void 0}onDragStart(i,e){const t=[];for(const n of i.elements){const s=this.toResource(n);s&&t.push(s)}t.length&&this.instantiationService.invokeFunction(n=>R7(n,t,e))}onDragOver(i,e,t,n,s){return!1}drop(i,e,t,n,s){}dispose(){}};KU=Lne([Ff(1,He)],KU);class O7 extends ${static{Cs(this,"GlobalWindowDraggedOverTracker")}static CHANNEL_NAME="monaco-workbench-global-dragged-over";broadcaster=this._register(new oOe(O7.CHANNEL_NAME));constructor(){super(),this.registerListeners()}registerListeners(){this._register(H.runAndSubscribe(JN,({window:e,disposables:t})=>{t.add(F(e,Q.DRAG_OVER,()=>this.markDraggedOver(!1),!0)),t.add(F(e,Q.DRAG_LEAVE,()=>this.clearDraggedOver(!1),!0))},{window:_e,disposables:this._store})),this._register(this.broadcaster.onDidReceiveData(e=>{e===!0?this.markDraggedOver(!0):this.clearDraggedOver(!0)}))}draggedOver=!1;get isDraggedOver(){return this.draggedOver}markDraggedOver(e){this.draggedOver!==!0&&(this.draggedOver=!0,e||this.broadcaster.postData(!0))}clearDraggedOver(e){this.draggedOver!==!1&&(this.draggedOver=!1,e||this.broadcaster.postData(!1))}}const lOe=new O7;function M7(){return lOe.isDraggedOver}Cs(M7,"isWindowDraggedOver");var Ine=Object.defineProperty,cOe=Object.getOwnPropertyDescriptor,dOe=(i,e)=>Ine(i,"name",{value:e,configurable:!0}),hOe=(i,e,t,n)=>{for(var s=n>1?void 0:n?cOe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Ine(e,t,s),s},jU=(i,e)=>(t,n)=>e(t,n,i);let AV=class extends ${constructor(i,e,t={},n,s){super(),this._link=e,this._hoverService=n,this.el=Le(i,ce("a.monaco-link",{tabIndex:e.tabIndex??0,href:e.href},e.label)),this.hoverDelegate=t.hoverDelegate??bn("mouse"),this.setTooltip(e.title),this.el.setAttribute("role","button");const o=this._register(new Je(this.el,"click")),r=this._register(new Je(this.el,"keypress")),a=H.chain(r.event,d=>d.map(h=>new Pt(h)).filter(h=>h.keyCode===E.Enter)),l=this._register(new Je(this.el,wt.Tap)).event;this._register(Gn.addTarget(this.el));const c=H.any(o.event,a,l);this._register(c(d=>{this.enabled&&(Fe.stop(d,!0),t?.opener?t.opener(this._link.href):s.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}static{dOe(this,"Link")}el;hover;hoverDelegate;_enabled=!0;get enabled(){return this._enabled}set enabled(i){i?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=i}set link(i){typeof i.label=="string"?this.el.textContent=i.label:(Mn(this.el),this.el.appendChild(i.label)),this.el.href=i.href,typeof i.tabIndex<"u"&&(this.el.tabIndex=i.tabIndex),this.setTooltip(i.title),this._link=i}setTooltip(i){this.hoverDelegate.showNativeHover?this.el.title=i??"":!this.hover&&i?this.hover=this._register(this._hoverService.setupManagedHover(this.hoverDelegate,this.el,i)):this.hover&&this.hover.update(i)}};AV=hOe([jU(3,Po),jU(4,Lv)],AV);var uOe=Object.defineProperty,Iv=(i,e)=>uOe(i,"name",{value:e,configurable:!0});class DD{constructor(e){this.defaultValue=e}static{Iv(this,"Verifier")}verify(e){return this.isType(e)?e:this.defaultValue}}class qn extends DD{static{Iv(this,"BooleanVerifier")}isType(e){return typeof e=="boolean"}}class sM extends DD{static{Iv(this,"NumberVerifier")}isType(e){return typeof e=="number"}}class gOe extends DD{static{Iv(this,"SetVerifier")}isType(e){return e instanceof Set}}class Ma extends DD{static{Iv(this,"EnumVerifier")}allowedValues;constructor(e,t){super(e),this.allowedValues=t}isType(e){return this.allowedValues.includes(e)}}class qU extends DD{constructor(e,t){super(e),this.verifier=t}static{Iv(this,"ObjectVerifier")}verify(e){return this.isType(e)?B7(this.verifier,e):this.defaultValue}isType(e){return On(e)}}function B7(i,e){const t=Object.create(null);for(const n in i)if(Object.hasOwnProperty.call(i,n)){const s=i[n];t[n]=s.verify(e[n])}return t}Iv(B7,"verifyObject");var fOe=Object.defineProperty,F7=(i,e)=>fOe(i,"name",{value:e,configurable:!0});async function Tne(i){const e=navigator.usb;if(!e)return;const t=await e.requestDevice({filters:i?.filters??[]});if(t)return{deviceClass:t.deviceClass,deviceProtocol:t.deviceProtocol,deviceSubclass:t.deviceSubclass,deviceVersionMajor:t.deviceVersionMajor,deviceVersionMinor:t.deviceVersionMinor,deviceVersionSubminor:t.deviceVersionSubminor,manufacturerName:t.manufacturerName,productId:t.productId,productName:t.productName,serialNumber:t.serialNumber,usbVersionMajor:t.usbVersionMajor,usbVersionMinor:t.usbVersionMinor,usbVersionSubminor:t.usbVersionSubminor,vendorId:t.vendorId}}F7(Tne,"requestUsbDevice");async function Ane(i){const e=navigator.serial;if(!e)return;const t=await e.requestPort({filters:i?.filters??[]});if(!t)return;const n=t.getInfo();return{usbVendorId:n.usbVendorId,usbProductId:n.usbProductId}}F7(Ane,"requestSerialPort");async function xne(i){const e=navigator.hid;if(!e)return;const t=await e.requestDevice({filters:i?.filters??[]});if(!t.length)return;const n=t[0];return{opened:n.opened,vendorId:n.vendorId,productId:n.productId,productName:n.productName,collections:n.collections}}F7(xne,"requestHidDevice");const id=Vy;var pOe=Object.defineProperty,fR=(i,e)=>pOe(i,"name",{value:e,configurable:!0});const fC=60,pC=fC*60,qb=pC*24,YU=qb*7,ZU=qb*30,XU=qb*365;function V7(i,e,t,n){typeof i!="number"&&(i=i.getTime());const s=Math.round((new Date().getTime()-i)/1e3);if(s<-30)return g("date.fromNow.in","in {0}",V7(new Date().getTime()+s*1e3,!1));if(!n&&s<30)return g("date.fromNow.now","now");let o;return s<fC?(o=s,e?o===1?t?g("date.fromNow.seconds.singular.ago.fullWord","{0} second ago",o):g("date.fromNow.seconds.singular.ago","{0} sec ago",o):t?g("date.fromNow.seconds.plural.ago.fullWord","{0} seconds ago",o):g("date.fromNow.seconds.plural.ago","{0} secs ago",o):o===1?t?g("date.fromNow.seconds.singular.fullWord","{0} second",o):g("date.fromNow.seconds.singular","{0} sec",o):t?g("date.fromNow.seconds.plural.fullWord","{0} seconds",o):g("date.fromNow.seconds.plural","{0} secs",o)):s<pC?(o=Math.floor(s/fC),e?o===1?t?g("date.fromNow.minutes.singular.ago.fullWord","{0} minute ago",o):g("date.fromNow.minutes.singular.ago","{0} min ago",o):t?g("date.fromNow.minutes.plural.ago.fullWord","{0} minutes ago",o):g("date.fromNow.minutes.plural.ago","{0} mins ago",o):o===1?t?g("date.fromNow.minutes.singular.fullWord","{0} minute",o):g("date.fromNow.minutes.singular","{0} min",o):t?g("date.fromNow.minutes.plural.fullWord","{0} minutes",o):g("date.fromNow.minutes.plural","{0} mins",o)):s<qb?(o=Math.floor(s/pC),e?o===1?t?g("date.fromNow.hours.singular.ago.fullWord","{0} hour ago",o):g("date.fromNow.hours.singular.ago","{0} hr ago",o):t?g("date.fromNow.hours.plural.ago.fullWord","{0} hours ago",o):g("date.fromNow.hours.plural.ago","{0} hrs ago",o):o===1?t?g("date.fromNow.hours.singular.fullWord","{0} hour",o):g("date.fromNow.hours.singular","{0} hr",o):t?g("date.fromNow.hours.plural.fullWord","{0} hours",o):g("date.fromNow.hours.plural","{0} hrs",o)):s<YU?(o=Math.floor(s/qb),e?o===1?g("date.fromNow.days.singular.ago","{0} day ago",o):g("date.fromNow.days.plural.ago","{0} days ago",o):o===1?g("date.fromNow.days.singular","{0} day",o):g("date.fromNow.days.plural","{0} days",o)):s<ZU?(o=Math.floor(s/YU),e?o===1?t?g("date.fromNow.weeks.singular.ago.fullWord","{0} week ago",o):g("date.fromNow.weeks.singular.ago","{0} wk ago",o):t?g("date.fromNow.weeks.plural.ago.fullWord","{0} weeks ago",o):g("date.fromNow.weeks.plural.ago","{0} wks ago",o):o===1?t?g("date.fromNow.weeks.singular.fullWord","{0} week",o):g("date.fromNow.weeks.singular","{0} wk",o):t?g("date.fromNow.weeks.plural.fullWord","{0} weeks",o):g("date.fromNow.weeks.plural","{0} wks",o)):s<XU?(o=Math.floor(s/ZU),e?o===1?t?g("date.fromNow.months.singular.ago.fullWord","{0} month ago",o):g("date.fromNow.months.singular.ago","{0} mo ago",o):t?g("date.fromNow.months.plural.ago.fullWord","{0} months ago",o):g("date.fromNow.months.plural.ago","{0} mos ago",o):o===1?t?g("date.fromNow.months.singular.fullWord","{0} month",o):g("date.fromNow.months.singular","{0} mo",o):t?g("date.fromNow.months.plural.fullWord","{0} months",o):g("date.fromNow.months.plural","{0} mos",o)):(o=Math.floor(s/XU),e?o===1?t?g("date.fromNow.years.singular.ago.fullWord","{0} year ago",o):g("date.fromNow.years.singular.ago","{0} yr ago",o):t?g("date.fromNow.years.plural.ago.fullWord","{0} years ago",o):g("date.fromNow.years.plural.ago","{0} yrs ago",o):o===1?t?g("date.fromNow.years.singular.fullWord","{0} year",o):g("date.fromNow.years.singular","{0} yr",o):t?g("date.fromNow.years.plural.fullWord","{0} years",o):g("date.fromNow.years.plural","{0} yrs",o))}fR(V7,"fromNow");function mOe(i,e,t){typeof i!="number"&&(i=i.getTime());const n=new Date;n.setHours(0,0,0,0);const s=new Date(n.getTime());return s.setDate(s.getDate()-1),i>n.getTime()?g("today","Today"):i>s.getTime()?g("yesterday","Yesterday"):V7(i,e,t)}fR(mOe,"fromNowByDay");function _Oe(i,e){const t=Math.abs(i/1e3);return t<1?e?g("duration.ms.full","{0} milliseconds",i):g("duration.ms","{0}ms",i):t<fC?e?g("duration.s.full","{0} seconds",Math.round(i)/1e3):g("duration.s","{0}s",Math.round(i)/1e3):t<pC?e?g("duration.m.full","{0} minutes",Math.round(i/(1e3*fC))):g("duration.m","{0} mins",Math.round(i/(1e3*fC))):t<qb?e?g("duration.h.full","{0} hours",Math.round(i/(1e3*pC))):g("duration.h","{0} hrs",Math.round(i/(1e3*pC))):g("duration.d","{0} days",Math.round(i/(1e3*qb)))}fR(_Oe,"getDurationString");function kne(i){return i.getFullYear()+"-"+String(i.getMonth()+1).padStart(2,"0")+"-"+String(i.getDate()).padStart(2,"0")+"T"+String(i.getHours()).padStart(2,"0")+":"+String(i.getMinutes()).padStart(2,"0")+":"+String(i.getSeconds()).padStart(2,"0")+"."+(i.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}fR(kne,"toLocalISOString");var Nne=Object.defineProperty,bOe=Object.getOwnPropertyDescriptor,W7=(i,e)=>Nne(i,"name",{value:e,configurable:!0}),wn=(i,e,t,n)=>{for(var s=bOe(e,t),o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=r(e,t,s)||s);return s&&Nne(e,t,s),s};const bk=/^([^.]+\..+)[:=](.+)$/;class Cn{constructor(e,t,n){this._args=e,this.paths=t,this.productService=n}static{W7(this,"AbstractNativeEnvironmentService")}get appRoot(){return RG(Hp.asFileUri("").fsPath)}get userHome(){return ne.file(this.paths.homeDir)}get userDataPath(){return this.paths.userDataDir}get appSettingsHome(){return ne.file(yl(this.userDataPath,"User"))}get tmpDir(){return ne.file(this.paths.tmpDir)}get cacheHome(){return ne.file(this.userDataPath)}get stateResource(){return Ti(this.appSettingsHome,"globalStorage","storage.json")}get userRoamingDataHome(){return this.appSettingsHome.with({scheme:Ve.vscodeUserData})}get userDataSyncHome(){return Ti(this.appSettingsHome,"sync")}get logsHome(){if(!this.args.logsPath){const e=kne(new Date).replace(/-|:|\.\d+Z$/g,"");this.args.logsPath=yl(this.userDataPath,"logs",e)}return ne.file(this.args.logsPath)}get sync(){return this.args.sync}get machineSettingsResource(){return Ti(ne.file(yl(this.userDataPath,"Machine")),"settings.json")}get workspaceStorageHome(){return Ti(this.appSettingsHome,"workspaceStorage")}get localHistoryHome(){return Ti(this.appSettingsHome,"History")}get keyboardLayoutResource(){return Ti(this.userRoamingDataHome,"keyboardLayout.json")}get argvResource(){const e=s_.VSCODE_PORTABLE;return e?ne.file(yl(e,"argv.json")):Ti(this.userHome,this.productService.dataFolderName,"argv.json")}get isExtensionDevelopment(){return!!this.args.extensionDevelopmentPath}get untitledWorkspacesHome(){return ne.file(yl(this.userDataPath,"Workspaces"))}get builtinExtensionsPath(){const e=this.args["builtin-extensions-dir"];return e?XI(e):Np(yl(Hp.asFileUri("").fsPath,"..","extensions"))}get extensionsDownloadLocation(){const e=this.args["extensions-download-dir"];return e?ne.file(XI(e)):ne.file(yl(this.userDataPath,"CachedExtensionVSIXs"))}get extensionsPath(){const e=this.args["extensions-dir"];if(e)return XI(e);const t=s_.VSCODE_EXTENSIONS;if(t)return t;const n=s_.VSCODE_PORTABLE;return n?yl(n,"extensions"):Ti(this.userHome,this.productService.dataFolderName,"extensions").fsPath}get extensionDevelopmentLocationURI(){const e=this.args.extensionDevelopmentPath;if(Array.isArray(e))return e.map(t=>/^[^:/?#]+?:\/\//.test(t)?ne.parse(t):ne.file(Np(t)))}get extensionDevelopmentKind(){return this.args.extensionDevelopmentKind?.map(e=>e==="ui"||e==="workspace"||e==="web"?e:"workspace")}get extensionTestsLocationURI(){const e=this.args.extensionTestsPath;if(e)return/^[^:/?#]+?:\/\//.test(e)?ne.parse(e):ne.file(Np(e))}get disableExtensions(){if(this.args["disable-extensions"])return!0;const e=this.args["disable-extension"];if(e){if(typeof e=="string")return[e];if(Array.isArray(e)&&e.length>0)return e}return!1}get debugExtensionHost(){return Pne(this.args,this.isBuilt)}get debugRenderer(){return!!this.args.debugRenderer}get isBuilt(){return!s_.VSCODE_DEV}get verbose(){return!!this.args.verbose}get logLevel(){return this.args.log?.find(e=>!bk.test(e))}get extensionLogLevel(){const e=[];for(const t of this.args.log||[]){const n=bk.exec(t);n&&n[1]&&n[2]&&e.push([n[1],n[2]])}return e.length?e:void 0}get serviceMachineIdResource(){return Ti(ne.file(this.userDataPath),"machineid")}get crashReporterId(){return this.args["crash-reporter-id"]}get crashReporterDirectory(){return this.args["crash-reporter-directory"]}get disableTelemetry(){return!!this.args["disable-telemetry"]}get disableWorkspaceTrust(){return!!this.args["disable-workspace-trust"]}get useInMemorySecretStorage(){return!!this.args["use-inmemory-secretstorage"]}get policyFile(){if(this.args["__enable-file-policy"]){const e=s_.VSCODE_PORTABLE;return e?ne.file(yl(e,"policy.json")):Ti(this.userHome,this.productService.dataFolderName,"policy.json")}}editSessionId=this.args.editSessionId;get continueOn(){return this.args.continueOn}set continueOn(e){this.args.continueOn=e}get args(){return this._args}}wn([Ie],Cn.prototype,"appRoot");wn([Ie],Cn.prototype,"userHome");wn([Ie],Cn.prototype,"userDataPath");wn([Ie],Cn.prototype,"appSettingsHome");wn([Ie],Cn.prototype,"tmpDir");wn([Ie],Cn.prototype,"cacheHome");wn([Ie],Cn.prototype,"stateResource");wn([Ie],Cn.prototype,"userRoamingDataHome");wn([Ie],Cn.prototype,"userDataSyncHome");wn([Ie],Cn.prototype,"sync");wn([Ie],Cn.prototype,"machineSettingsResource");wn([Ie],Cn.prototype,"workspaceStorageHome");wn([Ie],Cn.prototype,"localHistoryHome");wn([Ie],Cn.prototype,"keyboardLayoutResource");wn([Ie],Cn.prototype,"argvResource");wn([Ie],Cn.prototype,"isExtensionDevelopment");wn([Ie],Cn.prototype,"untitledWorkspacesHome");wn([Ie],Cn.prototype,"builtinExtensionsPath");wn([Ie],Cn.prototype,"extensionsPath");wn([Ie],Cn.prototype,"extensionDevelopmentLocationURI");wn([Ie],Cn.prototype,"extensionDevelopmentKind");wn([Ie],Cn.prototype,"extensionTestsLocationURI");wn([Ie],Cn.prototype,"debugExtensionHost");wn([Ie],Cn.prototype,"logLevel");wn([Ie],Cn.prototype,"extensionLogLevel");wn([Ie],Cn.prototype,"serviceMachineIdResource");wn([Ie],Cn.prototype,"disableTelemetry");wn([Ie],Cn.prototype,"disableWorkspaceTrust");wn([Ie],Cn.prototype,"useInMemorySecretStorage");wn([Ie],Cn.prototype,"policyFile");function Pne(i,e){return Rne(i["inspect-extensions"],i["inspect-brk-extensions"],5870,e,i.debugId,i.extensionEnvironment)}W7(Pne,"parseExtensionHostDebugPort");function Rne(i,e,t,n,s,o){const a=Number(e||i)||(n?null:t),l=a?!!e:!1;let c;if(o)try{c=JSON.parse(o)}catch{}return{port:a,break:l,debugId:s,env:c}}W7(Rne,"parseDebugParams");var One=Object.defineProperty,vOe=Object.getOwnPropertyDescriptor,wOe=(i,e)=>One(i,"name",{value:e,configurable:!0}),gi=(i,e,t,n)=>{for(var s=vOe(e,t),o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=r(e,t,s)||s);return s&&One(e,t,s),s};const Tv=Vy;class fi{constructor(e,t,n,s){if(this.workspaceId=e,this.logsHome=t,this.options=n,this.productService=s,n.workspaceProvider&&Array.isArray(n.workspaceProvider.payload))try{this.payload=new Map(n.workspaceProvider.payload)}catch(o){Kt(o)}}static{wOe(this,"BrowserWorkbenchEnvironmentService")}get remoteAuthority(){return this.options.remoteAuthority}get expectsResolverExtension(){return!!this.options.remoteAuthority?.includes("+")&&!this.options.webSocketFactory}get isBuilt(){return!!this.productService.commit}get logLevel(){const e=this.payload?.get("logLevel");return e?e.split(",").find(t=>!bk.test(t)):this.options.developmentOptions?.logLevel!==void 0?ix(this.options.developmentOptions?.logLevel):void 0}get extensionLogLevel(){const e=this.payload?.get("logLevel");if(e){const t=[];for(const n of e.split(",")){const s=bk.exec(n);s&&s[1]&&s[2]&&t.push([s[1],s[2]])}return t.length?t:void 0}return this.options.developmentOptions?.extensionLogLevel!==void 0?this.options.developmentOptions?.extensionLogLevel.map(([t,n])=>[t,ix(n)]):void 0}get profDurationMarkers(){const e=this.payload?.get("profDurationMarkers");if(e){const t=[];for(const n of e.split(","))t.push(n);return t.length===2?t:void 0}}get windowLogsPath(){return this.logsHome}get logFile(){return Ti(this.windowLogsPath,"window.log")}get userRoamingDataHome(){return ne.file("/User").with({scheme:Ve.vscodeUserData})}get argvResource(){return Ti(this.userRoamingDataHome,"argv.json")}get cacheHome(){return Ti(this.userRoamingDataHome,"caches")}get workspaceStorageHome(){return Ti(this.userRoamingDataHome,"workspaceStorage")}get localHistoryHome(){return Ti(this.userRoamingDataHome,"History")}get stateResource(){return Ti(this.userRoamingDataHome,"State","storage.json")}get userDataSyncHome(){return Ti(this.userRoamingDataHome,"sync",this.workspaceId)}get sync(){}get keyboardLayoutResource(){return Ti(this.userRoamingDataHome,"keyboardLayout.json")}get untitledWorkspacesHome(){return Ti(this.userRoamingDataHome,"Workspaces")}get serviceMachineIdResource(){return Ti(this.userRoamingDataHome,"machineid")}get extHostLogsPath(){return Ti(this.logsHome,"exthost")}get extHostTelemetryLogFile(){return Ti(this.extHostLogsPath,"extensionTelemetry.log")}extensionHostDebugEnvironment=void 0;get debugExtensionHost(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.params}get isExtensionDevelopment(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.isExtensionDevelopment}get extensionDevelopmentLocationURI(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionDevelopmentLocationURI}get extensionDevelopmentLocationKind(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionDevelopmentKind}get extensionTestsLocationURI(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionTestsLocationURI}get extensionEnabledProposedApi(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionEnabledProposedApi}get debugRenderer(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.debugRenderer}get enableSmokeTestDriver(){return this.options.developmentOptions?.enableSmokeTestDriver}get disableExtensions(){return this.payload?.get("disableExtensions")==="true"}get enableExtensions(){return this.options.enabledExtensions}get webviewExternalEndpoint(){const e=this.options.webviewEndpoint||this.productService.webviewContentExternalBaseUrlTemplate||"https://{{uuid}}.vscode-cdn.net/{{quality}}/{{commit}}/out/vs/workbench/contrib/webview/browser/pre/",t=this.payload?.get("webviewExternalEndpointCommit");return e.replace("{{commit}}",t??this.productService.commit??"ef65ac1ba57f57f2a3961bfe94aa20481caca4c6").replace("{{quality}}",(t?"insider":this.productService.quality)??"insider")}get extensionTelemetryLogResource(){return Ti(this.logsHome,"extensionTelemetry.log")}get disableTelemetry(){return!1}get verbose(){return this.payload?.get("verbose")==="true"}get logExtensionHostCommunication(){return this.payload?.get("logExtensionHostCommunication")==="true"}get skipReleaseNotes(){return this.payload?.get("skipReleaseNotes")==="true"}get skipWelcome(){return this.payload?.get("skipWelcome")==="true"}get disableWorkspaceTrust(){return!this.options.enableWorkspaceTrust}get profile(){return this.payload?.get("profile")}editSessionId=this.options.editSessionId;payload;resolveExtensionHostDebugEnvironment(){const e={params:{port:null,break:!1},debugRenderer:!1,isExtensionDevelopment:!1,extensionDevelopmentLocationURI:void 0,extensionDevelopmentKind:void 0};if(this.payload)for(const[n,s]of this.payload)switch(n){case"extensionDevelopmentPath":e.extensionDevelopmentLocationURI||(e.extensionDevelopmentLocationURI=[]),e.extensionDevelopmentLocationURI.push(ne.parse(s)),e.isExtensionDevelopment=!0;break;case"extensionDevelopmentKind":e.extensionDevelopmentKind=[s];break;case"extensionTestsPath":e.extensionTestsLocationURI=ne.parse(s);break;case"debugRenderer":e.debugRenderer=s==="true";break;case"debugId":e.params.debugId=s;break;case"inspect-brk-extensions":e.params.port=parseInt(s),e.params.break=!0;break;case"inspect-extensions":e.params.port=parseInt(s);break;case"enableProposedApi":e.extensionEnabledProposedApi=[];break}const t=this.options.developmentOptions;return t&&!e.isExtensionDevelopment&&(t.extensions?.length&&(e.extensionDevelopmentLocationURI=t.extensions.map(n=>ne.revive(n)),e.isExtensionDevelopment=!0),t.extensionTestsPath&&(e.extensionTestsLocationURI=ne.revive(t.extensionTestsPath))),e}get filesToOpenOrCreate(){if(this.payload){const e=this.payload.get("openFile");if(e){const t=ne.parse(e);if(this.payload.has("gotoLineMode")){const n=qK(t.path);return[{fileUri:t.with({path:n.path}),options:{selection:oo(n.line)?void 0:{startLineNumber:n.line,startColumn:n.column||1}}}]}return[{fileUri:t}]}}}get filesToDiff(){if(this.payload){const e=this.payload.get("diffFilePrimary"),t=this.payload.get("diffFileSecondary");if(e&&t)return[{fileUri:ne.parse(t)},{fileUri:ne.parse(e)}]}}get filesToMerge(){if(this.payload){const e=this.payload.get("mergeFile1"),t=this.payload.get("mergeFile2"),n=this.payload.get("mergeFileBase"),s=this.payload.get("mergeFileResult");if(e&&t&&n&&s)return[{fileUri:ne.parse(e)},{fileUri:ne.parse(t)},{fileUri:ne.parse(n)},{fileUri:ne.parse(s)}]}}}gi([Ie],fi.prototype,"remoteAuthority");gi([Ie],fi.prototype,"expectsResolverExtension");gi([Ie],fi.prototype,"isBuilt");gi([Ie],fi.prototype,"logLevel");gi([Ie],fi.prototype,"windowLogsPath");gi([Ie],fi.prototype,"logFile");gi([Ie],fi.prototype,"userRoamingDataHome");gi([Ie],fi.prototype,"argvResource");gi([Ie],fi.prototype,"cacheHome");gi([Ie],fi.prototype,"workspaceStorageHome");gi([Ie],fi.prototype,"localHistoryHome");gi([Ie],fi.prototype,"stateResource");gi([Ie],fi.prototype,"userDataSyncHome");gi([Ie],fi.prototype,"sync");gi([Ie],fi.prototype,"keyboardLayoutResource");gi([Ie],fi.prototype,"untitledWorkspacesHome");gi([Ie],fi.prototype,"serviceMachineIdResource");gi([Ie],fi.prototype,"extHostLogsPath");gi([Ie],fi.prototype,"extHostTelemetryLogFile");gi([Ie],fi.prototype,"debugExtensionHost");gi([Ie],fi.prototype,"isExtensionDevelopment");gi([Ie],fi.prototype,"extensionDevelopmentLocationURI");gi([Ie],fi.prototype,"extensionDevelopmentLocationKind");gi([Ie],fi.prototype,"extensionTestsLocationURI");gi([Ie],fi.prototype,"extensionEnabledProposedApi");gi([Ie],fi.prototype,"debugRenderer");gi([Ie],fi.prototype,"enableSmokeTestDriver");gi([Ie],fi.prototype,"disableExtensions");gi([Ie],fi.prototype,"enableExtensions");gi([Ie],fi.prototype,"webviewExternalEndpoint");gi([Ie],fi.prototype,"extensionTelemetryLogResource");gi([Ie],fi.prototype,"disableTelemetry");gi([Ie],fi.prototype,"verbose");gi([Ie],fi.prototype,"logExtensionHostCommunication");gi([Ie],fi.prototype,"skipReleaseNotes");gi([Ie],fi.prototype,"skipWelcome");gi([Ie],fi.prototype,"disableWorkspaceTrust");gi([Ie],fi.prototype,"profile");gi([Ie],fi.prototype,"filesToOpenOrCreate");gi([Ie],fi.prototype,"filesToDiff");gi([Ie],fi.prototype,"filesToMerge");var Mne=Object.defineProperty,COe=Object.getOwnPropertyDescriptor,yOe=(i,e)=>Mne(i,"name",{value:e,configurable:!0}),SOe=(i,e,t,n)=>{for(var s=n>1?void 0:n?COe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Mne(e,t,s),s},QU=(i,e)=>(t,n)=>e(t,n,i);let mC=class extends ${constructor(i,e){super(),this.logService=i,this.storageService=e,this._startupKind=this.resolveStartupKind(),this._register(this.storageService.onWillSaveState(t=>{t.reason===rC.SHUTDOWN&&this.storageService.store(mC.LAST_SHUTDOWN_REASON_KEY,this.shutdownReason,Be.WORKSPACE,ai.MACHINE)}))}static{yOe(this,"AbstractLifecycleService")}static LAST_SHUTDOWN_REASON_KEY="lifecyle.lastShutdownReason";_onBeforeShutdown=this._register(new x);onBeforeShutdown=this._onBeforeShutdown.event;_onWillShutdown=this._register(new x);onWillShutdown=this._onWillShutdown.event;_onDidShutdown=this._register(new x);onDidShutdown=this._onDidShutdown.event;_onBeforeShutdownError=this._register(new x);onBeforeShutdownError=this._onBeforeShutdownError.event;_onShutdownVeto=this._register(new x);onShutdownVeto=this._onShutdownVeto.event;_startupKind;get startupKind(){return this._startupKind}_phase=an.Starting;get phase(){return this._phase}phaseWhen=new Map;shutdownReason;resolveStartupKind(){const i=this.doResolveStartupKind()??eb.NewWindow;return this.logService.trace(`[lifecycle] starting up (startup kind: ${i})`),i}doResolveStartupKind(){const i=this.storageService.getNumber(mC.LAST_SHUTDOWN_REASON_KEY,Be.WORKSPACE);this.storageService.remove(mC.LAST_SHUTDOWN_REASON_KEY,Be.WORKSPACE);let e;switch(i){case Ob.RELOAD:e=eb.ReloadedWindow;break;case Ob.LOAD:e=eb.ReopenedWindow;break}return e}set phase(i){if(i<this.phase)throw new Error("Lifecycle cannot go backwards");if(this._phase===i)return;this.logService.trace(`lifecycle: phase changed (value: ${i})`),this._phase=i,_i(`code/LifecyclePhase/${Gq(i)}`);const e=this.phaseWhen.get(this._phase);e&&(e.open(),this.phaseWhen.delete(this._phase))}async when(i){if(i<=this._phase)return;let e=this.phaseWhen.get(i);e||(e=new C5,this.phaseWhen.set(i,e)),await e.wait()}};mC=SOe([QU(0,jo),QU(1,Si)],mC);var Bne=Object.defineProperty,EOe=Object.getOwnPropertyDescriptor,NI=(i,e)=>Bne(i,"name",{value:e,configurable:!0}),LOe=(i,e,t,n)=>{for(var s=n>1?void 0:n?EOe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Bne(e,t,s),s},JU=(i,e)=>(t,n)=>e(t,n,i);let xV=class extends mC{static{NI(this,"BrowserLifecycleService")}beforeUnloadListener=void 0;unloadListener=void 0;ignoreBeforeUnload=!1;didUnload=!1;constructor(i,e){super(i,e),this.registerListeners()}registerListeners(){this.beforeUnloadListener=F(_e,Q.BEFORE_UNLOAD,i=>this.onBeforeUnload(i)),this.unloadListener=F(_e,Q.PAGE_HIDE,()=>this.onUnload())}onBeforeUnload(i){this.ignoreBeforeUnload?(this.logService.info("[lifecycle] onBeforeUnload triggered but ignored once"),this.ignoreBeforeUnload=!1):(this.logService.info("[lifecycle] onBeforeUnload triggered and handled with veto support"),this.doShutdown(()=>this.vetoBeforeUnload(i)))}vetoBeforeUnload(i){i.preventDefault(),i.returnValue=g("lifecycleVeto","Changes that you made may not be saved. Please check press 'Cancel' and try again.")}withExpectedShutdown(i,e){if(typeof i=="number")return this.shutdownReason=i,this.storageService.flush(rC.SHUTDOWN);this.ignoreBeforeUnload=!0;try{e?.()}finally{this.ignoreBeforeUnload=!1}}async shutdown(){this.logService.info("[lifecycle] shutdown triggered"),this.beforeUnloadListener?.dispose(),this.unloadListener?.dispose(),await this.storageService.flush(rC.SHUTDOWN),this.doShutdown()}doShutdown(i){const e=this.logService;this.storageService.flush(rC.SHUTDOWN);let t=!1;function n(s,o){typeof i=="function"&&(s instanceof Promise&&(e.error(`[lifecycle] Long running operations before shutdown are unsupported in the web (id: ${o})`),t=!0),s===!0&&(e.info(`[lifecycle]: Unload was prevented (id: ${o})`),t=!0))}return NI(n,"handleVeto"),this._onBeforeShutdown.fire({reason:Ob.QUIT,veto(s,o){n(s,o)},finalVeto(s,o){n(s(),o)}}),t&&typeof i=="function"?i():this.onUnload()}onUnload(){if(this.didUnload)return;this.didUnload=!0,this._register(F(_e,Q.PAGE_SHOW,e=>this.onLoadAfterUnload(e)));const i=this.logService;this._onWillShutdown.fire({reason:Ob.QUIT,joiners:NI(()=>[],"joiners"),token:Ws.None,join(e,t){i.error(`[lifecycle] Long running operations during shutdown are unsupported in the web (id: ${t.id})`)},force:NI(()=>{},"force")}),this._onDidShutdown.fire()}onLoadAfterUnload(i){i.persisted&&this.withExpectedShutdown({disableShutdownHandling:!0},()=>_e.location.reload())}doResolveStartupKind(){let i=super.doResolveStartupKind();return typeof i!="number"&&performance.getEntriesByType("navigation").at(0)?.type==="reload"&&(i=eb.ReloadedWindow),i}};xV=LOe([JU(0,jo),JU(1,Si)],xV);Rr(eh,xV,Pr.Eager);const DOe=g("open","open"),IOe=g("close","close"),TOe=g("find","find");var oM={open:DOe,close:IOe,find:TOe},AOe=Object.defineProperty,JE=(i,e)=>AOe(i,"name",{value:e,configurable:!0});async function Fne(i,e){const t=[];return await H7(i,t,e.logsHome,e.logsHome),t}JE(Fne,"getLogs");async function H7(i,e,t,n){const s=await i.resolve(t);for(const{resource:o,isDirectory:r}of s.children||[])if(r)await H7(i,e,o,n);else{const a=(await i.readFile(o)).value.toString();if(a){const l=ej(n,o);l&&e.push({relativePath:l,contents:a})}}}JE(H7,"doGetLogs");function Vne(i){switch(i){case o_.Trace:return"trace";case o_.Debug:return"debug";case o_.Info:return"info";case o_.Warning:return"warn";case o_.Error:return"error"}return"info"}JE(Vne,"logLevelToString");class Y$e extends jbe{static{JE(this,"ConsoleLogInAutomationLogger")}constructor(e=Qy){super({log:JE((t,n)=>this.consoleLog(Vne(t),n),"log")},e)}consoleLog(e,t){const n=_e;if(typeof n.codeAutomationLog=="function")try{n.codeAutomationLog(e,t)}catch(s){console.error("Problems writing to codeAutomationLog",s)}}}var Wne=Object.defineProperty,xOe=Object.getOwnPropertyDescriptor,Hne=(i,e)=>Wne(i,"name",{value:e,configurable:!0}),kOe=(i,e,t,n)=>{for(var s=n>1?void 0:n?xOe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Wne(e,t,s),s},PI=(i,e)=>(t,n)=>e(t,n,i);let kV=class{constructor(i,e,t,n){this.fileService=i,this.environmentService=e,this.lifecycleService=t,this.logService=n}static{Hne(this,"BrowserWindowDriver")}async getLogs(){return Fne(this.fileService,this.environmentService)}async whenWorkbenchRestored(){this.logService.info("[driver] Waiting for restored lifecycle phase..."),await this.lifecycleService.when(an.Restored),this.logService.info("[driver] Restored lifecycle phase reached. Waiting for contributions..."),await Xt.as(xE.Workbench).whenRestored,this.logService.info("[driver] Workbench contributions created.")}async setValue(i,e){const t=_e.document.querySelector(i);if(!t)return Promise.reject(new Error(`Element not found: ${i}`));const n=t;n.value=e;const s=new Event("input",{bubbles:!0,cancelable:!0});n.dispatchEvent(s)}async isActiveElement(i){if(_e.document.querySelector(i)!==_e.document.activeElement){const t=[];let n=_e.document.activeElement;for(;n;){const s=n.tagName,o=n.id?`#${n.id}`:"",r=To(n.className.split(/\s+/g).map(a=>a.trim())).map(a=>`.${a}`).join("");t.unshift(`${s}${o}${r}`),n=n.parentElement}throw new Error(`Active element not found. Current active element is '${t.join(" > ")}'. Looking for ${i}`)}return!0}async getElements(i,e){const t=_e.document.querySelectorAll(i),n=[];for(let s=0;s<t.length;s++){const o=t.item(s);n.push(this.serializeElement(o,e))}return n}serializeElement(i,e){const t=Object.create(null);for(let r=0;r<i.attributes.length;r++){const a=i.attributes.item(r);a&&(t[a.name]=a.value)}const n=[];if(e)for(let r=0;r<i.children.length;r++){const a=i.children.item(r);a&&n.push(this.serializeElement(a,!0))}const{left:s,top:o}=GC(i);return{tagName:i.tagName,className:i.className,textContent:i.textContent||"",attributes:t,children:n,left:s,top:o}}async getElementXY(i,e,t){const n=typeof e=="number"&&typeof t=="number"?{x:e,y:t}:void 0;return this._getElementXY(i,n)}async typeInEditor(i,e){const t=_e.document.querySelector(i);if(!t)throw new Error(`Editor not found: ${i}`);const n=t,s=n.selectionStart,o=s+e.length,r=n.value,a=r.substr(0,s)+e+r.substr(s);n.value=a,n.setSelectionRange(o,o);const l=new Event("input",{bubbles:!0,cancelable:!0});n.dispatchEvent(l)}async getTerminalBuffer(i){const e=_e.document.querySelector(i);if(!e)throw new Error(`Terminal not found: ${i}`);const t=e.xterm;if(!t)throw new Error(`Xterm not found: ${i}`);const n=[];for(let s=0;s<t.buffer.active.length;s++)n.push(t.buffer.active.getLine(s).translateToString(!0));return n}async writeInTerminal(i,e){const t=_e.document.querySelector(i);if(!t)throw new Error(`Element not found: ${i}`);const n=t.xterm;if(!n)throw new Error(`Xterm not found: ${i}`);n.input(e)}getLocaleInfo(){return Promise.resolve({language:Bu,locale:ohe})}getLocalizedStrings(){return Promise.resolve({open:oM.open,close:oM.close,find:oM.find})}async _getElementXY(i,e){const t=_e.document.querySelector(i);if(!t)return Promise.reject(new Error(`Element not found: ${i}`));const{left:n,top:s}=GC(t),{width:o,height:r}=$p(t);let a,l;return e?(a=n+e.x,l=s+e.y):(a=n+o/2,l=s+r/2),a=Math.round(a),l=Math.round(l),{x:a,y:l}}async exitApplication(){}};kV=kOe([PI(0,la),PI(1,Vy),PI(2,eh),PI(3,jo)],kV);function Une(i){Object.assign(_e,{driver:i.createInstance(kV)})}Hne(Une,"registerWindowDriver");var zne=Object.defineProperty,NOe=Object.getOwnPropertyDescriptor,Dc=(i,e)=>zne(i,"name",{value:e,configurable:!0}),$ne=(i,e,t,n)=>{for(var s=n>1?void 0:n?NOe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&zne(e,t,s),s},vd=(i,e)=>(t,n)=>e(t,n,i);let dg=class extends ${constructor(i,e={getWindowsCount:mB,getWindows:tE},t,n){super(),this.hostService=t,this.environmentService=n,this.enableWindowFocusOnElementFocus(i),this.enableMultiWindowAwareTimeout(i,e),this.registerFullScreenListeners(i.vscodeWindowId)}static{Dc(this,"BaseWindow")}static TIMEOUT_HANDLES=Number.MIN_SAFE_INTEGER;static TIMEOUT_DISPOSABLES=new Map;enableWindowFocusOnElementFocus(i){const e=i.HTMLElement.prototype.focus,t=this;i.HTMLElement.prototype.focus=function(n){t.onElementFocus(ve(this)),e.apply(this,[n])}}onElementFocus(i){const e=sn();e!==i&&e.document.hasFocus()&&(i.focus(),!this.environmentService.extensionTestsLocationURI&&!i.document.hasFocus()&&this.hostService.focus(i))}enableMultiWindowAwareTimeout(i,e={getWindowsCount:mB,getWindows:tE}){const t=i.setTimeout;Object.defineProperty(i,"vscodeOriginalSetTimeout",{get:Dc(()=>t,"get")});const n=i.clearTimeout;Object.defineProperty(i,"vscodeOriginalClearTimeout",{get:Dc(()=>n,"get")}),i.setTimeout=function(s,o=0,...r){if(e.getWindowsCount()===1||typeof s=="string"||o===0)return t.apply(this,[s,o,...r]);const a=new Set,l=dg.TIMEOUT_HANDLES++;dg.TIMEOUT_DISPOSABLES.set(l,a);const c=Bp(s,()=>{ii(a),dg.TIMEOUT_DISPOSABLES.delete(l)});for(const{window:d,disposables:h}of e.getWindows()){if(N5(d)&&d.document.visibilityState==="hidden")continue;let u=!1;const f=d.vscodeOriginalSetTimeout.apply(this,[(...m)=>{u||c(...m)},o,...r]),p=ye(()=>{u=!0,d.vscodeOriginalClearTimeout(f),a.delete(p)});h.add(p),a.add(p)}return l},i.clearTimeout=function(s){const o=typeof s=="number"?dg.TIMEOUT_DISPOSABLES.get(s):void 0;o?(ii(o),dg.TIMEOUT_DISPOSABLES.delete(s)):n.apply(this,[s])}}registerFullScreenListeners(i){this._register(this.hostService.onDidChangeFullScreen(({windowId:e,fullscreen:t})=>{if(e===i){const n=iE(i);n&&Xj(t,n.window)}}))}static async confirmOnShutdown(i,e){const t=i.get(gh),n=i.get(Pe),s=e===Ob.QUIT?Ue?g("quitMessageMac","Are you sure you want to quit?"):g("quitMessage","Are you sure you want to exit?"):g("closeWindowMessage","Are you sure you want to close the window?"),o=e===Ob.QUIT?Ue?g({key:"quitButtonLabel",comment:["&& denotes a mnemonic"]},"&&Quit"):g({key:"exitButtonLabel",comment:["&& denotes a mnemonic"]},"&&Exit"):g({key:"closeWindowButtonLabel",comment:["&& denotes a mnemonic"]},"&&Close Window"),r=await t.confirm({message:s,primaryButton:o,checkbox:{label:g("doNotAskAgain","Do not ask me again")}});return r.confirmed&&r.checkboxChecked&&await n.updateValue("window.confirmBeforeClose","never"),r.confirmed}};dg=$ne([vd(2,hr),vd(3,id)],dg);let ez=class extends dg{constructor(i,e,t,n,s,o,r,a,l){super(_e,void 0,l,o),this.openerService=i,this.lifecycleService=e,this.dialogService=t,this.labelService=n,this.productService=s,this.browserEnvironmentService=o,this.layoutService=r,this.instantiationService=a,this.registerListeners(),this.create()}static{Dc(this,"BrowserWindow")}registerListeners(){this._register(this.lifecycleService.onWillShutdown(()=>this.onWillShutdown()));const i=ol&&_e.visualViewport?_e.visualViewport:_e;this._register(F(i,Q.RESIZE,()=>{this.layoutService.layout(),ol&&_e.scrollTo(0,0)})),this._register(F(this.layoutService.mainContainer,Q.WHEEL,e=>e.preventDefault(),{passive:!1})),this._register(F(this.layoutService.mainContainer,Q.CONTEXT_MENU,e=>Fe.stop(e,!0))),this._register(F(this.layoutService.mainContainer,Q.DROP,e=>Fe.stop(e,!0)))}onWillShutdown(){H.toPromise(H.any(H.once(new Je(_e.document.body,Q.KEY_DOWN,!0).event),H.once(new Je(_e.document.body,Q.MOUSE_DOWN,!0).event))).then(async()=>{await xa(3e3),await this.dialogService.prompt({type:So.Error,message:g("shutdownError","An unexpected error occurred that requires a reload of this page."),detail:g("shutdownErrorDetail","The workbench was unexpectedly disposed while running."),buttons:[{label:g({key:"reload",comment:["&& denotes a mnemonic"]},"&&Reload"),run:Dc(()=>_e.location.reload(),"run")}]})})}create(){this.setupOpenHandlers(),this.registerLabelFormatters(),this.registerCommands(),this.setupDriver()}setupDriver(){this.environmentService.enableSmokeTestDriver&&Une(this.instantiationService)}setupOpenHandlers(){this.openerService.setDefaultExternalOpener({openExternal:Dc(async i=>{let e=!1;if(this.browserEnvironmentService.options?.openerAllowedExternalUrlPrefixes){for(const t of this.browserEnvironmentService.options.openerAllowedExternalUrlPrefixes)if(i.startsWith(t)){e=!0;break}}if(Z_(i,Ve.http)||Z_(i,Ve.https))Vc?Vq(i,!e)||await this.dialogService.prompt({type:So.Warning,message:g("unableToOpenExternal","The browser interrupted the opening of a new tab or window. Press 'Open' to open it anyway."),detail:i,buttons:[{label:g({key:"open",comment:["&& denotes a mnemonic"]},"&&Open"),run:Dc(()=>e?wB(i):vB(i),"run")},{label:g({key:"learnMore",comment:["&& denotes a mnemonic"]},"&&Learn More"),run:Dc(()=>this.openerService.open(ne.parse("https://aka.ms/allow-vscode-popup")),"run")}],cancelButton:!0}):e?wB(i):vB(i);else{const t=Dc(()=>{this.lifecycleService.withExpectedShutdown({disableShutdownHandling:!0},()=>_e.location.href=i)},"invokeProtocolHandler");t();const n=Dc(async()=>{const{downloadUrl:s}=this.productService;let o;const r=[{label:g({key:"openExternalDialogButtonRetry.v2",comment:["&& denotes a mnemonic"]},"&&Try Again"),run:Dc(()=>t(),"run")}];s!==void 0?(o=g("openExternalDialogDetail.v2",`We launched {0} on your computer.

If {1} did not launch, try again or install it below.`,this.productService.nameLong,this.productService.nameLong),r.push({label:g({key:"openExternalDialogButtonInstall.v3",comment:["&& denotes a mnemonic"]},"&&Install"),run:Dc(async()=>{await this.openerService.open(ne.parse(s)),n()},"run")})):o=g("openExternalDialogDetailNoInstall",`We launched {0} on your computer.

If {1} did not launch, try again below.`,this.productService.nameLong,this.productService.nameLong),await this.hostService.withExpectedShutdown(()=>this.dialogService.prompt({type:So.Info,message:g("openExternalDialogTitle","All done. You can close this tab now."),detail:o,buttons:r,cancelButton:!0}))},"showProtocolUrlOpenedDialog");Z_(i,this.productService.urlProtocol)&&await n()}return!0},"openExternal")})}registerLabelFormatters(){this._register(this.labelService.registerFormatter({scheme:Ve.vscodeUserData,priority:!0,formatting:{label:"(Settings) ${path}",separator:"/"}}))}registerCommands(){Mi.registerCommand("workbench.experimental.requestUsbDevice",async(i,e)=>Tne(e)),Mi.registerCommand("workbench.experimental.requestSerialPort",async(i,e)=>Ane(e)),Mi.registerCommand("workbench.experimental.requestHidDevice",async(i,e)=>xne(e))}};ez=$ne([vd(0,Lv),vd(1,eh),vd(2,gh),vd(3,bu),vd(4,lS),vd(5,Tv),vd(6,yt),vd(7,He),vd(8,hr)],ez);var Gne=Object.defineProperty,POe=Object.getOwnPropertyDescriptor,T1=(i,e)=>Gne(i,"name",{value:e,configurable:!0}),Kne=(i,e,t,n)=>{for(var s=n>1?void 0:n?POe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Gne(e,t,s),s},ig=(i,e)=>(t,n)=>e(t,n,i);const jne=De("auxiliaryWindowService");let NV=class extends dg{constructor(i,e,t,n,s,o){super(i,void 0,s,o),this.window=i,this.container=e,this.configurationService=n,this.whenStylesHaveLoaded=t.wait().then(()=>{}),this.registerListeners()}static{T1(this,"AuxiliaryWindow")}_onWillLayout=this._register(new x);onWillLayout=this._onWillLayout.event;_onDidLayout=this._register(new x);onDidLayout=this._onDidLayout.event;_onBeforeUnload=this._register(new x);onBeforeUnload=this._onBeforeUnload.event;_onUnload=this._register(new x);onUnload=this._onUnload.event;_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;whenStylesHaveLoaded;registerListeners(){this._register(F(this.window,Q.BEFORE_UNLOAD,i=>this.handleBeforeUnload(i))),this._register(F(this.window,Q.UNLOAD,()=>this.handleUnload())),this._register(F(this.window,"unhandledrejection",i=>{Kt(i.reason),i.preventDefault()})),this._register(F(this.window,Q.RESIZE,()=>this.layout())),this._register(F(this.container,Q.SCROLL,()=>this.container.scrollTop=0)),ui?(this._register(F(this.container,Q.DROP,i=>Fe.stop(i,!0))),this._register(F(this.container,Q.WHEEL,i=>i.preventDefault(),{passive:!1})),this._register(F(this.container,Q.CONTEXT_MENU,i=>Fe.stop(i,!0)))):(this._register(F(this.window.document.body,Q.DRAG_OVER,i=>Fe.stop(i))),this._register(F(this.window.document.body,Q.DROP,i=>Fe.stop(i))))}handleBeforeUnload(i){let e;if(this._onBeforeUnload.fire({veto(s){s&&(e=s)}}),e){this.handleVetoBeforeClose(i,e);return}const t=this.configurationService.getValue("window.confirmBeforeClose");(t==="always"||t==="keyboardOnly"&&fg.getInstance().isModifierPressed)&&this.confirmBeforeClose(i)}handleVetoBeforeClose(i,e){this.preventUnload(i)}preventUnload(i){i.preventDefault(),i.returnValue=g("lifecycleVeto","Changes that you made may not be saved. Please check press 'Cancel' and try again.")}confirmBeforeClose(i){this.preventUnload(i)}handleUnload(){this._onUnload.fire()}layout(){const i=$p(this.window.document.body,this.container);this._onWillLayout.fire(i),this._onDidLayout.fire(i)}createState(){return{bounds:{x:this.window.screenX,y:this.window.screenY,width:this.window.outerWidth,height:this.window.outerHeight},zoomLevel:Zj(this.window)}}dispose(){this._store.isDisposed||(this._onWillDispose.fire(),super.dispose())}};NV=Kne([ig(3,Pe),ig(4,hr),ig(5,id)],NV);let _C=class extends ${constructor(i,e,t,n,s,o){super(),this.layoutService=i,this.dialogService=e,this.configurationService=t,this.telemetryService=n,this.hostService=s,this.environmentService=o}static{T1(this,"BrowserAuxiliaryWindowService")}static DEFAULT_SIZE={width:800,height:600};static WINDOW_IDS=Ng(_e)+1;_onDidOpenAuxiliaryWindow=this._register(new x);onDidOpenAuxiliaryWindow=this._onDidOpenAuxiliaryWindow.event;windows=new Map;async open(i){_i("code/auxiliaryWindow/willOpen");const e=await this.openWindow(i);if(!e)throw new Error(g("unableToOpenWindowError","Unable to open a new window."));const t=await this.resolveWindowId(e);k5(e,t);const n=new te,{container:s,stylesLoaded:o}=this.createContainer(e,n,i),r=this.createAuxiliaryWindow(e,s,o),a=new te;this.windows.set(e.vscodeWindowId,r),a.add(ye(()=>this.windows.delete(e.vscodeWindowId)));const l=new te;return H.once(r.onWillDispose)(()=>{e.close(),n.dispose(),a.dispose(),l.dispose()}),a.add(B_e(e)),this._onDidOpenAuxiliaryWindow.fire({window:r,disposables:l}),_i("code/auxiliaryWindow/didOpen"),this.telemetryService.publicLog2("auxiliaryWindowOpen",{bounds:!!i?.bounds}),r}createAuxiliaryWindow(i,e,t){return new NV(i,e,t,this.configurationService,this.hostService,this.environmentService)}async openWindow(i){const e=sn(),t={x:e.screenX,y:e.screenY,width:e.outerWidth,height:e.outerHeight},n=Math.max(i?.bounds?.width??_C.DEFAULT_SIZE.width,tU.WIDTH),s=Math.max(i?.bounds?.height??_C.DEFAULT_SIZE.height,tU.HEIGHT);let o={x:i?.bounds?.x??Math.max(t.x+t.width/2-n/2,0),y:i?.bounds?.y??Math.max(t.y+t.height/2-s/2,0),width:n,height:s};!i?.bounds&&o.x===t.x&&o.y===t.y&&(o={...o,x:o.x+30,y:o.y+30});const r=To(["popup=yes",`left=${o.x}`,`top=${o.y}`,`width=${o.width}`,`height=${o.height}`,i?.nativeTitlebar?"window-native-titlebar=yes":void 0,i?.disableFullscreen?"window-disable-fullscreen=yes":void 0,i?.mode===0?"window-maximized=yes":void 0,i?.mode===2?"window-fullscreen=yes":void 0]),a=_e.open(TG?"":"about:blank",void 0,r.join(","));return!a&&ui?(await this.dialogService.prompt({type:So.Warning,message:g("unableToOpenWindow","The browser interrupted the opening of a new window. Press 'Retry' to try again."),detail:g("unableToOpenWindowDetail","To avoid this problem in the future, please ensure to allow popups for this website."),buttons:[{label:g({key:"retry",comment:["&& denotes a mnemonic"]},"&&Retry"),run:T1(()=>this.openWindow(i),"run")}],cancelButton:!0})).result:a?.window}async resolveWindowId(i){return _C.WINDOW_IDS++}createContainer(i,e,t){i.document.createElement=function(){throw new Error('Not allowed to create elements in child window JavaScript context. Always use the main window so that "xyz instanceof HTMLElement" continues to work.')},this.applyMeta(i);const{stylesLoaded:n}=this.applyCSS(i,e),s=this.applyHTML(i,e);return{stylesLoaded:n,container:s}}applyMeta(i){for(const t of['meta[charset="utf-8"]','meta[http-equiv="Content-Security-Policy"]','meta[name="viewport"]','meta[name="theme-color"]']){const n=_e.document.querySelector(t);if(n){const s=q5(i.document.head);if(JA(n,s),t==='meta[http-equiv="Content-Security-Policy"]'){const o=s.getAttribute("content");o&&s.setAttribute("content",o.replace(/(script-src[^\;]*)/,"script-src 'none'"))}}}const e=_e.document.querySelector('link[rel="icon"]');if(e){const t=kq(i.document.head);JA(e,t)}}applyCSS(i,e){_i("code/auxiliaryWindow/willApplyCSS");const t=new Map,n=new C5;n.wait().then(()=>_i("code/auxiliaryWindow/didLoadCSSStyles"));const s=e.add(new te);let o=0;function r(){--o===0&&(s.dispose(),n.open())}T1(r,"onLinkSettled");function a(l){if(Aq(l))return;const c=i.document.head.appendChild(l.cloneNode(!0));l.tagName.toLowerCase()==="link"&&(o++,s.add(F(c,"load",r)),s.add(F(c,"error",r))),t.set(l,c)}T1(a,"cloneNode"),o++;try{for(const l of _e.document.head.querySelectorAll('link[rel="stylesheet"], style'))a(l)}finally{r()}return e.add(xq(i)),e.add(j5.observe(_e.document.head,e,{childList:!0,subtree:!0})(l=>{for(const c of l)if(!(c.type!=="childList"||c.target.nodeName.toLowerCase()==="title"||c.target.nodeName.toLowerCase()==="script"||c.target.nodeName.toLowerCase()==="meta")){for(const d of c.addedNodes)if(xs(d)&&(d.tagName.toLowerCase()==="style"||d.tagName.toLowerCase()==="link"))a(d);else if(d.nodeType===Node.TEXT_NODE&&d.parentNode){const h=t.get(d.parentNode);h&&(h.textContent=d.textContent)}for(const d of c.removedNodes){const h=t.get(d);h&&(h.parentNode?.removeChild(h),t.delete(d))}}})),_i("code/auxiliaryWindow/didApplyCSS"),{stylesLoaded:n}}applyHTML(i,e){_i("code/auxiliaryWindow/willApplyHTML");const t=document.createElement("div");return t.setAttribute("role","application"),H5(t,0,0,0,0,"relative"),t.style.display="flex",t.style.height="100%",t.style.flexDirection="column",i.document.body.append(t),e.add(dT(_e.document.documentElement,i.document.documentElement)),e.add(dT(_e.document.body,i.document.body)),e.add(dT(this.layoutService.mainContainer,t,["class"])),_i("code/auxiliaryWindow/didApplyHTML"),t}getWindow(i){return this.windows.get(i)}};_C=Kne([ig(0,yt),ig(1,gh),ig(2,Pe),ig(3,rs),ig(4,hr),ig(5,id)],_C);Rr(jne,_C,Pr.Delayed);var ROe=Object.defineProperty,pR=(i,e)=>ROe(i,"name",{value:e,configurable:!0});const Iw=new Lt(220,70),tz=new Lt(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),Rt={showTabs:"multiple",highlightModifiedTabs:!1,tabActionLocation:"right",tabActionCloseVisibility:!0,tabActionUnpinVisibility:!0,alwaysShowEditorActions:!1,tabSizing:"fit",tabSizingFixedMinWidth:50,tabSizingFixedMaxWidth:160,pinnedTabSizing:"normal",pinnedTabsOnSeparateRow:!1,tabHeight:"default",preventPinnedEditorClose:"keyboardAndMouse",titleScrollbarSizing:"default",focusRecentEditorAfterClose:!0,showIcons:!0,hasIcons:!0,enablePreview:!0,openPositioning:"right",openSideBySideDirection:"right",closeEmptyGroups:!0,labelFormat:"default",splitSizing:"auto",splitOnDragAndDrop:!0,dragToOpenWindow:!0,centeredLayoutFixedWidth:!1,doubleClickTabToToggleEditorGroupSizes:"expand",editorActionsLocation:"default",wrapTabs:!1,enablePreviewFromQuickOpen:!1,scrollToSwitchTabs:!1,enablePreviewFromCodeNavigation:!1,closeOnFileDelete:!1,mouseBackForwardToNavigate:!0,restoreViewState:!0,splitInGroupLayout:"horizontal",revealIfOpen:!1,get limit(){return{enabled:!1,value:10,perEditorGroup:!1,excludeDirty:!1}},get decorations(){return{badges:!0,colors:!0}},get autoLockGroups(){return new Set}};function OOe(i){return i.affectsConfiguration("workbench.editor")||i.affectsConfiguration("workbench.iconTheme")||i.affectsConfiguration("window.density")}pR(OOe,"impactsEditorPartOptions");function MOe(i,e){const t={...Rt,hasIcons:e.getFileIconTheme().hasFileIcons},n=i.getValue();if(n?.workbench?.editor)if(Object.assign(t,n.workbench.editor),On(n.workbench.editor.autoLockGroups)){t.autoLockGroups=Rt.autoLockGroups;for(const[o,r]of Object.entries(n.workbench.editor.autoLockGroups))r===!0&&t.autoLockGroups.add(o)}else t.autoLockGroups=Rt.autoLockGroups;const s=i.getValue();return s?.window?.density?.editorTabHeight&&(t.tabHeight=s.window.density.editorTabHeight),qne(t)}pR(MOe,"getEditorPartOptions");function qne(i){return typeof i.showTabs=="boolean"&&(i.showTabs=i.showTabs?"multiple":"single"),B7({wrapTabs:new qn(Rt.wrapTabs),scrollToSwitchTabs:new qn(Rt.scrollToSwitchTabs),highlightModifiedTabs:new qn(Rt.highlightModifiedTabs),tabActionCloseVisibility:new qn(Rt.tabActionCloseVisibility),tabActionUnpinVisibility:new qn(Rt.tabActionUnpinVisibility),alwaysShowEditorActions:new qn(Rt.alwaysShowEditorActions),pinnedTabsOnSeparateRow:new qn(Rt.pinnedTabsOnSeparateRow),focusRecentEditorAfterClose:new qn(Rt.focusRecentEditorAfterClose),showIcons:new qn(Rt.showIcons),enablePreview:new qn(Rt.enablePreview),enablePreviewFromQuickOpen:new qn(Rt.enablePreviewFromQuickOpen),enablePreviewFromCodeNavigation:new qn(Rt.enablePreviewFromCodeNavigation),closeOnFileDelete:new qn(Rt.closeOnFileDelete),closeEmptyGroups:new qn(Rt.closeEmptyGroups),revealIfOpen:new qn(Rt.revealIfOpen),mouseBackForwardToNavigate:new qn(Rt.mouseBackForwardToNavigate),restoreViewState:new qn(Rt.restoreViewState),splitOnDragAndDrop:new qn(Rt.splitOnDragAndDrop),dragToOpenWindow:new qn(Rt.dragToOpenWindow),centeredLayoutFixedWidth:new qn(Rt.centeredLayoutFixedWidth),hasIcons:new qn(Rt.hasIcons),tabSizingFixedMinWidth:new sM(Rt.tabSizingFixedMinWidth),tabSizingFixedMaxWidth:new sM(Rt.tabSizingFixedMaxWidth),showTabs:new Ma(Rt.showTabs,["multiple","single","none"]),tabActionLocation:new Ma(Rt.tabActionLocation,["left","right"]),tabSizing:new Ma(Rt.tabSizing,["fit","shrink","fixed"]),pinnedTabSizing:new Ma(Rt.pinnedTabSizing,["normal","compact","shrink"]),tabHeight:new Ma(Rt.tabHeight,["default","compact"]),preventPinnedEditorClose:new Ma(Rt.preventPinnedEditorClose,["keyboardAndMouse","keyboard","mouse","never"]),titleScrollbarSizing:new Ma(Rt.titleScrollbarSizing,["default","large"]),openPositioning:new Ma(Rt.openPositioning,["left","right","first","last"]),openSideBySideDirection:new Ma(Rt.openSideBySideDirection,["right","down"]),labelFormat:new Ma(Rt.labelFormat,["default","short","medium","long"]),splitInGroupLayout:new Ma(Rt.splitInGroupLayout,["vertical","horizontal"]),splitSizing:new Ma(Rt.splitSizing,["distribute","split","auto"]),doubleClickTabToToggleEditorGroupSizes:new Ma(Rt.doubleClickTabToToggleEditorGroupSizes,["maximize","expand","off"]),editorActionsLocation:new Ma(Rt.editorActionsLocation,["default","titleBar","hidden"]),autoLockGroups:new gOe(Rt.autoLockGroups),limit:new qU(Rt.limit,{enabled:new qn(Rt.limit.enabled),value:new sM(Rt.limit.value),perEditorGroup:new qn(Rt.limit.perEditorGroup),excludeDirty:new qn(Rt.limit.excludeDirty)}),decorations:new qU(Rt.decorations,{badges:new qn(Rt.decorations.badges),colors:new qn(Rt.decorations.colors)})},i)}pR(qne,"validateEditorPartOptions");function BOe(i,e,t){return!e||!i.activeEditor||e.matches(i.activeEditor)?{...t,viewState:i.activeEditorPane?.getViewState()}:t||Object.create(null)}pR(BOe,"fillActiveEditorViewState");var FOe=Object.defineProperty,Fd=(i,e)=>FOe(i,"name",{value:e,configurable:!0});class Z$e extends ${constructor(e,t){super(),this.progressBar=e,this.group=t,this.registerListeners()}static{Fd(this,"EditorProgressIndicator")}registerListeners(){this._register(this.group.onDidModelChange(e=>{(e.kind===Wn.EDITOR_ACTIVE||e.kind===Wn.EDITOR_CLOSE&&this.group.isEmpty)&&this.progressBar.stop().hide()}))}show(e,t){return this.group.isEmpty?oDe:e===!0?this.doShow(!0,t):this.doShow(e,t)}doShow(e,t){return typeof e=="boolean"?this.progressBar.infinite().show(t):this.progressBar.total(e).show(t),{total:Fd(n=>{this.progressBar.total(n)},"total"),worked:Fd(n=>{this.progressBar.hasTotal()?this.progressBar.worked(n):this.progressBar.infinite().show()},"worked"),done:Fd(()=>{this.progressBar.stop().hide()},"done")}}async showWhile(e,t){if(this.group.isEmpty)try{await e}catch{}return this.doShowWhile(e,t)}async doShowWhile(e,t){try{this.progressBar.infinite().show(t),await e}catch{}finally{this.progressBar.stop().hide()}}}var yc;(i=>{(n=>{n[n.None=0]="None",n[n.Done=1]="Done",n[n.Infinite=2]="Infinite",n[n.While=3]="While",n[n.Work=4]="Work"})(i.Type||(i.Type={})),i.None={type:0},i.Done={type:1},i.Infinite={type:2};class e{constructor(s,o,r){this.whilePromise=s,this.whileStart=o,this.whileDelay=r}static{Fd(this,"While")}type=3}i.While=e;class t{constructor(s,o){this.total=s,this.worked=o}static{Fd(this,"Work")}type=4}i.Work=t})(yc||(yc={}));class Yne extends ${constructor(e,t){super(),this.progressBar=e,this.scope=t,this.registerListeners()}static{Fd(this,"ScopedProgressIndicator")}progressState=yc.None;registerListeners(){this._register(this.scope.onDidChangeActive(()=>{this.scope.isActive?this.onDidScopeActivate():this.onDidScopeDeactivate()}))}onDidScopeActivate(){if(this.progressState.type!==yc.Done.type)if(this.progressState.type===3){let e;if(this.progressState.whileDelay>0){const t=this.progressState.whileDelay-(Date.now()-this.progressState.whileStart);t>0&&(e=t)}this.doShowWhile(e)}else this.progressState.type===2?this.progressBar.infinite().show():this.progressState.type===4&&(this.progressState.total&&this.progressBar.total(this.progressState.total).show(),this.progressState.worked&&this.progressBar.worked(this.progressState.worked).show())}onDidScopeDeactivate(){this.progressBar.stop().hide()}show(e,t){return typeof e=="boolean"?this.progressState=yc.Infinite:this.progressState=new yc.Work(e,void 0),this.scope.isActive&&(this.progressState.type===2?this.progressBar.infinite().show(t):this.progressState.type===4&&typeof this.progressState.total=="number"&&this.progressBar.total(this.progressState.total).show(t)),{total:Fd(n=>{this.progressState=new yc.Work(n,this.progressState.type===4?this.progressState.worked:void 0),this.scope.isActive&&this.progressBar.total(n)},"total"),worked:Fd(n=>{!this.scope.isActive||this.progressBar.hasTotal()?(this.progressState=new yc.Work(this.progressState.type===4?this.progressState.total:void 0,this.progressState.type===4&&typeof this.progressState.worked=="number"?this.progressState.worked+n:n),this.scope.isActive&&this.progressBar.worked(n)):(this.progressState=yc.Infinite,this.progressBar.infinite().show())},"worked"),done:Fd(()=>{this.progressState=yc.Done,this.scope.isActive&&this.progressBar.stop().hide()},"done")}}async showWhile(e,t){this.progressState.type===3&&(e=Promise.all([e,this.progressState.whilePromise])),this.progressState=new yc.While(e,t||0,Date.now());try{this.doShowWhile(t),await e}catch{}finally{(this.progressState.type!==3||this.progressState.whilePromise===e)&&(this.progressState=yc.None,this.scope.isActive&&this.progressBar.stop().hide())}}doShowWhile(e){this.scope.isActive&&this.progressBar.infinite().show(e)}}class Zne extends ${constructor(e,t){super(),this.scopeId=e,this._isActive=t}static{Fd(this,"AbstractProgressScope")}_onDidChangeActive=this._register(new x);onDidChangeActive=this._onDidChangeActive.event;get isActive(){return this._isActive}onScopeOpened(e){e===this.scopeId&&(this._isActive||(this._isActive=!0,this._onDidChangeActive.fire()))}onScopeClosed(e){e===this.scopeId&&this._isActive&&(this._isActive=!1,this._onDidChangeActive.fire())}}var VOe=Object.defineProperty,PV=(i,e)=>VOe(i,"name",{value:e,configurable:!0});class WOe extends ${static{PV(this,"ToolBar")}options;actionBar;toggleMenuAction;toggleMenuActionViewItem;submenuActionViewItems=[];hasSecondaryActions=!1;element;_onDidChangeDropdownVisibility=this._register(new r5);onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event;disposables=this._register(new te);constructor(e,t,n={orientation:Ns.HORIZONTAL}){super(),n.hoverDelegate=n.hoverDelegate??this._register(cm()),this.options=n,this.toggleMenuAction=this._register(new eL(()=>this.toggleMenuActionViewItem?.show(),n.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new td(this.element,{orientation:n.orientation,ariaLabel:n.ariaLabel,actionRunner:n.actionRunner,allowContextMenu:n.allowContextMenu,highlightToggledItems:n.highlightToggledItems,hoverDelegate:n.hoverDelegate,actionViewItemProvider:PV((s,o)=>{if(s.id===eL.ID)return this.toggleMenuActionViewItem=new jb(s,s.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:Ne.asClassNameArray(n.moreIcon??ee.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(n.actionViewItemProvider){const r=n.actionViewItemProvider(s,o);if(r)return r}if(s instanceof ll){const r=new jb(s,s.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:s.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return r.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(r),this.disposables.add(this._onDidChangeDropdownVisibility.add(r.onDidChangeVisibility)),r}},"actionViewItemProvider")}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}set context(e){this.actionBar.context=e,this.toggleMenuActionViewItem?.setActionContext(e);for(const t of this.submenuActionViewItems)t.setActionContext(e)}getElement(){return this.element}focus(){this.actionBar.focus()}getItemsWidth(){let e=0;for(let t=0;t<this.actionBar.length();t++)e+=this.actionBar.getWidth(t);return e}getItemAction(e){return this.actionBar.getAction(e)}getItemWidth(e){return this.actionBar.getWidth(e)}getItemsLength(){return this.actionBar.length()}setAriaLabel(e){this.actionBar.setAriaLabel(e)}setActions(e,t){this.clear();const n=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),n.push(this.toggleMenuAction)),n.forEach(s=>{this.actionBar.push(s,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(s)})})}isEmpty(){return this.actionBar.isEmpty()}getKeybindingLabel(e){return this.options.getKeyBinding?.(e)?.getLabel()??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}class eL extends Mt{static{PV(this,"ToggleMenuAction")}static ID="toolbar.toggle.more";_menuActions;toggleDropdownMenu;constructor(e,t){t=t||g("moreActions","More Actions..."),super(eL.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}}var Xne=Object.defineProperty,HOe=Object.getOwnPropertyDescriptor,Bg=(i,e)=>Xne(i,"name",{value:e,configurable:!0}),mR=(i,e,t,n)=>{for(var s=n>1?void 0:n?HOe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Xne(e,t,s),s},tu=(i,e)=>(t,n)=>e(t,n,i);let iz=class{constructor(i,e,t){this._commandService=i,this._keybindingService=e,this._hiddenStates=new H_(t)}static{Bg(this,"MenuService")}_hiddenStates;createMenu(i,e,t){return new vk(i,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...t},this._commandService,this._keybindingService,e)}getMenuActions(i,e,t){const n=new vk(i,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...t},this._commandService,this._keybindingService,e),s=n.getActions(t);return n.dispose(),s}getMenuContexts(i){const e=new bC(i,!1);return new Set([...e.structureContextKeys,...e.preconditionContextKeys,...e.toggledContextKeys])}resetHiddenStates(i){this._hiddenStates.reset(i)}};iz=mR([tu(0,Xi),tu(1,ni),tu(2,Si)],iz);let H_=class{constructor(i){this._storageService=i;try{const e=i.get(H_._key,Be.PROFILE,"{}");this._data=JSON.parse(e)}catch{this._data=Object.create(null)}this._disposables.add(i.onDidChangeValue(Be.PROFILE,H_._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const e=i.get(H_._key,Be.PROFILE,"{}");this._data=JSON.parse(e)}catch(e){console.log("FAILED to read storage after UPDATE",e)}this._onDidChange.fire()}))}static{Bg(this,"PersistedMenuHideState")}static _key="menu.hiddenCommands";_disposables=new te;_onDidChange=new x;onDidChange=this._onDidChange.event;_ignoreChangeEvent=!1;_data;_hiddenByDefaultCache=new Map;dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(i,e){return this._hiddenByDefaultCache.get(`${i.id}/${e}`)??!1}setDefaultState(i,e,t){this._hiddenByDefaultCache.set(`${i.id}/${e}`,t)}isHidden(i,e){const t=this._isHiddenByDefault(i,e),n=this._data[i.id]?.includes(e)??!1;return t?!n:n}updateHidden(i,e,t){this._isHiddenByDefault(i,e)&&(t=!t);const s=this._data[i.id];if(t)s?s.indexOf(e)<0&&s.push(e):this._data[i.id]=[e];else if(s){const o=s.indexOf(e);o>=0&&nG(s,o),s.length===0&&delete this._data[i.id]}this._persist()}reset(i){if(i===void 0)this._data=Object.create(null),this._persist();else{for(const{id:e}of i)this._data[e]&&delete this._data[e];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const i=JSON.stringify(this._data);this._storageService.store(H_._key,i,Be.PROFILE,ai.USER)}finally{this._ignoreChangeEvent=!1}}};H_=mR([tu(0,Si)],H_);class bC{constructor(e,t){this._id=e,this._collectContextKeysForSubmenus=t,this.refresh()}static{Bg(this,"MenuInfoSnapshot")}_menuGroups=[];_allMenuIds=new Set;_structureContextKeys=new Set;_preconditionContextKeys=new Set;_toggledContextKeys=new Set;get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=this._sort(xt.getMenuItems(this._id));let t;for(const n of e){const s=n.group||"";(!t||t[0]!==s)&&(t=[s,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeysAndSubmenuIds(n)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(e){if(bC._fillInKbExprKeys(e.when,this._structureContextKeys),nC(e)){if(e.command.precondition&&bC._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;bC._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(xt.getMenuItems(e.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(e.submenu))}static _fillInKbExprKeys(e,t){if(e)for(const n of e.keys())t.add(n)}}let vC=class extends bC{constructor(i,e,t,n,s,o){super(i,t),this._hiddenStates=e,this._commandService=n,this._keybindingService=s,this._contextKeyService=o,this.refresh()}static{Bg(this,"MenuInfo")}createActionGroups(i){const e=[];for(const t of this._menuGroups){const[n,s]=t;let o;for(const r of s)if(this._contextKeyService.contextMatchesRules(r.when)){const a=nC(r);a&&this._hiddenStates.setDefaultState(this._id,r.command.id,!!r.isHiddenByDefault);const l=Qne(this._id,a?r.command:r,this._hiddenStates);if(a){const c=U7(this._commandService,this._keybindingService,r.command.id,r.when);(o??=[]).push(new Yl(r.command,r.alt,i,l,c,this._contextKeyService,this._commandService))}else{const c=new vC(r.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(i),d=zt.join(...c.map(h=>h[1]));d.length>0&&(o??=[]).push(new ql(r,l,d))}}o&&o.length>0&&e.push([n,o])}return e}_sort(i){return i.sort(vC._compareMenuItems)}static _compareMenuItems(i,e){const t=i.group,n=e.group;if(t!==n){if(t){if(!n)return-1}else return 1;if(t==="navigation")return-1;if(n==="navigation")return 1;const r=t.localeCompare(n);if(r!==0)return r}const s=i.order||0,o=e.order||0;return s<o?-1:s>o?1:vC._compareTitles(nC(i)?i.command.title:i.title,nC(e)?e.command.title:e.title)}static _compareTitles(i,e){const t=typeof i=="string"?i:i.original,n=typeof e=="string"?e:e.original;return t.localeCompare(n)}};vC=mR([tu(3,Xi),tu(4,ni),tu(5,Ye)],vC);let vk=class{static{Bg(this,"MenuImpl")}_menuInfo;_disposables=new te;_onDidChange;onDidChange;constructor(i,e,t,n,s,o){this._menuInfo=new vC(i,e,t.emitEventsForSubmenuChanges,n,s,o);const r=new xn(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},t.eventDebounceDelay);this._disposables.add(r),this._disposables.add(xt.onDidChangeMenu(d=>{for(const h of this._menuInfo.allMenuIds)if(d.has(h)){r.schedule();break}}));const a=this._disposables.add(new te),l=Bg(d=>{let h=!1,u=!1,f=!1;for(const p of d)if(h=h||p.isStructuralChange,u=u||p.isEnablementChange,f=f||p.isToggleChange,h&&u&&f)break;return{menu:this,isStructuralChange:h,isEnablementChange:u,isToggleChange:f}},"merge"),c=Bg(()=>{a.add(o.onDidChangeContext(d=>{const h=d.affectsSome(this._menuInfo.structureContextKeys),u=d.affectsSome(this._menuInfo.preconditionContextKeys),f=d.affectsSome(this._menuInfo.toggledContextKeys);(h||u||f)&&this._onDidChange.fire({menu:this,isStructuralChange:h,isEnablementChange:u,isToggleChange:f})})),a.add(e.onDidChange(d=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))},"startLazyListener");this._onDidChange=new Oue({onWillAddFirstListener:c,onDidRemoveLastListener:a.clear.bind(a),delay:t.eventDebounceDelay,merge:l}),this.onDidChange=this._onDidChange.event}getActions(i){return this._menuInfo.createActionGroups(i)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};vk=mR([tu(3,Xi),tu(4,ni),tu(5,Ye)],vk);function Qne(i,e,t){const n=FQ(e)?e.submenu.id:e.id,s=typeof e.title=="string"?e.title:e.title.value,o=Ei({id:`hide/${i.id}/${n}`,label:g("hide.label","Hide '{0}'",s),run(){t.updateHidden(i,n,!0)}}),r=Ei({id:`toggle/${i.id}/${n}`,label:s,get checked(){return!t.isHidden(i,n)},run(){t.updateHidden(i,n,!!this.checked)}});return{hide:o,toggle:r,get isHidden(){return!r.checked}}}Bg(Qne,"createMenuHide");function U7(i,e,t,n=void 0,s=!0){return Ei({id:`configureKeybinding/${t}`,label:g("configure keybinding","Configure Keybinding"),enabled:s,run(){const r=!!!e.lookupKeybinding(t)&&n?n.serialize():void 0;i.executeCommand("workbench.action.openGlobalKeybindings",`@command:${t}`+(r?` +when:${r}`:""))}})}Bg(U7,"createConfigureKeybindingAction");var Jne=Object.defineProperty,UOe=Object.getOwnPropertyDescriptor,__=(i,e)=>Jne(i,"name",{value:e,configurable:!0}),ese=(i,e,t,n)=>{for(var s=n>1?void 0:n?UOe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Jne(e,t,s),s},Pc=(i,e)=>(t,n)=>e(t,n,i),Av=(i=>(i[i.NoHide=-1]="NoHide",i[i.Ignore=0]="Ignore",i[i.RenderInSecondaryGroup=1]="RenderInSecondaryGroup",i))(Av||{});let fu=class extends WOe{constructor(i,e,t,n,s,o,r,a){super(i,s,{getKeyBinding:__(c=>o.lookupKeybinding(c.id)??void 0,"getKeyBinding"),...e,allowContextMenu:!0,skipTelemetry:typeof e?.telemetrySource=="string"}),this._options=e,this._menuService=t,this._contextKeyService=n,this._contextMenuService=s,this._keybindingService=o,this._commandService=r;const l=e?.telemetrySource;l&&this._store.add(this.actionBar.onDidRun(c=>a.publicLog2("workbenchActionExecuted",{id:c.action.id,from:l})))}static{__(this,"WorkbenchToolBar")}_sessionDisposables=this._store.add(new te);setActions(i,e=[],t){this._sessionDisposables.clear();const n=i.slice(),s=e.slice(),o=[];let r=0;const a=[];let l=!1;if(this._options?.hiddenItemStrategy!==-1)for(let c=0;c<n.length;c++){const d=n[c];!(d instanceof Yl)&&!(d instanceof ql)||d.hideActions&&(o.push(d.hideActions.toggle),d.hideActions.toggle.checked&&r++,d.hideActions.isHidden&&(l=!0,n[c]=void 0,this._options?.hiddenItemStrategy!==0&&(a[c]=d)))}if(this._options?.overflowBehavior!==void 0){const c=_G(new Set(this._options.overflowBehavior.exempted),Zt.map(n,u=>u?.id)),d=this._options.overflowBehavior.maxItems-c.size;let h=0;for(let u=0;u<n.length;u++){const f=n[u];f&&(h++,!c.has(f.id)&&h>=d&&(n[u]=void 0,a[u]=f))}}kM(n),kM(a),super.setActions(n,zt.join(a,s)),(o.length>0||n.length>0)&&this._sessionDisposables.add(F(this.getElement(),"contextmenu",c=>{const d=new $n(ve(this.getElement()),c),h=this.getItemAction(d.target);if(!h)return;d.preventDefault(),d.stopPropagation();const u=[];if(h instanceof Yl&&h.menuKeybinding)u.push(h.menuKeybinding);else if(!(h instanceof ql||h instanceof eL)){const p=!!this._keybindingService.lookupKeybinding(h.id);u.push(U7(this._commandService,this._keybindingService,h.id,void 0,p))}if(o.length>0){let p=!1;if(r===1&&this._options?.hiddenItemStrategy===0){p=!0;for(let m=0;m<o.length;m++)if(o[m].checked){o[m]=Ei({id:h.id,label:h.label,checked:!0,enabled:!1,run(){}});break}}if(!p&&(h instanceof Yl||h instanceof ql)){if(!h.hideActions)return;u.push(h.hideActions.hide)}else u.push(Ei({id:"label",label:g("hide","Hide"),enabled:!1,run(){}}))}const f=zt.join(u,o);this._options?.resetMenu&&!t&&(t=[this._options.resetMenu]),l&&t&&(f.push(new zt),f.push(Ei({id:"resetThisMenu",label:g("resetThisMenu","Reset Menu"),run:__(()=>this._menuService.resetHiddenStates(t),"run")}))),f.length!==0&&this._contextMenuService.showContextMenu({getAnchor:__(()=>d,"getAnchor"),getActions:__(()=>f,"getActions"),menuId:this._options?.contextMenu,menuActionOptions:{renderShortTitle:!0,...this._options?.menuOptions},skipTelemetry:typeof this._options?.telemetrySource=="string",contextKeyService:this._contextKeyService})}))}};fu=ese([Pc(2,No),Pc(3,Ye),Pc(4,Hi),Pc(5,ni),Pc(6,Xi),Pc(7,rs)],fu);let tL=class extends fu{static{__(this,"MenuWorkbenchToolBar")}_onDidChangeMenuItems=this._store.add(new x);onDidChangeMenuItems=this._onDidChangeMenuItems.event;constructor(i,e,t,n,s,o,r,a,l){super(i,{resetMenu:e,...t},n,s,o,r,a,l);const c=this._store.add(n.createMenu(e,s,{emitEventsForSubmenuChanges:!0})),d=__(()=>{const h=[],u=[];Dv(c,t?.menuOptions,{primary:h,secondary:u},t?.toolbarOptions?.primaryGroup,t?.toolbarOptions?.shouldInlineSubmenu,t?.toolbarOptions?.useSeparatorsInPrimaryActions),i.classList.toggle("has-no-actions",h.length===0&&u.length===0),super.setActions(h,u)},"updateToolbar");this._store.add(c.onDidChange(()=>{d(),this._onDidChangeMenuItems.fire(this)})),d()}setActions(){throw new Et("This toolbar is populated from a menu.")}};tL=ese([Pc(3,No),Pc(4,Ye),Pc(5,Hi),Pc(6,ni),Pc(7,Xi),Pc(8,rs)],tL);var zOe=Object.defineProperty,tse=(i,e)=>zOe(i,"name",{value:e,configurable:!0});const $Oe=g("defaultLabel","input"),GOe=g("label.preserveCaseToggle","Preserve Case");class KOe extends hm{static{tse(this,"PreserveCaseToggle")}constructor(e){super({icon:ee.preserveCase,title:GOe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??bn("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class jOe extends Jc{constructor(e,t,n,s){super(),this._showOptionButtons=n,this.contextViewProvider=t,this.placeholder=s.placeholder||"",this.validation=s.validation,this.label=s.label||$Oe;const o=s.appendPreserveCaseLabel||"",r=s.history||[],a=!!s.flexibleHeight,l=!!s.flexibleWidth,c=s.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new A3(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:r,showHistoryHint:s.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c,inputBoxStyles:s.inputBoxStyles})),this.preserveCase=this._register(new KOe({appendTitle:o,isChecked:!1,...s.toggleStyles})),this._register(this.preserveCase.onChange(u=>{this._onDidOptionChange.fire(u),!u&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(u=>{this._onPreserveCaseKeyDown.fire(u)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;const d=[this.preserveCase.domNode];this.onkeydown(this.domNode,u=>{if(u.equals(E.LeftArrow)||u.equals(E.RightArrow)||u.equals(E.Escape)){const f=d.indexOf(this.domNode.ownerDocument.activeElement);if(f>=0){let p=-1;u.equals(E.RightArrow)?p=(f+1)%d.length:u.equals(E.LeftArrow)&&(f===0?p=d.length-1:p=f-1),u.equals(E.Escape)?(d[f].blur(),this.inputBox.focus()):p>=0&&d[p].focus(),Fe.stop(u,!0)}}});const h=document.createElement("div");h.className="controls",h.style.display=this._showOptionButtons?"block":"none",h.appendChild(this.preserveCase.domNode),this.domNode.appendChild(h),e?.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,u=>this._onKeyDown.fire(u)),this.onkeyup(this.inputBox.inputElement,u=>this._onKeyUp.fire(u)),this.oninput(this.inputBox.inputElement,u=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,u=>this._onMouseDown.fire(u))}static{tse(this,"ReplaceInput")}static OPTION_CHANGE="optionChange";contextViewProvider;placeholder;validation;label;fixFocusOnOptionClickEnabled=!0;preserveCase;cachedOptionsWidth=0;domNode;inputBox;_onDidOptionChange=this._register(new x);onDidOptionChange=this._onDidOptionChange.event;_onKeyDown=this._register(new x);onKeyDown=this._onKeyDown.event;_onMouseDown=this._register(new x);onMouseDown=this._onMouseDown.event;_onInput=this._register(new x);onInput=this._onInput.event;_onKeyUp=this._register(new x);onKeyUp=this._onKeyUp.event;_onPreserveCaseKeyDown=this._register(new x);onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event;enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}clear(){this.clearValidation(),this.setValue(""),this.focus()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}onSearchSubmit(){this.inputBox.addToHistory()}applyStyles(){}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}_lastHighlightFindOptions=0;highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox?.validate()}showMessage(e){this.inputBox?.showMessage(e)}clearMessage(){this.inputBox?.hideMessage()}clearValidation(){this.inputBox?.hideMessage()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var ise=Object.defineProperty,qOe=Object.getOwnPropertyDescriptor,Zp=(i,e)=>ise(i,"name",{value:e,configurable:!0}),z7=(i,e,t,n)=>{for(var s=n>1?void 0:n?qOe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&ise(e,t,s),s},$7=(i,e)=>(t,n)=>e(t,n,i);const nse=new ie("suggestWidgetVisible",!1,g("suggestWidgetVisible","Whether suggestion are visible")),G7="historyNavigationWidgetFocus",sse="historyNavigationForwardsEnabled",ose="historyNavigationBackwardsEnabled";let p0;const RI=[];function _R(i,e){if(RI.includes(e))throw new Error("Cannot register the same widget multiple times");RI.push(e);const t=new te,n=new ie(G7,!1).bindTo(i),s=new ie(sse,!0).bindTo(i),o=new ie(ose,!0).bindTo(i),r=Zp(()=>{n.set(!0),p0=e},"onDidFocus"),a=Zp(()=>{n.set(!1),p0===e&&(p0=void 0)},"onDidBlur");return dh(e.element)&&r(),t.add(e.onDidFocus(()=>r())),t.add(e.onDidBlur(()=>a())),t.add(ye(()=>{RI.splice(RI.indexOf(e),1),a()})),{historyNavigationForwardsEnablement:s,historyNavigationBackwardsEnablement:o,dispose(){t.dispose()}}}Zp(_R,"registerAndCreateHistoryNavigationContext");let RV=class extends A3{static{Zp(this,"ContextScopedHistoryInputBox")}constructor(i,e,t,n){super(i,e,t);const s=this._register(n.createScoped(this.element));this._register(_R(s,this))}};RV=z7([$7(3,Ye)],RV);let nz=class extends gte{static{Zp(this,"ContextScopedFindInput")}constructor(i,e,t,n){super(i,e,t);const s=this._register(n.createScoped(this.inputBox.element));this._register(_R(s,this.inputBox))}};nz=z7([$7(3,Ye)],nz);let sz=class extends jOe{static{Zp(this,"ContextScopedReplaceInput")}constructor(i,e,t,n,s=!1){super(i,e,s,t);const o=this._register(n.createScoped(this.inputBox.element));this._register(_R(o,this.inputBox))}};sz=z7([$7(3,Ye)],sz);gt.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:Ce.WorkbenchContrib,when:Z.and(Z.has(G7),Z.equals(ose,!0),Z.not("isComposing"),nse.isEqualTo(!1)),primary:E.UpArrow,secondary:[M.Alt|E.UpArrow],handler:Zp(i=>{p0?.showPreviousValue()},"handler")});gt.registerCommandAndKeybindingRule({id:"history.showNext",weight:Ce.WorkbenchContrib,when:Z.and(Z.has(G7),Z.equals(sse,!0),Z.not("isComposing"),nse.isEqualTo(!1)),primary:E.DownArrow,secondary:[M.Alt|E.DownArrow],handler:Zp(i=>{p0?.showNextValue()},"handler")});var YOe=Object.defineProperty,ZOe=(i,e)=>YOe(i,"name",{value:e,configurable:!0});function rse(i){return i.lookupKeybinding("history.showPrevious")?.getElectronAccelerator()==="Up"&&i.lookupKeybinding("history.showNext")?.getElectronAccelerator()==="Down"}ZOe(rse,"showHistoryKeybindingHint");var ase=Object.defineProperty,XOe=Object.getOwnPropertyDescriptor,rA=(i,e)=>ase(i,"name",{value:e,configurable:!0}),QOe=(i,e,t,n)=>{for(var s=n>1?void 0:n?XOe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&ase(e,t,s),s},OI=(i,e)=>(t,n)=>e(t,n,i);const lse=new N("menu.view.filter"),cse=new N("submenu.view.filter");xt.appendMenuItem(lse,{submenu:cse,title:g("more filters","More Filters..."),group:"navigation",icon:ee.filter});class JOe extends fk{static{rA(this,"MoreFiltersActionViewItem")}_checked=!1;set checked(e){this._checked!==e&&(this._checked=e,this.updateChecked())}updateChecked(){this.element&&this.element.classList.toggle("checked",this._checked)}render(e){super.render(e),this.updateChecked()}}let OV=class extends Jc{constructor(i,e,t,n,s){super(),this.options=i,this.instantiationService=e,this.contextViewService=t,this.keybindingService=s,this.delayedFilterUpdate=new $y(400),this._register(ye(()=>this.delayedFilterUpdate.cancel())),i.focusContextKey&&(this.focusContextKey=new ie(i.focusContextKey,!1).bindTo(n)),this.element=ce(".viewpane-filter"),[this.filterInputBox,this.focusTracker]=this.createInput(this.element),this._register(this.filterInputBox),this._register(this.focusTracker);const o=Le(this.element,ce(".viewpane-filter-controls"));this.filterBadge=this.createBadge(o),this.toolbar=this._register(this.createToolBar(o)),this.adjustInputBox()}static{rA(this,"FilterWidget")}element;delayedFilterUpdate;filterInputBox;filterBadge;toolbar;focusContextKey;_onDidChangeFilterText=this._register(new x);onDidChangeFilterText=this._onDidChangeFilterText.event;moreFiltersActionViewItem;isMoreFiltersChecked=!1;lastWidth;focusTracker;get onDidFocus(){return this.focusTracker.onDidFocus}get onDidBlur(){return this.focusTracker.onDidBlur}hasFocus(){return this.filterInputBox.hasFocus()}focus(){this.filterInputBox.focus()}blur(){this.filterInputBox.blur()}updateBadge(i){this.filterBadge.classList.toggle("hidden",!i),this.filterBadge.textContent=i||"",this.adjustInputBox()}setFilterText(i){this.filterInputBox.value=i}getFilterText(){return this.filterInputBox.value}getHistory(){return this.filterInputBox.getHistory()}layout(i){this.element.parentElement?.classList.toggle("grow",i>700),this.element.classList.toggle("small",i<400),this.adjustInputBox(),this.lastWidth=i}relayout(){this.lastWidth&&this.layout(this.lastWidth)}checkMoreFilters(i){this.isMoreFiltersChecked=i,this.moreFiltersActionViewItem&&(this.moreFiltersActionViewItem.checked=i)}createInput(i){const e=this._register(this.instantiationService.createInstance(RV,i,this.contextViewService,{placeholder:this.options.placeholder,ariaLabel:this.options.ariaLabel,history:this.options.history||[],showHistoryHint:rA(()=>rse(this.keybindingService),"showHistoryHint"),inputBoxStyles:z3}));this.options.text&&(e.value=this.options.text),this._register(e.onDidChange(n=>this.delayedFilterUpdate.trigger(()=>this.onDidInputChange(e)))),this._register(Gs(e.inputElement,Q.KEY_DOWN,n=>this.onInputKeyDown(n,e))),this._register(Gs(i,Q.KEY_DOWN,this.handleKeyboardEvent)),this._register(Gs(i,Q.KEY_UP,this.handleKeyboardEvent)),this._register(Gs(e.inputElement,Q.CLICK,n=>{n.stopPropagation(),n.preventDefault()}));const t=this._register(al(e.inputElement));return this.focusContextKey&&(this._register(t.onDidFocus(()=>this.focusContextKey.set(!0))),this._register(t.onDidBlur(()=>this.focusContextKey.set(!1))),this._register(ye(()=>this.focusContextKey.reset()))),[e,t]}createBadge(i){const e=Le(i,ce(".viewpane-filter-badge.hidden"));return e.style.backgroundColor=be(X_),e.style.color=be(UN),e.style.border=`1px solid ${be(Re)}`,e}createToolBar(i){return this.instantiationService.createInstance(tL,i,lse,{hiddenItemStrategy:Av.NoHide,actionViewItemProvider:rA((e,t)=>{if(e instanceof ql&&e.item.submenu.id===cse.id)return this.moreFiltersActionViewItem=this.instantiationService.createInstance(JOe,e,t),this.moreFiltersActionViewItem.checked=this.isMoreFiltersChecked,this.moreFiltersActionViewItem},"actionViewItemProvider")})}onDidInputChange(i){i.addToHistory(),this._onDidChangeFilterText.fire(i.value)}adjustInputBox(){this.filterInputBox.inputElement.style.paddingRight=this.element.classList.contains("small")||this.filterBadge.classList.contains("hidden")?"25px":"150px"}handleKeyboardEvent(i){(i.equals(E.Space)||i.equals(E.LeftArrow)||i.equals(E.RightArrow)||i.equals(E.Home)||i.equals(E.End))&&i.stopPropagation()}onInputKeyDown(i,e){let t=!1;i.equals(E.Tab)&&!this.toolbar.isEmpty()&&(this.toolbar.focus(),t=!0),t&&(i.stopPropagation(),i.preventDefault())}};OV=QOe([OI(1,He),OI(2,XP),OI(3,Ye),OI(4,ni)],OV);var dse=Object.defineProperty,eMe=Object.getOwnPropertyDescriptor,tMe=(i,e)=>dse(i,"name",{value:e,configurable:!0}),iMe=(i,e,t,n)=>{for(var s=n>1?void 0:n?eMe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&dse(e,t,s),s},nMe=(i,e)=>(t,n)=>e(t,n,i);De("accessibleViewInformationService");let oz=class extends ${constructor(i){super(),this._storageService=i}static{tMe(this,"AccessibleViewInformationService")}hasShownAccessibleView(i){return this._storageService.getBoolean(`${kve}${i}`,Be.APPLICATION,!1)===!0}};oz=iMe([nMe(0,Si)],oz);var hse=Object.defineProperty,sMe=Object.getOwnPropertyDescriptor,Fg=(i,e)=>hse(i,"name",{value:e,configurable:!0}),K7=(i,e,t,n)=>{for(var s=n>1?void 0:n?sMe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&hse(e,t,s),s},is=(i,e)=>(t,n)=>e(t,n,i);const MV=new Mt("viewpane.action.filter"),oMe=Vt("view-pane-container-expanded",ee.chevronDown,g("viewPaneContainerExpandedIcon","Icon for an expanded view pane container.")),rMe=Vt("view-pane-container-collapsed",ee.chevronRight,g("viewPaneContainerCollapsedIcon","Icon for a collapsed view pane container.")),rz=Xt.as(ZE.ViewsRegistry);let BV=class{constructor(i,e,t,n,s,o,r){this.container=i,this.delegate=e,this.instantiationService=t,this.openerService=n,this.telemetryService=s,this.contextKeyService=o,this.disposables.add(H.runAndSubscribe(this.delegate.onDidChangeViewWelcomeState,()=>this.onDidChangeViewWelcomeState())),this.disposables.add(r.onWillShutdown(()=>this.dispose()))}static{Fg(this,"ViewWelcomeController")}defaultItem;items=[];get enabled(){return this._enabled}_enabled=!1;element;scrollableElement;disposables=new te;enabledDisposables=this.disposables.add(new te);renderDisposables=this.disposables.add(new te);layout(i,e){this._enabled&&(this.element.style.height=`${i}px`,this.element.style.width=`${e}px`,this.element.classList.toggle("wide",e>640),this.scrollableElement.scanDomNode())}focus(){this._enabled&&this.element.focus()}onDidChangeViewWelcomeState(){const i=this.delegate.shouldShowWelcome();if(this._enabled===i)return;if(this._enabled=i,!i){this.enabledDisposables.clear();return}this.container.classList.add("welcome");const e=Le(this.container,ce(".welcome-view"));this.element=ce(".welcome-view-content",{tabIndex:0}),this.scrollableElement=new hD(this.element,{alwaysConsumeMouseWheel:!0,horizontal:Bi.Hidden,vertical:Bi.Visible}),Le(e,this.scrollableElement.getDomNode()),this.enabledDisposables.add(ye(()=>{this.container.classList.remove("welcome"),this.scrollableElement.dispose(),e.remove(),this.scrollableElement=void 0,this.element=void 0})),this.contextKeyService.onDidChangeContext(this.onDidChangeContext,this,this.enabledDisposables),H.chain(rz.onDidChangeViewWelcomeContent,t=>t.filter(n=>n===this.delegate.id))(this.onDidChangeViewWelcomeContent,this,this.enabledDisposables),this.onDidChangeViewWelcomeContent()}onDidChangeViewWelcomeContent(){const i=rz.getViewWelcomeContent(this.delegate.id);this.items=[];for(const e of i)if(e.when==="default")this.defaultItem={descriptor:e,visible:!0};else{const t=e.when?this.contextKeyService.contextMatchesRules(e.when):!0;this.items.push({descriptor:e,visible:t})}this.render()}onDidChangeContext(){let i=!1;for(const e of this.items){if(!e.descriptor.when||e.descriptor.when==="default")continue;const t=this.contextKeyService.contextMatchesRules(e.descriptor.when);e.visible!==t&&(e.visible=t,i=!0)}i&&this.render()}render(){this.renderDisposables.clear(),this.element.innerText="";const i=this.getContentDescriptors();if(i.length===0){this.container.classList.remove("welcome"),this.scrollableElement.scanDomNode();return}for(const{content:e,precondition:t}of i){const n=e.split(`
`);for(let s of n){if(s=s.trim(),!s)continue;const o=f3(s);if(o.nodes.length===1&&typeof o.nodes[0]!="string"){const r=o.nodes[0],a=Le(this.element,ce(".button-container")),l=new hy(a,{title:r.title,supportIcons:!0,...U3});if(l.label=r.label,l.onDidClick(c=>{this.telemetryService.publicLog2("views.welcomeAction",{viewId:this.delegate.id,uri:r.href}),this.openerService.open(r.href,{allowCommands:!0})},null,this.renderDisposables),this.renderDisposables.add(l),t){const c=Fg(()=>l.enabled=this.contextKeyService.contextMatchesRules(t),"updateEnablement");c();const d=new Set(t.keys());H.filter(this.contextKeyService.onDidChangeContext,u=>u.affectsSome(d))(c,null,this.renderDisposables)}}else{const r=Le(this.element,ce("p"));for(const a of o.nodes)if(typeof a=="string")Le(r,document.createTextNode(a));else{const l=this.renderDisposables.add(this.instantiationService.createInstance(AV,r,a,{}));if(t&&a.href.startsWith("command:")){const c=Fg(()=>l.enabled=this.contextKeyService.contextMatchesRules(t),"updateEnablement");c();const d=new Set(t.keys());H.filter(this.contextKeyService.onDidChangeContext,u=>u.affectsSome(d))(c,null,this.renderDisposables)}}}}}this.container.classList.add("welcome"),this.scrollableElement.scanDomNode()}getContentDescriptors(){const i=this.items.filter(e=>e.visible);return i.length===0&&this.defaultItem?[this.defaultItem.descriptor]:i.map(e=>e.descriptor)}dispose(){this.disposables.dispose()}};BV=K7([is(2,He),is(3,Lv),is(4,rs),is(5,Ye),is(6,eh)],BV);let wk=class extends gk{constructor(i,e,t,n,s,o,r,a,l,c,d,h){super({...i,orientation:o.getViewLocationById(i.id)===Te.Panel?ke.HORIZONTAL:ke.VERTICAL}),this.keybindingService=e,this.contextMenuService=t,this.configurationService=n,this.contextKeyService=s,this.viewDescriptorService=o,this.instantiationService=r,this.openerService=a,this.themeService=l,this.telemetryService=c,this.hoverService=d,this.accessibleViewInformationService=h,this.id=i.id,this._title=i.title,this._titleDescription=i.titleDescription,this._singleViewPaneContainerTitle=i.singleViewPaneContainerTitle,this.showActions=i.showActions??0,this.scopedContextKeyService=this._register(s.createScoped(this.element)),this.scopedContextKeyService.createKey("view",this.id);const u=this.scopedContextKeyService.createKey("viewLocation",Sr(o.getViewLocationById(this.id)));this._register(H.filter(o.onDidChangeLocation,p=>p.views.some(m=>m.id===this.id))(()=>u.set(Sr(o.getViewLocationById(this.id)))));const f=this._register(this.instantiationService.createChild(new av([Ye,this.scopedContextKeyService])));this.menuActions=this._register(f.createInstance(my,i.titleMenuId??N.ViewTitle,N.ViewTitleContext,{shouldForwardArgs:!i.donotForwardArgs,renderShortTitle:!0})),this._register(this.menuActions.onDidChange(()=>this.updateActions()))}static{Fg(this,"ViewPane")}static AlwaysShowActionsConfig="workbench.view.alwaysShowHeaderActions";_onDidFocus=this._register(new x);onDidFocus=this._onDidFocus.event;_onDidBlur=this._register(new x);onDidBlur=this._onDidBlur.event;_onDidChangeBodyVisibility=this._register(new x);onDidChangeBodyVisibility=this._onDidChangeBodyVisibility.event;_onDidChangeTitleArea=this._register(new x);onDidChangeTitleArea=this._onDidChangeTitleArea.event;_onDidChangeViewWelcomeState=this._register(new x);onDidChangeViewWelcomeState=this._onDidChangeViewWelcomeState.event;_isVisible=!1;id;_title;get title(){return this._title}_titleDescription;get titleDescription(){return this._titleDescription}_singleViewPaneContainerTitle;get singleViewPaneContainerTitle(){return this._singleViewPaneContainerTitle}menuActions;progressBar;progressIndicator;toolbar;showActions;headerContainer;titleContainer;titleContainerHover;titleDescriptionContainer;titleDescriptionContainerHover;iconContainer;iconContainerHover;twistiesContainer;viewWelcomeController;scopedContextKeyService;get headerVisible(){return super.headerVisible}set headerVisible(i){super.headerVisible=i,this.element.classList.toggle("merged-header",!i)}setVisible(i){this._isVisible!==i&&(this._isVisible=i,this.isExpanded()&&this._onDidChangeBodyVisibility.fire(i))}isVisible(){return this._isVisible}isBodyVisible(){return this._isVisible&&this.isExpanded()}setExpanded(i){const e=super.setExpanded(i);return e&&this._onDidChangeBodyVisibility.fire(i),this.updateTwistyIcon(),e}render(){super.render();const i=al(this.element);this._register(i),this._register(i.onDidFocus(()=>this._onDidFocus.fire())),this._register(i.onDidBlur(()=>this._onDidBlur.fire()))}renderHeader(i){this.headerContainer=i,this.twistiesContainer=Le(i,ce(`.twisty-container${Ne.asCSSSelector(this.getTwistyIcon(this.isExpanded()))}`)),this.renderHeaderTitle(i,this.title);const e=Le(i,ce(".actions"));e.classList.toggle("show-always",this.showActions===2),e.classList.toggle("show-expanded",this.showActions===1),this.toolbar=this.instantiationService.createInstance(fu,e,{orientation:Ns.HORIZONTAL,actionViewItemProvider:Fg((s,o)=>this.getActionViewItem(s,o),"actionViewItemProvider"),ariaLabel:g("viewToolbarAriaLabel","{0} actions",this.title),getKeyBinding:Fg(s=>this.keybindingService.lookupKeybinding(s.id),"getKeyBinding"),renderDropdownAsChildElement:!0,actionRunner:this.getActionRunner(),resetMenu:this.menuActions.menuId}),this._register(this.toolbar),this.setActions(),this._register(F(e,Q.CLICK,s=>s.preventDefault()));const t=this.viewDescriptorService.getViewContainerByViewId(this.id);t?this._register(this.viewDescriptorService.getViewContainerModel(t).onDidChangeContainerInfo(({title:s})=>this.updateTitle(this.title))):console.error(`View container model not found for view ${this.id}`);const n=H.filter(this.configurationService.onDidChangeConfiguration,s=>s.affectsConfiguration(wk.AlwaysShowActionsConfig));this._register(n(this.updateActionsVisibility,this)),this.updateActionsVisibility()}updateHeader(){super.updateHeader(),this.updateTwistyIcon()}updateTwistyIcon(){this.twistiesContainer&&(this.twistiesContainer.classList.remove(...Ne.asClassNameArray(this.getTwistyIcon(!this._expanded))),this.twistiesContainer.classList.add(...Ne.asClassNameArray(this.getTwistyIcon(this._expanded))))}getTwistyIcon(i){return i?oMe:rMe}style(i){super.style(i);const e=this.getIcon();if(this.iconContainer){const t=$d(i.headerForeground,be(yi));ne.isUri(e)?(this.iconContainer.style.backgroundColor=t,this.iconContainer.style.color=""):(this.iconContainer.style.color=t,this.iconContainer.style.backgroundColor="")}}getIcon(){return this.viewDescriptorService.getViewDescriptorById(this.id)?.containerIcon||TRe}renderHeaderTitle(i,e){this.iconContainer=Le(i,ce(".icon",void 0));const t=this.getIcon();let n;if(ne.isUri(t)){n=`view-${this.id.replace(/[\.\:]/g,"-")}`;const o=`.pane-header .icon.${n}`;tP(o,`
				mask: ${Zg(t)} no-repeat 50% 50%;
				mask-size: 24px;
				-webkit-mask: ${Zg(t)} no-repeat 50% 50%;
				-webkit-mask-size: 16px;
			`)}else Ne.isThemeIcon(t)&&(n=Ne.asClassName(t));n&&this.iconContainer.classList.add(...n.split(" "));const s=this.calculateTitle(e);this.titleContainer=Le(i,ce("h3.title",{},s)),this.titleContainerHover=this._register(this.hoverService.setupManagedHover(bn("mouse"),this.titleContainer,s)),this._titleDescription&&this.setTitleDescription(this._titleDescription),this.iconContainerHover=this._register(this.hoverService.setupManagedHover(bn("mouse"),this.iconContainer,s)),this.iconContainer.setAttribute("aria-label",this._getAriaLabel(s))}_getAriaLabel(i){const e=this.viewDescriptorService.getViewDescriptorById(this.id)?.accessibilityHelpContent,t=this.accessibleViewInformationService?.hasShownAccessibleView(this.id);return!e||t?i:g("viewAccessibilityHelp","Use Alt+F1 for accessibility help {0}",i)}updateTitle(i){const e=this.calculateTitle(i);this.titleContainer&&(this.titleContainer.textContent=e,this.titleContainerHover?.update(e)),this.iconContainer&&(this.iconContainerHover?.update(e),this.iconContainer.setAttribute("aria-label",this._getAriaLabel(e))),this._title=i,this._onDidChangeTitleArea.fire()}setTitleDescription(i){this.titleDescriptionContainer?(this.titleDescriptionContainer.textContent=i??"",this.titleDescriptionContainerHover?.update(i??"")):i&&this.titleContainer&&(this.titleDescriptionContainer=Q5(this.titleContainer,ce("span.description",{},i)),this.titleDescriptionContainerHover=this._register(this.hoverService.setupManagedHover(bn("mouse"),this.titleDescriptionContainer,i)))}updateTitleDescription(i){this.setTitleDescription(i),this._titleDescription=i,this._onDidChangeTitleArea.fire()}calculateTitle(i){const e=this.viewDescriptorService.getViewContainerByViewId(this.id),t=this.viewDescriptorService.getViewContainerModel(e),n=this.viewDescriptorService.getViewDescriptorById(this.id);return!(this.viewDescriptorService.getDefaultContainerById(this.id)===e)&&n?.containerTitle&&t.title!==n.containerTitle?`${n.containerTitle}: ${i}`:i}renderBody(i){this.viewWelcomeController=this._register(this.instantiationService.createInstance(BV,i,this))}layoutBody(i,e){this.viewWelcomeController.layout(i,e)}onDidScrollRoot(){}getProgressIndicator(){if(this.progressBar===void 0&&(this.progressBar=this._register(new uy(this.element,JP)),this.progressBar.hide()),this.progressIndicator===void 0){const i=this;this.progressIndicator=this._register(new Yne(pt(this.progressBar),new class extends Zne{constructor(){super(i.id,i.isBodyVisible()),this._register(i.onDidChangeBodyVisibility(e=>e?this.onScopeOpened(i.id):this.onScopeClosed(i.id)))}}))}return this.progressIndicator}getProgressLocation(){return this.viewDescriptorService.getViewContainerByViewId(this.id).id}getLocationBasedColors(){return use(this.viewDescriptorService.getViewLocationById(this.id))}focus(){this.viewWelcomeController.enabled?this.viewWelcomeController.focus():this.element&&(this.element.focus(),this._onDidFocus.fire())}setActions(){if(this.toolbar){const i=[...this.menuActions.getPrimaryActions()];this.shouldShowFilterInHeader()&&i.unshift(MV),this.toolbar.setActions(sc(i),sc(this.menuActions.getSecondaryActions())),this.toolbar.context=this.getActionsContext()}}updateActionsVisibility(){if(!this.headerContainer)return;const i=this.configurationService.getValue("workbench.view.alwaysShowHeaderActions");this.headerContainer.classList.toggle("actions-always-visible",i)}updateActions(){this.setActions(),this._onDidChangeTitleArea.fire()}getActionViewItem(i,e){if(i.id===MV.id){const t=this;return new class extends yr{constructor(){super(null,i)}setFocusable(){}get trapsArrowNavigation(){return!0}render(n){n.classList.add("viewpane-filter-container");const s=t.getFilterWidget();Le(n,s.element),s.relayout()}}}return fm(this.instantiationService,i,{...e,menuAsChild:i instanceof ql})}getActionsContext(){}getActionRunner(){}getOptimalWidth(){return 0}saveState(){}shouldShowWelcome(){return!1}getFilterWidget(){}shouldShowFilterInHeader(){return!1}};wk=K7([is(1,ni),is(2,Hi),is(3,Pe),is(4,Ye),is(5,Ro),is(6,He),is(7,Lv),is(8,$t),is(9,rs),is(10,Po)],wk);let az=class extends wk{static{Fg(this,"FilterViewPane")}filterWidget;dimension;filterContainer;constructor(i,e,t,n,s,o,r,a,l,c,d,h){super(i,e,t,n,s,o,r,a,l,c,d,h);const u=this._register(r.createChild(new av([Ye,this.scopedContextKeyService])));this.filterWidget=this._register(u.createInstance(OV,i.filterOptions))}getFilterWidget(){return this.filterWidget}renderBody(i){super.renderBody(i),this.filterContainer=Le(i,ce(".viewpane-filter-container"))}layoutBody(i,e){super.layoutBody(i,e),this.dimension=new Lt(e,i);const t=!this.filterContainer?.hasChildNodes(),n=this.shouldShowFilterInHeader();t!==n&&(n&&dr(this.filterContainer),this.updateActions(),n||Le(this.filterContainer,this.filterWidget.element)),n||(i=i-44),this.filterWidget.layout(e),this.layoutBodyContent(i,e)}shouldShowFilterInHeader(){return!(this.dimension&&this.dimension.width<600&&this.dimension.height>100)}};az=K7([is(1,ni),is(2,Hi),is(3,Pe),is(4,Ye),is(5,Ro),is(6,He),is(7,Lv),is(8,$t),is(9,rs),is(10,Po)],az);function use(i){let e,t,n,s,o;switch(i){case Te.Panel:e=H1,t=T5,n=bme,s=vme,o=wme;break;case Te.Sidebar:case Te.AuxiliaryBar:default:e=kg,t=qN,n=Fme,s=Vme,o=Wme}return{background:e,overlayBackground:t,listOverrideStyles:{listBackground:e,treeStickyScrollBackground:n,treeStickyScrollBorder:s,treeStickyScrollShadow:o}}}Fg(use,"getLocationBasedViewColors");class X$e extends ge{static{Fg(this,"ViewAction")}desc;constructor(e){super(e),this.desc=e}run(e,...t){const n=e.get(vf).getActiveViewWithId(this.desc.viewId);if(n)return this.runInView(e,n,...t)}}var aMe=Object.defineProperty,pm=(i,e)=>aMe(i,"name",{value:e,configurable:!0});const lz="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$";function lMe(i){switch(i){case ut.WIN32_X64:return"Windows 64 bit";case ut.WIN32_ARM64:return"Windows ARM";case ut.LINUX_X64:return"Linux 64 bit";case ut.LINUX_ARM64:return"Linux ARM 64";case ut.LINUX_ARMHF:return"Linux ARM";case ut.ALPINE_X64:return"Alpine Linux 64 bit";case ut.ALPINE_ARM64:return"Alpine ARM 64";case ut.DARWIN_X64:return"Mac";case ut.DARWIN_ARM64:return"Mac Silicon";case ut.WEB:return"Web";case ut.UNIVERSAL:return ut.UNIVERSAL;case ut.UNKNOWN:return ut.UNKNOWN;case ut.UNDEFINED:return ut.UNDEFINED}}pm(lMe,"TargetPlatformToString");function cMe(i){switch(i){case ut.WIN32_X64:return ut.WIN32_X64;case ut.WIN32_ARM64:return ut.WIN32_ARM64;case ut.LINUX_X64:return ut.LINUX_X64;case ut.LINUX_ARM64:return ut.LINUX_ARM64;case ut.LINUX_ARMHF:return ut.LINUX_ARMHF;case ut.ALPINE_X64:return ut.ALPINE_X64;case ut.ALPINE_ARM64:return ut.ALPINE_ARM64;case ut.DARWIN_X64:return ut.DARWIN_X64;case ut.DARWIN_ARM64:return ut.DARWIN_ARM64;case ut.WEB:return ut.WEB;case ut.UNIVERSAL:return ut.UNIVERSAL;default:return ut.UNKNOWN}}pm(cMe,"toTargetPlatform");function gse(i,e){switch(i){case hw.Windows:return e==="x64"?ut.WIN32_X64:e==="arm64"?ut.WIN32_ARM64:ut.UNKNOWN;case hw.Linux:return e==="x64"?ut.LINUX_X64:e==="arm64"?ut.LINUX_ARM64:e==="arm"?ut.LINUX_ARMHF:ut.UNKNOWN;case"alpine":return e==="x64"?ut.ALPINE_X64:e==="arm64"?ut.ALPINE_ARM64:ut.UNKNOWN;case hw.Mac:return e==="x64"?ut.DARWIN_X64:e==="arm64"?ut.DARWIN_ARM64:ut.UNKNOWN;case hw.Web:return ut.WEB}}pm(gse,"getTargetPlatform");function fse(i,e){return e===ut.WEB&&!i.includes(ut.WEB)}pm(fse,"isNotWebExtensionInWebTargetPlatform");function dMe(i,e,t){return fse(e,t)?!1:i===ut.UNDEFINED||i===ut.UNIVERSAL?!0:i===ut.UNKNOWN?!1:i===t}pm(dMe,"isTargetPlatformCompatible");function hMe(i){return i&&typeof i=="object"&&typeof i.id=="string"&&(!i.uuid||typeof i.uuid=="string")}pm(hMe,"isIExtensionIdentifier");De("extensionGalleryService");class Q$e extends Error{constructor(e,t){super(e),this.code=t,this.name=t}static{pm(this,"ExtensionGalleryError")}}class J$e extends Error{constructor(e,t){super(e),this.code=t,this.name=t}static{pm(this,"ExtensionManagementError")}}De("extensionManagementService");De("IGlobalExtensionEnablementService");De("IExtensionTipsService");W("extensions","Extensions");W("preferences","Preferences");var uMe=Object.defineProperty,wC=(i,e)=>uMe(i,"name",{value:e,configurable:!0});function pse(i){if(ZW===hw.Linux&&/^penguin(\.|$)/i.test(i))return"chromebook"}wC(pse,"getPlatformDetail");function gMe(i,e,t,n,s,o,r,a,l,c){const d=Object.create(null);d["common.machineId"]=o,d["common.sqmId"]=r,d["common.devDeviceId"]=a,d.sessionID=Gp()+Date.now(),d.commitHash=n,d.version=s,d["common.platformVersion"]=(i||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),d["common.platform"]=SG(ZW),d["common.nodePlatform"]=AG,d["common.nodeArch"]=t,d["common.product"]=c||"desktop",l&&(d["common.msftInternal"]=l);let h=0;const u=Date.now();Object.defineProperties(d,{timestamp:{get:wC(()=>new Date,"get"),enumerable:!0},"common.timesincesessionstart":{get:wC(()=>Date.now()-u,"get"),enumerable:!0},"common.sequence":{get:wC(()=>h++,"get"),enumerable:!0}}),ihe&&(d["common.snap"]="true");const f=pse(e);return f&&(d["common.platformDetail"]=f),d}wC(gMe,"resolveCommonProperties");function mse(i){const e=s_.USERDNSDOMAIN;if(!e)return!1;const t=e.toLowerCase();return i.some(n=>t===n)}wC(mse,"verifyMicrosoftInternalDomain");var fMe=Object.defineProperty,ml=(i,e)=>fMe(i,"name",{value:e,configurable:!0});class FV{constructor(e){this.value=e}static{ml(this,"TelemetryTrustedValue")}isTrustedTelemetryValue=!0}class eGe{static{ml(this,"NullTelemetryServiceShape")}telemetryLevel=u_.NONE;sessionId="someValue.sessionId";machineId="someValue.machineId";sqmId="someValue.sqmId";devDeviceId="someValue.devDeviceId";firstSessionDate="someValue.firstSessionDate";sendErrorTelemetry=!1;publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}}class tGe{static{ml(this,"NullEndpointTelemetryService")}_serviceBrand;async publicLog(e,t,n){}async publicLogError(e,t,n){}}function pMe(i,e){return!e.isBuilt&&!e.disableTelemetry?!0:!(e.disableTelemetry||!i.enableTelemetry)}ml(pMe,"supportsTelemetry");function mMe(i,e){return e.extensionTestsLocationURI?!0:!(e.isBuilt||e.disableTelemetry||i.enableTelemetry&&i.aiConfig?.ariaKey)}ml(mMe,"isLoggingOnly");function _Me(i){const e=i.getValue(WEe),t=i.getValue(HEe);if(i.getValue(UEe)===!1||t===!1)return u_.NONE;switch(e??iw.ON){case iw.ON:return u_.USAGE;case iw.ERROR:return u_.ERROR;case iw.CRASH:return u_.CRASH;case iw.OFF:return u_.NONE}}ml(_Me,"getTelemetryLevel");function bMe(i){const e={},t={},n={};j7(i,n);for(let s in n){s=s.length>150?s.substr(s.length-149):s;const o=n[s];typeof o=="number"?t[s]=o:typeof o=="boolean"?t[s]=o?1:0:typeof o=="string"?(o.length>8192&&console.warn(`Telemetry property: ${s} has been trimmed to 8192, the original length is ${o.length}`),e[s]=o.substring(0,8191)):typeof o<"u"&&o!==null&&(e[s]=o)}return{properties:e,measurements:t}}ml(bMe,"validateTelemetryData");const vMe=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function wMe(i){if(!i)return"none";const e=pP(i);return vMe.has(e)?e:"other"}ml(wMe,"cleanRemoteAuthority");function j7(i,e,t=0,n){if(i)for(const s of Object.getOwnPropertyNames(i)){const o=i[s],r=n?n+s:s;Array.isArray(o)?e[r]=xB(o):o instanceof Date?e[r]=o.toISOString():On(o)?t<2?j7(o,e,t+1,r+"."):e[r]=xB(o):e[r]=o}}ml(j7,"flatten");function CMe(i,e){const t=i.msftInternalDomains||[],n=e.getValue("telemetry.internalTesting");return mse(t)||n}ml(CMe,"isInternalTelemetry");function yMe(i){return[i.appRoot,i.extensionsPath,i.userHome.fsPath,i.tmpDir.fsPath,i.userDataPath]}ml(yMe,"getPiiPathsFromEnvironment");function _se(i,e){if(!i||!i.includes("/")&&!i.includes("\\"))return i;let t=i;const n=[];for(const a of e)for(;;){const l=a.exec(i);if(!l)break;n.push([l.index,a.lastIndex])}const s=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,o=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let r=0;for(t="";;){const a=o.exec(i);if(!a)break;const l=n.some(([c,d])=>a.index<d&&c<o.lastIndex);!s.test(a[0])&&!l&&(t+=i.substring(r,a.index)+"<REDACTED: user-file-path>",r=o.lastIndex)}return r<i.length&&(t+=i.substr(r)),t}ml(_se,"anonymizeFilePaths");function bse(i){if(!i)return i;const e=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"CLI Credentials",regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:"Email",regex:/@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+/}];for(const t of e)if(t.regex.test(i))return`<REDACTED: ${t.label}>`;return i}ml(bse,"removePropertiesWithPossibleUserInfo");function SMe(i,e){return bH(i,t=>{if(t instanceof FV||Object.hasOwnProperty.call(t,"isTrustedTelemetryValue"))return t.value;if(typeof t=="string"){let n=t.replaceAll("%20"," ");n=_se(n,e);for(const s of e)n=n.replace(s,"");return n=bse(n),n}})}ml(SMe,"cleanData");var EMe=Object.defineProperty,hc=(i,e)=>EMe(i,"name",{value:e,configurable:!0});function iL(i,e){return i.uuid&&e.uuid?i.uuid===e.uuid:i.id===e.id?!0:MA(i.id,e.id)===0}hc(iL,"areSameExtensions");const LMe=/^([^.]+\..+)-(\d+\.\d+\.\d+)(-(.+))?$/;class aA{constructor(e,t,n=ut.UNDEFINED){this.identifier=e,this.version=t,this.targetPlatform=n,this.id=e.id}static{hc(this,"ExtensionKey")}static create(e){const t=e.manifest?e.manifest.version:e.version,n=e.manifest?e.targetPlatform:e.properties.targetPlatform;return new aA(e.identifier,t,n)}static parse(e){const t=LMe.exec(e);return t&&t[1]&&t[2]?new aA({id:t[1]},t[2],t[4]||void 0):null}id;toString(){return`${this.id}-${this.version}${this.targetPlatform!==ut.UNDEFINED?`-${this.targetPlatform}`:""}`}equals(e){return e instanceof aA?iL(this,e)&&this.version===e.version&&this.targetPlatform===e.targetPlatform:!1}}const DMe=/^([^.]+\..+)@((prerelease)|(\d+\.\d+\.\d+(-.*)?))$/;function IMe(i){const e=DMe.exec(i);return e&&e[1]?[Ck(e[1]),e[2]]:[Ck(i),void 0]}hc(IMe,"getIdAndVersion");function q7(i,e){return`${i}.${e}`}hc(q7,"getExtensionId");function Ck(i){return i.toLowerCase()}hc(Ck,"adoptToGalleryExtensionId");function vse(i,e){return Ck(q7(i??pye,e))}hc(vse,"getGalleryExtensionId");function TMe(i,e){const t=[],n=hc(s=>{for(const o of t)if(o.some(r=>iL(e(r),e(s))))return o;return null},"findGroup");for(const s of i){const o=n(s);o?o.push(s):t.push([s])}return t}hc(TMe,"groupByExtension");function AMe(i){return{id:i.identifier.id,name:i.manifest.name,galleryId:null,publisherId:i.publisherId,publisherName:i.manifest.publisher,publisherDisplayName:i.publisherDisplayName,dependencies:i.manifest.extensionDependencies&&i.manifest.extensionDependencies.length>0}}hc(AMe,"getLocalExtensionTelemetryData");function xMe(i){return{id:new FV(i.identifier.id),name:new FV(i.name),version:i.version,galleryId:i.identifier.uuid,publisherId:i.publisherId,publisherName:i.publisher,publisherDisplayName:i.publisherDisplayName,isPreReleaseVersion:i.properties.isPreReleaseVersion,dependencies:!!(i.properties.dependencies&&i.properties.dependencies.length>0),isSigned:i.isSigned,...i.telemetryData}}hc(xMe,"getGalleryExtensionTelemetryData");new Xa("pprice.better-merge");function kMe(i,e){const t=[],n=e.manifest.extensionDependencies?.slice(0)??[];for(;n.length;){const s=n.shift();if(s&&t.every(o=>!iL(o.identifier,{id:s}))){const o=i.filter(r=>iL(r.identifier,{id:s}));o.length===1&&(t.push(o[0]),n.push(...o[0].manifest.extensionDependencies?.slice(0)??[]))}}return t}hc(kMe,"getExtensionDependencies");async function wse(i,e){if(!Gi)return!1;let t;try{t=(await i.readFile(ne.file("/etc/os-release"))).value.toString()}catch{try{t=(await i.readFile(ne.file("/usr/lib/os-release"))).value.toString()}catch(s){e.debug("Error while getting the os-release file.",vN(s))}}return!!t&&(t.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]==="alpine"}hc(wse,"isAlpineLinux");async function NMe(i,e){const t=await wse(i,e),n=gse(t?"alpine":ZW,uhe);return e.debug("ComputeTargetPlatform:",n),n}hc(NMe,"computeTargetPlatform");var PMe=Object.defineProperty,RMe=(i,e)=>PMe(i,"name",{value:e,configurable:!0});class OMe{static{RMe(this,"ImplicitActivationEventsImpl")}_generators=new Map;_cache=new WeakMap;register(e,t){this._generators.set(e,t)}readActivationEvents(e){return this._cache.has(e)||this._cache.set(e,this._readActivationEvents(e)),this._cache.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const n of e){const s=this.readActivationEvents(n);s.length>0&&(t[Xa.toKey(n.identifier)]=s)}return t}_readActivationEvents(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let n=0;n<t.length;n++)t[n]==="onUri"&&(t[n]=`onUri:${Xa.toKey(e.identifier)}`);if(!e.contributes)return t;for(const n in e.contributes){const s=this._generators.get(n);if(!s)continue;const o=e.contributes[n],r=Array.isArray(o)?o:[o];try{s(r,t)}catch(a){Kt(a)}}return t}}const lA=new OMe,MMe={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts"},aiTextSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProviderNew.d.ts"},attributableCoverage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.attributableCoverage.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:2},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},chatVariableResolver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatVariableResolver.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribChatParticipantDetection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribChatParticipantDetection.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribIssueReporter:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribIssueReporter.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},createFileSystemWatcher:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.createFileSystemWatcher.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts"},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},documentPaste:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentPaste.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileComments:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileComments.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProviderNew.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts"},findFiles2New:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2New.d.ts"},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFilesNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFilesNew.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},lmTools:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.lmTools.d.ts",version:6},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookCellExecutionState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},showLocal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.showLocal.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textSearchCompleteNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchCompleteNew.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProviderNew.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},yk=Object.freeze(MMe);var BMe=Object.defineProperty,cz=(i,e)=>BMe(i,"name",{value:e,configurable:!0});De("IV8InspectProfilingService");var dz;(i=>{function e(n){return!!(n.samples&&n.timeDeltas)}i.isValidProfile=e,cz(e,"isValidProfile");function t(n,s="noAbsolutePaths"){for(const o of n.nodes)o.callFrame&&o.callFrame.url&&(SN(o.callFrame.url)||/^\w[\w\d+.-]*:\/\/\/?/.test(o.callFrame.url))&&(o.callFrame.url=yl(s,EN(o.callFrame.url)));return n}i.rewriteAbsolutePaths=t,cz(t,"rewriteAbsolutePaths")})(dz||(dz={}));var FMe=Object.defineProperty,xv=(i,e)=>FMe(i,"name",{value:e,configurable:!0}),bR=(i=>(i[i.LocalProcess=1]="LocalProcess",i[i.LocalWebWorker=2]="LocalWebWorker",i[i.Remote=3]="Remote",i))(bR||{});function VMe(i){if(i===null)return"None";switch(i){case 1:return"LocalProcess";case 2:return"LocalWebWorker";case 3:return"Remote"}}xv(VMe,"extensionHostKindToString");function WMe(i){switch(i){case 0:return"None";case 1:return"Local";case 2:return"Remote"}}xv(WMe,"extensionRunningPreferenceToString");function HMe(i,e,t,n){const s=VV(i,t),o=VV(e,t),r=new Map,a=xv(c=>{if(r.has(c.key))return;const d=s.get(c.key)||null,h=o.get(c.key)||null,u=new zMe(d,h);r.set(u.key,u)},"collectExtension");s.forEach(c=>a(c)),o.forEach(c=>a(c));const l=new Map;return r.forEach(c=>{const d=!!c.local,h=!!c.remote,u=!!(c.local&&c.local.isUnderDevelopment),f=!!(c.remote&&c.remote.isUnderDevelopment);let p=0;u&&!f?p=1:f&&!u&&(p=2),l.set(c.key,n(c.identifier,c.kind,d,h,p))}),l}xv(HMe,"determineExtensionHostKinds");function VV(i,e){const t=new Map;return i.forEach(n=>{const s=new UMe(n,e(n));t.set(s.key,s)}),t}xv(VV,"toExtensionWithKind");class UMe{constructor(e,t){this.desc=e,this.kind=t}static{xv(this,"ExtensionWithKind")}get key(){return Xa.toKey(this.desc.identifier)}get isUnderDevelopment(){return this.desc.isUnderDevelopment}}class zMe{constructor(e,t){this.local=e,this.remote=t}static{xv(this,"ExtensionInfo")}get key(){return this.local?this.local.key:this.remote.key}get identifier(){return this.local?this.local.desc.identifier:this.remote.desc.identifier}get kind(){return this.local?this.local.kind:this.remote.kind}}var $Me=Object.defineProperty,Cse=(i,e)=>$Me(i,"name",{value:e,configurable:!0});function GMe(i){const e=mt.alloc(1);switch(i){case 0:e.writeUInt8(1,0);break;case 1:e.writeUInt8(2,0);break;case 2:e.writeUInt8(3,0);break}return e}Cse(GMe,"createMessageOfType");function KMe(i,e){if(i.byteLength!==1)return!1;switch(i.readUInt8(0)){case 1:return e===0;case 2:return e===1;case 3:return e===2;default:return!1}}Cse(KMe,"isMessageOfType");var jMe=Object.defineProperty,Y7=(i,e)=>jMe(i,"name",{value:e,configurable:!0});class iGe{constructor(e){this.affinity=e}static{Y7(this,"LocalProcessRunningLocation")}kind=bR.LocalProcess;equals(e){return this.kind===e.kind&&this.affinity===e.affinity}asString(){return this.affinity===0?"LocalProcess":`LocalProcess${this.affinity}`}}class nGe{constructor(e){this.affinity=e}static{Y7(this,"LocalWebWorkerRunningLocation")}kind=bR.LocalWebWorker;equals(e){return this.kind===e.kind&&this.affinity===e.affinity}asString(){return this.affinity===0?"LocalWebWorker":`LocalWebWorker${this.affinity}`}}class sGe{static{Y7(this,"RemoteRunningLocation")}kind=bR.Remote;affinity=0;equals(e){return this.kind===e.kind}asString(){return"Remote"}}var qMe=Object.defineProperty,nL=(i,e)=>qMe(i,"name",{value:e,configurable:!0});const Z7=Xt.as(PL.JSONContribution);class oGe{static{nL(this,"ExtensionMessageCollector")}_messageHandler;_extension;_extensionPointId;constructor(e,t,n){this._messageHandler=e,this._extension=t,this._extensionPointId=n}_msg(e,t){this._messageHandler({type:e,message:t,extensionId:this._extension.identifier,extensionPointId:this._extensionPointId})}error(e){this._msg(So.Error,e)}warn(e){this._msg(So.Warning,e)}info(e){this._msg(So.Info,e)}}class m0{constructor(e,t){this.added=e,this.removed=t}static{nL(this,"ExtensionPointUserDelta")}static _toSet(e){const t=new p1;for(let n=0,s=e.length;n<s;n++)t.add(e[n].description.identifier);return t}static compute(e,t){if(!e||!e.length)return new m0(t,[]);if(!t||!t.length)return new m0([],e);const n=this._toSet(e),s=this._toSet(t),o=t.filter(a=>!n.has(a.description.identifier)),r=e.filter(a=>!s.has(a.description.identifier));return new m0(o,r)}}class YMe{static{nL(this,"ExtensionPoint")}name;defaultExtensionKind;_handler;_users;_delta;constructor(e,t){this.name=e,this.defaultExtensionKind=t,this._handler=null,this._users=null,this._delta=null}setHandler(e){if(this._handler!==null)throw new Error("Handler already set!");return this._handler=e,this._handle(),{dispose:nL(()=>{this._handler=null},"dispose")}}acceptUsers(e){this._delta=m0.compute(this._users,e),this._users=e,this._handle()}_handle(){if(!(this._handler===null||this._users===null||this._delta===null))try{this._handler(this._users,this._delta)}catch(e){Kt(e)}}}const ZMe={type:"string",enum:["ui","workspace"],enumDescriptions:[g("ui","UI extension kind. In a remote window, such extensions are enabled only when available on the local machine."),g("workspace","Workspace extension kind. In a remote window, such extensions are enabled only when available on the remote.")]},yse="vscode://schemas/vscode-extensions",WV={properties:{engines:{type:"object",description:g("vscode.extension.engines","Engine compatibility."),properties:{vscode:{type:"string",description:g("vscode.extension.engines.vscode","For VS Code extensions, specifies the VS Code version that the extension is compatible with. Cannot be *. For example: ^0.10.5 indicates compatibility with a minimum VS Code version of 0.10.5."),default:"^1.22.0"}}},publisher:{description:g("vscode.extension.publisher","The publisher of the VS Code extension."),type:"string"},displayName:{description:g("vscode.extension.displayName","The display name for the extension used in the VS Code gallery."),type:"string"},categories:{description:g("vscode.extension.categories","The categories used by the VS Code gallery to categorize the extension."),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:_ye},{type:"string",const:"Languages",deprecationMessage:g("vscode.extension.category.languages.deprecated","Use 'Programming  Languages' instead")}]}},galleryBanner:{type:"object",description:g("vscode.extension.galleryBanner","Banner used in the VS Code marketplace."),properties:{color:{description:g("vscode.extension.galleryBanner.color","The banner color on the VS Code marketplace page header."),type:"string"},theme:{description:g("vscode.extension.galleryBanner.theme","The color theme for the font used in the banner."),type:"string",enum:["dark","light"]}}},contributes:{description:g("vscode.extension.contributes","All contributions of the VS Code extension represented by this package."),type:"object",properties:{},default:{}},preview:{type:"boolean",description:g("vscode.extension.preview","Sets the extension to be flagged as a Preview in the Marketplace.")},enableProposedApi:{type:"boolean",deprecationMessage:g("vscode.extension.enableProposedApi.deprecated","Use `enabledApiProposals` instead.")},enabledApiProposals:{markdownDescription:g("vscode.extension.enabledApiProposals","Enable API proposals to try them out. Only valid **during development**. Extensions **cannot be published** with this property. For more details visit: https://code.visualstudio.com/api/advanced-topics/using-proposed-api"),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(yk).map(i=>i),markdownEnumDescriptions:Object.values(yk).map(i=>i.proposal)}},api:{markdownDescription:g("vscode.extension.api","Describe the API provided by this extension. For more details visit: https://code.visualstudio.com/api/advanced-topics/remote-extensions#handling-dependencies-with-remote-extensions"),type:"string",enum:["none"],enumDescriptions:[g("vscode.extension.api.none","Give up entirely the ability to export any APIs. This allows other extensions that depend on this extension to run in a separate extension host process or in a remote machine.")]},activationEvents:{description:g("vscode.extension.activationEvents","Activation events for the VS Code extension."),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:g("vscode.extension.activationEvents.onWebviewPanel","An activation event emmited when a webview is loaded of a certain viewType"),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:g("vscode.extension.activationEvents.onLanguage","An activation event emitted whenever a file that resolves to the specified language gets opened."),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:g("vscode.extension.activationEvents.onCommand","An activation event emitted whenever the specified command gets invoked."),body:"onCommand:${2:commandId}"},{label:"onDebug",description:g("vscode.extension.activationEvents.onDebug","An activation event emitted whenever a user is about to start debugging or about to setup debug configurations."),body:"onDebug"},{label:"onDebugInitialConfigurations",description:g("vscode.extension.activationEvents.onDebugInitialConfigurations",'An activation event emitted whenever a "launch.json" needs to be created (and all provideDebugConfigurations methods need to be called).'),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:g("vscode.extension.activationEvents.onDebugDynamicConfigurations",'An activation event emitted whenever a list of all debug configurations needs to be created (and all provideDebugConfigurations methods for the "dynamic" scope need to be called).'),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:g("vscode.extension.activationEvents.onDebugResolve","An activation event emitted whenever a debug session with the specific type is about to be launched (and a corresponding resolveDebugConfiguration method needs to be called)."),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:g("vscode.extension.activationEvents.onDebugAdapterProtocolTracker","An activation event emitted whenever a debug session with the specific type is about to be launched and a debug protocol tracker might be needed."),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:g("vscode.extension.activationEvents.workspaceContains","An activation event emitted whenever a folder is opened that contains at least a file matching the specified glob pattern."),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:g("vscode.extension.activationEvents.onStartupFinished","An activation event emitted after the start-up finished (after all `*` activated extensions have finished activating)."),body:"onStartupFinished"},{label:"onTaskType",description:g("vscode.extension.activationEvents.onTaskType","An activation event emitted whenever tasks of a certain type need to be listed or resolved."),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:g("vscode.extension.activationEvents.onFileSystem","An activation event emitted whenever a file or folder is accessed with the given scheme."),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:g("vscode.extension.activationEvents.onEditSession","An activation event emitted whenever an edit session is accessed with the given scheme."),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:g("vscode.extension.activationEvents.onSearch","An activation event emitted whenever a search is started in the folder with the given scheme."),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:g("vscode.extension.activationEvents.onView","An activation event emitted whenever the specified view is expanded.")},{label:"onUri",body:"onUri",description:g("vscode.extension.activationEvents.onUri","An activation event emitted whenever a system-wide Uri directed towards this extension is open.")},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:g("vscode.extension.activationEvents.onOpenExternalUri","An activation event emitted whenever a external uri (such as an http or https link) is being opened.")},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:g("vscode.extension.activationEvents.onCustomEditor","An activation event emitted whenever the specified custom editor becomes visible.")},{label:"onNotebook",body:"onNotebook:${1:type}",description:g("vscode.extension.activationEvents.onNotebook","An activation event emitted whenever the specified notebook document is opened.")},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:g("vscode.extension.activationEvents.onAuthenticationRequest","An activation event emitted whenever sessions are requested from the specified authentication provider.")},{label:"onRenderer",description:g("vscode.extension.activationEvents.onRenderer","An activation event emitted whenever a notebook output renderer is used."),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:g("vscode.extension.activationEvents.onTerminalProfile","An activation event emitted when a specific terminal profile is launched.")},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:g("vscode.extension.activationEvents.onTerminalQuickFixRequest","An activation event emitted when a command matches the selector associated with this ID")},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:g("vscode.extension.activationEvents.onWalkthrough","An activation event emitted when a specified walkthrough is opened.")},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:g("vscode.extension.activationEvents.onIssueReporterOpened","An activation event emitted when the issue reporter is opened.")},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:g("vscode.extension.activationEvents.onChatParticipant","An activation event emitted when the specified chat participant is invoked.")},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:g("vscode.extension.activationEvents.onLanguageModelTool","An activation event emitted when the specified language model tool is invoked.")},{label:"*",description:g("vscode.extension.activationEvents.star","An activation event emitted on VS Code startup. To ensure a great end user experience, please use this activation event in your extension only when no other activation events combination works in your use-case."),body:"*"}]}},badges:{type:"array",description:g("vscode.extension.badges","Array of badges to display in the sidebar of the Marketplace's extension page."),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:g("vscode.extension.badges.url","Badge image URL.")},href:{type:"string",description:g("vscode.extension.badges.href","Badge link.")},description:{type:"string",description:g("vscode.extension.badges.description","Badge description.")}}}},markdown:{type:"string",description:g("vscode.extension.markdown","Controls the Markdown rendering engine used in the Marketplace. Either github (default) or standard."),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:g("vscode.extension.qna","Controls the Q&A link in the Marketplace. Set to marketplace to enable the default Marketplace Q & A site. Set to a string to provide the URL of a custom Q & A site. Set to false to disable Q & A altogether."),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:g("vscode.extension.extensionDependencies","Dependencies to other extensions. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:lz}},extensionPack:{description:g("vscode.extension.contributes.extensionPack","A set of extensions that can be installed together. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:lz}},extensionKind:{description:g("extensionKind","Define the kind of an extension. `ui` extensions are installed and run on the local machine while `workspace` extensions run on the remote."),type:"array",items:ZMe,default:["workspace"],defaultSnippets:[{body:["ui"],description:g("extensionKind.ui","Define an extension which can run only on the local machine when connected to remote window.")},{body:["workspace"],description:g("extensionKind.workspace","Define an extension which can run only on the remote machine when connected remote window.")},{body:["ui","workspace"],description:g("extensionKind.ui-workspace","Define an extension which can run on either side, with a preference towards running on the local machine.")},{body:["workspace","ui"],description:g("extensionKind.workspace-ui","Define an extension which can run on either side, with a preference towards running on the remote machine.")},{body:[],description:g("extensionKind.empty","Define an extension which cannot run in a remote context, neither on the local, nor on the remote machine.")}]},capabilities:{description:g("vscode.extension.capabilities","Declare the set of supported capabilities by the extension."),type:"object",properties:{virtualWorkspaces:{description:g("vscode.extension.capabilities.virtualWorkspaces","Declares whether the extension should be enabled in virtual workspaces. A virtual workspace is a workspace which is not backed by any on-disk resources. When false, this extension will be automatically disabled in virtual workspaces. Default is true."),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:g("vscode.extension.capabilities.virtualWorkspaces.supported","Declares the level of support for virtual workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[g("vscode.extension.capabilities.virtualWorkspaces.supported.limited","The extension will be enabled in virtual workspaces with some functionality disabled."),g("vscode.extension.capabilities.virtualWorkspaces.supported.true","The extension will be enabled in virtual workspaces with all functionality enabled."),g("vscode.extension.capabilities.virtualWorkspaces.supported.false","The extension will not be enabled in virtual workspaces.")]},description:{type:"string",markdownDescription:g("vscode.extension.capabilities.virtualWorkspaces.description","A description of how virtual workspaces affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}},untrustedWorkspaces:{description:g("vscode.extension.capabilities.untrustedWorkspaces","Declares how the extension should be handled in untrusted workspaces."),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:g("vscode.extension.capabilities.untrustedWorkspaces.supported","Declares the level of support for untrusted workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[g("vscode.extension.capabilities.untrustedWorkspaces.supported.limited","The extension will be enabled in untrusted workspaces with some functionality disabled."),g("vscode.extension.capabilities.untrustedWorkspaces.supported.true","The extension will be enabled in untrusted workspaces with all functionality enabled."),g("vscode.extension.capabilities.untrustedWorkspaces.supported.false","The extension will not be enabled in untrusted workspaces.")]},restrictedConfigurations:{description:g("vscode.extension.capabilities.untrustedWorkspaces.restrictedConfigurations","A list of configuration keys contributed by the extension that should not use workspace values in untrusted workspaces."),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:g("vscode.extension.capabilities.untrustedWorkspaces.description","A description of how workspace trust affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}}}},sponsor:{description:g("vscode.extension.contributes.sponsor","Specify the location from where users can sponsor your extension."),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:g("vscode.extension.contributes.sponsor.url","URL from where users can sponsor your extension. It must be a valid URL with a HTTP or HTTPS protocol. Example value: https://github.com/sponsors/nvaccess"),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:g("vscode.extension.scripts.prepublish","Script executed before the package is published as a VS Code extension."),type:"string"},"vscode:uninstall":{description:g("vscode.extension.scripts.uninstall","Uninstall hook for VS Code extension. Script that gets executed when the extension is completely uninstalled from VS Code which is when VS Code is restarted (shutdown and start) after the extension is uninstalled. Only Node scripts are supported."),type:"string"}}},icon:{type:"string",description:g("vscode.extension.icon","The path to a 128x128 pixel icon.")},l10n:{type:"string",description:g({key:"vscode.extension.l10n",comment:['{Locked="bundle.l10n._locale_.json"}','{Locked="vscode.l10n API"}']},"The relative path to a folder containing localization (bundle.l10n.*.json) files. Must be specified if you are using the vscode.l10n API.")},pricing:{type:"string",markdownDescription:g("vscode.extension.pricing","The pricing information for the extension. Can be Free (default) or Trial. For more details visit: https://code.visualstudio.com/api/working-with-extensions/publishing-extension#extension-pricing-label"),enum:["Free","Trial"],default:"Free"}}};class XMe{static{nL(this,"ExtensionsRegistryImpl")}_extensionPoints=new Map;registerExtensionPoint(e){if(this._extensionPoints.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new YMe(e.extensionPoint,e.defaultExtensionKind);return this._extensionPoints.set(e.extensionPoint,t),e.activationEventsGenerator&&lA.register(e.extensionPoint,e.activationEventsGenerator),WV.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,Z7.registerSchema(yse,WV),t}getExtensionPoints(){return Array.from(this._extensionPoints.values())}}const Sse={ExtensionsRegistry:"ExtensionsRegistry"};Xt.add(Sse.ExtensionsRegistry,new XMe);Xt.as(Sse.ExtensionsRegistry);Z7.registerSchema(yse,WV);Z7.registerSchema(KEe,{properties:{extensionEnabledApiProposals:{description:g("product.extensionEnabledApiProposals","API proposals that the respective extensions can freely use."),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(yk),markdownEnumDescriptions:Object.values(yk).map(i=>i.proposal)}}]}}}});var QMe=Object.defineProperty,sh=(i,e)=>QMe(i,"name",{value:e,configurable:!0});Object.freeze({identifier:new Xa("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:ne.parse("void:location"),isBuiltin:!1,targetPlatform:ut.UNDEFINED,isUserBuiltin:!1,isUnderDevelopment:!1});const nd=De("extensionService");class rGe{constructor(e){this.dependency=e}static{sh(this,"MissingExtensionDependency")}}class aGe{static{sh(this,"ExtensionHostExtensions")}_versionId;_allExtensions;_myExtensions;_myActivationEvents;get versionId(){return this._versionId}get allExtensions(){return this._allExtensions}get myExtensions(){return this._myExtensions}constructor(e,t,n){this._versionId=e,this._allExtensions=t.slice(0),this._myExtensions=n.slice(0),this._myActivationEvents=null}toSnapshot(){return{versionId:this._versionId,allExtensions:this._allExtensions,myExtensions:this._myExtensions,activationEvents:lA.createActivationEventsMap(this._allExtensions)}}set(e,t,n){if(this._versionId>e)throw new Error(`ExtensionHostExtensions: invalid versionId ${e} (current: ${this._versionId})`);const s=[],o=[],r=[],a=[],l=HV(this._allExtensions),c=HV(t),d=sh((m,_)=>m.extensionLocation.toString()===_.extensionLocation.toString()||m.isBuiltin===_.isBuiltin||m.isUserBuiltin===_.isUserBuiltin||m.isUnderDevelopment===_.isUnderDevelopment,"extensionsAreTheSame");for(const m of this._allExtensions){const _=c.get(m.identifier);if(!_){s.push(m.identifier),l.delete(m.identifier);continue}if(!d(m,_)){s.push(m.identifier),l.delete(m.identifier);continue}}for(const m of t){const _=l.get(m.identifier);if(!_){o.push(m);continue}if(!d(_,m)){s.push(_.identifier),l.delete(_.identifier);continue}}const h=new p1(this._myExtensions),u=new p1(n);for(const m of this._myExtensions)u.has(m)||r.push(m);for(const m of n)h.has(m)||a.push(m);const f=lA.createActivationEventsMap(o),p={versionId:e,toRemove:s,toAdd:o,addActivationEvents:f,myToRemove:r,myToAdd:a};return this.delta(p),p}delta(e){if(this._versionId>=e.versionId)return null;const{toRemove:t,toAdd:n,myToRemove:s,myToAdd:o}=e,r=new p1(t),a=new p1(s);for(let l=0;l<this._allExtensions.length;l++)r.has(this._allExtensions[l].identifier)&&(this._allExtensions.splice(l,1),l--);for(let l=0;l<this._myExtensions.length;l++)a.has(this._myExtensions[l])&&(this._myExtensions.splice(l,1),l--);for(const l of n)this._allExtensions.push(l);for(const l of o)this._myExtensions.push(l);return this._myActivationEvents=null,e}containsExtension(e){for(const t of this._myExtensions)if(Xa.equals(t,e))return!0;return!1}containsActivationEvent(e){return this._myActivationEvents||(this._myActivationEvents=this._readMyActivationEvents()),this._myActivationEvents.has(e)}_readMyActivationEvents(){const e=new Set;for(const t of this._allExtensions){if(!this.containsExtension(t.identifier))continue;const n=lA.readActivationEvents(t);for(const s of n)e.add(s)}return e}}function HV(i){const e=new bye;for(const t of i)e.set(t.identifier,t);return e}sh(HV,"extensionDescriptionArrayToMap");function Ese(i,e){return i.enabledApiProposals?i.enabledApiProposals.includes(e):!1}sh(Ese,"isProposedApiEnabled");function JMe(i,e){if(!Ese(i,e))throw new Error(`Extension '${i.identifier.value}' CANNOT use API proposal: ${e}.
Its package.json#enabledApiProposals-property declares: ${i.enabledApiProposals?.join(", ")??"[]"} but NOT ${e}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${i.identifier.value}`)}sh(JMe,"checkProposedApiEnabled");class lGe{constructor(e,t,n,s){this.codeLoadingTime=e,this.activateCallTime=t,this.activateResolvedTime=n,this.activationReason=s}static{sh(this,"ActivationTimes")}}class cGe{static{sh(this,"ExtensionPointContribution")}description;value;constructor(e,t){this.description=e,this.value=t}}var UV=(i=>(i[i.Normal=0]="Normal",i[i.Immediate=1]="Immediate",i))(UV||{});function eBe(i){return{type:i.isBuiltin?fE.System:fE.User,isBuiltin:i.isBuiltin||i.isUserBuiltin,identifier:{id:vse(i.publisher,i.name),uuid:i.uuid},manifest:i,location:i.extensionLocation,targetPlatform:i.targetPlatform,validations:[],isValid:!0}}sh(eBe,"toExtension");function tBe(i,e){const t=q7(i.manifest.publisher,i.manifest.name);return{id:t,identifier:new Xa(t),isBuiltin:i.type===fE.System,isUserBuiltin:i.type===fE.User&&i.isBuiltin,isUnderDevelopment:!!e,extensionLocation:i.location,uuid:i.identifier.uuid,targetPlatform:i.targetPlatform,publisherDisplayName:i.publisherDisplayName,...i.manifest}}sh(tBe,"toExtensionDescription");class dGe{static{sh(this,"NullExtensionService")}onDidRegisterExtensions=H.None;onDidChangeExtensionsStatus=H.None;onDidChangeExtensions=H.None;onWillActivateByEvent=H.None;onDidChangeResponsiveChange=H.None;onWillStop=H.None;extensions=[];activateByEvent(e){return Promise.resolve(void 0)}activateById(e,t){return Promise.resolve(void 0)}activationEventIsDone(e){return!1}whenInstalledExtensionsRegistered(){return Promise.resolve(!0)}getExtension(){return Promise.resolve(void 0)}readExtensionPointContributions(e){return Promise.resolve(Object.create(null))}getExtensionsStatus(){return Object.create(null)}getInspectPorts(e,t){return Promise.resolve([])}stopExtensionHosts(){}async startExtensionHosts(){}async setRemoteEnvironment(e){}canAddExtension(){return!1}canRemoveExtension(){return!1}}var Lse=Object.defineProperty,iBe=Object.getOwnPropertyDescriptor,nBe=(i,e)=>Lse(i,"name",{value:e,configurable:!0}),sBe=(i,e,t,n)=>{for(var s=n>1?void 0:n?iBe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Lse(e,t,s),s},Lh=(i,e)=>(t,n)=>e(t,n,i);let hz=class extends $V{static{nBe(this,"FilterViewPaneContainer")}constantViewDescriptors=new Map;allViews=new Map;filterValue;constructor(i,e,t,n,s,o,r,a,l,c,d,h){super(i,{mergeViewWithContainerWhenSingleView:!1},r,t,n,l,s,c,a,o,d,h),this._register(e(u=>{this.filterValue=u,this.onFilterChanged(u)})),this._register(this.viewContainerModel.onDidChangeActiveViewDescriptors(()=>{this.updateAllViews(this.viewContainerModel.activeViewDescriptors)}))}updateAllViews(i){i.forEach(e=>{const t=this.getFilterOn(e);t&&(this.allViews.has(t)||this.allViews.set(t,new Map),this.allViews.get(t).set(e.id,e),this.filterValue&&!this.filterValue.includes(t)&&this.panes.find(n=>n.id===e.id)&&this.viewContainerModel.setVisible(e.id,!1))})}addConstantViewDescriptors(i){i.forEach(e=>this.constantViewDescriptors.set(e.id,e))}onFilterChanged(i){this.allViews.size===0&&this.updateAllViews(this.viewContainerModel.activeViewDescriptors),this.getViewsNotForTarget(i).forEach(e=>this.viewContainerModel.setVisible(e.id,!1)),this.getViewsForTarget(i).forEach(e=>this.viewContainerModel.setVisible(e.id,!0))}getViewsForTarget(i){const e=[];for(let t=0;t<i.length;t++)this.allViews.has(i[t])&&e.push(...Array.from(this.allViews.get(i[t]).values()));return e}getViewsNotForTarget(i){const e=this.allViews.keys();let t=e.next(),n=[];for(;!t.done;){let s=!1;i.forEach(o=>{t.value===o&&(s=!0)}),s||(n=n.concat(this.getViewsForTarget([t.value]))),t=e.next()}return n}onDidAddViewDescriptors(i){const e=super.onDidAddViewDescriptors(i);for(let t=0;t<i.length;t++)this.constantViewDescriptors.has(i[t].viewDescriptor.id)&&e[t].setExpanded(!1);return this.allViews.size===0&&this.updateAllViews(this.viewContainerModel.activeViewDescriptors),e}openView(i,e){const t=super.openView(i,e);if(t){const n=Array.from(this.allViews.entries()).find(s=>s[1].has(i));n&&!this.filterValue?.includes(n[0])&&this.setFilter(n[1].get(i))}return t}};hz=sBe([Lh(2,Pe),Lh(3,yt),Lh(4,rs),Lh(5,Si),Lh(6,He),Lh(7,$t),Lh(8,Hi),Lh(9,nd),Lh(10,po),Lh(11,Ro)],hz);var Dse=Object.defineProperty,oBe=Object.getOwnPropertyDescriptor,Nn=(i,e)=>Dse(i,"name",{value:e,configurable:!0}),Ise=(i,e,t,n)=>{for(var s=n>1?void 0:n?oBe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Dse(e,t,s),s},wl=(i,e)=>(t,n)=>e(t,n,i);const X7=new N("Views");xt.appendMenuItem(N.ViewContainerTitle,{submenu:X7,title:g("views","Views"),order:1});class Tw extends Ky{constructor(e,t,n,s,o){super(o),this.paneElement=e,this.orientation=t,this.bounds=n,this.location=s,this.cleanupOverlayScheduler=this._register(new xn(()=>this.dispose(),300)),this.create()}static{Nn(this,"ViewPaneDropOverlay")}static OVERLAY_ID="monaco-pane-drop-overlay";container;overlay;_currentDropOperation;_disposed;cleanupOverlayScheduler;get currentDropOperation(){return this._currentDropOperation}get disposed(){return!!this._disposed}create(){this.container=document.createElement("div"),this.container.id=Tw.OVERLAY_ID,this.container.style.top="0px",this.paneElement.appendChild(this.container),this.paneElement.classList.add("dragged-over"),this._register(ye(()=>{this.container.remove(),this.paneElement.classList.remove("dragged-over")})),this.overlay=document.createElement("div"),this.overlay.classList.add("pane-overlay-indicator"),this.container.appendChild(this.overlay),this.registerListeners(),this.updateStyles()}updateStyles(){this.overlay.style.backgroundColor=this.getColor(this.location===Te.Panel?T5:qN)||"";const e=this.getColor(Vi);this.overlay.style.outlineColor=e||"",this.overlay.style.outlineOffset=e?"-2px":"",this.overlay.style.outlineStyle=e?"dashed":"",this.overlay.style.outlineWidth=e?"2px":"",this.overlay.style.borderColor=e||"",this.overlay.style.borderStyle="solid",this.overlay.style.borderWidth="0px"}registerListeners(){this._register(new Rb(this.container,{onDragOver:Nn(e=>{this.positionOverlay(e.offsetX,e.offsetY),this.cleanupOverlayScheduler.isScheduled()&&this.cleanupOverlayScheduler.cancel()},"onDragOver"),onDragLeave:Nn(e=>this.dispose(),"onDragLeave"),onDragEnd:Nn(e=>this.dispose(),"onDragEnd"),onDrop:Nn(e=>{this.dispose()},"onDrop")})),this._register(F(this.container,Q.MOUSE_OVER,()=>{this.cleanupOverlayScheduler.isScheduled()||this.cleanupOverlayScheduler.schedule()}))}positionOverlay(e,t){const n=this.paneElement.clientWidth,s=this.paneElement.clientHeight,o=n/2,r=s/2;let a;switch(this.orientation===ke.VERTICAL?t<r?a=0:t>=r&&(a=1):this.orientation===ke.HORIZONTAL&&(e<o?a=2:e>=o&&(a=3)),a){case 0:this.doPositionOverlay({top:"0",left:"0",width:"100%",height:"50%"});break;case 1:this.doPositionOverlay({bottom:"0",left:"0",width:"100%",height:"50%"});break;case 2:this.doPositionOverlay({top:"0",left:"0",width:"50%",height:"100%"});break;case 3:this.doPositionOverlay({top:"0",right:"0",width:"50%",height:"100%"});break;default:{let l="0",c="0",d="100%",h="100%";if(this.bounds){const u=this.container.getBoundingClientRect();l=`${this.bounds.top-u.top}px`,c=`${this.bounds.left-u.left}px`,h=`${this.bounds.bottom-this.bounds.top}px`,d=`${this.bounds.right-this.bounds.left}px`}this.doPositionOverlay({top:l,left:c,width:d,height:h})}}this.orientation===ke.VERTICAL&&s<=25||this.orientation===ke.HORIZONTAL&&n<=25?this.doUpdateOverlayBorder(a):this.doUpdateOverlayBorder(void 0),this.overlay.style.opacity="1",setTimeout(()=>this.overlay.classList.add("overlay-move-transition"),0),this._currentDropOperation=a}doUpdateOverlayBorder(e){this.overlay.style.borderTopWidth=e===0?"2px":"0px",this.overlay.style.borderLeftWidth=e===2?"2px":"0px",this.overlay.style.borderBottomWidth=e===1?"2px":"0px",this.overlay.style.borderRightWidth=e===3?"2px":"0px"}doPositionOverlay(e){this.container.style.height="100%",this.overlay.style.top=e.top||"",this.overlay.style.left=e.left||"",this.overlay.style.bottom=e.bottom||"",this.overlay.style.right=e.right||"",this.overlay.style.width=e.width,this.overlay.style.height=e.height}contains(e){return e===this.container||e===this.overlay}dispose(){super.dispose(),this._disposed=!0}}let zV=class extends my{static{Nn(this,"ViewContainerMenuActions")}constructor(i,e,t,n,s){const o=n.createScoped(i);o.createKey("viewContainer",e.id);const r=o.createKey("viewContainerLocation",Sr(t.getViewContainerLocation(e)));super(N.ViewContainerTitle,N.ViewContainerTitleContext,{shouldForwardArgs:!0,renderShortTitle:!0},o,s),this._register(o),this._register(H.filter(t.onDidChangeContainerLocation,a=>a.viewContainer===e)(()=>r.set(Sr(t.getViewContainerLocation(e)))))}};zV=Ise([wl(2,Ro),wl(3,Ye),wl(4,No)],zV);let $V=class extends VP{constructor(i,e,t,n,s,o,r,a,l,c,d,h){super(i,l,c),this.options=e,this.instantiationService=t,this.configurationService=n,this.layoutService=s,this.contextMenuService=o,this.telemetryService=r,this.extensionService=a,this.storageService=c,this.contextService=d,this.viewDescriptorService=h;const u=this.viewDescriptorService.getViewContainerById(i);if(!u)throw new Error("Could not find container");this.viewContainer=u,this.visibleViewsStorageId=`${i}.numberOfVisibleViews`,this.visibleViewsCountFromCache=this.storageService.getNumber(this.visibleViewsStorageId,Be.WORKSPACE,void 0),this.viewContainerModel=this.viewDescriptorService.getViewContainerModel(u)}static{Nn(this,"ViewPaneContainer")}viewContainer;lastFocusedPane;lastMergedCollapsedPane;paneItems=[];paneview;visible=!1;areExtensionsReady=!1;didLayout=!1;dimension;_boundarySashes;visibleViewsCountFromCache;visibleViewsStorageId;viewContainerModel;_onTitleAreaUpdate=this._register(new x);onTitleAreaUpdate=this._onTitleAreaUpdate.event;_onDidChangeVisibility=this._register(new x);onDidChangeVisibility=this._onDidChangeVisibility.event;_onDidAddViews=this._register(new x);onDidAddViews=this._onDidAddViews.event;_onDidRemoveViews=this._register(new x);onDidRemoveViews=this._onDidRemoveViews.event;_onDidChangeViewVisibility=this._register(new x);onDidChangeViewVisibility=this._onDidChangeViewVisibility.event;_onDidFocusView=this._register(new x);onDidFocusView=this._onDidFocusView.event;_onDidBlurView=this._register(new x);onDidBlurView=this._onDidBlurView.event;get onDidSashChange(){return pt(this.paneview).onDidSashChange}get panes(){return this.paneItems.map(i=>i.pane)}get views(){return this.panes}get length(){return this.paneItems.length}_menuActions;get menuActions(){return this._menuActions}create(i){const e=this.options;e.orientation=this.orientation,this.paneview=this._register(new ORe(i,this.options)),this._boundarySashes&&this.paneview.setBoundarySashes(this._boundarySashes),this._register(this.paneview.onDidDrop(({from:a,to:l})=>this.movePane(a,l))),this._register(this.paneview.onDidScroll(a=>this.onDidScrollPane())),this._register(this.paneview.onDidSashReset(a=>this.onDidSashReset(a))),this._register(F(i,Q.CONTEXT_MENU,a=>this.showContextMenu(new $n(ve(i),a)))),this._register(Gn.addTarget(i)),this._register(F(i,wt.Contextmenu,a=>this.showContextMenu(new $n(ve(i),a)))),this._menuActions=this._register(this.instantiationService.createInstance(zV,this.paneview.element,this.viewContainer)),this._register(this._menuActions.onDidChange(()=>this.updateTitleArea()));let t;const n=Nn(()=>{const a=i.getBoundingClientRect(),l=this.panes[this.panes.length-1].element.getBoundingClientRect(),c=this.orientation===ke.VERTICAL?l.bottom:a.top,d=this.orientation===ke.HORIZONTAL?l.right:a.left;return{top:c,bottom:a.bottom,left:d,right:a.right}},"getOverlayBounds"),s=Nn((a,l)=>l.x>=a.left&&l.x<=a.right&&l.y>=a.top&&l.y<=a.bottom,"inBounds");let o;this._register(Ol.INSTANCE.registerTarget(i,{onDragEnter:Nn(a=>{if(o=n(),t&&t.disposed&&(t=void 0),!t&&s(o,a.eventData)){const l=a.dragAndDropData.getData();if(l.type==="view"){const c=this.viewDescriptorService.getViewContainerByViewId(l.id),d=this.viewDescriptorService.getViewDescriptorById(l.id);if(c!==this.viewContainer&&(!d||!d.canMoveView||this.viewContainer.rejectAddedViews))return;t=new Tw(i,void 0,o,this.viewDescriptorService.getViewContainerLocation(this.viewContainer),this.themeService)}if(l.type==="composite"&&l.id!==this.viewContainer.id){const c=this.viewDescriptorService.getViewContainerById(l.id),d=this.viewDescriptorService.getViewContainerModel(c).allViewDescriptors;!d.some(h=>!h.canMoveView)&&d.length>0&&(t=new Tw(i,void 0,o,this.viewDescriptorService.getViewContainerLocation(this.viewContainer),this.themeService))}}},"onDragEnter"),onDragOver:Nn(a=>{t&&t.disposed&&(t=void 0),t&&!s(o,a.eventData)&&(t.dispose(),t=void 0),s(o,a.eventData)&&_y(a.eventData.dataTransfer,"move",t!==void 0)},"onDragOver"),onDragLeave:Nn(a=>{t?.dispose(),t=void 0},"onDragLeave"),onDrop:Nn(a=>{if(t){const l=a.dragAndDropData.getData(),c=[];if(l.type==="composite"&&l.id!==this.viewContainer.id){const h=this.viewDescriptorService.getViewContainerById(l.id),u=this.viewDescriptorService.getViewContainerModel(h).allViewDescriptors;u.some(f=>!f.canMoveView)||c.push(...u)}else if(l.type==="view"){const h=this.viewDescriptorService.getViewContainerByViewId(l.id),u=this.viewDescriptorService.getViewDescriptorById(l.id);h!==this.viewContainer&&u&&u.canMoveView&&this.viewDescriptorService.moveViewsToContainer([u],this.viewContainer,void 0,"dnd")}const d=this.panes.length;if(c.length>0&&this.viewDescriptorService.moveViewsToContainer(c,this.viewContainer,void 0,"dnd"),d>0)for(const h of c){const u=this.panes.find(f=>f.id===h.id);u&&this.movePane(u,this.panes[this.panes.length-1])}}t?.dispose(),t=void 0},"onDrop")})),this._register(this.onDidSashChange(()=>this.saveViewSizes())),this._register(this.viewContainerModel.onDidAddVisibleViewDescriptors(a=>this.onDidAddViewDescriptors(a))),this._register(this.viewContainerModel.onDidRemoveVisibleViewDescriptors(a=>this.onDidRemoveViewDescriptors(a)));const r=this.viewContainerModel.visibleViewDescriptors.map((a,l)=>{const c=this.viewContainerModel.getSize(a.id),d=this.viewContainerModel.isCollapsed(a.id);return{viewDescriptor:a,index:l,size:c,collapsed:d}});r.length&&this.onDidAddViewDescriptors(r),this.extensionService.whenInstalledExtensionsRegistered().then(()=>{this.areExtensionsReady=!0,this.panes.length&&(this.updateTitleArea(),this.updateViewHeaders()),this._register(this.configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration(rt.ACTIVITY_BAR_LOCATION)&&this.updateViewHeaders()}))}),this._register(this.viewContainerModel.onDidChangeActiveViewDescriptors(()=>this._onTitleAreaUpdate.fire()))}getTitle(){const i=this.viewContainerModel.title;if(this.isViewMergedWithContainer()){const e=this.paneItems[0].pane.singleViewPaneContainerTitle;if(e)return e;const t=this.paneItems[0].pane.title;return i===t?t:t?`${i}: ${t}`:i}return i}showContextMenu(i){for(const e of this.paneItems)if(As(i.target,e.pane.element))return;i.stopPropagation(),i.preventDefault(),this.contextMenuService.showContextMenu({getAnchor:Nn(()=>i,"getAnchor"),getActions:Nn(()=>this.menuActions?.getContextMenuActions()??[],"getActions")})}getActionsContext(){if(this.isViewMergedWithContainer())return this.panes[0].getActionsContext()}getActionViewItem(i,e){return this.isViewMergedWithContainer()?this.paneItems[0].pane.getActionViewItem(i,e):fm(this.instantiationService,i,e)}focus(){let i;if(this.lastFocusedPane)i=this.lastFocusedPane;else if(this.paneItems.length>0){for(const{pane:e}of this.paneItems)if(e.isExpanded()){i=e;break}}i&&i.focus()}get orientation(){switch(this.viewDescriptorService.getViewContainerLocation(this.viewContainer)){case Te.Sidebar:case Te.AuxiliaryBar:return ke.VERTICAL;case Te.Panel:return vo(this.layoutService.getPanelPosition())?ke.HORIZONTAL:ke.VERTICAL}return ke.VERTICAL}layout(i){this.paneview&&(this.paneview.orientation!==this.orientation&&this.paneview.flipOrientation(i.height,i.width),this.paneview.layout(i.height,i.width)),this.dimension=i,this.didLayout?this.saveViewSizes():(this.didLayout=!0,this.restoreViewSizes())}setBoundarySashes(i){this._boundarySashes=i,this.paneview?.setBoundarySashes(i)}getOptimalWidth(){return Math.max(...this.panes.map(t=>t.getOptimalWidth()||0))+16}addPanes(i){const e=this.isViewMergedWithContainer();for(const{pane:t,size:n,index:s,disposable:o}of i)this.addPane(t,n,o,s);this.updateViewHeaders(),this.isViewMergedWithContainer()!==e&&this.updateTitleArea(),this._onDidAddViews.fire(i.map(({pane:t})=>t))}setVisible(i){this.visible!==!!i&&(this.visible=i,this._onDidChangeVisibility.fire(i)),this.panes.filter(e=>e.isVisible()!==i).map(e=>e.setVisible(i))}isVisible(){return this.visible}updateTitleArea(){this._onTitleAreaUpdate.fire()}createView(i,e){return this.instantiationService.createInstance(i.ctorDescriptor.ctor,...i.ctorDescriptor.staticArguments||[],e)}getView(i){return this.panes.filter(e=>e.id===i)[0]}saveViewSizes(){this.didLayout&&this.viewContainerModel.setSizes(this.panes.map(i=>({id:i.id,size:this.getPaneSize(i)})))}restoreViewSizes(){if(this.didLayout){let i;for(let e=0;e<this.viewContainerModel.visibleViewDescriptors.length;e++){const t=this.panes[e],n=this.viewContainerModel.visibleViewDescriptors[e],s=this.viewContainerModel.getSize(n.id);typeof s=="number"?this.resizePane(t,s):(i=i||this.computeInitialSizes(),this.resizePane(t,i.get(t.id)||200))}}}computeInitialSizes(){const i=new Map;if(this.dimension){const e=this.viewContainerModel.visibleViewDescriptors.reduce((t,{weight:n})=>t+(n||20),0);for(const t of this.viewContainerModel.visibleViewDescriptors)this.orientation===ke.VERTICAL?i.set(t.id,this.dimension.height*(t.weight||20)/e):i.set(t.id,this.dimension.width*(t.weight||20)/e)}return i}saveState(){this.panes.forEach(i=>i.saveState()),this.storageService.store(this.visibleViewsStorageId,this.length,Be.WORKSPACE,ai.MACHINE)}onContextMenu(i,e){i.stopPropagation(),i.preventDefault();const t=e.menuActions.getContextMenuActions();this.contextMenuService.showContextMenu({getAnchor:Nn(()=>i,"getAnchor"),getActions:Nn(()=>t,"getActions")})}openView(i,e){let t=this.getView(i);return t||this.toggleViewVisibility(i),t=this.getView(i),t&&(t.setExpanded(!0),e&&t.focus()),t}onDidAddViewDescriptors(i){const e=[];for(const{viewDescriptor:n,collapsed:s,index:o,size:r}of i){const a=this.createView(n,{id:n.id,title:n.name.value,fromExtensionId:n.extensionId,expanded:!s,singleViewPaneContainerTitle:n.singleViewPaneContainerTitle});a.render();const l=F(a.draggableElement,"contextmenu",d=>{d.stopPropagation(),d.preventDefault(),this.onContextMenu(new $n(ve(a.draggableElement),d),a)}),c=H.latch(H.map(a.onDidChange,()=>!a.isExpanded()))(d=>{this.viewContainerModel.setCollapsed(n.id,d)});e.push({pane:a,size:r||a.minimumSize,index:o,disposable:Ia(l,c)})}this.addPanes(e),this.restoreViewSizes();const t=[];for(const{pane:n}of e)n.setVisible(this.isVisible()),t.push(n);return t}onDidRemoveViewDescriptors(i){i=i.sort((t,n)=>n.index-t.index);const e=[];for(const{index:t}of i)this.paneItems[t]&&e.push(this.paneItems[t].pane);if(e.length){this.removePanes(e);for(const t of e)t.setVisible(!1)}}toggleViewVisibility(i){if(this.viewContainerModel.activeViewDescriptors.some(e=>e.id===i)){const e=!this.viewContainerModel.isVisible(i);this.viewContainerModel.setVisible(i,e)}}addPane(i,e,t,n=this.paneItems.length-1){const s=i.onDidFocus(()=>{this._onDidFocusView.fire(i),this.lastFocusedPane=i}),o=i.onDidBlur(()=>this._onDidBlurView.fire(i)),r=i.onDidChangeTitleArea(()=>{this.isViewMergedWithContainer()&&this.updateTitleArea()}),a=i.onDidChangeBodyVisibility(()=>this._onDidChangeViewVisibility.fire(i)),l=i.onDidChange(()=>{i===this.lastFocusedPane&&!i.isExpanded()&&(this.lastFocusedPane=void 0)}),c=this.viewDescriptorService.getViewContainerLocation(this.viewContainer)===Te.Panel;i.style({headerForeground:be(c?pme:Bme),headerBackground:be(c?fme:Mme),headerBorder:be(c?mme:jj),dropBackground:be(c?T5:qN),leftBorder:c?be(_me):void 0});const d=new te;d.add(t),d.add(Ia(i,s,o,r,l,a));const h={pane:i,disposable:d};this.paneItems.splice(n,0,h),pt(this.paneview).addPane(i,e,n);let u;d.add(Ol.INSTANCE.registerDraggable(i.draggableElement,()=>({type:"view",id:i.id}),{})),d.add(Ol.INSTANCE.registerTarget(i.dropTargetElement,{onDragEnter:Nn(f=>{if(!u){const p=f.dragAndDropData.getData();if(p.type==="view"&&p.id!==i.id){const m=this.viewDescriptorService.getViewContainerByViewId(p.id),_=this.viewDescriptorService.getViewDescriptorById(p.id);if(m!==this.viewContainer&&(!_||!_.canMoveView||this.viewContainer.rejectAddedViews))return;u=new Tw(i.dropTargetElement,this.orientation??ke.VERTICAL,void 0,this.viewDescriptorService.getViewContainerLocation(this.viewContainer),this.themeService)}if(p.type==="composite"&&p.id!==this.viewContainer.id&&!this.viewContainer.rejectAddedViews){const m=this.viewDescriptorService.getViewContainerById(p.id),_=this.viewDescriptorService.getViewContainerModel(m).allViewDescriptors;!_.some(w=>!w.canMoveView)&&_.length>0&&(u=new Tw(i.dropTargetElement,this.orientation??ke.VERTICAL,void 0,this.viewDescriptorService.getViewContainerLocation(this.viewContainer),this.themeService))}}},"onDragEnter"),onDragOver:Nn(f=>{_y(f.eventData.dataTransfer,"move",u!==void 0)},"onDragOver"),onDragLeave:Nn(f=>{u?.dispose(),u=void 0},"onDragLeave"),onDrop:Nn(f=>{if(u){const p=f.dragAndDropData.getData(),m=[];let _;if(p.type==="composite"&&p.id!==this.viewContainer.id&&!this.viewContainer.rejectAddedViews){const w=this.viewDescriptorService.getViewContainerById(p.id),v=this.viewDescriptorService.getViewContainerModel(w).allViewDescriptors;v.length>0&&!v.some(b=>!b.canMoveView)&&(m.push(...v),_=v[0])}else if(p.type==="view"){const w=this.viewDescriptorService.getViewContainerByViewId(p.id),v=this.viewDescriptorService.getViewDescriptorById(p.id);w!==this.viewContainer&&v&&v.canMoveView&&!this.viewContainer.rejectAddedViews&&m.push(v),v&&(_=v)}if(m&&this.viewDescriptorService.moveViewsToContainer(m,this.viewContainer,void 0,"dnd"),_){if(u.currentDropOperation===1||u.currentDropOperation===3){const w=this.panes.findIndex(b=>b.id===_.id);let v=this.panes.findIndex(b=>b.id===i.id);w>=0&&v>=0&&(w>v&&v++,v<this.panes.length&&v!==w&&this.movePane(this.panes[w],this.panes[v]))}if(u.currentDropOperation===0||u.currentDropOperation===2){const w=this.panes.findIndex(b=>b.id===_.id);let v=this.panes.findIndex(b=>b.id===i.id);w>=0&&v>=0&&(w<v&&v--,v>=0&&v!==w&&this.movePane(this.panes[w],this.panes[v]))}m.length>1&&m.slice(1).forEach(w=>{let v=this.panes.findIndex(C=>C.id===_.id);const b=this.panes.findIndex(C=>C.id===w.id);b>=0&&v>=0&&(b>v&&v++,v<this.panes.length&&v!==b&&(this.movePane(this.panes[b],this.panes[v]),_=w))})}}u?.dispose(),u=void 0},"onDrop")}))}removePanes(i){const e=this.isViewMergedWithContainer();i.forEach(t=>this.removePane(t)),this.updateViewHeaders(),e!==this.isViewMergedWithContainer()&&this.updateTitleArea(),this._onDidRemoveViews.fire(i)}removePane(i){const e=this.paneItems.findIndex(n=>n.pane===i);if(e===-1)return;this.lastFocusedPane===i&&(this.lastFocusedPane=void 0),pt(this.paneview).removePane(i);const[t]=this.paneItems.splice(e,1);t.disposable.dispose()}movePane(i,e){const t=this.paneItems.findIndex(a=>a.pane===i),n=this.paneItems.findIndex(a=>a.pane===e),s=this.viewContainerModel.visibleViewDescriptors[t],o=this.viewContainerModel.visibleViewDescriptors[n];if(t<0||t>=this.paneItems.length||n<0||n>=this.paneItems.length)return;const[r]=this.paneItems.splice(t,1);this.paneItems.splice(n,0,r),pt(this.paneview).movePane(i,e),this.viewContainerModel.move(s.id,o.id),this.updateTitleArea()}resizePane(i,e){pt(this.paneview).resizePane(i,e)}getPaneSize(i){return pt(this.paneview).getPaneSize(i)}updateViewHeaders(){this.isViewMergedWithContainer()?(this.paneItems[0].pane.isExpanded()?this.lastMergedCollapsedPane=void 0:(this.lastMergedCollapsedPane=this.paneItems[0].pane,this.paneItems[0].pane.setExpanded(!0)),this.paneItems[0].pane.headerVisible=!1,this.paneItems[0].pane.collapsible=!0):(this.paneItems.length===1?(this.paneItems[0].pane.headerVisible=!0,this.paneItems[0].pane===this.lastMergedCollapsedPane&&this.paneItems[0].pane.setExpanded(!1),this.paneItems[0].pane.collapsible=!1):this.paneItems.forEach(i=>{i.pane.headerVisible=!0,i.pane.collapsible=!0,i.pane===this.lastMergedCollapsedPane&&i.pane.setExpanded(!1)}),this.lastMergedCollapsedPane=void 0)}isViewMergedWithContainer(){return this.options.mergeViewWithContainerWhenSingleView&&this.paneItems.length===1?this.areExtensionsReady?!0:this.visibleViewsCountFromCache===void 0?this.paneItems[0].pane.isExpanded():this.visibleViewsCountFromCache===1:!1}onDidScrollPane(){for(const i of this.panes)i.onDidScrollRoot()}onDidSashReset(i){let e,t;for(let n=i;n>=0;n--)if(this.paneItems[n].pane?.isVisible()&&this.paneItems[n]?.pane.isExpanded()){e=this.paneItems[n].pane;break}for(let n=i+1;n<this.paneItems.length;n++)if(this.paneItems[n].pane?.isVisible()&&this.paneItems[n]?.pane.isExpanded()){t=this.paneItems[n].pane;break}if(e&&t){const n=this.getPaneSize(e),s=this.getPaneSize(t),o=Math.ceil((n+s)/2),r=Math.floor((n+s)/2);n>s?(this.resizePane(e,o),this.resizePane(t,r)):(this.resizePane(t,r),this.resizePane(e,o))}}dispose(){super.dispose(),this.paneItems.forEach(i=>i.disposable.dispose()),this.paneview&&this.paneview.dispose()}};$V=Ise([wl(2,He),wl(3,Pe),wl(4,yt),wl(5,Hi),wl(6,rs),wl(7,nd),wl(8,$t),wl(9,Si),wl(10,po),wl(11,Ro)],$V);class hGe extends ge{static{Nn(this,"ViewPaneContainerAction")}desc;constructor(e){super(e),this.desc=e}run(e,...t){const n=e.get(vf).getActiveViewPaneContainerWithId(this.desc.viewPaneContainerId);if(n)return this.runInViewPaneContainer(e,n,...t)}}class vR extends ge{constructor(e,t){super(e),this.offset=t}static{Nn(this,"MoveViewPosition")}async run(e){const t=e.get(Ro),n=e.get(Ye),s=uu.getValue(n);if(s===void 0)return;const o=t.getViewContainerByViewId(s),r=t.getViewContainerModel(o),a=r.visibleViewDescriptors.find(d=>d.id===s),l=r.visibleViewDescriptors.indexOf(a);if(l+this.offset<0||l+this.offset>=r.visibleViewDescriptors.length)return;const c=r.visibleViewDescriptors[l+this.offset];r.move(a.id,c.id)}}Oe(class extends vR{static{Nn(this,"MoveViewUp")}constructor(){super({id:"views.moveViewUp",title:g("viewMoveUp","Move View Up"),keybinding:{primary:di(M.CtrlCmd+E.KeyK,E.UpArrow),weight:Ce.WorkbenchContrib+1,when:uu.notEqualsTo("")}},-1)}});Oe(class extends vR{static{Nn(this,"MoveViewLeft")}constructor(){super({id:"views.moveViewLeft",title:g("viewMoveLeft","Move View Left"),keybinding:{primary:di(M.CtrlCmd+E.KeyK,E.LeftArrow),weight:Ce.WorkbenchContrib+1,when:uu.notEqualsTo("")}},-1)}});Oe(class extends vR{static{Nn(this,"MoveViewDown")}constructor(){super({id:"views.moveViewDown",title:g("viewMoveDown","Move View Down"),keybinding:{primary:di(M.CtrlCmd+E.KeyK,E.DownArrow),weight:Ce.WorkbenchContrib+1,when:uu.notEqualsTo("")}},1)}});Oe(class extends vR{static{Nn(this,"MoveViewRight")}constructor(){super({id:"views.moveViewRight",title:g("viewMoveRight","Move View Right"),keybinding:{primary:di(M.CtrlCmd+E.KeyK,E.RightArrow),weight:Ce.WorkbenchContrib+1,when:uu.notEqualsTo("")}},1)}});Oe(class extends ge{static{Nn(this,"MoveViews")}constructor(){super({id:"vscode.moveViews",title:g("viewsMove","Move Views")})}async run(e,t){if(!Array.isArray(t?.viewIds)||typeof t?.destinationId!="string")return Promise.reject("Invalid arguments");const n=e.get(Ro),s=n.getViewContainerById(t.destinationId);if(s){for(const o of t.viewIds){const r=n.getViewDescriptorById(o);r?.canMoveView&&n.moveViewsToContainer([r],s,ene.Default,this.desc.id)}await e.get(vf).openViewContainer(s.id,!0)}}});var Tse=Object.defineProperty,rBe=Object.getOwnPropertyDescriptor,Q7=(i,e)=>Tse(i,"name",{value:e,configurable:!0}),aBe=(i,e,t,n)=>{for(var s=n>1?void 0:n?rBe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Tse(e,t,s),s},Nm=(i,e)=>(t,n)=>e(t,n,i);let uz=class extends tne{constructor(i,e,t,n,s,o,r,a){super(i,e,s,t),this.storageService=t,this.instantiationService=n,this.contextMenuService=o,this.extensionService=r,this.contextService=a}static{Q7(this,"PaneComposite")}viewPaneContainer;create(i){super.create(i),this.viewPaneContainer=this._register(this.createViewPaneContainer(i)),this._register(this.viewPaneContainer.onTitleAreaUpdate(()=>this.updateTitleArea())),this.viewPaneContainer.create(i)}setVisible(i){super.setVisible(i),this.viewPaneContainer?.setVisible(i)}layout(i){this.viewPaneContainer?.layout(i)}setBoundarySashes(i){this.viewPaneContainer?.setBoundarySashes(i)}getOptimalWidth(){return this.viewPaneContainer?.getOptimalWidth()??0}openView(i,e){return this.viewPaneContainer?.openView(i,e)}getViewPaneContainer(){return this.viewPaneContainer}getActionsContext(){return this.getViewPaneContainer()?.getActionsContext()}getContextMenuActions(){return this.viewPaneContainer?.menuActions?.getContextMenuActions()??[]}getMenuIds(){const i=[];return this.viewPaneContainer?.menuActions&&(i.push(this.viewPaneContainer.menuActions.menuId),this.viewPaneContainer.isViewMergedWithContainer()&&i.push(this.viewPaneContainer.panes[0].menuActions.menuId)),i}getActions(){const i=[];if(this.viewPaneContainer?.menuActions&&(i.push(...this.viewPaneContainer.menuActions.getPrimaryActions()),this.viewPaneContainer.isViewMergedWithContainer())){const e=this.viewPaneContainer.panes[0];e.shouldShowFilterInHeader()&&i.push(MV),i.push(...e.menuActions.getPrimaryActions())}return i}getSecondaryActions(){if(!this.viewPaneContainer?.menuActions)return[];const i=this.viewPaneContainer.isViewMergedWithContainer()?this.viewPaneContainer.panes[0].menuActions.getSecondaryActions():[];let e=this.viewPaneContainer.menuActions.getSecondaryActions();const t=e.findIndex(n=>n instanceof ql&&n.item.submenu===X7);if(t!==-1){const n=e[t];n.actions.some(({enabled:s})=>s)?e.length===1&&i.length===0?e=n.actions.slice():t!==0&&(e=[n,...e.slice(0,t),...e.slice(t+1)]):e.splice(t,1)}return e.length&&i.length?[...e,new zt,...i]:e.length?e:i}getActionViewItem(i,e){return this.viewPaneContainer?.getActionViewItem(i,e)}getTitle(){return this.viewPaneContainer?.getTitle()??""}focus(){super.focus(),this.viewPaneContainer?.focus()}};uz=aBe([Nm(1,rs),Nm(2,Si),Nm(3,He),Nm(4,$t),Nm(5,Hi),Nm(6,nd),Nm(7,po)],uz);class Ase extends NRe{constructor(e,t,n,s,o,r,a){super(e,t,n,s,o,r),this.iconUrl=a}static{Q7(this,"PaneCompositeDescriptor")}static create(e,t,n,s,o,r,a){return new Ase(e,t,n,s,o,r,a)}}const CC={Viewlets:"workbench.contributions.viewlets",Panels:"workbench.contributions.panels",Auxiliary:"workbench.contributions.auxiliary"};class J7 extends PRe{static{Q7(this,"PaneCompositeRegistry")}registerPaneComposite(e){super.registerComposite(e)}deregisterPaneComposite(e){super.deregisterComposite(e)}getPaneComposite(e){return this.getComposite(e)}getPaneComposites(){return this.getComposites()}}Xt.add(CC.Viewlets,new J7);Xt.add(CC.Panels,new J7);Xt.add(CC.Auxiliary,new J7);const Cf=De("paneCompositePartService");var lBe=Object.defineProperty,xse=(i,e)=>lBe(i,"name",{value:e,configurable:!0});const cBe=Vt("auxiliarybar-right-layout-icon",ee.layoutSidebarRight,g("toggleAuxiliaryIconRight","Icon to toggle the auxiliary bar off in its right position.")),dBe=Vt("auxiliarybar-right-off-layout-icon",ee.layoutSidebarRightOff,g("toggleAuxiliaryIconRightOn","Icon to toggle the auxiliary bar on in its right position.")),hBe=Vt("auxiliarybar-left-layout-icon",ee.layoutSidebarLeft,g("toggleAuxiliaryIconLeft","Icon to toggle the auxiliary bar in its left position.")),uBe=Vt("auxiliarybar-left-off-layout-icon",ee.layoutSidebarLeftOff,g("toggleAuxiliaryIconLeftOn","Icon to toggle the auxiliary bar on in its left position."));class qd extends ge{static{xse(this,"ToggleAuxiliaryBarAction")}static ID="workbench.action.toggleAuxiliaryBar";static LABEL=W("toggleAuxiliaryBar","Toggle Secondary Side Bar Visibility");constructor(){super({id:qd.ID,title:qd.LABEL,toggled:{condition:Og,title:g("secondary sidebar","Secondary Side Bar"),mnemonicTitle:g({key:"secondary sidebar mnemonic",comment:["&& denotes a mnemonic"]},"Secondary Si&&de Bar")},category:oe.View,f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|M.Alt|E.KeyB},menu:[{id:N.LayoutControlMenuSubmenu,group:"0_workbench_layout",order:1},{id:N.MenubarAppearanceMenu,group:"2_workbench_layout",order:2}]})}async run(e){const t=e.get(yt);t.setPartHidden(t.isVisible(Y.AUXILIARYBAR_PART),Y.AUXILIARYBAR_PART)}}Oe(qd);Oe(class GV extends ge{static{xse(this,"FocusAuxiliaryBarAction")}static ID="workbench.action.focusAuxiliaryBar";static LABEL=W("focusAuxiliaryBar","Focus into Secondary Side Bar");constructor(){super({id:GV.ID,title:GV.LABEL,category:oe.View,f1:!0})}async run(e){const t=e.get(Cf),n=e.get(yt);n.isVisible(Y.AUXILIARYBAR_PART)||n.setPartHidden(!1,Y.AUXILIARYBAR_PART),t.getActivePaneComposite(Te.AuxiliaryBar)?.focus()}});xt.appendMenuItems([{id:N.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:qd.ID,title:g("toggleSecondarySideBar","Toggle Secondary Side Bar"),toggled:{condition:Og,icon:hBe},icon:uBe},when:Z.and(Z.or(Z.equals("config.workbench.layoutControl.type","toggles"),Z.equals("config.workbench.layoutControl.type","both")),Z.equals("config.workbench.sideBar.location","right")),order:0}},{id:N.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:qd.ID,title:g("toggleSecondarySideBar","Toggle Secondary Side Bar"),toggled:{condition:Og,icon:cBe},icon:dBe},when:Z.and(Z.or(Z.equals("config.workbench.layoutControl.type","toggles"),Z.equals("config.workbench.layoutControl.type","both")),Z.equals("config.workbench.sideBar.location","left")),order:2}},{id:N.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:qd.ID,title:W("hideAuxiliaryBar","Hide Secondary Side Bar")},when:Z.and(Og,Z.equals("viewLocation",Sr(Te.AuxiliaryBar))),order:2}}]);var gBe=Object.defineProperty,rM=(i,e)=>gBe(i,"name",{value:e,configurable:!0});class kse extends ${static{rM(this,"ElementSizeObserver")}_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_referenceDomElement;_width;_height;_resizeObserver;constructor(e,t){super(),this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=rM(()=>{e?this.observe({width:e.width,height:e.height}):this.observe()},"observeNow");let n=!1,s=!1;const o=rM(()=>{if(n&&!s)try{n=!1,s=!0,t()}finally{xo(ve(this._referenceDomElement),()=>{s=!1,o()})}},"update");this._resizeObserver=new ResizeObserver(r=>{r&&r[0]&&r[0].contentRect?e={width:r[0].contentRect.width,height:r[0].contentRect.height}:e=null,n=!0,o()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,s=0;t?(n=t.width,s=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,s=this._referenceDomElement.clientHeight),n=Math.max(5,n),s=Math.max(5,s),(this._width!==n||this._height!==s)&&(this._width=n,this._height=s,e&&this._onDidChange.fire())}}var fBe=Object.defineProperty,e2=(i,e)=>fBe(i,"name",{value:e,configurable:!0});class pBe extends ${static{e2(this,"DevicePixelRatioMonitor")}_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_listener;_mediaQueryList;constructor(e){super(),this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){this._mediaQueryList?.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}class mBe extends ${static{e2(this,"PixelRatioMonitorImpl")}_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_value;get value(){return this._value}constructor(e){super(),this._value=this._getPixelRatio(e);const t=this._register(new pBe(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){const t=document.createElement("canvas").getContext("2d"),n=e.devicePixelRatio||1,s=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/s}}class _Be{static{e2(this,"PixelRatioMonitorFacade")}mapWindowIdToPixelRatioMonitor=new Map;_getOrCreatePixelRatioMonitor(e){const t=Ng(e);let n=this.mapWindowIdToPixelRatioMonitor.get(t);return n||(n=Eb(new mBe(e)),this.mapWindowIdToPixelRatioMonitor.set(t,n),Eb(H.once(F_e)(({vscodeWindowId:s})=>{s===t&&(n?.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))}))),n}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}}const by=new _Be;var bBe=Object.defineProperty,vBe=(i,e)=>bBe(i,"name",{value:e,configurable:!0});function Ao(i,e){i instanceof i3?(i.setFontFamily(e.getMassagedFontFamily()),i.setFontWeight(e.fontWeight),i.setFontSize(e.fontSize),i.setFontFeatureSettings(e.fontFeatureSettings),i.setFontVariationSettings(e.fontVariationSettings),i.setLineHeight(e.lineHeight),i.setLetterSpacing(e.letterSpacing)):(i.style.fontFamily=e.getMassagedFontFamily(),i.style.fontWeight=e.fontWeight,i.style.fontSize=e.fontSize+"px",i.style.fontFeatureSettings=e.fontFeatureSettings,i.style.fontVariationSettings=e.fontVariationSettings,i.style.lineHeight=e.lineHeight+"px",i.style.letterSpacing=e.letterSpacing+"px")}vBe(Ao,"applyFontInfo");var wBe=Object.defineProperty,t2=(i,e)=>wBe(i,"name",{value:e,configurable:!0}),Xs=(i=>(i[i.Regular=0]="Regular",i[i.Italic=1]="Italic",i[i.Bold=2]="Bold",i))(Xs||{});class CBe{static{t2(this,"CharWidthRequest")}chr;type;width;constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class i2{static{t2(this,"DomCharWidthReader")}_bareFontInfo;_requests;_container;_testElements;constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),this._container?.remove(),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");Ao(t,this._bareFontInfo),e.appendChild(t);const n=document.createElement("div");Ao(n,this._bareFontInfo),n.style.fontWeight="bold",e.appendChild(n);const s=document.createElement("div");Ao(s,this._bareFontInfo),s.style.fontStyle="italic",e.appendChild(s);const o=[];for(const r of this._requests){let a;r.type===0&&(a=t),r.type===2&&(a=n),r.type===1&&(a=s),a.appendChild(document.createElement("br"));const l=document.createElement("span");i2._render(l,r),a.appendChild(l),o.push(l)}this._container=e,this._testElements=o}static _render(e,t){if(t.chr===" "){let n="\xa0";for(let s=0;s<8;s++)n+=n;e.innerText=n}else{let n=t.chr;for(let s=0;s<8;s++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],s=this._testElements[e];n.fulfill(s.offsetWidth/256)}}}function Nse(i,e,t){new i2(e,t).read(i)}t2(Nse,"readCharWidths");var yBe=Object.defineProperty,Pse=(i,e)=>yBe(i,"name",{value:e,configurable:!0});class SBe extends ${static{Pse(this,"FontMeasurementsImpl")}_cache=new Map;_evictUntrustedReadingsTimeout=-1;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){const t=Ng(e);let n=this._cache.get(t);return n||(n=new EBe,this._cache.set(t,n)),n}_writeToCache(e,t,n){this._ensureCache(e).put(t,n),!n.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){const t=this._ensureCache(e),n=t.getValues();let s=!1;for(const o of n)o.isTrusted||(s=!0,t.remove(o));s&&this._onDidChange.fire()}serializeFontInfo(e){return this._ensureCache(e).getValues().filter(n=>n.isTrusted)}restoreFontInfo(e,t){for(const n of t){if(n.version!==TY)continue;const s=new DO(n,!1);this._writeToCache(e,s,s)}}readFontInfo(e,t){const n=this._ensureCache(e);if(!n.has(t)){let s=this._actualReadFontInfo(e,t);(s.typicalHalfwidthCharacterWidth<=2||s.typicalFullwidthCharacterWidth<=2||s.spaceWidth<=2||s.maxDigitWidth<=2)&&(s=new DO({pixelRatio:by.getInstance(e).value,fontFamily:s.fontFamily,fontWeight:s.fontWeight,fontSize:s.fontSize,fontFeatureSettings:s.fontFeatureSettings,fontVariationSettings:s.fontVariationSettings,lineHeight:s.lineHeight,letterSpacing:s.letterSpacing,isMonospace:s.isMonospace,typicalHalfwidthCharacterWidth:Math.max(s.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(s.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:s.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(s.spaceWidth,5),middotWidth:Math.max(s.middotWidth,5),wsmiddotWidth:Math.max(s.wsmiddotWidth,5),maxDigitWidth:Math.max(s.maxDigitWidth,5)},!1)),this._writeToCache(e,t,s)}return n.get(t)}_createRequest(e,t,n,s){const o=new CBe(e,t);return n.push(o),s?.push(o),o}_actualReadFontInfo(e,t){const n=[],s=[],o=this._createRequest("n",Xs.Regular,n,s),r=this._createRequest("",Xs.Regular,n,null),a=this._createRequest(" ",Xs.Regular,n,s),l=this._createRequest("0",Xs.Regular,n,s),c=this._createRequest("1",Xs.Regular,n,s),d=this._createRequest("2",Xs.Regular,n,s),h=this._createRequest("3",Xs.Regular,n,s),u=this._createRequest("4",Xs.Regular,n,s),f=this._createRequest("5",Xs.Regular,n,s),p=this._createRequest("6",Xs.Regular,n,s),m=this._createRequest("7",Xs.Regular,n,s),_=this._createRequest("8",Xs.Regular,n,s),w=this._createRequest("9",Xs.Regular,n,s),v=this._createRequest("",Xs.Regular,n,s),b=this._createRequest("",Xs.Regular,n,null),C=this._createRequest("\xb7",Xs.Regular,n,s),S=this._createRequest("",Xs.Regular,n,null),D="|/-_ilm%";for(let K=0,X=D.length;K<X;K++)this._createRequest(D.charAt(K),Xs.Regular,n,s),this._createRequest(D.charAt(K),Xs.Italic,n,s),this._createRequest(D.charAt(K),Xs.Bold,n,s);Nse(e,t,n);const T=Math.max(l.width,c.width,d.width,h.width,u.width,f.width,p.width,m.width,_.width,w.width);let I=t.fontFeatureSettings===kd.OFF;const R=s[0].width;for(let K=1,X=s.length;I&&K<X;K++){const we=R-s[K].width;if(we<-.001||we>.001){I=!1;break}}let G=!0;return I&&b.width!==R&&(G=!1),b.width>v.width&&(G=!1),new DO({pixelRatio:by.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:I,typicalHalfwidthCharacterWidth:o.width,typicalFullwidthCharacterWidth:r.width,canUseHalfwidthRightwardsArrow:G,spaceWidth:a.width,middotWidth:C.width,wsmiddotWidth:S.width,maxDigitWidth:T},!0)}}class EBe{static{Pse(this,"FontMeasurementsCache")}_keys;_values;constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const _0=new SBe;var LBe=Object.defineProperty,yC=(i,e)=>LBe(i,"name",{value:e,configurable:!0});class hb{constructor(e,t){this.key=e,this.migrate=t}static{yC(this,"EditorSettingMigration")}static items=[];apply(e){const t=hb._read(e,this.key),n=yC(o=>hb._read(e,o),"read"),s=yC((o,r)=>hb._write(e,o,r),"write");this.migrate(t,n,s)}static _read(e,t){if(typeof e>"u")return;const n=t.indexOf(".");if(n>=0){const s=t.substring(0,n);return this._read(e[s],t.substring(n+1))}return e[t]}static _write(e,t,n){const s=t.indexOf(".");if(s>=0){const o=t.substring(0,s);e[o]=e[o]||{},this._write(e[o],t.substring(s+1),n);return}e[t]=n}}function sd(i,e){hb.items.push(new hb(i,e))}yC(sd,"registerEditorSettingMigration");function da(i,e){sd(i,(t,n,s)=>{if(typeof t<"u"){for(const[o,r]of e)if(t===o){s(i,r);return}}})}yC(da,"registerSimpleEditorSettingMigration");function Rse(i){hb.items.forEach(e=>e.apply(i))}yC(Rse,"migrateOptions");da("wordWrap",[[!0,"on"],[!1,"off"]]);da("lineNumbers",[[!0,"on"],[!1,"off"]]);da("cursorBlinking",[["visible","solid"]]);da("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);da("renderLineHighlight",[[!0,"line"],[!1,"none"]]);da("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);da("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);da("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);da("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);da("autoIndent",[[!1,"advanced"],[!0,"full"]]);da("matchBrackets",[[!0,"always"],[!1,"never"]]);da("renderFinalNewline",[[!0,"on"],[!1,"off"]]);da("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);da("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);da("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);sd("autoClosingBrackets",(i,e,t)=>{i===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});sd("renderIndentGuides",(i,e,t)=>{typeof i<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!i))});sd("highlightActiveIndentGuide",(i,e,t)=>{typeof i<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!i))});const DBe={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};sd("suggest.filteredTypes",(i,e,t)=>{if(i&&typeof i=="object"){for(const n of Object.entries(DBe))i[n[0]]===!1&&typeof e(`suggest.${n[1]}`)>"u"&&t(`suggest.${n[1]}`,!1);t("suggest.filteredTypes",void 0)}});sd("quickSuggestions",(i,e,t)=>{if(typeof i=="boolean"){const n=i?"on":"off";t("quickSuggestions",{comments:n,strings:n,other:n})}});sd("experimental.stickyScroll.enabled",(i,e,t)=>{typeof i=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",i))});sd("experimental.stickyScroll.maxLineCount",(i,e,t)=>{typeof i=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",i))});sd("codeActionsOnSave",(i,e,t)=>{if(i&&typeof i=="object"){let n=!1;const s={};for(const o of Object.entries(i))typeof o[1]=="boolean"?(n=!0,s[o[0]]=o[1]?"explicit":"never"):s[o[0]]=o[1];n&&t("codeActionsOnSave",s)}});sd("codeActionWidget.includeNearbyQuickfixes",(i,e,t)=>{typeof i=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",i))});sd("lightbulb.enabled",(i,e,t)=>{typeof i=="boolean"&&t("lightbulb.enabled",i?void 0:"off")});var IBe=Object.defineProperty,TBe=(i,e)=>IBe(i,"name",{value:e,configurable:!0});class ABe{static{TBe(this,"TabFocusImpl")}_tabFocus=!1;_onDidChangeTabFocus=new x;onDidChangeTabFocus=this._onDidChangeTabFocus.event;getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}}const Sk=new ABe;var Ose=Object.defineProperty,xBe=Object.getOwnPropertyDescriptor,kv=(i,e)=>Ose(i,"name",{value:e,configurable:!0}),kBe=(i,e,t,n)=>{for(var s=n>1?void 0:n?xBe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Ose(e,t,s),s},NBe=(i,e)=>(t,n)=>e(t,n,i);let KV=class extends ${constructor(i,e,t,n,s){super(),this._accessibilityService=s,this.isSimpleWidget=i,this.contextMenuId=e,this._containerObserver=this._register(new kse(n,t.dimension)),this._targetWindowId=ve(n).vscodeWindowId,this._rawOptions=jV(t),this._validatedOptions=ap.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(k.automaticLayout)&&this._containerObserver.startObserving(),this._register(r_.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(Sk.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(_0.onDidChange(()=>this._recomputeOptions())),this._register(by.getInstance(ve(n)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}static{kv(this,"EditorConfiguration")}_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_onDidChangeFast=this._register(new x);onDidChangeFast=this._onDidChangeFast.event;isSimpleWidget;contextMenuId;_containerObserver;_isDominatedByLongLines=!1;_viewLineCount=1;_lineNumbersDigitCount=1;_reservedHeight=0;_glyphMarginDecorationLaneCount=1;_targetWindowId;_computeOptionsMemory=new KY;_rawOptions;_validatedOptions;options;_recomputeOptions(){const i=this._computeOptions(),e=ap.checkEquals(this.options,i);e!==null&&(this.options=i,this._onDidChangeFast.fire(e),this._onDidChange.fire(e))}_computeOptions(){const i=this._readEnvConfiguration(),e=wp.createFromValidatedSettings(this._validatedOptions,i.pixelRatio,this.isSimpleWidget),t=this._readFontInfo(e),n={memory:this._computeOptionsMemory,outerWidth:i.outerWidth,outerHeight:i.outerHeight-this._reservedHeight,fontInfo:t,extraEditorClassName:i.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:i.emptySelectionClipboard,pixelRatio:i.pixelRatio,tabFocusMode:Sk.getTabFocusMode(),accessibilitySupport:i.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return ap.computeOptions(this._validatedOptions,n)}_readEnvConfiguration(){return{extraEditorClassName:Bse(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:J_||na,pixelRatio:by.getInstance(iE(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?rr.Enabled:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(i){return _0.readFontInfo(iE(this._targetWindowId,!0).window,i)}getRawOptions(){return this._rawOptions}updateOptions(i){const e=jV(i);ap.applyUpdate(this._rawOptions,e)&&(this._validatedOptions=ap.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(i){this._containerObserver.observe(i)}setIsDominatedByLongLines(i){this._isDominatedByLongLines!==i&&(this._isDominatedByLongLines=i,this._recomputeOptions())}setModelLineCount(i){const e=Mse(i);this._lineNumbersDigitCount!==e&&(this._lineNumbersDigitCount=e,this._recomputeOptions())}setViewLineCount(i){this._viewLineCount!==i&&(this._viewLineCount=i,this._recomputeOptions())}setReservedHeight(i){this._reservedHeight!==i&&(this._reservedHeight=i,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(i){this._glyphMarginDecorationLaneCount!==i&&(this._glyphMarginDecorationLaneCount=i,this._recomputeOptions())}};KV=kBe([NBe(4,hf)],KV);function Mse(i){let e=0;for(;i;)i=Math.floor(i/10),e++;return e||1}kv(Mse,"digitCount");function Bse(){let i="";return!Vc&&!Jme&&(i+="no-user-select "),Vc&&(i+="no-minimap-shadow ",i+="enable-user-select "),Ue&&(i+="mac "),i}kv(Bse,"getExtraEditorClassName");class PBe{static{kv(this,"ValidatedEditorOptions")}_values=[];_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class RBe{static{kv(this,"ComputedEditorOptions")}_values=[];_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class ap{static{kv(this,"EditorOptionsUtil")}static validateOptions(e){const t=new PBe;for(const n of g1){const s=n.name==="_never_"?void 0:e[n.name];t._write(n.id,n.validate(s))}return t}static computeOptions(e,t){const n=new RBe;for(const s of g1)n._write(s.id,s.compute(t,n,e._read(s.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?ks(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!ap._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let s=!1;for(const o of g1){const r=!ap._deepEquals(e._read(o.id),t._read(o.id));n[o.id]=r,r&&(s=!0)}return s?new lwe(n):null}static applyUpdate(e,t){let n=!1;for(const s of g1)if(t.hasOwnProperty(s.name)){const o=s.applyUpdate(e[s.name],t[s.name]);e[s.name]=o.newValue,n=n||o.didChange}return n}}function jV(i){const e=tS(i);return Rse(e),e}kv(jV,"deepCloneAndMigrateOptions");var ri=(i=>(i[i.NotSet=0]="NotSet",i[i.ContentFlush=1]="ContentFlush",i[i.RecoverFromMarkers=2]="RecoverFromMarkers",i[i.Explicit=3]="Explicit",i[i.Paste=4]="Paste",i[i.Undo=5]="Undo",i[i.Redo=6]="Redo",i))(ri||{}),OBe=Object.defineProperty,MBe=(i,e)=>OBe(i,"name",{value:e,configurable:!0});class BBe{constructor(e){this.text=e,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}static{MBe(this,"PositionOffsetTransformer")}lineStartOffsetByLineIdx;getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new it(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){const t=Cb(this.lineStartOffsetByLineIdx,o=>o<=e),n=t+1,s=e-this.lineStartOffsetByLineIdx[t]+1;return new j(n,s)}getRange(e){return V.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return ys.ofRange(this.getRange(e))}get textLength(){const e=this.lineStartOffsetByLineIdx.length-1;return new ys(e,this.text.length-this.lineStartOffsetByLineIdx[e])}}var FBe=Object.defineProperty,Vg=(i,e)=>FBe(i,"name",{value:e,configurable:!0});class b0{constructor(e){this.edits=e,Fp(()=>AN(e,(t,n)=>t.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}static{Vg(this,"TextEdit")}static single(e,t){return new b0([new cA(e,t)])}normalize(){const e=[];for(const t of this.edits)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(t.range.getStartPosition())){const n=e[e.length-1];e[e.length-1]=new cA(n.range.plusRange(t.range),n.text+t.text)}else t.isEmpty||e.push(t);return new b0(e)}mapPosition(e){let t=0,n=0,s=0;for(const o of this.edits){const r=o.range.getStartPosition(),a=o.range.getEndPosition();if(e.isBeforeOrEqual(r))break;const l=ys.ofText(o.text);if(e.isBefore(a)){const c=new j(r.lineNumber+t,r.column+(r.lineNumber+t===n?s:0)),d=l.addToPosition(c);return A1(c,d)}t+=l.lineCount-(o.range.endLineNumber-o.range.startLineNumber),l.lineCount===0?a.lineNumber!==r.lineNumber?s+=l.columnCount-(a.column-1):s+=l.columnCount-(a.column-r.column):s=l.columnCount,n=a.lineNumber+t}return new j(e.lineNumber+t,e.column+(e.lineNumber+t===n?s:0))}mapRange(e){function t(r){return r instanceof j?r:r.getStartPosition()}Vg(t,"getStart");function n(r){return r instanceof j?r:r.getEndPosition()}Vg(n,"getEnd");const s=t(this.mapPosition(e.getStartPosition())),o=n(this.mapPosition(e.getEndPosition()));return A1(s,o)}inverseMapPosition(e,t){return this.inverse(t).mapPosition(e)}inverseMapRange(e,t){return this.inverse(t).mapRange(e)}apply(e){let t="",n=new j(1,1);for(const o of this.edits){const r=o.range,a=r.getStartPosition(),l=r.getEndPosition(),c=A1(n,a);c.isEmpty()||(t+=e.getValueOfRange(c)),t+=o.text,n=l}const s=A1(n,e.endPositionExclusive);return s.isEmpty()||(t+=e.getValueOfRange(s)),t}applyToString(e){const t=new WBe(e);return this.apply(t)}inverse(e){const t=this.getNewRanges();return new b0(this.edits.map((n,s)=>new cA(t[s],e.getValueOfRange(n.range))))}getNewRanges(){const e=[];let t=0,n=0,s=0;for(const o of this.edits){const r=ys.ofText(o.text),a=j.lift({lineNumber:o.range.startLineNumber+n,column:o.range.startColumn+(o.range.startLineNumber===t?s:0)}),l=r.createRange(a);e.push(l),n=l.endLineNumber-o.range.endLineNumber,s=l.endColumn-o.range.endColumn,t=o.range.endLineNumber}return e}}class cA{constructor(e,t){this.range=e,this.text=t}static{Vg(this,"SingleTextEdit")}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,t){return e.range.equalsRange(t.range)&&e.text===t.text}toSingleEditOperation(){return{range:this.range,text:this.text}}}function A1(i,e){if(i.lineNumber===e.lineNumber&&i.column===Number.MAX_SAFE_INTEGER)return V.fromPositions(e,e);if(!i.isBeforeOrEqual(e))throw new Et("start must be before end");return new V(i.lineNumber,i.column,e.lineNumber,e.column)}Vg(A1,"rangeFromPositions");class n2{static{Vg(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new j(1,1))}getValue(){return this.getValueOfRange(this.length.toRange())}}class VBe extends n2{constructor(e,t){tK(t>=1),super(),this._getLineContent=e,this._lineCount=t}static{Vg(this,"LineBasedText")}getValueOfRange(e){if(e.startLineNumber===e.endLineNumber)return this._getLineContent(e.startLineNumber).substring(e.startColumn-1,e.endColumn-1);let t=this._getLineContent(e.startLineNumber).substring(e.startColumn-1);for(let n=e.startLineNumber+1;n<e.endLineNumber;n++)t+=`
`+this._getLineContent(n);return t+=`
`+this._getLineContent(e.endLineNumber).substring(0,e.endColumn-1),t}get length(){const e=this._getLineContent(this._lineCount);return new ys(this._lineCount-1,e.length)}}class _Ge extends VBe{static{Vg(this,"ArrayText")}constructor(e){super(t=>e[t-1],e.length)}}class WBe extends n2{constructor(e){super(),this.value=e}static{Vg(this,"StringText")}_t=new BBe(this.value);getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}}var HBe=Object.defineProperty,ID=(i,e)=>HBe(i,"name",{value:e,configurable:!0});class Er{static{ID(this,"LineRangeMapping")}static inverse(e,t,n){const s=[];let o=1,r=1;for(const l of e){const c=new Er(new ct(o,l.original.startLineNumber),new ct(r,l.modified.startLineNumber));c.modified.isEmpty||s.push(c),o=l.original.endLineNumberExclusive,r=l.modified.endLineNumberExclusive}const a=new Er(new ct(o,t+1),new ct(r,n+1));return a.modified.isEmpty||s.push(a),s}static clip(e,t,n){const s=[];for(const o of e){const r=o.original.intersect(t),a=o.modified.intersect(n);r&&!r.isEmpty&&a&&!a.isEmpty&&s.push(new Er(r,a))}return s}original;modified;constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new Er(this.modified,this.original)}join(e){return new Er(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){const e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new Al(e,t);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new Et("not a valid diff");return new Al(new V(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new V(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new Al(new V(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new V(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,t){if(qV(this.original.endLineNumberExclusive,e)&&qV(this.modified.endLineNumberExclusive,t))return new Al(new V(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new V(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new Al(V.fromPositions(new j(this.original.startLineNumber,1),e_(new j(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),V.fromPositions(new j(this.modified.startLineNumber,1),e_(new j(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new Al(V.fromPositions(e_(new j(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),e_(new j(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),V.fromPositions(e_(new j(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),t),e_(new j(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));throw new Et}}function e_(i,e){if(i.lineNumber<1)return new j(1,1);if(i.lineNumber>e.length)return new j(e.length,e[e.length-1].length+1);const t=e[i.lineNumber-1];return i.column>t.length+1?new j(i.lineNumber,t.length+1):i}ID(e_,"normalizePosition");function qV(i,e){return i>=1&&i<=e.length}ID(qV,"isValidLineNumber");class Jl extends Er{static{ID(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){const t=ct.join(e.map(s=>ct.fromRangeInclusive(s.originalRange))),n=ct.join(e.map(s=>ct.fromRangeInclusive(s.modifiedRange)));return new Jl(t,n,e)}innerChanges;constructor(e,t,n){super(e,t),this.innerChanges=n}flip(){return new Jl(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new Jl(this.original,this.modified,[this.toRangeMapping()])}}class Al{static{ID(this,"RangeMapping")}static assertSorted(e){for(let t=1;t<e.length;t++){const n=e[t-1],s=e[t];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(s.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(s.modifiedRange.getStartPosition())))throw new Et("Range mappings must be sorted")}}originalRange;modifiedRange;constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new Al(this.modifiedRange,this.originalRange)}toTextEdit(e){const t=e.getValueOfRange(this.modifiedRange);return new cA(this.originalRange,t)}}var UBe=Object.defineProperty,Fse=(i,e)=>UBe(i,"name",{value:e,configurable:!0});class dA{constructor(e,t,n){this.changes=e,this.moves=t,this.hitTimeout=n}static{Fse(this,"LinesDiff")}}class s2{static{Fse(this,"MovedText")}lineRangeMapping;changes;constructor(e,t){this.lineRangeMapping=e,this.changes=t}flip(){return new s2(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}}var zBe=Object.defineProperty,mh=(i,e)=>zBe(i,"name",{value:e,configurable:!0});const $Be=3;class bGe{static{mh(this,"LegacyLinesDiffComputer")}computeDiff(e,t,n){const o=new KBe(e,t,{maxComputationTime:n.maxComputationTimeMs,shouldIgnoreTrimWhitespace:n.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),r=[];let a=null;for(const l of o.changes){let c;l.originalEndLineNumber===0?c=new ct(l.originalStartLineNumber+1,l.originalStartLineNumber+1):c=new ct(l.originalStartLineNumber,l.originalEndLineNumber+1);let d;l.modifiedEndLineNumber===0?d=new ct(l.modifiedStartLineNumber+1,l.modifiedStartLineNumber+1):d=new ct(l.modifiedStartLineNumber,l.modifiedEndLineNumber+1);let h=new Jl(c,d,l.charChanges?.map(u=>new Al(new V(u.originalStartLineNumber,u.originalStartColumn,u.originalEndLineNumber,u.originalEndColumn),new V(u.modifiedStartLineNumber,u.modifiedStartColumn,u.modifiedEndLineNumber,u.modifiedEndColumn))));a&&(a.modified.endLineNumberExclusive===h.modified.startLineNumber||a.original.endLineNumberExclusive===h.original.startLineNumber)&&(h=new Jl(a.original.join(h.original),a.modified.join(h.modified),a.innerChanges&&h.innerChanges?a.innerChanges.concat(h.innerChanges):void 0),r.pop()),r.push(h),a=h}return Fp(()=>AN(r,(l,c)=>c.original.startLineNumber-l.original.endLineNumberExclusive===c.modified.startLineNumber-l.modified.endLineNumberExclusive&&l.original.endLineNumberExclusive<c.original.startLineNumber&&l.modified.endLineNumberExclusive<c.modified.startLineNumber)),new dA(r,[],o.quitEarly)}}function o2(i,e,t,n){return new cg(i,e,t).ComputeDiff(n)}mh(o2,"computeDiff");let gz=class{static{mh(this,"LineSequence")}lines;_startColumns;_endColumns;constructor(e){const t=[],n=[];for(let s=0,o=e.length;s<o;s++)t[s]=Ek(e[s],1),n[s]=Lk(e[s],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const s=[],o=[],r=[];let a=0;for(let l=t;l<=n;l++){const c=this.lines[l],d=e?this._startColumns[l]:1,h=e?this._endColumns[l]:c.length+1;for(let u=d;u<h;u++)s[a]=c.charCodeAt(u-1),o[a]=l+1,r[a]=u,a++;!e&&l<n&&(s[a]=A.LineFeed,o[a]=l+1,r[a]=c.length+1,a++)}return new GBe(s,o,r)}};class GBe{static{mh(this,"CharSequence")}_charCodes;_lineNumbers;_columns;constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}toString(){return"["+this._charCodes.map((e,t)=>(e===A.LineFeed?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===A.LineFeed?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===A.LineFeed?1:this._columns[e]+1)}}class SC{static{mh(this,"CharChange")}originalStartLineNumber;originalStartColumn;originalEndLineNumber;originalEndColumn;modifiedStartLineNumber;modifiedStartColumn;modifiedEndLineNumber;modifiedEndColumn;constructor(e,t,n,s,o,r,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=s,this.modifiedStartLineNumber=o,this.modifiedStartColumn=r,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){const s=t.getStartLineNumber(e.originalStart),o=t.getStartColumn(e.originalStart),r=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=n.getStartLineNumber(e.modifiedStart),c=n.getStartColumn(e.modifiedStart),d=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),h=n.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new SC(s,o,r,a,l,c,d,h)}}function Vse(i){if(i.length<=1)return i;const e=[i[0]];let t=e[0];for(let n=1,s=i.length;n<s;n++){const o=i[n],r=o.originalStart-(t.originalStart+t.originalLength),a=o.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(r,a)<$Be?(t.originalLength=o.originalStart+o.originalLength-t.originalStart,t.modifiedLength=o.modifiedStart+o.modifiedLength-t.modifiedStart):(e.push(o),t=o)}return e}mh(Vse,"postProcessCharChanges");class v0{static{mh(this,"LineChange")}originalStartLineNumber;originalEndLineNumber;modifiedStartLineNumber;modifiedEndLineNumber;charChanges;constructor(e,t,n,s,o){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=s,this.charChanges=o}static createFromDiffResult(e,t,n,s,o,r,a){let l,c,d,h,u;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,c=0):(l=n.getStartLineNumber(t.originalStart),c=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(d=s.getStartLineNumber(t.modifiedStart)-1,h=0):(d=s.getStartLineNumber(t.modifiedStart),h=s.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),r&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&o()){const f=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),p=s.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(f.getElements().length>0&&p.getElements().length>0){let m=o2(f,p,o,!0).changes;a&&(m=Vse(m)),u=[];for(let _=0,w=m.length;_<w;_++)u.push(SC.createFromDiffChange(m[_],f,p))}}return new v0(l,c,d,h,u)}}class KBe{static{mh(this,"DiffComputer")}shouldComputeCharChanges;shouldPostProcessCharChanges;shouldIgnoreTrimWhitespace;shouldMakePrettyDiff;originalLines;modifiedLines;original;modified;continueLineDiff;continueCharDiff;constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new gz(e),this.modified=new gz(t),this.continueLineDiff=YV(n.maxComputationTime),this.continueCharDiff=YV(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=o2(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(v0.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const s=[];let o=0,r=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,d=c?c.originalStart:this.originalLines.length,h=c?c.modifiedStart:this.modifiedLines.length;for(;o<d&&r<h;){const u=this.originalLines[o],f=this.modifiedLines[r];if(u!==f){{let p=Ek(u,1),m=Ek(f,1);for(;p>1&&m>1;){const _=u.charCodeAt(p-2),w=f.charCodeAt(m-2);if(_!==w)break;p--,m--}(p>1||m>1)&&this._pushTrimWhitespaceCharChange(s,o+1,1,p,r+1,1,m)}{let p=Lk(u,1),m=Lk(f,1);const _=u.length+1,w=f.length+1;for(;p<_&&m<w;){const v=u.charCodeAt(p-1),b=u.charCodeAt(m-1);if(v!==b)break;p++,m++}(p<_||m<w)&&this._pushTrimWhitespaceCharChange(s,o+1,p,_,r+1,m,w)}}o++,r++}c&&(s.push(v0.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),o+=c.originalLength,r+=c.modifiedLength)}return{quitEarly:n,changes:s}}_pushTrimWhitespaceCharChange(e,t,n,s,o,r,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,s,o,r,a))return;let l;this.shouldComputeCharChanges&&(l=[new SC(t,n,t,s,o,r,o,a)]),e.push(new v0(t,t,o,o,l))}_mergeTrimWhitespaceCharChange(e,t,n,s,o,r,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===o?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new SC(t,n,t,s,o,r,o,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===o?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=o,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new SC(t,n,t,s,o,r,o,a)),!0):!1}}function Ek(i,e){const t=ia(i);return t===-1?e:t+1}mh(Ek,"getFirstNonBlankColumn");function Lk(i,e){const t=nm(i);return t===-1?e:t+2}mh(Lk,"getLastNonBlankColumn");function YV(i){if(i===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<i}mh(YV,"createContinueProcessingPredicate");var jBe=Object.defineProperty,TD=(i,e)=>jBe(i,"name",{value:e,configurable:!0});class w0{constructor(e,t,n,s,o){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=n,this.breakOffsetsVisibleColumn=s,this.wrappedTextIndentLength=o}static{TD(this,"ModelLineProjectionData")}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let s=this.breakOffsets[e]-t;return e>0&&(s+=this.wrappedTextIndentLength),s}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let s=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let o=0;o<this.injectionOffsets.length&&s>this.injectionOffsets[o];o++)s<this.injectionOffsets[o]+this.injectionOptions[o].content.length?s=this.injectionOffsets[o]:s-=this.injectionOptions[o].content.length;return s}translateToOutputPosition(e,t=In.None){let n=e;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&!(e<this.injectionOffsets[s]||t!==In.Right&&e===this.injectionOffsets[s]);s++)n+=this.injectionOptions[s].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e,t=In.None){let n=0,s=this.breakOffsets.length-1,o=0,r=0;for(;n<=s;){o=n+(s-n)/2|0;const l=this.breakOffsets[o];if(r=o>0?this.breakOffsets[o-1]:0,t===In.Left)if(e<=r)s=o-1;else if(e>l)n=o+1;else break;else if(e<r)s=o-1;else if(e>=l)n=o+1;else break}let a=e-r;return o>0&&(a+=this.wrappedTextIndentLength),new MI(o,a)}normalizeOutputPosition(e,t,n){if(this.injectionOffsets!==null){const s=this.outputPositionToOffsetInInputWithInjections(e,t),o=this.normalizeOffsetInInputWithInjectionsAroundInjections(s,n);if(o!==s)return this.offsetInInputWithInjectionsToOutputPosition(o,n)}if(n===In.Left){if(e>0&&t===this.getMinOutputOffset(e))return new MI(e-1,this.getMaxOutputOffset(e-1))}else if(n===In.Right){const s=this.getOutputLineCount()-1;if(e<s&&t===this.getMaxOutputOffset(e))return new MI(e+1,this.getMinOutputOffset(e+1))}return new MI(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===In.None){if(e===n.offsetInInputWithInjections+n.length&&ZV(this.injectionOptions[n.injectedTextIndex].cursorStops))return n.offsetInInputWithInjections+n.length;{let s=n.offsetInInputWithInjections;if(XV(this.injectionOptions[n.injectedTextIndex].cursorStops))return s;let o=n.injectedTextIndex-1;for(;o>=0&&this.injectionOffsets[o]===this.injectionOffsets[n.injectedTextIndex]&&!(ZV(this.injectionOptions[o].cursorStops)||(s-=this.injectionOptions[o].content.length,XV(this.injectionOptions[o].cursorStops)));)o--;return s}}else if(t===In.Right||t===In.RightOfInjectedText){let s=n.offsetInInputWithInjections+n.length,o=n.injectedTextIndex;for(;o+1<this.injectionOffsets.length&&this.injectionOffsets[o+1]===this.injectionOffsets[o];)s+=this.injectionOptions[o+1].content.length,o++;return s}else if(t===In.Left||t===In.LeftOfInjectedText){let s=n.offsetInInputWithInjections,o=n.injectedTextIndex;for(;o-1>=0&&this.injectionOffsets[o-1]===this.injectionOffsets[o];)s-=this.injectionOptions[o-1].content.length,o--;return s}TN()}getInjectedText(e,t){const n=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.getInjectedTextAtOffset(n);return s?{options:this.injectionOptions[s.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let s=0;for(let o=0;o<t.length;o++){const r=n[o].content.length,a=t[o]+s,l=t[o]+s+r;if(a>e)break;if(e<=l)return{injectedTextIndex:o,offsetInInputWithInjections:a,length:r};s+=r}}}}function ZV(i){return i==null?!0:i===vE.Right||i===vE.Both}TD(ZV,"hasRightCursorStop");function XV(i){return i==null?!0:i===vE.Left||i===vE.Both}TD(XV,"hasLeftCursorStop");class wGe{constructor(e){this.options=e}static{TD(this,"InjectedText")}}class MI{static{TD(this,"OutputPosition")}outputLineIndex;outputOffset;constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new j(e+this.outputLineIndex,this.outputOffset+1)}}var qBe=Object.defineProperty,Cu=(i,e)=>qBe(i,"name",{value:e,configurable:!0}),Zi=(i=>(i[i.Other=0]="Other",i[i.DeletingLeft=2]="DeletingLeft",i[i.DeletingRight=3]="DeletingRight",i[i.TypingOther=4]="TypingOther",i[i.TypingFirstSpace=5]="TypingFirstSpace",i[i.TypingConsecutiveSpace=6]="TypingConsecutiveSpace",i))(Zi||{});const YBe=Cu(()=>!0,"autoCloseAlways"),ZBe=Cu(()=>!1,"autoCloseNever"),XBe=Cu(i=>i===" "||i==="	","autoCloseBeforeWhitespace");class Kv{constructor(e,t,n,s){this.languageConfigurationService=s,this._languageId=e;const o=n.options,r=o.get(k.layoutInfo),a=o.get(k.fontInfo);this.readOnly=o.get(k.readOnly),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=o.get(k.stickyTabStops),this.lineHeight=a.lineHeight,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=o.get(k.useTabStops),this.wordSeparators=o.get(k.wordSeparators),this.emptySelectionClipboard=o.get(k.emptySelectionClipboard),this.copyWithSyntaxHighlighting=o.get(k.copyWithSyntaxHighlighting),this.multiCursorMergeOverlapping=o.get(k.multiCursorMergeOverlapping),this.multiCursorPaste=o.get(k.multiCursorPaste),this.multiCursorLimit=o.get(k.multiCursorLimit),this.autoClosingBrackets=o.get(k.autoClosingBrackets),this.autoClosingComments=o.get(k.autoClosingComments),this.autoClosingQuotes=o.get(k.autoClosingQuotes),this.autoClosingDelete=o.get(k.autoClosingDelete),this.autoClosingOvertype=o.get(k.autoClosingOvertype),this.autoSurround=o.get(k.autoSurround),this.autoIndent=o.get(k.autoIndent),this.wordSegmenterLocales=o.get(k.wordSegmenterLocales),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(const d of l)this.surroundingPairs[d.open]=d.close;const c=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=c?.blockCommentStartToken??null}static{Cu(this,"CursorConfiguration")}_cursorMoveConfigurationBrand=void 0;readOnly;tabSize;indentSize;insertSpaces;stickyTabStops;pageSize;lineHeight;typicalHalfwidthCharacterWidth;useTabStops;wordSeparators;emptySelectionClipboard;copyWithSyntaxHighlighting;multiCursorMergeOverlapping;multiCursorPaste;multiCursorLimit;autoClosingBrackets;autoClosingComments;autoClosingQuotes;autoClosingDelete;autoClosingOvertype;autoSurround;autoIndent;autoClosingPairs;surroundingPairs;blockCommentStartToken;shouldAutoCloseBefore;wordSegmenterLocales;_languageId;_electricChars;static shouldRecreate(e){return e.hasChanged(k.layoutInfo)||e.hasChanged(k.wordSeparators)||e.hasChanged(k.emptySelectionClipboard)||e.hasChanged(k.multiCursorMergeOverlapping)||e.hasChanged(k.multiCursorPaste)||e.hasChanged(k.multiCursorLimit)||e.hasChanged(k.autoClosingBrackets)||e.hasChanged(k.autoClosingComments)||e.hasChanged(k.autoClosingQuotes)||e.hasChanged(k.autoClosingDelete)||e.hasChanged(k.autoClosingOvertype)||e.hasChanged(k.autoSurround)||e.hasChanged(k.useTabStops)||e.hasChanged(k.fontInfo)||e.hasChanged(k.readOnly)||e.hasChanged(k.wordSegmenterLocales)}get electricChars(){if(!this._electricChars){this._electricChars={};const e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter?.getElectricCharacters();if(e)for(const t of e)this._electricChars[t]=!0}return this._electricChars}onElectricCharacter(e,t,n){const s=Cp(t,n-1),o=this.languageConfigurationService.getLanguageConfiguration(s.languageId).electricCharacter;return o?o.onElectricCharacter(e,s,n-s.firstCharOffset):null}normalizeIndentation(e){return o6(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,n){switch(t){case"beforeWhitespace":return XBe;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,n);case"always":return YBe;case"never":return ZBe}}_getLanguageDefinedShouldAutoClose(e,t){const n=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return s=>n.indexOf(s)!==-1}visibleColumnFromColumn(e,t){return Rn.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,n){const s=Rn.columnFromVisibleColumn(e.getLineContent(t),n,this.tabSize),o=e.getLineMinColumn(t);if(s<o)return o;const r=e.getLineMaxColumn(t);return s>r?r:s}}class Tt{static{Cu(this,"CursorState")}_cursorStateBrand=void 0;static fromModelState(e){return new QBe(e)}static fromViewState(e){return new JBe(e)}static fromModelSelection(e){const t=St.liftSelection(e),n=new no(V.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return Tt.fromModelState(n)}static fromModelSelections(e){const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=this.fromModelSelection(e[n]);return t}modelState;viewState;constructor(e,t){this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class QBe{static{Cu(this,"PartialModelCursorState")}modelState;viewState;constructor(e){this.modelState=e,this.viewState=null}}class JBe{static{Cu(this,"PartialViewCursorState")}modelState;viewState;constructor(e){this.modelState=null,this.viewState=e}}var Ga=(i=>(i[i.Simple=0]="Simple",i[i.Word=1]="Word",i[i.Line=2]="Line",i))(Ga||{});class no{constructor(e,t,n,s,o){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=n,this.position=s,this.leftoverVisibleColumns=o,this.selection=no._computeSelection(this.selectionStart,this.position)}static{Cu(this,"SingleCursorState")}_singleCursorStateBrand=void 0;selection;equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,s){return e?new no(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new j(t,n),s):new no(new V(t,n,t,n),0,s,new j(t,n),s)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?St.fromPositions(e.getStartPosition(),t):St.fromPositions(e.getEndPosition(),t)}}class aa{static{Cu(this,"EditOperationResult")}_editOperationResultBrand=void 0;type;commands;shouldPushStackElementBefore;shouldPushStackElementAfter;constructor(e,t,n){this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function nf(i){return i==="'"||i==='"'||i==="`"}Cu(nf,"isQuote");var eFe=Object.defineProperty,tFe=(i,e)=>eFe(i,"name",{value:e,configurable:!0});class iFe{static{tFe(this,"EditorTheme")}_theme;get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}var nFe=Object.defineProperty,ur=(i,e)=>nFe(i,"name",{value:e,configurable:!0}),Oo=(i=>(i[i.ViewCompositionStart=0]="ViewCompositionStart",i[i.ViewCompositionEnd=1]="ViewCompositionEnd",i[i.ViewConfigurationChanged=2]="ViewConfigurationChanged",i[i.ViewCursorStateChanged=3]="ViewCursorStateChanged",i[i.ViewDecorationsChanged=4]="ViewDecorationsChanged",i[i.ViewFlushed=5]="ViewFlushed",i[i.ViewFocusChanged=6]="ViewFocusChanged",i[i.ViewLanguageConfigurationChanged=7]="ViewLanguageConfigurationChanged",i[i.ViewLineMappingChanged=8]="ViewLineMappingChanged",i[i.ViewLinesChanged=9]="ViewLinesChanged",i[i.ViewLinesDeleted=10]="ViewLinesDeleted",i[i.ViewLinesInserted=11]="ViewLinesInserted",i[i.ViewRevealRangeRequest=12]="ViewRevealRangeRequest",i[i.ViewScrollChanged=13]="ViewScrollChanged",i[i.ViewThemeChanged=14]="ViewThemeChanged",i[i.ViewTokensChanged=15]="ViewTokensChanged",i[i.ViewTokensColorsChanged=16]="ViewTokensColorsChanged",i[i.ViewZonesChanged=17]="ViewZonesChanged",i))(Oo||{});class sFe{static{ur(this,"ViewCompositionStartEvent")}type=0;constructor(){}}class oFe{static{ur(this,"ViewCompositionEndEvent")}type=1;constructor(){}}class rFe{static{ur(this,"ViewConfigurationChangedEvent")}type=2;_source;constructor(e){this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class aFe{constructor(e,t,n){this.selections=e,this.modelSelections=t,this.reason=n}static{ur(this,"ViewCursorStateChangedEvent")}type=3}class Pm{static{ur(this,"ViewDecorationsChangedEvent")}type=4;affectsMinimap;affectsOverviewRuler;affectsGlyphMargin;affectsLineNumber;constructor(e){e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class BI{static{ur(this,"ViewFlushedEvent")}type=5;constructor(){}}class lFe{static{ur(this,"ViewFocusChangedEvent")}type=6;isFocused;constructor(e){this.isFocused=e}}class cFe{static{ur(this,"ViewLanguageConfigurationEvent")}type=7}class FI{static{ur(this,"ViewLineMappingChangedEvent")}type=8;constructor(){}}class Wse{constructor(e,t){this.fromLineNumber=e,this.count=t}static{ur(this,"ViewLinesChangedEvent")}type=9}class QV{static{ur(this,"ViewLinesDeletedEvent")}type=10;fromLineNumber;toLineNumber;constructor(e,t){this.fromLineNumber=e,this.toLineNumber=t}}class JV{static{ur(this,"ViewLinesInsertedEvent")}type=11;fromLineNumber;toLineNumber;constructor(e,t){this.fromLineNumber=e,this.toLineNumber=t}}var ei=(i=>(i[i.Simple=0]="Simple",i[i.Center=1]="Center",i[i.CenterIfOutsideViewport=2]="CenterIfOutsideViewport",i[i.Top=3]="Top",i[i.Bottom=4]="Bottom",i[i.NearTop=5]="NearTop",i[i.NearTopIfOutsideViewport=6]="NearTopIfOutsideViewport",i))(ei||{});class C0{constructor(e,t,n,s,o,r,a){this.source=e,this.minimalReveal=t,this.range=n,this.selections=s,this.verticalType=o,this.revealHorizontal=r,this.scrollType=a}static{ur(this,"ViewRevealRangeRequestEvent")}type=12}class dFe{static{ur(this,"ViewScrollChangedEvent")}type=13;scrollWidth;scrollLeft;scrollHeight;scrollTop;scrollWidthChanged;scrollLeftChanged;scrollHeightChanged;scrollTopChanged;constructor(e){this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class hFe{constructor(e){this.theme=e}static{ur(this,"ViewThemeChangedEvent")}type=14}class uFe{static{ur(this,"ViewTokensChangedEvent")}type=15;ranges;constructor(e){this.ranges=e}}class gFe{static{ur(this,"ViewTokensColorsChangedEvent")}type=16;constructor(){}}let fFe=class{static{ur(this,"ViewZonesChangedEvent")}type=17;constructor(){}};var pFe=Object.defineProperty,mFe=(i,e)=>pFe(i,"name",{value:e,configurable:!0});class AD extends ${static{mFe(this,"ViewEventHandler")}_shouldRender;constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,s=e.length;n<s;n++){const o=e[n];switch(o.type){case Oo.ViewCompositionStart:this.onCompositionStart(o)&&(t=!0);break;case Oo.ViewCompositionEnd:this.onCompositionEnd(o)&&(t=!0);break;case Oo.ViewConfigurationChanged:this.onConfigurationChanged(o)&&(t=!0);break;case Oo.ViewCursorStateChanged:this.onCursorStateChanged(o)&&(t=!0);break;case Oo.ViewDecorationsChanged:this.onDecorationsChanged(o)&&(t=!0);break;case Oo.ViewFlushed:this.onFlushed(o)&&(t=!0);break;case Oo.ViewFocusChanged:this.onFocusChanged(o)&&(t=!0);break;case Oo.ViewLanguageConfigurationChanged:this.onLanguageConfigurationChanged(o)&&(t=!0);break;case Oo.ViewLineMappingChanged:this.onLineMappingChanged(o)&&(t=!0);break;case Oo.ViewLinesChanged:this.onLinesChanged(o)&&(t=!0);break;case Oo.ViewLinesDeleted:this.onLinesDeleted(o)&&(t=!0);break;case Oo.ViewLinesInserted:this.onLinesInserted(o)&&(t=!0);break;case Oo.ViewRevealRangeRequest:this.onRevealRangeRequest(o)&&(t=!0);break;case Oo.ViewScrollChanged:this.onScrollChanged(o)&&(t=!0);break;case Oo.ViewTokensChanged:this.onTokensChanged(o)&&(t=!0);break;case Oo.ViewThemeChanged:this.onThemeChanged(o)&&(t=!0);break;case Oo.ViewTokensColorsChanged:this.onTokensColorsChanged(o)&&(t=!0);break;case Oo.ViewZonesChanged:this.onZonesChanged(o)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(o)}}t&&(this._shouldRender=!0)}}var _Fe=Object.defineProperty,mm=(i,e)=>_Fe(i,"name",{value:e,configurable:!0});class fz{static{mm(this,"Viewport")}_viewportBrand=void 0;top;left;width;height;constructor(e,t,n,s){this.top=e|0,this.left=t|0,this.width=n|0,this.height=s|0}}class bFe{static{mm(this,"MinimapLinesRenderingData")}tabSize;data;constructor(e,t){this.tabSize=e,this.data=t}}class r2{static{mm(this,"ViewLineData")}_viewLineDataBrand=void 0;content;continuesWithWrappedLine;minColumn;maxColumn;startVisibleColumn;tokens;inlineDecorations;constructor(e,t,n,s,o,r,a){this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=s,this.startVisibleColumn=o,this.tokens=r,this.inlineDecorations=a}}class Xp{static{mm(this,"ViewLineRenderingData")}minColumn;maxColumn;content;continuesWithWrappedLine;containsRTL;isBasicASCII;tokens;inlineDecorations;tabSize;startVisibleColumn;constructor(e,t,n,s,o,r,a,l,c,d){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=s,this.isBasicASCII=Xp.isBasicASCII(n,r),this.containsRTL=Xp.containsRTL(n,this.isBasicASCII,o),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=d}static isBasicASCII(e,t){return t?VN(e):!0}static containsRTL(e,t,n){return!t&&n?VC(e):!1}}var lr=(i=>(i[i.Regular=0]="Regular",i[i.Before=1]="Before",i[i.After=2]="After",i[i.RegularAffectingLetterSpacing=3]="RegularAffectingLetterSpacing",i))(lr||{});class y0{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}static{mm(this,"InlineDecoration")}}class vFe{constructor(e,t,n,s){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=s}static{mm(this,"SingleLineInlineDecoration")}toInlineDecoration(e){return new y0(new V(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class Hse{static{mm(this,"ViewModelDecoration")}_viewModelDecorationBrand=void 0;range;options;constructor(e,t){this.range=e,this.options=t}}class sL{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static{mm(this,"OverviewRulerDecorationsGroup")}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&ks(e.data,t.data)}static equalsArr(e,t){return ks(e,t,sL.equals)}}var wFe=Object.defineProperty,a2=(i,e)=>wFe(i,"name",{value:e,configurable:!0});class pz{static{a2(this,"ColorZone")}_colorZoneBrand=void 0;from;to;colorId;constructor(e,t,n){this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class Use{static{a2(this,"OverviewRulerZone")}_overviewRulerZoneBrand=void 0;startLineNumber;endLineNumber;heightInLines;color;_colorZone;constructor(e,t,n,s){this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=n,this.color=s,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class CFe{static{a2(this,"OverviewZoneManager")}_getVerticalOffsetForLine;_zones;_colorZonesInvalid;_lineHeight;_domWidth;_domHeight;_outerHeight;_pixelRatio;_lastAssignedId;_color2Id;_id2Color;constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(Use.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),s=Math.floor(this._outerHeight),o=n/s,r=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const d=this._zones[l];if(!e){const C=d.getColorZones();if(C){a.push(C);continue}}const h=this._getVerticalOffsetForLine(d.startLineNumber),u=d.heightInLines===0?this._getVerticalOffsetForLine(d.endLineNumber)+t:h+d.heightInLines*t,f=Math.floor(o*h),p=Math.floor(o*u);let m=Math.floor((f+p)/2),_=p-m;_<r&&(_=r),m-_<0&&(m=_),m+_>n&&(m=n-_);const w=d.color;let v=this._color2Id[w];v||(v=++this._lastAssignedId,this._color2Id[w]=v,this._id2Color[v]=w);const b=new pz(m-_,m+_,v);d.setColorZone(b),a.push(b)}return this._colorZonesInvalid=!1,a.sort(pz.compare),a}}var yFe=Object.defineProperty,xD=(i,e)=>yFe(i,"name",{value:e,configurable:!0}),t_=(i=>(i[i.EXACT=0]="EXACT",i[i.ABOVE=1]="ABOVE",i[i.BELOW=2]="BELOW",i))(t_||{}),Vf=(i=>(i[i.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",i[i.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",i[i.TOP_CENTER=2]="TOP_CENTER",i))(Vf||{}),Ot=(i=>(i[i.UNKNOWN=0]="UNKNOWN",i[i.TEXTAREA=1]="TEXTAREA",i[i.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",i[i.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",i[i.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",i[i.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",i[i.CONTENT_TEXT=6]="CONTENT_TEXT",i[i.CONTENT_EMPTY=7]="CONTENT_EMPTY",i[i.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",i[i.CONTENT_WIDGET=9]="CONTENT_WIDGET",i[i.OVERVIEW_RULER=10]="OVERVIEW_RULER",i[i.SCROLLBAR=11]="SCROLLBAR",i[i.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",i[i.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR",i))(Ot||{});function vy(i){return i&&typeof i.getEditorType=="function"?i.getEditorType()===bP.ICodeEditor:!1}xD(vy,"isCodeEditor");function kD(i){return i&&typeof i.getEditorType=="function"?i.getEditorType()===bP.IDiffEditor:!1}xD(kD,"isDiffEditor");function zse(i){return!!i&&typeof i=="object"&&typeof i.onDidChangeActiveEditor=="function"}xD(zse,"isCompositeEditor");function SFe(i){return vy(i)?i:kD(i)?i.getModifiedEditor():zse(i)&&vy(i.activeCodeEditor)?i.activeCodeEditor:null}xD(SFe,"getCodeEditor");function $se(i){return vy(i)||kD(i)?i:null}xD($se,"getIEditor");const Yb=De("codeEditorService");var EFe=Object.defineProperty,Qn=(i,e)=>EFe(i,"name",{value:e,configurable:!0}),vl=(i=>(i[i.Eager=0]="Eager",i[i.AfterFirstRender=1]="AfterFirstRender",i[i.BeforeFirstInteraction=2]="BeforeFirstInteraction",i[i.Eventually=3]="Eventually",i[i.Lazy=4]="Lazy",i))(vl||{});class wR{static{Qn(this,"Command")}id;precondition;_kbOpts;_menuOpts;metadata;constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=Z.and(n,this.precondition):n=this.precondition);const s={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};gt.registerKeybindingRule(s)}}Mi.registerCommand({id:this.id,handler:Qn((e,t)=>this.runCommand(e,t),"handler"),metadata:this.metadata})}_registerMenuItem(e){xt.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class l2 extends wR{static{Qn(this,"MultiCommand")}_implementations=[];addImplementation(e,t,n,s){return this._implementations.push({priority:e,name:t,implementation:n,when:s}),this._implementations.sort((o,r)=>r.priority-o.priority),{dispose:Qn(()=>{for(let o=0;o<this._implementations.length;o++)if(this._implementations[o].implementation===n){this._implementations.splice(o,1);return}},"dispose")}}runCommand(e,t){const n=e.get(jo),s=e.get(Ye);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const o of this._implementations){if(o.when){const a=s.getContext(Lr());if(!o.when.evaluate(a))continue}const r=o.implementation(e,t);if(r)return n.trace(`Command '${this.id}' was handled by '${o.name}'.`),typeof r=="boolean"?void 0:r}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class Gse extends wR{constructor(e,t){super(t),this.command=e}static{Qn(this,"ProxyCommand")}runCommand(e,t){return this.command.runCommand(e,t)}}class wy extends wR{static{Qn(this,"EditorCommand")}static bindToContribution(e){return class extends wy{static{Qn(this,"EditorControllerCommandImpl")}_callback;constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,s,o){const r=e(s);r&&this._callback(r,o)}}}static runEditorCommand(e,t,n,s){const o=e.get(Yb),r=o.getFocusedCodeEditor()||o.getActiveCodeEditor();if(r)return r.invokeWithinContext(a=>{if(a.get(Ye).contextMatchesRules(n??void 0))return s(a,r,t)})}runCommand(e,t){return wy.runEditorCommand(e,t,this.precondition,(n,s,o)=>this.runEditorCommand(n,s,o))}}class c2 extends wy{static{Qn(this,"EditorAction")}static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(s){return s.menuId||(s.menuId=N.EditorContext),s.title||(s.title=e.label),s.when=Z.and(e.precondition,s.when),s}return Qn(n,"withDefaults"),Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}label;alias;constructor(e){super(c2.convertOptions(e)),this.label=e.label,this.alias=e.alias}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(rs).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class SGe extends c2{static{Qn(this,"MultiEditorAction")}_implementations=[];addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,s)=>s[0]-n[0]),{dispose:Qn(()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}},"dispose")}}run(e,t,n){for(const s of this._implementations){const o=s[1](e,t,n);if(o)return typeof o=="boolean"?void 0:o}}}class EGe extends ge{static{Qn(this,"EditorAction2")}run(e,...t){const n=e.get(Yb),s=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(s)return s.invokeWithinContext(o=>{const r=o.get(Ye),a=o.get(jo);if(!r.contextMatchesRules(this.desc.precondition??void 0)){a.debug("[EditorAction2] NOT running command because its precondition is FALSE",this.desc.id,this.desc.precondition?.serialize());return}return this.runEditorCommand(o,s,...t)})}}function LFe(i,e){Mi.registerCommand(i,function(t,...n){const s=t.get(He),[o,r]=n;MC(ne.isUri(o)),MC(j.isIPosition(r));const a=t.get(Zc).getModel(o);if(a){const l=j.lift(r);return s.invokeFunction(e,a,l,...n.slice(2))}return t.get(T1e).createModelReference(o).then(l=>new Promise((c,d)=>{try{const h=s.invokeFunction(e,l.object.textEditorModel,j.lift(r),n.slice(2));c(h)}catch(h){d(h)}}).finally(()=>{l.dispose()}))})}Qn(LFe,"registerModelAndPositionCommand");function ht(i){return ja.INSTANCE.registerEditorCommand(i),i}Qn(ht,"registerEditorCommand");function DFe(i){const e=new i;return ja.INSTANCE.registerEditorAction(e),e}Qn(DFe,"registerEditorAction");function IFe(i){return ja.INSTANCE.registerEditorAction(i),i}Qn(IFe,"registerMultiEditorAction");function TFe(i){ja.INSTANCE.registerEditorAction(i)}Qn(TFe,"registerInstantiatedEditorAction");function Kse(i,e,t){ja.INSTANCE.registerEditorContribution(i,e,t)}Qn(Kse,"registerEditorContribution");function AFe(i,e){ja.INSTANCE.registerDiffEditorContribution(i,e)}Qn(AFe,"registerDiffEditorContribution");var EC;(i=>{function e(r){return ja.INSTANCE.getEditorCommand(r)}i.getEditorCommand=e,Qn(e,"getEditorCommand");function t(){return ja.INSTANCE.getEditorActions()}i.getEditorActions=t,Qn(t,"getEditorActions");function n(){return ja.INSTANCE.getEditorContributions()}i.getEditorContributions=n,Qn(n,"getEditorContributions");function s(r){return ja.INSTANCE.getEditorContributions().filter(a=>r.indexOf(a.id)>=0)}i.getSomeEditorContributions=s,Qn(s,"getSomeEditorContributions");function o(){return ja.INSTANCE.getDiffEditorContributions()}i.getDiffEditorContributions=o,Qn(o,"getDiffEditorContributions")})(EC||(EC={}));const xFe={EditorCommonContributions:"editor.contributions"};class ja{static{Qn(this,"EditorContributionRegistry")}static INSTANCE=new ja;editorContributions=[];diffEditorContributions=[];editorActions=[];editorCommands=Object.create(null);constructor(){}registerEditorContribution(e,t,n){this.editorContributions.push({id:e,ctor:t,instantiation:n})}getEditorContributions(){return this.editorContributions.slice(0)}registerDiffEditorContribution(e,t){this.diffEditorContributions.push({id:e,ctor:t})}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}Xt.add(xFe.EditorCommonContributions,ja.INSTANCE);function vS(i){return i.register(),i}Qn(vS,"registerCommand");const jse=vS(new l2({id:"undo",precondition:void 0,kbOpts:{weight:Ce.EditorCore,primary:M.CtrlCmd|E.KeyZ},menuOpts:[{menuId:N.MenubarEditMenu,group:"1_do",title:g({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:N.CommandPalette,group:"",title:g("undo","Undo"),order:1}]}));vS(new Gse(jse,{id:"default:undo",precondition:void 0}));const qse=vS(new l2({id:"redo",precondition:void 0,kbOpts:{weight:Ce.EditorCore,primary:M.CtrlCmd|E.KeyY,secondary:[M.CtrlCmd|M.Shift|E.KeyZ],mac:{primary:M.CtrlCmd|M.Shift|E.KeyZ}},menuOpts:[{menuId:N.MenubarEditMenu,group:"1_do",title:g({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:N.CommandPalette,group:"",title:g("redo","Redo"),order:1}]}));vS(new Gse(qse,{id:"default:redo",precondition:void 0}));const kFe=vS(new l2({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:Ce.EditorCore,kbExpr:null,primary:M.CtrlCmd|E.KeyA},menuOpts:[{menuId:N.MenubarSelectionMenu,group:"1_basic",title:g({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:N.CommandPalette,group:"",title:g("selectAll","Select All"),order:1}]}));var NFe=Object.defineProperty,yu=(i,e)=>NFe(i,"name",{value:e,configurable:!0});const PFe=Vt("panel-maximize",ee.chevronUp,g("maximizeIcon","Icon to maximize a panel.")),RFe=Vt("panel-restore",ee.chevronDown,g("restoreIcon","Icon to restore a panel.")),Yse=Vt("panel-close",ee.close,g("closeIcon","Icon to close a panel.")),OFe=Vt("panel-layout-icon",ee.layoutPanel,g("togglePanelOffIcon","Icon to toggle the panel off when it is on.")),MFe=Vt("panel-layout-icon-off",ee.layoutPanelOff,g("togglePanelOnIcon","Icon to toggle the panel on when it is off."));class sf extends ge{static{yu(this,"TogglePanelAction")}static ID="workbench.action.togglePanel";static LABEL=W("togglePanelVisibility","Toggle Panel Visibility");constructor(){super({id:sf.ID,title:sf.LABEL,toggled:{condition:gy,title:g("toggle panel","Panel"),mnemonicTitle:g({key:"toggle panel mnemonic",comment:["&& denotes a mnemonic"]},"&&Panel")},f1:!0,category:oe.View,keybinding:{primary:M.CtrlCmd|E.KeyJ,weight:Ce.WorkbenchContrib},menu:[{id:N.MenubarAppearanceMenu,group:"2_workbench_layout",order:5},{id:N.LayoutControlMenuSubmenu,group:"0_workbench_layout",order:4}]})}async run(e){const t=e.get(yt);t.setPartHidden(t.isVisible(Y.PANEL_PART),Y.PANEL_PART)}}Oe(sf);Oe(class extends ge{static ID="workbench.action.focusPanel";static LABEL=g("focusPanel","Focus into Panel");constructor(){super({id:"workbench.action.focusPanel",title:W("focusPanel","Focus into Panel"),category:oe.View,f1:!0})}async run(i){const e=i.get(yt),t=i.get(Cf);e.isVisible(Y.PANEL_PART)||e.setPartHidden(!1,Y.PANEL_PART),t.getActivePaneComposite(Te.Panel)?.focus()}});const VI={LEFT:"workbench.action.positionPanelLeft",RIGHT:"workbench.action.positionPanelRight",BOTTOM:"workbench.action.positionPanelBottom",TOP:"workbench.action.positionPanelTop"},WI={LEFT:"workbench.action.alignPanelLeft",RIGHT:"workbench.action.alignPanelRight",CENTER:"workbench.action.alignPanelCenter",JUSTIFY:"workbench.action.alignPanelJustify"};function d2(i,e,t,n,s){return{id:i,title:e,shortLabel:t,value:n,when:s}}yu(d2,"createPanelActionConfig");function x1(i,e,t,n){return d2(i,e,t,n,V_.notEqualsTo(Qa(n)))}yu(x1,"createPositionPanelActionConfig");function k1(i,e,t,n){return d2(i,e,t,n,wg.notEqualsTo(n))}yu(k1,"createAlignmentPanelActionConfig");const BFe=[x1(VI.TOP,W("positionPanelTop","Move Panel To Top"),g("positionPanelTopShort","Top"),Ht.TOP),x1(VI.LEFT,W("positionPanelLeft","Move Panel Left"),g("positionPanelLeftShort","Left"),Ht.LEFT),x1(VI.RIGHT,W("positionPanelRight","Move Panel Right"),g("positionPanelRightShort","Right"),Ht.RIGHT),x1(VI.BOTTOM,W("positionPanelBottom","Move Panel To Bottom"),g("positionPanelBottomShort","Bottom"),Ht.BOTTOM)],FFe=[k1(WI.LEFT,W("alignPanelLeft","Set Panel Alignment to Left"),g("alignPanelLeftShort","Left"),"left"),k1(WI.RIGHT,W("alignPanelRight","Set Panel Alignment to Right"),g("alignPanelRightShort","Right"),"right"),k1(WI.CENTER,W("alignPanelCenter","Set Panel Alignment to Center"),g("alignPanelCenterShort","Center"),"center"),k1(WI.JUSTIFY,W("alignPanelJustify","Set Panel Alignment to Justify"),g("alignPanelJustifyShort","Justify"),"justify")];xt.appendMenuItem(N.MenubarAppearanceMenu,{submenu:N.PanelPositionMenu,title:g("positionPanel","Panel Position"),group:"3_workbench_layout_move",order:4});BFe.forEach((i,e)=>{const{id:t,title:n,shortLabel:s,value:o,when:r}=i;Oe(class extends ge{constructor(){super({id:t,title:n,category:oe.View,f1:!0})}run(a){a.get(yt).setPanelPosition(o===void 0?Ht.BOTTOM:o)}}),xt.appendMenuItem(N.PanelPositionMenu,{command:{id:t,title:s,toggled:r.negate()},order:5+e})});xt.appendMenuItem(N.MenubarAppearanceMenu,{submenu:N.PanelAlignmentMenu,title:g("alignPanel","Align Panel"),group:"3_workbench_layout_move",order:5});FFe.forEach(i=>{const{id:e,title:t,shortLabel:n,value:s,when:o}=i;Oe(class extends ge{constructor(){super({id:e,title:t,category:oe.View,toggled:o.negate(),f1:!0})}run(r){r.get(yt).setPanelAlignment(s===void 0?"center":s)}}),xt.appendMenuItem(N.PanelAlignmentMenu,{command:{id:e,title:n,toggled:o.negate()},order:5})});class Zse extends ge{static{yu(this,"SwitchPanelViewAction")}constructor(e,t){super({id:e,title:t,category:oe.View,f1:!0})}async run(e,t){const n=e.get(Cf),s=n.getVisiblePaneCompositeIds(Te.Panel),o=n.getActivePaneComposite(Te.Panel);if(!o)return;let r;for(let a=0;a<s.length;a++)if(s[a]===o.getId()){r=s[(a+s.length+t)%s.length];break}typeof r=="string"&&await n.openPaneComposite(r,Te.Panel,!0)}}Oe(class extends Zse{constructor(){super("workbench.action.previousPanelView",W("previousPanelView","Previous Panel View"))}run(i){return super.run(i,-1)}});Oe(class extends Zse{constructor(){super("workbench.action.nextPanelView",W("nextPanelView","Next Panel View"))}run(i){return super.run(i,1)}});Oe(class extends ge{constructor(){super({id:"workbench.action.toggleMaximizedPanel",title:W("toggleMaximizedPanel","Toggle Maximized Panel"),tooltip:g("maximizePanel","Maximize Panel Size"),category:oe.View,f1:!0,icon:PFe,precondition:Z.or(wg.isEqualTo("center"),Z.and(V_.notEqualsTo("bottom"),V_.notEqualsTo("top"))),toggled:{condition:vie,icon:RFe,tooltip:g("minimizePanel","Restore Panel Size")},menu:[{id:N.PanelTitle,group:"navigation",order:1,when:Z.or(wg.isEqualTo("center"),Z.and(V_.notEqualsTo("bottom"),V_.notEqualsTo("top")))}]})}run(i){const e=i.get(yt),t=i.get(fs);if(e.getPanelAlignment()!=="center"&&vo(e.getPanelPosition())){t.warn(g("panelMaxNotSupported","Maximizing the panel is only supported when it is center aligned."));return}e.isVisible(Y.PANEL_PART)?e.toggleMaximizedPanel():(e.setPartHidden(!1,Y.PANEL_PART),e.isPanelMaximized()||e.toggleMaximizedPanel())}});Oe(class extends ge{constructor(){super({id:"workbench.action.closePanel",title:W("closePanel","Hide Panel"),category:oe.View,icon:Yse,menu:[{id:N.CommandPalette,when:gy},{id:N.PanelTitle,group:"navigation",order:2}]})}run(i){i.get(yt).setPartHidden(!0,Y.PANEL_PART)}});Oe(class extends ge{constructor(){super({id:"workbench.action.closeAuxiliaryBar",title:W("closeSecondarySideBar","Hide Secondary Side Bar"),category:oe.View,icon:Yse,menu:[{id:N.CommandPalette,when:Og},{id:N.AuxiliaryBarTitle,group:"navigation",order:2,when:Z.notEquals(`config.${rt.ACTIVITY_BAR_LOCATION}`,ti.TOP)}]})}run(i){i.get(yt).setPartHidden(!0,Y.AUXILIARYBAR_PART)}});xt.appendMenuItems([{id:N.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:sf.ID,title:g("togglePanel","Toggle Panel"),icon:MFe,toggled:{condition:gy,icon:OFe}},when:Z.or(Z.equals("config.workbench.layoutControl.type","toggles"),Z.equals("config.workbench.layoutControl.type","both")),order:1}},{id:N.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:sf.ID,title:W("hidePanel","Hide Panel")},when:Z.and(gy,Z.equals("viewLocation",Sr(Te.Panel))),order:2}}]);class CR extends ge{constructor(e,t,n){super(n),this.source=e,this.destination=t}static{yu(this,"MoveViewsBetweenPanelsAction")}run(e,...t){const n=e.get(Ro),s=e.get(yt),o=e.get(vf),r=n.getViewContainersByLocation(this.source),a=n.getViewContainersByLocation(this.destination);if(r.length){const l=o.getVisibleViewContainer(this.source);r.forEach(c=>n.moveViewContainerToLocation(c,this.destination,void 0,this.desc.id)),s.setPartHidden(!1,this.destination===Te.Panel?Y.PANEL_PART:Y.AUXILIARYBAR_PART),l&&a.length===0&&o.openViewContainer(l.id,!0)}}}class h2 extends CR{static{yu(this,"MovePanelToSidePanelAction")}static ID="workbench.action.movePanelToSidePanel";constructor(){super(Te.Panel,Te.AuxiliaryBar,{id:h2.ID,title:W("movePanelToSecondarySideBar","Move Panel Views To Secondary Side Bar"),category:oe.View,f1:!1})}}class u2 extends CR{static{yu(this,"MovePanelToSecondarySideBarAction")}static ID="workbench.action.movePanelToSecondarySideBar";constructor(){super(Te.Panel,Te.AuxiliaryBar,{id:u2.ID,title:W("movePanelToSecondarySideBar","Move Panel Views To Secondary Side Bar"),category:oe.View,f1:!0})}}Oe(h2);Oe(u2);class g2 extends CR{static{yu(this,"MoveSidePanelToPanelAction")}static ID="workbench.action.moveSidePanelToPanel";constructor(){super(Te.AuxiliaryBar,Te.Panel,{id:g2.ID,title:W("moveSidePanelToPanel","Move Secondary Side Bar Views To Panel"),category:oe.View,f1:!1})}}class f2 extends CR{static{yu(this,"MoveSecondarySideBarToPanelAction")}static ID="workbench.action.moveSecondarySideBarToPanel";constructor(){super(Te.AuxiliaryBar,Te.Panel,{id:f2.ID,title:W("moveSidePanelToPanel","Move Secondary Side Bar Views To Panel"),category:oe.View,f1:!0})}}Oe(g2);Oe(f2);var VFe=Object.defineProperty,$i=(i,e)=>VFe(i,"name",{value:e,configurable:!0});const WFe=Vt("menuBar",ee.layoutMenubar,g("menuBarIcon","Represents the menu bar")),HFe=Vt("activity-bar-left",ee.layoutActivitybarLeft,g("activityBarLeft","Represents the activity bar in the left position")),UFe=Vt("activity-bar-right",ee.layoutActivitybarRight,g("activityBarRight","Represents the activity bar in the right position")),Dk=Vt("panel-left",ee.layoutSidebarLeft,g("panelLeft","Represents a side bar in the left position")),zFe=Vt("panel-left-off",ee.layoutSidebarLeftOff,g("panelLeftOff","Represents a side bar in the left position toggled off")),Ik=Vt("panel-right",ee.layoutSidebarRight,g("panelRight","Represents side bar in the right position")),$Fe=Vt("panel-right-off",ee.layoutSidebarRightOff,g("panelRightOff","Represents side bar in the right position toggled off")),GFe=Vt("panel-bottom",ee.layoutPanel,g("panelBottom","Represents the bottom panel")),KFe=Vt("statusBar",ee.layoutStatusbar,g("statusBarIcon","Represents the status bar")),jFe=Vt("panel-align-left",ee.layoutPanelLeft,g("panelBottomLeft","Represents the bottom panel alignment set to the left")),qFe=Vt("panel-align-right",ee.layoutPanelRight,g("panelBottomRight","Represents the bottom panel alignment set to the right")),YFe=Vt("panel-align-center",ee.layoutPanelCenter,g("panelBottomCenter","Represents the bottom panel alignment set to the center")),ZFe=Vt("panel-align-justify",ee.layoutPanelJustify,g("panelBottomJustify","Represents the bottom panel alignment set to justified")),XFe=Vt("fullscreen",ee.screenFull,g("fullScreenIcon","Represents full screen")),QFe=Vt("centerLayoutIcon",ee.layoutCentered,g("centerLayoutIcon","Represents centered layout mode")),JFe=Vt("zenMode",ee.target,g("zenModeIcon","Represents zen mode"));Oe(class extends ge{constructor(){super({id:"workbench.action.closeSidebar",title:W("closeSidebar","Close Primary Side Bar"),category:oe.View,f1:!0})}run(i){i.get(yt).setPartHidden(!0,Y.SIDEBAR_PART)}});const Xse="workbench.action.toggleActivityBarVisibility";Oe(class extends ge{constructor(){super({id:"workbench.action.toggleCenteredLayout",title:{...W("toggleCenteredLayout","Toggle Centered Layout"),mnemonicTitle:g({key:"miToggleCenteredLayout",comment:["&& denotes a mnemonic"]},"&&Centered Layout")},precondition:dc.toNegated(),category:oe.View,f1:!0,toggled:b7,menu:[{id:N.MenubarAppearanceMenu,group:"1_toggle_view",order:3}]})}run(i){const e=i.get(yt);e.centerMainEditorLayout(!e.isMainEditorLayoutCentered())}});const Qse="workbench.sideBar.location";class Jse extends ge{constructor(e,t,n){super({id:e,title:t,f1:!1}),this.position=n}static{$i(this,"MoveSidebarPositionAction")}async run(e){const t=e.get(yt),n=e.get(Pe);if(t.getSideBarPosition()!==this.position)return n.updateValue(Qse,Qa(this.position))}}class yR extends Jse{static{$i(this,"MoveSidebarRightAction")}static ID="workbench.action.moveSideBarRight";constructor(){super(yR.ID,W("moveSidebarRight","Move Primary Side Bar Right"),Ht.RIGHT)}}class SR extends Jse{static{$i(this,"MoveSidebarLeftAction")}static ID="workbench.action.moveSideBarLeft";constructor(){super(SR.ID,W("moveSidebarLeft","Move Primary Side Bar Left"),Ht.LEFT)}}Oe(yR);Oe(SR);class Yr extends ge{static{$i(this,"ToggleSidebarPositionAction")}static ID="workbench.action.toggleSidebarPosition";static LABEL=g("toggleSidebarPosition","Toggle Primary Side Bar Position");static getLabel(e){return e.getSideBarPosition()===Ht.LEFT?g("moveSidebarRight","Move Primary Side Bar Right"):g("moveSidebarLeft","Move Primary Side Bar Left")}constructor(){super({id:Yr.ID,title:W("toggleSidebarPosition","Toggle Primary Side Bar Position"),category:oe.View,f1:!0})}run(e){const t=e.get(yt),n=e.get(Pe),o=t.getSideBarPosition()===Ht.LEFT?"right":"left";return n.updateValue(Qse,o)}}Oe(Yr);const eoe=Vt("configure-layout-icon",ee.layout,g("cofigureLayoutIcon","Icon represents workbench layout configuration."));xt.appendMenuItem(N.LayoutControlMenu,{submenu:N.LayoutControlMenuSubmenu,title:g("configureLayout","Configure Layout"),icon:eoe,group:"1_workbench_layout",when:Z.equals("config.workbench.layoutControl.type","menu")});xt.appendMenuItems([{id:N.ViewContainerTitleContext,item:{group:"3_workbench_layout_move",command:{id:Yr.ID,title:g("move side bar right","Move Primary Side Bar Right")},when:Z.and(Z.notEquals("config.workbench.sideBar.location","right"),Z.equals("viewContainerLocation",Sr(Te.Sidebar))),order:1}},{id:N.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:Yr.ID,title:g("move sidebar right","Move Primary Side Bar Right")},when:Z.and(Z.notEquals("config.workbench.sideBar.location","right"),Z.equals("viewLocation",Sr(Te.Sidebar))),order:1}},{id:N.ViewContainerTitleContext,item:{group:"3_workbench_layout_move",command:{id:Yr.ID,title:g("move sidebar left","Move Primary Side Bar Left")},when:Z.and(Z.equals("config.workbench.sideBar.location","right"),Z.equals("viewContainerLocation",Sr(Te.Sidebar))),order:1}},{id:N.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:Yr.ID,title:g("move sidebar left","Move Primary Side Bar Left")},when:Z.and(Z.equals("config.workbench.sideBar.location","right"),Z.equals("viewLocation",Sr(Te.Sidebar))),order:1}},{id:N.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:Yr.ID,title:g("move second sidebar left","Move Secondary Side Bar Left")},when:Z.and(Z.notEquals("config.workbench.sideBar.location","right"),Z.equals("viewLocation",Sr(Te.AuxiliaryBar))),order:1}},{id:N.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:Yr.ID,title:g("move second sidebar right","Move Secondary Side Bar Right")},when:Z.and(Z.equals("config.workbench.sideBar.location","right"),Z.equals("viewLocation",Sr(Te.AuxiliaryBar))),order:1}}]);xt.appendMenuItem(N.MenubarAppearanceMenu,{group:"3_workbench_layout_move",command:{id:Yr.ID,title:g({key:"miMoveSidebarRight",comment:["&& denotes a mnemonic"]},"&&Move Primary Side Bar Right")},when:Z.notEquals("config.workbench.sideBar.location","right"),order:2});xt.appendMenuItem(N.MenubarAppearanceMenu,{group:"3_workbench_layout_move",command:{id:Yr.ID,title:g({key:"miMoveSidebarLeft",comment:["&& denotes a mnemonic"]},"&&Move Primary Side Bar Left")},when:Z.equals("config.workbench.sideBar.location","right"),order:2});Oe(class extends ge{constructor(){super({id:"workbench.action.toggleEditorVisibility",title:{...W("toggleEditor","Toggle Editor Area Visibility"),mnemonicTitle:g({key:"miShowEditorArea",comment:["&& denotes a mnemonic"]},"Show &&Editor Area")},category:oe.View,f1:!0,toggled:bie,precondition:Z.and(dc.toNegated(),Z.or(wg.isEqualTo("center"),V_.notEqualsTo("bottom")))})}run(i){i.get(yt).toggleMaximizedPanel()}});xt.appendMenuItem(N.MenubarViewMenu,{group:"2_appearance",title:g({key:"miAppearance",comment:["&& denotes a mnemonic"]},"&&Appearance"),submenu:N.MenubarAppearanceMenu,order:1});class Lp extends ge{static{$i(this,"ToggleSidebarVisibilityAction")}static ID="workbench.action.toggleSidebarVisibility";constructor(){super({id:Lp.ID,title:W("toggleSidebar","Toggle Primary Side Bar Visibility"),toggled:{condition:vg,title:g("primary sidebar","Primary Side Bar"),mnemonicTitle:g({key:"primary sidebar mnemonic",comment:["&& denotes a mnemonic"]},"&&Primary Side Bar")},category:oe.View,f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|E.KeyB},menu:[{id:N.LayoutControlMenuSubmenu,group:"0_workbench_layout",order:0},{id:N.MenubarAppearanceMenu,group:"2_workbench_layout",order:1}]})}run(e){const t=e.get(yt);t.setPartHidden(t.isVisible(Y.SIDEBAR_PART),Y.SIDEBAR_PART)}}Oe(Lp);xt.appendMenuItems([{id:N.ViewContainerTitleContext,item:{group:"3_workbench_layout_move",command:{id:Lp.ID,title:g("compositePart.hideSideBarLabel","Hide Primary Side Bar")},when:Z.and(vg,Z.equals("viewContainerLocation",Sr(Te.Sidebar))),order:2}},{id:N.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:Lp.ID,title:g("compositePart.hideSideBarLabel","Hide Primary Side Bar")},when:Z.and(vg,Z.equals("viewLocation",Sr(Te.Sidebar))),order:2}},{id:N.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:Lp.ID,title:g("toggleSideBar","Toggle Primary Side Bar"),icon:zFe,toggled:{condition:vg,icon:Dk}},when:Z.and(Z.or(Z.equals("config.workbench.layoutControl.type","toggles"),Z.equals("config.workbench.layoutControl.type","both")),Z.equals("config.workbench.sideBar.location","left")),order:0}},{id:N.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:Lp.ID,title:g("toggleSideBar","Toggle Primary Side Bar"),icon:$Fe,toggled:{condition:vg,icon:Ik}},when:Z.and(Z.or(Z.equals("config.workbench.layoutControl.type","toggles"),Z.equals("config.workbench.layoutControl.type","both")),Z.equals("config.workbench.sideBar.location","right")),order:2}}]);class Zb extends ge{static{$i(this,"ToggleStatusbarVisibilityAction")}static ID="workbench.action.toggleStatusbarVisibility";static statusbarVisibleKey="workbench.statusBar.visible";constructor(){super({id:Zb.ID,title:{...W("toggleStatusbar","Toggle Status Bar Visibility"),mnemonicTitle:g({key:"miStatusbar",comment:["&& denotes a mnemonic"]},"S&&tatus Bar")},category:oe.View,f1:!0,toggled:Z.equals("config.workbench.statusBar.visible",!0),menu:[{id:N.MenubarAppearanceMenu,group:"2_workbench_layout",order:3}]})}run(e){const t=e.get(yt),n=e.get(Pe),o=!t.isVisible(Y.STATUSBAR_PART,_e);return n.updateValue(Zb.statusbarVisibleKey,o)}}Oe(Zb);class wS extends ge{constructor(e,t,n,s,o,r){super({id:s,title:n,category:oe.View,precondition:o,metadata:r?{description:r}:void 0,f1:!0}),this.settingName=e,this.value=t}static{$i(this,"AbstractSetShowTabsAction")}run(e){return e.get(Pe).updateValue(this.settingName,this.value)}}class p2 extends wS{static{$i(this,"HideEditorTabsAction")}static ID="workbench.action.hideEditorTabs";constructor(){const e=Z.and(Z.equals(`config.${rt.EDITOR_TABS_MODE}`,ra.NONE).negate(),oc.negate()),t=W("hideEditorTabs","Hide Editor Tabs");super(rt.EDITOR_TABS_MODE,ra.NONE,t,p2.ID,e,W("hideEditorTabsDescription","Hide Tab Bar"))}}class m2 extends wS{static{$i(this,"ZenHideEditorTabsAction")}static ID="workbench.action.zenHideEditorTabs";constructor(){const e=Z.and(Z.equals(`config.${vs.SHOW_TABS}`,ra.NONE).negate(),oc),t=W("hideEditorTabsZenMode","Hide Editor Tabs in Zen Mode");super(vs.SHOW_TABS,ra.NONE,t,m2.ID,e,W("hideEditorTabsZenModeDescription","Hide Tab Bar in Zen Mode"))}}class _2 extends wS{static{$i(this,"ShowMultipleEditorTabsAction")}static ID="workbench.action.showMultipleEditorTabs";constructor(){const e=Z.and(Z.equals(`config.${rt.EDITOR_TABS_MODE}`,ra.MULTIPLE).negate(),oc.negate()),t=W("showMultipleEditorTabs","Show Multiple Editor Tabs");super(rt.EDITOR_TABS_MODE,ra.MULTIPLE,t,_2.ID,e,W("showMultipleEditorTabsDescription","Show Tab Bar with multiple tabs"))}}class b2 extends wS{static{$i(this,"ZenShowMultipleEditorTabsAction")}static ID="workbench.action.zenShowMultipleEditorTabs";constructor(){const e=Z.and(Z.equals(`config.${vs.SHOW_TABS}`,ra.MULTIPLE).negate(),oc),t=W("showMultipleEditorTabsZenMode","Show Multiple Editor Tabs in Zen Mode");super(vs.SHOW_TABS,ra.MULTIPLE,t,b2.ID,e,W("showMultipleEditorTabsZenModeDescription","Show Tab Bar in Zen Mode"))}}class v2 extends wS{static{$i(this,"ShowSingleEditorTabAction")}static ID="workbench.action.showEditorTab";constructor(){const e=Z.and(Z.equals(`config.${rt.EDITOR_TABS_MODE}`,ra.SINGLE).negate(),oc.negate()),t=W("showSingleEditorTab","Show Single Editor Tab");super(rt.EDITOR_TABS_MODE,ra.SINGLE,t,v2.ID,e,W("showSingleEditorTabDescription","Show Tab Bar with one Tab"))}}class w2 extends wS{static{$i(this,"ZenShowSingleEditorTabAction")}static ID="workbench.action.zenShowEditorTab";constructor(){const e=Z.and(Z.equals(`config.${vs.SHOW_TABS}`,ra.SINGLE).negate(),oc),t=W("showSingleEditorTabZenMode","Show Single Editor Tab in Zen Mode");super(vs.SHOW_TABS,ra.SINGLE,t,w2.ID,e,W("showSingleEditorTabZenModeDescription","Show Tab Bar in Zen Mode with one Tab"))}}Oe(p2);Oe(m2);Oe(_2);Oe(b2);Oe(v2);Oe(w2);xt.appendMenuItem(N.MenubarAppearanceMenu,{submenu:N.EditorTabsBarShowTabsSubmenu,title:g("tabBar","Tab Bar"),group:"3_workbench_layout_move",order:10,when:oc.negate()});xt.appendMenuItem(N.MenubarAppearanceMenu,{submenu:N.EditorTabsBarShowTabsZenModeSubmenu,title:g("tabBar","Tab Bar"),group:"3_workbench_layout_move",order:10,when:oc});class C2 extends ge{static{$i(this,"EditorActionsTitleBarAction")}static ID="workbench.action.editorActionsTitleBar";constructor(){super({id:C2.ID,title:W("moveEditorActionsToTitleBar","Move Editor Actions to Title Bar"),category:oe.View,precondition:Z.equals(`config.${rt.EDITOR_ACTIONS_LOCATION}`,Uc.TITLEBAR).negate(),metadata:{description:W("moveEditorActionsToTitleBarDescription","Move Editor Actions from the tab bar to the title bar")},f1:!0})}run(e){return e.get(Pe).updateValue(rt.EDITOR_ACTIONS_LOCATION,Uc.TITLEBAR)}}Oe(C2);class y2 extends ge{static{$i(this,"EditorActionsDefaultAction")}static ID="workbench.action.editorActionsDefault";constructor(){super({id:y2.ID,title:W("moveEditorActionsToTabBar","Move Editor Actions to Tab Bar"),category:oe.View,precondition:Z.and(Z.equals(`config.${rt.EDITOR_ACTIONS_LOCATION}`,Uc.DEFAULT).negate(),Z.equals(`config.${rt.EDITOR_TABS_MODE}`,ra.NONE).negate()),metadata:{description:W("moveEditorActionsToTabBarDescription","Move Editor Actions from the title bar to the tab bar")},f1:!0})}run(e){return e.get(Pe).updateValue(rt.EDITOR_ACTIONS_LOCATION,Uc.DEFAULT)}}Oe(y2);class S2 extends ge{static{$i(this,"HideEditorActionsAction")}static ID="workbench.action.hideEditorActions";constructor(){super({id:S2.ID,title:W("hideEditorActons","Hide Editor Actions"),category:oe.View,precondition:Z.equals(`config.${rt.EDITOR_ACTIONS_LOCATION}`,Uc.HIDDEN).negate(),metadata:{description:W("hideEditorActonsDescription","Hide Editor Actions in the tab and title bar")},f1:!0})}run(e){return e.get(Pe).updateValue(rt.EDITOR_ACTIONS_LOCATION,Uc.HIDDEN)}}Oe(S2);class E2 extends ge{static{$i(this,"ShowEditorActionsAction")}static ID="workbench.action.showEditorActions";constructor(){super({id:E2.ID,title:W("showEditorActons","Show Editor Actions"),category:oe.View,precondition:Z.equals(`config.${rt.EDITOR_ACTIONS_LOCATION}`,Uc.HIDDEN),metadata:{description:W("showEditorActonsDescription","Make Editor Actions visible.")},f1:!0})}run(e){return e.get(Pe).updateValue(rt.EDITOR_ACTIONS_LOCATION,Uc.DEFAULT)}}Oe(E2);xt.appendMenuItem(N.MenubarAppearanceMenu,{submenu:N.EditorActionsPositionSubmenu,title:g("editorActionsPosition","Editor Actions Position"),group:"3_workbench_layout_move",order:11});class L2 extends ge{static{$i(this,"ConfigureEditorTabsAction")}static ID="workbench.action.configureEditorTabs";constructor(){super({id:L2.ID,title:W("configureTabs","Configure Tabs"),category:oe.View})}run(e){e.get(RP).openSettings({jsonEditor:!1,query:"workbench.editor tab"})}}Oe(L2);class D2 extends ge{static{$i(this,"ConfigureEditorAction")}static ID="workbench.action.configureEditor";constructor(){super({id:D2.ID,title:W("configureEditors","Configure Editors"),category:oe.View})}run(e){e.get(RP).openSettings({jsonEditor:!1,query:"workbench.editor"})}}Oe(D2);Oe(class extends ge{constructor(){super({id:"workbench.action.toggleSeparatePinnedEditorTabs",title:W("toggleSeparatePinnedEditorTabs","Separate Pinned Editor Tabs"),category:oe.View,precondition:Z.equals(`config.${rt.EDITOR_TABS_MODE}`,ra.MULTIPLE),metadata:{description:W("toggleSeparatePinnedEditorTabsDescription","Toggle whether pinned editor tabs are shown on a separate row above unpinned tabs.")},f1:!0})}run(i){const e=i.get(Pe),n=!e.getValue("workbench.editor.pinnedTabsOnSeparateRow");return e.updateValue("workbench.editor.pinnedTabsOnSeparateRow",n)}});Oe(class extends ge{constructor(){super({id:"workbench.action.toggleZenMode",title:{...W("toggleZenMode","Toggle Zen Mode"),mnemonicTitle:g({key:"miToggleZenMode",comment:["&& denotes a mnemonic"]},"Zen Mode")},precondition:dc.toNegated(),category:oe.View,f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,E.KeyZ)},toggled:oc,menu:[{id:N.MenubarAppearanceMenu,group:"1_toggle_view",order:2}]})}run(i){return i.get(yt).toggleZenMode()}});gt.registerCommandAndKeybindingRule({id:"workbench.action.exitZenMode",weight:Ce.EditorContrib-1e3,handler(i){const e=i.get(yt),t=i.get(Ye);oc.getValue(t)&&e.toggleZenMode()},when:oc,primary:di(E.Escape,E.Escape)});if(Nt||Gi||ui){Oe(class extends ge{static{$i(this,"ToggleMenubarAction")}constructor(){super({id:"workbench.action.toggleMenuBar",title:{...W("toggleMenuBar","Toggle Menu Bar"),mnemonicTitle:g({key:"miMenuBar",comment:["&& denotes a mnemonic"]},"Menu &&Bar")},category:oe.View,f1:!0,toggled:Z.and(dy.toNegated(),Z.notEquals("config.window.menuBarVisibility","hidden"),Z.notEquals("config.window.menuBarVisibility","toggle"),Z.notEquals("config.window.menuBarVisibility","compact")),menu:[{id:N.MenubarAppearanceMenu,group:"2_workbench_layout",order:0}]})}run(e){return e.get(yt).toggleMenuBar()}});for(const i of[N.TitleBarContext,N.TitleBarTitleContext])xt.appendMenuItem(i,{command:{id:"workbench.action.toggleMenuBar",title:g("miMenuBarNoMnemonic","Menu Bar"),toggled:Z.and(dy.toNegated(),Z.notEquals("config.window.menuBarVisibility","hidden"),Z.notEquals("config.window.menuBarVisibility","toggle"),Z.notEquals("config.window.menuBarVisibility","compact"))},when:Z.and(dc.toNegated(),Z.notEquals(zE.key,LE.NATIVE),ef.negate()),group:"2_config",order:0})}Oe(class extends ge{constructor(){super({id:"workbench.action.resetViewLocations",title:W("resetViewLocations","Reset View Locations"),category:oe.View,f1:!0})}run(i){return i.get(Ro).reset()}});Oe(class extends ge{constructor(){super({id:"workbench.action.moveView",title:W("moveView","Move View"),category:oe.View,f1:!0})}async run(i){const e=i.get(Ro),t=i.get(He),n=i.get(ca),s=i.get(Ye),o=i.get(Cf),r=uu.getValue(s);let a;r&&e.getViewDescriptorById(r)?.canMoveView&&(a=r);try{if(a=await this.getView(n,e,o,a),!a)return;const l=new toe;t.invokeFunction(c=>l.run(c,a))}catch{}}getViewItems(i,e){const t=[];return e.getVisiblePaneCompositeIds(Te.Sidebar).forEach(r=>{const a=i.getViewContainerById(r),l=i.getViewContainerModel(a);let c=!1;l.visibleViewDescriptors.forEach(d=>{d.canMoveView&&(c||(t.push({type:"separator",label:g("sidebarContainer","Side Bar / {0}",l.title)}),c=!0),t.push({id:d.id,label:d.name.value}))})}),e.getPinnedPaneCompositeIds(Te.Panel).forEach(r=>{const a=i.getViewContainerById(r),l=i.getViewContainerModel(a);let c=!1;l.visibleViewDescriptors.forEach(d=>{d.canMoveView&&(c||(t.push({type:"separator",label:g("panelContainer","Panel / {0}",l.title)}),c=!0),t.push({id:d.id,label:d.name.value}))})}),e.getPinnedPaneCompositeIds(Te.AuxiliaryBar).forEach(r=>{const a=i.getViewContainerById(r),l=i.getViewContainerModel(a);let c=!1;l.visibleViewDescriptors.forEach(d=>{d.canMoveView&&(c||(t.push({type:"separator",label:g("secondarySideBarContainer","Secondary Side Bar / {0}",l.title)}),c=!0),t.push({id:d.id,label:d.name.value}))})}),t}async getView(i,e,t,n){const s=new te,o=s.add(i.createQuickPick({useSeparators:!0}));return o.placeholder=g("moveFocusedView.selectView","Select a View to Move"),o.items=this.getViewItems(e,t),o.selectedItems=o.items.filter(r=>r.id===n),new Promise((r,a)=>{s.add(o.onDidAccept(()=>{const l=o.selectedItems[0];l.id?r(l.id):a(),o.hide()})),s.add(o.onDidHide(()=>{s.dispose(),a()})),o.show()})}});class toe extends ge{static{$i(this,"MoveFocusedViewAction")}constructor(){super({id:"workbench.action.moveFocusedView",title:W("moveFocusedView","Move Focused View"),category:oe.View,precondition:uu.notEqualsTo(""),f1:!0})}run(e,t){const n=e.get(Ro),s=e.get(vf),o=e.get(ca),r=e.get(Ye),a=e.get(gh),l=e.get(Cf),c=t||uu.getValue(r);if(c===void 0||c.trim()===""){a.error(g("moveFocusedView.error.noFocusedView","There is no view currently focused."));return}const d=n.getViewDescriptorById(c);if(!d||!d.canMoveView){a.error(g("moveFocusedView.error.nonMovableView","The currently focused view is not movable."));return}const h=new te,u=h.add(o.createQuickPick({useSeparators:!0}));u.placeholder=g("moveFocusedView.selectDestination","Select a Destination for the View"),u.title=g({key:"moveFocusedView.title",comment:["{0} indicates the title of the view the user has selected to move."]},"View: Move {0}",d.name.value);const f=[],p=n.getViewContainerByViewId(c),m=n.getViewLocationById(c),_=n.getViewContainerModel(p).allViewDescriptors.length===1;_&&m===Te.Panel||f.push({id:"_.panel.newcontainer",label:g({key:"moveFocusedView.newContainerInPanel",comment:["Creates a new top-level tab in the panel."]},"New Panel Entry")}),_&&m===Te.Sidebar||f.push({id:"_.sidebar.newcontainer",label:g("moveFocusedView.newContainerInSidebar","New Side Bar Entry")}),_&&m===Te.AuxiliaryBar||f.push({id:"_.auxiliarybar.newcontainer",label:g("moveFocusedView.newContainerInSidePanel","New Secondary Side Bar Entry")}),f.push({type:"separator",label:g("sidebar","Side Bar")});const w=l.getVisiblePaneCompositeIds(Te.Sidebar);f.push(...w.filter(C=>C===n.getViewContainerByViewId(c).id?!1:!n.getViewContainerById(C).rejectAddedViews).map(C=>({id:C,label:n.getViewContainerModel(n.getViewContainerById(C)).title}))),f.push({type:"separator",label:g("panel","Panel")});const v=l.getPinnedPaneCompositeIds(Te.Panel);f.push(...v.filter(C=>C===n.getViewContainerByViewId(c).id?!1:!n.getViewContainerById(C).rejectAddedViews).map(C=>({id:C,label:n.getViewContainerModel(n.getViewContainerById(C)).title}))),f.push({type:"separator",label:g("secondarySideBar","Secondary Side Bar")});const b=l.getPinnedPaneCompositeIds(Te.AuxiliaryBar);f.push(...b.filter(C=>C===n.getViewContainerByViewId(c).id?!1:!n.getViewContainerById(C).rejectAddedViews).map(C=>({id:C,label:n.getViewContainerModel(n.getViewContainerById(C)).title}))),u.items=f,h.add(u.onDidAccept(()=>{const C=u.selectedItems[0];C.id==="_.panel.newcontainer"?(n.moveViewToLocation(d,Te.Panel,this.desc.id),s.openView(c,!0)):C.id==="_.sidebar.newcontainer"?(n.moveViewToLocation(d,Te.Sidebar,this.desc.id),s.openView(c,!0)):C.id==="_.auxiliarybar.newcontainer"?(n.moveViewToLocation(d,Te.AuxiliaryBar,this.desc.id),s.openView(c,!0)):C.id&&(n.moveViewsToContainer([d],n.getViewContainerById(C.id),void 0,this.desc.id),s.openView(c,!0)),u.hide()})),h.add(u.onDidHide(()=>h.dispose())),u.show()}}Oe(toe);Oe(class extends ge{constructor(){super({id:"workbench.action.resetFocusedViewLocation",title:W("resetFocusedViewLocation","Reset Focused View Location"),category:oe.View,f1:!0,precondition:uu.notEqualsTo("")})}run(i){const e=i.get(Ro),t=i.get(Ye),n=i.get(gh),s=i.get(vf),o=uu.getValue(t);let r=null;if(o!==void 0&&o.trim()!==""&&(r=e.getViewDescriptorById(o)),!r){n.error(g("resetFocusedView.error.noFocusedView","There is no view currently focused."));return}const a=e.getDefaultContainerById(r.id);!a||a===e.getViewContainerByViewId(r.id)||(e.moveViewsToContainer([r],a,void 0,this.desc.id),s.openView(r.id,!0))}});class nl extends ge{static{$i(this,"BaseResizeViewAction")}static RESIZE_INCREMENT=60;resizePart(e,t,n,s){let o;if(s===void 0){const r=n.hasFocus(Y.EDITOR_PART),a=n.hasFocus(Y.SIDEBAR_PART),l=n.hasFocus(Y.PANEL_PART),c=n.hasFocus(Y.AUXILIARYBAR_PART);a?o=Y.SIDEBAR_PART:l?o=Y.PANEL_PART:r?o=Y.EDITOR_PART:c&&(o=Y.AUXILIARYBAR_PART)}else o=s;o&&n.resizePart(o,e,t)}}class eVe extends nl{static{$i(this,"IncreaseViewSizeAction")}constructor(){super({id:"workbench.action.increaseViewSize",title:W("increaseViewSize","Increase Current View Size"),f1:!0,precondition:dc.toNegated()})}run(e){this.resizePart(nl.RESIZE_INCREMENT,nl.RESIZE_INCREMENT,e.get(yt))}}class tVe extends nl{static{$i(this,"IncreaseViewWidthAction")}constructor(){super({id:"workbench.action.increaseViewWidth",title:W("increaseEditorWidth","Increase Editor Width"),f1:!0,precondition:dc.toNegated()})}run(e){this.resizePart(nl.RESIZE_INCREMENT,0,e.get(yt),Y.EDITOR_PART)}}class iVe extends nl{static{$i(this,"IncreaseViewHeightAction")}constructor(){super({id:"workbench.action.increaseViewHeight",title:W("increaseEditorHeight","Increase Editor Height"),f1:!0,precondition:dc.toNegated()})}run(e){this.resizePart(0,nl.RESIZE_INCREMENT,e.get(yt),Y.EDITOR_PART)}}class nVe extends nl{static{$i(this,"DecreaseViewSizeAction")}constructor(){super({id:"workbench.action.decreaseViewSize",title:W("decreaseViewSize","Decrease Current View Size"),f1:!0,precondition:dc.toNegated()})}run(e){this.resizePart(-nl.RESIZE_INCREMENT,-nl.RESIZE_INCREMENT,e.get(yt))}}class sVe extends nl{static{$i(this,"DecreaseViewWidthAction")}constructor(){super({id:"workbench.action.decreaseViewWidth",title:W("decreaseEditorWidth","Decrease Editor Width"),f1:!0,precondition:dc.toNegated()})}run(e){this.resizePart(-nl.RESIZE_INCREMENT,0,e.get(yt),Y.EDITOR_PART)}}class oVe extends nl{static{$i(this,"DecreaseViewHeightAction")}constructor(){super({id:"workbench.action.decreaseViewHeight",title:W("decreaseEditorHeight","Decrease Editor Height"),f1:!0,precondition:dc.toNegated()})}run(e){this.resizePart(0,-nl.RESIZE_INCREMENT,e.get(yt),Y.EDITOR_PART)}}Oe(eVe);Oe(tVe);Oe(iVe);Oe(nVe);Oe(sVe);Oe(oVe);function ioe(i){return i.iconA!==void 0}$i(ioe,"isContextualLayoutVisualIcon");const rw=$i((i,e,t,n)=>({id:i,active:e,label:t,visualIcon:n,activeIcon:ee.eye,inactiveIcon:ee.eyeClosed,activeAriaLabel:g("selectToHide","Select to Hide"),inactiveAriaLabel:g("selectToShow","Select to Show"),useButtons:!0}),"CreateToggleLayoutItem"),Cg=$i((i,e,t,n)=>({id:i,active:e,label:t,visualIcon:n,activeIcon:ee.check,activeAriaLabel:g("active","Active"),useButtons:!1}),"CreateOptionLayoutItem"),rVe=Z.and(dy.toNegated(),Z.notEquals("config.window.menuBarVisibility","hidden"),Z.notEquals("config.window.menuBarVisibility","toggle"),Z.notEquals("config.window.menuBarVisibility","compact")),ER=[];(!Ue||!ao)&&ER.push(rw("workbench.action.toggleMenuBar",rVe,g("menuBar","Menu Bar"),WFe));ER.push(rw(Xse,Z.notEquals("config.workbench.activityBar.location","hidden"),g("activityBar","Activity Bar"),{whenA:Z.equals("config.workbench.sideBar.location","left"),iconA:HFe,iconB:UFe}),rw(Lp.ID,vg,g("sideBar","Primary Side Bar"),{whenA:Z.equals("config.workbench.sideBar.location","left"),iconA:Dk,iconB:Ik}),rw(qd.ID,Og,g("secondarySideBar","Secondary Side Bar"),{whenA:Z.equals("config.workbench.sideBar.location","left"),iconA:Ik,iconB:Dk}),rw(sf.ID,gy,g("panel","Panel"),GFe),rw(Zb.ID,Z.equals("config.workbench.statusBar.visible",!0),g("statusBar","Status Bar"),KFe));const noe=[Cg(SR.ID,Z.equals("config.workbench.sideBar.location","left"),g("leftSideBar","Left"),Dk),Cg(yR.ID,Z.equals("config.workbench.sideBar.location","right"),g("rightSideBar","Right"),Ik)],soe=[Cg("workbench.action.alignPanelLeft",wg.isEqualTo("left"),g("leftPanel","Left"),jFe),Cg("workbench.action.alignPanelRight",wg.isEqualTo("right"),g("rightPanel","Right"),qFe),Cg("workbench.action.alignPanelCenter",wg.isEqualTo("center"),g("centerPanel","Center"),YFe),Cg("workbench.action.alignPanelJustify",wg.isEqualTo("justify"),g("justifyPanel","Justify"),ZFe)],ooe=[Cg("workbench.action.toggleFullScreen",ef,g("fullscreen","Full Screen"),XFe),Cg("workbench.action.toggleZenMode",oc,g("zenMode","Zen Mode"),JFe),Cg("workbench.action.toggleCenteredLayout",b7,g("centeredLayout","Centered Layout"),QFe)],roe=new Set;for(const{active:i}of[...ER,...noe,...soe,...ooe])for(const e of i.keys())roe.add(e);Oe(class extends ge{static{$i(this,"CustomizeLayoutAction")}_currentQuickPick;constructor(){super({id:"workbench.action.customizeLayout",title:W("customizeLayout","Customize Layout..."),f1:!0,icon:eoe,menu:[{id:N.LayoutControlMenuSubmenu,group:"z_end"},{id:N.LayoutControlMenu,when:Z.equals("config.workbench.layoutControl.type","both"),group:"z_end"}]})}getItems(e,t){const n=$i(s=>{const o=s.active.evaluate(e.getContext(null));let r=s.useButtons?s.label:s.label+(o&&s.activeIcon?` $(${s.activeIcon.id})`:!o&&s.inactiveIcon?` $(${s.inactiveIcon.id})`:"");const a=s.label+(o&&s.activeAriaLabel?` (${s.activeAriaLabel})`:!o&&s.inactiveAriaLabel?` (${s.inactiveAriaLabel})`:"");if(s.visualIcon){let c=s.visualIcon;ioe(c)&&(c=c.whenA.evaluate(e.getContext(null))?c.iconA:c.iconB),r=`$(${c.id}) ${r}`}const l=o?s.activeIcon:s.inactiveIcon;return{type:"item",id:s.id,label:r,ariaLabel:a,keybinding:t.lookupKeybinding(s.id,e),buttons:s.useButtons?[{alwaysVisible:!1,tooltip:a,iconClass:l?Ne.asClassName(l):void 0}]:void 0}},"toQuickPickItem");return[{type:"separator",label:g("toggleVisibility","Visibility")},...ER.map(n),{type:"separator",label:g("sideBarPosition","Primary Side Bar Position")},...noe.map(n),{type:"separator",label:g("panelAlignment","Panel Alignment")},...soe.map(n),{type:"separator",label:g("layoutModes","Modes")},...ooe.map(n)]}run(e){if(this._currentQuickPick){this._currentQuickPick.hide();return}const t=e.get(Pe),n=e.get(Ye),s=e.get(Xi),o=e.get(ca),r=e.get(ni),a=new te,l=a.add(o.createQuickPick({useSeparators:!0}));this._currentQuickPick=l,l.items=this.getItems(n,r),l.ignoreFocusOut=!0,l.hideInput=!0,l.title=g("customizeLayoutQuickPickTitle","Customize Layout");const c={alwaysVisible:!0,iconClass:Ne.asClassName(ee.close),tooltip:g("close","Close")},d={alwaysVisible:!0,iconClass:Ne.asClassName(ee.discard),tooltip:g("restore defaults","Restore Defaults")};l.buttons=[d,c];let h;a.add(n.onDidChangeContext(u=>{u.affectsSome(roe)&&(l.items=this.getItems(n,r),h&&(l.activeItems=l.items.filter(f=>f.id===h?.id)),setTimeout(()=>o.focus(),0))})),a.add(l.onDidAccept(u=>{l.selectedItems.length&&(h=l.selectedItems[0],s.executeCommand(h.id))})),a.add(l.onDidTriggerItemButton(u=>{u.item&&(h=u.item,s.executeCommand(h.id))})),a.add(l.onDidTriggerButton(u=>{if(u===c)l.hide();else if(u===d){const f=$i(p=>{const m=t.inspect(p);t.updateValue(p,m.defaultValue)},"resetSetting");f("workbench.activityBar.location"),f("workbench.sideBar.location"),f("workbench.statusBar.visible"),f("workbench.panel.defaultLocation"),(!Ue||!ao)&&f("window.menuBarVisibility"),s.executeCommand("workbench.action.alignPanelCenter")}})),a.add(l.onDidHide(()=>{l.dispose()})),a.add(l.onDispose(()=>{this._currentQuickPick=void 0,a.dispose()})),l.show()}});var aVe=Object.defineProperty,mz=(i,e)=>aVe(i,"name",{value:e,configurable:!0});class Aw extends ${constructor(e){super(),this.storageService=e,this.restoreState(),this.registerListeners()}static{mz(this,"StatusbarViewModel")}static HIDDEN_ENTRIES_KEY="workbench.statusbar.hidden";_onDidChangeEntryVisibility=this._register(new x);onDidChangeEntryVisibility=this._onDidChangeEntryVisibility.event;_entries=[];get entries(){return this._entries.slice(0)}_lastFocusedEntry;get lastFocusedEntry(){return this._lastFocusedEntry&&!this.isHidden(this._lastFocusedEntry.id)?this._lastFocusedEntry:void 0}hidden=new Set;restoreState(){const e=this.storageService.get(Aw.HIDDEN_ENTRIES_KEY,Be.PROFILE);if(e)try{this.hidden=new Set(JSON.parse(e))}catch{}}registerListeners(){this._register(this.storageService.onDidChangeValue(Be.PROFILE,Aw.HIDDEN_ENTRIES_KEY,this._register(new te))(()=>this.onDidStorageValueChange()))}onDidStorageValueChange(){const e=new Set(this.hidden);this.hidden.clear(),this.restoreState();const t=new Set;for(const n of e)this.hidden.has(n)||t.add(n);for(const n of this.hidden)e.has(n)||t.add(n);if(t.size>0)for(const n of this._entries)t.has(n.id)&&(this.updateVisibility(n.id,!0),t.delete(n.id))}add(e){this._entries.push(e),this.updateVisibility(e,!1),this.sort(),this.markFirstLastVisibleEntry()}remove(e){const t=this._entries.indexOf(e);t>=0&&(this._entries.splice(t,1),this._entries.some(n=>LC(n.priority.primary)&&n.priority.primary.id===e.id)&&this.sort(),this.markFirstLastVisibleEntry())}isHidden(e){return this.hidden.has(e)}hide(e){this.hidden.has(e)||(this.hidden.add(e),this.updateVisibility(e,!0),this.saveState())}show(e){this.hidden.has(e)&&(this.hidden.delete(e),this.updateVisibility(e,!0),this.saveState())}findEntry(e){return this._entries.find(t=>t.container===e)}getEntries(e){return this._entries.filter(t=>t.alignment===e)}focusNextEntry(){this.focusEntry(1,0)}focusPreviousEntry(){this.focusEntry(-1,this.entries.length-1)}isEntryFocused(){return!!this.getFocusedEntry()}getFocusedEntry(){return this._entries.find(e=>Yg(e.container))}focusEntry(e,t){const n=mz(r=>{let a=r,l=a>=0&&a<this._entries.length?this._entries[a]:void 0;for(;l&&this.isHidden(l.id);)a+=e,l=a>=0&&a<this._entries.length?this._entries[a]:void 0;return l},"getVisibleEntry"),s=this.getFocusedEntry();if(s){const r=n(this._entries.indexOf(s)+e);if(r){this._lastFocusedEntry=r,r.labelContainer.focus();return}}const o=n(t);o&&(this._lastFocusedEntry=o,o.labelContainer.focus())}updateVisibility(e,t){if(typeof e=="string"){const n=e;for(const s of this._entries)s.id===n&&this.updateVisibility(s,t)}else{const n=e,s=this.isHidden(n.id);s?Wc(n.container):Gl(n.container),t&&this._onDidChangeEntryVisibility.fire({id:n.id,visible:!s}),this.markFirstLastVisibleEntry()}}saveState(){this.hidden.size>0?this.storageService.store(Aw.HIDDEN_ENTRIES_KEY,JSON.stringify(Array.from(this.hidden.values())),Be.PROFILE,ai.USER):this.storageService.remove(Aw.HIDDEN_ENTRIES_KEY,Be.PROFILE)}sort(){const e=new Map,t=new Map;for(let o=0;o<this._entries.length;o++){const r=this._entries[o];if(typeof r.priority.primary=="number")e.set(r,o);else{const a=r.priority.primary.id;let l=t.get(a);if(!l){for(const c of t.values())if(c.has(a)){l=c;break}l||(l=new Map,t.set(a,l))}l.set(r.id,r)}}const n=Array.from(e.keys());n.sort((o,r)=>o.alignment===r.alignment?o.priority.primary!==r.priority.primary?Number(r.priority.primary)-Number(o.priority.primary):o.priority.secondary!==r.priority.secondary?r.priority.secondary-o.priority.secondary:e.get(o)-e.get(r):o.alignment===jr.LEFT?-1:r.alignment===jr.LEFT?1:0);let s;if(t.size>0){s=[];for(const o of n){const r=t.get(o.id),a=r?Array.from(r.values()):void 0;a&&s.push(...a.filter(l=>LC(l.priority.primary)&&l.priority.primary.alignment===jr.LEFT)),s.push(o),a&&s.push(...a.filter(l=>LC(l.priority.primary)&&l.priority.primary.alignment===jr.RIGHT)),t.delete(o.id)}for(const[,o]of t)s.push(...o.values())}else s=n;this._entries=s}markFirstLastVisibleEntry(){this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(jr.LEFT)),this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(jr.RIGHT))}doMarkFirstLastVisibleStatusbarItem(e){let t,n;for(const s of e)s.container.classList.remove("first-visible-item","last-visible-item"),!this.isHidden(s.id)&&(t||(t=s),n=s);t?.container.classList.add("first-visible-item"),n?.container.classList.add("last-visible-item")}}var lVe=Object.defineProperty,_m=(i,e)=>lVe(i,"name",{value:e,configurable:!0});class cVe extends Mt{constructor(e,t,n){super(e,t,void 0,!0),this.model=n,this.checked=!n.isHidden(e)}static{_m(this,"ToggleStatusbarEntryVisibilityAction")}async run(){this.model.isHidden(this.id)?this.model.show(this.id):this.model.hide(this.id)}}class dVe extends Mt{constructor(e,t,n){super(e,g("hide","Hide '{0}'",t),void 0,!0),this.model=n}static{_m(this,"HideStatusbarEntryAction")}async run(){this.model.hide(this.id)}}gt.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusPrevious",weight:Ce.WorkbenchContrib,primary:E.LeftArrow,secondary:[E.UpArrow],when:pS,handler:_m(i=>{i.get(yf).focusPreviousEntry()},"handler")});gt.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusNext",weight:Ce.WorkbenchContrib,primary:E.RightArrow,secondary:[E.DownArrow],when:pS,handler:_m(i=>{i.get(yf).focusNextEntry()},"handler")});gt.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusFirst",weight:Ce.WorkbenchContrib,primary:E.Home,when:pS,handler:_m(i=>{const e=i.get(yf);e.focus(!1),e.focusNextEntry()},"handler")});gt.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusLast",weight:Ce.WorkbenchContrib,primary:E.End,when:pS,handler:_m(i=>{const e=i.get(yf);e.focus(!1),e.focusPreviousEntry()},"handler")});gt.registerCommandAndKeybindingRule({id:"workbench.statusBar.clearFocus",weight:Ce.WorkbenchContrib,primary:E.Escape,when:pS,handler:_m(i=>{const e=i.get(yf),t=i.get(nt);e.isEntryFocused()?e.focus(!1):t.activeEditorPane&&t.activeEditorPane.focus()},"handler")});class hVe extends ge{static{_m(this,"FocusStatusBarAction")}constructor(){super({id:"workbench.action.focusStatusBar",title:W("focusStatusBar","Focus Status Bar"),category:oe.View,f1:!0})}async run(e){e.get(yt).focusPart(Y.STATUSBAR_PART,sn())}}Oe(hVe);var uVe=Object.defineProperty,gVe=(i,e)=>uVe(i,"name",{value:e,configurable:!0});class fVe{constructor(e){this._container=e}static{gVe(this,"SimpleIconLabel")}hover;set text(e){dr(this._container,...eu(e??""))}set title(e){!this.hover&&e?this.hover=pl().setupManagedHover(bn("mouse"),this._container,e):this.hover&&this.hover.update(e)}dispose(){this.hover?.dispose()}}var aoe=Object.defineProperty,pVe=Object.getOwnPropertyDescriptor,loe=(i,e)=>aoe(i,"name",{value:e,configurable:!0}),mVe=(i,e,t,n)=>{for(var s=n>1?void 0:n?pVe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&aoe(e,t,s),s},KS=(i,e)=>(t,n)=>e(t,n,i);let e4=class extends ${constructor(i,e,t,n,s,o,r,a){super(),this.container=i,this.hoverDelegate=t,this.commandService=n,this.hoverService=s,this.notificationService=o,this.telemetryService=r,this.themeService=a,this.labelContainer=document.createElement("a"),this.labelContainer.tabIndex=-1,this.labelContainer.setAttribute("role","button"),this.labelContainer.className="statusbar-item-label",this._register(Gn.addTarget(this.labelContainer)),this.label=this._register(new _Ve(this.labelContainer)),this.container.appendChild(this.labelContainer),this.beakContainer=document.createElement("div"),this.beakContainer.className="status-bar-item-beak-container",this.container.appendChild(this.beakContainer),this.update(e)}static{loe(this,"StatusbarEntryItem")}label;entry=void 0;foregroundListener=this._register(new Yi);backgroundListener=this._register(new Yi);commandMouseListener=this._register(new Yi);commandTouchListener=this._register(new Yi);commandKeyboardListener=this._register(new Yi);focusListener=this._register(new Yi);focusOutListener=this._register(new Yi);hover=void 0;labelContainer;beakContainer;get name(){return pt(this.entry).name}get hasCommand(){return typeof this.entry?.command<"u"}update(i){if(this.label.showProgress=i.showProgress??!1,(!this.entry||i.text!==this.entry.text)&&(this.label.text=i.text,i.text?Gl(this.labelContainer):Wc(this.labelContainer)),(!this.entry||i.ariaLabel!==this.entry.ariaLabel)&&(this.container.setAttribute("aria-label",i.ariaLabel),this.labelContainer.setAttribute("aria-label",i.ariaLabel)),(!this.entry||i.role!==this.entry.role)&&this.labelContainer.setAttribute("role",i.role||"button"),!this.entry||!this.isEqualTooltip(this.entry,i)){const t=Pp(i.tooltip)?{markdown:i.tooltip,markdownNotSupportedFallback:void 0}:i.tooltip;this.hover?this.hover.update(t):this.hover=this._register(this.hoverService.setupManagedHover(this.hoverDelegate,this.container,t)),i.command!==aM&&(this.focusListener.value=F(this.labelContainer,Q.FOCUS,n=>{Fe.stop(n),this.hover?.show(!1)}),this.focusOutListener.value=F(this.labelContainer,Q.FOCUS_OUT,n=>{Fe.stop(n),this.hover?.hide()}))}if(!this.entry||i.command!==this.entry.command){this.commandMouseListener.clear(),this.commandTouchListener.clear(),this.commandKeyboardListener.clear();const t=i.command;t&&(t!==aM||this.hover)?(this.commandMouseListener.value=F(this.labelContainer,Q.CLICK,()=>this.executeCommand(t)),this.commandTouchListener.value=F(this.labelContainer,wt.Tap,()=>this.executeCommand(t)),this.commandKeyboardListener.value=F(this.labelContainer,Q.KEY_DOWN,n=>{const s=new Pt(n);s.equals(E.Space)||s.equals(E.Enter)?(Fe.stop(n),this.executeCommand(t)):(s.equals(E.Escape)||s.equals(E.LeftArrow)||s.equals(E.RightArrow))&&(Fe.stop(n),this.hover?.hide())}),this.labelContainer.classList.remove("disabled")):this.labelContainer.classList.add("disabled")}(!this.entry||i.showBeak!==this.entry.showBeak)&&(i.showBeak?this.container.classList.add("has-beak"):this.container.classList.remove("has-beak"));const e=!!i.backgroundColor||i.kind&&i.kind!=="standard";if(!this.entry||i.kind!==this.entry.kind){for(const t of wVe)this.container.classList.remove(`${t}-kind`);i.kind&&i.kind!=="standard"&&this.container.classList.add(`${i.kind}-kind`),this.container.classList.toggle("has-background-color",e)}(!this.entry||i.color!==this.entry.color)&&this.applyColor(this.labelContainer,i.color),(!this.entry||i.backgroundColor!==this.entry.backgroundColor)&&(this.container.classList.toggle("has-background-color",e),this.applyColor(this.container,i.backgroundColor,!0)),this.entry=i}isEqualTooltip({tooltip:i},{tooltip:e}){return i===void 0?e===void 0:Pp(i)?Pp(e)&&_H(i,e):i===e}async executeCommand(i){if(i===aM)this.hover?.show(!0);else{const e=typeof i=="string"?i:i.id,t=typeof i=="string"?[]:i.arguments??[];this.telemetryService.publicLog2("workbenchActionExecuted",{id:e,from:"status bar"});try{await this.commandService.executeCommand(e,...t)}catch(n){this.notificationService.error(hh(n))}}}applyColor(i,e,t){let n;if(t?this.backgroundListener.clear():this.foregroundListener.clear(),e)if(pX(e)){n=this.themeService.getColorTheme().getColor(e.id)?.toString();const s=this.themeService.onDidColorThemeChange(o=>{const r=o.getColor(e.id)?.toString();t?i.style.backgroundColor=r??"":i.style.color=r??""});t?this.backgroundListener.value=s:this.foregroundListener.value=s}else n=e;t?i.style.backgroundColor=n??"":i.style.color=n??""}};e4=mVe([KS(3,Xi),KS(4,Po),KS(5,fs),KS(6,rs),KS(7,$t)],e4);class _Ve extends fVe{constructor(e){super(e),this.container=e}static{loe(this,"StatusBarCodiconLabel")}progressCodicon=Yp(d8);currentText="";currentShowProgress=!1;set showProgress(e){this.currentShowProgress!==e&&(this.currentShowProgress=e,this.progressCodicon=Yp(e==="syncing"?d8:$pe),this.text=this.currentText)}set text(e){if(this.currentShowProgress){this.container.firstChild!==this.progressCodicon&&this.container.appendChild(this.progressCodicon);for(const n of Array.from(this.container.childNodes))n!==this.progressCodicon&&n.remove();let t=e??"";t&&(t=` ${t}`),Le(this.container,...eu(t))}else super.text=e}}var coe=Object.defineProperty,bVe=Object.getOwnPropertyDescriptor,Gr=(i,e)=>coe(i,"name",{value:e,configurable:!0}),ND=(i,e,t,n)=>{for(var s=n>1?void 0:n?bVe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&coe(e,t,s),s},ss=(i,e)=>(t,n)=>e(t,n,i);let Xb=class extends gD{constructor(i,e,t,n,s,o,r,a){super(i,{hasTitle:!1},t,s,o),this.instantiationService=e,this.contextService=n,this.storageService=s,this.contextMenuService=r,this.contextKeyService=a,this.registerListeners()}static{Gr(this,"StatusbarPart")}static HEIGHT=22;minimumWidth=0;maximumWidth=Number.POSITIVE_INFINITY;minimumHeight=Xb.HEIGHT;maximumHeight=Xb.HEIGHT;styleElement;pendingEntries=[];viewModel=this._register(new Aw(this.storageService));onDidChangeEntryVisibility=this.viewModel.onDidChangeEntryVisibility;_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;leftItemsContainer;rightItemsContainer;hoverDelegate=this._register(this.instantiationService.createInstance(qE,"element",!0,(i,e)=>({persistence:{hideOnKeyDown:!0,sticky:e}})));compactEntriesDisposable=this._register(new Yi);styleOverrides=new Set;registerListeners(){this._register(this.onDidChangeEntryVisibility(()=>this.updateCompactEntries())),this._register(this.contextService.onDidChangeWorkbenchState(()=>this.updateStyles()))}addEntry(i,e,t,n=0){let s;return hoe(n)?s=n:s={primary:n,secondary:Jd(e)},this.element?this.doAddEntry(i,e,t,s):this.doAddPendingEntry(i,e,t,s)}doAddPendingEntry(i,e,t,n){const s={entry:i,id:e,alignment:t,priority:n};return this.pendingEntries.push(s),{update:Gr(r=>{s.accessor?s.accessor.update(r):s.entry=r},"update"),dispose:Gr(()=>{s.accessor?s.accessor.dispose():this.pendingEntries=this.pendingEntries.filter(r=>r!==s)},"dispose")}}doAddEntry(i,e,t,n){const s=this.doCreateStatusItem(e,t),o=this.instantiationService.createInstance(e4,s,i,this.hoverDelegate),r=new class{id=e;alignment=t;priority=n;container=s;labelContainer=o.labelContainer;get name(){return o.name}get hasCommand(){return o.hasCommand}},{needsFullRefresh:a}=this.doAddOrRemoveModelEntry(r,!0);return a?this.appendStatusbarEntries():this.appendStatusbarEntry(r),{update:Gr(l=>{o.update(l)},"update"),dispose:Gr(()=>{const{needsFullRefresh:l}=this.doAddOrRemoveModelEntry(r,!1);l?this.appendStatusbarEntries():s.remove(),ii(o)},"dispose")}}doCreateStatusItem(i,e,...t){const n=document.createElement("div");return n.id=i,n.classList.add("statusbar-item"),t&&n.classList.add(...t),e===jr.RIGHT?n.classList.add("right"):n.classList.add("left"),n}doAddOrRemoveModelEntry(i,e){const t=this.viewModel.entries;e?this.viewModel.add(i):this.viewModel.remove(i);const n=this.viewModel.entries;return e?t.splice(n.indexOf(i),0,i):t.splice(t.indexOf(i),1),{needsFullRefresh:!ks(t,n)}}isEntryVisible(i){return!this.viewModel.isHidden(i)}updateEntryVisibility(i,e){e?this.viewModel.show(i):this.viewModel.hide(i)}focusNextEntry(){this.viewModel.focusNextEntry()}focusPreviousEntry(){this.viewModel.focusPreviousEntry()}isEntryFocused(){return this.viewModel.isEntryFocused()}focus(i=!0){this.getContainer()?.focus();const e=this.viewModel.lastFocusedEntry;i&&e&&setTimeout(()=>e.labelContainer.focus(),0)}createContentArea(i){this.element=i;const e=this._register(this.contextKeyService.createScoped(this.element));return pS.bindTo(e).set(!0),this.leftItemsContainer=document.createElement("div"),this.leftItemsContainer.classList.add("left-items","items-container"),this.element.appendChild(this.leftItemsContainer),this.element.tabIndex=0,this.rightItemsContainer=document.createElement("div"),this.rightItemsContainer.classList.add("right-items","items-container"),this.element.appendChild(this.rightItemsContainer),this._register(F(i,Q.CONTEXT_MENU,t=>this.showContextMenu(t))),this._register(Gn.addTarget(i)),this._register(F(i,wt.Contextmenu,t=>this.showContextMenu(t))),this.createInitialStatusbarEntries(),this.element}createInitialStatusbarEntries(){for(this.appendStatusbarEntries();this.pendingEntries.length;){const i=this.pendingEntries.shift();i&&(i.accessor=this.addEntry(i.entry,i.id,i.alignment,i.priority.primary))}}appendStatusbarEntries(){const i=pt(this.leftItemsContainer),e=pt(this.rightItemsContainer);Mn(i),Mn(e);for(const t of[...this.viewModel.getEntries(jr.LEFT),...this.viewModel.getEntries(jr.RIGHT).reverse()])(t.alignment===jr.LEFT?i:e).appendChild(t.container);this.updateCompactEntries()}appendStatusbarEntry(i){const e=this.viewModel.getEntries(i.alignment);i.alignment===jr.RIGHT&&e.reverse();const t=pt(i.alignment===jr.LEFT?this.leftItemsContainer:this.rightItemsContainer),n=e.indexOf(i);n+1===e.length?t.appendChild(i.container):t.insertBefore(i.container,e[n+1].container),this.updateCompactEntries()}updateCompactEntries(){const i=this.viewModel.entries,e=new Map;for(const o of i)this.viewModel.isHidden(o.id)||e.set(o.id,o),o.container.classList.remove("compact-left","compact-right");const t=new Map;for(const o of e.values())if(LC(o.priority.primary)&&o.priority.primary.compact){const r=o.priority.primary.id,a=e.get(r);if(!a)continue;let l=t.get(r);if(!l){for(const c of t.values())if(c.has(r)){l=c;break}l||(l=new Map,t.set(r,l))}l.set(o.id,o),l.set(a.id,a),o.priority.primary.alignment===jr.LEFT?(a.container.classList.add("compact-left"),o.container.classList.add("compact-right")):(a.container.classList.add("compact-right"),o.container.classList.add("compact-left"))}const n=this.getColor(xg),s=this.getColor(Tme);if(this.compactEntriesDisposable.value=new te,n&&s&&!Tg(this.theme.type))for(const[,o]of t)for(const r of o.values())r.hasCommand&&(this.compactEntriesDisposable.value.add(F(r.labelContainer,Q.MOUSE_OVER,()=>{o.forEach(a=>a.labelContainer.style.backgroundColor=n),r.labelContainer.style.backgroundColor=s})),this.compactEntriesDisposable.value.add(F(r.labelContainer,Q.MOUSE_OUT,()=>{o.forEach(a=>a.labelContainer.style.backgroundColor="")})))}showContextMenu(i){Fe.stop(i,!0);const e=new $n(ve(this.element),i);let t;this.contextMenuService.showContextMenu({getAnchor:Gr(()=>e,"getAnchor"),getActions:Gr(()=>(t=this.getContextMenuActions(e),t),"getActions"),onHide:Gr(()=>{t&&qG(t)},"onHide")})}getContextMenuActions(i){const e=[];e.push(Ei({id:Zb.ID,label:g("hideStatusBar","Hide Status Bar"),run:Gr(()=>this.instantiationService.invokeFunction(s=>new Zb().run(s)),"run")})),e.push(new zt);const t=new Set;for(const s of this.viewModel.entries)t.has(s.id)||(e.push(new cVe(s.id,s.name,this.viewModel)),t.add(s.id));let n;for(let s=i.target;s;s=s.parentElement){const o=this.viewModel.findEntry(s);if(o){n=o;break}}return n&&(e.push(new zt),e.push(new dVe(n.id,n.name,this.viewModel))),e}updateStyles(){super.updateStyles();const i=pt(this.getContainer()),e=[...this.styleOverrides].sort((a,l)=>a.priority-l.priority)[0],t=this.getColor(e?.background??(this.contextService.getWorkbenchState()!==Mc.EMPTY?Sme:Eme))||"";i.style.backgroundColor=t;const n=this.getColor(e?.foreground??(this.contextService.getWorkbenchState()!==Mc.EMPTY?Ag:yme))||"";i.style.color=n;const s=this.getColor(Ime),o=this.getColor(e?.border??(this.contextService.getWorkbenchState()!==Mc.EMPTY?Hj:Dme))||this.getColor(Re);o?(i.classList.add("status-border-top"),i.style.setProperty("--status-border-top-color",o)):(i.classList.remove("status-border-top"),i.style.removeProperty("--status-border-top-color"));const r=this.getColor(Lme);this.styleElement||(this.styleElement=ic(i)),this.styleElement.textContent=`

				/* Status bar focus outline */
				.monaco-workbench .part.statusbar:focus {
					outline-color: ${r};
				}

				/* Status bar item focus outline */
				.monaco-workbench .part.statusbar > .items-container > .statusbar-item a:focus-visible {
					outline: 1px solid ${this.getColor(Vi)??s};
					outline-offset: ${o?"-2px":"-1px"};
				}

				/* Notification Beak */
				.monaco-workbench .part.statusbar > .items-container > .statusbar-item.has-beak > .status-bar-item-beak-container:before {
					border-bottom-color: ${t};
				}
			`}layout(i,e,t,n){super.layout(i,e,t,n),super.layoutContents(i,e)}overrideStyle(i){return this.styleOverrides.add(i),this.updateStyles(),ye(()=>{this.styleOverrides.delete(i),this.updateStyles()})}toJSON(){return{type:Y.STATUSBAR_PART}}dispose(){this._onWillDispose.fire(),super.dispose()}};Xb=ND([ss(1,He),ss(2,$t),ss(3,po),ss(4,Si),ss(5,yt),ss(6,Hi),ss(7,Ye)],Xb);let t4=class extends Xb{static{Gr(this,"MainStatusbarPart")}constructor(i,e,t,n,s,o,r){super(Y.STATUSBAR_PART,i,e,t,n,s,o,r)}};t4=ND([ss(0,He),ss(1,$t),ss(2,po),ss(3,Si),ss(4,yt),ss(5,Hi),ss(6,Ye)],t4);let Tk=class extends Xb{constructor(i,e,t,n,s,o,r,a){const l=Tk.COUNTER++;super(`workbench.parts.auxiliaryStatus.${l}`,e,t,n,s,o,r,a),this.container=i}static{Gr(this,"AuxiliaryStatusbarPart")}static COUNTER=1;height=Xb.HEIGHT};Tk=ND([ss(1,He),ss(2,$t),ss(3,po),ss(4,Si),ss(5,yt),ss(6,Hi),ss(7,Ye)],Tk);let i4=class extends ree{constructor(i,e,t){super("workbench.statusBarService",t,e),this.instantiationService=i,this._register(this.registerPart(this.mainPart))}static{Gr(this,"StatusbarService")}mainPart=this._register(this.instantiationService.createInstance(t4));_onDidCreateAuxiliaryStatusbarPart=this._register(new x);onDidCreateAuxiliaryStatusbarPart=this._onDidCreateAuxiliaryStatusbarPart.event;createAuxiliaryStatusbarPart(i){const e=document.createElement("footer");e.classList.add("part","statusbar"),e.setAttribute("role","status"),e.style.position="relative",e.setAttribute("aria-live","off"),e.setAttribute("tabindex","0"),i.appendChild(e);const t=this.instantiationService.createInstance(Tk,e),n=this.registerPart(t);return t.create(e),H.once(t.onWillDispose)(()=>n.dispose()),this._onDidCreateAuxiliaryStatusbarPart.fire(t),t}createScoped(i,e){return e.add(this.instantiationService.createInstance(n4,i))}onDidChangeEntryVisibility=this.mainPart.onDidChangeEntryVisibility;addEntry(i,e,t,n=0){return i.showInAllWindows?this.doAddEntryToAllWindows(i,e,t,n):this.mainPart.addEntry(i,e,t,n)}doAddEntryToAllWindows(i,e,t,n=0){const s=new te,o=new Set;function r(a){const l=new te;l.add(a.onWillDispose(()=>l.dispose()));const c=l.add(a.addEntry(i,e,t,n));o.add(c),l.add(ye(()=>o.delete(c))),s.add(l),l.add(ye(()=>s.delete(l)))}Gr(r,"addEntry");for(const a of this.parts)r(a);return s.add(this.onDidCreateAuxiliaryStatusbarPart(a=>r(a))),{update:Gr(a=>{for(const l of o)l.update(a)},"update"),dispose:Gr(()=>s.dispose(),"dispose")}}isEntryVisible(i){return this.mainPart.isEntryVisible(i)}updateEntryVisibility(i,e){for(const t of this.parts)t.updateEntryVisibility(i,e)}focus(i){this.activePart.focus(i)}focusNextEntry(){this.activePart.focusNextEntry()}focusPreviousEntry(){this.activePart.focusPreviousEntry()}isEntryFocused(){return this.activePart.isEntryFocused()}overrideStyle(i){const e=new te;for(const t of this.parts)e.add(t.overrideStyle(i));return e}};i4=ND([ss(0,He),ss(1,Si),ss(2,$t)],i4);let n4=class extends ${constructor(i,e){super(),this.statusbarEntryContainer=i,this.statusbarService=e}static{Gr(this,"ScopedStatusbarService")}createAuxiliaryStatusbarPart(i){return this.statusbarService.createAuxiliaryStatusbarPart(i)}createScoped(i,e){return this.statusbarService.createScoped(i,e)}getPart(){return this.statusbarEntryContainer}onDidChangeEntryVisibility=this.statusbarEntryContainer.onDidChangeEntryVisibility;addEntry(i,e,t,n=0){return this.statusbarEntryContainer.addEntry(i,e,t,n)}isEntryVisible(i){return this.statusbarEntryContainer.isEntryVisible(i)}updateEntryVisibility(i,e){this.statusbarEntryContainer.updateEntryVisibility(i,e)}focus(i){this.statusbarEntryContainer.focus(i)}focusNextEntry(){this.statusbarEntryContainer.focusNextEntry()}focusPreviousEntry(){this.statusbarEntryContainer.focusPreviousEntry()}isEntryFocused(){return this.statusbarEntryContainer.isEntryFocused()}overrideStyle(i){return this.statusbarEntryContainer.overrideStyle(i)}};n4=ND([ss(1,yf)],n4);Rr(yf,i4,Pr.Eager);var vVe=Object.defineProperty,doe=(i,e)=>vVe(i,"name",{value:e,configurable:!0});const yf=De("statusbarService");var jr=(i=>(i[i.LEFT=0]="LEFT",i[i.RIGHT=1]="RIGHT",i))(jr||{});function LC(i){const e=i;return typeof e?.id=="string"&&typeof e.alignment=="number"}doe(LC,"isStatusbarEntryLocation");function hoe(i){const e=i;return(typeof e?.primary=="number"||LC(e?.primary))&&typeof e?.secondary=="number"}doe(hoe,"isStatusbarEntryPriority");const aM={id:"statusBar.entry.showTooltip",title:""},wVe=["standard","warning","error","prominent","remote","offline"];var uoe=Object.defineProperty,CVe=Object.getOwnPropertyDescriptor,_z=(i,e)=>uoe(i,"name",{value:e,configurable:!0}),yVe=(i,e,t,n)=>{for(var s=n>1?void 0:n?CVe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&uoe(e,t,s),s},bz=(i,e)=>(t,n)=>e(t,n,i);let s4=class extends ${constructor(i,e,t){super(),this.model=i,this.statusbarService=e,this.notificationService=t,this.updateNotificationsCenterStatusItem(),i.statusMessage&&this.doSetStatusMessage(i.statusMessage),this.registerListeners()}static{_z(this,"NotificationsStatus")}notificationsCenterStatusItem;newNotificationsCount=0;currentStatusMessage;isNotificationsCenterVisible=!1;isNotificationsToastsVisible=!1;registerListeners(){this._register(this.model.onDidChangeNotification(i=>this.onDidChangeNotification(i))),this._register(this.model.onDidChangeStatusMessage(i=>this.onDidChangeStatusMessage(i))),this._register(this.notificationService.onDidChangeFilter(()=>this.updateNotificationsCenterStatusItem()))}onDidChangeNotification(i){this.isNotificationsCenterVisible||(i.kind===Ja.ADD?this.newNotificationsCount++:i.kind===Ja.REMOVE&&this.newNotificationsCount>0&&this.newNotificationsCount--),this.updateNotificationsCenterStatusItem()}updateNotificationsCenterStatusItem(){let i=0;if(!this.isNotificationsCenterVisible&&!this.isNotificationsToastsVisible)for(const t of this.model.notifications)t.hasProgress&&i++;let e={name:g("status.notifications","Notifications"),text:`${i>0||this.newNotificationsCount>0?"$(bell-dot)":"$(bell)"}`,ariaLabel:g("status.notifications","Notifications"),command:this.isNotificationsCenterVisible?KE:_V,tooltip:this.getTooltip(i),showBeak:this.isNotificationsCenterVisible};this.notificationService.getFilter()===Ci.ERROR&&(e={...e,text:`${i>0||this.newNotificationsCount>0?"$(bell-slash-dot)":"$(bell-slash)"}`,ariaLabel:g("status.doNotDisturb","Do Not Disturb"),tooltip:g("status.doNotDisturbTooltip","Do Not Disturb Mode is Enabled")}),this.notificationsCenterStatusItem?this.notificationsCenterStatusItem.update(e):this.notificationsCenterStatusItem=this.statusbarService.addEntry(e,"status.notifications",jr.RIGHT,-Number.MAX_VALUE)}getTooltip(i){return this.isNotificationsCenterVisible?g("hideNotifications","Hide Notifications"):this.model.notifications.length===0?g("zeroNotifications","No Notifications"):i===0?this.newNotificationsCount===0?g("noNotifications","No New Notifications"):this.newNotificationsCount===1?g("oneNotification","1 New Notification"):g({key:"notifications",comment:["{0} will be replaced by a number"]},"{0} New Notifications",this.newNotificationsCount):this.newNotificationsCount===0?g({key:"noNotificationsWithProgress",comment:["{0} will be replaced by a number"]},"No New Notifications ({0} in progress)",i):this.newNotificationsCount===1?g({key:"oneNotificationWithProgress",comment:["{0} will be replaced by a number"]},"1 New Notification ({0} in progress)",i):g({key:"notificationsWithProgress",comment:["{0} and {1} will be replaced by a number"]},"{0} New Notifications ({1} in progress)",this.newNotificationsCount,i)}update(i,e){let t=!1;this.isNotificationsCenterVisible!==i&&(this.isNotificationsCenterVisible=i,this.newNotificationsCount=0,t=!0),this.isNotificationsToastsVisible!==e&&(this.isNotificationsToastsVisible=e,t=!0),t&&this.updateNotificationsCenterStatusItem()}onDidChangeStatusMessage(i){const e=i.item;switch(i.kind){case FF.ADD:this.doSetStatusMessage(e);break;case FF.REMOVE:this.currentStatusMessage&&this.currentStatusMessage[0]===e&&(ii(this.currentStatusMessage[1]),this.currentStatusMessage=void 0);break}}doSetStatusMessage(i){const e=i.message,t=i.options&&typeof i.options.showAfter=="number"?i.options.showAfter:0,n=i.options&&typeof i.options.hideAfter=="number"?i.options.hideAfter:-1;this.currentStatusMessage&&ii(this.currentStatusMessage[1]);let s,o=setTimeout(()=>{s=this.statusbarService.addEntry({name:g("status.message","Status Message"),text:e,ariaLabel:e},"status.message",jr.LEFT,-Number.MAX_VALUE),o=null},t),r;const a={dispose:_z(()=>{o&&clearTimeout(o),r&&clearTimeout(r),s?.dispose()},"dispose")};n>0&&(r=setTimeout(()=>a.dispose(),n)),this.currentStatusMessage=[i,a]}};s4=yVe([bz(1,yf),bz(2,fs)],s4);var goe=Object.defineProperty,SVe=Object.getOwnPropertyDescriptor,vz=(i,e)=>goe(i,"name",{value:e,configurable:!0}),EVe=(i,e,t,n)=>{for(var s=n>1?void 0:n?SVe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&goe(e,t,s),s},Rm=(i,e)=>(t,n)=>e(t,n,i);let lp=class extends Ky{constructor(i,e,t,n,s,o,r,a,l){super(s),this.container=i,this.model=e,this.instantiationService=t,this.layoutService=n,this.editorGroupService=o,this.contextKeyService=r,this.lifecycleService=a,this.hostService=l,this.registerListeners()}static{vz(this,"NotificationsToasts")}static MAX_WIDTH=450;static MAX_NOTIFICATIONS=3;static PURGE_TIMEOUT={[zs.Info]:15e3,[zs.Warning]:18e3,[zs.Error]:2e4};static SPAM_PROTECTION={interval:800,limit:this.MAX_NOTIFICATIONS};_onDidChangeVisibility=this._register(new x);onDidChangeVisibility=this._onDidChangeVisibility.event;_isVisible=!1;get isVisible(){return!!this._isVisible}notificationsToastsContainer;workbenchDimensions;isNotificationsCenterVisible;mapNotificationToToast=new Map;mapNotificationToDisposable=new Map;notificationsToastsVisibleContextKey=zu.bindTo(this.contextKeyService);addedToastsIntervalCounter=new ife(lp.SPAM_PROTECTION.interval);registerListeners(){this._register(this.layoutService.onDidLayoutMainContainer(i=>this.layout(Lt.lift(i)))),this.lifecycleService.when(an.Restored).then(()=>{this.model.notifications.forEach(i=>this.addToast(i)),this._register(this.model.onDidChangeNotification(i=>this.onDidChangeNotification(i)))}),this._register(this.model.onDidChangeFilter(({global:i,sources:e})=>{if(i===Ci.ERROR)this.hide();else if(e)for(const[t]of this.mapNotificationToToast)typeof t.sourceId=="string"&&e.get(t.sourceId)===Ci.ERROR&&t.severity!==zs.Error&&t.priority!==Ul.URGENT&&this.removeToast(t)}))}onDidChangeNotification(i){switch(i.kind){case Ja.ADD:return this.addToast(i.item);case Ja.REMOVE:return this.removeToast(i.item)}}addToast(i){if(this.isNotificationsCenterVisible||i.priority===Ul.SILENT||this.addedToastsIntervalCounter.increment()>lp.SPAM_PROTECTION.limit)return;const e=new te;this.mapNotificationToDisposable.set(i,e),e.add(xo(ve(this.container),()=>this.doAddToast(i,e)))}doAddToast(i,e){let t=this.notificationsToastsContainer;t||(t=this.notificationsToastsContainer=document.createElement("div"),t.classList.add("notifications-toasts"),this.container.appendChild(t)),t.classList.add("visible");const n=document.createElement("div");n.classList.add("notification-toast-container");const s=t.firstChild;s?t.insertBefore(n,s):t.appendChild(n);const o=document.createElement("div");o.classList.add("notification-toast"),n.appendChild(o);const r=this.instantiationService.createInstance(uk,o,{verticalScrollMode:Bi.Hidden,widgetAriaLabel:i.source?g("notificationWithSourceAriaLabel","{0}, source: {1}, notification",i.message.raw,i.source):g("notificationAriaLabel","{0}, notification",i.message.raw)});e.add(r);const a={item:i,list:r,container:n,toast:o};this.mapNotificationToToast.set(i,a),e.add(ye(()=>this.updateToastVisibility(a,!1))),r.show();const l=this.computeMaxDimensions();this.layoutLists(l.width),r.updateNotificationsList(0,0,[i]),this.layoutContainer(l.height),e.add(i.onDidChangeExpansion(()=>{r.updateNotificationsList(0,1,[i])})),e.add(i.onDidChangeContent(c=>{switch(c.kind){case Rg.ACTIONS:r.updateNotificationsList(0,1,[i]);break;case Rg.MESSAGE:i.expanded&&r.updateNotificationHeight(i);break}})),H.once(i.onDidClose)(()=>{this.removeToast(i)}),this.purgeNotification(i,n,r,e),this.updateStyles(),this.notificationsToastsVisibleContextKey.set(!0),o.classList.add("notification-fade-in"),e.add(F(o,"transitionend",()=>{o.classList.remove("notification-fade-in"),o.classList.add("notification-fade-in-done")})),i.updateVisibility(!0),this._isVisible||(this._isVisible=!0,this._onDidChangeVisibility.fire())}purgeNotification(i,e,t,n){let s=!1;n.add(F(e,Q.MOUSE_OVER,()=>s=!0)),n.add(F(e,Q.MOUSE_OUT,()=>s=!1));let o,r;const a=vz(()=>{o=setTimeout(()=>{this.hostService.hasFocus?i.sticky||t.hasFocus()||s?a():this.removeToast(i):r||(r=this.hostService.onDidChangeFocus(l=>{l&&a()}),n.add(r))},lp.PURGE_TIMEOUT[i.severity])},"hideAfterTimeout");a(),n.add(ye(()=>clearTimeout(o)))}removeToast(i){let e=!1;const t=this.mapNotificationToToast.get(i);t&&(Yg(t.container)&&(e=!(this.focusNext()||this.focusPrevious())),this.mapNotificationToToast.delete(i));const n=this.mapNotificationToDisposable.get(i);n&&(ii(n),this.mapNotificationToDisposable.delete(i)),this.mapNotificationToToast.size>0?this.layout(this.workbenchDimensions):(this.doHide(),e&&this.editorGroupService.activeGroup.focus())}removeToasts(){this.mapNotificationToToast.clear(),this.mapNotificationToDisposable.forEach(i=>ii(i)),this.mapNotificationToDisposable.clear(),this.doHide()}doHide(){this.notificationsToastsContainer?.classList.remove("visible"),this.notificationsToastsVisibleContextKey.set(!1),this._isVisible&&(this._isVisible=!1,this._onDidChangeVisibility.fire())}hide(){const i=this.notificationsToastsContainer?Yg(this.notificationsToastsContainer):!1;this.removeToasts(),i&&this.editorGroupService.activeGroup.focus()}focus(){const i=this.getToasts(2);return i.length>0?(i[0].list.focusFirst(),!0):!1}focusNext(){const i=this.getToasts(2);for(let e=0;e<i.length;e++)if(i[e].list.hasFocus()){const n=i[e+1];if(n)return n.list.focusFirst(),!0;break}return!1}focusPrevious(){const i=this.getToasts(2);for(let e=0;e<i.length;e++)if(i[e].list.hasFocus()){const n=i[e-1];if(n)return n.list.focusFirst(),!0;break}return!1}focusFirst(){const i=this.getToasts(2)[0];return i?(i.list.focusFirst(),!0):!1}focusLast(){const i=this.getToasts(2);return i.length>0?(i[i.length-1].list.focusFirst(),!0):!1}update(i){this.isNotificationsCenterVisible!==i&&(this.isNotificationsCenterVisible=i,this.isNotificationsCenterVisible&&this.removeToasts())}updateStyles(){this.mapNotificationToToast.forEach(({toast:i})=>{const e=this.getColor(fw);i.style.background=e||"";const t=this.getColor(lv);i.style.boxShadow=t?`0 0 8px 2px ${t}`:"";const n=this.getColor(Gme);i.style.border=n?`1px solid ${n}`:""})}getToasts(i){const e=[];return this.mapNotificationToToast.forEach(t=>{switch(i){case 0:e.push(t);break;case 1:this.isToastInDOM(t)||e.push(t);break;case 2:this.isToastInDOM(t)&&e.push(t);break}}),e.reverse()}layout(i){this.workbenchDimensions=i;const e=this.computeMaxDimensions();e.height&&this.layoutContainer(e.height),this.layoutLists(e.width)}computeMaxDimensions(){const i=lp.MAX_WIDTH;let e=i,t;return this.workbenchDimensions&&(e=this.workbenchDimensions.width,e-=2*8,t=this.workbenchDimensions.height,this.layoutService.isVisible(Y.STATUSBAR_PART,_e)&&(t-=22),this.layoutService.isVisible(Y.TITLEBAR_PART,_e)&&(t-=22),t-=2*12),t=typeof t=="number"?Math.round(t*.618):0,new Lt(Math.min(i,e),t)}layoutLists(i){this.mapNotificationToToast.forEach(({list:e})=>e.layout(i))}layoutContainer(i){let e=0;for(const t of this.getToasts(0)){t.container.style.opacity="0",this.updateToastVisibility(t,!0),i-=t.container.offsetHeight;let n=!1;e===lp.MAX_NOTIFICATIONS?n=!1:i>=0&&(n=!0),this.updateToastVisibility(t,n),t.container.style.opacity="",n&&e++}}updateToastVisibility(i,e){if(this.isToastInDOM(i)===e)return;const t=pt(this.notificationsToastsContainer);e?t.appendChild(i.container):i.container.remove(),i.item.updateVisibility(e)}isToastInDOM(i){return!!i.container.parentElement}};lp=EVe([Rm(2,He),Rm(3,yt),Rm(4,$t),Rm(5,Ge),Rm(6,Ye),Rm(7,eh),Rm(8,hr)],lp);var LVe=Object.defineProperty,PD=(i,e)=>LVe(i,"name",{value:e,configurable:!0});function o4(i){return i.scheme!==Ve.file&&i.scheme!==Ve.vscodeRemote}PD(o4,"isVirtualResource");function RD(i){if(i.folders.length)return i.folders.every(e=>o4(e.uri))?i.folders[0].uri:void 0;if(i.configuration&&o4(i.configuration))return i.configuration}PD(RD,"getVirtualWorkspaceLocation");function I2(i){return RD(i)?.scheme}PD(I2,"getVirtualWorkspaceScheme");function DVe(i){return RD(i)?.authority}PD(DVe,"getVirtualWorkspaceAuthority");function IVe(i){return RD(i)!==void 0}PD(IVe,"isVirtualWorkspace");var foe=Object.defineProperty,TVe=Object.getOwnPropertyDescriptor,wz=(i,e)=>foe(i,"name",{value:e,configurable:!0}),AVe=(i,e,t,n)=>{for(var s=n>1?void 0:n?TVe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&foe(e,t,s),s},Dh=(i,e)=>(t,n)=>e(t,n,i);let r4=class extends ${constructor(i,e,t,n,s,o,r,a,l,c){super(),this.contextKeyService=i,this.contextService=e,this.configurationService=t,this.environmentService=n,this.productService=s,this.editorGroupService=o,this.editorService=r,this.layoutService=a,this.paneCompositeService=l,this.workingCopyService=c,nke.bindTo(this.contextKeyService),ske.bindTo(this.contextKeyService),oke.bindTo(this.contextKeyService),W3.bindTo(this.contextKeyService),dy.bindTo(this.contextKeyService),xte.bindTo(this.contextKeyService),rke.bindTo(this.contextKeyService),rPe.bindTo(this.contextKeyService).set(pP(this.environmentService.remoteAuthority)||""),this.virtualWorkspaceContext=aPe.bindTo(this.contextKeyService),this.temporaryWorkspaceContext=lPe.bindTo(this.contextKeyService),this.updateWorkspaceContextKeys(),cPe.bindTo(this.contextKeyService).set(Pd.supported(_e));const d=!this.environmentService.isBuilt||this.environmentService.isExtensionDevelopment;QF.bindTo(this.contextKeyService).set(d),qq(QF.key,d),ake.bindTo(this.contextKeyService).set(this.productService.quality||""),dPe.bindTo(this.contextKeyService).set(s.embedderIdentifier),this.activeEditorGroupEmpty=lR.bindTo(this.contextKeyService),this.activeEditorGroupIndex=mPe.bindTo(this.contextKeyService),this.activeEditorGroupLast=_Pe.bindTo(this.contextKeyService),this.activeEditorGroupLocked=Qx.bindTo(this.contextKeyService),this.multipleEditorGroupsContext=SD.bindTo(this.contextKeyService),this.editorsVisibleContext=bPe.bindTo(this.contextKeyService),this.dirtyWorkingCopiesContext=oPe.bindTo(this.contextKeyService),this.dirtyWorkingCopiesContext.set(this.workingCopyService.hasDirty),this.inputFocusedContext=lke.bindTo(this.contextKeyService),this.workbenchStateContext=ePe.bindTo(this.contextKeyService),this.updateWorkbenchStateContextKey(),this.workspaceFolderCountContext=tPe.bindTo(this.contextKeyService),this.updateWorkspaceFolderCountContextKey(),this.openFolderWorkspaceSupportContext=iPe.bindTo(this.contextKeyService),this.openFolderWorkspaceSupportContext.set(ao||typeof this.environmentService.remoteAuthority=="string"),this.emptyWorkspaceSupportContext=sPe.bindTo(this.contextKeyService),this.emptyWorkspaceSupportContext.set(ao||typeof this.environmentService.remoteAuthority=="string"),this.enterMultiRootWorkspaceSupportContext=nPe.bindTo(this.contextKeyService),this.enterMultiRootWorkspaceSupportContext.set(ao||typeof this.environmentService.remoteAuthority=="string"),this.splitEditorsVerticallyContext=vPe.bindTo(this.contextKeyService),this.updateSplitEditorsVerticallyContext(),this.isMainWindowFullscreenContext=ef.bindTo(this.contextKeyService),this.isAuxiliaryWindowFocusedContext=dc.bindTo(this.contextKeyService),this.inZenModeContext=oc.bindTo(this.contextKeyService),this.isMainEditorCenteredLayoutContext=b7.bindTo(this.contextKeyService),this.mainEditorAreaVisibleContext=bie.bindTo(this.contextKeyService),this.editorTabsVisibleContext=wPe.bindTo(this.contextKeyService),this.sideBarVisibleContext=vg.bindTo(this.contextKeyService),this.titleAreaVisibleContext=ED.bindTo(this.contextKeyService),this.titleBarStyleContext=zE.bindTo(this.contextKeyService),this.updateTitleBarContextKeys(),this.panelPositionContext=V_.bindTo(this.contextKeyService),this.panelPositionContext.set(Qa(this.layoutService.getPanelPosition())),this.panelVisibleContext=gy.bindTo(this.contextKeyService),this.panelVisibleContext.set(this.layoutService.isVisible(Y.PANEL_PART)),this.panelMaximizedContext=vie.bindTo(this.contextKeyService),this.panelMaximizedContext.set(this.layoutService.isPanelMaximized()),this.panelAlignmentContext=wg.bindTo(this.contextKeyService),this.panelAlignmentContext.set(this.layoutService.getPanelAlignment()),this.auxiliaryBarVisibleContext=Og.bindTo(this.contextKeyService),this.auxiliaryBarVisibleContext.set(this.layoutService.isVisible(Y.AUXILIARYBAR_PART)),this.registerListeners()}static{wz(this,"WorkbenchContextKeysHandler")}inputFocusedContext;dirtyWorkingCopiesContext;activeEditorGroupEmpty;activeEditorGroupIndex;activeEditorGroupLast;activeEditorGroupLocked;multipleEditorGroupsContext;editorsVisibleContext;splitEditorsVerticallyContext;workbenchStateContext;workspaceFolderCountContext;openFolderWorkspaceSupportContext;enterMultiRootWorkspaceSupportContext;emptyWorkspaceSupportContext;virtualWorkspaceContext;temporaryWorkspaceContext;inZenModeContext;isMainWindowFullscreenContext;isAuxiliaryWindowFocusedContext;isMainEditorCenteredLayoutContext;sideBarVisibleContext;mainEditorAreaVisibleContext;panelPositionContext;panelVisibleContext;panelAlignmentContext;panelMaximizedContext;auxiliaryBarVisibleContext;editorTabsVisibleContext;titleAreaVisibleContext;titleBarStyleContext;registerListeners(){this.editorGroupService.whenReady.then(()=>{this.updateEditorAreaContextKeys(),this.updateActiveEditorGroupContextKeys(),this.updateVisiblePanesContextKeys()}),this._register(this.editorService.onDidActiveEditorChange(()=>this.updateActiveEditorGroupContextKeys())),this._register(this.editorService.onDidVisibleEditorsChange(()=>this.updateVisiblePanesContextKeys())),this._register(this.editorGroupService.onDidAddGroup(()=>this.updateEditorGroupsContextKeys())),this._register(this.editorGroupService.onDidRemoveGroup(()=>this.updateEditorGroupsContextKeys())),this._register(this.editorGroupService.onDidChangeGroupIndex(()=>this.updateActiveEditorGroupContextKeys())),this._register(this.editorGroupService.onDidChangeGroupLocked(()=>this.updateActiveEditorGroupContextKeys())),this._register(this.editorGroupService.onDidChangeEditorPartOptions(()=>this.updateEditorAreaContextKeys())),this._register(H.runAndSubscribe(JN,({window:i,disposables:e})=>e.add(F(i,Q.FOCUS_IN,()=>this.updateInputContextKeys(i.document),!0)),{window:_e,disposables:this._store})),this._register(this.contextService.onDidChangeWorkbenchState(()=>this.updateWorkbenchStateContextKey())),this._register(this.contextService.onDidChangeWorkspaceFolders(()=>{this.updateWorkspaceFolderCountContextKey(),this.updateWorkspaceContextKeys()})),this._register(this.configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration("workbench.editor.openSideBySideDirection")&&this.updateSplitEditorsVerticallyContext()})),this._register(this.layoutService.onDidChangeZenMode(i=>this.inZenModeContext.set(i))),this._register(this.layoutService.onDidChangeActiveContainer(()=>this.isAuxiliaryWindowFocusedContext.set(this.layoutService.activeContainer!==this.layoutService.mainContainer))),this._register(P5(i=>{i===_e.vscodeWindowId&&this.isMainWindowFullscreenContext.set(kb(_e))})),this._register(this.layoutService.onDidChangeMainEditorCenteredLayout(i=>this.isMainEditorCenteredLayoutContext.set(i))),this._register(this.layoutService.onDidChangePanelPosition(i=>this.panelPositionContext.set(i))),this._register(this.layoutService.onDidChangePanelAlignment(i=>this.panelAlignmentContext.set(i))),this._register(this.paneCompositeService.onDidPaneCompositeClose(()=>this.updateSideBarContextKeys())),this._register(this.paneCompositeService.onDidPaneCompositeOpen(()=>this.updateSideBarContextKeys())),this._register(this.layoutService.onDidChangePartVisibility(()=>{this.mainEditorAreaVisibleContext.set(this.layoutService.isVisible(Y.EDITOR_PART,_e)),this.panelVisibleContext.set(this.layoutService.isVisible(Y.PANEL_PART)),this.panelMaximizedContext.set(this.layoutService.isPanelMaximized()),this.auxiliaryBarVisibleContext.set(this.layoutService.isVisible(Y.AUXILIARYBAR_PART)),this.updateTitleBarContextKeys()})),this._register(this.workingCopyService.onDidChangeDirty(i=>this.dirtyWorkingCopiesContext.set(i.isDirty()||this.workingCopyService.hasDirty)))}updateVisiblePanesContextKeys(){this.editorService.visibleEditorPanes.length>0?this.editorsVisibleContext.set(!0):this.editorsVisibleContext.reset()}updateActiveEditorGroupContextKeys(){this.editorService.activeEditor?this.activeEditorGroupEmpty.reset():this.activeEditorGroupEmpty.set(!0);const i=this.editorGroupService.activeGroup;this.activeEditorGroupIndex.set(i.index+1),this.activeEditorGroupLocked.set(i.isLocked),this.updateEditorGroupsContextKeys()}updateEditorGroupsContextKeys(){const i=this.editorGroupService.count;i>1?this.multipleEditorGroupsContext.set(!0):this.multipleEditorGroupsContext.reset();const e=this.editorGroupService.activeGroup;this.activeEditorGroupLast.set(e.index===i-1)}updateEditorAreaContextKeys(){this.editorTabsVisibleContext.set(this.editorGroupService.partOptions.showTabs==="multiple")}updateInputContextKeys(i){function e(){return!!i.activeElement&&Gd(i.activeElement)}wz(e,"activeElementIsInput");const t=e();if(this.inputFocusedContext.set(t),t){const n=al(i.activeElement);H.once(n.onDidBlur)(()=>{sn().document===i&&this.inputFocusedContext.set(e()),n.dispose()})}}updateWorkbenchStateContextKey(){this.workbenchStateContext.set(this.getWorkbenchStateString())}updateWorkspaceFolderCountContextKey(){this.workspaceFolderCountContext.set(this.contextService.getWorkspace().folders.length)}updateSplitEditorsVerticallyContext(){const i=wv(this.configurationService);this.splitEditorsVerticallyContext.set(i===Bt.DOWN)}getWorkbenchStateString(){switch(this.contextService.getWorkbenchState()){case Mc.EMPTY:return"empty";case Mc.FOLDER:return"folder";case Mc.WORKSPACE:return"workspace"}}updateSideBarContextKeys(){this.sideBarVisibleContext.set(this.layoutService.isVisible(Y.SIDEBAR_PART))}updateTitleBarContextKeys(){this.titleAreaVisibleContext.set(this.layoutService.isVisible(Y.TITLEBAR_PART,_e)),this.titleBarStyleContext.set(TP(this.configurationService))}updateWorkspaceContextKeys(){this.virtualWorkspaceContext.set(I2(this.contextService.getWorkspace())||""),this.temporaryWorkspaceContext.set(ZL(this.contextService.getWorkspace()))}};r4=AVe([Dh(0,Ye),Dh(1,po),Dh(2,Pe),Dh(3,id),Dh(4,lS),Dh(5,Ge),Dh(6,nt),Dh(7,yt),Dh(8,Cf),Dh(9,aS)],r4);var xVe=Object.defineProperty,poe=(i,e)=>xVe(i,"name",{value:e,configurable:!0});let kVe=class{constructor(e,t){this.key=e,this.data=t}static{poe(this,"Node")}incoming=new Map;outgoing=new Map};class Cz{constructor(e){this._hashFn=e}static{poe(this,"Graph")}_nodes=new Map;roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),s=this.lookupOrInsertNode(t);n.outgoing.set(s.key,s),s.incoming.set(n.key,n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new kVe(t,e),this._nodes.set(t,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,n]of this._nodes)e.push(`${t}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const n=new Set([e]),s=this._findCycle(t,n);if(s)return s}}_findCycle(e,t){for(const[n,s]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const o=this._findCycle(s,t);if(o)return o;t.delete(n)}}}var NVe=Object.defineProperty,DC=(i,e)=>NVe(i,"name",{value:e,configurable:!0});const PVe=!1;class yz extends Error{static{DC(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class Ak{constructor(e=new av,t=!1,n,s=PVe){this._services=e,this._strict=t,this._parent=n,this._enableTracing=s,this._services.set(He,this),this._globalGraph=s?n?._globalGraph??new Cz(o=>o):void 0}static{DC(this,"InstantiationService")}_globalGraph;_globalGraphImplicitDependency;_isDisposed=!1;_servicesToMaybeDispose=new Set;_children=new Set;dispose(){if(!this._isDisposed){this._isDisposed=!0,ii(this._children),this._children.clear();for(const e of this._servicesToMaybeDispose)DL(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,t){this._throwIfDisposed();const n=this,s=new class extends Ak{dispose(){n._children.delete(s),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(s),t?.add(s),s}invokeFunction(e,...t){this._throwIfDisposed();const n=Ll.traceInvocation(this._enableTracing,e);let s=!1;try{return e({get:DC(r=>{if(s)throw UW("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(r,n);if(!a)throw new Error(`[invokeFunction] unknown service '${r}'`);return a},"get")},...t)}finally{s=!0,n.stop()}}createInstance(e,...t){this._throwIfDisposed();let n,s;return e instanceof $f?(n=Ll.traceCreation(this._enableTracing,e.ctor),s=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=Ll.traceCreation(this._enableTracing,e),s=this._createInstance(e,t,n)),n.stop(),s}_createInstance(e,t=[],n){const s=Od.getServiceDependencies(e).sort((a,l)=>a.index-l.index),o=[];for(const a of s){const l=this._getOrCreateServiceInstance(a.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),o.push(l)}const r=s.length>0?s[0].index:t.length;if(t.length!==r){console.trace(`[createInstance] First service dependency of ${e.name} at position ${r+1} conflicts with ${t.length} static arguments`);const a=r-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,r)}return Reflect.construct(e,t.concat(o))}_setCreatedServiceInstance(e,t){if(this._services.get(e) instanceof $f)this._services.set(e,t);else if(this._parent)this._parent._setCreatedServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const n=this._getServiceInstanceOrDescriptor(e);return n instanceof $f?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_activeInstantiations=new Set;_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const s=new Cz(l=>l.id.toString());let o=0;const r=[{id:e,desc:t,_trace:n}],a=new Set;for(;r.length;){const l=r.pop();if(!a.has(String(l.id))){if(a.add(String(l.id)),s.lookupOrInsertNode(l),o++>1e3)throw new yz(s);for(const c of Od.getServiceDependencies(l.desc.ctor)){const d=this._getServiceInstanceOrDescriptor(c.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${c.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(l.id),String(c.id)),d instanceof $f){const h={id:c.id,desc:d,_trace:l._trace.branch(c.id,!0)};s.insertEdge(l,h),r.push(h)}}}}for(;;){const l=s.roots();if(l.length===0){if(!s.isEmpty())throw new yz(s);break}for(const{data:c}of l){if(this._getServiceInstanceOrDescriptor(c.id) instanceof $f){const h=this._createServiceInstanceWithOwner(c.id,c.desc.ctor,c.desc.staticArguments,c.desc.supportsDelayedInstantiation,c._trace);this._setCreatedServiceInstance(c.id,h)}s.removeNode(c)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],s,o){if(this._services.get(e) instanceof $f)return this._createServiceInstance(e,t,n,s,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,s,o);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,n=[],s,o,r){if(s){const a=new Ak(void 0,this._strict,this,this._enableTracing);a._globalGraphImplicitDependency=String(e);const l=new Map,c=new jM(()=>{const d=a._createInstance(t,n,o);for(const[h,u]of l){const f=d[h];if(typeof f=="function")for(const p of u)p.disposable=f.apply(d,p.listener)}return l.clear(),r.add(d),d});return new Proxy(Object.create(null),{get(d,h){if(!c.isInitialized&&typeof h=="string"&&(h.startsWith("onDid")||h.startsWith("onWill"))){let p=l.get(h);return p||(p=new ru,l.set(h,p)),DC((_,w,v)=>{if(c.isInitialized)return c.value[h](_,w,v);{const b={listener:[_,w,v],disposable:void 0},C=p.push(b);return ye(()=>{C(),b.disposable?.dispose()})}},"event")}if(h in d)return d[h];const u=c.value;let f=u[h];return typeof f!="function"||(f=f.bind(u),d[h]=f),f},set(d,h,u){return c.value[h]=u,!0},getPrototypeOf(d){return t.prototype}})}else{const a=this._createInstance(t,n,o);return r.add(a),a}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}class Ll{constructor(e,t){this.type=e,this.name=t}static{DC(this,"Trace")}static all=new Set;static _None=new class extends Ll{constructor(){super(0,null)}stop(){}branch(){return this}};static traceInvocation(e,t){return e?new Ll(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):Ll._None}static traceCreation(e,t){return e?new Ll(1,t.name):Ll._None}static _totals=0;_start=Date.now();_dep=[];branch(e,t){const n=new Ll(3,e.toString());return this._dep.push([e,t,n]),n}stop(){const e=Date.now()-this._start;Ll._totals+=e;let t=!1;function n(o,r){const a=[],l=new Array(o+1).join("	");for(const[c,d,h]of r._dep)if(d&&h){t=!0,a.push(`${l}CREATES -> ${c}`);const u=n(o+1,h);u&&a.push(u)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}DC(n,"printChild");const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${Ll._totals.toFixed(2)}ms)`];(e>2||t)&&Ll.all.add(s.join(`
`))}}var RVe=Object.defineProperty,OVe=(i,e)=>RVe(i,"name",{value:e,configurable:!0});class MVe extends ge{static{OVe(this,"FocusSideBarAction")}constructor(){super({id:"workbench.action.focusSideBar",title:W("focusSideBar","Focus into Primary Side Bar"),category:oe.View,f1:!0,keybinding:{weight:Ce.WorkbenchContrib,when:null,primary:M.CtrlCmd|E.Digit0}})}async run(e){const t=e.get(yt),n=e.get(Cf);t.isVisible(Y.SIDEBAR_PART)||t.setPartHidden(!1,Y.SIDEBAR_PART),n.getActivePaneComposite(Te.Sidebar)?.focus()}}Oe(MVe);var BVe=Object.defineProperty,jv=(i,e)=>BVe(i,"name",{value:e,configurable:!0});class FVe extends gD{constructor(e,t,n,s,o,r,a,l,c,d,h,u,f,p,m,_){super(m,_,l,t,s),this.notificationService=e,this.storageService=t,this.contextMenuService=n,this.keybindingService=o,this.hoverService=r,this.instantiationService=a,this.registry=c,this.activeCompositeSettingsKey=d,this.defaultCompositeId=h,this.nameForTelemetry=u,this.compositeCSSClass=f,this.titleForegroundColor=p,this.lastActiveCompositeId=t.get(d,Be.WORKSPACE,this.defaultCompositeId),this.toolbarHoverDelegate=this._register(cm())}static{jv(this,"CompositePart")}onDidCompositeOpen=this._register(new x);onDidCompositeClose=this._register(new x);toolBar;titleLabelElement;toolbarHoverDelegate;mapCompositeToCompositeContainer=new Map;mapActionsBindingToComposite=new Map;activeComposite;lastActiveCompositeId;instantiatedCompositeItems=new Map;titleLabel;progressBar;contentAreaSize;actionsListener=this._register(new Yi);currentCompositeOpenToken;boundarySashes;openComposite(e,t){if(this.activeComposite?.getId()===e)return t&&this.activeComposite.focus(),this.activeComposite;if(this.element)return this.doOpenComposite(e,t)}doOpenComposite(e,t=!1){const n=$F.nextId();this.currentCompositeOpenToken=n,this.activeComposite&&this.hideActiveComposite(),this.updateTitle(e);const s=this.createComposite(e,!0);if(!(this.currentCompositeOpenToken!==n||this.activeComposite&&this.activeComposite.getId()!==s.getId()))return this.activeComposite?.getId()===s.getId()?(t&&s.focus(),this.onDidCompositeOpen.fire({composite:s,focus:t}),s):(this.showComposite(s),t&&s.focus(),s&&this.onDidCompositeOpen.fire({composite:s,focus:t}),s)}createComposite(e,t){const n=this.instantiatedCompositeItems.get(e);if(n)return n.composite;const s=this.registry.getComposite(e);if(s){const o=this,r=new Yne(pt(this.progressBar),new class extends Zne{constructor(){super(s.id,!!t),this._register(o.onDidCompositeOpen.event(d=>this.onScopeOpened(d.composite.getId()))),this._register(o.onDidCompositeClose.event(d=>this.onScopeClosed(d.getId())))}}),a=this._register(this.instantiationService.createChild(new av([YQ,r]))),l=s.instantiate(a),c=new te;return this.instantiatedCompositeItems.set(e,{composite:l,disposable:c,progress:r}),c.add(l.onTitleAreaUpdate(()=>this.onTitleAreaUpdate(l.getId()),this)),c.add(a),l}throw new Error(`Unable to find composite with id ${e}`)}showComposite(e){this.activeComposite=e;const t=this.activeComposite.getId();t!==this.defaultCompositeId?this.storageService.store(this.activeCompositeSettingsKey,t,Be.WORKSPACE,ai.MACHINE):this.storageService.remove(this.activeCompositeSettingsKey,Be.WORKSPACE),this.lastActiveCompositeId=this.activeComposite.getId();let n=this.mapCompositeToCompositeContainer.get(e.getId());if(n||(n=ce(".composite"),n.classList.add(...this.compositeCSSClass.split(" ")),n.id=e.getId(),e.create(n),e.updateStyles(),this.mapCompositeToCompositeContainer.set(e.getId(),n)),!this.activeComposite||e.getId()!==this.activeComposite.getId())return;this.getContentArea()?.appendChild(n),Gl(n);const o=pt(this.toolBar);o.actionRunner=e.getActionRunner();const r=this.registry.getComposite(e.getId());r&&r.name!==e.getTitle()&&this.updateTitle(e.getId(),e.getTitle());let a=this.mapActionsBindingToComposite.get(e.getId());a||(a=this.collectCompositeActions(e),this.mapActionsBindingToComposite.set(e.getId(),a)),a(),this.actionsListener.value=o.actionRunner.onDidRun(l=>{l.error&&!lf(l.error)&&this.notificationService.error(l.error)}),e.setVisible(!0),!(!this.activeComposite||e.getId()!==this.activeComposite.getId())&&(this.contentAreaSize&&e.layout(this.contentAreaSize),this.boundarySashes&&e.setBoundarySashes(this.boundarySashes))}onTitleAreaUpdate(e){const t=this.instantiatedCompositeItems.get(e);if(t&&this.updateTitle(e,t.composite.getTitle()),this.activeComposite?.getId()===e){const n=this.collectCompositeActions(this.activeComposite);this.mapActionsBindingToComposite.set(this.activeComposite.getId(),n),n()}else this.mapActionsBindingToComposite.delete(e)}updateTitle(e,t){const n=this.registry.getComposite(e);if(!n||!this.titleLabel)return;t||(t=n.name);const s=this.keybindingService.lookupKeybinding(e);this.titleLabel.updateTitle(e,t,s?.getLabel()??void 0),pt(this.toolBar).setAriaLabel(g("ariaCompositeToolbarLabel","{0} actions",t))}collectCompositeActions(e){const t=e?.getMenuIds(),n=e?.getActions().slice(0)||[],s=e?.getSecondaryActions().slice(0)||[],o=pt(this.toolBar);return o.context=this.actionsContextProvider(),()=>o.setActions(sc(n),sc(s),t)}getActiveComposite(){return this.activeComposite}getLastActiveCompositeId(){return this.lastActiveCompositeId}hideActiveComposite(){if(!this.activeComposite)return;const e=this.activeComposite;this.activeComposite=void 0;const t=this.mapCompositeToCompositeContainer.get(e.getId());return e.setVisible(!1),t&&(t.remove(),Wc(t)),this.progressBar?.stop().hide(),this.toolBar&&this.collectCompositeActions()(),this.onDidCompositeClose.fire(e),e}createTitleArea(e){const t=Le(e,ce(".composite"));t.classList.add("title"),this.titleLabel=this.createTitleLabel(t);const n=Le(t,ce(".title-actions"));return this.toolBar=this._register(this.instantiationService.createInstance(fu,n,{actionViewItemProvider:jv((s,o)=>this.actionViewItemProvider(s,o),"actionViewItemProvider"),orientation:Ns.HORIZONTAL,getKeyBinding:jv(s=>this.keybindingService.lookupKeybinding(s.id),"getKeyBinding"),anchorAlignmentProvider:jv(()=>this.getTitleAreaDropDownAnchorAlignment(),"anchorAlignmentProvider"),toggleMenuTitle:g("viewsAndMoreActions","Views and More Actions..."),telemetrySource:this.nameForTelemetry,hoverDelegate:this.toolbarHoverDelegate})),this.collectCompositeActions()(),t}createTitleLabel(e){const t=Le(e,ce(".title-label")),n=Le(t,ce("h2"));this.titleLabelElement=n;const s=this._register(this.hoverService.setupManagedHover(bn("mouse"),n,"")),o=this;return{updateTitle:jv((r,a,l)=>{(!this.activeComposite||this.activeComposite.getId()===r)&&(n.innerText=a,s.update(l?g("titleTooltip","{0} ({1})",a,l):a))},"updateTitle"),updateStyles:jv(()=>{n.style.color=o.titleForegroundColor&&o.getColor(o.titleForegroundColor)||""},"updateStyles")}}createHeaderArea(){return ce(".composite")}createFooterArea(){return ce(".composite")}updateStyles(){super.updateStyles(),pt(this.titleLabel).updateStyles()}actionViewItemProvider(e,t){return this.activeComposite?this.activeComposite.getActionViewItem(e,t):fm(this.instantiationService,e,t)}actionsContextProvider(){return this.activeComposite?this.activeComposite.getActionsContext():null}createContentArea(e){const t=Le(e,ce(".content"));return this.progressBar=this._register(new uy(t,JP)),this.progressBar.hide(),t}getProgressIndicator(e){const t=this.instantiatedCompositeItems.get(e);return t?t.progress:void 0}getTitleAreaDropDownAnchorAlignment(){return cu.RIGHT}layout(e,t,n,s){super.layout(e,t,n,s),this.contentAreaSize=Lt.lift(super.layoutContents(e,t).contentSize),this.activeComposite?.layout(this.contentAreaSize)}setBoundarySashes(e){this.boundarySashes=e,this.activeComposite?.setBoundarySashes(e)}removeComposite(e){if(this.activeComposite?.getId()===e)return!1;this.mapCompositeToCompositeContainer.delete(e),this.mapActionsBindingToComposite.delete(e);const t=this.instantiatedCompositeItems.get(e);return t&&(t.composite.dispose(),ii(t.disposable),this.instantiatedCompositeItems.delete(e)),!0}dispose(){this.mapCompositeToCompositeContainer.clear(),this.mapActionsBindingToComposite.clear(),this.instantiatedCompositeItems.forEach(e=>{e.composite.dispose(),ii(e.disposable)}),this.instantiatedCompositeItems.clear(),super.dispose()}}var VVe=Object.defineProperty,CS=(i,e)=>VVe(i,"name",{value:e,configurable:!0});const yS=De("activityService");class T2{constructor(e,t){this.descriptorFn=e,this.stylesFn=t}static{CS(this,"BaseBadge")}getDescription(){return this.descriptorFn(null)}getColors(e){return this.stylesFn?.(e)}}class S0 extends T2{constructor(e,t){super(t,void 0),this.number=e,this.number=e}static{CS(this,"NumberBadge")}getDescription(){return this.descriptorFn(this.number)}}class A2 extends T2{constructor(e,t,n){super(t,n),this.icon=e}static{CS(this,"IconBadge")}}class WVe extends T2{static{CS(this,"ProgressBadge")}constructor(e){super(e,void 0)}}class TGe extends A2{static{CS(this,"WarningBadge")}constructor(e){super(ee.warning,e,t=>({badgeBackground:t.getColor(UVe),badgeForeground:t.getColor(HVe),badgeBorder:void 0}))}}class AGe extends A2{static{CS(this,"ErrorBadge")}constructor(e){super(ee.error,e,t=>({badgeBackground:t.getColor($Ve),badgeForeground:t.getColor(zVe),badgeBorder:void 0}))}}const HVe=L("activityWarningBadge.foreground",{dark:U.black.lighten(.2),light:U.white,hcDark:null,hcLight:U.black.lighten(.2)},g("activityWarningBadge.foreground","Foreground color of the warning activity badge")),UVe=L("activityWarningBadge.background",{dark:"#CCA700",light:"#BF8803",hcDark:null,hcLight:"#CCA700"},g("activityWarningBadge.background","Background color of the warning activity badge")),zVe=L("activityErrorBadge.foreground",{dark:U.black.lighten(.2),light:U.white,hcDark:null,hcLight:U.black.lighten(.2)},g("activityErrorBadge.foreground","Foreground color of the error activity badge")),$Ve=L("activityErrorBadge.background",{dark:"#F14C4C",light:"#E51400",hcDark:null,hcLight:"#F14C4C"},g("activityErrorBadge.background","Background color of the error activity badge"));var moe=Object.defineProperty,GVe=Object.getOwnPropertyDescriptor,Fo=(i,e)=>moe(i,"name",{value:e,configurable:!0}),LR=(i,e,t,n)=>{for(var s=n>1?void 0:n?GVe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&moe(e,t,s),s},Zr=(i,e)=>(t,n)=>e(t,n,i);class Cy extends Mt{constructor(e){super(e.id,e.name,e.classNames?.join(" "),!0),this.item=e}static{Fo(this,"CompositeBarAction")}_onDidChangeCompositeBarActionItem=this._register(new x);onDidChangeCompositeBarActionItem=this._onDidChangeCompositeBarActionItem.event;_onDidChangeActivity=this._register(new x);onDidChangeActivity=this._onDidChangeActivity.event;_activity;get compositeBarActionItem(){return this.item}set compositeBarActionItem(e){this._label=e.name,this.item=e,this._onDidChangeCompositeBarActionItem.fire(this)}get activity(){return this._activity}set activity(e){this._activity=e,this._onDidChangeActivity.fire(e)}activate(){this.checked||this._setChecked(!0)}deactivate(){this.checked&&this._setChecked(!1)}}let Qb=class extends yr{constructor(i,e,t,n,s,o,r){super(null,i,e),this.badgesEnabled=t,this.themeService=n,this.hoverService=s,this.configurationService=o,this.keybindingService=r,this.options=e,this._register(this.themeService.onDidColorThemeChange(this.onThemeChange,this)),this._register(i.onDidChangeCompositeBarActionItem(()=>this.update())),this._register(H.filter(r.onDidUpdateKeybindings,()=>this.keybindingLabel!==this.computeKeybindingLabel())(()=>this.updateTitle())),this._register(i.onDidChangeActivity(()=>this.updateActivity())),this._register(ye(()=>this.showHoverScheduler.cancel()))}static{Fo(this,"CompositeBarActionViewItem")}static hoverLeaveTime=0;container;label;badge;options;badgeContent;badgeDisposable=this._register(new Yi);mouseUpTimeout;keybindingLabel;hoverDisposables=this._register(new te);lastHover;showHoverScheduler=new xn(()=>this.showHover(),0);get compositeBarActionItem(){return this._action.compositeBarActionItem}updateStyles(){const i=this.themeService.getColorTheme(),e=this.options.colors(i);if(this.label){if(this.options.icon){const t=this._action.checked?e.activeForegroundColor:e.inactiveForegroundColor;this.compositeBarActionItem.iconUrl?(this.label.style.backgroundColor=t?t.toString():"",this.label.style.color=""):(this.label.style.color=t?t.toString():"",this.label.style.backgroundColor="")}else{const t=this._action.checked?e.activeForegroundColor:e.inactiveForegroundColor,n=this._action.checked?e.activeBorderBottomColor:null;this.label.style.color=t?t.toString():"",this.label.style.borderBottomColor=n?n.toString():""}this.container.style.setProperty("--insert-border-color",e.dragAndDropBorder?e.dragAndDropBorder.toString():"")}if(this.badgeContent){const t=this.getActivity()?.badge.getColors(i),n=t?.badgeForeground??e.badgeForeground??i.getColor(UN),s=t?.badgeBackground??e.badgeBackground??i.getColor(X_),o=t?.badgeBorder??i.getColor(Re);this.badgeContent.style.color=n?n.toString():"",this.badgeContent.style.backgroundColor=s?s.toString():"",this.badgeContent.style.borderStyle=o&&!this.options.compact?"solid":"",this.badgeContent.style.borderWidth=o?"1px":"",this.badgeContent.style.borderColor=o?o.toString():""}}render(i){super.render(i),this.container=i,this.options.icon&&this.container.classList.add("icon"),this.options.hasPopup?(this.container.setAttribute("role","button"),this.container.setAttribute("aria-haspopup","true")):this.container.setAttribute("role","tab"),this._register(F(this.container,Q.MOUSE_DOWN,()=>{this.container.classList.add("clicked")})),this._register(F(this.container,Q.MOUSE_UP,()=>{this.mouseUpTimeout&&clearTimeout(this.mouseUpTimeout),this.mouseUpTimeout=setTimeout(()=>{this.container.classList.remove("clicked")},800)})),this.label=Le(i,ce("a")),this.badge=Le(i,ce(".badge")),this.badgeContent=Le(this.badge,ce(".badge-content")),Le(i,ce(".active-item-indicator")),Wc(this.badge),this.update(),this.updateStyles(),this.updateHover()}onThemeChange(i){this.updateStyles()}update(){this.updateLabel(),this.updateActivity(),this.updateTitle(),this.updateStyles()}getActivity(){if(this._action instanceof Cy)return this._action.activity}updateActivity(){if(!this.badge||!this.badgeContent||!(this._action instanceof Cy))return;const i=this.getActivity();this.badgeDisposable.value=new te,Mn(this.badgeContent),Wc(this.badge);const e=this.badgesEnabled(this.compositeBarActionItem.id);if(i&&e){const{badge:t}=i,n=[];if(this.options.compact&&n.push("compact"),t instanceof WVe)Gl(this.badge),n.push("progress-badge");else if(t instanceof S0){if(t.number){let s=t.number.toString();if(t.number>999){const o=t.number/1e3,r=Math.floor(o);o>r?s=`${r}K+`:s=`${o}K`}this.options.compact&&s.length>=3&&n.push("compact-content"),this.badgeContent.textContent=s,Gl(this.badge)}}else if(t instanceof A2){n.push("icon-badge");const s=["icon-overlay",...Ne.asClassNameArray(t.icon)];this.badgeContent.classList.add(...s),this.badgeDisposable.value.add(ye(()=>this.badgeContent?.classList.remove(...s))),Gl(this.badge)}n.length&&(this.badge.classList.add(...n),this.badgeDisposable.value.add(ye(()=>this.badge.classList.remove(...n))))}this.updateTitle(),this.updateStyles()}updateLabel(){this.label.className="action-label",this.compositeBarActionItem.classNames&&this.label.classList.add(...this.compositeBarActionItem.classNames),this.options.icon||(this.label.textContent=this.action.label)}updateTitle(){const i=this.computeTitle();[this.label,this.badge,this.container].forEach(e=>{e&&(e.setAttribute("aria-label",i),e.setAttribute("title",""),e.removeAttribute("title"))})}computeTitle(){this.keybindingLabel=this.computeKeybindingLabel();let i=this.keybindingLabel?g("titleKeybinding","{0} ({1})",this.compositeBarActionItem.name,this.keybindingLabel):this.compositeBarActionItem.name;const e=this.action.activity?.badge;return e?.getDescription()&&(i=g("badgeTitle","{0} - {1}",i,e.getDescription())),i}computeKeybindingLabel(){return(this.compositeBarActionItem.keybindingId?this.keybindingService.lookupKeybinding(this.compositeBarActionItem.keybindingId):null)?.getLabel()}updateHover(){this.hoverDisposables.clear(),this.updateTitle(),this.hoverDisposables.add(F(this.container,Q.MOUSE_OVER,()=>{this.showHoverScheduler.isScheduled()||(Date.now()-Qb.hoverLeaveTime<200?this.showHover(!0):this.showHoverScheduler.schedule(this.configurationService.getValue("workbench.hover.delay")))},!0)),this.hoverDisposables.add(F(this.container,Q.MOUSE_LEAVE,i=>{i.target===this.container&&(Qb.hoverLeaveTime=Date.now(),this.hoverService.hideHover(),this.showHoverScheduler.cancel())},!0)),this.hoverDisposables.add(ye(()=>{this.hoverService.hideHover(),this.showHoverScheduler.cancel()}))}showHover(i=!1){if(this.lastHover&&!this.lastHover.isDisposed)return;const e=this.options.hoverOptions.position();this.lastHover=this.hoverService.showHover({target:this.container,content:this.computeTitle(),position:{hoverPosition:e},persistence:{hideOnKeyDown:!0},appearance:{showPointer:!0,compact:!0,skipFadeInAnimation:i}})}dispose(){super.dispose(),this.mouseUpTimeout&&clearTimeout(this.mouseUpTimeout),this.badge.remove()}};Qb=LR([Zr(3,$t),Zr(4,Po),Zr(5,Pe),Zr(6,ni)],Qb);class Sz extends Cy{constructor(e){super({id:"additionalComposites.action",name:g("additionalViews","Additional Views"),classNames:Ne.asClassNameArray(ee.more)}),this.showMenu=e}static{Fo(this,"CompositeOverflowActivityAction")}async run(){this.showMenu()}}let a4=class extends Qb{constructor(i,e,t,n,s,o,r,a,l,c,d,h){super(i,{icon:!0,colors:o,hasPopup:!0,hoverOptions:r},()=>!0,l,c,d,h),this.getOverflowingComposites=e,this.getActiveCompositeId=t,this.getBadge=n,this.getCompositeOpenAction=s,this.contextMenuService=a}static{Fo(this,"CompositeOverflowActivityActionViewItem")}showMenu(){this.contextMenuService.showContextMenu({getAnchor:Fo(()=>this.container,"getAnchor"),getActions:Fo(()=>this.getActions(),"getActions"),getCheckedActionsRepresentation:Fo(()=>"radio","getCheckedActionsRepresentation")})}getActions(){return this.getOverflowingComposites().map(i=>{const e=this.getCompositeOpenAction(i.id);e.checked=this.getActiveCompositeId()===e.id;const t=this.getBadge(i.id);let n;return t instanceof S0&&(n=t.number),n?e.label=g("numberBadge","{0} ({1})",i.name,n):e.label=i.name||"",e})}};a4=LR([Zr(7,Hi),Zr(8,$t),Zr(9,Po),Zr(10,Pe),Zr(11,ni)],a4);let l4=class extends Mt{constructor(i){super("activitybar.manage.extension",g("manageExtension","Manage Extension")),this.commandService=i}static{Fo(this,"ManageExtensionAction")}run(i){return this.commandService.executeCommand("_extensions.manage",i)}};l4=LR([Zr(0,Xi)],l4);let IC=class extends Qb{constructor(i,e,t,n,s,o,r,a,l,c,d,h,u,f){super(e,i,a.areBadgesEnabled.bind(a),h,u,f,c),this.compositeActivityAction=e,this.toggleCompositePinnedAction=t,this.toggleCompositeBadgeAction=n,this.compositeContextMenuActionsProvider=s,this.contextMenuActionsProvider=o,this.dndHandler=r,this.compositeBar=a,this.contextMenuService=l,IC.manageExtensionAction||(IC.manageExtensionAction=d.createInstance(l4))}static{Fo(this,"CompositeActionViewItem")}static manageExtensionAction;render(i){super.render(i),this.updateChecked(),this.updateEnabled(),this._register(F(this.container,Q.CONTEXT_MENU,t=>{Fe.stop(t,!0),this.showContextMenu(i)}));let e;this._register(Ol.INSTANCE.registerDraggable(this.container,()=>({type:"composite",id:this.compositeBarActionItem.id}),{onDragOver:Fo(t=>{const n=t.dragAndDropData.getData().id!==this.compositeBarActionItem.id&&this.dndHandler.onDragOver(t.dragAndDropData,this.compositeBarActionItem.id,t.eventData);_y(t.eventData.dataTransfer,"move",n),e=this.updateFromDragging(i,n,t.eventData)},"onDragOver"),onDragLeave:Fo(t=>{e=this.updateFromDragging(i,!1,t.eventData)},"onDragLeave"),onDragEnd:Fo(t=>{e=this.updateFromDragging(i,!1,t.eventData)},"onDragEnd"),onDrop:Fo(t=>{Fe.stop(t.eventData,!0),this.dndHandler.drop(t.dragAndDropData,this.compositeBarActionItem.id,t.eventData,e),e=this.updateFromDragging(i,!1,t.eventData)},"onDrop"),onDragStart:Fo(t=>{t.dragAndDropData.getData().id===this.compositeBarActionItem.id&&(t.eventData.dataTransfer&&(t.eventData.dataTransfer.effectAllowed="move"),this.blur())},"onDragStart")})),[this.badge,this.label].forEach(t=>this._register(new kTe(t,()=>{this.action.checked||this.action.run()}))),this.updateStyles()}updateFromDragging(i,e,t){const n=i.getBoundingClientRect(),s=t.clientX,o=t.clientY,r=n.bottom-n.top,a=n.right-n.left,l=o<=n.top+r*.4,c=o>n.bottom-r*.4,d=o<=n.top+r*.5,h=s<=n.left+a*.4,u=s>n.right-a*.4,f=s<=n.left+a*.5,p=i.classList,m={vertical:p.contains("top")?"top":p.contains("bottom")?"bottom":void 0,horizontal:p.contains("left")?"left":p.contains("right")?"right":void 0},_=l||d&&!m.vertical||!c&&m.vertical==="top",w=c||!d&&!m.vertical||!l&&m.vertical==="bottom",v=h||f&&!m.horizontal||!u&&m.horizontal==="left",b=u||!f&&!m.horizontal||!h&&m.horizontal==="right";if(i.classList.toggle("top",e&&_),i.classList.toggle("bottom",e&&w),i.classList.toggle("left",e&&v),i.classList.toggle("right",e&&b),!!e)return{verticallyBefore:_,horizontallyBefore:v}}showContextMenu(i){const e=[this.toggleCompositePinnedAction,this.toggleCompositeBadgeAction],t=this.compositeContextMenuActionsProvider(this.compositeBarActionItem.id);t.length&&e.push(...t),this.compositeActivityAction.compositeBarActionItem.extensionId&&(e.push(new zt),e.push(IC.manageExtensionAction)),this.compositeBar.isPinned(this.compositeBarActionItem.id)?(this.toggleCompositePinnedAction.label=g("hide","Hide '{0}'",this.compositeBarActionItem.name),this.toggleCompositePinnedAction.checked=!1):this.toggleCompositePinnedAction.label=g("keep","Keep '{0}'",this.compositeBarActionItem.name),this.compositeBar.areBadgesEnabled(this.compositeBarActionItem.id)?this.toggleCompositeBadgeAction.label=g("hideBadge","Hide Badge"):this.toggleCompositeBadgeAction.label=g("showBadge","Show Badge");const o=this.contextMenuActionsProvider();o.length&&(e.push(new zt),e.push(...o));const r=Xr(i),a={x:Math.floor(r.left+r.width/2),y:r.top+r.height};this.contextMenuService.showContextMenu({getAnchor:Fo(()=>a,"getAnchor"),getActions:Fo(()=>e,"getActions"),getActionsContext:Fo(()=>this.compositeBarActionItem.id,"getActionsContext")})}updateChecked(){this.action.checked?(this.container.classList.add("checked"),this.container.setAttribute("aria-label",this.getTooltip()??this.container.title),this.container.setAttribute("aria-expanded","true"),this.container.setAttribute("aria-selected","true")):(this.container.classList.remove("checked"),this.container.setAttribute("aria-label",this.getTooltip()??this.container.title),this.container.setAttribute("aria-expanded","false"),this.container.setAttribute("aria-selected","false")),this.updateStyles()}updateEnabled(){this.element&&(this.action.enabled?this.element.classList.remove("disabled"):this.element.classList.add("disabled"))}dispose(){super.dispose(),this.label.remove()}};IC=LR([Zr(8,Hi),Zr(9,ni),Zr(10,He),Zr(11,$t),Zr(12,Po),Zr(13,Pe)],IC);class _oe extends Mt{constructor(e,t){super("show.toggleCompositePinned",e?e.name:g("toggle","Toggle View Pinned")),this.activity=e,this.compositeBar=t,this.checked=!!this.activity&&this.compositeBar.isPinned(this.activity.id)}static{Fo(this,"ToggleCompositePinnedAction")}async run(e){const t=this.activity?this.activity.id:e;this.compositeBar.isPinned(t)?this.compositeBar.unpin(t):this.compositeBar.pin(t)}}class boe extends Mt{constructor(e,t){super("show.toggleCompositeBadge",e?e.name:g("toggleBadge","Toggle View Badge")),this.compositeBarActionItem=e,this.compositeBar=t,this.checked=!1}static{Fo(this,"ToggleCompositeBadgeAction")}async run(e){const t=this.compositeBarActionItem?this.compositeBarActionItem.id:e;this.compositeBar.toggleBadgeEnablement(t)}}var voe=Object.defineProperty,KVe=Object.getOwnPropertyDescriptor,cp=(i,e)=>voe(i,"name",{value:e,configurable:!0}),jVe=(i,e,t,n)=>{for(var s=n>1?void 0:n?KVe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&voe(e,t,s),s},lM=(i,e)=>(t,n)=>e(t,n,i);class qVe{constructor(e,t,n,s,o,r){this.viewDescriptorService=e,this.targetContainerLocation=t,this.orientation=n,this.openComposite=s,this.moveComposite=o,this.getItems=r}static{cp(this,"CompositeDragAndDrop")}drop(e,t,n,s){const o=e.getData();if(o.type==="composite"){const r=this.viewDescriptorService.getViewContainerById(o.id);this.viewDescriptorService.getViewContainerLocation(r)===this.targetContainerLocation?t&&this.moveComposite(o.id,t,s):this.viewDescriptorService.moveViewContainerToLocation(r,this.targetContainerLocation,this.getTargetIndex(t,s),"dnd")}if(o.type==="view"){const r=this.viewDescriptorService.getViewDescriptorById(o.id);if(r&&r.canMoveView){this.viewDescriptorService.moveViewToLocation(r,this.targetContainerLocation,"dnd");const a=this.viewDescriptorService.getViewContainerByViewId(r.id);t&&this.moveComposite(a.id,t,s),this.openComposite(a.id,!0).then(l=>{l?.openView(r.id,!0)})}}}onDragEnter(e,t,n){return this.canDrop(e,t)}onDragOver(e,t,n){return this.canDrop(e,t)}getTargetIndex(e,t){if(!e)return;const n=this.getItems(),s=this.orientation===Ns.HORIZONTAL?t?.horizontallyBefore:t?.verticallyBefore;return n.filter(o=>o.visible).findIndex(o=>o.id===e)+(s?0:1)}canDrop(e,t){const n=e.getData();if(n.type==="composite"){const s=this.viewDescriptorService.getViewContainerById(n.id);return this.viewDescriptorService.getViewContainerLocation(s)===this.targetContainerLocation?n.id!==t:!0}else{const s=this.viewDescriptorService.getViewDescriptorById(n.id);return!(!s||!s.canMoveView)}}}class YVe{constructor(e,t,n,s,o){this.compositeBarContainer=e,this.actionBarContainer=t,this.compositeBarModel=n,this.dndHandler=s,this.orientation=o}static{cp(this,"CompositeBarDndCallbacks")}insertDropBefore=void 0;onDragOver(e){const t=this.compositeBarModel.visibleItems;if(!t.length||e.eventData.target&&As(e.eventData.target,this.actionBarContainer)){this.insertDropBefore=this.updateFromDragging(this.compositeBarContainer,!1,!1,!0);return}const n=this.insertAtFront(this.actionBarContainer,e.eventData),s=n?t[0]:t[t.length-1],o=this.dndHandler.onDragOver(e.dragAndDropData,s.id,e.eventData);_y(e.eventData.dataTransfer,"move",o),this.insertDropBefore=this.updateFromDragging(this.compositeBarContainer,o,n,!0)}onDragLeave(e){this.insertDropBefore=this.updateFromDragging(this.compositeBarContainer,!1,!1,!1)}onDragEnd(e){this.insertDropBefore=this.updateFromDragging(this.compositeBarContainer,!1,!1,!1)}onDrop(e){const t=this.compositeBarModel.visibleItems;let n;t.length&&(n=this.insertAtFront(this.actionBarContainer,e.eventData)?t[0].id:t[t.length-1].id),this.dndHandler.drop(e.dragAndDropData,n,e.eventData,this.insertDropBefore),this.insertDropBefore=this.updateFromDragging(this.compositeBarContainer,!1,!1,!1)}insertAtFront(e,t){const n=e.getBoundingClientRect(),s=t.clientX,o=t.clientY;switch(this.orientation){case Ns.HORIZONTAL:return s<n.left;case Ns.VERTICAL:return o<n.top}}updateFromDragging(e,t,n,s){if(e.classList.toggle("dragged-over",s),e.classList.toggle("dragged-over-head",t&&n),e.classList.toggle("dragged-over-tail",t&&!n),!!t)return{verticallyBefore:n,horizontallyBefore:n}}}let c4=class extends Jc{constructor(i,e,t,n,s){super(),this.options=e,this.instantiationService=t,this.contextMenuService=n,this.viewDescriptorService=s,this.model=new ZVe(i,e),this.visibleComposites=[],this.compositeSizeInBar=new Map,this.computeSizes(this.model.visibleItems)}static{cp(this,"CompositeBar")}_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;dimension;compositeSwitcherBar;compositeOverflowAction;compositeOverflowActionViewItem;model;visibleComposites;compositeSizeInBar;getCompositeBarItems(){return[...this.model.items]}setCompositeBarItems(i){this.model.setItems(i),this.updateCompositeSwitcher()}getPinnedComposites(){return this.model.pinnedItems}getVisibleComposites(){return this.model.visibleItems}create(i){const e=i.appendChild(ce(".composite-bar"));this.compositeSwitcherBar=this._register(new td(e,{actionViewItemProvider:cp((n,s)=>{if(n instanceof Sz)return this.compositeOverflowActionViewItem;const o=this.model.findItem(n.id);return o&&this.instantiationService.createInstance(IC,{...s,draggable:!0,colors:this.options.colors,icon:this.options.icon,hoverOptions:this.options.activityHoverOptions,compact:this.options.compact},n,o.pinnedAction,o.toggleBadgeAction,r=>this.options.getContextMenuActionsForComposite(r),()=>this.getContextMenuActions(),this.options.dndHandler,this)},"actionViewItemProvider"),orientation:this.options.orientation,ariaLabel:g("activityBarAriaLabel","Active View Switcher"),ariaRole:"tablist",preventLoopNavigation:this.options.preventLoopNavigation,triggerKeys:{keyDown:!0}})),this._register(F(i,Q.CONTEXT_MENU,n=>this.showContextMenu(ve(i),n))),this._register(Gn.addTarget(i)),this._register(F(i,wt.Contextmenu,n=>this.showContextMenu(ve(i),n)));const t=new YVe(i,e,this.model,this.options.dndHandler,this.options.orientation);return this._register(Ol.INSTANCE.registerTarget(i,t)),e}focus(i){this.compositeSwitcherBar?.focus(i)}recomputeSizes(){this.computeSizes(this.model.visibleItems),this.updateCompositeSwitcher()}layout(i){this.dimension=i,!(i.height===0||i.width===0)&&(this.compositeSizeInBar.size===0&&this.computeSizes(this.model.visibleItems),this.updateCompositeSwitcher())}addComposite({id:i,name:e,order:t,requestedIndex:n}){this.model.add(i,e,t,n)&&(this.computeSizes([this.model.findItem(i)]),this.updateCompositeSwitcher())}removeComposite(i){this.isPinned(i)&&this.unpin(i),this.model.remove(i)&&this.updateCompositeSwitcher()}hideComposite(i){this.model.hide(i)&&(this.resetActiveComposite(i),this.updateCompositeSwitcher())}activateComposite(i){const e=this.model.activeItem;this.model.activate(i)&&(this.visibleComposites.indexOf(i)===-1||this.model.activeItem&&!this.model.activeItem.pinned||e&&!e.pinned)&&this.updateCompositeSwitcher()}deactivateComposite(i){const e=this.model.activeItem;this.model.deactivate()&&e&&!e.pinned&&this.updateCompositeSwitcher()}async pin(i,e){this.model.setPinned(i,!0)&&(this.updateCompositeSwitcher(),e&&(await this.options.openComposite(i),this.activateComposite(i)))}unpin(i){this.model.setPinned(i,!1)&&(this.updateCompositeSwitcher(),this.resetActiveComposite(i))}areBadgesEnabled(i){return this.viewDescriptorService.getViewContainerBadgeEnablementState(i)}toggleBadgeEnablement(i){this.viewDescriptorService.setViewContainerBadgeEnablementState(i,!this.areBadgesEnabled(i)),this.updateCompositeSwitcher();const e=this.model.findItem(i);e&&(e.activityAction.activity=e.activityAction.activity)}resetActiveComposite(i){const e=this.options.getDefaultCompositeId();!this.model.activeItem||this.model.activeItem.id!==i||(this.deactivateComposite(i),e&&e!==i&&this.isPinned(e)?this.options.openComposite(e,!0):this.options.openComposite(this.visibleComposites.filter(t=>t!==i)[0]))}isPinned(i){return this.model.findItem(i)?.pinned}move(i,e,t){if(t!==void 0){const n=this.model.items.findIndex(o=>o.id===i);let s=this.model.items.findIndex(o=>o.id===e);n>=0&&s>=0&&(!t&&n>s&&s++,t&&n<s&&s--,s<this.model.items.length&&s>=0&&s!==n&&this.model.move(this.model.items[n].id,this.model.items[s].id)&&setTimeout(()=>this.updateCompositeSwitcher(),0))}else this.model.move(i,e)&&setTimeout(()=>this.updateCompositeSwitcher(),0)}getAction(i){return this.model.findItem(i)?.activityAction}computeSizes(i){const e=this.options.compositeSize;if(e)i.forEach(t=>this.compositeSizeInBar.set(t.id,e));else{const t=this.compositeSwitcherBar;if(t&&this.dimension&&this.dimension.height!==0&&this.dimension.width!==0){const n=t.viewItems.length;t.push(i.map(s=>s.activityAction)),i.map((s,o)=>this.compositeSizeInBar.set(s.id,this.options.orientation===Ns.VERTICAL?t.getHeight(n+o):t.getWidth(n+o))),i.forEach(()=>t.pull(t.viewItems.length-1))}}}updateCompositeSwitcher(){const i=this.compositeSwitcherBar;if(!i||!this.dimension)return;let e=this.model.visibleItems.filter(a=>a.pinned||this.model.activeItem&&this.model.activeItem.id===a.id).map(a=>a.id),t=e.length;const n=e.length;let s=0;const o=this.options.orientation===Ns.VERTICAL?this.dimension.height:this.dimension.width;for(let a=0;a<e.length;a++){const l=this.compositeSizeInBar.get(e[a]);if(s+l>o){t=a;break}s+=l}for(n>t&&(e=e.slice(0,t)),this.model.activeItem&&e.every(a=>!!this.model.activeItem&&a!==this.model.activeItem.id)&&(s+=this.compositeSizeInBar.get(this.model.activeItem.id),e.push(this.model.activeItem.id));s>o&&e.length;){const a=e.length>1?e.splice(e.length-2,1)[0]:e.pop();s-=this.compositeSizeInBar.get(a)}for(n>e.length&&(s+=this.options.overflowActionSize);s>o&&e.length;){const a=e.length>1&&e[e.length-1]===this.model.activeItem?.id?e.splice(e.length-2,1)[0]:e.pop();s-=this.compositeSizeInBar.get(a)}n===e.length&&this.compositeOverflowAction&&(i.pull(i.length()-1),this.compositeOverflowAction.dispose(),this.compositeOverflowAction=void 0,this.compositeOverflowActionViewItem?.dispose(),this.compositeOverflowActionViewItem=void 0);const r=[];this.visibleComposites.forEach((a,l)=>{e.includes(a)||r.push(l)}),r.reverse().forEach(a=>{i.pull(a),this.visibleComposites.splice(a,1)}),e.forEach((a,l)=>{const c=this.visibleComposites.indexOf(a);l!==c&&(c!==-1&&(i.pull(c),this.visibleComposites.splice(c,1)),i.push(this.model.findItem(a).activityAction,{label:!0,icon:this.options.icon,index:l}),this.visibleComposites.splice(l,0,a))}),n>e.length&&!this.compositeOverflowAction&&(this.compositeOverflowAction=this._register(this.instantiationService.createInstance(Sz,()=>{this.compositeOverflowActionViewItem?.showMenu()})),this.compositeOverflowActionViewItem=this._register(this.instantiationService.createInstance(a4,this.compositeOverflowAction,()=>this.getOverflowingComposites(),()=>this.model.activeItem?this.model.activeItem.id:void 0,a=>this.model.findItem(a)?.activity[0]?.badge,this.options.getOnCompositeClickAction,this.options.colors,this.options.activityHoverOptions)),i.push(this.compositeOverflowAction,{label:!1,icon:!0})),this._onDidChange.fire()}getOverflowingComposites(){let i=this.model.visibleItems.filter(e=>e.pinned).map(e=>e.id);return this.model.activeItem&&!this.model.activeItem.pinned&&i.push(this.model.activeItem.id),i=i.filter(e=>!this.visibleComposites.includes(e)),this.model.visibleItems.filter(e=>i.includes(e.id)).map(e=>({id:e.id,name:this.getAction(e.id)?.label||e.name}))}showContextMenu(i,e){Fe.stop(e,!0);const t=new $n(i,e);this.contextMenuService.showContextMenu({getAnchor:cp(()=>t,"getAnchor"),getActions:cp(()=>this.getContextMenuActions(e),"getActions")})}getContextMenuActions(i){const e=this.model.visibleItems.map(({id:t,name:n,activityAction:s})=>Ei({id:t,label:this.getAction(t).label||n||t,checked:this.isPinned(t),enabled:s.enabled,run:cp(()=>{this.isPinned(t)?this.unpin(t):this.pin(t,!0)},"run")}));return this.options.fillExtraContextMenuActions(e,i),e}};c4=jVe([lM(2,He),lM(3,Hi),lM(4,Ro)],c4);class ZVe{static{cp(this,"CompositeBarModel")}_items=[];get items(){return this._items}options;activeItem;constructor(e,t){this.options=t,this.setItems(e)}setItems(e){this._items=[],this._items=e.map(t=>this.createCompositeBarItem(t.id,t.name,t.order,t.pinned,t.visible))}get visibleItems(){return this.items.filter(e=>e.visible)}get pinnedItems(){return this.items.filter(e=>e.visible&&e.pinned)}createCompositeBarItem(e,t,n,s,o){const r=this.options;return{id:e,name:t,pinned:s,order:n,visible:o,activity:[],get activityAction(){return r.getActivityAction(e)},get pinnedAction(){return r.getCompositePinnedAction(e)},get toggleBadgeAction(){return r.getCompositeBadgeAction(e)}}}add(e,t,n,s){const o=this.findItem(e);if(o){let r=!1;return o.name=t,Ls(n)||(r=o.order!==n,o.order=n),o.visible||(o.visible=!0,r=!0),r}else{const r=this.createCompositeBarItem(e,t,n,!0,!0);if(Ls(s))if(Ls(n))this.items.push(r);else{let a=0;for(;a<this.items.length&&typeof this.items[a].order=="number"&&this.items[a].order<n;)a++;this.items.splice(a,0,r)}else{let a=0,l=s;for(;l>0&&a<this.items.length;)this.items[a++].visible&&l--;this.items.splice(a,0,r)}return!0}}remove(e){for(let t=0;t<this.items.length;t++)if(this.items[t].id===e)return this.items.splice(t,1),!0;return!1}hide(e){for(const t of this.items)if(t.id===e)return t.visible?(t.visible=!1,!0):!1;return!1}move(e,t){const n=this.findIndex(e),s=this.findIndex(t);if(n===-1||s===-1)return!1;const o=this.items.splice(n,1)[0];return this.items.splice(s,0,o),o.pinned=!0,!0}setPinned(e,t){for(const n of this.items)if(n.id===e)return n.pinned!==t?(n.pinned=t,!0):!1;return!1}activate(e){if(!this.activeItem||this.activeItem.id!==e){this.activeItem&&this.deactivate();for(const t of this.items)if(t.id===e)return this.activeItem=t,this.activeItem.activityAction.activate(),!0}return!1}deactivate(){return this.activeItem?(this.activeItem.activityAction.deactivate(),this.activeItem=void 0,!0):!1}findItem(e){return this.items.filter(t=>t.id===e)[0]}findIndex(e){for(let t=0;t<this.items.length;t++)if(this.items[t].id===e)return t;return-1}}var woe=Object.defineProperty,XVe=Object.getOwnPropertyDescriptor,zr=(i,e)=>woe(i,"name",{value:e,configurable:!0}),Coe=(i,e,t,n)=>{for(var s=n>1?void 0:n?XVe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&woe(e,t,s),s},Ac=(i,e)=>(t,n)=>e(t,n,i);let xk=class extends ${constructor(i,e,t,n,s,o,r,a,l,c,d){super(),this.options=i,this.part=e,this.paneCompositePart=t,this.instantiationService=n,this.storageService=s,this.extensionService=o,this.viewDescriptorService=r,this.viewService=a,this.contextKeyService=l,this.environmentService=c,this.layoutService=d,this.location=t.partId===Y.PANEL_PART?Te.Panel:t.partId===Y.AUXILIARYBAR_PART?Te.AuxiliaryBar:Te.Sidebar,this.dndHandler=new qVe(this.viewDescriptorService,this.location,this.options.orientation,async(u,f)=>await this.paneCompositePart.openPaneComposite(u,f)??null,(u,f,p)=>this.compositeBar.move(u,f,this.options.orientation===Ns.VERTICAL?p?.verticallyBefore:p?.horizontallyBefore),()=>this.compositeBar.getCompositeBarItems());const h=this.cachedViewContainers.map(u=>({id:u.id,name:u.name,visible:!this.shouldBeHidden(u.id,u),order:u.order,pinned:u.pinned}));this.compositeBar=this.createCompositeBar(h),this.onDidRegisterViewContainers(this.getViewContainers()),this.registerListeners()}static{zr(this,"PaneCompositeBar")}viewContainerDisposables=this._register(new ah);location;compositeBar;dndHandler;compositeActions=new Map;hasExtensionsRegistered=!1;createCompositeBar(i){return this._register(this.instantiationService.createInstance(c4,i,{icon:this.options.icon,compact:this.options.compact,orientation:this.options.orientation,activityHoverOptions:this.options.activityHoverOptions,preventLoopNavigation:this.options.preventLoopNavigation,openComposite:zr(async(e,t)=>await this.paneCompositePart.openPaneComposite(e,!t)??null,"openComposite"),getActivityAction:zr(e=>this.getCompositeActions(e).activityAction,"getActivityAction"),getCompositePinnedAction:zr(e=>this.getCompositeActions(e).pinnedAction,"getCompositePinnedAction"),getCompositeBadgeAction:zr(e=>this.getCompositeActions(e).badgeAction,"getCompositeBadgeAction"),getOnCompositeClickAction:zr(e=>this.getCompositeActions(e).activityAction,"getOnCompositeClickAction"),fillExtraContextMenuActions:zr((e,t)=>this.options.fillExtraContextMenuActions(e,t),"fillExtraContextMenuActions"),getContextMenuActionsForComposite:zr(e=>this.getContextMenuActionsForComposite(e),"getContextMenuActionsForComposite"),getDefaultCompositeId:zr(()=>this.viewDescriptorService.getDefaultViewContainer(this.location)?.id,"getDefaultCompositeId"),dndHandler:this.dndHandler,compositeSize:this.options.compositeSize,overflowActionSize:this.options.overflowActionSize,colors:zr(e=>this.options.colors(e),"colors")}))}getContextMenuActionsForComposite(i){const e=[],t=this.viewDescriptorService.getViewContainerById(i),n=this.viewDescriptorService.getDefaultViewContainerLocation(t);if(n!==this.viewDescriptorService.getViewContainerLocation(t))e.push(Ei({id:"resetLocationAction",label:g("resetLocation","Reset Location"),run:zr(()=>this.viewDescriptorService.moveViewContainerToLocation(t,n,void 0,"resetLocationAction"),"run")}));else{const s=this.viewDescriptorService.getViewContainerModel(t);if(s.allViewDescriptors.length===1){const o=s.allViewDescriptors[0],r=this.viewDescriptorService.getDefaultContainerById(o.id);r!==t&&e.push(Ei({id:"resetLocationAction",label:g("resetLocation","Reset Location"),run:zr(()=>this.viewDescriptorService.moveViewsToContainer([o],r,void 0,"resetLocationAction"),"run")}))}}return e}registerListeners(){this._register(this.viewDescriptorService.onDidChangeViewContainers(({added:i,removed:e})=>this.onDidChangeViewContainers(i,e))),this._register(this.viewDescriptorService.onDidChangeContainerLocation(({viewContainer:i,from:e,to:t})=>this.onDidChangeViewContainerLocation(i,e,t))),this._register(this.paneCompositePart.onDidPaneCompositeOpen(i=>this.onDidChangeViewContainerVisibility(i.getId(),!0))),this._register(this.paneCompositePart.onDidPaneCompositeClose(i=>this.onDidChangeViewContainerVisibility(i.getId(),!1))),this.extensionService.whenInstalledExtensionsRegistered().then(()=>{this._store.isDisposed||(this.onDidRegisterExtensions(),this._register(this.compositeBar.onDidChange(()=>this.saveCachedViewContainers())),this._register(this.storageService.onDidChangeValue(Be.PROFILE,this.options.pinnedViewContainersKey,this._store)(i=>this.onDidPinnedViewContainersStorageValueChange(i))))})}onDidChangeViewContainers(i,e){e.filter(({location:t})=>t===this.location).forEach(({container:t})=>this.onDidDeregisterViewContainer(t)),this.onDidRegisterViewContainers(i.filter(({location:t})=>t===this.location).map(({container:t})=>t))}onDidChangeViewContainerLocation(i,e,t){e===this.location&&this.onDidDeregisterViewContainer(i),t===this.location&&this.onDidRegisterViewContainers([i])}onDidChangeViewContainerVisibility(i,e){e?this.onDidViewContainerVisible(i):this.compositeBar.deactivateComposite(i)}onDidRegisterExtensions(){this.hasExtensionsRegistered=!0;for(const{id:i}of this.cachedViewContainers){const e=this.getViewContainer(i);e?this.showOrHideViewContainer(e):this.viewDescriptorService.isViewContainerRemovedPermanently(i)?this.removeComposite(i):this.hideComposite(i)}this.saveCachedViewContainers()}onDidViewContainerVisible(i){const e=this.getViewContainer(i);e&&(this.addComposite(e),this.compositeBar.activateComposite(e.id),this.shouldBeHidden(e)&&this.viewDescriptorService.getViewContainerModel(e).activeViewDescriptors.length===0&&this.hideComposite(e.id))}create(i){return this.compositeBar.create(i)}getCompositeActions(i){let e=this.compositeActions.get(i);if(!e){const t=this.getViewContainer(i);if(t){const n=this.viewDescriptorService.getViewContainerModel(t);e={activityAction:this._register(this.instantiationService.createInstance(oL,this.toCompositeBarActionItemFrom(n),this.part,this.paneCompositePart)),pinnedAction:this._register(new _oe(this.toCompositeBarActionItemFrom(n),this.compositeBar)),badgeAction:this._register(new boe(this.toCompositeBarActionItemFrom(n),this.compositeBar))}}else{const n=this.cachedViewContainers.filter(s=>s.id===i)[0];e={activityAction:this._register(this.instantiationService.createInstance(QVe,this.toCompositeBarActionItem(i,n?.name??i,n?.icon,void 0),this.part,this.paneCompositePart)),pinnedAction:this._register(new Ez(i,this.compositeBar)),badgeAction:this._register(new JVe(i,this.compositeBar))}}this.compositeActions.set(i,e)}return e}onDidRegisterViewContainers(i){for(const e of i){this.addComposite(e),this.cachedViewContainers.filter(({id:r})=>r===e.id)[0]||this.compositeBar.pin(e.id),this.paneCompositePart.getActivePaneComposite()?.getId()===e.id&&this.compositeBar.activateComposite(e.id);const s=this.viewDescriptorService.getViewContainerModel(e);this.updateCompositeBarActionItem(e,s),this.showOrHideViewContainer(e);const o=new te;o.add(s.onDidChangeContainerInfo(()=>this.updateCompositeBarActionItem(e,s))),o.add(s.onDidChangeActiveViewDescriptors(()=>this.showOrHideViewContainer(e))),this.viewContainerDisposables.set(e.id,o)}}onDidDeregisterViewContainer(i){this.viewContainerDisposables.deleteAndDispose(i.id),this.removeComposite(i.id)}updateCompositeBarActionItem(i,e){const t=this.toCompositeBarActionItemFrom(e),{activityAction:n,pinnedAction:s}=this.getCompositeActions(i.id);n.updateCompositeBarActionItem(t),s instanceof Ez&&s.setActivity(t),this.options.recomputeSizes&&this.compositeBar.recomputeSizes(),this.saveCachedViewContainers()}toCompositeBarActionItemFrom(i){return this.toCompositeBarActionItem(i.viewContainer.id,i.title,i.icon,i.keybindingId)}toCompositeBarActionItem(i,e,t,n){let s,o;if(this.options.icon)if(ne.isUri(t)){o=t;const r=Zg(t),a=new V5;a.update(r);const l=`activity-${i.replace(/\./g,"-")}-${a.digest()}`,c=`.monaco-workbench .${this.options.partContainerClass} .monaco-action-bar .action-label.${l}`;s=[l,"uri-icon"],tP(c,`
				mask: ${r} no-repeat 50% 50%;
				mask-size: ${this.options.iconSize}px;
				-webkit-mask: ${r} no-repeat 50% 50%;
				-webkit-mask-size: ${this.options.iconSize}px;
				mask-origin: padding;
				-webkit-mask-origin: padding;
			`)}else Ne.isThemeIcon(t)&&(s=Ne.asClassNameArray(t));return{id:i,name:e,classNames:s,iconUrl:o,keybindingId:n}}showOrHideViewContainer(i){this.shouldBeHidden(i)?this.hideComposite(i.id):this.addComposite(i)}shouldBeHidden(i,e){const t=hn(i)?this.getViewContainer(i):i,n=hn(i)?i:i.id;if(t)if(t.hideIfEmpty){if(this.viewService.isViewContainerActive(n))return!1}else return!1;if(!this.hasExtensionsRegistered&&!(this.part===Y.SIDEBAR_PART&&this.environmentService.remoteAuthority&&ao)){if(e=e||this.cachedViewContainers.find(({id:s})=>s===n),!t&&e?.isBuiltin&&e?.visible)return!1;if(e?.views?.length)return e.views.every(({when:s})=>!!s&&!this.contextKeyService.contextMatchesRules(Z.deserialize(s)))}return!0}addComposite(i){this.compositeBar.addComposite({id:i.id,name:typeof i.title=="string"?i.title:i.title.value,order:i.order,requestedIndex:i.requestedIndex})}hideComposite(i){this.compositeBar.hideComposite(i);const e=this.compositeActions.get(i);e&&(e.activityAction.dispose(),e.pinnedAction.dispose(),this.compositeActions.delete(i))}removeComposite(i){this.compositeBar.removeComposite(i);const e=this.compositeActions.get(i);e&&(e.activityAction.dispose(),e.pinnedAction.dispose(),this.compositeActions.delete(i))}getPinnedPaneCompositeIds(){const i=this.compositeBar.getPinnedComposites().map(e=>e.id);return this.getViewContainers().filter(e=>this.compositeBar.isPinned(e.id)).sort((e,t)=>i.indexOf(e.id)-i.indexOf(t.id)).map(e=>e.id)}getVisiblePaneCompositeIds(){return this.compositeBar.getVisibleComposites().filter(i=>this.paneCompositePart.getActivePaneComposite()?.getId()===i.id||this.compositeBar.isPinned(i.id)).map(i=>i.id)}getContextMenuActions(){return this.compositeBar.getContextMenuActions()}focus(i){this.compositeBar.focus(i)}layout(i,e){this.compositeBar.layout(new Lt(i,e))}getViewContainer(i){const e=this.viewDescriptorService.getViewContainerById(i);return e&&this.viewDescriptorService.getViewContainerLocation(e)===this.location?e:void 0}getViewContainers(){return this.viewDescriptorService.getViewContainersByLocation(this.location)}onDidPinnedViewContainersStorageValueChange(i){if(this.pinnedViewContainersValue!==this.getStoredPinnedViewContainersValue()){this._placeholderViewContainersValue=void 0,this._pinnedViewContainersValue=void 0,this._cachedViewContainers=void 0;const e=[],t=this.compositeBar.getCompositeBarItems();for(const n of this.cachedViewContainers)e.push({id:n.id,name:n.name,order:n.order,pinned:n.pinned,visible:n.visible&&!!this.getViewContainer(n.id)});for(const n of this.getViewContainers())if(!e.some(({id:s})=>s===n.id)){const s=t.findIndex(({id:o})=>o===n.id);if(s!==-1){const o=t[s];e.splice(s,0,{id:n.id,name:typeof n.title=="string"?n.title:n.title.value,order:o.order,pinned:o.pinned,visible:o.visible})}else e.push({id:n.id,name:typeof n.title=="string"?n.title:n.title.value,order:n.order,pinned:!0,visible:!this.shouldBeHidden(n)})}this.compositeBar.setCompositeBarItems(e)}}saveCachedViewContainers(){const i=[],e=this.compositeBar.getCompositeBarItems();for(const t of e){const n=this.getViewContainer(t.id);if(n){const s=this.viewDescriptorService.getViewContainerModel(n),o=[];for(const{when:r}of s.allViewDescriptors)o.push({when:r?r.serialize():void 0});i.push({id:t.id,name:s.title,icon:ne.isUri(s.icon)&&this.environmentService.remoteAuthority?void 0:s.icon,views:o,pinned:t.pinned,order:t.order,visible:t.visible,isBuiltin:!n.extensionId})}else i.push({id:t.id,name:t.name,pinned:t.pinned,order:t.order,visible:!1,isBuiltin:!1})}this.storeCachedViewContainersState(i)}_cachedViewContainers=void 0;get cachedViewContainers(){if(this._cachedViewContainers===void 0){this._cachedViewContainers=this.getPinnedViewContainers();for(const i of this.getPlaceholderViewContainers()){const e=this._cachedViewContainers.find(t=>t.id===i.id);e&&(e.visible=i.visible??e.visible,e.name=i.name,e.icon=i.themeIcon?i.themeIcon:i.iconUrl?ne.revive(i.iconUrl):void 0,ne.isUri(e.icon)&&this.environmentService.remoteAuthority&&(e.icon=void 0),e.views=i.views,e.isBuiltin=i.isBuiltin)}for(const i of this.getViewContainersWorkspaceState()){const e=this._cachedViewContainers.find(t=>t.id===i.id);e&&(e.visible=i.visible??e.visible)}}return this._cachedViewContainers}storeCachedViewContainersState(i){const e=this.getPinnedViewContainers();this.setPinnedViewContainers(i.map(({id:t,pinned:n,order:s})=>({id:t,pinned:n,visible:!!e.find(({id:o})=>o===t)?.visible,order:s}))),this.setPlaceholderViewContainers(i.map(({id:t,icon:n,name:s,views:o,isBuiltin:r})=>({id:t,iconUrl:ne.isUri(n)?n:void 0,themeIcon:Ne.isThemeIcon(n)?n:void 0,name:s,isBuiltin:r,views:o}))),this.setViewContainersWorkspaceState(i.map(({id:t,visible:n})=>({id:t,visible:n})))}getPinnedViewContainers(){return JSON.parse(this.pinnedViewContainersValue)}setPinnedViewContainers(i){this.pinnedViewContainersValue=JSON.stringify(i)}_pinnedViewContainersValue;get pinnedViewContainersValue(){return this._pinnedViewContainersValue||(this._pinnedViewContainersValue=this.getStoredPinnedViewContainersValue()),this._pinnedViewContainersValue}set pinnedViewContainersValue(i){this.pinnedViewContainersValue!==i&&(this._pinnedViewContainersValue=i,this.setStoredPinnedViewContainersValue(i))}getStoredPinnedViewContainersValue(){return this.storageService.get(this.options.pinnedViewContainersKey,Be.PROFILE,"[]")}setStoredPinnedViewContainersValue(i){this.storageService.store(this.options.pinnedViewContainersKey,i,Be.PROFILE,ai.USER)}getPlaceholderViewContainers(){return JSON.parse(this.placeholderViewContainersValue)}setPlaceholderViewContainers(i){this.placeholderViewContainersValue=JSON.stringify(i)}_placeholderViewContainersValue;get placeholderViewContainersValue(){return this._placeholderViewContainersValue||(this._placeholderViewContainersValue=this.getStoredPlaceholderViewContainersValue()),this._placeholderViewContainersValue}set placeholderViewContainersValue(i){this.placeholderViewContainersValue!==i&&(this._placeholderViewContainersValue=i,this.setStoredPlaceholderViewContainersValue(i))}getStoredPlaceholderViewContainersValue(){return this.storageService.get(this.options.placeholderViewContainersKey,Be.PROFILE,"[]")}setStoredPlaceholderViewContainersValue(i){this.storageService.store(this.options.placeholderViewContainersKey,i,Be.PROFILE,ai.MACHINE)}getViewContainersWorkspaceState(){return JSON.parse(this.viewContainersWorkspaceStateValue)}setViewContainersWorkspaceState(i){this.viewContainersWorkspaceStateValue=JSON.stringify(i)}_viewContainersWorkspaceStateValue;get viewContainersWorkspaceStateValue(){return this._viewContainersWorkspaceStateValue||(this._viewContainersWorkspaceStateValue=this.getStoredViewContainersWorkspaceStateValue()),this._viewContainersWorkspaceStateValue}set viewContainersWorkspaceStateValue(i){this.viewContainersWorkspaceStateValue!==i&&(this._viewContainersWorkspaceStateValue=i,this.setStoredViewContainersWorkspaceStateValue(i))}getStoredViewContainersWorkspaceStateValue(){return this.storageService.get(this.options.viewContainersWorkspaceStateKey,Be.WORKSPACE,"[]")}setStoredViewContainersWorkspaceStateValue(i){this.storageService.store(this.options.viewContainersWorkspaceStateKey,i,Be.WORKSPACE,ai.MACHINE)}};xk=Coe([Ac(3,He),Ac(4,Si),Ac(5,nd),Ac(6,Ro),Ac(7,vf),Ac(8,Ye),Ac(9,id),Ac(10,yt)],xk);let oL=class extends Cy{constructor(i,e,t,n,s,o,r){super(i),this.part=e,this.paneCompositePart=t,this.layoutService=n,this.telemetryService=s,this.configurationService=o,this.activityService=r,this.updateActivity(),this._register(this.activityService.onDidChangeActivity(a=>{!hn(a)&&a.id===this.compositeBarActionItem.id&&this.updateActivity()}))}static{zr(this,"ViewContainerActivityAction")}static preventDoubleClickDelay=300;lastRun=0;updateCompositeBarActionItem(i){this.compositeBarActionItem=i}updateActivity(){const i=this.activityService.getViewContainerActivities(this.compositeBarActionItem.id);this.activity=i[0]}async run(i){if(gg(i)&&i.button===2)return;const e=Date.now();if(e>this.lastRun&&e-this.lastRun<oL.preventDoubleClickDelay)return;this.lastRun=e;const t=i&&"preserveFocus"in i?!i.preserveFocus:!0;if(this.part===Y.ACTIVITYBAR_PART){const n=this.layoutService.isVisible(Y.SIDEBAR_PART),s=this.paneCompositePart.getActivePaneComposite(),o=this.configurationService.getValue("workbench.activityBar.iconClickBehavior");if(n&&s?.getId()===this.compositeBarActionItem.id){switch(o){case"focus":this.logAction("refocus"),this.paneCompositePart.openPaneComposite(this.compositeBarActionItem.id,t);break;case"toggle":default:this.logAction("hide"),this.layoutService.setPartHidden(!0,Y.SIDEBAR_PART);break}return}this.logAction("show")}return await this.paneCompositePart.openPaneComposite(this.compositeBarActionItem.id,t),this.activate()}logAction(i){this.telemetryService.publicLog2("activityBarAction",{viewletId:this.compositeBarActionItem.id,action:i})}};oL=Coe([Ac(3,yt),Ac(4,rs),Ac(5,Pe),Ac(6,yS)],oL);class QVe extends oL{static{zr(this,"PlaceHolderViewContainerActivityAction")}}class Ez extends _oe{static{zr(this,"PlaceHolderToggleCompositePinnedAction")}constructor(e,t){super({id:e,name:e,classNames:void 0},t)}setActivity(e){this.label=e.name}}class JVe extends boe{static{zr(this,"PlaceHolderToggleCompositeBadgeAction")}constructor(e,t){super({id:e,name:e,classNames:void 0},t)}setCompositeBarActionItem(e){this.label=e.name}}var yoe=Object.defineProperty,e4e=Object.getOwnPropertyDescriptor,fa=(i,e)=>yoe(i,"name",{value:e,configurable:!0}),t4e=(i,e,t,n)=>{for(var s=n>1?void 0:n?e4e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&yoe(e,t,s),s},pc=(i,e)=>(t,n)=>e(t,n,i),_r=(i=>(i[i.TOP=0]="TOP",i[i.TITLE=1]="TITLE",i[i.BOTTOM=2]="BOTTOM",i))(_r||{});let yy=class extends FVe{constructor(i,e,t,n,s,o,r,a,l,c,d,h,u,f,p,m,_,w,v,b){let C=Te.Sidebar,S=CC.Viewlets,D=N.SidebarTitle;i===Y.PANEL_PART?(C=Te.Panel,S=CC.Panels,D=N.PanelTitle):i===Y.AUXILIARYBAR_PART&&(C=Te.AuxiliaryBar,S=CC.Auxiliary,D=N.AuxiliaryBarTitle),super(l,c,d,h,u,f,p,m,Xt.as(S),t,_.getDefaultViewContainer(C)?.id||"",o,r,a,i,e),this.partId=i,this.activePaneContextKey=n,this.paneFocusContextKey=s,this.viewDescriptorService=_,this.contextKeyService=w,this.extensionService=v,this.menuService=b,this.location=C,this.globalActions=this._register(this.instantiationService.createInstance(my,D,void 0,void 0)),this.registerListeners()}static{fa(this,"AbstractPaneCompositePart")}static MIN_COMPOSITE_BAR_WIDTH=50;get snap(){return this.layoutService.isVisible(this.partId)||!!this.paneCompositeBar.value?.getVisiblePaneCompositeIds().length}get onDidPaneCompositeOpen(){return H.map(this.onDidCompositeOpen.event,i=>i.composite)}onDidPaneCompositeClose=this.onDidCompositeClose.event;location;titleContainer;headerFooterCompositeBarContainer;headerFooterCompositeBarDispoables=this._register(new te);paneCompositeBarContainer;paneCompositeBar=this._register(new Yi);compositeBarPosition=void 0;emptyPaneMessageElement;globalToolBar;globalActions;blockOpening=!1;contentDimension;registerListeners(){this._register(this.onDidPaneCompositeOpen(i=>this.onDidOpen(i))),this._register(this.onDidPaneCompositeClose(this.onDidClose,this)),this._register(this.globalActions.onDidChange(()=>this.updateGlobalToolbarActions())),this._register(this.registry.onDidDeregister(i=>{const e=this.viewDescriptorService.getViewContainersByLocation(this.location).filter(t=>this.viewDescriptorService.getViewContainerModel(t).activeViewDescriptors.length>0);if(e.length){if(this.getActiveComposite()?.getId()===i.id){const t=this.viewDescriptorService.getDefaultViewContainer(this.location)?.id,n=e.filter(s=>s.id===t)[0]||e[0];this.doOpenPaneComposite(n.id)}}else this.layoutService.setPartHidden(!0,this.partId);this.removeComposite(i.id)})),this._register(this.extensionService.onDidRegisterExtensions(()=>{this.layoutCompositeBar()}))}onDidOpen(i){this.activePaneContextKey.set(i.getId())}onDidClose(i){const e=i.getId();this.activePaneContextKey.get()===e&&this.activePaneContextKey.reset()}showComposite(i){super.showComposite(i),this.layoutCompositeBar(),this.layoutEmptyMessage()}hideActiveComposite(){const i=super.hideActiveComposite();return this.layoutCompositeBar(),this.layoutEmptyMessage(),i}create(i){this.element=i,this.element.classList.add("pane-composite-part"),super.create(i);const e=this.getContentArea();e&&this.createEmptyPaneMessage(e),this.updateCompositeBar();const t=this._register(al(i));this._register(t.onDidFocus(()=>this.paneFocusContextKey.set(!0))),this._register(t.onDidBlur(()=>this.paneFocusContextKey.set(!1)))}createEmptyPaneMessage(i){this.emptyPaneMessageElement=document.createElement("div"),this.emptyPaneMessageElement.classList.add("empty-pane-message-area");const e=document.createElement("div");e.classList.add("empty-pane-message"),e.innerText=g("pane.emptyMessage","Drag a view here to display."),this.emptyPaneMessageElement.appendChild(e),i.appendChild(this.emptyPaneMessageElement),this._register(Ol.INSTANCE.registerTarget(this.element,{onDragOver:fa(t=>{if(Fe.stop(t.eventData,!0),this.paneCompositeBar.value){const n=this.paneCompositeBar.value.dndHandler.onDragEnter(t.dragAndDropData,void 0,t.eventData);_y(t.eventData.dataTransfer,"move",n)}},"onDragOver"),onDragEnter:fa(t=>{if(Fe.stop(t.eventData,!0),this.paneCompositeBar.value){const n=this.paneCompositeBar.value.dndHandler.onDragEnter(t.dragAndDropData,void 0,t.eventData);this.emptyPaneMessageElement.style.backgroundColor=n&&this.theme.getColor(KN)?.toString()||""}},"onDragEnter"),onDragLeave:fa(t=>{Fe.stop(t.eventData,!0),this.emptyPaneMessageElement.style.backgroundColor=""},"onDragLeave"),onDragEnd:fa(t=>{Fe.stop(t.eventData,!0),this.emptyPaneMessageElement.style.backgroundColor=""},"onDragEnd"),onDrop:fa(t=>{if(Fe.stop(t.eventData,!0),this.emptyPaneMessageElement.style.backgroundColor="",this.paneCompositeBar.value)this.paneCompositeBar.value.dndHandler.drop(t.dragAndDropData,void 0,t.eventData);else{const n=t.dragAndDropData.getData();if(n.type==="composite"){const s=this.viewDescriptorService.getViewContainerById(n.id);this.viewDescriptorService.moveViewContainerToLocation(s,this.location,void 0,"dnd"),this.openPaneComposite(s.id,!0)}else if(n.type==="view"){const s=this.viewDescriptorService.getViewDescriptorById(n.id);if(s&&s.canMoveView){this.viewDescriptorService.moveViewToLocation(s,this.location,"dnd");const o=this.viewDescriptorService.getViewContainerByViewId(s.id);this.openPaneComposite(o.id,!0).then(r=>{r?.openView(s.id,!0)})}}}},"onDrop")}))}createTitleArea(i){const e=super.createTitleArea(i);this._register(F(e,Q.CONTEXT_MENU,n=>{this.onTitleAreaContextMenu(new $n(ve(e),n))})),this._register(Gn.addTarget(e)),this._register(F(e,wt.Contextmenu,n=>{this.onTitleAreaContextMenu(new $n(ve(e),n))}));const t=e.appendChild(ce(".global-actions"));return this.globalToolBar=this._register(this.instantiationService.createInstance(fu,t,{actionViewItemProvider:fa((n,s)=>this.actionViewItemProvider(n,s),"actionViewItemProvider"),orientation:Ns.HORIZONTAL,getKeyBinding:fa(n=>this.keybindingService.lookupKeybinding(n.id),"getKeyBinding"),anchorAlignmentProvider:fa(()=>this.getTitleAreaDropDownAnchorAlignment(),"anchorAlignmentProvider"),toggleMenuTitle:g("moreActions","More Actions..."),hoverDelegate:this.toolbarHoverDelegate,hiddenItemStrategy:Av.NoHide})),this.updateGlobalToolbarActions(),e}createTitleLabel(i){this.titleContainer=i;const e=super.createTitleLabel(i);this.titleLabelElement.draggable=!0;const t=fa(()=>({type:"composite",id:this.getActivePaneComposite().getId()}),"draggedItemProvider");return this._register(Ol.INSTANCE.registerDraggable(this.titleLabelElement,t,{})),e}updateCompositeBar(i=!1){const e=this.compositeBarPosition!==void 0,t=this.shouldShowCompositeBar(),n=this.compositeBarPosition,s=t?this.getCompositeBarPosition():void 0;if(!i&&n===s)return;if(e){const r=n===1?this.titleContainer:this.headerFooterCompositeBarContainer;if(!this.paneCompositeBarContainer||!this.paneCompositeBar.value||!r)throw new Error("Composite bar containers should exist when removing the previous composite bar");this.paneCompositeBarContainer.remove(),this.paneCompositeBarContainer=void 0,this.paneCompositeBar.value=void 0,r.classList.remove("has-composite-bar"),n===0?this.removeFooterHeaderArea(!0):n===2&&this.removeFooterHeaderArea(!1)}let o;switch(s){case 0:o=this.createHeaderArea();break;case 1:o=this.titleContainer;break;case 2:o=this.createFooterArea();break}if(t){if(this.paneCompositeBarContainer||this.paneCompositeBar.value||!o)throw new Error("Invalid composite bar state when creating the new composite bar");o.classList.add("has-composite-bar"),this.paneCompositeBarContainer=jC(o,ce(".composite-bar-container")),this.paneCompositeBar.value=this.createCompositeBar(),this.paneCompositeBar.value.create(this.paneCompositeBarContainer),s===0?this.setHeaderArea(o):s===2&&this.setFooterArea(o)}this.compositeBarPosition=s,i&&this.layoutCompositeBar()}createHeaderArea(){const i=super.createHeaderArea();return this.createHeaderFooterCompositeBarArea(i)}createFooterArea(){const i=super.createFooterArea();return this.createHeaderFooterCompositeBarArea(i)}createHeaderFooterCompositeBarArea(i){if(this.headerFooterCompositeBarContainer)throw new Error("Header or Footer composite bar already exists");return this.headerFooterCompositeBarContainer=i,this.headerFooterCompositeBarDispoables.add(F(i,Q.CONTEXT_MENU,e=>{this.onCompositeBarAreaContextMenu(new $n(ve(i),e))})),this.headerFooterCompositeBarDispoables.add(Gn.addTarget(i)),this.headerFooterCompositeBarDispoables.add(F(i,wt.Contextmenu,e=>{this.onCompositeBarAreaContextMenu(new $n(ve(i),e))})),i}removeFooterHeaderArea(i){this.headerFooterCompositeBarContainer=void 0,this.headerFooterCompositeBarDispoables.clear(),i?this.removeHeaderArea():this.removeFooterArea()}createCompositeBar(){return this.instantiationService.createInstance(xk,this.getCompositeBarOptions(),this.partId,this)}onTitleAreaUpdate(i){super.onTitleAreaUpdate(i),this.layoutCompositeBar()}async openPaneComposite(i,e){if(typeof i=="string"&&this.getPaneComposite(i))return this.doOpenPaneComposite(i,e);if(await this.extensionService.whenInstalledExtensionsRegistered(),typeof i=="string"&&this.getPaneComposite(i))return this.doOpenPaneComposite(i,e)}doOpenPaneComposite(i,e){if(!this.blockOpening){if(!this.layoutService.isVisible(this.partId))try{this.blockOpening=!0,this.layoutService.setPartHidden(!1,this.partId)}finally{this.blockOpening=!1}return this.openComposite(i,e)}}getPaneComposite(i){return this.registry.getPaneComposite(i)}getPaneComposites(){return this.registry.getPaneComposites().sort((i,e)=>typeof i.order!="number"?1:typeof e.order!="number"?-1:i.order-e.order)}getPinnedPaneCompositeIds(){return this.paneCompositeBar.value?.getPinnedPaneCompositeIds()??[]}getVisiblePaneCompositeIds(){return this.paneCompositeBar.value?.getVisiblePaneCompositeIds()??[]}getActivePaneComposite(){return this.getActiveComposite()}getLastActivePaneCompositeId(){return this.getLastActiveCompositeId()}hideActivePaneComposite(){this.layoutService.isVisible(this.partId)&&this.layoutService.setPartHidden(!0,this.partId),this.hideActiveComposite()}focusCompositeBar(){this.paneCompositeBar.value?.focus()}layout(i,e,t,n){this.layoutService.isVisible(this.partId)&&(this.contentDimension=new Lt(i,e),super.layout(this.contentDimension.width,this.contentDimension.height,t,n),this.layoutCompositeBar(),this.layoutEmptyMessage())}layoutCompositeBar(){if(this.contentDimension&&this.dimension&&this.paneCompositeBar.value){const i=this.compositeBarPosition===1?16:8,e=this.partId===Y.PANEL_PART?0:1;let t=this.contentDimension.width-i-e;t=Math.max(yy.MIN_COMPOSITE_BAR_WIDTH,t-this.getToolbarWidth()),this.paneCompositeBar.value.layout(t,this.dimension.height)}}layoutEmptyMessage(){const i=!this.getActiveComposite();this.emptyPaneMessageElement?.classList.toggle("visible",i),i&&this.titleLabel?.updateTitle("","")}updateGlobalToolbarActions(){const i=this.globalActions.getPrimaryActions(),e=this.globalActions.getSecondaryActions();this.globalToolBar?.setActions(sc(i),sc(e))}getToolbarWidth(){if(!this.toolBar||this.compositeBarPosition!==1||!this.getActivePaneComposite())return 0;const e=this.toolBar.getItemsWidth()+this.toolBar.getItemsLength()*4,t=this.globalToolBar?this.globalToolBar.getItemsWidth()+this.globalToolBar.getItemsLength()*4:0;return e+t+5}onTitleAreaContextMenu(i){if(this.shouldShowCompositeBar()&&this.getCompositeBarPosition()===1)return this.onCompositeBarContextMenu(i);{const e=this.getActivePaneComposite(),t=e?e.getContextMenuActions():[];t.length&&this.contextMenuService.showContextMenu({getAnchor:fa(()=>i,"getAnchor"),getActions:fa(()=>t,"getActions"),getActionViewItem:fa((n,s)=>this.actionViewItemProvider(n,s),"getActionViewItem"),actionRunner:e.getActionRunner(),skipTelemetry:!0})}}onCompositeBarAreaContextMenu(i){return this.onCompositeBarContextMenu(i)}onCompositeBarContextMenu(i){if(this.paneCompositeBar.value){const e=[...this.paneCompositeBar.value.getContextMenuActions()];e.length&&this.contextMenuService.showContextMenu({getAnchor:fa(()=>i,"getAnchor"),getActions:fa(()=>e,"getActions"),skipTelemetry:!0})}}getViewsSubmenuAction(){const i=this.getActivePaneComposite()?.getViewPaneContainer();if(i){const e=new te,t=[],n=e.add(this.contextKeyService.createScoped(this.element));n.createKey("viewContainer",i.viewContainer.id);const s=this.menuService.getMenuActions(X7,n,{shouldForwardArgs:!0,renderShortTitle:!0});return Dv(s,{primary:t,secondary:[]},()=>!0),e.dispose(),t.length>1&&t.some(o=>o.enabled)?new ll("views",g("views","Views"),t):void 0}}};yy=t4e([pc(8,fs),pc(9,Si),pc(10,Hi),pc(11,yt),pc(12,ni),pc(13,Po),pc(14,He),pc(15,$t),pc(16,Ro),pc(17,Ye),pc(18,nd),pc(19,No)],yy);var Wf=(i=>(i.Uninitialized="uninitialized",i.Idle="idle",i.Disabled="disabled",i.CheckingForUpdates="checking for updates",i.AvailableForDownload="available for download",i.Downloading="downloading",i.Downloaded="downloaded",i.Updating="updating",i.Ready="ready",i))(Wf||{});const i4e=De("updateService");var n4e=Object.defineProperty,Lz=(i,e)=>n4e(i,"name",{value:e,configurable:!0});const qv=ce;class Os extends ${constructor(e,t,n){super(),this.container=e,this.options=t,this.menuStyle=n,this.container.setAttribute("role","menubar"),this.isCompact&&this.container.classList.add("compact"),this.menus=[],this.mnemonics=new Map,this._focusState=1,this._onVisibilityChange=this._register(new x),this._onFocusStateChange=this._register(new x),this.createOverflowMenu(),this.menuUpdater=this._register(new xn(()=>this.update(),200)),this.actionRunner=this.options.actionRunner??this._register(new nc),this._register(this.actionRunner.onWillRun(()=>{this.setUnfocusedState()})),this._register(fg.getInstance().event(this.onModifierKeyToggled,this)),this._register(F(this.container,Q.KEY_DOWN,o=>{const r=new Pt(o);let a=!0;const l=o.key?o.key.toLocaleLowerCase():"",c=Ue&&!this.isCompact;if(r.equals(E.LeftArrow)||c&&r.equals(E.Tab|M.Shift))this.focusPrevious();else if(r.equals(E.RightArrow)||c&&r.equals(E.Tab))this.focusNext();else if(r.equals(E.Escape)&&this.isFocused&&!this.isOpen)this.setUnfocusedState();else if(!this.isOpen&&!r.ctrlKey&&this.options.enableMnemonics&&this.mnemonicsInUse&&this.mnemonics.has(l)){const d=this.mnemonics.get(l);this.onMenuTriggered(d,!1)}else a=!1;!this.isCompact&&(r.equals(E.Tab|M.Shift)||r.equals(E.Tab))&&r.preventDefault(),a&&(r.preventDefault(),r.stopPropagation())}));const s=ve(this.container);this._register(F(s,Q.MOUSE_DOWN,()=>{this.isFocused&&this.setUnfocusedState()})),this._register(F(this.container,Q.FOCUS_IN,o=>{const r=o;r.relatedTarget&&(this.container.contains(r.relatedTarget)||(this.focusToReturn=r.relatedTarget))})),this._register(F(this.container,Q.FOCUS_OUT,o=>{const r=o;r.relatedTarget?r.relatedTarget&&!this.container.contains(r.relatedTarget)&&(this.focusToReturn=void 0,this.setUnfocusedState()):this.setUnfocusedState()})),this._register(F(s,Q.KEY_DOWN,o=>{if(!this.options.enableMnemonics||!o.altKey||o.ctrlKey||o.defaultPrevented)return;const r=o.key.toLocaleLowerCase();if(!this.mnemonics.has(r))return;this.mnemonicsInUse=!0,this.updateMnemonicVisibility(!0);const a=this.mnemonics.get(r);this.onMenuTriggered(a,!1)})),this.setUnfocusedState()}static{Lz(this,"MenuBar")}static OVERFLOW_INDEX=-1;menus;overflowMenu;focusedMenu;focusToReturn;menuUpdater;_mnemonicsInUse=!1;openedViaKeyboard=!1;awaitingAltRelease=!1;ignoreNextMouseUp=!1;mnemonics;updatePending=!1;_focusState;actionRunner;_onVisibilityChange;_onFocusStateChange;numMenusShown=0;overflowLayoutScheduled=void 0;menuDisposables=this._register(new te);push(e){dG(e).forEach(n=>{const s=this.menus.length,o=Ux(n.label),r=OE.exec(n.label);if(r){const a=r[1]?r[1]:r[3];this.registerMnemonic(this.menus.length,a)}if(this.isCompact)this.menus.push(n);else{const a=qv("div.menubar-menu-button",{role:"menuitem",tabindex:-1,"aria-label":o,"aria-haspopup":!0}),l=qv("div.menubar-menu-title",{role:"none","aria-hidden":!0});a.appendChild(l),this.container.insertBefore(a,this.overflowMenu.buttonElement),this.updateLabels(l,a,n.label),this._register(F(a,Q.KEY_UP,c=>{const d=new Pt(c);let h=!0;(d.equals(E.DownArrow)||d.equals(E.Enter))&&!this.isOpen?(this.focusedMenu={index:s},this.openedViaKeyboard=!0,this.focusState=3):h=!1,h&&(d.preventDefault(),d.stopPropagation())})),this._register(Gn.addTarget(a)),this._register(F(a,wt.Tap,c=>{this.isOpen&&this.focusedMenu&&this.focusedMenu.holder&&As(c.initialTarget,this.focusedMenu.holder)||(this.ignoreNextMouseUp=!1,this.onMenuTriggered(s,!0),c.preventDefault(),c.stopPropagation())})),this._register(F(a,Q.MOUSE_DOWN,c=>{if(!new $n(ve(a),c).leftButton){c.preventDefault();return}this.isOpen?this.ignoreNextMouseUp=!1:(this.ignoreNextMouseUp=!0,this.onMenuTriggered(s,!0)),c.preventDefault(),c.stopPropagation()})),this._register(F(a,Q.MOUSE_UP,c=>{c.defaultPrevented||(this.ignoreNextMouseUp?this.ignoreNextMouseUp=!1:this.isFocused&&this.onMenuTriggered(s,!0))})),this._register(F(a,Q.MOUSE_ENTER,()=>{this.isOpen&&!this.isCurrentMenu(s)?(a.focus(),this.cleanupCustomMenu(),this.showCustomMenu(s,!1)):this.isFocused&&!this.isOpen&&(this.focusedMenu={index:s},a.focus())})),this.menus.push({label:n.label,actions:n.actions,buttonElement:a,titleElement:l})}})}createOverflowMenu(){const e=this.isCompact?g("mAppMenu","Application Menu"):g("mMore","More"),t=qv("div.menubar-menu-button",{role:"menuitem",tabindex:this.isCompact?0:-1,"aria-label":e,"aria-haspopup":!0}),n=qv("div.menubar-menu-title.toolbar-toggle-more"+Ne.asCSSSelector(ee.menuBarMore),{role:"none","aria-hidden":!0});t.appendChild(n),this.container.appendChild(t),t.style.visibility="hidden",this._register(F(t,Q.KEY_UP,s=>{const o=new Pt(s);let r=!0;const a=[E.Enter];this.isCompact?(a.push(E.Space),this.options.compactMode?.horizontal===sp.Right?a.push(E.RightArrow):this.options.compactMode?.horizontal===sp.Left&&a.push(E.LeftArrow)):a.push(E.DownArrow),a.some(l=>o.equals(l))&&!this.isOpen?(this.focusedMenu={index:Os.OVERFLOW_INDEX},this.openedViaKeyboard=!0,this.focusState=3):r=!1,r&&(o.preventDefault(),o.stopPropagation())})),this._register(Gn.addTarget(t)),this._register(F(t,wt.Tap,s=>{this.isOpen&&this.focusedMenu&&this.focusedMenu.holder&&As(s.initialTarget,this.focusedMenu.holder)||(this.ignoreNextMouseUp=!1,this.onMenuTriggered(Os.OVERFLOW_INDEX,!0),s.preventDefault(),s.stopPropagation())})),this._register(F(t,Q.MOUSE_DOWN,s=>{if(!new $n(ve(t),s).leftButton){s.preventDefault();return}this.isOpen?this.ignoreNextMouseUp=!1:(this.ignoreNextMouseUp=!0,this.onMenuTriggered(Os.OVERFLOW_INDEX,!0)),s.preventDefault(),s.stopPropagation()})),this._register(F(t,Q.MOUSE_UP,s=>{s.defaultPrevented||(this.ignoreNextMouseUp?this.ignoreNextMouseUp=!1:this.isFocused&&this.onMenuTriggered(Os.OVERFLOW_INDEX,!0))})),this._register(F(t,Q.MOUSE_ENTER,()=>{this.isOpen&&!this.isCurrentMenu(Os.OVERFLOW_INDEX)?(this.overflowMenu.buttonElement.focus(),this.cleanupCustomMenu(),this.showCustomMenu(Os.OVERFLOW_INDEX,!1)):this.isFocused&&!this.isOpen&&(this.focusedMenu={index:Os.OVERFLOW_INDEX},t.focus())})),this.overflowMenu={buttonElement:t,titleElement:n,label:"More",actions:[]}}updateMenu(e){const t=this.menus.filter(n=>n.label===e.label);t&&t.length&&(t[0].actions=e.actions)}dispose(){super.dispose(),this.menus.forEach(e=>{e.titleElement?.remove(),e.buttonElement?.remove()}),this.overflowMenu.titleElement.remove(),this.overflowMenu.buttonElement.remove(),ii(this.overflowLayoutScheduled),this.overflowLayoutScheduled=void 0}blur(){this.setUnfocusedState()}getWidth(){if(!this.isCompact&&this.menus){const e=this.menus[0].buttonElement.getBoundingClientRect().left;return(this.hasOverflow?this.overflowMenu.buttonElement.getBoundingClientRect().right:this.menus[this.menus.length-1].buttonElement.getBoundingClientRect().right)-e}return 0}getHeight(){return this.container.clientHeight}toggleFocus(){!this.isFocused&&this.options.visibility!=="hidden"?(this.mnemonicsInUse=!0,this.focusedMenu={index:this.numMenusShown>0?0:Os.OVERFLOW_INDEX},this.focusState=2):this.isOpen||this.setUnfocusedState()}updateOverflowAction(){if(!this.menus||!this.menus.length)return;const e="overflow-menu-only";this.container.classList.toggle(e,!1);const t=this.container.offsetWidth;let n=0,s=this.isCompact;const o=this.numMenusShown;this.numMenusShown=0;const r=this.menus.filter(a=>a.buttonElement!==void 0&&a.titleElement!==void 0);for(const a of r){if(!s){const l=a.buttonElement.offsetWidth;n+l>t?s=!0:(n+=l,this.numMenusShown++,this.numMenusShown>o&&(a.buttonElement.style.visibility="visible"))}s&&(a.buttonElement.style.visibility="hidden")}if(this.numMenusShown-1<=r.length/4){for(const a of r)a.buttonElement.style.visibility="hidden";s=!0,this.numMenusShown=0,n=0}if(this.isCompact){this.overflowMenu.actions=[];for(let l=this.numMenusShown;l<this.menus.length;l++)this.overflowMenu.actions.push(new ll(`menubar.submenu.${this.menus[l].label}`,this.menus[l].label,this.menus[l].actions||[]));const a=this.options.getCompactMenuActions?.();a&&a.length&&(this.overflowMenu.actions.push(new zt),this.overflowMenu.actions.push(...a)),this.overflowMenu.buttonElement.style.visibility="visible"}else if(s){for(;n+this.overflowMenu.buttonElement.offsetWidth>t&&this.numMenusShown>0;){this.numMenusShown--;const a=r[this.numMenusShown].buttonElement.offsetWidth;r[this.numMenusShown].buttonElement.style.visibility="hidden",n-=a}this.overflowMenu.actions=[];for(let a=this.numMenusShown;a<r.length;a++)this.overflowMenu.actions.push(new ll(`menubar.submenu.${r[a].label}`,r[a].label,r[a].actions||[]));this.overflowMenu.buttonElement.nextElementSibling!==r[this.numMenusShown].buttonElement&&(this.overflowMenu.buttonElement.remove(),this.container.insertBefore(this.overflowMenu.buttonElement,r[this.numMenusShown].buttonElement)),this.overflowMenu.buttonElement.style.visibility="visible"}else this.overflowMenu.buttonElement.remove(),this.container.appendChild(this.overflowMenu.buttonElement),this.overflowMenu.buttonElement.style.visibility="hidden";this.container.classList.toggle(e,this.numMenusShown===0)}updateLabels(e,t,n){const s=Ux(n);if(this.options.enableMnemonics){const r=Y_(n);dC.lastIndex=0;let a=dC.exec(r);for(;a&&a[1];)a=dC.exec(r);const l=Lz(c=>c.replace(/&amp;&amp;/g,"&amp;"),"replaceDoubleEscapes");a?(e.innerText="",e.append(Wy(l(r.substr(0,a.index))," "),qv("mnemonic",{"aria-hidden":"true"},a[3]),Lb(l(r.substr(a.index+a[0].length))," "))):e.innerText=l(r).trim()}else e.innerText=s.replace(/&&/g,"&");const o=OE.exec(n);if(o){const r=o[1]?o[1]:o[3];this.options.enableMnemonics?t.setAttribute("aria-keyshortcuts","Alt+"+r.toLocaleLowerCase()):t.removeAttribute("aria-keyshortcuts")}}update(e){if(e&&(this.options=e),this.isFocused){this.updatePending=!0;return}this.menus.forEach(t=>{!t.buttonElement||!t.titleElement||this.updateLabels(t.titleElement,t.buttonElement,t.label)}),this.overflowLayoutScheduled||(this.overflowLayoutScheduled=xo(ve(this.container),()=>{this.updateOverflowAction(),this.overflowLayoutScheduled=void 0})),this.setUnfocusedState()}registerMnemonic(e,t){this.mnemonics.set(t.toLocaleLowerCase(),e)}hideMenubar(){this.container.style.display!=="none"&&(this.container.style.display="none",this._onVisibilityChange.fire(!1))}showMenubar(){this.container.style.display!=="flex"&&(this.container.style.display="flex",this._onVisibilityChange.fire(!0),this.updateOverflowAction())}get focusState(){return this._focusState}set focusState(e){if(this._focusState>=2&&e<2&&this.updatePending&&(this.menuUpdater.schedule(),this.updatePending=!1),e===this._focusState)return;const t=this.isVisible,n=this.isOpen,s=this.isFocused;switch(this._focusState=e,e){case 0:t&&this.hideMenubar(),n&&this.cleanupCustomMenu(),s&&(this.focusedMenu=void 0,this.focusToReturn&&(this.focusToReturn.focus(),this.focusToReturn=void 0));break;case 1:t||this.showMenubar(),n&&this.cleanupCustomMenu(),s&&(this.focusedMenu&&(this.focusedMenu.index===Os.OVERFLOW_INDEX?this.overflowMenu.buttonElement.blur():this.menus[this.focusedMenu.index].buttonElement?.blur()),this.focusedMenu=void 0,this.focusToReturn&&(this.focusToReturn.focus(),this.focusToReturn=void 0));break;case 2:t||this.showMenubar(),n&&this.cleanupCustomMenu(),this.focusedMenu&&(this.focusedMenu.index===Os.OVERFLOW_INDEX?this.overflowMenu.buttonElement.focus():this.menus[this.focusedMenu.index].buttonElement?.focus());break;case 3:t||this.showMenubar(),this.focusedMenu&&(this.cleanupCustomMenu(),this.showCustomMenu(this.focusedMenu.index,this.openedViaKeyboard));break}this._focusState=e,this._onFocusStateChange.fire(this.focusState>=2)}get isVisible(){return this.focusState>=1}get isFocused(){return this.focusState>=2}get isOpen(){return this.focusState>=3}get hasOverflow(){return this.isCompact||this.numMenusShown<this.menus.length}get isCompact(){return this.options.compactMode!==void 0}setUnfocusedState(){this.options.visibility==="toggle"||this.options.visibility==="hidden"?this.focusState=0:this.options.visibility==="classic"&&kb(_e)?this.focusState=0:this.focusState=1,this.ignoreNextMouseUp=!1,this.mnemonicsInUse=!1,this.updateMnemonicVisibility(!1)}focusPrevious(){if(!this.focusedMenu||this.numMenusShown===0)return;let e=(this.focusedMenu.index-1+this.numMenusShown)%this.numMenusShown;this.focusedMenu.index===Os.OVERFLOW_INDEX?e=this.numMenusShown-1:this.focusedMenu.index===0&&this.hasOverflow&&(e=Os.OVERFLOW_INDEX),e!==this.focusedMenu.index&&(this.isOpen?(this.cleanupCustomMenu(),this.showCustomMenu(e)):this.isFocused&&(this.focusedMenu.index=e,e===Os.OVERFLOW_INDEX?this.overflowMenu.buttonElement.focus():this.menus[e].buttonElement?.focus()))}focusNext(){if(!this.focusedMenu||this.numMenusShown===0)return;let e=(this.focusedMenu.index+1)%this.numMenusShown;this.focusedMenu.index===Os.OVERFLOW_INDEX?e=0:this.focusedMenu.index===this.numMenusShown-1&&(e=Os.OVERFLOW_INDEX),e!==this.focusedMenu.index&&(this.isOpen?(this.cleanupCustomMenu(),this.showCustomMenu(e)):this.isFocused&&(this.focusedMenu.index=e,e===Os.OVERFLOW_INDEX?this.overflowMenu.buttonElement.focus():this.menus[e].buttonElement?.focus()))}updateMnemonicVisibility(e){this.menus&&this.menus.forEach(t=>{if(t.titleElement&&t.titleElement.children.length){const n=t.titleElement.children.item(0);n&&(n.style.textDecoration=this.options.alwaysOnMnemonics||e?"underline":"")}})}get mnemonicsInUse(){return this._mnemonicsInUse}set mnemonicsInUse(e){this._mnemonicsInUse=e}get shouldAltKeyFocus(){return Ue?!1:!this.options.disableAltFocus||this.options.visibility==="toggle"}get onVisibilityChange(){return this._onVisibilityChange.event}get onFocusStateChange(){return this._onFocusStateChange.event}onMenuTriggered(e,t){this.isOpen?this.isCurrentMenu(e)?this.setUnfocusedState():(this.cleanupCustomMenu(),this.showCustomMenu(e,this.openedViaKeyboard)):(this.focusedMenu={index:e},this.openedViaKeyboard=!t,this.focusState=3)}onModifierKeyToggled(e){const t=!e.altKey&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey;this.options.visibility!=="hidden"&&(e.event&&this.shouldAltKeyFocus&&t_e.toEnum(e.event.code)===kh.AltLeft&&e.event.preventDefault(),this.isFocused&&e.lastKeyPressed==="alt"&&e.altKey&&(this.setUnfocusedState(),this.mnemonicsInUse=!1,this.awaitingAltRelease=!0),t&&e.lastKeyPressed==="alt"&&e.lastKeyReleased==="alt"&&(this.awaitingAltRelease||(!this.isFocused&&this.shouldAltKeyFocus?(this.mnemonicsInUse=!0,this.focusedMenu={index:this.numMenusShown>0?0:Os.OVERFLOW_INDEX},this.focusState=2):this.isOpen||this.setUnfocusedState())),!e.altKey&&e.lastKeyReleased==="alt"&&(this.awaitingAltRelease=!1),this.options.enableMnemonics&&this.menus&&!this.isOpen&&this.updateMnemonicVisibility(!this.awaitingAltRelease&&e.altKey||this.mnemonicsInUse))}isCurrentMenu(e){return this.focusedMenu?this.focusedMenu.index===e:!1}cleanupCustomMenu(){this.focusedMenu&&(this.focusedMenu.index===Os.OVERFLOW_INDEX?this.overflowMenu.buttonElement.focus():this.menus[this.focusedMenu.index].buttonElement?.focus(),this.focusedMenu.holder&&(this.focusedMenu.holder.parentElement?.classList.remove("open"),this.focusedMenu.holder.remove()),this.focusedMenu.widget?.dispose(),this.focusedMenu={index:this.focusedMenu.index}),this.menuDisposables.clear()}showCustomMenu(e,t=!0){const n=e>=this.numMenusShown?Os.OVERFLOW_INDEX:e,s=n===Os.OVERFLOW_INDEX?this.overflowMenu:this.menus[n];if(!s.actions||!s.buttonElement||!s.titleElement)return;const o=qv("div.menubar-menu-items-holder",{title:""});s.buttonElement.classList.add("open");const r=s.titleElement.getBoundingClientRect(),a=U5(s.titleElement);if(this.options.compactMode?.horizontal===sp.Right)o.style.left=`${r.left+this.container.clientWidth}px`;else if(this.options.compactMode?.horizontal===sp.Left){const d=ve(this.container).innerWidth;o.style.right=`${d-r.left}px`,o.style.left="auto"}else o.style.left=`${r.left*a}px`;this.options.compactMode?.vertical===hC.Above?o.style.top=`${r.top-this.menus.length*30+this.container.clientHeight}px`:this.options.compactMode?.vertical===hC.Below?o.style.top=`${r.top}px`:o.style.top=`${r.bottom*a}px`,s.buttonElement.appendChild(o);const l={getKeyBinding:this.options.getKeybinding,actionRunner:this.actionRunner,enableMnemonics:this.options.alwaysOnMnemonics||this.mnemonicsInUse&&this.options.enableMnemonics,ariaLabel:s.buttonElement.getAttribute("aria-label")??void 0,expandDirection:this.isCompact?this.options.compactMode:{horizontal:sp.Right,vertical:hC.Below},useEventAsContext:!0},c=this.menuDisposables.add(new uC(o,s.actions,l,this.menuStyle));this.menuDisposables.add(c.onDidCancel(()=>{this.focusState=2})),n!==e?c.trigger(e-this.numMenusShown):c.focus(t),this.focusedMenu={index:n,holder:o,widget:c}}}var s4e=Object.defineProperty,DR=(i,e)=>s4e(i,"name",{value:e,configurable:!0});const o4e=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function TC(i,e,t,n,s){if(Ne.isThemeIcon(s))return[`codicon-${s.id}`,"predefined-file-icon"];if(ne.isUri(s))return[];const o=n===Do.ROOT_FOLDER?["rootfolder-icon"]:n===Do.FOLDER?["folder-icon"]:["file-icon"];if(t){let r;if(t.scheme===Ve.data)r=HC.parseMetaData(t).get(HC.META_DATA_LABEL);else{const a=t.path.match(o4e);a?(r=xw(a[2].toLowerCase()),a[1]&&o.push(`${xw(a[1].toLowerCase())}-name-dir-icon`)):r=xw(t.authority.toLowerCase())}if(n===Do.ROOT_FOLDER)o.push(`${r}-root-name-folder-icon`);else if(n===Do.FOLDER)o.push(`${r}-name-folder-icon`);else{if(r){if(o.push(`${r}-name-file-icon`),o.push("name-file-icon"),r.length<=255){const l=r.split(".");for(let c=1;c<l.length;c++)o.push(`${l.slice(c).join(".")}-ext-file-icon`)}o.push("ext-file-icon")}const a=Soe(i,e,t);a&&o.push(`${xw(a)}-lang-file-icon`)}}return o}DR(TC,"getIconClasses");function r4e(i){return["file-icon",`${xw(i)}-lang-file-icon`]}DR(r4e,"getIconClassesForLanguageId");function Soe(i,e,t){if(!t)return null;let n=null;if(t.scheme===Ve.data){const o=HC.parseMetaData(t).get(HC.META_DATA_MIME);o&&(n=e.getLanguageIdByMimeType(o))}else{const s=i.getModel(t);s&&(n=s.getLanguageId())}return n&&n!==rb?n:e.guessLanguageIdByFilepathOrFirstLine(t)}DR(Soe,"detectLanguageId");function xw(i){return i.replace(/[\s]/g,"/")}DR(xw,"cssEscape");var Eoe=Object.defineProperty,a4e=Object.getOwnPropertyDescriptor,Loe=(i,e)=>Eoe(i,"name",{value:e,configurable:!0}),l4e=(i,e,t,n)=>{for(var s=n>1?void 0:n?a4e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Eoe(e,t,s),s},Dz=(i,e)=>(t,n)=>e(t,n,i);const Doe="inQuickOpen";new ie(Doe,!1,g("inQuickOpen","Whether keyboard focus is inside the quick open control"));const Ioe=Z.has(Doe),c4e="inFilesPicker";Z.and(Ioe,Z.has(c4e));function x2(i,e){return t=>{const n=t.get(ni),s=t.get(ca),r={keybindings:n.lookupKeybindings(i)};s.navigate(!!e,r)}}Loe(x2,"getQuickNavigateHandler");let Iz=class extends ${constructor(i,e){super(),this.editorService=i,this.editorGroupsService=e}static{Loe(this,"PickerEditorState")}_editorViewState=void 0;openedTransientEditors=new Set;set(){if(this._editorViewState)return;const i=this.editorService.activeEditorPane;i&&(this._editorViewState={group:i.group,editor:i.input,state:$se(i.getControl())?.saveViewState()??void 0})}async openTransientEditor(i,e){i.options={...i.options,transient:!0};const t=await this.editorService.openEditor(i,e);return t?.input&&t.input!==this._editorViewState?.editor&&t.group.isTransient(t.input)&&this.openedTransientEditors.add(t.input),t}async restore(){if(this._editorViewState){for(const i of this.openedTransientEditors)if(!i.isDirty())for(const e of this.editorGroupsService.groups)e.isTransient(i)&&await e.closeEditor(i,{preserveFocus:!0});await this._editorViewState.group.openEditor(this._editorViewState.editor,{viewState:this._editorViewState.state,preserveFocus:!0}),this.reset()}}reset(){this._editorViewState=void 0,this.openedTransientEditors.clear()}dispose(){super.dispose(),this.reset()}};Iz=l4e([Dz(0,nt),Dz(1,Ge)],Iz);var d4e=Object.defineProperty,iu=(i,e)=>d4e(i,"name",{value:e,configurable:!0});const Toe="inRecentFilesPicker";class Aoe extends ge{static{iu(this,"BaseOpenRecentAction")}removeFromRecentlyOpened={iconClass:Ne.asClassName(ee.removeClose),tooltip:g("remove","Remove from Recently Opened")};dirtyRecentlyOpenedFolder={iconClass:"dirty-workspace "+Ne.asClassName(ee.closeDirty),tooltip:g("dirtyRecentlyOpenedFolder","Folder With Unsaved Files"),alwaysVisible:!0};dirtyRecentlyOpenedWorkspace={...this.dirtyRecentlyOpenedFolder,tooltip:g("dirtyRecentlyOpenedWorkspace","Workspace With Unsaved Files")};constructor(e){super(e)}async run(e){const t=e.get(gR),n=e.get(ca),s=e.get(po),o=e.get(bu),r=e.get(ni),a=e.get(Zc),l=e.get(Ra),c=e.get(hr),d=e.get(gh),h=await t.getRecentlyOpened(),u=await t.getDirtyWorkspaces();let f=!1;const p=new ro,m=new ro;for(const K of u)DV(K)?p.set(K.folderUri,!0):(m.set(K.workspace.configPath,K.workspace),f=!0);const _=new ro,w=new ro;for(const K of h.workspaces)gC(K)?_.set(K.folderUri,!0):(w.set(K.workspace.configPath,K.workspace),f=!0);const v=[];for(const K of h.workspaces){const X=gC(K)?p.has(K.folderUri):m.has(K.workspace.configPath);v.push(this.toQuickPick(a,l,o,K,X))}for(const K of u)DV(K)&&!_.has(K.folderUri)?v.push(this.toQuickPick(a,l,o,K,!0)):_ne(K)&&!w.has(K.workspace.configPath)&&v.push(this.toQuickPick(a,l,o,K,!0));const b=h.files.map(K=>this.toQuickPick(a,l,o,K,!1)),C=h.workspaces[0],S=C&&s.isCurrentWorkspace(_k(C)?C.workspace:C.folderUri);let D;const T={type:"separator",label:f?g("workspacesAndFolders","folders & workspaces"):g("folders","folders")},I={type:"separator",label:g("files","files")},R=[T,...v,I,...b],G=await n.pick(R,{contextKey:Toe,activeItem:[...v,...b][S?1:0],placeHolder:Ue?g("openRecentPlaceholderMac","Select to open (hold Cmd-key to force new window or Option-key for same window)"):g("openRecentPlaceholder","Select to open (hold Ctrl-key to force new window or Alt-key for same window)"),matchOnDescription:!0,onKeyMods:iu(K=>D=K,"onKeyMods"),quickNavigate:this.isQuickNavigate()?{keybindings:r.lookupKeybindings(this.desc.id)}:void 0,hideInput:this.isQuickNavigate(),onDidTriggerItemButton:iu(async K=>{if(K.button===this.removeFromRecentlyOpened)await t.removeRecentlyOpened([K.item.resource]),K.removeItem();else if(K.button===this.dirtyRecentlyOpenedFolder||K.button===this.dirtyRecentlyOpenedWorkspace){const X=K.button===this.dirtyRecentlyOpenedWorkspace,{confirmed:we}=await d.confirm({title:X?g("dirtyWorkspace","Workspace with Unsaved Files"):g("dirtyFolder","Folder with Unsaved Files"),message:X?g("dirtyWorkspaceConfirm","Do you want to open the workspace to review the unsaved files?"):g("dirtyFolderConfirm","Do you want to open the folder to review the unsaved files?"),detail:X?g("dirtyWorkspaceConfirmDetail","Workspaces with unsaved files cannot be removed until all unsaved files have been saved or reverted."):g("dirtyFolderConfirmDetail","Folders with unsaved files cannot be removed until all unsaved files have been saved or reverted.")});we&&(c.openWindow([K.item.openable],{remoteAuthority:K.item.remoteAuthority||null}),n.cancel())}},"onDidTriggerItemButton")});if(G)return c.openWindow([G.openable],{forceNewWindow:D?.ctrlCmd,forceReuseWindow:D?.alt,remoteAuthority:G.remoteAuthority||null})}toQuickPick(e,t,n,s,o){let r,a,l,c,d=!1;gC(s)?(c=s.folderUri,a=TC(e,t,c,Do.FOLDER),r={folderUri:c},l=s.label||n.getWorkspaceLabel(c,{verbose:XC.LONG})):_k(s)?(c=s.workspace.configPath,a=TC(e,t,c,Do.ROOT_FOLDER),r={workspaceUri:c},l=s.label||n.getWorkspaceLabel(s.workspace,{verbose:XC.LONG}),d=!0):(c=s.fileUri,a=TC(e,t,c,Do.FILE),r={fileUri:c},l=s.label||n.getUriLabel(c));const{name:h,parentPath:u}=IQ(l);return{iconClasses:a,label:h,ariaLabel:o?d?g("recentDirtyWorkspaceAriaLabel","{0}, workspace with unsaved changes",h):g("recentDirtyFolderAriaLabel","{0}, folder with unsaved changes",h):h,description:u,buttons:o?[d?this.dirtyRecentlyOpenedWorkspace:this.dirtyRecentlyOpenedFolder]:[this.removeFromRecentlyOpened],openable:r,resource:c,remoteAuthority:s.remoteAuthority}}}class IR extends Aoe{static{iu(this,"OpenRecentAction")}static ID="workbench.action.openRecent";constructor(){super({id:IR.ID,title:{...W("openRecent","Open Recent..."),mnemonicTitle:g({key:"miMore",comment:["&& denotes a mnemonic"]},"&&More...")},category:oe.File,f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|E.KeyR,mac:{primary:M.WinCtrl|E.KeyR}},menu:{id:N.MenubarRecentMenu,group:"y_more",order:1}})}isQuickNavigate(){return!1}}class h4e extends Aoe{static{iu(this,"QuickPickRecentAction")}constructor(){super({id:"workbench.action.quickOpenRecent",title:W("quickOpenRecent","Quick Open Recent..."),category:oe.File,f1:!1})}isQuickNavigate(){return!0}}class u4e extends ge{static{iu(this,"ToggleFullScreenAction")}constructor(){super({id:"workbench.action.toggleFullScreen",title:{...W("toggleFullScreen","Toggle Full Screen"),mnemonicTitle:g({key:"miToggleFullScreen",comment:["&& denotes a mnemonic"]},"&&Full Screen")},category:oe.View,f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:E.F11,mac:{primary:M.CtrlCmd|M.WinCtrl|E.KeyF}},precondition:xte.toNegated(),toggled:ef,menu:[{id:N.MenubarAppearanceMenu,group:"1_toggle_view",order:1}]})}run(e){return e.get(hr).toggleFullScreen(sn())}}class k2 extends ge{static{iu(this,"ReloadWindowAction")}static ID="workbench.action.reloadWindow";constructor(){super({id:k2.ID,title:W("reloadWindow","Reload Window"),category:oe.Developer,f1:!0,keybinding:{weight:Ce.WorkbenchContrib+50,when:QF,primary:M.CtrlCmd|E.KeyR}})}async run(e){return e.get(hr).reload()}}class g4e extends ge{static{iu(this,"ShowAboutDialogAction")}constructor(){super({id:"workbench.action.showAboutDialog",title:{...W("about","About"),mnemonicTitle:g({key:"miAbout",comment:["&& denotes a mnemonic"]},"&&About")},category:oe.Help,f1:!0,menu:{id:N.MenubarHelpMenu,group:"z_about",order:1,when:dy.toNegated()}})}run(e){return e.get(gh).about()}}class f4e extends ge{static{iu(this,"NewWindowAction")}constructor(){super({id:"workbench.action.newWindow",title:{...W("newWindow","New Window"),mnemonicTitle:g({key:"miNewWindow",comment:["&& denotes a mnemonic"]},"New &&Window")},f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:ui?Nt?di(M.CtrlCmd|E.KeyK,M.Shift|E.KeyN):M.CtrlCmd|M.Alt|M.Shift|E.KeyN:M.CtrlCmd|M.Shift|E.KeyN,secondary:ui?[M.CtrlCmd|M.Shift|E.KeyN]:void 0},menu:{id:N.MenubarFileMenu,group:"1_new",order:3}})}run(e){return e.get(hr).openWindow({remoteAuthority:null})}}class p4e extends ge{static{iu(this,"BlurAction")}constructor(){super({id:"workbench.action.blur",title:W("blur","Remove keyboard focus from focused element")})}run(){const e=Lr();xs(e)&&e.blur()}}Oe(f4e);Oe(u4e);Oe(h4e);Oe(IR);Oe(k2);Oe(g4e);Oe(p4e);const xoe=Z.and(Ioe,Z.has(Toe)),Tz="workbench.action.quickOpenNavigateNextInRecentFilesPicker";gt.registerCommandAndKeybindingRule({id:Tz,weight:Ce.WorkbenchContrib+50,handler:x2(Tz,!0),when:xoe,primary:M.CtrlCmd|E.KeyR,mac:{primary:M.WinCtrl|E.KeyR}});const Az="workbench.action.quickOpenNavigatePreviousInRecentFilesPicker";gt.registerCommandAndKeybindingRule({id:Az,weight:Ce.WorkbenchContrib+50,handler:x2(Az,!1),when:xoe,primary:M.CtrlCmd|M.Shift|E.KeyR,mac:{primary:M.WinCtrl|M.Shift|E.KeyR}});Mi.registerCommand("workbench.action.toggleConfirmBeforeClose",i=>{const e=i.get(Pe),t=e.inspect("window.confirmBeforeClose").userValue;return e.updateValue("window.confirmBeforeClose",t==="never"?"keyboardOnly":"never")});xt.appendMenuItem(N.MenubarFileMenu,{group:"z_ConfirmClose",command:{id:"workbench.action.toggleConfirmBeforeClose",title:g("miConfirmClose","Confirm Before Close"),toggled:Z.notEquals("config.window.confirmBeforeClose","never")},order:1,when:W3});xt.appendMenuItem(N.MenubarFileMenu,{title:g({key:"miOpenRecent",comment:["&& denotes a mnemonic"]},"Open &&Recent"),submenu:N.MenubarRecentMenu,group:"2_open",order:4});var koe=Object.defineProperty,m4e=Object.getOwnPropertyDescriptor,Dp=(i,e)=>koe(i,"name",{value:e,configurable:!0}),_4e=(i,e,t,n)=>{for(var s=n>1?void 0:n?m4e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&koe(e,t,s),s},pa=(i,e)=>(t,n)=>e(t,n,i);xt.appendMenuItem(N.MenubarMainMenu,{submenu:N.MenubarFileMenu,title:{value:"File",original:"File",mnemonicTitle:g({key:"mFile",comment:["&& denotes a mnemonic"]},"&&File")},order:1});xt.appendMenuItem(N.MenubarMainMenu,{submenu:N.MenubarEditMenu,title:{value:"Edit",original:"Edit",mnemonicTitle:g({key:"mEdit",comment:["&& denotes a mnemonic"]},"&&Edit")},order:2});xt.appendMenuItem(N.MenubarMainMenu,{submenu:N.MenubarSelectionMenu,title:{value:"Selection",original:"Selection",mnemonicTitle:g({key:"mSelection",comment:["&& denotes a mnemonic"]},"&&Selection")},order:3});xt.appendMenuItem(N.MenubarMainMenu,{submenu:N.MenubarViewMenu,title:{value:"View",original:"View",mnemonicTitle:g({key:"mView",comment:["&& denotes a mnemonic"]},"&&View")},order:4});xt.appendMenuItem(N.MenubarMainMenu,{submenu:N.MenubarGoMenu,title:{value:"Go",original:"Go",mnemonicTitle:g({key:"mGoto",comment:["&& denotes a mnemonic"]},"&&Go")},order:5});xt.appendMenuItem(N.MenubarMainMenu,{submenu:N.MenubarTerminalMenu,title:{value:"Terminal",original:"Terminal",mnemonicTitle:g({key:"mTerminal",comment:["&& denotes a mnemonic"]},"&&Terminal")},order:7});xt.appendMenuItem(N.MenubarMainMenu,{submenu:N.MenubarHelpMenu,title:{value:"Help",original:"Help",mnemonicTitle:g({key:"mHelp",comment:["&& denotes a mnemonic"]},"&&Help")},order:8});xt.appendMenuItem(N.MenubarMainMenu,{submenu:N.MenubarPreferencesMenu,title:{value:"Preferences",original:"Preferences",mnemonicTitle:g({key:"mPreferences",comment:["&& denotes a mnemonic"]},"Preferences")},when:dy,order:9});class kk extends ${constructor(e,t,n,s,o,r,a,l,c,d,h,u,f,p){super(),this.menuService=e,this.workspacesService=t,this.contextKeyService=n,this.keybindingService=s,this.configurationService=o,this.labelService=r,this.updateService=a,this.storageService=l,this.notificationService=c,this.preferencesService=d,this.environmentService=h,this.accessibilityService=u,this.hostService=f,this.commandService=p,this.mainMenu=this._register(this.menuService.createMenu(N.MenubarMainMenu,this.contextKeyService)),this.mainMenuDisposables=this._register(new te),this.setupMainMenu(),this.menuUpdater=this._register(new xn(()=>this.doUpdateMenubar(!1),200)),this.notifyUserOfCustomMenubarAccessibility()}static{Dp(this,"MenubarControl")}keys=["window.menuBarVisibility","window.enableMenuBarMnemonics","window.customMenuBarAltFocus","workbench.sideBar.location","window.nativeTabs"];mainMenu;menus={};topLevelTitles={};mainMenuDisposables;recentlyOpened={files:[],workspaces:[]};menuUpdater;static MAX_MENU_RECENT_ENTRIES=10;registerListeners(){this._register(this.hostService.onDidChangeFocus(e=>this.onDidChangeWindowFocus(e))),this._register(this.configurationService.onDidChangeConfiguration(e=>this.onConfigurationUpdated(e))),this._register(this.updateService.onStateChange(()=>this.onUpdateStateChange())),this._register(this.workspacesService.onDidChangeRecentlyOpened(()=>{this.onDidChangeRecentlyOpened()})),this._register(this.keybindingService.onDidUpdateKeybindings(()=>this.updateMenubar())),this._register(this.labelService.onDidChangeFormatters(()=>{this.onDidChangeRecentlyOpened()})),this._register(this.mainMenu.onDidChange(()=>{this.setupMainMenu(),this.doUpdateMenubar(!0)}))}setupMainMenu(){this.mainMenuDisposables.clear(),this.menus={},this.topLevelTitles={};const[,e]=this.mainMenu.getActions()[0];for(const t of e)t instanceof ql&&typeof t.item.title!="string"&&(this.menus[t.item.title.original]=this.mainMenuDisposables.add(this.menuService.createMenu(t.item.submenu,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.topLevelTitles[t.item.title.original]=t.item.title.mnemonicTitle??t.item.title.value)}updateMenubar(){this.menuUpdater.schedule()}calculateActionLabel(e){const t=e.label;switch(e.id){}return t}onUpdateStateChange(){this.updateMenubar()}onUpdateKeybindings(){this.updateMenubar()}getOpenRecentActions(){if(!this.recentlyOpened)return[];const{workspaces:e,files:t}=this.recentlyOpened,n=[];if(e.length>0){for(let s=0;s<kk.MAX_MENU_RECENT_ENTRIES&&s<e.length;s++)n.push(this.createOpenRecentMenuAction(e[s]));n.push(new zt)}if(t.length>0){for(let s=0;s<kk.MAX_MENU_RECENT_ENTRIES&&s<t.length;s++)n.push(this.createOpenRecentMenuAction(t[s]));n.push(new zt)}return n}onDidChangeWindowFocus(e){e&&this.onDidChangeRecentlyOpened()}onConfigurationUpdated(e){this.keys.some(t=>e.affectsConfiguration(t))&&this.updateMenubar(),e.affectsConfiguration("editor.accessibilitySupport")&&this.notifyUserOfCustomMenubarAccessibility(),e.affectsConfiguration("window.menuBarVisibility")&&this.onDidChangeRecentlyOpened()}get menubarHidden(){return Ue&&ao?!1:Jh(this.configurationService)==="hidden"}onDidChangeRecentlyOpened(){this.menubarHidden||this.workspacesService.getRecentlyOpened().then(e=>{this.recentlyOpened=e,this.updateMenubar()})}createOpenRecentMenuAction(e){let t,n,s,o;const r=e.remoteAuthority;gC(e)?(n=e.folderUri,t=e.label||this.labelService.getWorkspaceLabel(n,{verbose:XC.LONG}),s="openRecentFolder",o={folderUri:n}):_k(e)?(n=e.workspace.configPath,t=e.label||this.labelService.getWorkspaceLabel(e.workspace,{verbose:XC.LONG}),s="openRecentWorkspace",o={workspaceUri:n}):(n=e.fileUri,t=e.label||this.labelService.getUriLabel(n),s="openRecentFile",o={fileUri:n});const a=Ei({id:s,label:DQ(t),run:Dp(l=>{const c=l&&(!Ue&&(l.ctrlKey||l.shiftKey)||Ue&&(l.metaKey||l.altKey));return this.hostService.openWindow([o],{forceNewWindow:!!c,remoteAuthority:r||null})},"run")});return Object.assign(a,{uri:n,remoteAuthority:r})}notifyUserOfCustomMenubarAccessibility(){if(ui||Ue)return;const e=this.storageService.getBoolean("menubar/accessibleMenubarNotified",Be.APPLICATION,!1),t=!Rc(this.configurationService);if(e||t||!this.accessibilityService.isScreenReaderOptimized())return;const n=g("menubar.customTitlebarAccessibilityNotification","Accessibility support is enabled for you. For the most accessible experience, we recommend the custom title bar style.");this.notificationService.prompt(zs.Info,n,[{label:g("goToSetting","Open Settings"),run:Dp(()=>this.preferencesService.openUserSettings({query:Ho.TITLE_BAR_STYLE}),"run")}]),this.storageService.store("menubar/accessibleMenubarNotified",!0,Be.APPLICATION,ai.USER)}}let HI;function Noe(){return HI||(HI=new x,Oe(class extends ge{constructor(){super({id:"workbench.actions.menubar.focus",title:W("focusMenu","Focus Application Menu"),keybinding:{primary:M.Alt|E.F10,weight:Ce.WorkbenchContrib,when:W3},f1:!0})}async run(){HI?.fire()}})),HI}Dp(Noe,"enableFocusMenuBarAction");let Nk=class extends kk{constructor(i,e,t,n,s,o,r,a,l,c,d,h,u,f,p){super(i,e,t,n,s,o,r,a,l,c,d,h,f,p),this.telemetryService=u,this._onVisibilityChange=this._register(new x),this._onFocusStateChange=this._register(new x),this.actionRunner=this._register(new nc),this.actionRunner.onDidRun(m=>{this.telemetryService.publicLog2("workbenchActionExecuted",{id:m.action.id,from:"menu"})}),this.workspacesService.getRecentlyOpened().then(m=>{this.recentlyOpened=m}),this.registerListeners()}static{Dp(this,"CustomMenubarControl")}menubar;container;alwaysOnMnemonics=!1;focusInsideMenubar=!1;pendingFirstTimeUpdate=!1;visible=!0;actionRunner;webNavigationMenu=this._register(this.menuService.createMenu(N.MenubarHomeMenu,this.contextKeyService));_onVisibilityChange;_onFocusStateChange;doUpdateMenubar(i){this.focusInsideMenubar||this.setupCustomMenubar(i),i&&(this.pendingFirstTimeUpdate=!0)}getUpdateAction(){switch(this.updateService.state.type){case Wf.Idle:return new Mt("update.check",g({key:"checkForUpdates",comment:["&& denotes a mnemonic"]},"Check for &&Updates..."),void 0,!0,()=>this.updateService.checkForUpdates(!0));case Wf.CheckingForUpdates:return new Mt("update.checking",g("checkingForUpdates","Checking for Updates..."),void 0,!1);case Wf.AvailableForDownload:return new Mt("update.downloadNow",g({key:"download now",comment:["&& denotes a mnemonic"]},"D&&ownload Update"),void 0,!0,()=>this.updateService.downloadUpdate());case Wf.Downloading:return new Mt("update.downloading",g("DownloadingUpdate","Downloading Update..."),void 0,!1);case Wf.Downloaded:return Ue?null:new Mt("update.install",g({key:"installUpdate...",comment:["&& denotes a mnemonic"]},"Install &&Update..."),void 0,!0,()=>this.updateService.applyUpdate());case Wf.Updating:return new Mt("update.updating",g("installingUpdate","Installing Update..."),void 0,!1);case Wf.Ready:return new Mt("update.restart",g({key:"restartToUpdate",comment:["&& denotes a mnemonic"]},"Restart to &&Update"),void 0,!0,()=>this.updateService.quitAndInstall());default:return null}}get currentMenubarVisibility(){return Jh(this.configurationService)}get currentDisableMenuBarAltFocus(){const i=this.configurationService.getValue("window.customMenuBarAltFocus");let e=!1;return typeof i=="boolean"&&(e=!i),e}insertActionsBefore(i,e){switch(i.id){case IR.ID:e.push(...this.getOpenRecentActions());break;case"workbench.action.showAboutDialog":if(!Ue&&!ui){const t=this.getUpdateAction();t&&(t.label=Hu(t.label),e.push(t),e.push(new zt))}break}}get currentEnableMenuBarMnemonics(){let i=this.configurationService.getValue("window.enableMenuBarMnemonics");return typeof i!="boolean"&&(i=!0),i&&(!ui||kb(_e))}get currentCompactMenuMode(){if(this.currentMenubarVisibility!=="compact")return;const e=this.configurationService.getValue("workbench.sideBar.location")==="right"?sp.Left:sp.Right,n=this.configurationService.getValue("workbench.activityBar.location")===ti.BOTTOM?hC.Above:hC.Below;return{horizontal:e,vertical:n}}onDidVisibilityChange(i){this.visible=i,this.onDidChangeRecentlyOpened(),this._onVisibilityChange.fire(i)}toActionsArray(i){const e=[];return fy(i,{shouldForwardArgs:!0},e),e}reinstallDisposables=this._register(new te);setupCustomMenubar(i){if(!this.container)return;i?(this.menubar&&this.reinstallDisposables.clear(),this.menubar=this.reinstallDisposables.add(new Os(this.container,this.getMenuBarOptions(),Gte)),this.accessibilityService.alwaysUnderlineAccessKeys().then(t=>{this.alwaysOnMnemonics=t,this.menubar?.update(this.getMenuBarOptions())}),this.reinstallDisposables.add(this.menubar.onFocusStateChange(t=>{this._onFocusStateChange.fire(t),t||(this.pendingFirstTimeUpdate?(this.setupCustomMenubar(!0),this.pendingFirstTimeUpdate=!1):this.updateMenubar(),this.focusInsideMenubar=!1)})),this.reinstallDisposables.add(this.menubar.onVisibilityChange(t=>this.onDidVisibilityChange(t))),this.reinstallDisposables.add(F(this.container,Q.FOCUS_IN,()=>{this.focusInsideMenubar=!0})),this.reinstallDisposables.add(F(this.container,Q.FOCUS_OUT,()=>{this.focusInsideMenubar=!1})),this.menubar.isVisible&&this.onDidVisibilityChange(!0)):this.menubar?.update(this.getMenuBarOptions());const e=Dp((t,n,s)=>{n.splice(0);for(const o of t)if(this.insertActionsBefore(o,n),o instanceof zt)n.push(o);else if(o instanceof ql||o instanceof Yl){let r=typeof o.item.title=="string"?o.item.title:o.item.title.mnemonicTitle??o.item.title.value;if(o instanceof ql){const a=[];e(o.actions,a,s),a.length>0&&n.push(new ll(o.id,Hu(r),a))}else{sH(o.item.toggled)&&(r=o.item.toggled.mnemonicTitle??o.item.toggled.title??r);const a=new Mt(o.id,Hu(r),o.class,o.enabled,()=>this.commandService.executeCommand(o.id));a.tooltip=o.tooltip,a.checked=o.checked,n.push(a)}}if(s==="File"&&this.currentCompactMenuMode===void 0){const o=this.getWebNavigationActions();o.length&&n.push(...o)}},"updateActions");for(const t of Object.keys(this.topLevelTitles)){const n=this.menus[t];i&&n&&(this.reinstallDisposables.add(n.onDidChange(()=>{if(!this.focusInsideMenubar){const o=[];e(this.toActionsArray(n),o,t),this.menubar?.updateMenu({actions:o,label:Hu(this.topLevelTitles[t])})}})),n===this.menus.File&&this.reinstallDisposables.add(this.webNavigationMenu.onDidChange(()=>{if(!this.focusInsideMenubar){const o=[];e(this.toActionsArray(n),o,t),this.menubar?.updateMenu({actions:o,label:Hu(this.topLevelTitles[t])})}})));const s=[];n&&e(this.toActionsArray(n),s,t),this.menubar&&(i?this.menubar.push({actions:s,label:Hu(this.topLevelTitles[t])}):this.menubar.updateMenu({actions:s,label:Hu(this.topLevelTitles[t])}))}}getWebNavigationActions(){if(!ui)return[];const i=[];for(const e of this.webNavigationMenu.getActions()){const[,t]=e;for(const n of t)if(n instanceof Yl){const s=typeof n.item.title=="string"?n.item.title:n.item.title.mnemonicTitle??n.item.title.value;i.push(new Mt(n.id,Hu(s),n.class,n.enabled,async o=>{this.commandService.executeCommand(n.id,o)}))}i.push(new zt)}return i.length&&i.pop(),i}getMenuBarOptions(){return{enableMnemonics:this.currentEnableMenuBarMnemonics,disableAltFocus:this.currentDisableMenuBarAltFocus,visibility:this.currentMenubarVisibility,actionRunner:this.actionRunner,getKeybinding:Dp(i=>this.keybindingService.lookupKeybinding(i.id),"getKeybinding"),alwaysOnMnemonics:this.alwaysOnMnemonics,compactMode:this.currentCompactMenuMode,getCompactMenuActions:Dp(()=>ui?this.getWebNavigationActions():[],"getCompactMenuActions")}}onDidChangeWindowFocus(i){this.visible&&(super.onDidChangeWindowFocus(i),this.container&&(i?this.container.classList.remove("inactive"):(this.container.classList.add("inactive"),this.menubar?.blur())))}onUpdateStateChange(){this.visible&&super.onUpdateStateChange()}onDidChangeRecentlyOpened(){this.visible&&super.onDidChangeRecentlyOpened()}onUpdateKeybindings(){this.visible&&super.onUpdateKeybindings()}registerListeners(){super.registerListeners(),this._register(F(_e,Q.RESIZE,()=>{this.menubar&&!(ol&&Yy.pointerEvents)&&this.menubar.blur()})),ui&&(this._register(P5(i=>{i===_e.vscodeWindowId&&this.updateMenubar()})),this._register(this.webNavigationMenu.onDidChange(()=>this.updateMenubar())),this._register(Noe().event(()=>this.menubar?.toggleFocus())))}get onVisibilityChange(){return this._onVisibilityChange.event}get onFocusStateChange(){return this._onFocusStateChange.event}getMenubarItemsDimensions(){return this.menubar?new Lt(this.menubar.getWidth(),this.menubar.getHeight()):new Lt(0,0)}create(i){return this.container=i,this.container&&this.doUpdateMenubar(!0),this.container}layout(i){this.menubar?.update(this.getMenuBarOptions())}toggleFocus(){this.menubar?.toggleFocus()}};Nk=_4e([pa(0,No),pa(1,gR),pa(2,Ye),pa(3,ni),pa(4,Pe),pa(5,bu),pa(6,i4e),pa(7,Si),pa(8,fs),pa(9,RP),pa(10,id),pa(11,hf),pa(12,rs),pa(13,hr),pa(14,Xi)],Nk);const Sy="workbench.actions.manage",Ey="workbench.actions.accounts";var b4e=Object.defineProperty,Poe=(i,e)=>b4e(i,"name",{value:e,configurable:!0});const v4e=De("encryptionService");De("encryptionMainService");function w4e(i){return i==="kwallet"||i==="kwallet5"||i==="kwallet6"}Poe(w4e,"isKwallet");function C4e(i){return i==="gnome_any"||i==="gnome_libsecret"||i==="gnome_keyring"}Poe(C4e,"isGnome");var Roe=Object.defineProperty,y4e=Object.getOwnPropertyDescriptor,S4e=(i,e)=>Roe(i,"name",{value:e,configurable:!0}),E4e=(i,e,t,n)=>{for(var s=n>1?void 0:n?y4e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Roe(e,t,s),s},cM=(i,e)=>(t,n)=>e(t,n,i);const Ooe=De("secretStorageService");let xz=class extends ${constructor(i,e,t,n){super(),this._useInMemoryStorage=i,this._storageService=e,this._encryptionService=t,this._logService=n}static{S4e(this,"BaseSecretStorageService")}_storagePrefix="secret://";onDidChangeSecretEmitter=this._register(new x);onDidChangeSecret=this.onDidChangeSecretEmitter.event;_sequencer=new Kge;_type="unknown";_onDidChangeValueDisposable=this._register(new te);get type(){return this._type}_lazyStorageService=new cr(()=>this.initialize());get resolvedStorageService(){return this._lazyStorageService.value}get(i){return this._sequencer.queue(i,async()=>{const e=await this.resolvedStorageService,t=this.getKey(i);this._logService.trace("[secrets] getting secret for key:",t);const n=e.get(t,Be.APPLICATION);if(!n){this._logService.trace("[secrets] no secret found for key:",t);return}try{this._logService.trace("[secrets] decrypting gotten secret for key:",t);const s=this._type==="in-memory"?n:await this._encryptionService.decrypt(n);return this._logService.trace("[secrets] decrypted secret for key:",t),s}catch(s){this._logService.error(s),this.delete(i);return}})}set(i,e){return this._sequencer.queue(i,async()=>{const t=await this.resolvedStorageService;this._logService.trace("[secrets] encrypting secret for key:",i);let n;try{n=this._type==="in-memory"?e:await this._encryptionService.encrypt(e)}catch(o){throw this._logService.error(o),o}const s=this.getKey(i);this._logService.trace("[secrets] storing encrypted secret for key:",s),t.store(s,n,Be.APPLICATION,ai.MACHINE),this._logService.trace("[secrets] stored encrypted secret for key:",s)})}delete(i){return this._sequencer.queue(i,async()=>{const e=await this.resolvedStorageService,t=this.getKey(i);this._logService.trace("[secrets] deleting secret for key:",t),e.remove(t,Be.APPLICATION),this._logService.trace("[secrets] deleted secret for key:",t)})}async initialize(){let i;if(!this._useInMemoryStorage&&await this._encryptionService.isEncryptionAvailable())this._logService.trace("[SecretStorageService] Encryption is available, using persisted storage"),this._type="persisted",i=this._storageService;else{if(this._type==="in-memory")return this._storageService;this._logService.trace("[SecretStorageService] Encryption is not available, falling back to in-memory storage"),this._type="in-memory",i=this._register(new vIe)}return this._onDidChangeValueDisposable.clear(),this._onDidChangeValueDisposable.add(i.onDidChangeValue(Be.APPLICATION,void 0,this._onDidChangeValueDisposable)(e=>{this.onDidChangeValue(e.key)})),i}reinitialize(){this._lazyStorageService=new cr(()=>this.initialize())}onDidChangeValue(i){if(!i.startsWith(this._storagePrefix))return;const e=i.slice(this._storagePrefix.length);this._logService.trace(`[SecretStorageService] Notifying change in value for secret: ${e}`),this.onDidChangeSecretEmitter.fire(e)}getKey(i){return`${this._storagePrefix}${i}`}};xz=E4e([cM(1,Si),cM(2,v4e),cM(3,jo)],xz);const N2=De("IAuthenticationService");De("IAuthenticationExtensionsService");var Moe=Object.defineProperty,L4e=Object.getOwnPropertyDescriptor,D4e=(i,e)=>Moe(i,"name",{value:e,configurable:!0}),I4e=(i,e,t,n)=>{for(var s=n>1?void 0:n?L4e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Moe(e,t,s),s},kz=(i,e)=>(t,n)=>e(t,n,i);const Boe=De("IAuthenticationAccessService");let d4=class extends ${constructor(i,e){super(),this._storageService=i,this._productService=e}static{D4e(this,"AuthenticationAccessService")}_serviceBrand;_onDidChangeExtensionSessionAccess=this._register(new x);onDidChangeExtensionSessionAccess=this._onDidChangeExtensionSessionAccess.event;isAccessAllowed(i,e,t){const n=this._productService.trustedExtensionAuthAccess;if(Array.isArray(n)){if(n.includes(t))return!0}else if(n?.[i]?.includes(t))return!0;const o=this.readAllowedExtensions(i,e).find(r=>r.id===t);if(o)return o.allowed!==void 0?o.allowed:!0}readAllowedExtensions(i,e){let t=[];try{const n=this._storageService.get(`${i}-${e}`,Be.APPLICATION);n&&(t=JSON.parse(n))}catch{}return t}updateAllowedExtensions(i,e,t){const n=this.readAllowedExtensions(i,e);for(const s of t){const o=n.findIndex(r=>r.id===s.id);o===-1?n.push(s):n[o].allowed=s.allowed}this._storageService.store(`${i}-${e}`,JSON.stringify(n),Be.APPLICATION,ai.USER),this._onDidChangeExtensionSessionAccess.fire({providerId:i,accountName:e})}removeAllowedExtensions(i,e){this._storageService.remove(`${i}-${e}`,Be.APPLICATION),this._onDidChangeExtensionSessionAccess.fire({providerId:i,accountName:e})}};d4=I4e([kz(0,Si),kz(1,lS)],d4);Rr(Boe,d4,Pr.Delayed);var Foe=Object.defineProperty,T4e=Object.getOwnPropertyDescriptor,P2=(i,e)=>Foe(i,"name",{value:e,configurable:!0}),A4e=(i,e,t,n)=>{for(var s=n>1?void 0:n?T4e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Foe(e,t,s),s},dM=(i,e)=>(t,n)=>e(t,n,i);function Voe(i){return`onAuthenticationRequest:${i}`}P2(Voe,"getAuthenticationProviderActivationEvent");async function Woe(i,e){const t=await i.get(`${e.urlProtocol}.loginAccount`);if(t)try{const n=JSON.parse(t);if(n&&hn(n.id)&&hn(n.accessToken)&&hn(n.providerId))return n}catch(n){console.error(`Failed parsing current auth session value: ${n}`)}}P2(Woe,"getCurrentAuthenticationSessionInfo");let h4=class extends ${constructor(i,e,t){super(),this._extensionService=i,this._environmentService=t,this._register(e.onDidChangeExtensionSessionAccess(n=>{this._onDidChangeSessions.fire({providerId:n.providerId,label:n.accountName,event:{added:[],changed:[],removed:[]}})})),this._registerEnvContributedAuthenticationProviders()}static{P2(this,"AuthenticationService")}_onDidRegisterAuthenticationProvider=this._register(new x);onDidRegisterAuthenticationProvider=this._onDidRegisterAuthenticationProvider.event;_onDidUnregisterAuthenticationProvider=this._register(new x);onDidUnregisterAuthenticationProvider=this._onDidUnregisterAuthenticationProvider.event;_onDidChangeSessions=this._register(new x);onDidChangeSessions=this._onDidChangeSessions.event;_onDidChangeDeclaredProviders=this._register(new x);onDidChangeDeclaredProviders=this._onDidChangeDeclaredProviders.event;_authenticationProviders=new Map;_authenticationProviderDisposables=this._register(new ah);_declaredProviders=[];get declaredProviders(){return this._declaredProviders}_registerEnvContributedAuthenticationProviders(){if(this._environmentService.options?.authenticationProviders?.length)for(const i of this._environmentService.options.authenticationProviders)this.registerAuthenticationProvider(i.id,i)}registerDeclaredAuthenticationProvider(i){if(RA(i.id))throw new Error(g("authentication.missingId","An authentication contribution must specify an id."));if(RA(i.label))throw new Error(g("authentication.missingLabel","An authentication contribution must specify a label."));if(this.declaredProviders.some(e=>e.id===i.id))throw new Error(g("authentication.idConflict","This authentication id '{0}' has already been registered",i.id));this._declaredProviders.push(i),this._onDidChangeDeclaredProviders.fire()}unregisterDeclaredAuthenticationProvider(i){const e=this.declaredProviders.findIndex(t=>t.id===i);e>-1&&this.declaredProviders.splice(e,1),this._onDidChangeDeclaredProviders.fire()}isAuthenticationProviderRegistered(i){return this._authenticationProviders.has(i)}registerAuthenticationProvider(i,e){this._authenticationProviders.set(i,e);const t=new te;t.add(e.onDidChangeSessions(n=>this._onDidChangeSessions.fire({providerId:i,label:e.label,event:n}))),DL(e)&&t.add(e),this._authenticationProviderDisposables.set(i,t),this._onDidRegisterAuthenticationProvider.fire({id:i,label:e.label})}unregisterAuthenticationProvider(i){const e=this._authenticationProviders.get(i);e&&(this._authenticationProviders.delete(i),this._onDidUnregisterAuthenticationProvider.fire({id:i,label:e.label})),this._authenticationProviderDisposables.deleteAndDispose(i)}getProviderIds(){const i=[];return this._authenticationProviders.forEach(e=>{i.push(e.id)}),i}getProvider(i){if(this._authenticationProviders.has(i))return this._authenticationProviders.get(i);throw new Error(`No authentication provider '${i}' is currently registered.`)}async getAccounts(i){const e=await this.getSessions(i),t=new Array,n=new Set;for(const s of e)n.has(s.account.label)||(n.add(s.account.label),t.push(s.account));return t}async getSessions(i,e,t,n=!1){const s=this._authenticationProviders.get(i)||await this.tryActivateProvider(i,n);if(s)return await s.getSessions(e,{account:t});throw new Error(`No authentication provider '${i}' is currently registered.`)}async createSession(i,e,t){const n=this._authenticationProviders.get(i)||await this.tryActivateProvider(i,!!t?.activateImmediate);if(n)return await n.createSession(e,{account:t?.account});throw new Error(`No authentication provider '${i}' is currently registered.`)}async removeSession(i,e){const t=this._authenticationProviders.get(i);if(t)return t.removeSession(e);throw new Error(`No authentication provider '${i}' is currently registered.`)}async tryActivateProvider(i,e){await this._extensionService.activateByEvent(Voe(i),e?UV.Immediate:UV.Normal);let t=this._authenticationProviders.get(i);if(t)return t;const n=new te,s=new Promise((r,a)=>{n.add(H.once(this.onDidRegisterAuthenticationProvider)(l=>{if(l.id===i)if(t=this._authenticationProviders.get(i),t)r(t);else throw new Error(`No authentication provider '${i}' is currently registered.`)}))}),o=new Promise((r,a)=>{const l=setTimeout(()=>{a("Timed out waiting for authentication provider to register")},5e3);n.add(ye(()=>clearTimeout(l)))});return Promise.race([s,o]).finally(()=>n.dispose())}};h4=A4e([dM(0,nd),dM(1,Boe),dM(2,Tv)],h4);Rr(N2,h4,Pr.Delayed);var x4e=Object.defineProperty,R2=(i,e)=>x4e(i,"name",{value:e,configurable:!0});const O2=De("IUserDataProfileService");De("IUserDataProfileManagementService");function k4e(i){const e=i;return!!(e&&typeof e=="object"&&(oo(e.settings)||typeof e.settings=="string")&&(oo(e.globalState)||typeof e.globalState=="string")&&(oo(e.extensions)||typeof e.extensions=="string"))}R2(k4e,"isUserDataProfileTemplate");const Hoe="profile";function N4e(i,e){return ne.from({scheme:e.urlProtocol,authority:Hoe,path:i.startsWith("/")?i:`/${i}`})}R2(N4e,"toUserDataProfileUri");const P4e="profile-";function R4e(i){return i.authority===Hoe||new RegExp(`^${P4e}`).test(i.authority)}R2(R4e,"isProfileURL");De("IUserDataProfileImportExportService");Vt("defaultProfile-icon",ee.settings,g("defaultProfileIcon","Icon for Default Profile."));const O4e=W("profiles","Profiles");({...O4e});const M4e="code-profile";g("profile","Profile");new ie("profiles.enabled",!0);new ie("currentProfile","");new ie("isCurrentProfileTransient",!1);new ie("hasProfiles",!1);const hM=Vt("settings-view-bar-icon",ee.settingsGear,g("settingsViewBarIcon","Settings icon in the view bar."));var Uoe=Object.defineProperty,B4e=Object.getOwnPropertyDescriptor,Un=(i,e)=>Uoe(i,"name",{value:e,configurable:!0}),SS=(i,e,t,n)=>{for(var s=n>1?void 0:n?B4e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Uoe(e,t,s),s},tt=(i,e)=>(t,n)=>e(t,n,i);let ub=class extends ${constructor(i,e,t,n,s,o,r){super(),this.contextMenuActionsProvider=i,this.colors=e,this.activityHoverOptions=t,this.instantiationService=s,this.storageService=o,this.extensionService=r,this.element=document.createElement("div");const a=Un(()=>({anchorAlignment:n.getValue("workbench.sideBar.location")==="left"?cu.RIGHT:cu.LEFT,anchorAxisAlignment:fee.HORIZONTAL}),"contextMenuAlignmentOptions");this.globalActivityActionBar=this._register(new td(this.element,{actionViewItemProvider:Un((l,c)=>{if(l.id===Sy)return this.instantiationService.createInstance(Rk,this.contextMenuActionsProvider,{...c,colors:this.colors,hoverOptions:this.activityHoverOptions},a);if(l.id===Ey)return this.instantiationService.createInstance(Qp,this.contextMenuActionsProvider,{...c,colors:this.colors,hoverOptions:this.activityHoverOptions},a,d=>{d.unshift(Ei({id:"hideAccounts",label:g("hideAccounts","Hide Accounts"),run:Un(()=>aL(o,!1),"run")}),new zt)});throw new Error(`No view item for action '${l.id}'`)},"actionViewItemProvider"),orientation:Ns.VERTICAL,ariaLabel:g("manage","Manage"),preventLoopNavigation:!0})),this.accountsVisibilityPreference&&this.globalActivityActionBar.push(this.accountAction,{index:ub.ACCOUNTS_ACTION_INDEX}),this.globalActivityActionBar.push(this.globalActivityAction),this.registerListeners()}static{Un(this,"GlobalCompositeBar")}static ACCOUNTS_ACTION_INDEX=0;static ACCOUNTS_ICON=Vt("accounts-view-bar-icon",ee.account,g("accountsViewBarIcon","Accounts icon in the view bar."));element;globalActivityAction=this._register(new Mt(Sy));accountAction=this._register(new Mt(Ey));globalActivityActionBar;registerListeners(){this.extensionService.whenInstalledExtensionsRegistered().then(()=>{this._store.isDisposed||this._register(this.storageService.onDidChangeValue(Be.PROFILE,Qp.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,this._store)(()=>this.toggleAccountsActivity()))})}create(i){i.appendChild(this.element)}focus(){this.globalActivityActionBar.focus(!0)}size(){return this.globalActivityActionBar.viewItems.length}getContextMenuActions(){return[Ei({id:"toggleAccountsVisibility",label:g("accounts","Accounts"),checked:this.accountsVisibilityPreference,run:Un(()=>this.accountsVisibilityPreference=!this.accountsVisibilityPreference,"run")})]}toggleAccountsActivity(){this.globalActivityActionBar.length()===2&&this.accountsVisibilityPreference||(this.globalActivityActionBar.length()===2?this.globalActivityActionBar.pull(ub.ACCOUNTS_ACTION_INDEX):this.globalActivityActionBar.push(this.accountAction,{index:ub.ACCOUNTS_ACTION_INDEX}))}get accountsVisibilityPreference(){return rL(this.storageService)}set accountsVisibilityPreference(i){aL(this.storageService,i)}};ub=SS([tt(3,Pe),tt(4,He),tt(5,Si),tt(6,nd)],ub);let Pk=class extends Qb{constructor(i,e,t,n,s,o,r,a,l,c,d,h,u){super(e,{draggable:!1,icon:!0,hasPopup:!0,...t},()=>!0,o,r,d,h),this.menuId=i,this.contextMenuActionsProvider=n,this.contextMenuAlignmentOptions=s,this.menuService=a,this.contextMenuService=l,this.contextKeyService=c,this.activityService=u,this.updateItemActivity(),this._register(this.activityService.onDidChangeActivity(f=>{hn(f)&&f===this.compositeBarActionItem.id&&this.updateItemActivity()}))}static{Un(this,"AbstractGlobalActivityActionViewItem")}updateItemActivity(){const i=this.activityService.getActivity(this.compositeBarActionItem.id);let e=i[0];if(e){const{badge:t,priority:n}=e;t instanceof S0&&i.length>1&&(e={badge:this.getCumulativeNumberBadge(i,n??0)})}this.action.activity=e}getCumulativeNumberBadge(i,e){const t=i.filter(o=>o.badge instanceof S0&&(o.priority??0)===e),n=t.reduce((o,r)=>o+r.badge.number,0),s=Un(()=>t.reduce((o,r,a)=>(o=o+r.badge.getDescription(),a<t.length-1&&(o=`${o}
`),o),""),"descriptorFn");return new S0(n,s)}render(i){super.render(i),this._register(F(this.container,Q.MOUSE_DOWN,async e=>{Fe.stop(e,!0),e?.button!==2&&this.run()})),this._register(F(this.container,Q.CONTEXT_MENU,async e=>{e.stopPropagation();const t=new te,n=await this.resolveContextMenuActions(t),s=new $n(ve(this.container),e);this.contextMenuService.showContextMenu({getAnchor:Un(()=>s,"getAnchor"),getActions:Un(()=>n,"getActions"),onHide:Un(()=>t.dispose(),"onHide")})})),this._register(F(this.container,Q.KEY_UP,e=>{const t=new Pt(e);(t.equals(E.Enter)||t.equals(E.Space))&&(Fe.stop(e,!0),this.run())})),this._register(F(this.container,wt.Tap,e=>{Fe.stop(e,!0),this.run()}))}async resolveContextMenuActions(i){return this.contextMenuActionsProvider()}async run(){const i=new te,e=i.add(this.menuService.createMenu(this.menuId,this.contextKeyService)),t=await this.resolveMainMenuActions(e,i),{anchorAlignment:n,anchorAxisAlignment:s}=this.contextMenuAlignmentOptions()??{anchorAlignment:void 0,anchorAxisAlignment:void 0};this.contextMenuService.showContextMenu({getAnchor:Un(()=>this.label,"getAnchor"),anchorAlignment:n,anchorAxisAlignment:s,getActions:Un(()=>t,"getActions"),onHide:Un(()=>i.dispose(),"onHide"),menuActionOptions:{renderShortTitle:!0}})}async resolveMainMenuActions(i,e){const t=[];return Dv(i,{renderShortTitle:!0},{primary:[],secondary:t}),t}};Pk=SS([tt(5,$t),tt(6,Po),tt(7,No),tt(8,Hi),tt(9,Ye),tt(10,Pe),tt(11,ni),tt(12,yS)],Pk);let Qp=class extends Pk{constructor(i,e,t,n,s,o,r,a,l,c,d,h,u,f,p,m,_,w,v,b){const C=v.createInstance(Cy,{id:Ey,name:g("accounts","Accounts"),classNames:Ne.asClassNameArray(ub.ACCOUNTS_ICON)});super(N.AccountsContext,C,e,i,t,s,r,l,a,c,f,p,w),this.fillContextMenuActions=n,this.lifecycleService=o,this.authenticationService=d,this.productService=u,this.secretStorageService=m,this.logService=_,this.commandService=b,this._register(C),this.registerListeners(),this.initialize()}static{Un(this,"AccountsActivityActionViewItem")}static ACCOUNTS_VISIBILITY_PREFERENCE_KEY="workbench.activity.showAccounts";groupedAccounts=new Map;problematicProviders=new Set;initialized=!1;sessionFromEmbedder=new cr(()=>Woe(this.secretStorageService,this.productService));registerListeners(){this._register(this.authenticationService.onDidRegisterAuthenticationProvider(async i=>{await this.addAccountsFromProvider(i.id)})),this._register(this.authenticationService.onDidUnregisterAuthenticationProvider(i=>{this.groupedAccounts.delete(i.id),this.problematicProviders.delete(i.id)})),this._register(this.authenticationService.onDidChangeSessions(async i=>{if(i.event.removed)for(const e of i.event.removed)this.removeAccount(i.providerId,e.account);for(const e of[...i.event.changed??[],...i.event.added??[]])try{await this.addOrUpdateAccount(i.providerId,e.account)}catch(t){this.logService.error(t)}}))}async initialize(){if(await this.lifecycleService.when(an.Restored),this._store.isDisposed)return;const i=this._register(D_(ve(this.element),async()=>{await this.doInitialize(),i.dispose()}))}async doInitialize(){const i=this.authenticationService.getProviderIds(),e=await Promise.allSettled(i.map(t=>this.addAccountsFromProvider(t)));for(const t of e)t.status==="rejected"&&this.logService.error(t.reason);this.initialized=!0}async resolveMainMenuActions(i,e){await super.resolveMainMenuActions(i,e);const t=this.authenticationService.getProviderIds(),n=i.getActions();let s=[];for(const o of t){if(!this.initialized){const l=e.add(new Mt("noAccountsAvailable",g("loading","Loading..."),void 0,!1));s.push(l);break}const r=this.authenticationService.getProvider(o).label,a=this.groupedAccounts.get(o);if(!a){if(this.problematicProviders.has(o)){const l=e.add(new Mt("providerUnavailable",g("authProviderUnavailable","{0} is currently unavailable",r),void 0,!1));s.push(l);try{await this.addAccountsFromProvider(o)}catch(c){this.logService.error(c)}}continue}for(const l of a){const d=[Ei({id:`configureSessions${l.label}`,label:g("manageTrustedExtensions","Manage Trusted Extensions"),enabled:!0,run:Un(()=>this.commandService.executeCommand("_manageTrustedExtensionsForAccount",{providerId:o,accountLabel:l.label}),"run")})];l.canSignOut&&d.push(Ei({id:"signOut",label:g("signOut","Sign Out"),enabled:!0,run:Un(()=>this.commandService.executeCommand("_signOutOfAccount",{providerId:o,accountLabel:l.label}),"run")}));const h=new ll("activitybar.submenu",`${l.label} (${r})`,d);s.push(h)}}if(t.length&&!s.length){const o=e.add(new Mt("noAccountsAvailable",g("noAccounts","You are not signed in to any accounts"),void 0,!1));s.push(o)}return s.length&&n.length&&s.push(new zt),n.forEach((o,r)=>{const a=o[1];s=s.concat(a),r!==n.length-1&&s.push(new zt)}),s}async resolveContextMenuActions(i){const e=await super.resolveContextMenuActions(i);return this.fillContextMenuActions(e),e}async addOrUpdateAccount(i,e){let t=this.groupedAccounts.get(i);t||(t=[],this.groupedAccounts.set(i,t));const n=await this.sessionFromEmbedder.value;let s=!0;n&&!n.canSignOut&&(await this.authenticationService.getSessions(i)).some(r=>r.id===n.id&&r.account.id===e.id)&&(s=!1);const o=t.find(r=>r.label===e.label);o?s||(o.canSignOut=s):t.push({...e,canSignOut:s})}removeAccount(i,e){const t=this.groupedAccounts.get(i);if(!t)return;const n=t.findIndex(s=>s.id===e.id);n!==-1&&(t.splice(n,1),t.length===0&&this.groupedAccounts.delete(i))}async addAccountsFromProvider(i){try{const e=await this.authenticationService.getSessions(i);this.problematicProviders.delete(i);for(const t of e)try{await this.addOrUpdateAccount(i,t.account)}catch(n){this.logService.error(n)}}catch(e){this.logService.error(e),this.problematicProviders.add(i)}}};Qp=SS([tt(4,$t),tt(5,eh),tt(6,Po),tt(7,Hi),tt(8,No),tt(9,Ye),tt(10,N2),tt(11,id),tt(12,lS),tt(13,Pe),tt(14,ni),tt(15,Ooe),tt(16,jo),tt(17,yS),tt(18,He),tt(19,Xi)],Qp);let Rk=class extends Pk{constructor(i,e,t,n,s,o,r,a,l,c,d,h,u,f){const p=u.createInstance(Cy,{id:Sy,name:g("manage","Manage"),classNames:Ne.asClassNameArray(n.currentProfile.icon?Ne.fromId(n.currentProfile.icon):hM)});super(N.GlobalActivity,p,e,i,t,s,o,r,a,l,c,h,f),this.userDataProfileService=n,this._register(p),this._register(this.userDataProfileService.onDidChangeCurrentProfile(m=>{p.compositeBarActionItem={...p.compositeBarActionItem,classNames:Ne.asClassNameArray(n.currentProfile.icon?Ne.fromId(n.currentProfile.icon):hM)}}))}static{Un(this,"GlobalActivityActionViewItem")}profileBadge;profileBadgeContent;render(i){super.render(i),this.profileBadge=Le(i,ce(".profile-badge")),this.profileBadgeContent=Le(this.profileBadge,ce(".profile-badge-content")),this.updateProfileBadge()}updateProfileBadge(){!this.profileBadge||!this.profileBadgeContent||(Mn(this.profileBadgeContent),Wc(this.profileBadge),!this.userDataProfileService.currentProfile.isDefault&&(this.userDataProfileService.currentProfile.icon&&this.userDataProfileService.currentProfile.icon!==hM.id||this.action.activity||(Gl(this.profileBadge),this.profileBadgeContent.classList.add("profile-text-overlay"),this.profileBadgeContent.textContent=this.userDataProfileService.currentProfile.name.substring(0,2).toUpperCase())))}updateActivity(){super.updateActivity(),this.updateProfileBadge()}computeTitle(){return this.userDataProfileService.currentProfile.isDefault?super.computeTitle():g("manage profile","Manage {0} (Profile)",this.userDataProfileService.currentProfile.name)}};Rk=SS([tt(3,O2),tt(4,$t),tt(5,Po),tt(6,No),tt(7,Hi),tt(8,Ye),tt(9,Pe),tt(10,id),tt(11,ni),tt(12,He),tt(13,yS)],Rk);let u4=class extends Qp{static{Un(this,"SimpleAccountActivityActionViewItem")}constructor(i,e,t,n,s,o,r,a,l,c,d,h,u,f,p,m,_,w,v){super(()=>M2(p,!0),{...e,colors:Un(b=>({badgeBackground:b.getColor(dv),badgeForeground:b.getColor(hv)}),"colors"),hoverOptions:i,compact:!0},()=>{},b=>b,t,n,s,o,r,a,l,c,d,h,u,f,m,_,w,v)}};u4=SS([tt(2,$t),tt(3,eh),tt(4,Po),tt(5,Hi),tt(6,No),tt(7,Ye),tt(8,N2),tt(9,id),tt(10,lS),tt(11,Pe),tt(12,ni),tt(13,Ooe),tt(14,Si),tt(15,jo),tt(16,yS),tt(17,He),tt(18,Xi)],u4);let g4=class extends Rk{static{Un(this,"SimpleGlobalActivityActionViewItem")}constructor(i,e,t,n,s,o,r,a,l,c,d,h,u,f){super(()=>M2(f,!1),{...e,colors:Un(p=>({badgeBackground:p.getColor(dv),badgeForeground:p.getColor(hv)}),"colors"),hoverOptions:i,compact:!0},()=>{},t,n,s,o,r,a,l,c,d,h,u)}};g4=SS([tt(2,O2),tt(3,$t),tt(4,Po),tt(5,No),tt(6,Hi),tt(7,Ye),tt(8,Pe),tt(9,id),tt(10,ni),tt(11,He),tt(12,yS),tt(13,Si)],g4);function M2(i,e){const t=[];return e&&t.push(Ei({id:"hideAccounts",label:g("hideAccounts","Hide Accounts"),run:Un(()=>aL(i,!1),"run")}),new zt),[...t,Ei({id:"toggle.hideAccounts",label:g("accounts","Accounts"),checked:rL(i),run:Un(()=>aL(i,!rL(i)),"run")}),Ei({id:"toggle.hideManage",label:g("manage","Manage"),checked:!0,enabled:!1,run:Un(()=>{throw new Error('"Manage" can not be hidden')},"run")})]}Un(M2,"simpleActivityContextMenuActions");function rL(i){return i.getBoolean(Qp.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,Be.PROFILE,!0)}Un(rL,"isAccountsActionVisible");function aL(i,e){i.store(Qp.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,e,Be.PROFILE,ai.USER)}Un(aL,"setAccountsActionVisible");var zoe=Object.defineProperty,F4e=Object.getOwnPropertyDescriptor,Ml=(i,e)=>zoe(i,"name",{value:e,configurable:!0}),$oe=(i,e,t,n)=>{for(var s=n>1?void 0:n?F4e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&zoe(e,t,s),s},$a=(i,e)=>(t,n)=>e(t,n,i);let Vd=class extends gD{constructor(i,e,t,n,s){super(Y.ACTIVITYBAR_PART,{hasTitle:!1},n,s,t),this.paneCompositePart=i,this.instantiationService=e}static{Ml(this,"ActivitybarPart")}static ACTION_HEIGHT=48;static pinnedViewContainersKey="workbench.activity.pinnedViewlets2";static placeholderViewContainersKey="workbench.activity.placeholderViewlets";static viewContainersWorkspaceStateKey="workbench.activity.viewletsWorkspaceState";minimumWidth=48;maximumWidth=48;minimumHeight=0;maximumHeight=Number.POSITIVE_INFINITY;compositeBar=this._register(new Yi);content;createCompositeBar(){return this.instantiationService.createInstance(Ok,{partContainerClass:"activitybar",pinnedViewContainersKey:Vd.pinnedViewContainersKey,placeholderViewContainersKey:Vd.placeholderViewContainersKey,viewContainersWorkspaceStateKey:Vd.viewContainersWorkspaceStateKey,orientation:Ns.VERTICAL,icon:!0,iconSize:24,activityHoverOptions:{position:Ml(()=>this.layoutService.getSideBarPosition()===Ht.LEFT?zc.RIGHT:zc.LEFT,"position")},preventLoopNavigation:!0,recomputeSizes:!1,fillExtraContextMenuActions:Ml((i,e)=>{},"fillExtraContextMenuActions"),compositeSize:52,colors:Ml(i=>({activeForegroundColor:i.getColor(Ab),inactiveForegroundColor:i.getColor(xme),activeBorderColor:i.getColor(Uj),activeBackground:i.getColor(zj),badgeBackground:i.getColor(dv),badgeForeground:i.getColor(hv),dragAndDropBorder:i.getColor(Pme),activeBackgroundColor:void 0,inactiveBackgroundColor:void 0,activeBorderBottomColor:void 0}),"colors"),overflowActionSize:Vd.ACTION_HEIGHT},Y.ACTIVITYBAR_PART,this.paneCompositePart,!0)}createContentArea(i){return this.element=i,this.content=Le(this.element,ce(".content")),this.layoutService.isVisible(Y.ACTIVITYBAR_PART)&&this.show(),this.content}getPinnedPaneCompositeIds(){return this.compositeBar.value?.getPinnedPaneCompositeIds()??[]}getVisiblePaneCompositeIds(){return this.compositeBar.value?.getVisiblePaneCompositeIds()??[]}focus(){this.compositeBar.value?.focus()}updateStyles(){super.updateStyles();const i=pt(this.getContainer()),e=this.getColor(Ame)||"";i.style.backgroundColor=e;const t=this.getColor(kme)||this.getColor(Re)||"";i.classList.toggle("bordered",!!t),i.style.borderColor=t||""}show(i){this.content&&(this.compositeBar.value||(this.compositeBar.value=this.createCompositeBar(),this.compositeBar.value.create(this.content),this.dimension&&this.layout(this.dimension.width,this.dimension.height)),i&&this.focus())}hide(){this.compositeBar.value&&(this.compositeBar.clear(),this.content&&Mn(this.content))}layout(i,e){if(super.layout(i,e,0,0),!this.compositeBar.value)return;const t=super.layoutContents(i,e).contentSize;this.compositeBar.value.layout(i,t.height)}toJSON(){return{type:Y.ACTIVITYBAR_PART}}};Vd=$oe([$a(1,He),$a(2,yt),$a(3,$t),$a(4,Si)],Vd);let Ok=class extends xk{constructor(i,e,t,n,s,o,r,a,l,c,d,h,u,f){super({...i,fillExtraContextMenuActions:Ml((p,m)=>{i.fillExtraContextMenuActions(p,m),this.fillContextMenuActions(p,m)},"fillExtraContextMenuActions")},e,t,s,o,r,a,l,c,d,f),this.configurationService=h,this.menuService=u,n&&(this.globalCompositeBar=this._register(s.createInstance(ub,()=>this.getContextMenuActions(),p=>this.options.colors(p),this.options.activityHoverOptions))),this._register(this.configurationService.onDidChangeConfiguration(p=>{p.affectsConfiguration("window.menuBarVisibility")&&(Jh(this.configurationService)==="compact"?this.installMenubar():this.uninstallMenubar())}))}static{Ml(this,"ActivityBarCompositeBar")}element;menuBar;menuBarContainer;compositeBarContainer;globalCompositeBar;keyboardNavigationDisposables=this._register(new te);fillContextMenuActions(i,e){const t=Jh(this.configurationService);(t==="compact"||t==="hidden"||t==="toggle")&&i.unshift(Ei({id:"toggleMenuVisibility",label:g("menu","Menu"),checked:t==="compact",run:Ml(()=>this.configurationService.updateValue("window.menuBarVisibility",t==="compact"?"toggle":"compact"),"run")}),new zt),t==="compact"&&this.menuBarContainer&&e?.target&&As(e.target,this.menuBarContainer)&&i.unshift(Ei({id:"hideCompactMenu",label:g("hideMenu","Hide Menu"),run:Ml(()=>this.configurationService.updateValue("window.menuBarVisibility","toggle"),"run")}),new zt),this.globalCompositeBar&&(i.push(new zt),i.push(...this.globalCompositeBar.getContextMenuActions())),i.push(new zt),i.push(...this.getActivityBarContextMenuActions())}uninstallMenubar(){this.menuBar&&(this.menuBar.dispose(),this.menuBar=void 0),this.menuBarContainer&&(this.menuBarContainer.remove(),this.menuBarContainer=void 0)}installMenubar(){if(this.menuBar)return;this.menuBarContainer=document.createElement("div"),this.menuBarContainer.classList.add("menubar"),pt(this.element).prepend(this.menuBarContainer),this.menuBar=this._register(this.instantiationService.createInstance(Nk)),this.menuBar.create(this.menuBarContainer)}registerKeyboardNavigationListeners(){this.keyboardNavigationDisposables.clear(),this.menuBarContainer&&this.keyboardNavigationDisposables.add(F(this.menuBarContainer,Q.KEY_DOWN,i=>{const e=new Pt(i);(e.equals(E.DownArrow)||e.equals(E.RightArrow))&&this.focus()})),this.compositeBarContainer&&this.keyboardNavigationDisposables.add(F(this.compositeBarContainer,Q.KEY_DOWN,i=>{const e=new Pt(i);e.equals(E.DownArrow)||e.equals(E.RightArrow)?this.globalCompositeBar?.focus():(e.equals(E.UpArrow)||e.equals(E.LeftArrow))&&this.menuBar?.toggleFocus()})),this.globalCompositeBar&&this.keyboardNavigationDisposables.add(F(this.globalCompositeBar.element,Q.KEY_DOWN,i=>{const e=new Pt(i);(e.equals(E.UpArrow)||e.equals(E.LeftArrow))&&this.focus(this.getVisiblePaneCompositeIds().length-1)}))}create(i){return this.element=i,Jh(this.configurationService)==="compact"&&this.installMenubar(),this.compositeBarContainer=super.create(this.element),this.globalCompositeBar&&this.globalCompositeBar.create(this.element),this.registerKeyboardNavigationListeners(),this.compositeBarContainer}layout(i,e){this.menuBarContainer&&(this.options.orientation===Ns.VERTICAL?e-=this.menuBarContainer.clientHeight:i-=this.menuBarContainer.clientWidth),this.globalCompositeBar&&(this.options.orientation===Ns.VERTICAL?e-=this.globalCompositeBar.size()*Vd.ACTION_HEIGHT:i-=this.globalCompositeBar.element.clientWidth),super.layout(i,e)}getActivityBarContextMenuActions(){const i=this.menuService.getMenuActions(N.ActivityBarPositionMenu,this.contextKeyService,{shouldForwardArgs:!0,renderShortTitle:!0}),e=[];return fy(i,{primary:[],secondary:e}),[new ll("workbench.action.panel.position",g("activity bar position","Activity Bar Position"),e),Ei({id:Yr.ID,label:Yr.getLabel(this.layoutService),run:Ml(()=>this.instantiationService.invokeFunction(t=>new Yr().run(t)),"run")})]}};Ok=$oe([$a(4,He),$a(5,Si),$a(6,nd),$a(7,Ro),$a(8,vf),$a(9,Ye),$a(10,id),$a(11,Pe),$a(12,No),$a(13,yt)],Ok);Oe(class extends ge{constructor(){super({id:"workbench.action.activityBarLocation.default",title:{...W("positionActivityBarDefault","Move Activity Bar to Side"),mnemonicTitle:g({key:"miDefaultActivityBar",comment:["&& denotes a mnemonic"]},"&&Default")},shortTitle:g("default","Default"),category:oe.View,toggled:Z.equals(`config.${rt.ACTIVITY_BAR_LOCATION}`,ti.DEFAULT),menu:[{id:N.ActivityBarPositionMenu,order:1},{id:N.CommandPalette,when:Z.notEquals(`config.${rt.ACTIVITY_BAR_LOCATION}`,ti.DEFAULT)}]})}run(i){i.get(Pe).updateValue(rt.ACTIVITY_BAR_LOCATION,ti.DEFAULT)}});Oe(class extends ge{constructor(){super({id:"workbench.action.activityBarLocation.top",title:{...W("positionActivityBarTop","Move Activity Bar to Top"),mnemonicTitle:g({key:"miTopActivityBar",comment:["&& denotes a mnemonic"]},"&&Top")},shortTitle:g("top","Top"),category:oe.View,toggled:Z.equals(`config.${rt.ACTIVITY_BAR_LOCATION}`,ti.TOP),menu:[{id:N.ActivityBarPositionMenu,order:2},{id:N.CommandPalette,when:Z.notEquals(`config.${rt.ACTIVITY_BAR_LOCATION}`,ti.TOP)}]})}run(i){i.get(Pe).updateValue(rt.ACTIVITY_BAR_LOCATION,ti.TOP)}});Oe(class extends ge{constructor(){super({id:"workbench.action.activityBarLocation.bottom",title:{...W("positionActivityBarBottom","Move Activity Bar to Bottom"),mnemonicTitle:g({key:"miBottomActivityBar",comment:["&& denotes a mnemonic"]},"&&Bottom")},shortTitle:g("bottom","Bottom"),category:oe.View,toggled:Z.equals(`config.${rt.ACTIVITY_BAR_LOCATION}`,ti.BOTTOM),menu:[{id:N.ActivityBarPositionMenu,order:3},{id:N.CommandPalette,when:Z.notEquals(`config.${rt.ACTIVITY_BAR_LOCATION}`,ti.BOTTOM)}]})}run(i){i.get(Pe).updateValue(rt.ACTIVITY_BAR_LOCATION,ti.BOTTOM)}});Oe(class extends ge{constructor(){super({id:"workbench.action.activityBarLocation.hide",title:{...W("hideActivityBar","Hide Activity Bar"),mnemonicTitle:g({key:"miHideActivityBar",comment:["&& denotes a mnemonic"]},"&&Hidden")},shortTitle:g("hide","Hidden"),category:oe.View,toggled:Z.equals(`config.${rt.ACTIVITY_BAR_LOCATION}`,ti.HIDDEN),menu:[{id:N.ActivityBarPositionMenu,order:4},{id:N.CommandPalette,when:Z.notEquals(`config.${rt.ACTIVITY_BAR_LOCATION}`,ti.HIDDEN)}]})}run(i){i.get(Pe).updateValue(rt.ACTIVITY_BAR_LOCATION,ti.HIDDEN)}});xt.appendMenuItem(N.MenubarAppearanceMenu,{submenu:N.ActivityBarPositionMenu,title:g("positionActivituBar","Activity Bar Position"),group:"3_workbench_layout_move",order:2});xt.appendMenuItem(N.ViewContainerTitleContext,{submenu:N.ActivityBarPositionMenu,title:g("positionActivituBar","Activity Bar Position"),when:Z.equals("viewContainerLocation",Sr(Te.Sidebar)),group:"3_workbench_layout_move",order:1});xt.appendMenuItem(N.ViewTitleContext,{submenu:N.ActivityBarPositionMenu,title:g("positionActivituBar","Activity Bar Position"),when:Z.equals("viewLocation",Sr(Te.Sidebar)),group:"3_workbench_layout_move",order:1});class Goe extends ge{constructor(e,t){super(e),this.offset=t}static{Ml(this,"SwitchSideBarViewAction")}async run(e){const t=e.get(Cf),n=t.getVisiblePaneCompositeIds(Te.Sidebar),s=t.getActivePaneComposite(Te.Sidebar);if(!s)return;let o;for(let r=0;r<n.length;r++)if(n[r]===s.getId()){o=n[(r+n.length+this.offset)%n.length];break}await t.openPaneComposite(o,Te.Sidebar,!0)}}Oe(class extends Goe{static{Ml(this,"PreviousSideBarViewAction")}constructor(){super({id:"workbench.action.previousSideBarView",title:W("previousSideBarView","Previous Primary Side Bar View"),category:oe.View,f1:!0},-1)}});Oe(class extends Goe{static{Ml(this,"NextSideBarViewAction")}constructor(){super({id:"workbench.action.nextSideBarView",title:W("nextSideBarView","Next Primary Side Bar View"),category:oe.View,f1:!0},1)}});Oe(class extends ge{static{Ml(this,"FocusActivityBarAction")}constructor(){super({id:"workbench.action.focusActivityBar",title:W("focusActivityBar","Focus Activity Bar"),category:oe.View,f1:!0})}async run(e){e.get(yt).focusPart(Y.ACTIVITYBAR_PART)}});jc((i,e)=>{const t=i.getColor(Uj);t&&e.addRule(`
			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked .active-item-indicator:before {
				border-left-color: ${t};
			}
		`);const n=i.getColor(Nme);n&&e.addRule(`
			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:focus::before {
				visibility: hidden;
			}

			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:focus .active-item-indicator:before {
				visibility: visible;
				border-left-color: ${n};
			}
		`);const s=i.getColor(zj);s&&e.addRule(`
			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked .active-item-indicator {
				z-index: 0;
				background-color: ${s};
			}
		`);const o=i.getColor(Vi);if(o)e.addRule(`
			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item .action-label::before{
				padding: 6px;
			}

			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.active .action-label::before,
			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.active:hover .action-label::before,
			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked .action-label::before,
			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:hover .action-label::before {
				outline: 1px solid ${o};
			}

			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:hover .action-label::before {
				outline: 1px dashed ${o};
			}

			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:focus .active-item-indicator:before {
				border-left-color: ${o};
			}
		`);else{const r=i.getColor(ec);r&&e.addRule(`
				.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:focus .active-item-indicator::before {
						border-left-color: ${r};
					}
				`)}});var Koe=Object.defineProperty,V4e=Object.getOwnPropertyDescriptor,jS=(i,e)=>Koe(i,"name",{value:e,configurable:!0}),W4e=(i,e,t,n)=>{for(var s=n>1?void 0:n?V4e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Koe(e,t,s),s},bl=(i,e)=>(t,n)=>e(t,n,i);let lL=class extends yy{constructor(i,e,t,n,s,o,r,a,l,c,d,h,u){super(Y.SIDEBAR_PART,{hasTitle:!0,borderWidth:jS(()=>this.getColor(qA)||this.getColor(Re)?1:0,"borderWidth")},lL.activeViewletSettingsKey,yPe.bindTo(c),CPe.bindTo(c),"sideBar","viewlet",Ome,i,e,t,n,s,o,r,a,l,c,d,u),this.configurationService=h,this.rememberActivityBarVisiblePosition(),this._register(h.onDidChangeConfiguration(f=>{f.affectsConfiguration(rt.ACTIVITY_BAR_LOCATION)&&this.onDidChangeActivityBarLocation()})),this.registerActions()}static{jS(this,"SidebarPart")}static activeViewletSettingsKey="workbench.sidebar.activeviewletid";minimumWidth=170;maximumWidth=Number.POSITIVE_INFINITY;minimumHeight=0;maximumHeight=Number.POSITIVE_INFINITY;get snap(){return!0}priority=Fh.Low;get preferredWidth(){const i=this.getActivePaneComposite();if(!i)return;const e=i.getOptimalWidth();if(typeof e=="number")return Math.max(e,300)}activityBarPart=this._register(this.instantiationService.createInstance(Vd,this));onDidChangeActivityBarLocation(){this.activityBarPart.hide(),this.updateCompositeBar();const i=this.getActiveComposite()?.getId();i&&this.onTitleAreaUpdate(i),this.shouldShowActivityBar()&&this.activityBarPart.show(),this.rememberActivityBarVisiblePosition()}updateStyles(){super.updateStyles();const i=pt(this.getContainer());i.style.backgroundColor=this.getColor(kg)||"",i.style.color=this.getColor(jN)||"";const e=this.getColor(qA)||this.getColor(Re),t=this.layoutService.getSideBarPosition()===Ht.LEFT;i.style.borderRightWidth=e&&t?"1px":"",i.style.borderRightStyle=e&&t?"solid":"",i.style.borderRightColor=t&&e||"",i.style.borderLeftWidth=e&&!t?"1px":"",i.style.borderLeftStyle=e&&!t?"solid":"",i.style.borderLeftColor=t?"":e||"",i.style.outlineColor=this.getColor(qN)??""}layout(i,e,t,n){this.layoutService.isVisible(Y.SIDEBAR_PART)&&super.layout(i,e,t,n)}getTitleAreaDropDownAnchorAlignment(){return this.layoutService.getSideBarPosition()===Ht.LEFT?cu.LEFT:cu.RIGHT}createCompositeBar(){return this.instantiationService.createInstance(Ok,this.getCompositeBarOptions(),this.partId,this,!1)}getCompositeBarOptions(){return{partContainerClass:"sidebar",pinnedViewContainersKey:Vd.pinnedViewContainersKey,placeholderViewContainersKey:Vd.placeholderViewContainersKey,viewContainersWorkspaceStateKey:Vd.viewContainersWorkspaceStateKey,icon:!0,orientation:Ns.HORIZONTAL,recomputeSizes:!0,activityHoverOptions:{position:jS(()=>this.getCompositeBarPosition()===_r.BOTTOM?zc.ABOVE:zc.BELOW,"position")},fillExtraContextMenuActions:jS(i=>{const e=this.getViewsSubmenuAction();e&&(i.push(new zt),i.push(e))},"fillExtraContextMenuActions"),compositeSize:0,iconSize:16,overflowActionSize:30,colors:jS(i=>({activeBackgroundColor:i.getColor(kg),inactiveBackgroundColor:i.getColor(kg),activeBorderBottomColor:i.getColor($j),activeForegroundColor:i.getColor(xb),inactiveForegroundColor:i.getColor(Gj),badgeBackground:i.getColor(dv),badgeForeground:i.getColor(hv),dragAndDropBorder:i.getColor(Kj)}),"colors"),compact:!0}}shouldShowCompositeBar(){const i=this.configurationService.getValue(rt.ACTIVITY_BAR_LOCATION);return i===ti.TOP||i===ti.BOTTOM}shouldShowActivityBar(){return this.shouldShowCompositeBar()?!1:this.configurationService.getValue(rt.ACTIVITY_BAR_LOCATION)!==ti.HIDDEN}getCompositeBarPosition(){switch(this.configurationService.getValue(rt.ACTIVITY_BAR_LOCATION)){case ti.TOP:return _r.TOP;case ti.BOTTOM:return _r.BOTTOM;case ti.HIDDEN:case ti.DEFAULT:default:return _r.TITLE}}rememberActivityBarVisiblePosition(){const i=this.configurationService.getValue(rt.ACTIVITY_BAR_LOCATION);i!==ti.HIDDEN&&this.storageService.store(rt.ACTIVITY_BAR_LOCATION,i,Be.PROFILE,ai.USER)}getRememberedActivityBarVisiblePosition(){switch(this.storageService.get(rt.ACTIVITY_BAR_LOCATION,Be.PROFILE)){case ti.TOP:return ti.TOP;case ti.BOTTOM:return ti.BOTTOM;default:return ti.DEFAULT}}getPinnedPaneCompositeIds(){return this.shouldShowCompositeBar()?super.getPinnedPaneCompositeIds():this.activityBarPart.getPinnedPaneCompositeIds()}getVisiblePaneCompositeIds(){return this.shouldShowCompositeBar()?super.getVisiblePaneCompositeIds():this.activityBarPart.getVisiblePaneCompositeIds()}async focusActivityBar(){this.configurationService.getValue(rt.ACTIVITY_BAR_LOCATION)===ti.HIDDEN&&(await this.configurationService.updateValue(rt.ACTIVITY_BAR_LOCATION,this.getRememberedActivityBarVisiblePosition()),this.onDidChangeActivityBarLocation()),this.shouldShowCompositeBar()?this.focusCompositeBar():(this.layoutService.isVisible(Y.ACTIVITYBAR_PART)||this.layoutService.setPartHidden(!1,Y.ACTIVITYBAR_PART),this.activityBarPart.show(!0))}registerActions(){const i=this;this._register(Oe(class extends ge{constructor(){super({id:Xse,title:W("toggleActivityBar","Toggle Activity Bar Visibility")})}run(){const e=i.configurationService.getValue(rt.ACTIVITY_BAR_LOCATION)===ti.HIDDEN?i.getRememberedActivityBarVisiblePosition():ti.HIDDEN;return i.configurationService.updateValue(rt.ACTIVITY_BAR_LOCATION,e)}}))}toJSON(){return{type:Y.SIDEBAR_PART}}};lL=W4e([bl(0,fs),bl(1,Si),bl(2,Hi),bl(3,yt),bl(4,ni),bl(5,Po),bl(6,He),bl(7,$t),bl(8,Ro),bl(9,Ye),bl(10,nd),bl(11,Pe),bl(12,No)],lL);var joe=Object.defineProperty,H4e=Object.getOwnPropertyDescriptor,qS=(i,e)=>joe(i,"name",{value:e,configurable:!0}),U4e=(i,e,t,n)=>{for(var s=n>1?void 0:n?H4e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&joe(e,t,s),s},Ba=(i,e)=>(t,n)=>e(t,n,i);let Mk=class extends yy{constructor(i,e,t,n,s,o,r,a,l,c,d,h,u,f){super(Y.PANEL_PART,{hasTitle:!0},Mk.activePanelSettingsKey,LPe.bindTo(c),DPe.bindTo(c),"panel","panel",void 0,i,e,t,n,s,o,r,a,l,c,d,u),this.commandService=h,this.configurationService=f,this._register(this.configurationService.onDidChangeConfiguration(p=>{p.affectsConfiguration("workbench.panel.showLabel")&&this.updateCompositeBar(!0)}))}static{qS(this,"PanelPart")}minimumWidth=300;maximumWidth=Number.POSITIVE_INFINITY;minimumHeight=77;maximumHeight=Number.POSITIVE_INFINITY;get preferredHeight(){return this.layoutService.mainContainerDimension.height*.4}get preferredWidth(){const i=this.getActivePaneComposite();if(!i)return;const e=i.getOptimalWidth();if(typeof e=="number")return Math.max(e,300)}static activePanelSettingsKey="workbench.panelpart.activepanelid";updateStyles(){super.updateStyles();const i=pt(this.getContainer());i.style.backgroundColor=this.getColor(H1)||"";const e=this.getColor(cB)||this.getColor(Re)||"";i.style.borderLeftColor=e,i.style.borderRightColor=e,i.style.borderBottomColor=e;const t=this.getTitleArea();t&&(t.style.borderTopColor=this.getColor(cB)||this.getColor(Re)||"")}getCompositeBarOptions(){return{partContainerClass:"panel",pinnedViewContainersKey:"workbench.panel.pinnedPanels",placeholderViewContainersKey:"workbench.panel.placeholderPanels",viewContainersWorkspaceStateKey:"workbench.panel.viewContainersWorkspaceState",icon:!this.configurationService.getValue("workbench.panel.showLabel"),orientation:Ns.HORIZONTAL,recomputeSizes:!0,activityHoverOptions:{position:qS(()=>this.layoutService.getPanelPosition()===Ht.BOTTOM&&!this.layoutService.isPanelMaximized()?zc.ABOVE:zc.BELOW,"position")},fillExtraContextMenuActions:qS(i=>this.fillExtraContextMenuActions(i),"fillExtraContextMenuActions"),compositeSize:0,iconSize:16,overflowActionSize:44,colors:qS(i=>({activeBackgroundColor:i.getColor(H1),inactiveBackgroundColor:i.getColor(H1),activeBorderBottomColor:i.getColor(Vj),activeForegroundColor:i.getColor(Tb),inactiveForegroundColor:i.getColor(Fj),badgeBackground:i.getColor(X_),badgeForeground:i.getColor(UN),dragAndDropBorder:i.getColor(Wj)}),"colors")}}fillExtraContextMenuActions(i){const e=this.menuService.getMenuActions(N.PanelPositionMenu,this.contextKeyService,{shouldForwardArgs:!0}),t=this.menuService.getMenuActions(N.PanelAlignmentMenu,this.contextKeyService,{shouldForwardArgs:!0}),n=[],s=[];fy(e,{primary:[],secondary:n}),fy(t,{primary:[],secondary:s}),i.push(new zt,new ll("workbench.action.panel.position",g("panel position","Panel Position"),n),new ll("workbench.action.panel.align",g("align panel","Align Panel"),s),Ei({id:sf.ID,label:g("hidePanel","Hide Panel"),run:qS(()=>this.commandService.executeCommand(sf.ID),"run")}))}layout(i,e,t,n){let s;switch(this.layoutService.getPanelPosition()){case Ht.RIGHT:s=new Lt(i-1,e);break;case Ht.TOP:s=new Lt(i,e-1);break;default:s=new Lt(i,e);break}super.layout(s.width,s.height,t,n)}shouldShowCompositeBar(){return!0}getCompositeBarPosition(){return _r.TITLE}toJSON(){return{type:Y.PANEL_PART}}};Mk=U4e([Ba(0,fs),Ba(1,Si),Ba(2,Hi),Ba(3,yt),Ba(4,ni),Ba(5,Po),Ba(6,He),Ba(7,$t),Ba(8,Ro),Ba(9,Ye),Ba(10,nd),Ba(11,Xi),Ba(12,No),Ba(13,Pe)],Mk);var qoe=Object.defineProperty,z4e=Object.getOwnPropertyDescriptor,$4e=(i,e)=>qoe(i,"name",{value:e,configurable:!0}),G4e=(i,e,t,n)=>{for(var s=n>1?void 0:n?z4e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&qoe(e,t,s),s},ku=(i,e)=>(t,n)=>e(t,n,i);const K4e=(()=>{if(Ue&&ao)return"${activeEditorShort}${separator}${rootName}${separator}${profileName}";const i="${dirty}${activeEditorShort}${separator}${rootName}${separator}${profileName}${separator}${appName}";return ui?i+"${separator}${remoteName}":i})(),j4e=Ue?"  ":" - ";let ng=class extends ${constructor(i,e,t,n,s,o,r,a,l,c,d){super(),this.configurationService=t,this.contextKeyService=n,this.environmentService=o,this.contextService=r,this.labelService=a,this.userDataProfileService=l,this.productService=c,this.viewsService=d,this.editorService=s.createScoped(e,this._store),this.windowId=i.vscodeWindowId,this.updateTitleIncludesFocusedView(),this.registerListeners()}static{$4e(this,"WindowTitle")}static NLS_USER_IS_ADMIN=Nt?g("userIsAdmin","[Administrator]"):g("userIsSudo","[Superuser]");static NLS_EXTENSION_HOST=g("devExtensionWindowTitlePrefix","[Extension Development Host]");static TITLE_DIRTY=" ";properties={isPure:!0,isAdmin:!1,prefix:void 0};variables=new Map;activeEditorListeners=this._register(new te);titleUpdater=this._register(new xn(()=>this.doUpdateTitle(),0));onDidChangeEmitter=new x;onDidChange=this.onDidChangeEmitter.event;get value(){return this.title??""}get workspaceName(){return this.labelService.getWorkspaceLabel(this.contextService.getWorkspace())}get fileName(){const i=this.editorService.activeEditor;if(!i)return;const e=i.getTitle(Ii.SHORT);return`${i?.isDirty()&&!i.isSaving()?ng.TITLE_DIRTY:""}${e}`}title;titleIncludesFocusedView=!1;editorService;windowId;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(i=>this.onConfigurationChanged(i))),this._register(this.editorService.onDidActiveEditorChange(()=>this.onActiveEditorChange())),this._register(this.contextService.onDidChangeWorkspaceFolders(()=>this.titleUpdater.schedule())),this._register(this.contextService.onDidChangeWorkbenchState(()=>this.titleUpdater.schedule())),this._register(this.contextService.onDidChangeWorkspaceName(()=>this.titleUpdater.schedule())),this._register(this.labelService.onDidChangeFormatters(()=>this.titleUpdater.schedule())),this._register(this.userDataProfileService.onDidChangeCurrentProfile(()=>this.titleUpdater.schedule())),this._register(this.viewsService.onDidChangeFocusedView(()=>{this.titleIncludesFocusedView&&this.titleUpdater.schedule()})),this._register(this.contextKeyService.onDidChangeContext(i=>{i.affectsSome(this.variables)&&this.titleUpdater.schedule()}))}onConfigurationChanged(i){i.affectsConfiguration("window.title")&&this.updateTitleIncludesFocusedView(),(i.affectsConfiguration("window.title")||i.affectsConfiguration("window.titleSeparator"))&&this.titleUpdater.schedule()}updateTitleIncludesFocusedView(){const i=this.configurationService.getValue("window.title");this.titleIncludesFocusedView=typeof i=="string"&&i.includes("${focusedView}")}onActiveEditorChange(){this.activeEditorListeners.clear(),this.titleUpdater.schedule();const i=this.editorService.activeEditor;if(i&&(this.activeEditorListeners.add(i.onDidChangeDirty(()=>this.titleUpdater.schedule())),this.activeEditorListeners.add(i.onDidChangeLabel(()=>this.titleUpdater.schedule()))),this.titleIncludesFocusedView){const e=this.editorService.activeTextEditorControl,t=[];vy(e)?t.push(e):kD(e)&&t.push(e.getOriginalEditor(),e.getModifiedEditor());for(const n of t)this.activeEditorListeners.add(n.onDidBlurEditorText(()=>this.titleUpdater.schedule())),this.activeEditorListeners.add(n.onDidFocusEditorText(()=>this.titleUpdater.schedule()))}}doUpdateTitle(){const i=this.getFullWindowTitle();if(i!==this.title){let e=i;xK(e)||(e=this.productService.nameLong);const t=iE(this.windowId,!0).window;!t.document.title&&Ue&&e===this.productService.nameLong&&(t.document.title=`${this.productService.nameLong} ${ng.TITLE_DIRTY}`),t.document.title=e,this.title=i,this.onDidChangeEmitter.fire()}}getFullWindowTitle(){const{prefix:i,suffix:e}=this.getTitleDecorations();let t=this.getWindowTitle()||this.productService.nameLong;return i&&(t=`${i} ${t}`),e&&(t=`${t} ${e}`),t.replace(/[^\S ]/g," ")}getTitleDecorations(){let i,e;return this.properties.prefix&&(i=this.properties.prefix),this.environmentService.isExtensionDevelopment&&(i=i?`${ng.NLS_EXTENSION_HOST} - ${i}`:ng.NLS_EXTENSION_HOST),this.properties.isAdmin&&(e=ng.NLS_USER_IS_ADMIN),{prefix:i,suffix:e}}updateProperties(i){const e=typeof i.isAdmin=="boolean"?i.isAdmin:this.properties.isAdmin,t=typeof i.isPure=="boolean"?i.isPure:this.properties.isPure,n=typeof i.prefix=="string"?i.prefix:this.properties.prefix;(e!==this.properties.isAdmin||t!==this.properties.isPure||n!==this.properties.prefix)&&(this.properties.isAdmin=e,this.properties.isPure=t,this.properties.prefix=n,this.titleUpdater.schedule())}registerVariables(i){let e=!1;for(const{name:t,contextKey:n}of i)this.variables.has(n)||(this.variables.set(n,t),e=!0);e&&this.titleUpdater.schedule()}getWindowTitle(){const i=this.editorService.activeEditor,e=this.contextService.getWorkspace();let t;e.configuration?t=e.configuration:e.folders.length&&(t=e.folders[0].uri);const n=Io.getOriginalUri(i,{supportSideBySide:Is.PRIMARY});let s=n?zy(n):void 0;s?.path==="."&&(s=void 0);let o;this.contextService.getWorkbenchState()===Mc.FOLDER?o=e.folders[0]:n&&(o=this.contextService.getWorkspaceFolder(n)??void 0);let r;if(this.environmentService.remoteAuthority&&!ui)r=this.labelService.getHostLabel(Ve.vscodeRemote,this.environmentService.remoteAuthority);else{const R=RD(e);R&&(r=this.labelService.getHostLabel(R.scheme,R.authority))}const a=i?i.getTitle(Ii.SHORT):"",l=i?i.getTitle(Ii.MEDIUM):a,c=i?i.getTitle(Ii.LONG):l,d=s?lh(s):"",h=s?this.labelService.getUriLabel(s,{relative:!0}):"",u=s?this.labelService.getUriLabel(s):"",f=this.labelService.getWorkspaceLabel(e),p=this.labelService.getWorkspaceLabel(e,{verbose:XC.SHORT}),m=t?this.labelService.getUriLabel(t):"",_=o?o.name:"",w=o?this.labelService.getUriLabel(o.uri):"",v=i?.isDirty()&&!i.isSaving()?ng.TITLE_DIRTY:"",b=this.productService.nameLong,C=this.userDataProfileService.currentProfile.isDefault?"":this.userDataProfileService.currentProfile.name,S=this.viewsService.getFocusedViewName(),D={};for(const[R,G]of this.variables)D[G]=this.contextKeyService.getContextKeyValue(R)??"";let T=this.configurationService.getValue("window.title");typeof T!="string"&&(T=K4e);let I=this.configurationService.getValue("window.titleSeparator");return typeof I!="string"&&(I=j4e),LQ(T,{...D,activeEditorShort:a,activeEditorLong:c,activeEditorMedium:l,activeFolderShort:d,activeFolderMedium:h,activeFolderLong:u,rootName:f,rootPath:m,rootNameShort:p,folderName:_,folderPath:w,dirty:v,appName:b,remoteName:r,profileName:C,focusedView:S,separator:{label:I}})}isCustomTitleFormat(){const i=this.configurationService.inspect("window.title"),e=this.configurationService.inspect("window.titleSeparator");return i.value!==i.defaultValue||e.value!==e.defaultValue}};ng=G4e([ku(2,Pe),ku(3,Ye),ku(4,nt),ku(5,Tv),ku(6,po),ku(7,bu),ku(8,O2),ku(9,lS),ku(10,vf)],ng);var Yoe=Object.defineProperty,q4e=Object.getOwnPropertyDescriptor,AC=(i,e)=>Yoe(i,"name",{value:e,configurable:!0}),Zoe=(i,e,t,n)=>{for(var s=n>1?void 0:n?q4e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Yoe(e,t,s),s},kw=(i,e)=>(t,n)=>e(t,n,i);let f4=class{static{AC(this,"CommandCenterControl")}_disposables=new te;_onDidChangeVisibility=new x;onDidChangeVisibility=this._onDidChangeVisibility.event;element=document.createElement("div");constructor(i,e,t,n){this.element.classList.add("command-center");const s=t.createInstance(tL,this.element,N.CommandCenter,{contextMenu:N.TitleBarContext,hiddenItemStrategy:Av.NoHide,toolbarOptions:{primaryGroup:AC(()=>!0,"primaryGroup")},telemetrySource:"commandCenter",actionViewItemProvider:AC((o,r)=>o instanceof ql&&o.item.submenu===N.CommandCenterCenter?t.createInstance(Bk,o,i,{...r,hoverDelegate:e}):fm(t,o,{...r,hoverDelegate:e}),"actionViewItemProvider")});this._disposables.add(H.filter(n.onShow,()=>QA(this.element),this._disposables)(this._setVisibility.bind(this,!1))),this._disposables.add(H.filter(n.onHide,()=>QA(this.element),this._disposables)(this._setVisibility.bind(this,!0))),this._disposables.add(s)}_setVisibility(i){this.element.classList.toggle("hide",!i),this._onDidChangeVisibility.fire()}dispose(){this._disposables.dispose()}};f4=Zoe([kw(2,He),kw(3,ca)],f4);let Bk=class extends yr{constructor(i,e,t,n,s,o,r){super(void 0,i.actions.find(a=>a.id==="workbench.action.quickOpenWithModes")??i.actions[0],t),this._submenu=i,this._windowTitle=e,this._hoverService=n,this._keybindingService=s,this._instaService=o,this._editorGroupService=r,this._hoverDelegate=t.hoverDelegate??bn("mouse")}static{AC(this,"CommandCenterCenterViewItem")}static _quickOpenCommandId="workbench.action.quickOpenWithModes";_hoverDelegate;render(i){super.render(i),i.classList.add("command-center-center"),i.classList.toggle("multiple",this._submenu.actions.length>1);const e=this._store.add(this._hoverService.setupManagedHover(this._hoverDelegate,i,this.getTooltip()));this._store.add(this._windowTitle.onDidChange(()=>{e.update(this.getTooltip())}));const t=[];for(const n of this._submenu.actions)n instanceof ll?t.push(n.actions):t.push([n]);for(let n=0;n<t.length;n++){const s=t[n],o=this._instaService.createInstance(fu,i,{hiddenItemStrategy:Av.NoHide,telemetrySource:"commandCenterCenter",actionViewItemProvider:AC((r,a)=>{if(a={...a,hoverDelegate:this._hoverDelegate},r.id!==Bk._quickOpenCommandId)return fm(this._instaService,r,a);const l=this;return this._instaService.createInstance(class extends yr{static{AC(this,"CommandCenterQuickPickItem")}constructor(){super(void 0,r,a)}render(d){super.render(d),d.classList.toggle("command-center-quick-pick"),d.role="button";const h=this.action,u=document.createElement("span");u.ariaHidden="true",u.className=h.class??"",u.classList.add("search-icon");const f=this._getLabel(),p=document.createElement("span");p.classList.add("search-label"),p.innerText=f,dr(d,u,p);const m=this._store.add(l._hoverService.setupManagedHover(l._hoverDelegate,d,this.getTooltip()));this._store.add(l._windowTitle.onDidChange(()=>{m.update(this.getTooltip()),p.innerText=this._getLabel()})),this._store.add(l._editorGroupService.onDidChangeEditorPartOptions(({newPartOptions:_,oldPartOptions:w})=>{_.showTabs!==w.showTabs&&(m.update(this.getTooltip()),p.innerText=this._getLabel())}))}getTooltip(){return l.getTooltip()}_getLabel(){const{prefix:d,suffix:h}=l._windowTitle.getTitleDecorations();let u=l._windowTitle.workspaceName;return l._windowTitle.isCustomTitleFormat()?u=l._windowTitle.getWindowTitle():l._editorGroupService.partOptions.showTabs==="none"&&(u=l._windowTitle.fileName??u),u||(u=g("label.dfl","Search")),d&&(u=g("label1","{0} {1}",d,u)),h&&(u=g("label2","{0} {1}",u,h)),u.replaceAll(/\r\n|\r|\n/g,"")}})},"actionViewItemProvider")});if(o.setActions(s),this._store.add(o),n<t.length-1){const r=Yp(ee.circleSmallFilled);r.style.padding="0 12px",r.style.height="100%",r.style.opacity="0.5",i.appendChild(r)}}}getTooltip(){const i=this._keybindingService.lookupKeybinding(this.action.id)?.getLabel();return i?g("title","Search {0} ({1})  {2}",this._windowTitle.workspaceName,i,this._windowTitle.value):g("title2","Search {0}  {1}",this._windowTitle.workspaceName,this._windowTitle.value)}};Bk=Zoe([kw(3,Po),kw(4,ni),kw(5,He),kw(6,Ge)],Bk);xt.appendMenuItem(N.CommandCenter,{submenu:N.CommandCenterCenter,title:g("title3","Command Center"),icon:ee.shield,order:101});var Ae;(i=>{i.editorSimpleInput=new ie("editorSimpleInput",!1,!0),i.editorTextFocus=new ie("editorTextFocus",!1,g("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),i.focus=new ie("editorFocus",!1,g("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),i.textInputFocus=new ie("textInputFocus",!1,g("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),i.readOnly=new ie("editorReadonly",!1,g("editorReadonly","Whether the editor is read-only")),i.inDiffEditor=new ie("inDiffEditor",!1,g("inDiffEditor","Whether the context is a diff editor")),i.isEmbeddedDiffEditor=new ie("isEmbeddedDiffEditor",!1,g("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),i.multiDiffEditorAllCollapsed=new ie("multiDiffEditorAllCollapsed",void 0,g("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),i.hasChanges=new ie("diffEditorHasChanges",!1,g("diffEditorHasChanges","Whether the diff editor has changes")),i.comparingMovedCode=new ie("comparingMovedCode",!1,g("comparingMovedCode","Whether a moved code block is selected for comparison")),i.accessibleDiffViewerVisible=new ie("accessibleDiffViewerVisible",!1,g("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),i.diffEditorRenderSideBySideInlineBreakpointReached=new ie("diffEditorRenderSideBySideInlineBreakpointReached",!1,g("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),i.diffEditorInlineMode=new ie("diffEditorInlineMode",!1,g("diffEditorInlineMode","Whether inline mode is active")),i.diffEditorOriginalWritable=new ie("diffEditorOriginalWritable",!1,g("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),i.diffEditorModifiedWritable=new ie("diffEditorModifiedWritable",!1,g("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),i.diffEditorOriginalUri=new ie("diffEditorOriginalUri","",g("diffEditorOriginalUri","The uri of the original document")),i.diffEditorModifiedUri=new ie("diffEditorModifiedUri","",g("diffEditorModifiedUri","The uri of the modified document")),i.columnSelection=new ie("editorColumnSelection",!1,g("editorColumnSelection","Whether `editor.columnSelection` is enabled")),i.writable=i.readOnly.toNegated(),i.hasNonEmptySelection=new ie("editorHasSelection",!1,g("editorHasSelection","Whether the editor has text selected")),i.hasOnlyEmptySelection=i.hasNonEmptySelection.toNegated(),i.hasMultipleSelections=new ie("editorHasMultipleSelections",!1,g("editorHasMultipleSelections","Whether the editor has multiple selections")),i.hasSingleSelection=i.hasMultipleSelections.toNegated(),i.tabMovesFocus=new ie("editorTabMovesFocus",!1,g("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),i.tabDoesNotMoveFocus=i.tabMovesFocus.toNegated(),i.isInEmbeddedEditor=new ie("isInEmbeddedEditor",!1,!0),i.canUndo=new ie("canUndo",!1,!0),i.canRedo=new ie("canRedo",!1,!0),i.hoverVisible=new ie("editorHoverVisible",!1,g("editorHoverVisible","Whether the editor hover is visible")),i.hoverFocused=new ie("editorHoverFocused",!1,g("editorHoverFocused","Whether the editor hover is focused")),i.stickyScrollFocused=new ie("stickyScrollFocused",!1,g("stickyScrollFocused","Whether the sticky scroll is focused")),i.stickyScrollVisible=new ie("stickyScrollVisible",!1,g("stickyScrollVisible","Whether the sticky scroll is visible")),i.standaloneColorPickerVisible=new ie("standaloneColorPickerVisible",!1,g("standaloneColorPickerVisible","Whether the standalone color picker is visible")),i.standaloneColorPickerFocused=new ie("standaloneColorPickerFocused",!1,g("standaloneColorPickerFocused","Whether the standalone color picker is focused")),i.inCompositeEditor=new ie("inCompositeEditor",void 0,g("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),i.notInCompositeEditor=i.inCompositeEditor.toNegated(),i.languageId=new ie("editorLangId","",g("editorLangId","The language identifier of the editor")),i.hasCompletionItemProvider=new ie("editorHasCompletionItemProvider",!1,g("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),i.hasCodeActionsProvider=new ie("editorHasCodeActionsProvider",!1,g("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),i.hasCodeLensProvider=new ie("editorHasCodeLensProvider",!1,g("editorHasCodeLensProvider","Whether the editor has a code lens provider")),i.hasDefinitionProvider=new ie("editorHasDefinitionProvider",!1,g("editorHasDefinitionProvider","Whether the editor has a definition provider")),i.hasDeclarationProvider=new ie("editorHasDeclarationProvider",!1,g("editorHasDeclarationProvider","Whether the editor has a declaration provider")),i.hasImplementationProvider=new ie("editorHasImplementationProvider",!1,g("editorHasImplementationProvider","Whether the editor has an implementation provider")),i.hasTypeDefinitionProvider=new ie("editorHasTypeDefinitionProvider",!1,g("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),i.hasHoverProvider=new ie("editorHasHoverProvider",!1,g("editorHasHoverProvider","Whether the editor has a hover provider")),i.hasDocumentHighlightProvider=new ie("editorHasDocumentHighlightProvider",!1,g("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),i.hasDocumentSymbolProvider=new ie("editorHasDocumentSymbolProvider",!1,g("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),i.hasReferenceProvider=new ie("editorHasReferenceProvider",!1,g("editorHasReferenceProvider","Whether the editor has a reference provider")),i.hasRenameProvider=new ie("editorHasRenameProvider",!1,g("editorHasRenameProvider","Whether the editor has a rename provider")),i.hasSignatureHelpProvider=new ie("editorHasSignatureHelpProvider",!1,g("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),i.hasInlayHintsProvider=new ie("editorHasInlayHintsProvider",!1,g("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),i.hasDocumentFormattingProvider=new ie("editorHasDocumentFormattingProvider",!1,g("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),i.hasDocumentSelectionFormattingProvider=new ie("editorHasDocumentSelectionFormattingProvider",!1,g("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),i.hasMultipleDocumentFormattingProvider=new ie("editorHasMultipleDocumentFormattingProvider",!1,g("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),i.hasMultipleDocumentSelectionFormattingProvider=new ie("editorHasMultipleDocumentSelectionFormattingProvider",!1,g("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(Ae||(Ae={}));var Y4e=Object.defineProperty,b_=(i,e)=>Y4e(i,"name",{value:e,configurable:!0}),p4=(i=>(i[i.NO_ACTION=0]="NO_ACTION",i[i.CLOSE_PICKER=1]="CLOSE_PICKER",i[i.REFRESH_PICKER=2]="REFRESH_PICKER",i[i.REMOVE_ITEM=3]="REMOVE_ITEM",i))(p4||{});function hA(i){const e=i;return Array.isArray(e.items)}b_(hA,"isPicksWithActive");function m4(i){const e=i;return!!e.picks&&e.additionalPicks instanceof Promise}b_(m4,"isFastAndSlowPicks");class Z4e extends ${constructor(e,t){super(),this.prefix=e,this.options=t}static{b_(this,"PickerQuickAccessProvider")}provide(e,t,n){const s=new te;e.canAcceptInBackground=!!this.options?.canAcceptInBackground,e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let o;const r=s.add(new Yi),a=b_(async()=>{const c=r.value=new te;o?.dispose(!0),e.busy=!1,o=new xr(t);const d=o.token;let h=e.value.substring(this.prefix.length);this.options?.shouldSkipTrimPickFilter||(h=h.trim());const u=this._getPicks(h,c,d,n),f=b_((m,_)=>{let w,v;if(hA(m)?(w=m.items,v=m.active):w=m,w.length===0){if(_)return!1;(h.length>0||e.hideInput)&&this.options?.noResultsPick&&(zg(this.options.noResultsPick)?w=[this.options.noResultsPick(h)]:w=[this.options.noResultsPick])}return e.items=w,v&&(e.activeItems=[v]),!0},"applyPicks"),p=b_(async m=>{let _=!1,w=!1;await Promise.all([(async()=>{typeof m.mergeDelay=="number"&&(await xa(m.mergeDelay),d.isCancellationRequested)||w||(_=f(m.picks,!0))})(),(async()=>{e.busy=!0;try{const v=await m.additionalPicks;if(d.isCancellationRequested)return;let b,C;hA(m.picks)?(b=m.picks.items,C=m.picks.active):b=m.picks;let S,D;if(hA(v)?(S=v.items,D=v.active):S=v,S.length>0||!_){let T;if(!C&&!D){const I=e.activeItems[0];I&&b.indexOf(I)!==-1&&(T=I)}f({items:[...b,...S],active:C||D||T})}}finally{d.isCancellationRequested||(e.busy=!1),w=!0}})()])},"applyFastAndSlowPicks");if(u!==null)if(m4(u))await p(u);else if(!(u instanceof Promise))f(u);else{e.busy=!0;try{const m=await u;if(d.isCancellationRequested)return;m4(m)?await p(m):f(m)}finally{d.isCancellationRequested||(e.busy=!1)}}},"updatePickerItems");s.add(e.onDidChangeValue(()=>a())),a(),s.add(e.onDidAccept(c=>{if(n?.handleAccept){c.inBackground||e.hide(),n.handleAccept?.(e.activeItems[0]);return}const[d]=e.selectedItems;typeof d?.accept=="function"&&(c.inBackground||e.hide(),d.accept(e.keyMods,c))}));const l=b_(async(c,d)=>{if(typeof d.trigger!="function")return;const h=d.buttons?.indexOf(c)??-1;if(h>=0){const u=d.trigger(h,e.keyMods),f=typeof u=="number"?u:await u;if(t.isCancellationRequested)return;switch(f){case 0:break;case 1:e.hide();break;case 2:a();break;case 3:{const p=e.items.indexOf(d);if(p!==-1){const m=e.items.slice(),_=m.splice(p,1),w=e.activeItems.filter(b=>b!==_[0]),v=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=m,w&&(e.activeItems=w),e.keepScrollPosition=v}break}}}},"buttonTrigger");return s.add(e.onDidTriggerItemButton(({button:c,item:d})=>l(c,d))),s.add(e.onDidTriggerSeparatorButton(({button:c,separator:d})=>l(c,d))),s}}var Xoe=Object.defineProperty,X4e=Object.getOwnPropertyDescriptor,xC=(i,e)=>Xoe(i,"name",{value:e,configurable:!0}),TR=(i,e,t,n)=>{for(var s=n>1?void 0:n?X4e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Xoe(e,t,s),s},ea=(i,e)=>(t,n)=>e(t,n,i);let cL=class extends Z4e{constructor(i,e,t,n,s){super(i,{canAcceptInBackground:!0,noResultsPick:{label:g("noViewResults","No matching editors"),groupId:-1}}),this.editorGroupService=e,this.editorService=t,this.modelService=n,this.languageService=s}static{xC(this,"BaseEditorQuickAccessProvider")}pickState=new class{scorerCache=Object.create(null);isQuickNavigating=void 0;reset(i){i||(this.scorerCache=Object.create(null)),this.isQuickNavigating=i}};provide(i,e){return this.pickState.reset(!!i.quickNavigate),super.provide(i,e)}_getPicks(i){const e=sk(i),t=this.doGetEditorPickItems().filter(s=>{if(!e.normalized)return!0;const o=ik(s,e,!0,BU,this.pickState.scorerCache);return o.score?(s.highlights={label:o.labelMatch,description:o.descriptionMatch},!0):!1});if(e.normalized){const s=this.editorGroupService.getGroups(tl.GRID_APPEARANCE).map(o=>o.id);t.sort((o,r)=>o.groupId!==r.groupId?s.indexOf(o.groupId)-s.indexOf(r.groupId):Rie(o,r,e,!0,BU,this.pickState.scorerCache))}const n=[];if(this.editorGroupService.count>1){let s;for(const o of t){if(typeof s!="number"||s!==o.groupId){const r=this.editorGroupService.getGroup(o.groupId);r&&n.push({type:"separator",label:r.label}),s=o.groupId}n.push(o)}}else n.push(...t);return n}doGetEditorPickItems(){const i=this.doGetEditors(),e=new Map;for(const{groupId:t}of i)if(!e.has(t)){const n=this.editorGroupService.getGroup(t);n&&e.set(t,n.ariaLabel)}return this.doGetEditors().map(({editor:t,groupId:n})=>{const s=Io.getOriginalUri(t,{supportSideBySide:Is.PRIMARY}),o=t.isDirty()&&!t.isSaving(),r=t.getDescription(),a=r?`${t.getName()} ${r}`:t.getName();return{groupId:n,resource:s,label:t.getName(),ariaLabel:e.size>1?o?g("entryAriaLabelWithGroupDirty","{0}, unsaved changes, {1}",a,e.get(n)):g("entryAriaLabelWithGroup","{0}, {1}",a,e.get(n)):o?g("entryAriaLabelDirty","{0}, unsaved changes",a):a,description:r,iconClasses:TC(this.modelService,this.languageService,s,void 0,t.getIcon()).concat(t.getLabelExtraClasses()),italic:!this.editorGroupService.getGroup(n)?.isPinned(t),buttons:[{iconClass:o?"dirty-editor "+Ne.asClassName(ee.closeDirty):Ne.asClassName(ee.close),tooltip:g("closeEditor","Close Editor"),alwaysVisible:o}],trigger:xC(async()=>{const l=this.editorGroupService.getGroup(n);return l&&(await l.closeEditor(t,{preserveFocus:!0}),!l.contains(t))?p4.REMOVE_ITEM:p4.NO_ACTION},"trigger"),accept:xC((l,c)=>this.editorGroupService.getGroup(n)?.openEditor(t,{preserveFocus:c.inBackground}),"accept")}})}};cL=TR([ea(1,Ge),ea(2,nt),ea(3,Zc),ea(4,Ra)],cL);let Jb=class extends cL{static{xC(this,"ActiveGroupEditorsByMostRecentlyUsedQuickAccess")}static PREFIX="edt active ";constructor(i,e,t,n){super(Jb.PREFIX,i,e,t,n)}doGetEditors(){const i=this.editorGroupService.activeGroup;return i.getEditors(mn.MOST_RECENTLY_ACTIVE).map(e=>({editor:e,groupId:i.id}))}};Jb=TR([ea(0,Ge),ea(1,nt),ea(2,Zc),ea(3,Ra)],Jb);let Fk=class extends cL{static{xC(this,"AllEditorsByAppearanceQuickAccess")}static PREFIX="edt ";constructor(i,e,t,n){super(Fk.PREFIX,i,e,t,n)}doGetEditors(){const i=[];for(const e of this.editorGroupService.getGroups(tl.GRID_APPEARANCE))for(const t of e.getEditors(mn.SEQUENTIAL))i.push({editor:t,groupId:e.id});return i}};Fk=TR([ea(0,Ge),ea(1,nt),ea(2,Zc),ea(3,Ra)],Fk);let Ly=class extends cL{static{xC(this,"AllEditorsByMostRecentlyUsedQuickAccess")}static PREFIX="edt mru ";constructor(i,e,t,n){super(Ly.PREFIX,i,e,t,n)}doGetEditors(){const i=[];for(const e of this.editorService.getEditors(mn.MOST_RECENTLY_ACTIVE))i.push(e);return i}};Ly=TR([ea(0,Ge),ea(1,nt),ea(2,Zc),ea(3,Ra)],Ly);var Q4e=Object.defineProperty,Qoe=(i,e)=>Q4e(i,"name",{value:e,configurable:!0});class gb extends tne{constructor(e,t,n,s,o){super(e,n,s,o),this.group=t}static{Qoe(this,"EditorPane")}onDidChangeSizeConstraints=H.None;_onDidChangeControl=this._register(new x);onDidChangeControl=this._onDidChangeControl.event;static EDITOR_MEMENTOS=new Map;get minimumWidth(){return Iw.width}get maximumWidth(){return tz.width}get minimumHeight(){return Iw.height}get maximumHeight(){return tz.height}_input;get input(){return this._input}_options;get options(){return this._options}get window(){return iE(this.group.windowId,!0).window}get scopedContextKeyService(){}create(e){super.create(e),this.createEditor(e)}async setInput(e,t,n,s){this._input=e,this._options=t}clearInput(){this._input=void 0,this._options=void 0}setOptions(e){this._options=e}setVisible(e){super.setVisible(e),this.setEditorVisible(e)}setEditorVisible(e){}setBoundarySashes(e){}getEditorMemento(e,t,n,s=10){const o=`${this.getId()}${n}`;let r=gb.EDITOR_MEMENTOS.get(o);return r||(r=this._register(new E0(this.getId(),n,this.getMemento(Be.WORKSPACE,ai.MACHINE),s,e,t)),gb.EDITOR_MEMENTOS.set(o,r)),r}getViewState(){}saveState(){for(const[,e]of gb.EDITOR_MEMENTOS)e.id===this.getId()&&e.saveState();super.saveState()}dispose(){this._input=void 0,this._options=void 0,super.dispose()}}class E0 extends ${constructor(e,t,n,s,o,r){super(),this.id=e,this.key=t,this.memento=n,this.limit=s,this.editorGroupService=o,this.configurationService=r,this.updateConfiguration(void 0),this.registerListeners()}static{Qoe(this,"EditorMemento")}static SHARED_EDITOR_STATE=-1;cache;cleanedUp=!1;editorDisposables;shareEditorState=!1;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>this.updateConfiguration(e)))}updateConfiguration(e){(!e||e.affectsConfiguration(void 0,"workbench.editor.sharedViewState"))&&(this.shareEditorState=this.configurationService.getValue(void 0,"workbench.editor.sharedViewState")===!0)}saveEditorState(e,t,n){const s=this.doGetResource(t);if(!s||!e)return;const o=this.doLoad();let r=o.get(s.toString());r||(r=Object.create(null),o.set(s.toString(),r)),r[e.id]=n,this.shareEditorState&&(r[E0.SHARED_EDITOR_STATE]=n),ho(t)&&this.clearEditorStateOnDispose(s,t)}loadEditorState(e,t){const n=this.doGetResource(t);if(!n||!e)return;const o=this.doLoad().get(n.toString());if(o){const r=o[e.id];if(r)return r;if(this.shareEditorState)return o[E0.SHARED_EDITOR_STATE]}}clearEditorState(e,t){ho(e)&&this.editorDisposables?.delete(e);const n=this.doGetResource(e);if(n){const s=this.doLoad();if(t){const o=s.get(n.toString());o&&(delete o[t.id],R0(o)&&s.delete(n.toString()))}else s.delete(n.toString())}}clearEditorStateOnDispose(e,t){this.editorDisposables||(this.editorDisposables=new Map),this.editorDisposables.has(t)||this.editorDisposables.set(t,H.once(t.onWillDispose)(()=>{this.clearEditorState(e),this.editorDisposables?.delete(t)}))}moveEditorState(e,t,n){const s=this.doLoad(),o=[...s.keys()];for(const r of o){const a=ne.parse(r);if(!n.isEqualOrParent(a,e))continue;let l;if(Ta(e,a))l=t;else{const d=jK(a.path,e.path);l=Ti(t,a.path.substr(d+e.path.length+1))}const c=s.get(r,UG.None);c&&(s.delete(r),s.set(l.toString(),c))}}doGetResource(e){return ho(e)?e.resource:e}doLoad(){if(!this.cache){this.cache=new Ry(this.limit);const e=this.memento[this.key];Array.isArray(e)&&this.cache.fromJSON(e)}return this.cache}saveState(){const e=this.doLoad();this.cleanedUp||(this.cleanUp(),this.cleanedUp=!0),this.memento[this.key]=e.toJSON()}cleanUp(){const e=this.doLoad(),t=[...e.entries()];for(const[n,s]of t)for(const o of Object.keys(s)){const r=Number(o);r===E0.SHARED_EDITOR_STATE&&this.shareEditorState||this.editorGroupService.getGroup(r)||(delete s[r],R0(s)&&e.delete(n))}}}var J4e=Object.defineProperty,AR=(i,e)=>J4e(i,"name",{value:e,configurable:!0});class aw{constructor(e,t,n){this.ctor=e,this.typeId=t,this.name=n}static{AR(this,"EditorPaneDescriptor")}static instantiatedEditorPanes=new Set;static didInstantiateEditorPane(e){return aw.instantiatedEditorPanes.has(e)}static _onWillInstantiateEditorPane=new x;static onWillInstantiateEditorPane=aw._onWillInstantiateEditorPane.event;static create(e,t,n){return new aw(e,t,n)}instantiate(e,t){aw._onWillInstantiateEditorPane.fire({typeId:this.typeId});const n=e.createInstance(this.ctor,t);return aw.instantiatedEditorPanes.add(this.typeId),n}describes(e){return e.getId()===this.typeId}}class eWe{static{AR(this,"EditorPaneRegistry")}mapEditorPanesToEditors=new Map;registerEditorPane(e,t){return this.mapEditorPanesToEditors.set(e,t),ye(()=>{this.mapEditorPanesToEditors.delete(e)})}getEditorPane(e){const t=this.findEditorPaneDescriptors(e);if(t.length!==0)return t.length===1?t[0]:e.prefersEditorPane(t)}findEditorPaneDescriptors(e,t){const n=[];for(const s of this.mapEditorPanesToEditors.keys()){const o=this.mapEditorPanesToEditors.get(s)||[];for(const r of o){const a=r.ctor;if(!t&&e.constructor===a){n.push(s);break}else if(t&&e instanceof a){n.push(s);break}}}return!t&&n.length===0?this.findEditorPaneDescriptors(e,!0):n}getEditorPaneByType(e){return Zt.find(this.mapEditorPanesToEditors.keys(),t=>t.typeId===e)}getEditorPanes(){return Array.from(this.mapEditorPanesToEditors.keys())}getEditors(){const e=[];for(const t of this.mapEditorPanesToEditors.keys()){const n=this.mapEditorPanesToEditors.get(t);n&&e.push(...n.map(s=>s.ctor))}return e}}Xt.add(jp.EditorPane,new eWe);function tWe(i,e){const t=i.get(nt),n=i.get(IP),s=i.get(aS);return new Promise(o=>{let r=[...e];const a=t.onDidCloseEditor(async l=>{if(l.context===cb.MOVE)return;let c=Io.getOriginalUri(l.editor,{supportSideBySide:Is.PRIMARY}),d=Io.getOriginalUri(l.editor,{supportSideBySide:Is.SECONDARY});if(l.context===cb.REPLACE){const h=Io.getOriginalUri(t.activeEditor,{supportSideBySide:Is.PRIMARY}),u=Io.getOriginalUri(t.activeEditor,{supportSideBySide:Is.SECONDARY});n.extUri.isEqual(c,h)&&(c=void 0),n.extUri.isEqual(d,u)&&(d=void 0)}if(r=r.filter(h=>!(n.extUri.isEqual(h,c)||n.extUri.isEqual(h,d)||l.context!==cb.REPLACE&&(c?.scheme===Ve.untitled&&n.extUri.isEqual(h,c.with({scheme:h.scheme}))||d?.scheme===Ve.untitled&&n.extUri.isEqual(h,d.with({scheme:h.scheme}))))),r.length===0){const h=e.filter(u=>s.isDirty(u));return h.length>0&&await Ka.settled(h.map(async u=>await new Promise(f=>{if(!s.isDirty(u))return f();const p=s.onDidChangeDirty(m=>{if(!m.isDirty()&&n.extUri.isEqual(u,m.resource))return p.dispose(),f()})}))),a.dispose(),o()}})})}AR(tWe,"whenEditorClosed");function B2(i,e,t,n){let s=i.getAriaLabel();return t&&!t.isPinned(i)&&(s=g("preview","{0}, preview",s)),t?.isSticky(e??i)&&(s=g("pinned","{0}, pinned",s)),t&&typeof n=="number"&&n>1&&(s=`${s}, ${t.ariaLabel}`),s}AR(B2,"computeEditorAriaLabel");var Joe=Object.defineProperty,iWe=Object.getOwnPropertyDescriptor,nWe=(i,e)=>Joe(i,"name",{value:e,configurable:!0}),sWe=(i,e,t,n)=>{for(var s=n>1?void 0:n?iWe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Joe(e,t,s),s},Om=(i,e)=>(t,n)=>e(t,n,i);let Vk=class extends gb{constructor(i,e,t,n,s,o,r,a,l,c){super(i,e,n,a,o),this.instantiationService=s,this.textResourceConfigurationService=r,this.editorService=l,this.editorGroupService=c,this.viewState=this.getEditorMemento(c,r,t,100)}static{nWe(this,"AbstractEditorWithViewState")}viewState;groupListener=this._register(new Yi);editorViewStateDisposables;setEditorVisible(i){this.groupListener.value=this.group.onWillCloseEditor(e=>this.onWillCloseEditor(e)),super.setEditorVisible(i)}onWillCloseEditor(i){const e=i.editor;e===this.input&&this.updateEditorViewState(e)}clearInput(){this.updateEditorViewState(this.input),super.clearInput()}saveState(){this.updateEditorViewState(this.input),super.saveState()}updateEditorViewState(i){if(!i||!this.tracksEditorViewState(i))return;const e=this.toEditorViewStateResource(i);e&&(this.tracksDisposedEditorViewState()||(this.editorViewStateDisposables||(this.editorViewStateDisposables=new Map),this.editorViewStateDisposables.has(i)||this.editorViewStateDisposables.set(i,H.once(i.onWillDispose)(()=>{this.clearEditorViewState(e,this.group),this.editorViewStateDisposables?.delete(i)}))),i.isDisposed()&&!this.tracksDisposedEditorViewState()||!this.shouldRestoreEditorViewState(i)&&!this.group.contains(i)?this.clearEditorViewState(e,this.group):i.isDisposed()||this.saveEditorViewState(e))}shouldRestoreEditorViewState(i,e){return e?.newInGroup?this.textResourceConfigurationService.getValue(Io.getOriginalUri(i,{supportSideBySide:Is.PRIMARY}),"workbench.editor.restoreViewState")!==!1:!0}getViewState(){const i=this.input;if(!i||!this.tracksEditorViewState(i))return;const e=this.toEditorViewStateResource(i);if(e)return this.computeEditorViewState(e)}saveEditorViewState(i){const e=this.computeEditorViewState(i);e&&this.viewState.saveEditorState(this.group,i,e)}loadEditorViewState(i,e){if(!i||!this.tracksEditorViewState(i)||!this.shouldRestoreEditorViewState(i,e))return;const t=this.toEditorViewStateResource(i);if(t)return this.viewState.loadEditorState(this.group,t)}moveEditorViewState(i,e,t){return this.viewState.moveEditorState(i,e,t)}clearEditorViewState(i,e){this.viewState.clearEditorState(i,e)}dispose(){if(super.dispose(),this.editorViewStateDisposables){for(const[,i]of this.editorViewStateDisposables)i.dispose();this.editorViewStateDisposables=void 0}}tracksDisposedEditorViewState(){return!1}};Vk=sWe([Om(3,rs),Om(4,He),Om(5,Si),Om(6,Xg),Om(7,$t),Om(8,nt),Om(9,Ge)],Vk);var ere=Object.defineProperty,oWe=Object.getOwnPropertyDescriptor,L0=(i,e)=>ere(i,"name",{value:e,configurable:!0}),rWe=(i,e,t,n)=>{for(var s=n>1?void 0:n?oWe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&ere(e,t,s),s},kf=(i,e)=>(t,n)=>e(t,n,i);function tre(i){const e=i;return typeof e?.primary=="object"&&typeof e.secondary=="object"}L0(tre,"isSideBySideEditorViewState");let Bl=class extends Vk{constructor(i,e,t,n,s,o,r,a,l){super(Bl.ID,i,Bl.VIEW_STATE_PREFERENCE_KEY,e,t,s,r,n,a,l),this.configurationService=o,this.registerListeners()}static{L0(this,"SideBySideEditor")}static ID=sIe;static SIDE_BY_SIDE_LAYOUT_SETTING="workbench.editor.splitInGroupLayout";static VIEW_STATE_PREFERENCE_KEY="sideBySideEditorViewState";get minimumPrimaryWidth(){return this.primaryEditorPane?this.primaryEditorPane.minimumWidth:0}get maximumPrimaryWidth(){return this.primaryEditorPane?this.primaryEditorPane.maximumWidth:Number.POSITIVE_INFINITY}get minimumPrimaryHeight(){return this.primaryEditorPane?this.primaryEditorPane.minimumHeight:0}get maximumPrimaryHeight(){return this.primaryEditorPane?this.primaryEditorPane.maximumHeight:Number.POSITIVE_INFINITY}get minimumSecondaryWidth(){return this.secondaryEditorPane?this.secondaryEditorPane.minimumWidth:0}get maximumSecondaryWidth(){return this.secondaryEditorPane?this.secondaryEditorPane.maximumWidth:Number.POSITIVE_INFINITY}get minimumSecondaryHeight(){return this.secondaryEditorPane?this.secondaryEditorPane.minimumHeight:0}get maximumSecondaryHeight(){return this.secondaryEditorPane?this.secondaryEditorPane.maximumHeight:Number.POSITIVE_INFINITY}set minimumWidth(i){}set maximumWidth(i){}set minimumHeight(i){}set maximumHeight(i){}get minimumWidth(){return this.minimumPrimaryWidth+this.minimumSecondaryWidth}get maximumWidth(){return this.maximumPrimaryWidth+this.maximumSecondaryWidth}get minimumHeight(){return this.minimumPrimaryHeight+this.minimumSecondaryHeight}get maximumHeight(){return this.maximumPrimaryHeight+this.maximumSecondaryHeight}_boundarySashes;onDidCreateEditors=this._register(new x);_onDidChangeSizeConstraints=this._register(new Nl);onDidChangeSizeConstraints=H.any(this.onDidCreateEditors.event,this._onDidChangeSizeConstraints.event);_onDidChangeSelection=this._register(new x);onDidChangeSelection=this._onDidChangeSelection.event;primaryEditorPane=void 0;secondaryEditorPane=void 0;primaryEditorContainer;secondaryEditorContainer;splitview;splitviewDisposables=this._register(new te);editorDisposables=this._register(new te);orientation=this.configurationService.getValue(Bl.SIDE_BY_SIDE_LAYOUT_SETTING)==="vertical"?ke.VERTICAL:ke.HORIZONTAL;dimension=new Lt(0,0);lastFocusedSide=void 0;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(i=>this.onConfigurationUpdated(i)))}onConfigurationUpdated(i){i.affectsConfiguration(Bl.SIDE_BY_SIDE_LAYOUT_SETTING)&&(this.orientation=this.configurationService.getValue(Bl.SIDE_BY_SIDE_LAYOUT_SETTING)==="vertical"?ke.VERTICAL:ke.HORIZONTAL,this.splitview&&this.recreateSplitview())}recreateSplitview(){const i=pt(this.getContainer()),e=this.getSplitViewRatio();this.splitview&&(this.splitview.el.remove(),this.splitviewDisposables.clear()),this.createSplitView(i,e),this.layout(this.dimension)}getSplitViewRatio(){let i;if(this.splitview){const e=this.splitview.getViewSize(0),t=this.splitview.getViewSize(1);if(Math.abs(e-t)>1){const n=this.splitview.orientation===ke.HORIZONTAL?this.dimension.width:this.dimension.height;i=e/n}}return i}createEditor(i){i.classList.add("side-by-side-editor"),this.secondaryEditorContainer=ce(".side-by-side-editor-container.editor-instance"),this.primaryEditorContainer=ce(".side-by-side-editor-container.editor-instance"),this.createSplitView(i)}createSplitView(i,e){this.splitview=this.splitviewDisposables.add(new sy(i,{orientation:this.orientation})),this.splitviewDisposables.add(this.splitview.onDidSashReset(()=>this.splitview?.distributeViewSizes())),this.orientation===ke.HORIZONTAL?this.splitview.orthogonalEndSash=this._boundarySashes?.bottom:(this.splitview.orthogonalStartSash=this._boundarySashes?.left,this.splitview.orthogonalEndSash=this._boundarySashes?.right);let t=Ea.Distribute,n=Ea.Distribute;if(e){const r=this.splitview.orientation===ke.HORIZONTAL?this.dimension.width:this.dimension.height;t=Math.round(r*e),n=r-t,this.splitview.layout(this.orientation===ke.HORIZONTAL?this.dimension.width:this.dimension.height)}const s=pt(this.secondaryEditorContainer);this.splitview.addView({element:s,layout:L0(r=>this.layoutPane(this.secondaryEditorPane,r),"layout"),minimumSize:this.orientation===ke.HORIZONTAL?Iw.width:Iw.height,maximumSize:Number.POSITIVE_INFINITY,onDidChange:H.None},t);const o=pt(this.primaryEditorContainer);this.splitview.addView({element:o,layout:L0(r=>this.layoutPane(this.primaryEditorPane,r),"layout"),minimumSize:this.orientation===ke.HORIZONTAL?Iw.width:Iw.height,maximumSize:Number.POSITIVE_INFINITY,onDidChange:H.None},n),this.updateStyles()}getTitle(){return this.input?this.input.getName():g("sideBySideEditor","Side by Side Editor")}async setInput(i,e,t,n){const s=this.input;await super.setInput(i,e,t,n),(!s||!i.matches(s))&&(s&&this.disposeEditors(),this.createEditors(i));const{primary:o,secondary:r,viewState:a}=this.loadViewState(i,e,t);if(this.lastFocusedSide=a?.focus,typeof a?.ratio=="number"&&this.splitview){const l=this.splitview.orientation===ke.HORIZONTAL?this.dimension.width:this.dimension.height;this.splitview.resizeView(0,Math.round(l*a.ratio))}else this.splitview?.distributeViewSizes();await Promise.all([this.secondaryEditorPane?.setInput(i.secondary,r,t,n),this.primaryEditorPane?.setInput(i.primary,o,t,n)]),typeof e?.target=="number"&&(this.lastFocusedSide=e.target)}loadViewState(i,e,t){const n=tre(e?.viewState)?e?.viewState:this.loadEditorViewState(i,t);let s=Object.create(null),o;return e?.target===Is.SECONDARY?o={...e}:s={...e},s.viewState=n?.primary,n?.secondary&&(o?o.viewState=n?.secondary:o={viewState:n.secondary}),{primary:s,secondary:o,viewState:n}}createEditors(i){this.secondaryEditorPane=this.doCreateEditor(i.secondary,pt(this.secondaryEditorContainer)),this.primaryEditorPane=this.doCreateEditor(i.primary,pt(this.primaryEditorContainer)),this.layout(this.dimension),this._onDidChangeSizeConstraints.input=H.any(H.map(this.secondaryEditorPane.onDidChangeSizeConstraints,()=>{}),H.map(this.primaryEditorPane.onDidChangeSizeConstraints,()=>{})),this.onDidCreateEditors.fire(void 0),this.editorDisposables.add(this.primaryEditorPane.onDidFocus(()=>this.onDidFocusChange(Is.PRIMARY))),this.editorDisposables.add(this.secondaryEditorPane.onDidFocus(()=>this.onDidFocusChange(Is.SECONDARY)))}doCreateEditor(i,e){const t=Xt.as(jp.EditorPane).getEditorPane(i);if(!t)throw new Error("No editor pane descriptor for editor found");const n=t.instantiate(this.instantiationService,this.group);return n.create(e),n.setVisible(this.isVisible()),kF(n)&&this.editorDisposables.add(n.onDidChangeSelection(s=>this._onDidChangeSelection.fire(s))),this.editorDisposables.add(n),n}onDidFocusChange(i){this.lastFocusedSide=i,this._onDidChangeControl.fire()}getSelection(){const i=this.getLastFocusedEditorPane();if(kF(i)){const e=i.getSelection();if(e)return new F2(e,i===this.primaryEditorPane?Is.PRIMARY:Is.SECONDARY)}}setOptions(i){super.setOptions(i),typeof i?.target=="number"&&(this.lastFocusedSide=i.target),this.getLastFocusedEditorPane()?.setOptions(i)}setEditorVisible(i){this.primaryEditorPane?.setVisible(i),this.secondaryEditorPane?.setVisible(i),super.setEditorVisible(i)}clearInput(){super.clearInput(),this.primaryEditorPane?.clearInput(),this.secondaryEditorPane?.clearInput(),this.disposeEditors()}focus(){super.focus(),this.getLastFocusedEditorPane()?.focus()}getLastFocusedEditorPane(){return this.lastFocusedSide===Is.SECONDARY?this.secondaryEditorPane:this.primaryEditorPane}layout(i){this.dimension=i,pt(this.splitview).layout(this.orientation===ke.HORIZONTAL?i.width:i.height)}setBoundarySashes(i){this._boundarySashes=i,this.splitview&&(this.splitview.orthogonalEndSash=i.bottom)}layoutPane(i,e){i?.layout(this.orientation===ke.HORIZONTAL?new Lt(e,this.dimension.height):new Lt(this.dimension.width,e))}getControl(){return this.getLastFocusedEditorPane()?.getControl()}getPrimaryEditorPane(){return this.primaryEditorPane}getSecondaryEditorPane(){return this.secondaryEditorPane}tracksEditorViewState(i){return i instanceof zo}computeEditorViewState(i){if(!this.input||!Ta(i,this.toEditorViewStateResource(this.input)))return;const e=this.primaryEditorPane?.getViewState(),t=this.secondaryEditorPane?.getViewState();if(!(!e||!t))return{primary:e,secondary:t,focus:this.lastFocusedSide,ratio:this.getSplitViewRatio()}}toEditorViewStateResource(i){let e,t;if(i instanceof zo&&(e=i.primary.resource,t=i.secondary.resource),!(!t||!e))return ne.from({scheme:"sideBySide",path:`${sE(t.toString())}${sE(e.toString())}`})}updateStyles(){super.updateStyles(),this.primaryEditorContainer&&(this.orientation===ke.HORIZONTAL?(this.primaryEditorContainer.style.borderLeftWidth="1px",this.primaryEditorContainer.style.borderLeftStyle="solid",this.primaryEditorContainer.style.borderLeftColor=this.getColor(gme)??"",this.primaryEditorContainer.style.borderTopWidth="0"):(this.primaryEditorContainer.style.borderTopWidth="1px",this.primaryEditorContainer.style.borderTopStyle="solid",this.primaryEditorContainer.style.borderTopColor=this.getColor(ume)??"",this.primaryEditorContainer.style.borderLeftWidth="0"))}dispose(){this.disposeEditors(),super.dispose()}disposeEditors(){this.editorDisposables.clear(),this.secondaryEditorPane=void 0,this.primaryEditorPane=void 0,this.lastFocusedSide=void 0,this.secondaryEditorContainer&&Mn(this.secondaryEditorContainer),this.primaryEditorContainer&&Mn(this.primaryEditorContainer)}};Bl=rWe([kf(1,rs),kf(2,He),kf(3,$t),kf(4,Si),kf(5,Pe),kf(6,Xg),kf(7,nt),kf(8,Ge)],Bl);class F2{constructor(e,t){this.selection=e,this.side=t}static{L0(this,"SideBySideAwareEditorPaneSelection")}compare(e){return!(e instanceof F2)||this.side!==e.side?N_.DIFFERENT:this.selection.compare(e.selection)}restore(e){const t={...e,target:this.side};return this.selection.restore(t)}}var ire=Object.defineProperty,aWe=Object.getOwnPropertyDescriptor,nre=(i,e)=>ire(i,"name",{value:e,configurable:!0}),lWe=(i,e,t,n)=>{for(var s=n>1?void 0:n?aWe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&ire(e,t,s),s},Nf=(i,e)=>(t,n)=>e(t,n,i);let Wk=class extends Vk{constructor(i,e,t,n,s,o,r,a,l,c){super(i,e,Wk.VIEW_STATE_PREFERENCE_KEY,t,n,s,o,r,a,l),this.fileService=c,this._register(this.textResourceConfigurationService.onDidChangeConfiguration(d=>this.handleConfigurationChangeEvent(d))),this._register(H.any(this.editorGroupService.onDidAddGroup,this.editorGroupService.onDidRemoveGroup)(()=>{const d=this.computeAriaLabel();this.editorContainer?.setAttribute("aria-label",d),this.updateEditorControlOptions({ariaLabel:d})})),this._register(this.fileService.onDidChangeFileSystemProviderCapabilities(d=>this.onDidChangeFileSystemProvider(d.scheme))),this._register(this.fileService.onDidChangeFileSystemProviderRegistrations(d=>this.onDidChangeFileSystemProvider(d.scheme)))}static{nre(this,"AbstractTextEditor")}static VIEW_STATE_PREFERENCE_KEY="textEditorViewState";_onDidChangeSelection=this._register(new x);onDidChangeSelection=this._onDidChangeSelection.event;_onDidChangeScroll=this._register(new x);onDidChangeScroll=this._onDidChangeScroll.event;editorContainer;hasPendingConfigurationChange;lastAppliedEditorOptions;inputListener=this._register(new Yi);handleConfigurationChangeEvent(i){const e=this.getActiveResource();this.shouldHandleConfigurationChangeEvent(i,e)&&(this.isVisible()?this.updateEditorConfiguration(e):this.hasPendingConfigurationChange=!0)}shouldHandleConfigurationChangeEvent(i,e){return i.affectsConfiguration(e,"editor")||i.affectsConfiguration(e,"problems.visibility")}consumePendingConfigurationChangeEvent(){this.hasPendingConfigurationChange&&(this.updateEditorConfiguration(),this.hasPendingConfigurationChange=!1)}computeConfiguration(i){const e=On(i.editor)?tS(i.editor):Object.create(null);return Object.assign(e,this.getConfigurationOverrides(i)),e.ariaLabel=this.computeAriaLabel(),e}computeAriaLabel(){return this.input?B2(this.input,void 0,this.group,this.editorGroupService.count):g("editor","Editor")}onDidChangeFileSystemProvider(i){this.input&&this.getActiveResource()?.scheme===i&&this.updateReadonly(this.input)}onDidChangeInputCapabilities(i){this.input===i&&this.updateReadonly(i)}updateReadonly(i){this.updateEditorControlOptions({...this.getReadonlyConfiguration(i.isReadonly())})}getReadonlyConfiguration(i){return{readOnly:!!i,readOnlyMessage:typeof i!="boolean"?i:void 0}}getConfigurationOverrides(i){return{overviewRulerLanes:3,lineNumbersMinChars:3,fixedOverflowWidgets:!0,...this.getReadonlyConfiguration(this.input?.isReadonly()),renderValidationDecorations:i.problems?.visibility!==!1?"on":"off"}}createEditor(i){this.editorContainer=i,this.createEditorControl(i,this.computeConfiguration(this.textResourceConfigurationService.getValue(this.getActiveResource()))),this.registerCodeEditorListeners()}registerCodeEditorListeners(){const i=this.getMainControl();i&&(this._register(i.onDidChangeModelLanguage(()=>this.updateEditorConfiguration())),this._register(i.onDidChangeModel(()=>this.updateEditorConfiguration())),this._register(i.onDidChangeCursorPosition(e=>this._onDidChangeSelection.fire({reason:this.toEditorPaneSelectionChangeReason(e)}))),this._register(i.onDidChangeModelContent(()=>this._onDidChangeSelection.fire({reason:nw.EDIT}))),this._register(i.onDidScrollChange(()=>this._onDidChangeScroll.fire())))}toEditorPaneSelectionChangeReason(i){switch(i.source){case Z1.PROGRAMMATIC:return nw.PROGRAMMATIC;case Z1.NAVIGATION:return nw.NAVIGATION;case Z1.JUMP:return nw.JUMP;default:return nw.USER}}getSelection(){const i=this.getMainControl();if(i){const e=i.getSelection();if(e)return new Hk(e)}}async setInput(i,e,t,n){await super.setInput(i,e,t,n),this.inputListener.value=i.onDidChangeCapabilities(()=>this.onDidChangeInputCapabilities(i)),this.updateEditorConfiguration(),pt(this.editorContainer).setAttribute("aria-label",this.computeAriaLabel())}clearInput(){this.inputListener.clear(),super.clearInput()}getScrollPosition(){const i=this.getMainControl();if(!i)throw new Error("Control has not yet been initialized");return{scrollTop:i.getScrollTop()-i.getTopForLineNumber(1),scrollLeft:i.getScrollLeft()}}setScrollPosition(i){const e=this.getMainControl();if(!e)throw new Error("Control has not yet been initialized");e.setScrollTop(i.scrollTop),i.scrollLeft&&e.setScrollLeft(i.scrollLeft)}setEditorVisible(i){i&&this.consumePendingConfigurationChangeEvent(),super.setEditorVisible(i)}toEditorViewStateResource(i){return i.resource}updateEditorConfiguration(i=this.getActiveResource()){let e;if(i&&(e=this.textResourceConfigurationService.getValue(i)),!e)return;const t=this.computeConfiguration(e);let n=t;this.lastAppliedEditorOptions&&(n=yY(this.lastAppliedEditorOptions,n)),Object.keys(n).length>0&&(this.lastAppliedEditorOptions=t,this.updateEditorControlOptions(n))}getActiveResource(){const i=this.getMainControl();if(i){const e=i.getModel();if(e)return e.uri}if(this.input)return this.input.resource}dispose(){this.lastAppliedEditorOptions=void 0,super.dispose()}};Wk=lWe([Nf(2,rs),Nf(3,He),Nf(4,Si),Nf(5,Xg),Nf(6,$t),Nf(7,nt),Nf(8,Ge),Nf(9,la)],Wk);class Hk{constructor(e){this.textSelection=e}static{nre(this,"TextEditorPaneSelection")}static TEXT_EDITOR_SELECTION_THRESHOLD=10;compare(e){if(!(e instanceof Hk))return N_.DIFFERENT;const t=Math.min(this.textSelection.selectionStartLineNumber,this.textSelection.positionLineNumber),n=Math.min(e.textSelection.selectionStartLineNumber,e.textSelection.positionLineNumber);return t===n?N_.IDENTICAL:Math.abs(t-n)<Hk.TEXT_EDITOR_SELECTION_THRESHOLD?N_.SIMILAR:N_.DIFFERENT}restore(e){return{...e,selection:this.textSelection,selectionRevealType:Y1.CenterIfOutsideViewport}}log(){return`line: ${this.textSelection.startLineNumber}-${this.textSelection.endLineNumber}, col:  ${this.textSelection.startColumn}-${this.textSelection.endColumn}`}}var cWe=Object.defineProperty,sre=(i,e)=>cWe(i,"name",{value:e,configurable:!0});function _4(i,e,t){let n=!1;const s=ore(i);if(MP(s)&&(e.restoreViewState(s),n=!0),i.selection){const o={startLineNumber:i.selection.startLineNumber,startColumn:i.selection.startColumn,endLineNumber:i.selection.endLineNumber??i.selection.startLineNumber,endColumn:i.selection.endColumn??i.selection.startColumn};e.setSelection(o,i.selectionSource??Z1.NAVIGATION),i.selectionRevealType===Y1.NearTop?e.revealRangeNearTop(o,t):i.selectionRevealType===Y1.NearTopIfOutsideViewport?e.revealRangeNearTopIfOutsideViewport(o,t):i.selectionRevealType===Y1.CenterIfOutsideViewport?e.revealRangeInCenterIfOutsideViewport(o,t):e.revealRangeInCenter(o,t),n=!0}return n}sre(_4,"applyTextEditorOptions");function ore(i){if(!i.selection||!i.viewState)return i.viewState;const e=i.viewState;if(e.modified)return e.modified.cursorState=[],e;const t=i.viewState;return t.cursorState&&(t.cursorState=[]),t}sre(ore,"massageEditorViewState");var dWe=Object.defineProperty,hWe=(i,e)=>dWe(i,"name",{value:e,configurable:!0});class rre extends n6{static{hWe(this,"DiffEditorModel")}_originalModel;get originalModel(){return this._originalModel}_modifiedModel;get modifiedModel(){return this._modifiedModel}constructor(e,t){super(),this._originalModel=e,this._modifiedModel=t}async resolve(){await Promise.all([this._originalModel?.resolve(),this._modifiedModel?.resolve()])}isResolved(){return!!(this._originalModel?.isResolved()&&this._modifiedModel?.isResolved())}dispose(){super.dispose()}}var uWe=Object.defineProperty,gWe=(i,e)=>uWe(i,"name",{value:e,configurable:!0});class are extends rre{static{gWe(this,"TextDiffEditorModel")}_originalModel;get originalModel(){return this._originalModel}_modifiedModel;get modifiedModel(){return this._modifiedModel}_textDiffEditorModel=void 0;get textDiffEditorModel(){return this._textDiffEditorModel}constructor(e,t){super(e,t),this._originalModel=e,this._modifiedModel=t,this.updateTextDiffEditorModel()}async resolve(){await super.resolve(),this.updateTextDiffEditorModel()}updateTextDiffEditorModel(){this.originalModel?.isResolved()&&this.modifiedModel?.isResolved()&&(this._textDiffEditorModel?(this._textDiffEditorModel.original=this.originalModel.textEditorModel,this._textDiffEditorModel.modified=this.modifiedModel.textEditorModel):this._textDiffEditorModel={original:this.originalModel.textEditorModel,modified:this.modifiedModel.textEditorModel})}isResolved(){return!!this._textDiffEditorModel}isReadonly(){return!!this.modifiedModel&&this.modifiedModel.isReadonly()}dispose(){this._textDiffEditorModel=void 0,super.dispose()}}var lre=Object.defineProperty,fWe=Object.getOwnPropertyDescriptor,cre=(i,e)=>lre(i,"name",{value:e,configurable:!0}),pWe=(i,e,t,n)=>{for(var s=n>1?void 0:n?fWe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&lre(e,t,s),s},mWe=(i,e)=>(t,n)=>e(t,n,i);let qa=class extends zo{constructor(i,e,t,n,s,o){super(i,e,t,n,o),this.original=t,this.modified=n,this.forceOpenAsBinary=s}static{cre(this,"DiffEditorInput")}static ID="workbench.editors.diffEditorInput";get typeId(){return qa.ID}get editorId(){return this.modified.editorId===this.original.editorId?this.modified.editorId:void 0}get capabilities(){let i=super.capabilities;return this.labels.forceDescription&&(i|=Wo.ForceDescription),i}cachedModel=void 0;labels=this.computeLabels();computeLabels(){let i,e=!1;if(this.preferredName)i=this.preferredName;else{const c=this.original.getName(),d=this.modified.getName();i=g("sideBySideLabels","{0}  {1}",c,d),e=c===d}let t,n,s;if(this.preferredDescription)t=this.preferredDescription,n=this.preferredDescription,s=this.preferredDescription;else{t=this.computeLabel(this.original.getDescription(Ii.SHORT),this.modified.getDescription(Ii.SHORT)),s=this.computeLabel(this.original.getDescription(Ii.LONG),this.modified.getDescription(Ii.LONG));const c=this.original.getDescription(Ii.MEDIUM),d=this.modified.getDescription(Ii.MEDIUM);if(typeof c=="string"&&typeof d=="string"&&(c||d)){const[h,u]=L6([c,d]);n=this.computeLabel(h,u)}}let o=this.computeLabel(this.original.getTitle(Ii.SHORT)??this.original.getName(),this.modified.getTitle(Ii.SHORT)??this.modified.getName(),"  "),r=this.computeLabel(this.original.getTitle(Ii.MEDIUM)??this.original.getName(),this.modified.getTitle(Ii.MEDIUM)??this.modified.getName(),"  "),a=this.computeLabel(this.original.getTitle(Ii.LONG)??this.original.getName(),this.modified.getTitle(Ii.LONG)??this.modified.getName(),"  ");const l=this.getPreferredTitle();return l&&(o=`${l} (${o})`,r=`${l} (${r})`,a=`${l} (${a})`),{name:i,shortDescription:t,mediumDescription:n,longDescription:s,forceDescription:e,shortTitle:o,mediumTitle:r,longTitle:a}}computeLabel(i,e,t=" - "){if(!(!i||!e))return i===e?e:`${i}${t}${e}`}getName(){return this.labels.name}getDescription(i=Ii.MEDIUM){switch(i){case Ii.SHORT:return this.labels.shortDescription;case Ii.LONG:return this.labels.longDescription;case Ii.MEDIUM:default:return this.labels.mediumDescription}}getTitle(i){switch(i){case Ii.SHORT:return this.labels.shortTitle;case Ii.LONG:return this.labels.longTitle;default:case Ii.MEDIUM:return this.labels.mediumTitle}}async resolve(){const i=await this.createModel();return this.cachedModel?.dispose(),this.cachedModel=i,this.cachedModel}prefersEditorPane(i){return this.forceOpenAsBinary?i.find(e=>e.typeId===oIe):i.find(e=>e.typeId===TJ)}async createModel(){const[i,e]=await Promise.all([this.original.resolve(),this.modified.resolve()]);return e instanceof ZC&&i instanceof ZC?new are(i,e):new rre(jB(i)?i:void 0,jB(e)?e:void 0)}toUntyped(i){const e=super.toUntyped(i);if(e)return{...e,modified:e.primary,original:e.secondary}}matches(i){return this===i?!0:i instanceof qa?this.modified.matches(i.modified)&&this.original.matches(i.original)&&i.forceOpenAsBinary===this.forceOpenAsBinary:Bd(i)?this.modified.matches(i.modified)&&this.original.matches(i.original):!1}dispose(){this.cachedModel&&(this.cachedModel.dispose(),this.cachedModel=void 0),super.dispose()}};qa=pWe([mWe(5,nt)],qa);class RGe extends AQ{static{cre(this,"DiffEditorInputSerializer")}createEditorInput(e,t,n,s,o){return e.createInstance(qa,t,n,s,o,void 0)}}var _We=Object.defineProperty,xR=(i,e)=>_We(i,"name",{value:e,configurable:!0});function dre(){return!0}xR(dre,"hotReloadDisabled");function bWe(){return!dre()}xR(bWe,"isHotReloadEnabled");function vWe(i){return{dispose(){}}}xR(vWe,"registerHotReloadHandler");function wWe(){UI||(UI=new Set);const i=globalThis;return i.$hotReload_applyNewExports||(i.$hotReload_applyNewExports=e=>{const t={config:{mode:void 0},...e},n=[];for(const s of UI){const o=s(t);o&&n.push(o)}if(n.length>0)return s=>{let o=!1;for(const r of n)r(s)&&(o=!0);return o}}),UI}xR(wWe,"registerGlobalHotReloadHandler");let UI;var CWe=Object.defineProperty,hre=(i,e)=>CWe(i,"name",{value:e,configurable:!0});function $u(i,e){return i}hre($u,"readHotReloadableExport");function yWe(i,e){}hre(yWe,"observeHotReloadableExports");var SWe=Object.defineProperty,ure=(i,e)=>SWe(i,"name",{value:e,configurable:!0});class Uk{constructor(e,t,n,s,o){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=n,this._visiblePositionScrollDelta=s,this._cursorPosition=o}static{ure(this,"StableEditorScrollState")}static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new Uk(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,n=0;const s=e.getVisibleRanges();if(s.length>0){t=s[0].getStartPosition();const o=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-o}return new Uk(e.getScrollTop(),e.getContentHeight(),t,n,e.getPosition())}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n,ot.Immediate)}}class b4{constructor(e,t,n,s){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=n,this._visiblePositionScrollDelta=s}static{ure(this,"StableEditorBottomScrollState")}static capture(e){if(e.hasPendingScrollAnimation())return new b4(e.getScrollTop(),e.getContentHeight(),null,0);let t=null,n=0;const s=e.getVisibleRanges();return s.length>0&&(t=s.at(-1).getEndPosition(),n=e.getBottomForLineNumber(t.lineNumber)-e.getScrollTop()),new b4(e.getScrollTop(),e.getContentHeight(),t,n)}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getBottomForLineNumber(this._visiblePosition.lineNumber);e.setScrollTop(t-this._visiblePositionScrollDelta,ot.Immediate)}}}const EWe=De("markerDecorationsService");var gre=Object.defineProperty,LWe=Object.getOwnPropertyDescriptor,DWe=(i,e)=>gre(i,"name",{value:e,configurable:!0}),IWe=(i,e,t,n)=>{for(var s=n>1?void 0:n?LWe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&gre(e,t,s),s},TWe=(i,e)=>(t,n)=>e(t,n,i);let zk=class{static{DWe(this,"MarkerDecorationsContribution")}static ID="editor.contrib.markerDecorations";constructor(i,e){}dispose(){}};zk=IWe([TWe(1,EWe)],zk);Kse(zk.ID,zk,vl.Eager);var AWe=Object.defineProperty,Fr=(i,e)=>AWe(i,"name",{value:e,configurable:!0}),Ip;(i=>{const e={total:0,min:Number.MAX_VALUE,max:0},t={...e},n={...e},s={...e};let o=0,r;(I=>{I[I.Before=0]="Before",I[I.InProgress=1]="InProgress",I[I.Finished=2]="Finished"})(r||(r={}));const a={keydown:0,input:0,render:0};function l(){v(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),a.keydown=1,queueMicrotask(c)}i.onKeyDown=l,Fr(l,"onKeyDown");function c(){a.keydown===1&&(performance.mark("keydown/end"),a.keydown=2)}Fr(c,"markKeyDownEnd");function d(){performance.mark("input/start"),a.input=1,w()}i.onBeforeInput=d,Fr(d,"onBeforeInput");function h(){a.input===0&&d(),queueMicrotask(u)}i.onInput=h,Fr(h,"onInput");function u(){a.input===1&&(performance.mark("input/end"),a.input=2)}Fr(u,"markInputEnd");function f(){v()}i.onKeyUp=f,Fr(f,"onKeyUp");function p(){v()}i.onSelectionChange=p,Fr(p,"onSelectionChange");function m(){a.keydown===2&&a.input===2&&a.render===0&&(performance.mark("render/start"),a.render=1,queueMicrotask(_),w())}i.onRenderStart=m,Fr(m,"onRenderStart");function _(){a.render===1&&(performance.mark("render/end"),a.render=2)}Fr(_,"markRenderEnd");function w(){setTimeout(v)}Fr(w,"scheduleRecordIfFinishedTask");function v(){a.keydown===2&&a.input===2&&a.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),b("keydown",e),b("input",t),b("render",n),b("inputlatency",s),o++,C())}Fr(v,"recordIfFinished");function b(I,R){const G=performance.getEntriesByName(I)[0].duration;R.total+=G,R.min=Math.min(R.min,G),R.max=Math.max(R.max,G)}Fr(b,"addMeasure");function C(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),a.keydown=0,a.input=0,a.render=0}Fr(C,"reset");function S(){if(o===0)return;const I={keydown:D(e),input:D(t),render:D(n),total:D(s),sampleCount:o};return T(e),T(t),T(n),T(s),o=0,I}i.getAndClearMeasurements=S,Fr(S,"getAndClearMeasurements");function D(I){return{average:I.total/o,max:I.max,min:I.min}}Fr(D,"cumulativeToFinalMeasurement");function T(I){I.total=0,I.min=Number.MAX_VALUE,I.max=0}Fr(T,"clearCumulativeMeasurement")})(Ip||(Ip={}));var xWe=Object.defineProperty,dl=(i,e)=>xWe(i,"name",{value:e,configurable:!0});class kR{constructor(e,t){this.x=e,this.y=t}static{dl(this,"PageCoordinates")}_pageCoordinatesBrand=void 0;toClientCoordinates(e){return new fre(this.x-e.scrollX,this.y-e.scrollY)}}class fre{constructor(e,t){this.clientX=e,this.clientY=t}static{dl(this,"ClientCoordinates")}_clientCoordinatesBrand=void 0;toPageCoordinates(e){return new kR(this.clientX+e.scrollX,this.clientY+e.scrollY)}}class kWe{constructor(e,t,n,s){this.x=e,this.y=t,this.width=n,this.height=s}static{dl(this,"EditorPagePosition")}_editorPagePositionBrand=void 0}class NWe{constructor(e,t){this.x=e,this.y=t}static{dl(this,"CoordinatesRelativeToEditor")}_positionRelativeToEditorBrand=void 0}function NR(i){const e=Xr(i);return new kWe(e.left,e.top,e.width,e.height)}dl(NR,"createEditorPagePosition");function PR(i,e,t){const n=e.width/i.offsetWidth,s=e.height/i.offsetHeight,o=(t.x-e.x)/n,r=(t.y-e.y)/s;return new NWe(o,r)}dl(PR,"createCoordinatesRelativeToEditor");class Jp extends $n{static{dl(this,"EditorMouseEvent")}_editorMouseEventBrand=void 0;isFromPointerCapture;pos;editorPos;relativePos;constructor(e,t,n){super(ve(n),e),this.isFromPointerCapture=t,this.pos=new kR(this.posx,this.posy),this.editorPos=NR(n),this.relativePos=PR(n,this.editorPos,this.pos)}}class PWe{static{dl(this,"EditorMouseEventFactory")}_editorViewDomNode;constructor(e){this._editorViewDomNode=e}_create(e){return new Jp(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return F(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return F(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return F(e,Q.MOUSE_DOWN,n=>{t(this._create(n))})}onPointerDown(e,t){return F(e,Q.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onMouseLeave(e,t){return F(e,Q.MOUSE_LEAVE,n=>{t(this._create(n))})}onMouseMove(e,t){return F(e,"mousemove",n=>t(this._create(n)))}}class RWe{static{dl(this,"EditorPointerEventFactory")}_editorViewDomNode;constructor(e){this._editorViewDomNode=e}_create(e){return new Jp(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return F(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return F(e,Q.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onPointerLeave(e,t){return F(e,Q.POINTER_LEAVE,n=>{t(this._create(n))})}onPointerMove(e,t){return F(e,"pointermove",n=>t(this._create(n)))}}class OWe extends ${static{dl(this,"GlobalEditorPointerMoveMonitor")}_editorViewDomNode;_globalPointerMoveMonitor;_keydownListener;constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new HP),this._keydownListener=null}startMonitoring(e,t,n,s,o){this._keydownListener=Gs(e.ownerDocument,"keydown",r=>{r.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,r.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,n,r=>{s(new Jp(r,!0,this._editorViewDomNode))},r=>{this._keydownListener.dispose(),o(r)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class pre{constructor(e){this._editor=e}static{dl(this,"DynamicCssRules")}static _idPool=0;_instanceId=++pre._idPool;_counter=0;_rules=new Map;_garbageCollectionScheduler=new xn(()=>this.garbageCollect(),1e3);createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:dl(()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()},"dispose")}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let n=this._rules.get(t);if(!n){const s=this._counter++;n=new MWe(t,`dyn-rule-${this._instanceId}-${s}`,XA(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}}class MWe{constructor(e,t,n,s){this.key=e,this.className=t,this.properties=s,this._styleElementDisposables=new te,this._styleElement=ic(n,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}static{dl(this,"RefCountedCssRule")}_referenceCount=0;_styleElement;_styleElementDisposables;getCssText(e,t){let n=`.${e} {`;for(const s in t){const o=t[s];let r;typeof o=="object"?r=be(o.id):r=o;const a=mre(s);n+=`
	${a}: ${r};`}return n+=`
}`,n}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function mre(i){return i.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}dl(mre,"camelToDashes");var BWe=Object.defineProperty,FWe=(i,e)=>BWe(i,"name",{value:e,configurable:!0});class VWe{static{FWe(this,"ViewportData")}selections;startLineNumber;endLineNumber;relativeVerticalOffset;visibleRange;bigNumbersDelta;whitespaceViewportData;_model;lineHeight;constructor(e,t,n,s){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.lineHeight=t.lineHeight|0,this.whitespaceViewportData=n,this._model=s,this.visibleRange=new V(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}var WWe=Object.defineProperty,Nv=(i,e)=>WWe(i,"name",{value:e,configurable:!0});class HWe{static{Nv(this,"RestrictedRenderingContext")}_restrictedRenderingContextBrand=void 0;viewportData;scrollWidth;scrollHeight;visibleRange;bigNumbersDelta;scrollTop;scrollLeft;viewportWidth;viewportHeight;_viewLayout;constructor(e,t){this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class UWe extends HWe{static{Nv(this,"RenderingContext")}_renderingContextBrand=void 0;_viewLines;constructor(e,t,n){super(e,t),this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class zWe{constructor(e,t,n,s){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n,this.continuesOnNextLine=s}static{Nv(this,"LineVisibleRanges")}static firstLine(e){if(!e)return null;let t=null;for(const n of e)(!t||n.lineNumber<t.lineNumber)&&(t=n);return t}static lastLine(e){if(!e)return null;let t=null;for(const n of e)(!t||n.lineNumber>t.lineNumber)&&(t=n);return t}}class RR{static{Nv(this,"HorizontalRange")}_horizontalRangeBrand=void 0;left;width;static from(e){const t=new Array(e.length);for(let n=0,s=e.length;n<s;n++){const o=e[n];t[n]=new RR(o.left,o.width)}return t}constructor(e,t){this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class fb{static{Nv(this,"FloatHorizontalRange")}_floatHorizontalRangeBrand=void 0;left;width;constructor(e,t){this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class $We{static{Nv(this,"HorizontalPosition")}outsideRenderedLine;left;originalLeft;constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class Nz{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}static{Nv(this,"VisibleRanges")}}var GWe=Object.defineProperty,KWe=(i,e)=>GWe(i,"name",{value:e,configurable:!0});class jWe{static{KWe(this,"ViewContext")}configuration;viewModel;viewLayout;theme;constructor(e,t,n){this.configuration=e,this.theme=new iFe(t),this.viewModel=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}var qWe=Object.defineProperty,_re=(i,e)=>qWe(i,"name",{value:e,configurable:!0});class ha extends AD{static{_re(this,"ViewPart")}_context;constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}var Hn=(i=>(i[i.None=0]="None",i[i.ContentWidgets=1]="ContentWidgets",i[i.OverflowingContentWidgets=2]="OverflowingContentWidgets",i[i.OverflowGuard=3]="OverflowGuard",i[i.OverlayWidgets=4]="OverlayWidgets",i[i.OverflowingOverlayWidgets=5]="OverflowingOverlayWidgets",i[i.ScrollableElement=6]="ScrollableElement",i[i.TextArea=7]="TextArea",i[i.ViewLines=8]="ViewLines",i[i.Minimap=9]="Minimap",i))(Hn||{});class oh{static{_re(this,"PartFingerprints")}static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const n=[];let s=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[s++]=this.read(e)),e=e.parentElement;const o=new Uint8Array(s);for(let r=0;r<s;r++)o[r]=n[s-r-1];return o}}var YWe=Object.defineProperty,ZWe=(i,e)=>YWe(i,"name",{value:e,configurable:!0});function OD(i,e){const t=globalThis.MonacoEnvironment;if(t?.createTrustedTypesPolicy)try{return t.createTrustedTypesPolicy(i,e)}catch(n){Kt(n);return}try{return globalThis.trustedTypes?.createPolicy(i,e)}catch(n){Kt(n);return}}ZWe(OD,"createTrustedTypesPolicy");var XWe=Object.defineProperty,$k=(i,e)=>XWe(i,"name",{value:e,configurable:!0});class bre{constructor(e){this._lineFactory=e,this._set(1,[])}static{$k(this,"RenderedLinesCollection")}_lines;_rendLineNumberStart;flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Et("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),s=this.getEndLineNumber();if(t<n){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>s)return null;let o=0,r=0;for(let l=n;l<=s;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(r===0?(o=c,r=1):r++)}if(e<n){let l=0;t<n?l=t-e+1:l=n-e,this._rendLineNumberStart-=l}return this._lines.splice(o,r)}onLinesChanged(e,t){const n=e+t-1;if(this.getCount()===0)return!1;const s=this.getStartLineNumber(),o=this.getEndLineNumber();let r=!1;for(let a=e;a<=n;a++)a>=s&&a<=o&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,s=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=s)return this._rendLineNumberStart+=n,null;if(e>o)return null;if(n+e>o)return this._lines.splice(e-this._rendLineNumberStart,o-e+1);const r=[];for(let h=0;h<n;h++)r[h]=this._lineFactory.createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-n),d=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(r).concat(c),d}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let s=!1;for(let o=0,r=e.length;o<r;o++){const a=e[o];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(n,a.toLineNumber);for(let d=l;d<=c;d++){const h=d-this._rendLineNumberStart;this._lines[h].onTokensChanged(),s=!0}}return s}}class vre{constructor(e){this._lineFactory=e}static{$k(this,"VisibleLinesCollection")}domNode=this._createDomNode();_linesCollection=new bre(this._lineFactory);_createDomNode(){const e=Ut(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(k.layoutInfo)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,s=t.length;n<s;n++)t[n].getDomNode()?.remove();return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,s=t.length;n<s;n++)t[n].getDomNode()?.remove();return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new v_(this.domNode.domNode,this._lineFactory,e),s={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},o=n.render(s,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}}class v_{constructor(e,t,n){this._domNode=e,this._lineFactory=t,this._viewportData=n}static{$k(this,"ViewLayerRenderer")}static _ttPolicy=OD("editorViewLayer",{createHTML:$k(e=>e,"createHTML")});render(e,t,n,s){const o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<t||n<o.rendLineNumberStart){o.rendLineNumberStart=t,o.linesLength=n-t+1,o.lines=[];for(let r=t;r<=n;r++)o.lines[r-t]=this._lineFactory.createLine();return this._finishRendering(o,!0,s),o}if(this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(n-o.rendLineNumberStart,o.linesLength-1),s,t),o.rendLineNumberStart>t){const r=t,a=Math.min(n,o.rendLineNumberStart-1);r<=a&&(this._insertLinesBefore(o,r,a,s,t),o.linesLength+=a-r+1)}else if(o.rendLineNumberStart<t){const r=Math.min(o.linesLength,t-o.rendLineNumberStart);r>0&&(this._removeLinesBefore(o,r),o.linesLength-=r)}if(o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<n){const r=o.rendLineNumberStart+o.linesLength,a=n;r<=a&&(this._insertLinesAfter(o,r,a,s,t),o.linesLength+=a-r+1)}else if(o.rendLineNumberStart+o.linesLength-1>n){const r=Math.max(0,n-o.rendLineNumberStart+1),l=o.linesLength-1-r+1;l>0&&(this._removeLinesAfter(o,l),o.linesLength-=l)}return this._finishRendering(o,!1,s),o}_renderUntouchedLines(e,t,n,s,o){const r=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){const c=r+l;a[l].layoutLine(c,s[c-o],this._viewportData.lineHeight)}}_insertLinesBefore(e,t,n,s,o){const r=[];let a=0;for(let l=t;l<=n;l++)r[a++]=this._lineFactory.createLine();e.lines=r.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++)e.lines[n].getDomNode()?.remove();e.lines.splice(0,t)}_insertLinesAfter(e,t,n,s,o){const r=[];let a=0;for(let l=t;l<=n;l++)r[a++]=this._lineFactory.createLine();e.lines=e.lines.concat(r)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let s=0;s<t;s++)e.lines[n+s].getDomNode()?.remove();e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,s){v_._ttPolicy&&(n=v_._ttPolicy.createHTML(n));const o=this._domNode.lastChild;t||!o?this._domNode.innerHTML=n:o.insertAdjacentHTML("afterend",n);let r=this._domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];s[a]&&(l.setDomNode(r),r=r.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const s=document.createElement("div");v_._ttPolicy&&(t=v_._ttPolicy.createHTML(t)),s.innerHTML=t;for(let o=0;o<e.linesLength;o++){const r=e.lines[o];if(n[o]){const a=s.firstChild,l=r.getDomNode();l.parentNode.replaceChild(a,l),r.setDomNode(a)}}}static _sb=new JL(1e5);_finishRendering(e,t,n){const s=v_._sb,o=e.linesLength,r=e.lines,a=e.rendLineNumberStart,l=[];{s.reset();let c=!1;for(let d=0;d<o;d++){const h=r[d];l[d]=!1,!(h.getDomNode()||!h.renderLine(d+a,n[d],this._viewportData.lineHeight,this._viewportData,s))&&(l[d]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,s.build(),l)}{s.reset();let c=!1;const d=[];for(let h=0;h<o;h++){const u=r[h];d[h]=!1,!(l[h]||!u.renderLine(h+a,n[h],this._viewportData.lineHeight,this._viewportData,s))&&(d[h]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,s.build(),d)}}}var QWe=Object.defineProperty,JWe=(i,e)=>QWe(i,"name",{value:e,configurable:!0});class uM{constructor(e,t){this._domNode=e,this.endNode=t}static{JWe(this,"DomReadingContext")}_didDomLayout=!1;_clientRectDeltaLeft=0;_clientRectScale=1;_clientRectRead=!1;get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}markDidDomLayout(){this._didDomLayout=!0}}var e5e=Object.defineProperty,t5e=(i,e)=>e5e(i,"name",{value:e,configurable:!0});class uA{static{t5e(this,"RangeUtil")}static _handyReadyRange;static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,s,o){const r=this._createRange();try{return r.setStart(e,t),r.setEnd(n,s),r.getClientRects()}catch{return null}finally{this._detachRange(r,o)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(fb.compare);const t=[];let n=0,s=e[0];for(let o=1,r=e.length;o<r;o++){const a=e[o];s.left+s.width+.9>=a.left?s.width=Math.max(s.width,a.left+a.width-s.left):(t[n++]=s,s=a)}return t[n++]=s,t}static _createHorizontalRangesFromClientRects(e,t,n){if(!e||e.length===0)return null;const s=[];for(let o=0,r=e.length;o<r;o++){const a=e[o];s[o]=new fb(Math.max(0,(a.left-t)/n),a.width/n)}return this._mergeAdjacentRanges(s)}static readHorizontalRanges(e,t,n,s,o,r){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),s=Math.min(l,Math.max(0,s)),t===s&&n===o&&n===0&&!e.children[t].firstChild){const u=e.children[t].getClientRects();return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(u,r.clientRectDeltaLeft,r.clientRectScale)}t!==s&&s>0&&o===0&&(s--,o=fn.MAX_SAFE_SMALL_INTEGER);let c=e.children[t].firstChild,d=e.children[s].firstChild;if((!c||!d)&&(!c&&n===0&&t>0&&(c=e.children[t-1].firstChild,n=fn.MAX_SAFE_SMALL_INTEGER),!d&&o===0&&s>0&&(d=e.children[s-1].firstChild,o=fn.MAX_SAFE_SMALL_INTEGER)),!c||!d)return null;n=Math.min(c.textContent.length,Math.max(0,n)),o=Math.min(d.textContent.length,Math.max(0,o));const h=this._readClientRects(c,n,d,o,r.endNode);return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(h,r.clientRectDeltaLeft,r.clientRectScale)}}var i5e=Object.defineProperty,n5e=(i,e)=>i5e(i,"name",{value:e,configurable:!0}),U_=(i=>(i[i.IS_WHITESPACE=1]="IS_WHITESPACE",i[i.PSEUDO_BEFORE=2]="PSEUDO_BEFORE",i[i.PSEUDO_AFTER=4]="PSEUDO_AFTER",i[i.IS_WHITESPACE_MASK=1]="IS_WHITESPACE_MASK",i[i.PSEUDO_BEFORE_MASK=2]="PSEUDO_BEFORE_MASK",i[i.PSEUDO_AFTER_MASK=4]="PSEUDO_AFTER_MASK",i))(U_||{});class Us{constructor(e,t,n,s){this.endIndex=e,this.type=t,this.metadata=n,this.containsRTL=s}static{n5e(this,"LinePart")}_linePartBrand=void 0;isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}var s5e=Object.defineProperty,OR=(i,e)=>s5e(i,"name",{value:e,configurable:!0});class Oc{constructor(e,t,n,s){this.startColumn=e,this.endColumn=t,this.className=n,this.type=s}static{OR(this,"LineDecoration")}_lineDecorationBrand=void 0;static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,s=t.length;if(n!==s)return!1;for(let o=0;o<n;o++)if(!Oc._equals(e[o],t[o]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const s=t+1,o=n+1,r=n-t,a=[];let l=0;for(const c of e)c.endColumn<=s||c.startColumn>=o||(a[l++]=new Oc(Math.max(1,c.startColumn-s+1),Math.min(r+1,c.endColumn-s+1),c.className,c.type));return a}static filter(e,t,n,s){if(e.length===0)return[];const o=[];let r=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.range;if(d.endLineNumber<t||d.startLineNumber>t||d.isEmpty()&&(c.type===lr.Regular||c.type===lr.RegularAffectingLetterSpacing))continue;const h=d.startLineNumber===t?d.startColumn:n,u=d.endLineNumber===t?d.endColumn:s;o[r++]=new Oc(h,u,c.inlineClassName,c.type)}return o}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=Oc._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}}class Pz{static{OR(this,"DecorationSegment")}startOffset;endOffset;className;metadata;constructor(e,t,n,s){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=s}}class Gk{static{OR(this,"Stack")}count;stopOffsets;classNames;metadata;constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,s=e.length;n<s;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let s=0;for(;s+1<this.count&&this.stopOffsets[s]===this.stopOffsets[s+1];)s++;n.push(new Pz(t,this.stopOffsets[s],this.classNames.join(" "),Gk._metadata(this.metadata))),t=this.stopOffsets[s]+1,this.stopOffsets.splice(0,s+1),this.classNames.splice(0,s+1),this.metadata.splice(0,s+1),this.count-=s+1}return this.count>0&&t<e&&(n.push(new Pz(t,e-1,this.classNames.join(" "),Gk._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let s=0;s<this.count;s++)if(this.stopOffsets[s]>=e){this.stopOffsets.splice(s,0,e),this.classNames.splice(s,0,t),this.metadata.splice(s,0,n);break}this.count++}}class o5e{static{OR(this,"LineDecorationsNormalizer")}static normalize(e,t){if(t.length===0)return[];const n=[],s=new Gk;let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];let c=l.startColumn,d=l.endColumn;const h=l.className,u=l.type===lr.Before?U_.PSEUDO_BEFORE:l.type===lr.After?U_.PSEUDO_AFTER:0;if(c>1){const m=e.charCodeAt(c-2);Ds(m)&&c--}if(d>1){const m=e.charCodeAt(d-2);Ds(m)&&d--}const f=c-1,p=d-2;o=s.consumeLowerThan(f,o,n),s.count===0&&(o=f),s.insert(p,h,u)}return s.consumeLowerThan(fn.MAX_SAFE_SMALL_INTEGER,o,n),n}}var r5e=Object.defineProperty,Yo=(i,e)=>r5e(i,"name",{value:e,configurable:!0});class wre{static{Yo(this,"LineRange")}startOffset;endOffset;constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class V2{static{Yo(this,"RenderLineInput")}useMonospaceOptimizations;canUseHalfwidthRightwardsArrow;lineContent;continuesWithWrappedLine;isBasicASCII;containsRTL;fauxIndentLength;lineTokens;lineDecorations;tabSize;startVisibleColumn;spaceWidth;renderSpaceWidth;renderSpaceCharCode;stopRenderingLineAfter;renderWhitespace;renderControlCharacters;fontLigatures;selectionsOnLine;constructor(e,t,n,s,o,r,a,l,c,d,h,u,f,p,m,_,w,v,b){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=s,this.isBasicASCII=o,this.containsRTL=r,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(Oc.compare),this.tabSize=d,this.startVisibleColumn=h,this.spaceWidth=u,this.stopRenderingLineAfter=m,this.renderWhitespace=_==="all"?4:_==="boundary"?1:_==="selection"?2:_==="trailing"?3:0,this.renderControlCharacters=w,this.fontLigatures=v,this.selectionsOnLine=b&&b.sort((D,T)=>D.startOffset<T.startOffset?-1:1);const C=Math.abs(p-u),S=Math.abs(f-u);C<S?(this.renderSpaceWidth=p,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&Oc.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class Cre{constructor(e,t){this.partIndex=e,this.charIndex=t}static{Yo(this,"DomPosition")}}class xc{static{Yo(this,"CharacterMapping")}static getPartIndex(e){return(e&0xffff0000)>>>16}static getCharIndex(e){return(e&65535)>>>0}length;_data;_horizontalOffset;constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,n,s){const o=(t<<16|n<<0)>>>0;this._data[e-1]=o,this._horizontalOffset[e-1]=s}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=xc.getPartIndex(t),s=xc.getCharIndex(t);return new Cre(n,s)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;const s=(e<<16|n<<0)>>>0;let o=0,r=this.length-1;for(;o+1<r;){const m=o+r>>>1,_=this._data[m];if(_===s)return m;_>s?r=m:o=m}if(o===r)return o;const a=this._data[o],l=this._data[r];if(a===s)return o;if(l===s)return r;const c=xc.getPartIndex(a),d=xc.getCharIndex(a),h=xc.getPartIndex(l);let u;c!==h?u=t:u=xc.getCharIndex(l);const f=n-d,p=u-n;return f<=p?o:r}inflate(){const e=[];for(let t=0;t<this.length;t++){const n=this._data[t],s=xc.getPartIndex(n),o=xc.getCharIndex(n),r=this._horizontalOffset[t];e.push([s,o,r])}return e}}var z_=(i=>(i[i.None=0]="None",i[i.Before=1]="Before",i[i.After=2]="After",i))(z_||{});class v4{static{Yo(this,"RenderLineOutput")}_renderLineOutputBrand=void 0;characterMapping;containsRTL;containsForeignElements;constructor(e,t,n){this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}function MR(i,e){if(i.lineContent.length===0){if(i.lineDecorations.length>0){e.appendString("<span>");let t=0,n=0,s=0;for(const r of i.lineDecorations)(r.type===lr.Before||r.type===lr.After)&&(e.appendString('<span class="'),e.appendString(r.className),e.appendString('"></span>'),r.type===lr.Before&&(s|=1,t++),r.type===lr.After&&(s|=2,n++));e.appendString("</span>");const o=new xc(1,t+n);return o.setColumnInfo(1,t,0,0),new v4(o,!1,s)}return e.appendString("<span><span></span></span>"),new v4(new xc(0,0),!1,0)}return Are(Sre(i),e)}Yo(MR,"renderViewLine");class a5e{constructor(e,t,n,s){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=s}static{Yo(this,"RenderLineOutput2")}}function yre(i){const e=new JL(1e4),t=MR(i,e);return new a5e(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}Yo(yre,"renderViewLine2");class l5e{constructor(e,t,n,s,o,r,a,l,c,d,h,u,f,p,m,_){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=s,this.isOverflowing=o,this.overflowingCharCount=r,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=d,this.startVisibleColumn=h,this.containsRTL=u,this.spaceWidth=f,this.renderSpaceCharCode=p,this.renderWhitespace=m,this.renderControlCharacters=_}static{Yo(this,"ResolvedRenderLineInput")}}function Sre(i){const e=i.lineContent;let t,n,s;i.stopRenderingLineAfter!==-1&&i.stopRenderingLineAfter<e.length?(t=!0,n=e.length-i.stopRenderingLineAfter,s=i.stopRenderingLineAfter):(t=!1,n=0,s=e.length);let o=Ere(e,i.containsRTL,i.lineTokens,i.fauxIndentLength,s);i.renderControlCharacters&&!i.isBasicASCII&&(o=Dre(e,o)),(i.renderWhitespace===4||i.renderWhitespace===1||i.renderWhitespace===2&&i.selectionsOnLine||i.renderWhitespace===3&&!i.continuesWithWrappedLine)&&(o=Ire(i,e,s,o));let r=0;if(i.lineDecorations.length>0){for(let a=0,l=i.lineDecorations.length;a<l;a++){const c=i.lineDecorations[a];c.type===lr.RegularAffectingLetterSpacing||c.type===lr.Before?r|=1:c.type===lr.After&&(r|=2)}o=Tre(e,s,o,i.lineDecorations)}return i.containsRTL||(o=Lre(e,o,!i.isBasicASCII||i.fontLigatures)),new l5e(i.useMonospaceOptimizations,i.canUseHalfwidthRightwardsArrow,e,s,t,n,o,r,i.fauxIndentLength,i.tabSize,i.startVisibleColumn,i.containsRTL,i.spaceWidth,i.renderSpaceCharCode,i.renderWhitespace,i.renderControlCharacters)}Yo(Sre,"resolveRenderLineInput");function Ere(i,e,t,n,s){const o=[];let r=0;n>0&&(o[r++]=new Us(n,"",0,!1));let a=n;for(let l=0,c=t.getCount();l<c;l++){const d=t.getEndOffset(l);if(d<=n)continue;const h=t.getClassName(l);if(d>=s){const f=e?VC(i.substring(a,s)):!1;o[r++]=new Us(s,h,0,f);break}const u=e?VC(i.substring(a,d)):!1;o[r++]=new Us(d,h,0,u),a=d}return o}Yo(Ere,"transformAndRemoveOverflowing");function Lre(i,e,t){let n=0;const s=[];let o=0;if(t)for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex;if(n+50<c){const d=l.type,h=l.metadata,u=l.containsRTL;let f=-1,p=n;for(let m=n;m<c;m++)i.charCodeAt(m)===A.Space&&(f=m),f!==-1&&m-p>=50&&(s[o++]=new Us(f+1,d,h,u),p=f+1,f=-1);p!==c&&(s[o++]=new Us(c,d,h,u))}else s[o++]=l;n=c}else for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex,d=c-n;if(d>50){const h=l.type,u=l.metadata,f=l.containsRTL,p=Math.ceil(d/50);for(let m=1;m<p;m++){const _=n+m*50;s[o++]=new Us(_,h,u,f)}s[o++]=new Us(c,h,u,f)}else s[o++]=l;n=c}return s}Yo(Lre,"splitLargeTokens");function W2(i){return i<32?i!==A.Tab:i===127||i>=8234&&i<=8238||i>=8294&&i<=8297||i>=8206&&i<=8207||i===1564}Yo(W2,"isControlCharacter");function Dre(i,e){const t=[];let n=new Us(0,"",0,!1),s=0;for(const o of e){const r=o.endIndex;for(;s<r;s++){const a=i.charCodeAt(s);W2(a)&&(s>n.endIndex&&(n=new Us(s,o.type,o.metadata,o.containsRTL),t.push(n)),n=new Us(s+1,"mtkcontrol",o.metadata,!1),t.push(n))}s>n.endIndex&&(n=new Us(r,o.type,o.metadata,o.containsRTL),t.push(n))}return t}Yo(Dre,"extractControlCharacters");function Ire(i,e,t,n){const s=i.continuesWithWrappedLine,o=i.fauxIndentLength,r=i.tabSize,a=i.startVisibleColumn,l=i.useMonospaceOptimizations,c=i.selectionsOnLine,d=i.renderWhitespace===1,h=i.renderWhitespace===3,u=i.renderSpaceWidth!==i.spaceWidth,f=[];let p=0,m=0,_=n[m].type,w=n[m].containsRTL,v=n[m].endIndex;const b=n.length;let C=!1,S=ia(e),D;S===-1?(C=!0,S=t,D=t):D=nm(e);let T=!1,I=0,R=c&&c[I],G=a%r;for(let X=o;X<t;X++){const we=e.charCodeAt(X);R&&X>=R.endOffset&&(I++,R=c&&c[I]);let re;if(X<S||X>D)re=!0;else if(we===A.Tab)re=!0;else if(we===A.Space)if(d)if(T)re=!0;else{const le=X+1<t?e.charCodeAt(X+1):A.Null;re=le===A.Space||le===A.Tab}else re=!0;else re=!1;if(re&&c&&(re=!!R&&R.startOffset<=X&&R.endOffset>X),re&&h&&(re=C||X>D),re&&w&&X>=S&&X<=D&&(re=!1),T){if(!re||!l&&G>=r){if(u){const le=p>0?f[p-1].endIndex:o;for(let Ee=le+1;Ee<=X;Ee++)f[p++]=new Us(Ee,"mtkw",U_.IS_WHITESPACE,!1)}else f[p++]=new Us(X,"mtkw",U_.IS_WHITESPACE,!1);G=G%r}}else(X===v||re&&X>o)&&(f[p++]=new Us(X,_,0,w),G=G%r);for(we===A.Tab?G=r:Kg(we)?G+=2:G++,T=re;X===v&&(m++,m<b);)_=n[m].type,w=n[m].containsRTL,v=n[m].endIndex}let K=!1;if(T)if(s&&d){const X=t>0?e.charCodeAt(t-1):A.Null,we=t>1?e.charCodeAt(t-2):A.Null;X===A.Space&&we!==A.Space&&we!==A.Tab||(K=!0)}else K=!0;if(K)if(u){const X=p>0?f[p-1].endIndex:o;for(let we=X+1;we<=t;we++)f[p++]=new Us(we,"mtkw",U_.IS_WHITESPACE,!1)}else f[p++]=new Us(t,"mtkw",U_.IS_WHITESPACE,!1);else f[p++]=new Us(t,_,0,w);return f}Yo(Ire,"_applyRenderWhitespace");function Tre(i,e,t,n){n.sort(Oc.compare);const s=o5e.normalize(i,n),o=s.length;let r=0;const a=[];let l=0,c=0;for(let h=0,u=t.length;h<u;h++){const f=t[h],p=f.endIndex,m=f.type,_=f.metadata,w=f.containsRTL;for(;r<o&&s[r].startOffset<p;){const v=s[r];if(v.startOffset>c&&(c=v.startOffset,a[l++]=new Us(c,m,_,w)),v.endOffset+1<=p)c=v.endOffset+1,a[l++]=new Us(c,m+" "+v.className,_|v.metadata,w),r++;else{c=p,a[l++]=new Us(c,m+" "+v.className,_|v.metadata,w);break}}p>c&&(c=p,a[l++]=new Us(c,m,_,w))}const d=t[t.length-1].endIndex;if(r<o&&s[r].startOffset===d)for(;r<o&&s[r].startOffset===d;){const h=s[r];a[l++]=new Us(c,h.className,h.metadata,!1),r++}return a}Yo(Tre,"_applyInlineDecorations");function Are(i,e){const t=i.fontIsMonospace,n=i.canUseHalfwidthRightwardsArrow,s=i.containsForeignElements,o=i.lineContent,r=i.len,a=i.isOverflowing,l=i.overflowingCharCount,c=i.parts,d=i.fauxIndentLength,h=i.tabSize,u=i.startVisibleColumn,f=i.containsRTL,p=i.spaceWidth,m=i.renderSpaceCharCode,_=i.renderWhitespace,w=i.renderControlCharacters,v=new xc(r+1,c.length);let b=!1,C=0,S=u,D=0,T=0,I=0;f?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let R=0,G=c.length;R<G;R++){const K=c[R],X=K.endIndex,we=K.type,re=K.containsRTL,le=_!==0&&K.isWhitespace(),Ee=le&&!t&&(we==="mtkw"||!s),Se=C===X&&K.isPseudoAfter();if(D=0,e.appendString("<span "),re&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(Ee?"mtkz":we),e.appendASCIICharCode(A.DoubleQuote),le){let ue=0;{let fe=C,$e=S;for(;fe<X;fe++){const Qt=(o.charCodeAt(fe)===A.Tab?h-$e%h:1)|0;ue+=Qt,fe>=d&&($e+=Qt)}}for(Ee&&(e.appendString(' style="width:'),e.appendString(String(p*ue)),e.appendString('px"')),e.appendASCIICharCode(A.GreaterThan);C<X;C++){v.setColumnInfo(C+1,R-I,D,T),I=0;const fe=o.charCodeAt(C);let $e,Ze;if(fe===A.Tab){$e=h-S%h|0,Ze=$e,!n||Ze>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let Qt=2;Qt<=Ze;Qt++)e.appendCharCode(160)}else $e=2,Ze=1,e.appendCharCode(m),e.appendCharCode(8204);D+=$e,T+=Ze,C>=d&&(S+=Ze)}}else for(e.appendASCIICharCode(A.GreaterThan);C<X;C++){v.setColumnInfo(C+1,R-I,D,T),I=0;const ue=o.charCodeAt(C);let fe=1,$e=1;switch(ue){case A.Tab:fe=h-S%h,$e=fe;for(let Ze=1;Ze<=fe;Ze++)e.appendCharCode(160);break;case A.Space:e.appendCharCode(160);break;case A.LessThan:e.appendString("&lt;");break;case A.GreaterThan:e.appendString("&gt;");break;case A.Ampersand:e.appendString("&amp;");break;case A.Null:w?e.appendCharCode(9216):e.appendString("&#00;");break;case A.UTF8_BOM:case A.LINE_SEPARATOR:case A.PARAGRAPH_SEPARATOR:case A.NEXT_LINE:e.appendCharCode(65533);break;default:Kg(ue)&&$e++,w&&ue<32?e.appendCharCode(9216+ue):w&&ue===127?e.appendCharCode(9249):w&&W2(ue)?(e.appendString("[U+"),e.appendString(xre(ue)),e.appendString("]"),fe=8,$e=fe):e.appendCharCode(ue)}D+=fe,T+=$e,C>=d&&(S+=$e)}Se?I++:I=0,C>=r&&!b&&K.isPseudoAfter()&&(b=!0,v.setColumnInfo(C+1,R,D,T)),e.appendString("</span>")}return b||v.setColumnInfo(r+1,c.length-1,D,T),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(g("showMore","Show more ({0})",kre(l))),e.appendString("</span>")),e.appendString("</span>"),new v4(v,f,s)}Yo(Are,"_renderLine");function xre(i){return i.toString(16).toUpperCase().padStart(4,"0")}Yo(xre,"to4CharHex");function kre(i){return i<1024?g("overflow.chars","{0} chars",i):i<1024*1024?`${(i/1024).toFixed(1)} KB`:`${(i/1024/1024).toFixed(1)} MB`}Yo(kre,"renderOverflowingCharCount");var c5e=Object.defineProperty,Nre=(i,e)=>c5e(i,"name",{value:e,configurable:!0});const gA=new Float32Array([1,0,1,1,0,1,0,0,0,1,1,0]);function ev(i){if(!i)throw new Error(`Value "${i}" cannot be null`);return i}Nre(ev,"ensureNonNullable");function H2(i,e,t){let n=new e.ResizeObserver(s=>{const o=s.find(l=>l.target===i);if(!o)return;if(!("devicePixelContentBoxSize"in o)){n?.disconnect(),n=void 0;return}const r=o.devicePixelContentBoxSize[0].inlineSize,a=o.devicePixelContentBoxSize[0].blockSize;r>0&&a>0&&t(r,a)});try{n.observe(i,{box:["device-pixel-content-box"]})}catch{throw n.disconnect(),n=void 0,new Et("Could not observe device pixel dimensions")}return ye(()=>n?.disconnect())}Nre(H2,"observeDevicePixelDimensions");var Pre=Object.defineProperty,d5e=Object.getOwnPropertyDescriptor,h5e=(i,e)=>Pre(i,"name",{value:e,configurable:!0}),u5e=(i,e,t,n)=>{for(var s=d5e(e,t),o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=r(e,t,s)||s);return s&&Pre(e,t,s),s};let g5e=0;class U2 extends ${constructor(e,t){super(),this._fontSize=e,this._fontFamily=t;const n=Math.ceil(this._fontSize*sn().devicePixelRatio);this._canvas=new OffscreenCanvas(n*3,n*3),this._ctx=ev(this._canvas.getContext("2d",{willReadFrequently:!0})),this._ctx.textBaseline="top",this._ctx.fillStyle="#FFFFFF"}static{h5e(this,"GlyphRasterizer")}id=g5e++;get cacheKey(){return`${this._fontFamily}_${this._fontSize}px`}_canvas;_ctx;_workGlyph={source:null,boundingBox:{left:0,bottom:0,right:0,top:0},originOffset:{x:0,y:0}};_workGlyphConfig={chars:void 0,metadata:0};rasterizeGlyph(e,t,n){return e===""?{source:this._canvas,boundingBox:{top:0,left:0,bottom:-1,right:-1},originOffset:{x:0,y:0}}:this._workGlyphConfig.chars===e&&this._workGlyphConfig.metadata===t?this._workGlyph:(this._workGlyphConfig.chars=e,this._workGlyphConfig.metadata=t,this._rasterizeGlyph(e,t,n))}_rasterizeGlyph(e,t,n){const s=Math.ceil(this._fontSize*sn().devicePixelRatio),o=s*3;this._canvas.width!==o&&(this._canvas.width=o,this._canvas.height=o),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height);const r=new JL(200),a=Id.getFontStyle(t);a&qC.Italic&&r.appendString("italic "),a&qC.Bold&&r.appendString("bold "),r.appendString(`${s}px ${this._fontFamily}`),this._ctx.font=r.build();const l=s,c=s;this._ctx.fillStyle=n[Id.getForeground(t)],this._ctx.textBaseline="top",this._ctx.fillText(e,l,c);const d=this._ctx.getImageData(0,0,this._canvas.width,this._canvas.height);return this._findGlyphBoundingBox(d,this._workGlyph.boundingBox),this._workGlyph.source=this._canvas,this._workGlyph.originOffset.x=this._workGlyph.boundingBox.left-l,this._workGlyph.originOffset.y=this._workGlyph.boundingBox.top-c,this._workGlyph}_findGlyphBoundingBox(e,t){const n=this._canvas.height,s=this._canvas.width;let o=!1;for(let r=0;r<n;r++){for(let a=0;a<s;a++){const l=r*s*4+a*4+3;if(e.data[l]!==0){t.top=r,o=!0;break}}if(o)break}t.left=0,o=!1;for(let r=0;r<s;r++){for(let a=0;a<n;a++){const l=a*s*4+r*4+3;if(e.data[l]!==0){t.left=r,o=!0;break}}if(o)break}t.right=s,o=!1;for(let r=s-1;r>=t.left;r--){for(let a=0;a<n;a++){const l=a*s*4+r*4+3;if(e.data[l]!==0){t.right=r,o=!0;break}}if(o)break}t.bottom=t.top,o=!1;for(let r=n-1;r>=0;r--){for(let a=0;a<s;a++){const l=r*s*4+a*4+3;if(e.data[l]!==0){t.bottom=r,o=!0;break}}if(o)break}}}u5e([Ie],U2.prototype,"cacheKey");var f5e=Object.defineProperty,dL=(i,e)=>f5e(i,"name",{value:e,configurable:!0});class Rre extends ${static{dL(this,"TaskQueue")}_tasks=[];_idleCallback;_i=0;constructor(){super(),this._register(ye(()=>this.clear()))}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,n=0,s=e.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(t=Date.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,Date.now()-t),n=Math.max(t,n),o=e.timeRemaining(),n*1.5>o){s-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-t))}ms`),this._start();return}s=o}this.clear()}}class OGe extends Rre{static{dL(this,"PriorityTaskQueue")}_requestCallback(e){return sn().setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){sn().clearTimeout(e)}_createDeadline(e){const t=Date.now()+e;return{timeRemaining:dL(()=>Math.max(0,t-Date.now()),"timeRemaining")}}}class Ore extends Rre{static{dL(this,"IdleTaskQueue")}_requestCallback(e){return sn().requestIdleCallback(e)}_cancelCallback(e){sn().cancelIdleCallback(e)}}class MGe{static{dL(this,"DebouncedIdleTask")}_queue;constructor(){this._queue=new Ore}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}}var yg=(i=>(i.Unused="#808080",i.Used="#4040FF",i.Wasted="#FF0000",i.Restricted="#FF000088",i))(yg||{}),p5e=Object.defineProperty,m5e=(i,e)=>p5e(i,"name",{value:e,configurable:!0});class _5e{constructor(e,t){this._canvas=e,this._textureIndex=t,this._ctx=ev(this._canvas.getContext("2d",{willReadFrequently:!0}))}static{m5e(this,"TextureAtlasShelfAllocator")}_ctx;_currentRow={x:0,y:0,h:0};_allocatedGlyphs=new Set;_nextIndex=0;allocate(e){const t=e.boundingBox.right-e.boundingBox.left+1,n=e.boundingBox.bottom-e.boundingBox.top+1;if(t>this._canvas.width||n>this._canvas.height)throw new Et("Glyph is too large for the atlas page");if(e.boundingBox.right-e.boundingBox.left+1>this._canvas.width-this._currentRow.x&&(this._currentRow.x=0,this._currentRow.y+=this._currentRow.h,this._currentRow.h=1),this._currentRow.y+e.boundingBox.bottom-e.boundingBox.top+1>this._canvas.height)return;this._ctx.drawImage(e.source,e.boundingBox.left,e.boundingBox.top,t,n,this._currentRow.x,this._currentRow.y,t,n);const s={pageIndex:this._textureIndex,glyphIndex:this._nextIndex++,x:this._currentRow.x,y:this._currentRow.y,w:t,h:n,originOffsetX:e.originOffset.x,originOffsetY:e.originOffset.y};return this._currentRow.x+=t,this._currentRow.h=Math.max(this._currentRow.h,n),this._allocatedGlyphs.add(s),s}getUsagePreview(){const e=this._canvas.width,t=this._canvas.height,n=new OffscreenCanvas(e,t),s=ev(n.getContext("2d"));s.fillStyle=yg.Unused,s.fillRect(0,0,e,t);const o=new Map,r=new Map;for(const a of this._allocatedGlyphs)o.set(a.y,Math.max(o.get(a.y)??0,a.h)),r.set(a.y,Math.max(r.get(a.y)??0,a.x+a.w));for(const a of this._allocatedGlyphs)s.fillStyle=yg.Used,s.fillRect(a.x,a.y,a.w,a.h),s.fillStyle=yg.Wasted,s.fillRect(a.x,a.y+a.h,a.w,o.get(a.y)-a.h);for(const[a,l]of r.entries())a!==this._currentRow.y&&(s.fillStyle=yg.Wasted,s.fillRect(l,a,e-l,o.get(a)));return n.convertToBlob()}getStats(){const e=this._canvas.width,t=this._canvas.height;let n=0,s=0;const o=e*t,r=new Map,a=new Map;for(const l of this._allocatedGlyphs)r.set(l.y,Math.max(r.get(l.y)??0,l.h)),a.set(l.y,Math.max(a.get(l.y)??0,l.x+l.w));for(const l of this._allocatedGlyphs)n+=l.w*l.h,s+=l.w*(r.get(l.y)-l.h);for(const[l,c]of a.entries())l!==this._currentRow.y&&(s+=(e-c)*r.get(l));return[`page${this._textureIndex}:`,`     Total: ${o} (${e}x${t})`,`      Used: ${n} (${(n/o*100).toPrecision(2)}%)`,`    Wasted: ${s} (${(s/o*100).toPrecision(2)}%)`,`Efficiency: ${(n/(n+s)*100).toPrecision(2)}%`].join(`
`)}}var b5e=Object.defineProperty,Mre=(i,e)=>b5e(i,"name",{value:e,configurable:!0});class v5e{constructor(e,t,n){this._canvas=e,this._textureIndex=t,this._ctx=ev(this._canvas.getContext("2d",{willReadFrequently:!0})),this._slabW=Math.min(n?.slabW??64<<Math.floor(sn().devicePixelRatio)-1,this._canvas.width),this._slabH=Math.min(n?.slabH??this._slabW,this._canvas.height),this._slabsPerRow=Math.floor(this._canvas.width/this._slabW),this._slabsPerColumn=Math.floor(this._canvas.height/this._slabH)}static{Mre(this,"TextureAtlasSlabAllocator")}_ctx;_slabs=[];_activeSlabsByDims=new AA;_unusedRects=[];_openRegionsByHeight=new Map;_openRegionsByWidth=new Map;_allocatedGlyphs=new Set;_slabW;_slabH;_slabsPerRow;_slabsPerColumn;_nextIndex=0;allocate(e){const t=e.boundingBox.right-e.boundingBox.left+1,n=e.boundingBox.bottom-e.boundingBox.top+1;if(t>this._canvas.width||n>this._canvas.height)throw new Et("Glyph is too large for the atlas page");if(t>this._slabW||n>this._slabH){if(this._allocatedGlyphs.size>0)return;let c=this._canvas.width;for(;t<c/2&&n<c/2;)c/=2;this._slabW=c,this._slabH=c,this._slabsPerRow=Math.floor(this._canvas.width/this._slabW),this._slabsPerColumn=Math.floor(this._canvas.height/this._slabH)}const s={w:t,h:n};let o=this._activeSlabsByDims.get(s.w,s.h);if(o){const c=Math.floor(this._slabW/o.entryW)*Math.floor(this._slabH/o.entryH);o.count>=c&&(o=void 0)}let r,a;if(!o)if(t<n){const c=this._openRegionsByWidth.get(t);if(c?.length)for(let d=c.length-1;d>=0;d--){const h=c[d];if(h.w>=t&&h.h>=n){r=h.x,a=h.y,t<h.w&&this._unusedRects.push({x:h.x+t,y:h.y,w:h.w-t,h:n}),h.y+=n,h.h-=n,h.h===0&&(d===c.length-1?c.pop():this._unusedRects.splice(d,1));break}}}else{const c=this._openRegionsByHeight.get(n);if(c?.length)for(let d=c.length-1;d>=0;d--){const h=c[d];if(h.w>=t&&h.h>=n){r=h.x,a=h.y,n<h.h&&this._unusedRects.push({x:h.x,y:h.y+n,w:t,h:h.h-n}),h.x+=t,h.w-=t,h.h===0&&(d===c.length-1?c.pop():this._unusedRects.splice(d,1));break}}}if(r===void 0||a===void 0){if(!o){if(this._slabs.length>=this._slabsPerRow*this._slabsPerColumn)return;o={x:Math.floor(this._slabs.length%this._slabsPerRow)*this._slabW,y:Math.floor(this._slabs.length/this._slabsPerRow)*this._slabH,entryW:s.w,entryH:s.h,count:0};const d=this._slabW%o.entryW,h=this._slabH%o.entryH;d&&w4(this._openRegionsByWidth,d,{x:o.x+this._slabW-d,w:d,y:o.y,h:this._slabH-(h??0)}),h&&w4(this._openRegionsByHeight,h,{x:o.x,w:this._slabW,y:o.y+this._slabH-h,h}),this._slabs.push(o),this._activeSlabsByDims.set(s.w,s.h,o)}const c=Math.floor(this._slabW/o.entryW);r=o.x+Math.floor(o.count%c)*o.entryW,a=o.y+Math.floor(o.count/c)*o.entryH,o.count++}this._ctx.drawImage(e.source,e.boundingBox.left,e.boundingBox.top,t,n,r,a,t,n);const l={pageIndex:this._textureIndex,glyphIndex:this._nextIndex++,x:r,y:a,w:t,h:n,originOffsetX:e.originOffset.x,originOffsetY:e.originOffset.y};return this._allocatedGlyphs.add(l),l}getUsagePreview(){const e=this._canvas.width,t=this._canvas.height,n=new OffscreenCanvas(e,t),s=ev(n.getContext("2d"));s.fillStyle=yg.Unused,s.fillRect(0,0,e,t);let o=0,r=0,a=0;const l=64<<Math.floor(sn().devicePixelRatio)-1,c=l;for(const h of this._slabs){let u=0,f=0;for(let _=0;_<h.count;_++)u+h.entryW>l&&(u=0,f+=h.entryH),s.fillStyle=yg.Wasted,s.fillRect(h.x+u,h.y+f,h.entryW,h.entryH),o+=h.entryW*h.entryH,u+=h.entryW;const p=Math.floor(l/h.entryW),m=Math.floor(c/h.entryH);h.entryW*p*h.entryH*m}for(const h of this._allocatedGlyphs)r+=h.w*h.h,s.fillStyle=yg.Used,s.fillRect(h.x,h.y,h.w,h.h);const d=Array.from(this._openRegionsByWidth.values()).flat().concat(Array.from(this._openRegionsByHeight.values()).flat());for(const h of d)s.fillStyle=yg.Restricted,s.fillRect(h.x,h.y,h.w,h.h),a+=h.w*h.h;return s.globalAlpha=.5,s.drawImage(this._canvas,0,0),s.globalAlpha=1,n.convertToBlob()}getStats(){const e=this._canvas.width,t=this._canvas.height;let n=0,s=0,o=0,r=0,a=0;const l=e*t,c=64<<Math.floor(sn().devicePixelRatio)-1,d=c;for(const p of this._slabs){let m=0,_=0;for(let C=0;C<p.count;C++)m+p.entryW>c&&(m=0,_+=p.entryH),n+=p.entryW*p.entryH,m+=p.entryW;const w=Math.floor(c/p.entryW),v=Math.floor(d/p.entryH),b=p.entryW*w*p.entryH*v;o+=c*d-b}for(const p of this._allocatedGlyphs)s+=p.w*p.h;const h=Array.from(this._openRegionsByWidth.values()).flat().concat(Array.from(this._openRegionsByHeight.values()).flat());for(const p of h)a+=p.w*p.h;const u=o-a;r=n-(s-u);const f=s/(s+r+a);return[`page[${this._textureIndex}]:`,`     Total: ${l}px (${e}x${t})`,`      Used: ${s}px (${(s/l*100).toFixed(2)}%)`,`    Wasted: ${r}px (${(r/l*100).toFixed(2)}%)`,`Restricted: ${a}px (${(a/l*100).toFixed(2)}%) (hard to allocate)`,`Efficiency: ${f===1?"100":(f*100).toFixed(2)}%`,`     Slabs: ${this._slabs.length} of ${Math.floor(this._canvas.width/c)*Math.floor(this._canvas.height/d)}`].join(`
`)}}function w4(i,e,t){let n=i.get(e);n||(n=[],i.set(e,n)),n.push(t)}Mre(w4,"addEntryToMapArray");var Bre=Object.defineProperty,w5e=Object.getOwnPropertyDescriptor,C5e=(i,e)=>Bre(i,"name",{value:e,configurable:!0}),y5e=(i,e,t,n)=>{for(var s=n>1?void 0:n?w5e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Bre(e,t,s),s},Rz=(i,e)=>(t,n)=>e(t,n,i);let zh=class extends ${constructor(i,e,t,n,s){switch(super(),this._logService=n,this._themeService=s,this._canvas=new OffscreenCanvas(e,e),t){case"shelf":this._allocator=new _5e(this._canvas,i);break;case"slab":this._allocator=new v5e(this._canvas,i);break;default:this._allocator=t(this._canvas,i);break}this._register(H.runAndSubscribe(this._themeService.onDidColorThemeChange,()=>{this._colorMap=this._themeService.getColorTheme().tokenColorMap})),this._register(ye(()=>{this._canvas.width=1,this._canvas.height=1}))}static{C5e(this,"TextureAtlasPage")}_version=0;get version(){return this._version}static maximumGlyphCount=5e3;_usedArea={left:0,top:0,right:0,bottom:0};get usedArea(){return this._usedArea}_canvas;get source(){return this._canvas}_glyphMap=new GG;_glyphInOrderSet=new Set;get glyphs(){return this._glyphInOrderSet.values()}_allocator;_colorMap;getGlyph(i,e,t){return this._glyphMap.get(e,t,i.cacheKey)??this._createGlyph(i,e,t)}_createGlyph(i,e,t){if(this._glyphInOrderSet.size>=zh.maximumGlyphCount)return;const n=i.rasterizeGlyph(e,t,this._colorMap),s=this._allocator.allocate(n);if(s!==void 0)return this._glyphMap.set(e,t,i.cacheKey,s),this._glyphInOrderSet.add(s),this._version++,this._usedArea.right=Math.max(this._usedArea.right,s.x+s.w-1),this._usedArea.bottom=Math.max(this._usedArea.bottom,s.y+s.h-1),this._logService.getLevel()===o_.Trace&&this._logService.trace("New glyph",{chars:e,metadata:t,rasterizedGlyph:n,glyph:s}),s}getUsagePreview(){return this._allocator.getUsagePreview()}getStats(){return this._allocator.getStats()}};zh=y5e([Rz(3,jo),Rz(4,$t)],zh);var Fre=Object.defineProperty,S5e=Object.getOwnPropertyDescriptor,E5e=(i,e)=>Fre(i,"name",{value:e,configurable:!0}),L5e=(i,e,t,n)=>{for(var s=n>1?void 0:n?S5e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Fre(e,t,s),s},Oz=(i,e)=>(t,n)=>e(t,n,i);let C4=class extends ${constructor(i,e,t,n){super(),this._maxTextureSize=i,this._themeService=t,this._instantiationService=n,this._allocatorType=e?.allocatorType??"slab",this._register(H.runAndSubscribe(this._themeService.onDidColorThemeChange,()=>{this._colorMap=this._themeService.getColorTheme().tokenColorMap}));const s=Math.max(1,Math.floor(sn().devicePixelRatio));this.pageSize=Math.min(1024*s,this._maxTextureSize),this._initFirstPage(),this._register(ye(()=>ii(this._pages)))}static{E5e(this,"TextureAtlas")}_colorMap;_warmUpTask=this._register(new Yi);_warmedUpRasterizers=new Set;_allocatorType;_pages=[];get pages(){return this._pages}pageSize;_glyphPageIndex=new GG;_onDidDeleteGlyphs=this._register(new x);onDidDeleteGlyphs=this._onDidDeleteGlyphs.event;_initFirstPage(){const i=this._instantiationService.createInstance(zh,0,this.pageSize,this._allocatorType);this._pages.push(i);const e=new U2(1,"");i.getGlyph(e,"",0),e.dispose()}clear(){for(const i of this._pages)i.dispose();this._pages.length=0,this._glyphPageIndex.clear(),this._warmedUpRasterizers.clear(),this._warmUpTask.clear(),this._initFirstPage(),this._onDidDeleteGlyphs.fire()}getGlyph(i,e,t){return t&=~(Ai.LANGUAGEID_MASK|Ai.TOKEN_TYPE_MASK|Ai.BALANCED_BRACKETS_MASK),this._warmedUpRasterizers.has(i.id)||(this._warmUpAtlas(i),this._warmedUpRasterizers.add(i.id)),this._tryGetGlyph(this._glyphPageIndex.get(e,t,i.cacheKey)??0,i,e,t)}_tryGetGlyph(i,e,t,n){return this._glyphPageIndex.set(t,n,e.cacheKey,i),this._pages[i].getGlyph(e,t,n)??(i+1<this._pages.length?this._tryGetGlyph(i+1,e,t,n):void 0)??this._getGlyphFromNewPage(e,t,n)}_getGlyphFromNewPage(i,e,t){return this._pages.push(this._instantiationService.createInstance(zh,this._pages.length,this.pageSize,this._allocatorType)),this._glyphPageIndex.set(e,t,i.cacheKey,this._pages.length-1),this._pages[this._pages.length-1].getGlyph(i,e,t)}getUsagePreview(){return Promise.all(this._pages.map(i=>i.getUsagePreview()))}getStats(){return this._pages.map(i=>i.getStats())}_warmUpAtlas(i){this._warmUpTask.value?.clear();const e=this._warmUpTask.value=new Ore;for(let t=A.A;t<=A.Z;t++)e.enqueue(()=>{for(const n of this._colorMap.keys())this.getGlyph(i,String.fromCharCode(t),n<<Ai.FOREGROUND_OFFSET&Ai.FOREGROUND_MASK)});for(let t=A.a;t<=A.z;t++)e.enqueue(()=>{for(const n of this._colorMap.keys())this.getGlyph(i,String.fromCharCode(t),n<<Ai.FOREGROUND_OFFSET&Ai.FOREGROUND_MASK)});for(let t=A.ExclamationMark;t<=A.Tilde;t++)e.enqueue(()=>{for(const n of this._colorMap.keys())this.getGlyph(i,String.fromCharCode(t),n<<Ai.FOREGROUND_OFFSET&Ai.FOREGROUND_MASK)})}};C4=L5e([Oz(2,$t),Oz(3,He)],C4);var D5e=Object.defineProperty,D0=(i,e)=>D5e(i,"name",{value:e,configurable:!0}),xd;(i=>{async function e(s){try{if(!navigator.gpu)throw new Error("This browser does not support WebGPU");const o=await navigator.gpu.requestAdapter();if(!o)throw new Error("This browser supports WebGPU but it appears to be disabled");return fA(await o.requestDevice())}catch(o){throw s&&s(o.message),o}}i.requestDevice=e,D0(e,"requestDevice");function t(s,o,r){const a=s.createBuffer(o);return r&&s.queue.writeBuffer(a,0,zg(r)?r():r),fA(a)}i.createBuffer=t,D0(t,"createBuffer");function n(s,o){return fA(s.createTexture(o))}i.createTexture=n,D0(n,"createTexture")})(xd||(xd={}));function fA(i){return{object:i,dispose:D0(()=>i.destroy(),"dispose")}}D0(fA,"wrapDestroyableInDisposable");var Vre=Object.defineProperty,I5e=Object.getOwnPropertyDescriptor,Mz=(i,e)=>Vre(i,"name",{value:e,configurable:!0}),T5e=(i,e,t,n)=>{for(var s=n>1?void 0:n?I5e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Vre(e,t,s),s},gM=(i,e)=>(t,n)=>e(t,n,i);let xl=class extends ${constructor(i,e,t){super(),this._instantiationService=i,this._notificationService=e,this.configurationService=t,this.canvas=Ut(document.createElement("canvas")),this.canvas.setClassName("editorCanvas"),this.ctx=ev(this.canvas.domNode.getContext("webgpu")),this.device=xd.requestDevice(o=>{const r=[{label:g("editor.dom.render","Use DOM-based rendering"),run:Mz(()=>this.configurationService.updateValue("editor.experimentalGpuAcceleration","off"),"run")}];this._notificationService.prompt(zs.Warning,o,r)}).then(o=>this._register(o).object),this.device.then(o=>{xl._atlas||(xl._atlas=this._instantiationService.createInstance(C4,o.limits.maxTextureDimension2D,void 0),e5(this.devicePixelRatio,()=>xl.atlas.clear()))});const n=ci(this,sn().devicePixelRatio);this._register(F(sn(),"resize",()=>{n.set(sn().devicePixelRatio,void 0)})),this.devicePixelRatio=n;const s=ci(this,{width:this.canvas.domNode.width,height:this.canvas.domNode.height});this._register(H2(this.canvas.domNode,sn(),(o,r)=>{this.canvas.domNode.width=o,this.canvas.domNode.height=r,s.set({width:o,height:r},void 0)})),this.canvasDevicePixelDimensions=s}static{Mz(this,"ViewGpuContext")}canvas;ctx;device;static _atlas;static get atlas(){if(!xl._atlas)throw new Et("Cannot call ViewGpuContext.textureAtlas before device is resolved");return xl._atlas}get atlas(){return xl.atlas}canvasDevicePixelDimensions;devicePixelRatio;static canRender(i,e,t){const n=e.getViewLineRenderingData(t);return!(n.containsRTL||n.maxColumn>200||n.continuesWithWrappedLine||n.inlineDecorations.length>0)}};xl=T5e([gM(0,He),gM(1,fs),gM(2,Pe)],xl);var A5e=Object.defineProperty,Pv=(i,e)=>A5e(i,"name",{value:e,configurable:!0});const x5e=function(){return ao?!0:!(Gi||na||Vc)}();let kC=!0;class hg{static{Pv(this,"ViewLine")}static CLASS_NAME="view-line";_options;_isMaybeInvalid;_renderedViewLine;constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=Ut(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return Tg(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,s,o){if(this._options.useGpu&&xl.canRender(this._options,s,e))return this._renderedViewLine?.domNode?.domNode.remove(),this._renderedViewLine=null,!1;if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const r=s.getViewLineRenderingData(e),a=this._options,l=Oc.filter(r.inlineDecorations,e,r.minColumn,r.maxColumn);let c=null;if(Tg(a.themeType)||this._options.renderWhitespace==="selection"){const f=s.selections;for(const p of f){if(p.endLineNumber<e||p.startLineNumber>e)continue;const m=p.startLineNumber===e?p.startColumn:r.minColumn,_=p.endLineNumber===e?p.endColumn:r.maxColumn;m<_&&(Tg(a.themeType)&&l.push(new Oc(m,_,"inline-selected-text",lr.Regular)),this._options.renderWhitespace==="selection"&&(c||(c=[]),c.push(new wre(m-1,_-1))))}}const d=new V2(a.useMonospaceOptimizations,a.canUseHalfwidthRightwardsArrow,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,r.minColumn-1,r.tokens,l,r.tabSize,r.startVisibleColumn,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,a.stopRenderingLineAfter,a.renderWhitespace,a.renderControlCharacters,a.fontLigatures!==kd.OFF,c);if(this._renderedViewLine&&this._renderedViewLine.input.equals(d))return!1;o.appendString('<div style="top:'),o.appendString(String(t)),o.appendString("px;height:"),o.appendString(String(n)),o.appendString('px;" class="'),o.appendString(hg.CLASS_NAME),o.appendString('">');const h=MR(d,o);o.appendString("</div>");let u=null;return kC&&x5e&&r.isBasicASCII&&a.useMonospaceOptimizations&&h.containsForeignElements===z_.None&&(u=new zI(this._renderedViewLine?this._renderedViewLine.domNode:null,d,h.characterMapping)),u||(u=Hre(this._renderedViewLine?this._renderedViewLine.domNode:null,d,h.characterMapping,h.containsRTL,h.containsForeignElements)),this._renderedViewLine=u,!0}layoutLine(e,t,n){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(n))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof zI:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof zI?this._renderedViewLine.monospaceAssumptionsAreValid():kC}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof zI&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,s){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const o=this._renderedViewLine.input.stopRenderingLineAfter;if(o!==-1&&t>o+1&&n>o+1)return new Nz(!0,[new fb(this.getWidth(s),0)]);o!==-1&&t>o+1&&(t=o+1),o!==-1&&n>o+1&&(n=o+1);const r=this._renderedViewLine.getVisibleRangesForRange(e,t,n,s);return r&&r.length>0?new Nz(!1,r):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}}class zI{static{Pv(this,"FastRenderedViewLine")}domNode;input;_characterMapping;_charWidth;_keyColumnPixelOffsetCache;_cachedWidth=-1;constructor(e,t,n){this.domNode=e,this.input=t;const s=Math.floor(t.lineContent.length/300);if(s>0){this._keyColumnPixelOffsetCache=new Float32Array(s);for(let o=0;o<s;o++)this._keyColumnPixelOffsetCache[o]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return kC;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),kC=!1)}return kC}toSlowRenderedLine(){return Hre(this.domNode,this.input,this._characterMapping,!1,z_.None)}getVisibleRangesForRange(e,t,n,s){const o=this._getColumnPixelOffset(e,t,s),r=this._getColumnPixelOffset(e,n,s);return[new fb(o,r-o)]}_getColumnPixelOffset(e,t,n){if(t<=300){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const s=Math.floor((t-1)/300)-1,o=(s+1)*300+1;let r=-1;if(this._keyColumnPixelOffsetCache&&(r=this._keyColumnPixelOffsetCache[s],r===-1&&(r=this._actualReadPixelOffset(e,o,n),this._keyColumnPixelOffsetCache[s]=r)),r===-1){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const a=this._characterMapping.getHorizontalOffset(o),l=this._characterMapping.getHorizontalOffset(t);return r+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,n){if(!this.domNode)return-1;const s=this._characterMapping.getDomPosition(t),o=uA.readHorizontalRanges(this._getReadingTarget(this.domNode),s.partIndex,s.charIndex,s.partIndex,s.charIndex,n);return!o||o.length===0?-1:o[0].left}getColumnOfNodeOffset(e,t){return z2(this._characterMapping,e,t)}}class Wre{static{Pv(this,"RenderedViewLine")}domNode;input;_characterMapping;_isWhitespaceOnly;_containsForeignElements;_cachedWidth;_pixelOffsetCache;constructor(e,t,n,s,o){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=o,this._cachedWidth=-1,this._pixelOffsetCache=null,!s||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let r=0,a=this._characterMapping.length;r<=a;r++)this._pixelOffsetCache[r]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,s){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const o=this._readPixelOffset(this.domNode,e,t,s);if(o===-1)return null;const r=this._readPixelOffset(this.domNode,e,n,s);return r===-1?null:[new fb(o,r-o)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,s)}_readVisibleRangesForRange(e,t,n,s,o){if(n===s){const r=this._readPixelOffset(e,t,n,o);return r===-1?null:[new fb(r,0)]}else return this._readRawVisibleRangesForRange(e,n,s,o)}_readPixelOffset(e,t,n,s){if(this._characterMapping.length===0){if(this._containsForeignElements===z_.None||this._containsForeignElements===z_.After)return 0;if(this._containsForeignElements===z_.Before)return this.getWidth(s);const o=this._getReadingTarget(e);return o.firstChild?(s.markDidDomLayout(),o.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const o=this._pixelOffsetCache[n];if(o!==-1)return o;const r=this._actualReadPixelOffset(e,t,n,s);return this._pixelOffsetCache[n]=r,r}return this._actualReadPixelOffset(e,t,n,s)}_actualReadPixelOffset(e,t,n,s){if(this._characterMapping.length===0){const l=uA.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,s);return!l||l.length===0?-1:l[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===z_.None)return this.getWidth(s);const o=this._characterMapping.getDomPosition(n),r=uA.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,o.partIndex,o.charIndex,s);if(!r||r.length===0)return-1;const a=r[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(n),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,n,s){if(t===1&&n===this._characterMapping.length)return[new fb(0,this.getWidth(s))];const o=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(n);return uA.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,r.partIndex,r.charIndex,s)}getColumnOfNodeOffset(e,t){return z2(this._characterMapping,e,t)}}class k5e extends Wre{static{Pv(this,"WebKitRenderedViewLine")}_readVisibleRangesForRange(e,t,n,s,o){const r=super._readVisibleRangesForRange(e,t,n,s,o);if(!r||r.length===0||n===s||n===1&&s===this._characterMapping.length)return r;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,s,o);if(a!==-1){const l=r[r.length-1];l.left<a&&(l.width=a-l.left)}}return r}}const Hre=function(){return J_?Ure:zre}();function Ure(i,e,t,n,s){return new k5e(i,e,t,n,s)}Pv(Ure,"createWebKitRenderedLine");function zre(i,e,t,n,s){return new Wre(i,e,t,n,s)}Pv(zre,"createNormalRenderedLine");function z2(i,e,t){const n=e.textContent.length;let s=-1;for(;e;)e=e.previousSibling,s++;return i.getColumn(new Cre(s,t),n)}Pv(z2,"getColumnOfNodeOffset");const NC="monaco-mouse-cursor-text";var N5e=Object.defineProperty,$re=(i,e)=>N5e(i,"name",{value:e,configurable:!0});class Bz{constructor(e,t,n,s,o,r,a){this.top=e,this.left=t,this.paddingLeft=n,this.width=s,this.height=o,this.textContent=r,this.textContentClassName=a}static{$re(this,"ViewCursorRenderData")}}var N1=(i=>(i[i.Single=0]="Single",i[i.MultiPrimary=1]="MultiPrimary",i[i.MultiSecondary=2]="MultiSecondary",i))(N1||{});class Fz{static{$re(this,"ViewCursor")}_context;_domNode;_cursorStyle;_lineCursorWidth;_lineHeight;_typicalHalfwidthCharacterWidth;_isVisible;_position;_pluralityClass;_lastRenderedContent;_renderData;constructor(e,t){this._context=e;const n=this._context.configuration.options,s=n.get(k.fontInfo);this._cursorStyle=n.get(k.cursorStyle),this._lineHeight=n.get(k.lineHeight),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(n.get(k.cursorWidth),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Ut(document.createElement("div")),this._domNode.setClassName(`cursor ${NC}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Ao(this._domNode,s),this._domNode.setDisplay("none"),this._position=new j(1,1),this._pluralityClass="",this.setPlurality(t),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(e){switch(e){default:case 0:this._pluralityClass="";break;case 1:this._pluralityClass="cursor-primary";break;case 2:this._pluralityClass="cursor-secondary";break}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(k.fontInfo);return this._cursorStyle=t.get(k.cursorStyle),this._lineHeight=t.get(k.lineHeight),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(k.cursorWidth),this._typicalHalfwidthCharacterWidth),Ao(this._domNode,n),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,n=this._context.viewModel.getLineContent(e),[s,o]=h5(n,t-1);return[new j(e,s+1),n.substring(s,o)]}_prepareRender(e){let t="",n="";const[s,o]=this._getGraphemeAwarePosition();if(this._cursorStyle===Tl.Line||this._cursorStyle===Tl.LineThin){const u=e.visibleRangeForPosition(s);if(!u||u.outsideRenderedLine)return null;const f=ve(this._domNode.domNode);let p;this._cursorStyle===Tl.Line?(p=nE(f,this._lineCursorWidth>0?this._lineCursorWidth:2),p>2&&(t=o,n=this._getTokenClassName(s))):p=nE(f,1);let m=u.left,_=0;p>=2&&m>=1&&(_=1,m-=_);const w=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta;return new Bz(w,m,_,p,this._lineHeight,t,n)}const r=e.linesVisibleRangesForRange(new V(s.lineNumber,s.column,s.lineNumber,s.column+o.length),!1);if(!r||r.length===0)return null;const a=r[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;const l=a.ranges[0],c=o==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===Tl.Block&&(t=o,n=this._getTokenClassName(s));let d=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta,h=this._lineHeight;return(this._cursorStyle===Tl.Underline||this._cursorStyle===Tl.UnderlineThin)&&(d+=this._lineHeight-2,h=2),new Bz(d,l.left,0,c,h,t,n)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),n=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(n)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${NC} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}var P5e=Object.defineProperty,R5e=(i,e)=>P5e(i,"name",{value:e,configurable:!0}),Kk=(i=>(i[i.Left=0]="Left",i[i.Right=1]="Right",i[i.Nearest=2]="Nearest",i))(Kk||{});class hL{static{R5e(this,"AtomicTabMoveOperations")}static whitespaceVisibleColumn(e,t,n){const s=e.length;let o=0,r=-1,a=-1;for(let l=0;l<s;l++){if(l===t)return[r,a,o];switch(o%n===0&&(r=l,a=o),e.charCodeAt(l)){case A.Space:o+=1;break;case A.Tab:o=Rn.nextRenderTabStop(o,n);break;default:return[-1,-1,-1]}}return t===s?[r,a,o]:[-1,-1,-1]}static atomicPosition(e,t,n,s){const o=e.length,[r,a,l]=hL.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let c;switch(s){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%n===0)return t;c=l%n<=n/2;break}if(c){if(r===-1)return-1;let u=a;for(let f=r;f<o;++f){if(u===a+n)return r;switch(e.charCodeAt(f)){case A.Space:u+=1;break;case A.Tab:u=Rn.nextRenderTabStop(u,n);break;default:return-1}}return u===a+n?r:-1}const d=Rn.nextRenderTabStop(l,n);let h=l;for(let u=t;u<o;u++){if(h===d)return u;switch(e.charCodeAt(u)){case A.Space:h+=1;break;case A.Tab:h=Rn.nextRenderTabStop(h,n);break;default:return-1}}return h===d?o:-1}}var O5e=Object.defineProperty,uc=(i,e)=>O5e(i,"name",{value:e,configurable:!0});class Hf{constructor(e=null){this.hitTarget=e}static{uc(this,"UnknownHitTestResult")}type=0}class Gre{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n}static{uc(this,"ContentHitTestResult")}type=1;get hitTarget(){return this.spanNode}}var w_;(i=>{function e(t,n,s){const o=t.getPositionFromDOMInfo(n,s);return o?new Gre(o,n,null):new Hf(n)}i.createFromDOMInfo=e,uc(e,"createFromDOMInfo")})(w_||(w_={}));class M5e{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}static{uc(this,"PointerHandlerLastRenderData")}}class sr{static{uc(this,"MouseTarget")}static _deduceRage(e,t=null){return!t&&e?new V(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,n){return{type:Ot.UNKNOWN,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createTextarea(e,t){return{type:Ot.TEXTAREA,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,n,s,o,r){return{type:e,element:t,mouseColumn:n,position:s,range:o,detail:r}}static createViewZone(e,t,n,s,o){return{type:e,element:t,mouseColumn:n,position:s,range:this._deduceRage(s),detail:o}}static createContentText(e,t,n,s,o){return{type:Ot.CONTENT_TEXT,element:e,mouseColumn:t,position:n,range:this._deduceRage(n,s),detail:o}}static createContentEmpty(e,t,n,s){return{type:Ot.CONTENT_EMPTY,element:e,mouseColumn:t,position:n,range:this._deduceRage(n),detail:s}}static createContentWidget(e,t,n){return{type:Ot.CONTENT_WIDGET,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createScrollbar(e,t,n){return{type:Ot.SCROLLBAR,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createOverlayWidget(e,t,n){return{type:Ot.OVERLAY_WIDGET,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createOutsideEditor(e,t,n,s){return{type:Ot.OUTSIDE_EDITOR,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:n,outsideDistance:s}}static _typeToString(e){return e===Ot.TEXTAREA?"TEXTAREA":e===Ot.GUTTER_GLYPH_MARGIN?"GUTTER_GLYPH_MARGIN":e===Ot.GUTTER_LINE_NUMBERS?"GUTTER_LINE_NUMBERS":e===Ot.GUTTER_LINE_DECORATIONS?"GUTTER_LINE_DECORATIONS":e===Ot.GUTTER_VIEW_ZONE?"GUTTER_VIEW_ZONE":e===Ot.CONTENT_TEXT?"CONTENT_TEXT":e===Ot.CONTENT_EMPTY?"CONTENT_EMPTY":e===Ot.CONTENT_VIEW_ZONE?"CONTENT_VIEW_ZONE":e===Ot.CONTENT_WIDGET?"CONTENT_WIDGET":e===Ot.OVERVIEW_RULER?"OVERVIEW_RULER":e===Ot.SCROLLBAR?"SCROLLBAR":e===Ot.OVERLAY_WIDGET?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class fr{static{uc(this,"ElementPath")}static isTextArea(e){return e.length===2&&e[0]===Hn.OverflowGuard&&e[1]===Hn.TextArea}static isChildOfViewLines(e){return e.length>=4&&e[0]===Hn.OverflowGuard&&e[3]===Hn.ViewLines}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===Hn.OverflowGuard&&e[3]===Hn.ViewLines}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===Hn.OverflowGuard&&e[1]===Hn.ScrollableElement}static isChildOfMinimap(e){return e.length>=2&&e[0]===Hn.OverflowGuard&&e[1]===Hn.Minimap}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===Hn.OverflowGuard&&e[3]===Hn.ContentWidgets}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===Hn.OverflowGuard}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===Hn.OverflowingContentWidgets}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===Hn.OverflowGuard&&e[1]===Hn.OverlayWidgets}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&e[0]===Hn.OverflowingOverlayWidgets}}class Dy{static{uc(this,"HitTestContext")}viewModel;layoutInfo;viewDomNode;lineHeight;stickyTabStops;typicalHalfwidthCharacterWidth;lastRenderData;_context;_viewHelper;constructor(e,t,n){this.viewModel=e.viewModel;const s=e.configuration.options;this.layoutInfo=s.get(k.layoutInfo),this.viewDomNode=t.viewDomNode,this.lineHeight=s.get(k.lineHeight),this.stickyTabStops=s.get(k.stickyTabStops),this.typicalHalfwidthCharacterWidth=s.get(k.fontInfo).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return Dy.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const s=n.verticalOffset+n.height/2,o=e.viewModel.getLineCount();let r=null,a,l=null;return n.afterLineNumber!==o&&(l=new j(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(r=new j(n.afterLineNumber,e.viewModel.getLineMaxColumn(n.afterLineNumber))),l===null?a=r:r===null?a=l:t<s?a=r:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:r,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const s=this._context.viewModel.getLineCount(),o=this._context.viewModel.getLineMaxColumn(s);return{range:new V(s,o,s,o),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.viewModel.getLineMaxColumn(t);return{range:new V(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return Dy._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class B5e{static{uc(this,"BareHitTestRequest")}editorPos;pos;relativePos;mouseVerticalOffset;isInMarginArea;isInContentArea;mouseContentHorizontalOffset;mouseColumn;constructor(e,t,n,s){this.editorPos=t,this.pos=n,this.relativePos=s,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,ir._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class F5e extends B5e{static{uc(this,"HitTestRequest")}_ctx;_eventTarget;hitTestResult=new cr(()=>ir.doHitTest(this._ctx,this));_useHitTestTarget;_targetPathCacheElement=null;_targetPathCacheValue=new Uint8Array(0);get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=oh.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(e,t,n,s,o){super(e,t,n,s),this._ctx=e,this._eventTarget=o;const r=!!this._eventTarget;this._useHitTestTarget=!r}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?Rn.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return sr.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return sr.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,n,s){return sr.createMargin(e,this.target,this._getMouseColumn(t),t,n,s)}fulfillViewZone(e,t,n){return sr.createViewZone(e,this.target,this._getMouseColumn(t),t,n)}fulfillContentText(e,t,n){return sr.createContentText(this.target,this._getMouseColumn(e),e,t,n)}fulfillContentEmpty(e,t){return sr.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return sr.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return sr.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return sr.createOverlayWidget(this.target,this._getMouseColumn(),e)}}const Vz={isAfterLines:!0};function pA(i){return{isAfterLines:!1,horizontalDistanceToText:i}}uc(pA,"createEmptyContentDataInLines");class ir{static{uc(this,"MouseTargetFactory")}_context;_viewHelper;constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=oh.collect(t,this._viewHelper.viewDomNode);return!!(fr.isChildOfContentWidgets(n)||fr.isChildOfOverflowingContentWidgets(n)||fr.isChildOfOverlayWidgets(n)||fr.isChildOfOverflowingOverlayWidgets(n))}createMouseTarget(e,t,n,s,o){const r=new Dy(this._context,this._viewHelper,e),a=new F5e(r,t,n,s,o);try{const l=ir._createMouseTarget(r,a);if(l.type===Ot.CONTENT_TEXT&&r.stickyTabStops&&l.position!==null){const c=ir._snapToSoftTabBoundary(l.position,r.viewModel),d=V.fromPositions(c,c).plusRange(l.range);return a.fulfillContentText(c,d,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t){if(t.target===null)return t.fulfillUnknown();const n=t;let s=null;return!fr.isChildOfOverflowGuard(t.targetPath)&&!fr.isChildOfOverflowingContentWidgets(t.targetPath)&&!fr.isChildOfOverflowingOverlayWidgets(t.targetPath)&&(s=s||t.fulfillUnknown()),s=s||ir._hitTestContentWidget(e,n),s=s||ir._hitTestOverlayWidget(e,n),s=s||ir._hitTestMinimap(e,n),s=s||ir._hitTestScrollbarSlider(e,n),s=s||ir._hitTestViewZone(e,n),s=s||ir._hitTestMargin(e,n),s=s||ir._hitTestViewCursor(e,n),s=s||ir._hitTestTextArea(e,n),s=s||ir._hitTestViewLines(e,n),s=s||ir._hitTestScrollbar(e,n),s||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(fr.isChildOfContentWidgets(t.targetPath)||fr.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillContentWidget(n):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(fr.isChildOfOverlayWidgets(t.targetPath)||fr.isChildOfOverflowingOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillOverlayWidget(n):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const s of n)if(t.target===s.domNode)return t.fulfillContentText(s.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,s=t.mouseContentHorizontalOffset,o=t.mouseVerticalOffset;for(const r of n){if(s<r.contentLeft||s>r.contentLeft+r.width)continue;const a=e.getVerticalOffsetForLineNumber(r.position.lineNumber);if(a<=o&&o<=a+r.height)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const s=t.isInContentArea?Ot.CONTENT_VIEW_ZONE:Ot.GUTTER_VIEW_ZONE;return t.fulfillViewZone(s,n.position,n)}return null}static _hitTestTextArea(e,t){return fr.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),s=n.range.getStartPosition();let o=Math.abs(t.relativePos.x);const r={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:o};if(o-=e.layoutInfo.glyphMarginLeft,o<=e.layoutInfo.glyphMarginWidth){const a=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(n.range.getStartPosition()),l=e.viewModel.glyphLanes.getLanesAtLine(a.lineNumber);return r.glyphMarginLane=l[Math.floor(o/e.lineHeight)],t.fulfillMargin(Ot.GUTTER_GLYPH_MARGIN,s,n.range,r)}return o-=e.layoutInfo.glyphMarginWidth,o<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(Ot.GUTTER_LINE_NUMBERS,s,n.range,r):(o-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(Ot.GUTTER_LINE_DECORATIONS,s,n.range,r))}return null}static _hitTestViewLines(e,t){if(!fr.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new j(1,1),Vz);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const s=e.viewModel.getLineCount(),o=e.viewModel.getLineMaxColumn(s);return t.fulfillContentEmpty(new j(s,o),Vz)}if(fr.isStrictChildOfViewLines(t.targetPath)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(s)===0){const r=e.getLineWidth(s),a=pA(t.mouseContentHorizontalOffset-r);return t.fulfillContentEmpty(new j(s,1),a)}const o=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>=o){const r=pA(t.mouseContentHorizontalOffset-o),a=new j(s,e.viewModel.getLineMaxColumn(s));return t.fulfillContentEmpty(a,r)}}const n=t.hitTestResult.value;return n.type===1?ir.createMouseTargetFromHitTestPosition(e,t,n.spanNode,n.position,n.injectedText):t.wouldBenefitFromHitTestTargetSwitch?(t.switchToHitTestTarget(),this._createMouseTarget(e,t)):t.fulfillUnknown()}static _hitTestMinimap(e,t){if(fr.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new j(n,s))}return null}static _hitTestScrollbarSlider(e,t){if(fr.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.viewModel.getLineMaxColumn(s);return t.fulfillScrollbar(new j(s,o))}}return null}static _hitTestScrollbar(e,t){if(fr.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new j(n,s))}return null}getMouseColumn(e){const t=this._context.configuration.options,n=t.get(k.layoutInfo),s=this._context.viewLayout.getCurrentScrollLeft()+e.x-n.contentLeft;return ir._getMouseColumn(s,t.get(k.fontInfo).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,s,o){const r=s.lineNumber,a=s.column,l=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>l){const w=pA(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(s,w)}const c=e.visibleRangeForPosition(r,a);if(!c)return t.fulfillUnknown(s);const d=c.left;if(Math.abs(t.mouseContentHorizontalOffset-d)<1)return t.fulfillContentText(s,null,{mightBeForeignElement:!!o,injectedText:o});const h=[];if(h.push({offset:c.left,column:a}),a>1){const w=e.visibleRangeForPosition(r,a-1);w&&h.push({offset:w.left,column:a-1})}const u=e.viewModel.getLineMaxColumn(r);if(a<u){const w=e.visibleRangeForPosition(r,a+1);w&&h.push({offset:w.left,column:a+1})}h.sort((w,v)=>w.offset-v.offset);const f=t.pos.toClientCoordinates(ve(e.viewDomNode)),p=n.getBoundingClientRect(),m=p.left<=f.clientX&&f.clientX<=p.right;let _=null;for(let w=1;w<h.length;w++){const v=h[w-1],b=h[w];if(v.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=b.offset){_=new V(r,v.column,r,b.column);const C=Math.abs(v.offset-t.mouseContentHorizontalOffset),S=Math.abs(b.offset-t.mouseContentHorizontalOffset);s=C<S?new j(r,v.column):new j(r,b.column);break}}return t.fulfillContentText(s,_,{mightBeForeignElement:!m||!!o,injectedText:o})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.getVerticalOffsetForLineNumber(n),o=s+e.lineHeight;if(!(n===e.viewModel.getLineCount()&&t.mouseVerticalOffset>o)){const a=Math.floor((s+o)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const c=new kR(t.pos.x,l),d=this._actualDoHitTestWithCaretRangeFromPoint(e,c.toClientCoordinates(ve(e.viewDomNode)));if(d.type===1)return d}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(ve(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=Pb(e.viewDomNode);let s;if(n?typeof n.caretRangeFromPoint>"u"?s=Kre(n,t.clientX,t.clientY):s=n.caretRangeFromPoint(t.clientX,t.clientY):s=e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!s||!s.startContainer)return new Hf;const o=s.startContainer;if(o.nodeType===o.TEXT_NODE){const r=o.parentNode,a=r?r.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===hg.CLASS_NAME?w_.createFromDOMInfo(e,r,s.startOffset):new Hf(o.parentNode)}else if(o.nodeType===o.ELEMENT_NODE){const r=o.parentNode,a=r?r.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===hg.CLASS_NAME?w_.createFromDOMInfo(e,o,o.textContent.length):new Hf(o)}return new Hf}static _doHitTestWithCaretPositionFromPoint(e,t){const n=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const s=n.offsetNode.parentNode,o=s?s.parentNode:null,r=o?o.parentNode:null;return(r&&r.nodeType===r.ELEMENT_NODE?r.className:null)===hg.CLASS_NAME?w_.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new Hf(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const s=n.offsetNode.parentNode,o=s&&s.nodeType===s.ELEMENT_NODE?s.className:null,r=s?s.parentNode:null,a=r&&r.nodeType===r.ELEMENT_NODE?r.className:null;if(o===hg.CLASS_NAME){const l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return w_.createFromDOMInfo(e,l,0)}else if(a===hg.CLASS_NAME)return w_.createFromDOMInfo(e,n.offsetNode,0)}return new Hf(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:s}=t.model.getOptions(),o=hL.atomicPosition(n,e.column-1,s,Kk.Nearest);return o!==-1?new j(e.lineNumber,o+1):e}static doHitTest(e,t){let n=new Hf;if(typeof e.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(ve(e.viewDomNode)))),n.type===1){const s=e.viewModel.getInjectedTextAt(n.position),o=e.viewModel.normalizePosition(n.position,In.None);(s||!o.equals(n.position))&&(n=new Gre(o,n.spanNode,s))}return n}}function Kre(i,e,t){const n=document.createRange();let s=i.elementFromPoint(e,t);if(s!==null){for(;s&&s.firstChild&&s.firstChild.nodeType!==s.firstChild.TEXT_NODE&&s.lastChild&&s.lastChild.firstChild;)s=s.lastChild;const o=s.getBoundingClientRect(),r=ve(s),a=r.getComputedStyle(s,null).getPropertyValue("font-style"),l=r.getComputedStyle(s,null).getPropertyValue("font-variant"),c=r.getComputedStyle(s,null).getPropertyValue("font-weight"),d=r.getComputedStyle(s,null).getPropertyValue("font-size"),h=r.getComputedStyle(s,null).getPropertyValue("line-height"),u=r.getComputedStyle(s,null).getPropertyValue("font-family"),f=`${a} ${l} ${c} ${d}/${h} ${u}`,p=s.innerText;let m=o.left,_=0,w;if(e>o.left+o.width)_=p.length;else{const v=Nw.getInstance();for(let b=0;b<p.length+1;b++){if(w=v.getCharWidth(p.charAt(b),f)/2,m+=w,e<m){_=b;break}m+=w}}n.setStart(s.firstChild,_),n.setEnd(s.firstChild,_)}return n}uc(Kre,"shadowCaretRangeFromPoint");class Nw{static{uc(this,"CharWidthReader")}static _INSTANCE=null;static getInstance(){return Nw._INSTANCE||(Nw._INSTANCE=new Nw),Nw._INSTANCE}_cache;_canvas;constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const s=this._canvas.getContext("2d");s.font=t;const r=s.measureText(e).width;return this._cache[n]=r,r}}var V5e=Object.defineProperty,W5e=(i,e)=>V5e(i,"name",{value:e,configurable:!0});class C_{static{W5e(this,"ColumnSelection")}static columnSelect(e,t,n,s,o,r){const a=Math.abs(o-n)+1,l=n>o,c=s>r,d=s<r,h=[];for(let u=0;u<a;u++){const f=n+(l?-u:u),p=e.columnFromVisibleColumn(t,f,s),m=e.columnFromVisibleColumn(t,f,r),_=e.visibleColumnFromColumn(t,new j(f,p)),w=e.visibleColumnFromColumn(t,new j(f,m));d&&(_>r||w<s)||c&&(w>s||_<r)||h.push(new no(new V(f,p,f,p),Ga.Simple,0,new j(f,m),0))}if(h.length===0)for(let u=0;u<a;u++){const f=n+(l?-u:u),p=t.getLineMaxColumn(f);h.push(new no(new V(f,p,f,p),Ga.Simple,0,new j(f,p),0))}return{viewStates:h,reversed:l,fromLineNumber:n,fromVisualColumn:s,toLineNumber:o,toVisualColumn:r}}static columnSelectLeft(e,t,n){let s=n.toViewVisualColumn;return s>0&&s--,C_.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,s)}static columnSelectRight(e,t,n){let s=0;const o=Math.min(n.fromViewLineNumber,n.toViewLineNumber),r=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=o;l<=r;l++){const c=t.getLineMaxColumn(l),d=e.visibleColumnFromColumn(t,new j(l,c));s=Math.max(s,d)}let a=n.toViewVisualColumn;return a<s&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,s){const o=s?e.pageSize:1,r=Math.max(1,n.toViewLineNumber-o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}static columnSelectDown(e,t,n,s){const o=s?e.pageSize:1,r=Math.min(t.getLineCount(),n.toViewLineNumber+o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}}var H5e=Object.defineProperty,MD=(i,e)=>H5e(i,"name",{value:e,configurable:!0});class La{static{MD(this,"ReplaceCommand")}_range;_text;insertsAutoWhitespace;constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return St.fromPositions(s.getEndPosition())}}class BGe{static{MD(this,"ReplaceCommandThatSelectsText")}_range;_text;constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return St.fromRange(s,uP.LTR)}}class mA{static{MD(this,"ReplaceCommandWithoutChangingPosition")}_range;_text;insertsAutoWhitespace;constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return St.fromPositions(s.getStartPosition())}}class jk{static{MD(this,"ReplaceCommandWithOffsetCursorState")}_range;_text;_columnDeltaOffset;_lineNumberDeltaOffset;insertsAutoWhitespace;constructor(e,t,n,s,o=!1){this._range=e,this._text=t,this._columnDeltaOffset=s,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=o}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return St.fromPositions(s.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class U5e{static{MD(this,"ReplaceCommandThatPreservesSelection")}_range;_text;_initialSelection;_forceMoveMarkers;_selectionId;constructor(e,t,n,s=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=s,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}var z5e=Object.defineProperty,jre=(i,e)=>z5e(i,"name",{value:e,configurable:!0});class fM{static{jre(this,"CursorPosition")}_cursorPositionBrand=void 0;lineNumber;column;leftoverVisibleColumns;constructor(e,t,n){this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class mi{static{jre(this,"MoveOperations")}static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-d5(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new j(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const s=e.getLineMinColumn(t.lineNumber),o=e.getLineContent(t.lineNumber),r=hL.atomicPosition(o,t.column-1,n,Kk.Left);if(r!==-1&&r+1>=s)return new j(t.lineNumber,r+1)}return this.leftPosition(e,t)}static left(e,t,n){const s=e.stickyTabStops?mi.leftPositionAtomicSoftTabs(t,n,e.tabSize):mi.leftPosition(t,n);return new fM(s.lineNumber,s.column,0)}static moveLeft(e,t,n,s,o){let r,a;if(n.hasSelection()&&!s)r=n.selection.startLineNumber,a=n.selection.startColumn;else{const l=n.position.delta(void 0,-(o-1)),c=t.normalizePosition(mi.clipPositionColumn(l,t),In.Left),d=mi.left(e,t,c);r=d.lineNumber,a=d.column}return n.move(s,r,a,0)}static clipPositionColumn(e,t){return new j(e.lineNumber,mi.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+FN(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new j(t,n)}static rightPositionAtomicSoftTabs(e,t,n,s,o){if(n<e.getLineIndentColumn(t)){const r=e.getLineContent(t),a=hL.atomicPosition(r,n-1,s,Kk.Right);if(a!==-1)return new j(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const s=e.stickyTabStops?mi.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):mi.rightPosition(t,n.lineNumber,n.column);return new fM(s.lineNumber,s.column,0)}static moveRight(e,t,n,s,o){let r,a;if(n.hasSelection()&&!s)r=n.selection.endLineNumber,a=n.selection.endColumn;else{const l=n.position.delta(void 0,o-1),c=t.normalizePosition(mi.clipPositionColumn(l,t),In.Right),d=mi.right(e,t,c);r=d.lineNumber,a=d.column}return n.move(s,r,a,0)}static vertical(e,t,n,s,o,r,a,l){const c=Rn.visibleColumnFromColumn(t.getLineContent(n),s,e.tabSize)+o,d=t.getLineCount(),h=n===1&&s===1,u=n===d&&s===t.getLineMaxColumn(n),f=r<n?h:u;if(n=r,n<1?(n=1,a?s=t.getLineMinColumn(n):s=Math.min(t.getLineMaxColumn(n),s)):n>d?(n=d,a?s=t.getLineMaxColumn(n):s=Math.min(t.getLineMaxColumn(n),s)):s=e.columnFromVisibleColumn(t,n,c),f?o=0:o=c-Rn.visibleColumnFromColumn(t.getLineContent(n),s,e.tabSize),l!==void 0){const p=new j(n,s),m=t.normalizePosition(p,l);o=o+(s-m.column),n=m.lineNumber,s=m.column}return new fM(n,s,o)}static down(e,t,n,s,o,r,a){return this.vertical(e,t,n,s,o,n+r,a,In.RightOfInjectedText)}static moveDown(e,t,n,s,o){let r,a;n.hasSelection()&&!s?(r=n.selection.endLineNumber,a=n.selection.endColumn):(r=n.position.lineNumber,a=n.position.column);let l=0,c;do if(c=mi.down(e,t,r+l,a,n.leftoverVisibleColumns,o,!0),t.normalizePosition(new j(c.lineNumber,c.column),In.None).lineNumber>r)break;while(l++<10&&r+l<t.getLineCount());return n.move(s,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateDown(e,t,n){const s=n.selection,o=mi.down(e,t,s.selectionStartLineNumber,s.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),r=mi.down(e,t,s.positionLineNumber,s.positionColumn,n.leftoverVisibleColumns,1,!1);return new no(new V(o.lineNumber,o.column,o.lineNumber,o.column),Ga.Simple,o.leftoverVisibleColumns,new j(r.lineNumber,r.column),r.leftoverVisibleColumns)}static up(e,t,n,s,o,r,a){return this.vertical(e,t,n,s,o,n-r,a,In.LeftOfInjectedText)}static moveUp(e,t,n,s,o){let r,a;n.hasSelection()&&!s?(r=n.selection.startLineNumber,a=n.selection.startColumn):(r=n.position.lineNumber,a=n.position.column);const l=mi.up(e,t,r,a,n.leftoverVisibleColumns,o,!0);return n.move(s,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){const s=n.selection,o=mi.up(e,t,s.selectionStartLineNumber,s.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),r=mi.up(e,t,s.positionLineNumber,s.positionColumn,n.leftoverVisibleColumns,1,!1);return new no(new V(o.lineNumber,o.column,o.lineNumber,o.column),Ga.Simple,o.leftoverVisibleColumns,new j(r.lineNumber,r.column),r.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,s){let o=n.position.lineNumber;for(;o>1&&this._isBlankLine(t,o);)o--;for(;o>1&&!this._isBlankLine(t,o);)o--;return n.move(s,o,t.getLineMinColumn(o),0)}static moveToNextBlankLine(e,t,n,s){const o=t.getLineCount();let r=n.position.lineNumber;for(;r<o&&this._isBlankLine(t,r);)r++;for(;r<o&&!this._isBlankLine(t,r);)r++;return n.move(s,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,n,s){const o=n.position.lineNumber,r=t.getLineMinColumn(o),a=t.getLineFirstNonWhitespaceColumn(o)||r;let l;return n.position.column===a?l=r:l=a,n.move(s,o,l,0)}static moveToEndOfLine(e,t,n,s,o){const r=n.position.lineNumber,a=t.getLineMaxColumn(r);return n.move(s,r,a,o?fn.MAX_SAFE_SMALL_INTEGER-a:0)}static moveToBeginningOfBuffer(e,t,n,s){return n.move(s,1,1,0)}static moveToEndOfBuffer(e,t,n,s){const o=t.getLineCount(),r=t.getLineMaxColumn(o);return n.move(s,o,r,0)}}var $5e=Object.defineProperty,G5e=(i,e)=>$5e(i,"name",{value:e,configurable:!0});class tv{static{G5e(this,"DeleteOperations")}static deleteRight(e,t,n,s){const o=[];let r=e!==Zi.DeletingRight;for(let a=0,l=s.length;a<l;a++){const c=s[a];let d=c;if(d.isEmpty()){const h=c.getPosition(),u=mi.right(t,n,h);d=new V(u.lineNumber,u.column,h.lineNumber,h.column)}if(d.isEmpty()){o[a]=null;continue}d.startLineNumber!==d.endLineNumber&&(r=!0),o[a]=new La(d,"")}return[r,o]}static isAutoClosingPairDelete(e,t,n,s,o,r,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,c=r.length;l<c;l++){const d=r[l],h=d.getPosition();if(!d.isEmpty())return!1;const u=o.getLineContent(h.lineNumber);if(h.column<2||h.column>=u.length+1)return!1;const f=u.charAt(h.column-2),p=s.get(f);if(!p)return!1;if(nf(f)){if(n==="never")return!1}else if(t==="never")return!1;const m=u.charAt(h.column-1);let _=!1;for(const w of p)w.open===f&&w.close===m&&(_=!0);if(!_)return!1;if(e==="auto"){let w=!1;for(let v=0,b=a.length;v<b;v++){const C=a[v];if(h.lineNumber===C.startLineNumber&&h.column===C.startColumn){w=!0;break}}if(!w)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){const s=[];for(let o=0,r=n.length;o<r;o++){const a=n[o].getPosition(),l=new V(a.lineNumber,a.column-1,a.lineNumber,a.column+1);s[o]=new La(l,"")}return[!0,s]}static deleteLeft(e,t,n,s,o){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,s,o))return this._runAutoClosingPairDelete(t,n,s);const r=[];let a=e!==Zi.DeletingLeft;for(let l=0,c=s.length;l<c;l++){const d=tv.getDeleteRange(s[l],n,t);if(d.isEmpty()){r[l]=null;continue}d.startLineNumber!==d.endLineNumber&&(a=!0),r[l]=new La(d,"")}return[a,r]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const s=e.getPosition();if(n.useTabStops&&s.column>1){const o=t.getLineContent(s.lineNumber),r=ia(o),a=r===-1?o.length+1:r+1;if(s.column<=a){const l=n.visibleColumnFromColumn(t,s),c=Rn.prevIndentTabStop(l,n.indentSize),d=n.columnFromVisibleColumn(t,s.lineNumber,c);return new V(s.lineNumber,d,s.lineNumber,s.column)}}return V.fromPositions(tv.getPositionAfterDeleteLeft(s,t),s)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=VK(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new j(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){const s=[];let o=null;n.sort((r,a)=>j.compare(r.getStartPosition(),a.getEndPosition()));for(let r=0,a=n.length;r<a;r++){const l=n[r];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let d,h,u,f;c.lineNumber<t.getLineCount()?(d=c.lineNumber,h=1,u=c.lineNumber+1,f=1):c.lineNumber>1&&o?.endLineNumber!==c.lineNumber?(d=c.lineNumber-1,h=t.getLineMaxColumn(c.lineNumber-1),u=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber)):(d=c.lineNumber,h=1,u=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber));const p=new V(d,h,u,f);o=p,p.isEmpty()?s[r]=null:s[r]=new La(p,"")}else s[r]=null;else s[r]=new La(l,"")}return new aa(Zi.Other,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}var K5e=Object.defineProperty,Pw=(i,e)=>K5e(i,"name",{value:e,configurable:!0});class pi{static{Pw(this,"WordOperations")}static _createWord(e,t,n,s,o){return{start:s,end:o,wordType:t,nextCharClass:n}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,n){const s=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(s,e,n)}static _doFindPreviousWordOnLine(e,t,n){let s=0;const o=t.findPrevIntlWordBeforeOrAtOffset(e,n.column-2);for(let r=n.column-2;r>=0;r--){const a=e.charCodeAt(r),l=t.get(a);if(o&&r===o.index)return this._createIntlWord(o,l);if(l===ts.Regular){if(s===2)return this._createWord(e,s,l,r+1,this._findEndOfWord(e,t,s,r+1));s=1}else if(l===ts.WordSeparator){if(s===1)return this._createWord(e,s,l,r+1,this._findEndOfWord(e,t,s,r+1));s=2}else if(l===ts.Whitespace&&s!==0)return this._createWord(e,s,l,r+1,this._findEndOfWord(e,t,s,r+1))}return s!==0?this._createWord(e,s,ts.Whitespace,0,this._findEndOfWord(e,t,s,0)):null}static _findEndOfWord(e,t,n,s){const o=t.findNextIntlWordAtOrAfterOffset(e,s),r=e.length;for(let a=s;a<r;a++){const l=e.charCodeAt(a),c=t.get(l);if(o&&a===o.index+o.segment.length||c===ts.Whitespace||n===1&&c===ts.WordSeparator||n===2&&c===ts.Regular)return a}return r}static _findNextWordOnLine(e,t,n){const s=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(s,e,n)}static _doFindNextWordOnLine(e,t,n){let s=0;const o=e.length,r=t.findNextIntlWordAtOrAfterOffset(e,n.column-1);for(let a=n.column-1;a<o;a++){const l=e.charCodeAt(a),c=t.get(l);if(r&&a===r.index)return this._createIntlWord(r,c);if(c===ts.Regular){if(s===2)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a);s=1}else if(c===ts.WordSeparator){if(s===1)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a);s=2}else if(c===ts.Whitespace&&s!==0)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a)}return s!==0?this._createWord(e,s,ts.Whitespace,this._findStartOfWord(e,t,s,o-1),o):null}static _findStartOfWord(e,t,n,s){const o=t.findPrevIntlWordBeforeOrAtOffset(e,s);for(let r=s;r>=0;r--){const a=e.charCodeAt(r),l=t.get(a);if(o&&r===o.index)return r;if(l===ts.Whitespace||n===1&&l===ts.WordSeparator||n===2&&l===ts.Regular)return r+1}return 0}static moveWordLeft(e,t,n,s,o){let r=n.lineNumber,a=n.column;a===1&&r>1&&(r=r-1,a=t.getLineMaxColumn(r));let l=pi._findPreviousWordOnLine(e,t,new j(r,a));if(s===0)return new j(r,l?l.start+1:1);if(s===1)return!o&&l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===ts.Regular&&(l=pi._findPreviousWordOnLine(e,t,new j(r,l.start+1))),new j(r,l?l.start+1:1);if(s===3){for(;l&&l.wordType===2;)l=pi._findPreviousWordOnLine(e,t,new j(r,l.start+1));return new j(r,l?l.start+1:1)}return l&&a<=l.end+1&&(l=pi._findPreviousWordOnLine(e,t,new j(r,l.start+1))),new j(r,l?l.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,s=e.getLineMaxColumn(n);if(t.column===1)return n>1?new j(n-1,e.getLineMaxColumn(n-1)):t;const o=e.getLineContent(n);for(let r=t.column-1;r>1;r--){const a=o.charCodeAt(r-2),l=o.charCodeAt(r-1);if(a===A.Underline&&l!==A.Underline)return new j(n,r);if(a===A.Dash&&l!==A.Dash)return new j(n,r);if((L_(a)||n1(a))&&Qu(l))return new j(n,r);if(Qu(a)&&Qu(l)&&r+1<s){const c=o.charCodeAt(r);if(L_(c)||n1(c))return new j(n,r)}}return new j(n,1)}static moveWordRight(e,t,n,s){let o=n.lineNumber,r=n.column,a=!1;r===t.getLineMaxColumn(o)&&o<t.getLineCount()&&(a=!0,o=o+1,r=1);let l=pi._findNextWordOnLine(e,t,new j(o,r));if(s===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===ts.Regular&&(l=pi._findNextWordOnLine(e,t,new j(o,l.end+1))),l?r=l.end+1:r=t.getLineMaxColumn(o);else if(s===3){for(a&&(r=0);l&&(l.wordType===2||l.start+1<=r);)l=pi._findNextWordOnLine(e,t,new j(o,l.end+1));l?r=l.start+1:r=t.getLineMaxColumn(o)}else l&&!a&&r>=l.start+1&&(l=pi._findNextWordOnLine(e,t,new j(o,l.end+1))),l?r=l.start+1:r=t.getLineMaxColumn(o);return new j(o,r)}static _moveWordPartRight(e,t){const n=t.lineNumber,s=e.getLineMaxColumn(n);if(t.column===s)return n<e.getLineCount()?new j(n+1,1):t;const o=e.getLineContent(n);for(let r=t.column+1;r<s;r++){const a=o.charCodeAt(r-2),l=o.charCodeAt(r-1);if(a!==A.Underline&&l===A.Underline)return new j(n,r);if(a!==A.Dash&&l===A.Dash)return new j(n,r);if((L_(a)||n1(a))&&Qu(l))return new j(n,r);if(Qu(a)&&Qu(l)&&r+1<s){const c=o.charCodeAt(r);if(L_(c)||n1(c))return new j(n,r)}}return new j(n,s)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=t.column-2,o=nm(n,s);return o+1<s?new V(t.lineNumber,o+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,s=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;if(tv.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const h=e.selection.getPosition();return new V(h.lineNumber,h.column-1,h.lineNumber,h.column+1)}const a=new j(o.positionLineNumber,o.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(r){const h=this._deleteWordLeftWhitespace(s,a);if(h)return h}let d=pi._findPreviousWordOnLine(n,s,a);return t===0?d?c=d.start+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l)):(d&&c<=d.end+1&&(d=pi._findPreviousWordOnLine(n,s,new j(l,d.start+1))),d?c=d.end+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l))),new V(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const s=new j(n.positionLineNumber,n.positionColumn),o=this._deleteInsideWordWhitespace(t,s);return o||this._deleteInsideWordDetermineDeleteRange(e,t,s)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===A.Space||n===A.Tab}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=n.length;if(s===0)return null;let o=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,o))return null;let r=Math.min(t.column-1,s-1);if(!this._charAtIsWhitespace(n,r))return null;for(;o>0&&this._charAtIsWhitespace(n,o-1);)o--;for(;r+1<s&&this._charAtIsWhitespace(n,r+1);)r++;return new V(t.lineNumber,o+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const s=t.getLineContent(n.lineNumber),o=s.length;if(o===0)return n.lineNumber>1?new V(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new V(n.lineNumber,1,n.lineNumber+1,1):new V(n.lineNumber,1,n.lineNumber,1);const r=Pw(h=>h.start+1<=n.column&&n.column<=h.end+1,"touchesWord"),a=Pw((h,u)=>(h=Math.min(h,n.column),u=Math.max(u,n.column),new V(n.lineNumber,h,n.lineNumber,u)),"createRangeWithPosition"),l=Pw(h=>{let u=h.start+1,f=h.end+1,p=!1;for(;f-1<o&&this._charAtIsWhitespace(s,f-1);)p=!0,f++;if(!p)for(;u>1&&this._charAtIsWhitespace(s,u-2);)u--;return a(u,f)},"deleteWordAndAdjacentWhitespace"),c=pi._findPreviousWordOnLine(e,t,n);if(c&&r(c))return l(c);const d=pi._findNextWordOnLine(e,t,n);return d&&r(d)?l(d):c&&d?a(c.end+1,d.start+1):c?a(c.start+1,c.end+1):d?a(d.start+1,d.end+1):a(1,o+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),s=pi._moveWordPartLeft(e,n);return new V(n.lineNumber,n.column,s.lineNumber,s.column)}static _findFirstNonWhitespaceChar(e,t){const n=e.length;for(let s=t;s<n;s++){const o=e.charAt(s);if(o!==" "&&o!=="	")return s}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=t.column-1,o=this._findFirstNonWhitespaceChar(n,s);return s+1<o?new V(t.lineNumber,t.column,t.lineNumber,o+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,s=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;const a=new j(o.positionLineNumber,o.positionColumn);let l=a.lineNumber,c=a.column;const d=s.getLineCount(),h=s.getLineMaxColumn(l);if(l===d&&c===h)return null;if(r){const f=this._deleteWordRightWhitespace(s,a);if(f)return f}let u=pi._findNextWordOnLine(n,s,a);return t===2?u?c=u.end+1:c<h||l===d?c=h:(l++,u=pi._findNextWordOnLine(n,s,new j(l,1)),u?c=u.start+1:c=s.getLineMaxColumn(l)):(u&&c>=u.start+1&&(u=pi._findNextWordOnLine(n,s,new j(l,u.end+1))),u?c=u.start+1:c<h||l===d?c=h:(l++,u=pi._findNextWordOnLine(n,s,new j(l,1)),u?c=u.start+1:c=s.getLineMaxColumn(l))),new V(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),s=pi._moveWordPartRight(e,n);return new V(n.lineNumber,n.column,s.lineNumber,s.column)}static _createWordAtPosition(e,t,n){const s=new V(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(s),startColumn:s.startColumn,endColumn:s.endColumn}}static getWordAtPosition(e,t,n,s){const o=Fb(t,n),r=pi._findPreviousWordOnLine(o,e,s);if(r&&r.wordType===1&&r.start<=s.column-1&&s.column-1<=r.end)return pi._createWordAtPosition(e,s.lineNumber,r);const a=pi._findNextWordOnLine(o,e,s);return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?pi._createWordAtPosition(e,s.lineNumber,a):null}static word(e,t,n,s,o){const r=Fb(e.wordSeparators,e.wordSegmenterLocales),a=pi._findPreviousWordOnLine(r,t,o),l=pi._findNextWordOnLine(r,t,o);if(!s){let f,p;return a&&a.wordType===1&&a.start<=o.column-1&&o.column-1<=a.end?(f=a.start+1,p=a.end+1):l&&l.wordType===1&&l.start<=o.column-1&&o.column-1<=l.end?(f=l.start+1,p=l.end+1):(a?f=a.end+1:f=1,l?p=l.start+1:p=t.getLineMaxColumn(o.lineNumber)),new no(new V(o.lineNumber,f,o.lineNumber,p),Ga.Word,0,new j(o.lineNumber,p),0)}let c,d;a&&a.wordType===1&&a.start<o.column-1&&o.column-1<a.end?(c=a.start+1,d=a.end+1):l&&l.wordType===1&&l.start<o.column-1&&o.column-1<l.end?(c=l.start+1,d=l.end+1):(c=o.column,d=o.column);const h=o.lineNumber;let u;if(n.selectionStart.containsPosition(o))u=n.selectionStart.endColumn;else if(o.isBeforeOrEqual(n.selectionStart.getStartPosition())){u=c;const f=new j(h,u);n.selectionStart.containsPosition(f)&&(u=n.selectionStart.endColumn)}else{u=d;const f=new j(h,u);n.selectionStart.containsPosition(f)&&(u=n.selectionStart.startColumn)}return n.move(!0,h,u,0)}}class FGe extends pi{static{Pw(this,"WordPartOperations")}static deleteWordPartLeft(e){const t=P1([pi.deleteWordLeft(e,0),pi.deleteWordLeft(e,2),pi._deleteWordPartLeft(e.model,e.selection)]);return t.sort(V.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=P1([pi.deleteWordRight(e,0),pi.deleteWordRight(e,2),pi._deleteWordPartRight(e.model,e.selection)]);return t.sort(V.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n,s){const o=P1([pi.moveWordLeft(e,t,n,0,s),pi.moveWordLeft(e,t,n,2,s),pi._moveWordPartLeft(t,n)]);return o.sort(j.compare),o[2]}static moveWordPartRight(e,t,n){const s=P1([pi.moveWordRight(e,t,n,0),pi.moveWordRight(e,t,n,2),pi._moveWordPartRight(t,n)]);return s.sort(j.compare),s[0]}}function P1(i){return i.filter(e=>!!e)}Pw(P1,"enforceDefined");var j5e=Object.defineProperty,y4=(i,e)=>j5e(i,"name",{value:e,configurable:!0});class Qo{static{y4(this,"CursorMoveCommands")}static addCursorDown(e,t,n){const s=[];let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];s[o++]=new Tt(l.modelState,l.viewState),n?s[o++]=Tt.fromModelState(mi.translateDown(e.cursorConfig,e.model,l.modelState)):s[o++]=Tt.fromViewState(mi.translateDown(e.cursorConfig,e,l.viewState))}return s}static addCursorUp(e,t,n){const s=[];let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];s[o++]=new Tt(l.modelState,l.viewState),n?s[o++]=Tt.fromModelState(mi.translateUp(e.cursorConfig,e.model,l.modelState)):s[o++]=Tt.fromViewState(mi.translateUp(e.cursorConfig,e,l.viewState))}return s}static moveToBeginningOfLine(e,t,n){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];s[o]=this._moveToLineStart(e,a,n)}return s}static _moveToLineStart(e,t,n){const s=t.viewState.position.column,o=t.modelState.position.column,r=s===o,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!r&&!(s===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return Tt.fromViewState(mi.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return Tt.fromModelState(mi.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=this._moveToLineEnd(e,l,n,s)}return o}static _moveToLineEnd(e,t,n,s){const o=t.viewState.position,r=e.getLineMaxColumn(o.lineNumber),a=o.column===r,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),d=r-o.column===c-l.column;return a||d?this._moveToLineEndByModel(e,t,n,s):this._moveToLineEndByView(e,t,n,s)}static _moveToLineEndByView(e,t,n,s){return Tt.fromViewState(mi.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,s))}static _moveToLineEndByModel(e,t,n,s){return Tt.fromModelState(mi.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,s))}static expandLineSelection(e,t){const n=[];for(let s=0,o=t.length;s<o;s++){const r=t[s],a=r.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=r.modelState.selection.endLineNumber,d;c===l?d=e.model.getLineMaxColumn(l):(c++,d=1),n[s]=Tt.fromModelState(new no(new V(a,1,a,1),Ga.Simple,0,new j(c,d),0))}return n}static moveToBeginningOfBuffer(e,t,n){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];s[o]=Tt.fromModelState(mi.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return s}static moveToEndOfBuffer(e,t,n){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];s[o]=Tt.fromModelState(mi.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return s}static selectAll(e,t){const n=e.model.getLineCount(),s=e.model.getLineMaxColumn(n);return Tt.fromModelState(new no(new V(1,1,1,1),Ga.Simple,0,new j(n,s),0))}static line(e,t,n,s,o){const r=e.model.validatePosition(s),a=o?e.coordinatesConverter.validateViewPosition(new j(o.lineNumber,o.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);if(!n){const c=e.model.getLineCount();let d=r.lineNumber+1,h=1;return d>c&&(d=c,h=e.model.getLineMaxColumn(d)),Tt.fromModelState(new no(new V(r.lineNumber,1,d,h),Ga.Line,0,new j(d,h),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(r.lineNumber<l)return Tt.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(r.lineNumber>l){const c=e.getLineCount();let d=a.lineNumber+1,h=1;return d>c&&(d=c,h=e.getLineMaxColumn(d)),Tt.fromViewState(t.viewState.move(!0,d,h,0))}else{const c=t.modelState.selectionStart.getEndPosition();return Tt.fromModelState(t.modelState.move(!0,c.lineNumber,c.column,0))}}static word(e,t,n,s){const o=e.model.validatePosition(s);return Tt.fromModelState(pi.word(e.cursorConfig,e.model,t.modelState,n,o))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Tt(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,s=t.viewState.position.column;return Tt.fromViewState(new no(new V(n,s,n,s),Ga.Simple,0,new j(n,s),0))}static moveTo(e,t,n,s,o){if(n){if(t.modelState.selectionStartKind===Ga.Word)return this.word(e,t,n,s);if(t.modelState.selectionStartKind===Ga.Line)return this.line(e,t,n,s,o)}const r=e.model.validatePosition(s),a=o?e.coordinatesConverter.validateViewPosition(new j(o.lineNumber,o.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);return Tt.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,s,o,r){switch(n){case lt.Direction.Left:return r===lt.Unit.HalfLine?this._moveHalfLineLeft(e,t,s):this._moveLeft(e,t,s,o);case lt.Direction.Right:return r===lt.Unit.HalfLine?this._moveHalfLineRight(e,t,s):this._moveRight(e,t,s,o);case lt.Direction.Up:return r===lt.Unit.WrappedLine?this._moveUpByViewLines(e,t,s,o):this._moveUpByModelLines(e,t,s,o);case lt.Direction.Down:return r===lt.Unit.WrappedLine?this._moveDownByViewLines(e,t,s,o):this._moveDownByModelLines(e,t,s,o);case lt.Direction.PrevBlankLine:return r===lt.Unit.WrappedLine?t.map(a=>Tt.fromViewState(mi.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>Tt.fromModelState(mi.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,s)));case lt.Direction.NextBlankLine:return r===lt.Unit.WrappedLine?t.map(a=>Tt.fromViewState(mi.moveToNextBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>Tt.fromModelState(mi.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,s)));case lt.Direction.WrappedLineStart:return this._moveToViewMinColumn(e,t,s);case lt.Direction.WrappedLineFirstNonWhitespaceCharacter:return this._moveToViewFirstNonWhitespaceColumn(e,t,s);case lt.Direction.WrappedLineColumnCenter:return this._moveToViewCenterColumn(e,t,s);case lt.Direction.WrappedLineEnd:return this._moveToViewMaxColumn(e,t,s);case lt.Direction.WrappedLineLastNonWhitespaceCharacter:return this._moveToViewLastNonWhitespaceColumn(e,t,s);default:return null}}static viewportMove(e,t,n,s,o){const r=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(n){case lt.Direction.ViewPortTop:{const l=this._firstLineNumberInRange(e.model,a,o),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case lt.Direction.ViewPortBottom:{const l=this._lastLineNumberInRange(e.model,a,o),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case lt.Direction.ViewPortCenter:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case lt.Direction.ViewPortIfOutside:{const l=[];for(let c=0,d=t.length;c<d;c++){const h=t[c];l[c]=this.findPositionInViewportIfOutside(e,h,r,s)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,s){const o=t.viewState.position.lineNumber;if(n.startLineNumber<=o&&o<=n.endLineNumber-1)return new Tt(t.modelState,t.viewState);{let r;o>n.endLineNumber-1?r=n.endLineNumber-1:o<n.startLineNumber?r=n.startLineNumber:r=o;const a=mi.vertical(e.cursorConfig,e,o,t.viewState.position.column,t.viewState.leftoverVisibleColumns,r,!1);return Tt.fromViewState(t.viewState.move(s,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.min(t.endLineNumber,s+n-1)}static _lastLineNumberInRange(e,t,n){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.max(s,t.endLineNumber-n+1)}static _moveLeft(e,t,n,s){return t.map(o=>Tt.fromViewState(mi.moveLeft(e.cursorConfig,e,o.viewState,n,s)))}static _moveHalfLineLeft(e,t,n){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);s[o]=Tt.fromViewState(mi.moveLeft(e.cursorConfig,e,a.viewState,n,c))}return s}static _moveRight(e,t,n,s){return t.map(o=>Tt.fromViewState(mi.moveRight(e.cursorConfig,e,o.viewState,n,s)))}static _moveHalfLineRight(e,t,n){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);s[o]=Tt.fromViewState(mi.moveRight(e.cursorConfig,e,a.viewState,n,c))}return s}static _moveDownByViewLines(e,t,n,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=Tt.fromViewState(mi.moveDown(e.cursorConfig,e,l.viewState,n,s))}return o}static _moveDownByModelLines(e,t,n,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=Tt.fromModelState(mi.moveDown(e.cursorConfig,e.model,l.modelState,n,s))}return o}static _moveUpByViewLines(e,t,n,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=Tt.fromViewState(mi.moveUp(e.cursorConfig,e,l.viewState,n,s))}return o}static _moveUpByModelLines(e,t,n,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=Tt.fromModelState(mi.moveUp(e.cursorConfig,e.model,l.modelState,n,s))}return o}static _moveToViewPosition(e,t,n,s,o){return Tt.fromViewState(t.viewState.move(n,s,o,0))}static _moveToModelPosition(e,t,n,s,o){return Tt.fromModelState(t.modelState.move(n,s,o,0))}static _moveToViewMinColumn(e,t,n){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);s[o]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewFirstNonWhitespaceColumn(e,t,n){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);s[o]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewCenterColumn(e,t,n){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);s[o]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewMaxColumn(e,t,n){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);s[o]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewLastNonWhitespaceColumn(e,t,n){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);s[o]=this._moveToViewPosition(e,a,n,l,c)}return s}}var lt;(i=>{const e=y4(function(n){if(!On(n))return!1;const s=n;return!(!hn(s.to)||!oo(s.select)&&!WW(s.select)||!oo(s.by)&&!hn(s.by)||!oo(s.value)&&!Gc(s.value))},"isCursorMoveArgs");i.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},i.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let s;switch(n.to){case i.RawDirection.Left:s=0;break;case i.RawDirection.Right:s=1;break;case i.RawDirection.Up:s=2;break;case i.RawDirection.Down:s=3;break;case i.RawDirection.PrevBlankLine:s=4;break;case i.RawDirection.NextBlankLine:s=5;break;case i.RawDirection.WrappedLineStart:s=6;break;case i.RawDirection.WrappedLineFirstNonWhitespaceCharacter:s=7;break;case i.RawDirection.WrappedLineColumnCenter:s=8;break;case i.RawDirection.WrappedLineEnd:s=9;break;case i.RawDirection.WrappedLineLastNonWhitespaceCharacter:s=10;break;case i.RawDirection.ViewPortTop:s=11;break;case i.RawDirection.ViewPortBottom:s=13;break;case i.RawDirection.ViewPortCenter:s=12;break;case i.RawDirection.ViewPortIfOutside:s=14;break;default:return null}let o=0;switch(n.by){case i.RawUnit.Line:o=1;break;case i.RawUnit.WrappedLine:o=2;break;case i.RawUnit.Character:o=3;break;case i.RawUnit.HalfLine:o=4;break}return{direction:s,unit:o,select:!!n.select,value:n.value||1}}i.parse=t,y4(t,"parse"),(n=>{n[n.Left=0]="Left",n[n.Right=1]="Right",n[n.Up=2]="Up",n[n.Down=3]="Down",n[n.PrevBlankLine=4]="PrevBlankLine",n[n.NextBlankLine=5]="NextBlankLine",n[n.WrappedLineStart=6]="WrappedLineStart",n[n.WrappedLineFirstNonWhitespaceCharacter=7]="WrappedLineFirstNonWhitespaceCharacter",n[n.WrappedLineColumnCenter=8]="WrappedLineColumnCenter",n[n.WrappedLineEnd=9]="WrappedLineEnd",n[n.WrappedLineLastNonWhitespaceCharacter=10]="WrappedLineLastNonWhitespaceCharacter",n[n.ViewPortTop=11]="ViewPortTop",n[n.ViewPortCenter=12]="ViewPortCenter",n[n.ViewPortBottom=13]="ViewPortBottom",n[n.ViewPortIfOutside=14]="ViewPortIfOutside"})(i.Direction||(i.Direction={})),(n=>{n[n.None=0]="None",n[n.Line=1]="Line",n[n.WrappedLine=2]="WrappedLine",n[n.Character=3]="Character",n[n.HalfLine=4]="HalfLine"})(i.Unit||(i.Unit={}))})(lt||(lt={}));var q5e=Object.defineProperty,Wd=(i,e)=>q5e(i,"name",{value:e,configurable:!0});function qre(i,e,t){const n=i.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let s,o=-1;for(s=e-1;s>=1;s--){if(i.tokenization.getLanguageIdAtPosition(s,0)!==n)return o;const r=i.getLineContent(s);if(t.shouldIgnore(s)||/^\s+$/.test(r)||r===""){o=s;continue}return s}}return-1}Wd(qre,"getPrecedingValidLine");function Iy(i,e,t,n=!0,s){if(i<Bc.Full)return null;const o=s.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!o)return null;const r=new Qre(e,o,s);if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const a=qre(e,t,r);if(a<0)return null;if(a<1)return{indentation:"",action:null};if(r.shouldIncrease(a)||r.shouldIndentNextLine(a)){const l=e.getLineContent(a);return{indentation:Co(l),action:so.Indent,line:a}}else if(r.shouldDecrease(a)){const l=e.getLineContent(a);return{indentation:Co(l),action:null,line:a}}else{if(a===1)return{indentation:Co(e.getLineContent(a)),action:null,line:a};const l=a-1,c=o.getIndentMetadata(e.getLineContent(l));if(!(c&(CT.INCREASE_MASK|CT.DECREASE_MASK))&&c&CT.INDENT_NEXTLINE_MASK){let d=0;for(let h=l-1;h>0;h--)if(!r.shouldIndentNextLine(h)){d=h;break}return{indentation:Co(e.getLineContent(d+1)),action:null,line:d+1}}if(n)return{indentation:Co(e.getLineContent(a)),action:null,line:a};for(let d=a;d>0;d--){if(r.shouldIncrease(d))return{indentation:Co(e.getLineContent(d)),action:so.Indent,line:d};if(r.shouldIndentNextLine(d)){let h=0;for(let u=d-1;u>0;u--)if(!r.shouldIndentNextLine(d)){h=u;break}return{indentation:Co(e.getLineContent(h+1)),action:null,line:h+1}}else if(r.shouldDecrease(d))return{indentation:Co(e.getLineContent(d)),action:null,line:d}}return{indentation:Co(e.getLineContent(1)),action:null,line:1}}}Wd(Iy,"getInheritIndentForLine");function Y5e(i,e,t,n,s,o){if(i<Bc.Full)return null;const r=o.getLanguageConfiguration(t);if(!r)return null;const a=o.getLanguageConfiguration(t).indentRulesSupport;if(!a)return null;const l=new Qre(e,a,o),c=Iy(i,e,n,void 0,o);if(c){const d=c.line;if(d!==void 0){let h=!0;for(let u=d;u<n-1;u++)if(!/^\s*$/.test(e.getLineContent(u))){h=!1;break}if(h){const u=r.onEnter(i,"",e.getLineContent(d),"");if(u){let f=Co(e.getLineContent(d));return u.removeText&&(f=f.substring(0,f.length-u.removeText)),u.indentAction===so.Indent||u.indentAction===so.IndentOutdent?f=s.shiftIndent(f):u.indentAction===so.Outdent&&(f=s.unshiftIndent(f)),l.shouldDecrease(n)&&(f=s.unshiftIndent(f)),u.appendText&&(f+=u.appendText),Co(f)}}}return l.shouldDecrease(n)?c.action===so.Indent?c.indentation:s.unshiftIndent(c.indentation):c.action===so.Indent?s.shiftIndent(c.indentation):c.indentation}return null}Wd(Y5e,"getGoodIndentForLine");function Yre(i,e,t,n,s){if(i<Bc.Full)return null;const o=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),r=s.getLanguageConfiguration(o).indentRulesSupport;if(!r)return null;e.tokenization.forceTokenization(t.startLineNumber);const l=new $2(e,s).getProcessedTokenContextAroundRange(t),c=l.afterRangeProcessedTokens,d=l.beforeRangeProcessedTokens,h=Co(d.getLineContent()),u=Xre(e,t.startLineNumber,d),f=BR(e,t.getStartPosition()),p=e.getLineContent(t.startLineNumber),m=Co(p),_=Iy(i,u,t.startLineNumber+1,void 0,s);if(!_){const v=f?m:h;return{beforeEnter:v,afterEnter:v}}let w=f?m:_.indentation;return _.action===so.Indent&&(w=n.shiftIndent(w)),r.shouldDecrease(c.getLineContent())&&(w=n.unshiftIndent(w)),{beforeEnter:f?m:h,afterEnter:w}}Wd(Yre,"getIndentForEnter");function Zre(i,e,t,n,s,o){const r=i.autoIndent;if(r<Bc.Full||BR(e,t.getStartPosition()))return null;const l=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),c=o.getLanguageConfiguration(l).indentRulesSupport;if(!c)return null;const h=new $2(e,o).getProcessedTokenContextAroundRange(t),u=h.beforeRangeProcessedTokens.getLineContent(),f=h.afterRangeProcessedTokens.getLineContent(),p=u+f,m=u+n+f;if(!c.shouldDecrease(p)&&c.shouldDecrease(m)){const w=Iy(r,e,t.startLineNumber,!1,o);if(!w)return null;let v=w.indentation;return w.action!==so.Indent&&(v=s.unshiftIndent(v)),v}const _=t.startLineNumber-1;if(_>0){const w=e.getLineContent(_);if(c.shouldIndentNextLine(w)&&c.shouldIncrease(m)){const b=Iy(r,e,t.startLineNumber,!1,o)?.indentation;if(b!==void 0){const C=e.getLineContent(t.startLineNumber),S=Co(C),T=s.shiftIndent(b)===S,I=/^\s*$/.test(p),R=i.autoClosingPairs.autoClosingPairsOpenByEnd.get(n),K=R&&R.length>0&&I;if(T&&K)return b}}}return null}Wd(Zre,"getIndentActionForType");function Z5e(i,e,t){const n=t.getLanguageConfiguration(i.getLanguageId()).indentRulesSupport;return!n||e<1||e>i.getLineCount()?null:n.getIndentMetadata(i.getLineContent(e))}Wd(Z5e,"getIndentMetadata");function Xre(i,e,t){return{tokenization:{getLineTokens:Wd(s=>s===e?t:i.tokenization.getLineTokens(s),"getLineTokens"),getLanguageId:Wd(()=>i.getLanguageId(),"getLanguageId"),getLanguageIdAtPosition:Wd((s,o)=>i.getLanguageIdAtPosition(s,o),"getLanguageIdAtPosition")},getLineContent:Wd(s=>s===e?t.getLineContent():i.getLineContent(s),"getLineContent")}}Wd(Xre,"createVirtualModelWithModifiedTokensAtLine");var X5e=Object.defineProperty,pb=(i,e)=>X5e(i,"name",{value:e,configurable:!0});class Qre{static{pb(this,"ProcessedIndentRulesSupport")}_indentRulesSupport;_indentationLineProcessor;constructor(e,t,n){this._indentRulesSupport=t,this._indentationLineProcessor=new Jre(e,n)}shouldIncrease(e,t){const n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIncrease(n)}shouldDecrease(e,t){const n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldDecrease(n)}shouldIgnore(e,t){const n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIgnore(n)}shouldIndentNextLine(e,t){const n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIndentNextLine(n)}}class $2{static{pb(this,"IndentationContextProcessor")}model;indentationLineProcessor;constructor(e,t){this.model=e,this.indentationLineProcessor=new Jre(e,t)}getProcessedTokenContextAroundRange(e){const t=this._getProcessedTokensBeforeRange(e),n=this._getProcessedTokensAfterRange(e),s=this._getProcessedPreviousLineTokens(e);return{beforeRangeProcessedTokens:t,afterRangeProcessedTokens:n,previousLineProcessedTokens:s}}_getProcessedTokensBeforeRange(e){this.model.tokenization.forceTokenization(e.startLineNumber);const t=this.model.tokenization.getLineTokens(e.startLineNumber),n=Cp(t,e.startColumn-1);let s;if(BR(this.model,e.getStartPosition())){const r=e.startColumn-1-n.firstCharOffset,a=n.firstCharOffset,l=a+r;s=t.sliceAndInflate(a,l,0)}else{const r=e.startColumn-1;s=t.sliceAndInflate(0,r,0)}return this.indentationLineProcessor.getProcessedTokens(s)}_getProcessedTokensAfterRange(e){const t=e.isEmpty()?e.getStartPosition():e.getEndPosition();this.model.tokenization.forceTokenization(t.lineNumber);const n=this.model.tokenization.getLineTokens(t.lineNumber),s=Cp(n,t.column-1),o=t.column-1-s.firstCharOffset,r=s.firstCharOffset+o,a=s.firstCharOffset+s.getLineLength(),l=n.sliceAndInflate(r,a,0);return this.indentationLineProcessor.getProcessedTokens(l)}_getProcessedPreviousLineTokens(e){const t=pb(f=>{this.model.tokenization.forceTokenization(f);const p=this.model.tokenization.getLineTokens(f),m=this.model.getLineMaxColumn(f)-1;return Cp(p,m)},"getScopedLineTokensAtEndColumnOfLine");this.model.tokenization.forceTokenization(e.startLineNumber);const n=this.model.tokenization.getLineTokens(e.startLineNumber),s=Cp(n,e.startColumn-1),o=ds.createEmpty("",s.languageIdCodec),r=e.startLineNumber-1;if(r===0||!(s.firstCharOffset===0))return o;const c=t(r);if(!(s.languageId===c.languageId))return o;const h=c.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(h)}}class Jre{constructor(e,t){this.model=e,this.languageConfigurationService=t}static{pb(this,"IndentationLineProcessor")}getProcessedLine(e,t){const n=pb((r,a)=>{const l=Co(r);return a+r.substring(l.length)},"replaceIndentation");this.model.tokenization.forceTokenization?.(e);const s=this.model.tokenization.getLineTokens(e);let o=this.getProcessedTokens(s).getLineContent();return t!==void 0&&(o=n(o,t)),o}getProcessedTokens(e){const t=pb(l=>l===Lo.String||l===Lo.RegEx||l===Lo.Comment,"shouldRemoveBracketsFromTokenType"),n=e.getLanguageId(0),o=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew.getBracketRegExp({global:!0}),r=[];return e.forEach(l=>{const c=e.getStandardTokenType(l);let d=e.getTokenText(l);t(c)&&(d=d.replace(o,""));const h=e.getMetadata(l);r.push({text:d,metadata:h})}),ds.createFromTextAndMetadata(r,e.languageIdCodec)}}function BR(i,e){i.tokenization.forceTokenization(e.lineNumber);const t=i.tokenization.getLineTokens(e.lineNumber),n=Cp(t,e.column-1),s=n.firstCharOffset===0,o=t.getLanguageId(0)===n.languageId;return!s&&!o}pb(BR,"isLanguageDifferentFromLineStart");var Q5e=Object.defineProperty,J5e=(i,e)=>Q5e(i,"name",{value:e,configurable:!0});function FR(i,e,t,n){e.tokenization.forceTokenization(t.startLineNumber);const s=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),o=n.getLanguageConfiguration(s);if(!o)return null;const a=new $2(e,n).getProcessedTokenContextAroundRange(t),l=a.previousLineProcessedTokens.getLineContent(),c=a.beforeRangeProcessedTokens.getLineContent(),d=a.afterRangeProcessedTokens.getLineContent(),h=o.onEnter(i,l,c,d);if(!h)return null;const u=h.indentAction;let f=h.appendText;const p=h.removeText||0;f?u===so.Indent&&(f="	"+f):u===so.Indent||u===so.IndentOutdent?f="	":f="";let m=zH(e,t.startLineNumber,t.startColumn);return p&&(m=m.substring(0,m.length-p)),{indentAction:u,appendText:f,removeText:p,indentation:m}}J5e(FR,"getEnterAction");var eae=Object.defineProperty,eHe=Object.getOwnPropertyDescriptor,tae=(i,e)=>eae(i,"name",{value:e,configurable:!0}),tHe=(i,e,t,n)=>{for(var s=n>1?void 0:n?eHe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&eae(e,t,s),s},iHe=(i,e)=>(t,n)=>e(t,n,i);const pM=Object.create(null);function Uf(i,e){if(e<=0)return"";pM[i]||(pM[i]=["",i]);const t=pM[i];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+i;return t[e]}tae(Uf,"cachedStringRepeat");let of=class{constructor(i,e,t){this._languageConfigurationService=t,this._opts=e,this._selection=i,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static{tae(this,"ShiftCommand")}static unshiftIndent(i,e,t,n,s){const o=Rn.visibleColumnFromColumn(i,e,t);if(s){const r=Uf(" ",n),l=Rn.prevIndentTabStop(o,n)/n;return Uf(r,l)}else{const r="	",l=Rn.prevRenderTabStop(o,t)/t;return Uf(r,l)}}static shiftIndent(i,e,t,n,s){const o=Rn.visibleColumnFromColumn(i,e,t);if(s){const r=Uf(" ",n),l=Rn.nextIndentTabStop(o,n)/n;return Uf(r,l)}else{const r="	",l=Rn.nextRenderTabStop(o,t)/t;return Uf(r,l)}}_opts;_selection;_selectionId;_useLastEditRangeForCursorEndPosition;_selectionStartColumnStaysPut;_addEditOperation(i,e,t){this._useLastEditRangeForCursorEndPosition?i.addTrackedEditOperation(e,t):i.addEditOperation(e,t)}getEditOperations(i,e){const t=this._selection.startLineNumber;let n=this._selection.endLineNumber;this._selection.endColumn===1&&t!==n&&(n=n-1);const{tabSize:s,indentSize:o,insertSpaces:r}=this._opts,a=t===n;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(i.getLineContent(t))&&(this._useLastEditRangeForCursorEndPosition=!0);let l=0,c=0;for(let d=t;d<=n;d++,l=c){c=0;const h=i.getLineContent(d);let u=ia(h);if(this._opts.isUnshift&&(h.length===0||u===0)||!a&&!this._opts.isUnshift&&h.length===0)continue;if(u===-1&&(u=h.length),d>1&&Rn.visibleColumnFromColumn(h,u+1,s)%o!==0&&i.tokenization.isCheapToTokenize(d-1)){const m=FR(this._opts.autoIndent,i,new V(d-1,i.getLineMaxColumn(d-1),d-1,i.getLineMaxColumn(d-1)),this._languageConfigurationService);if(m){if(c=l,m.appendText)for(let _=0,w=m.appendText.length;_<w&&c<o&&m.appendText.charCodeAt(_)===A.Space;_++)c++;m.removeText&&(c=Math.max(0,c-m.removeText));for(let _=0;_<c&&!(u===0||h.charCodeAt(u-1)!==A.Space);_++)u--}}if(this._opts.isUnshift&&u===0)continue;let f;this._opts.isUnshift?f=of.unshiftIndent(h,u+1,s,o,r):f=of.shiftIndent(h,u+1,s,o,r),this._addEditOperation(e,new V(d,1,d,u+1),f),d===t&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=u+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&i.getLineLength(t)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const l=r?Uf(" ",o):"	";for(let c=t;c<=n;c++){const d=i.getLineContent(c);let h=ia(d);if(!(this._opts.isUnshift&&(d.length===0||h===0))&&!(!a&&!this._opts.isUnshift&&d.length===0)&&(h===-1&&(h=d.length),!(this._opts.isUnshift&&h===0)))if(this._opts.isUnshift){h=Math.min(h,o);for(let u=0;u<h;u++)if(d.charCodeAt(u)===A.Tab){h=u+1;break}this._addEditOperation(e,new V(c,1,c,h+1),"")}else this._addEditOperation(e,new V(c,1,c,1),l),c===t&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=e.trackSelection(this._selection)}computeCursorState(i,e){if(this._useLastEditRangeForCursorEndPosition){const n=e.getInverseEditOperations()[0];return new St(n.range.endLineNumber,n.range.endColumn,n.range.endLineNumber,n.range.endColumn)}const t=e.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const n=this._selection.startColumn;return t.startColumn<=n?t:t.getDirection()===uP.LTR?new St(t.startLineNumber,n,t.endLineNumber,t.endColumn):new St(t.endLineNumber,t.endColumn,t.startLineNumber,n)}return t}};of=tHe([iHe(2,sD)],of);var nHe=Object.defineProperty,iae=(i,e)=>nHe(i,"name",{value:e,configurable:!0});class sHe{static{iae(this,"SurroundSelectionCommand")}_range;_charBeforeSelection;_charAfterSelection;constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new V(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new V(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const n=t.getInverseEditOperations(),s=n[0].range,o=n[1].range;return new St(s.endLineNumber,s.endColumn,o.endLineNumber,o.endColumn-this._charAfterSelection.length)}}class oHe{constructor(e,t,n){this._position=e,this._text=t,this._charAfter=n}static{iae(this,"CompositionSurroundSelectionCommand")}getEditOperations(e,t){t.addTrackedEditOperation(new V(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return new St(s.endLineNumber,s.startColumn,s.endLineNumber,s.endColumn-this._charAfter.length)}}var rHe=Object.defineProperty,An=(i,e)=>rHe(i,"name",{value:e,configurable:!0});class aHe{static{An(this,"AutoIndentOperation")}static getEdits(e,t,n,s,o){if(!o&&this._isAutoIndentType(e,t,n)){const r=[];for(const l of n){const c=this._findActualIndentationForSelection(e,t,l,s);if(c===null)return;r.push({selection:l,indentation:c})}const a=S4.getAutoClosingPairClose(e,t,n,s,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,r,s,a)}}static _isAutoIndentType(e,t,n){if(e.autoIndent<Bc.Full)return!1;for(let s=0,o=n.length;s<o;s++)if(!t.tokenization.isCheapToTokenize(n[s].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(e,t,n,s){const o=Zre(e,t,n,s,{shiftIndent:An(a=>FD(e,a),"shiftIndent"),unshiftIndent:An(a=>Ty(e,a),"unshiftIndent")},e.languageConfigurationService);if(o===null)return null;const r=zH(t,n.startLineNumber,n.startColumn);return o===e.normalizeIndentation(r)?null:o}static _getIndentationAndAutoClosingPairEdits(e,t,n,s,o){const r=n.map(({selection:l,indentation:c})=>{if(o!==null){const d=this._getEditFromIndentationAndSelection(e,t,c,l,s,!1);return new bHe(d,l,s,o)}else{const d=this._getEditFromIndentationAndSelection(e,t,c,l,s,!0);return qf(d.range,d.text,!1)}}),a={shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1};return new aa(Zi.TypingOther,r,a)}static _getEditFromIndentationAndSelection(e,t,n,s,o,r=!0){const a=s.startLineNumber,l=t.getLineFirstNonWhitespaceColumn(a);let c=e.normalizeIndentation(n);if(l!==0){const h=t.getLineContent(a);c+=h.substring(l-1,s.startColumn-1)}return c+=r?o:"",{range:new V(a,1,s.endLineNumber,s.endColumn),text:c}}}class lHe{static{An(this,"AutoClosingOvertypeOperation")}static getEdits(e,t,n,s,o,r){if(K2(t,n,s,o,r))return this._runAutoClosingOvertype(e,s,r)}static _runAutoClosingOvertype(e,t,n){const s=[];for(let o=0,r=t.length;o<r;o++){const l=t[o].getPosition(),c=new V(l.lineNumber,l.column,l.lineNumber,l.column+1);s[o]=new La(c,n)}return new aa(Zi.TypingOther,s,{shouldPushStackElementBefore:BD(e,Zi.TypingOther),shouldPushStackElementAfter:!1})}}class cHe{static{An(this,"AutoClosingOvertypeWithInterceptorsOperation")}static getEdits(e,t,n,s,o){if(K2(e,t,n,s,o)){const r=n.map(a=>new La(new V(a.positionLineNumber,a.positionColumn,a.positionLineNumber,a.positionColumn+1),"",!1));return new aa(Zi.TypingOther,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}class S4{static{An(this,"AutoClosingOpenCharTypeOperation")}static getEdits(e,t,n,s,o,r){if(!r){const a=this.getAutoClosingPairClose(e,t,n,s,o);if(a!==null)return this._runAutoClosingOpenCharType(n,s,o,a)}}static _runAutoClosingOpenCharType(e,t,n,s){const o=[];for(let r=0,a=e.length;r<a;r++){const l=e[r];o[r]=new _He(l,t,!n,s)}return new aa(Zi.TypingOther,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(e,t,n,s,o){for(const p of n)if(!p.isEmpty())return null;const r=n.map(p=>{const m=p.getPosition();return o?{lineNumber:m.lineNumber,beforeColumn:m.column-s.length,afterColumn:m.column}:{lineNumber:m.lineNumber,beforeColumn:m.column,afterColumn:m.column}}),a=this._findAutoClosingPairOpen(e,t,r.map(p=>new j(p.lineNumber,p.beforeColumn)),s);if(!a)return null;let l,c;if(nf(s)?(l=e.autoClosingQuotes,c=e.shouldAutoCloseBefore.quote):(e.blockCommentStartToken?a.open.includes(e.blockCommentStartToken):!1)?(l=e.autoClosingComments,c=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,c=e.shouldAutoCloseBefore.bracket),l==="never")return null;const h=this._findContainedAutoClosingPair(e,a),u=h?h.close:"";let f=!0;for(const p of r){const{lineNumber:m,beforeColumn:_,afterColumn:w}=p,v=t.getLineContent(m),b=v.substring(0,_-1),C=v.substring(w-1);if(C.startsWith(u)||(f=!1),C.length>0){const I=C.charAt(0);if(!this._isBeforeClosingBrace(e,C)&&!c(I))return null}if(a.open.length===1&&(s==="'"||s==='"')&&l!=="always"){const I=Fb(e.wordSeparators,[]);if(b.length>0){const R=b.charCodeAt(b.length-1);if(I.get(R)===ts.Regular)return null}}if(!t.tokenization.isCheapToTokenize(m))return null;t.tokenization.forceTokenization(m);const S=t.tokenization.getLineTokens(m),D=Cp(S,_-1);if(!a.shouldAutoClose(D,_-D.firstCharOffset))return null;const T=a.findNeutralCharacter();if(T){const I=t.tokenization.getTokenTypeIfInsertingCharacter(m,_,T);if(!a.isOK(I))return null}}return f?a.close.substring(0,a.close.length-u.length):a.close}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),s=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let o=null;for(const r of s)r.open!==t.open&&t.open.includes(r.open)&&t.close.endsWith(r.close)&&(!o||r.open.length>o.open.length)&&(o=r);return o}static _findAutoClosingPairOpen(e,t,n,s){const o=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(s);if(!o)return null;let r=null;for(const a of o)if(r===null||a.open.length>r.open.length){let l=!0;for(const c of n)if(t.getValueInRange(new V(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+s!==a.open){l=!1;break}l&&(r=a)}return r}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),s=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],o=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],r=s.some(l=>t.startsWith(l.open)),a=o.some(l=>t.startsWith(l.close));return!r&&a}}class dHe{static{An(this,"SurroundSelectionOperation")}static getEdits(e,t,n,s,o){if(!o&&this._isSurroundSelectionType(e,t,n,s))return this._runSurroundSelectionType(e,n,s)}static _runSurroundSelectionType(e,t,n){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=e.surroundingPairs[n];s[o]=new sHe(a,n,l)}return new aa(Zi.Other,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(e,t,n,s){if(!j2(e,s)||!e.surroundingPairs.hasOwnProperty(s))return!1;const o=nf(s);for(const r of n){if(r.isEmpty())return!1;let a=!0;for(let l=r.startLineNumber;l<=r.endLineNumber;l++){const c=t.getLineContent(l),d=l===r.startLineNumber?r.startColumn-1:0,h=l===r.endLineNumber?r.endColumn-1:c.length,u=c.substring(d,h);if(/[^ \t]/.test(u)){a=!1;break}}if(a)return!1;if(o&&r.startLineNumber===r.endLineNumber&&r.startColumn+1===r.endColumn){const l=t.getValueInRange(r);if(nf(l))return!1}}return!0}}class hHe{static{An(this,"InterceptorElectricCharOperation")}static getEdits(e,t,n,s,o,r){if(!r&&this._isTypeInterceptorElectricChar(t,n,s)){const a=this._typeInterceptorElectricChar(e,t,n,s[0],o);if(a)return a}}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.tokenization.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,s,o){if(!t.electricChars.hasOwnProperty(o)||!s.isEmpty())return null;const r=s.getPosition();n.tokenization.forceTokenization(r.lineNumber);const a=n.tokenization.getLineTokens(r.lineNumber);let l;try{l=t.onElectricCharacter(o,a,r.column)}catch(c){return Kt(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+o).lastIndexOf(l.matchOpenBracket)+1,d=n.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:r.lineNumber,column:c},500);if(d){if(d.startLineNumber===r.lineNumber)return null;const h=n.getLineContent(d.startLineNumber),u=Co(h),f=t.normalizeIndentation(u),p=n.getLineContent(r.lineNumber),m=n.getLineFirstNonWhitespaceColumn(r.lineNumber)||r.column,_=p.substring(m-1,r.column-1),w=f+_+o,v=new V(r.lineNumber,1,r.lineNumber,r.column),b=new La(v,w);return new aa(VR(w,e),[b],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}class uHe{static{An(this,"SimpleCharacterTypeOperation")}static getEdits(e,t,n){const s=[];for(let r=0,a=t.length;r<a;r++)s[r]=new La(t[r],n);const o=VR(n,e);return new aa(o,s,{shouldPushStackElementBefore:BD(e,o),shouldPushStackElementAfter:!1})}}class nae{static{An(this,"EnterOperation")}static getEdits(e,t,n,s,o){if(!o&&s===`
`){const r=[];for(let a=0,l=n.length;a<l;a++)r[a]=this._enter(e,t,!1,n[a]);return new aa(Zi.TypingOther,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(e,t,n,s){if(e.autoIndent===Bc.None)return qf(s,`
`,n);if(!t.tokenization.isCheapToTokenize(s.getStartPosition().lineNumber)||e.autoIndent===Bc.Keep){const l=t.getLineContent(s.startLineNumber),c=Co(l).substring(0,s.startColumn-1);return qf(s,`
`+e.normalizeIndentation(c),n)}const o=FR(e.autoIndent,t,s,e.languageConfigurationService);if(o){if(o.indentAction===so.None)return qf(s,`
`+e.normalizeIndentation(o.indentation+o.appendText),n);if(o.indentAction===so.Indent)return qf(s,`
`+e.normalizeIndentation(o.indentation+o.appendText),n);if(o.indentAction===so.IndentOutdent){const l=e.normalizeIndentation(o.indentation),c=e.normalizeIndentation(o.indentation+o.appendText),d=`
`+c+`
`+l;return n?new mA(s,d,!0):new jk(s,d,-1,c.length-l.length,!0)}else if(o.indentAction===so.Outdent){const l=Ty(e,o.indentation);return qf(s,`
`+e.normalizeIndentation(l+o.appendText),n)}}const r=t.getLineContent(s.startLineNumber),a=Co(r).substring(0,s.startColumn-1);if(e.autoIndent>=Bc.Full){const l=Yre(e.autoIndent,t,s,{unshiftIndent:An(c=>Ty(e,c),"unshiftIndent"),shiftIndent:An(c=>FD(e,c),"shiftIndent"),normalizeIndentation:An(c=>e.normalizeIndentation(c),"normalizeIndentation")},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,s.getEndPosition());const d=s.endColumn,h=t.getLineContent(s.endLineNumber),u=ia(h);if(u>=0?s=s.setEndPosition(s.endLineNumber,Math.max(s.endColumn,u+1)):s=s.setEndPosition(s.endLineNumber,t.getLineMaxColumn(s.endLineNumber)),n)return new mA(s,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return d<=u+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),f=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new jk(s,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return qf(s,`
`+e.normalizeIndentation(a),n)}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];const s=[];for(let o=0,r=n.length;o<r;o++){let a=n[o].positionLineNumber;if(a===1)s[o]=new mA(new V(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);s[o]=this._enter(e,t,!1,new V(a,l,a,l))}}return s}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];const s=[];for(let o=0,r=n.length;o<r;o++){const a=n[o].positionLineNumber,l=t.getLineMaxColumn(a);s[o]=this._enter(e,t,!1,new V(a,l,a,l))}return s}static lineBreakInsert(e,t,n){const s=[];for(let o=0,r=n.length;o<r;o++)s[o]=this._enter(e,t,!0,n[o]);return s}}class gHe{static{An(this,"PasteOperation")}static getEdits(e,t,n,s,o,r){const a=this._distributePasteToCursors(e,n,s,o,r);return a?(n=n.sort(V.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,s,o)}static _distributePasteToCursors(e,t,n,s,o){if(s||t.length===1)return null;if(o&&o.length===t.length)return o;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===A.LineFeed&&(n=n.substring(0,n.length-1)),n.charCodeAt(n.length-1)===A.CarriageReturn&&(n=n.substring(0,n.length-1));const r=xL(n);if(r.length===t.length)return r}return null}static _distributedPaste(e,t,n,s){const o=[];for(let r=0,a=n.length;r<a;r++)o[r]=new La(n[r],s[r]);return new aa(Zi.Other,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,s,o){const r=[];for(let a=0,l=n.length;a<l;a++){const c=n[a],d=c.getPosition();if(o&&!c.isEmpty()&&(o=!1),o&&s.indexOf(`
`)!==s.length-1&&(o=!1),o){const h=new V(d.lineNumber,1,d.lineNumber,1);r[a]=new U5e(h,s,c,!0)}else r[a]=new La(c,s)}return new aa(Zi.Other,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class fHe{static{An(this,"CompositionOperation")}static getEdits(e,t,n,s,o,r,a,l){const c=s.map(d=>this._compositionType(n,d,o,r,a,l));return new aa(Zi.TypingOther,c,{shouldPushStackElementBefore:BD(e,Zi.TypingOther),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,s,o,r){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-s),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+o),d=new V(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(d)===n&&r===0?null:new jk(d,n,0,r)}}class pHe{static{An(this,"TypeWithoutInterceptorsOperation")}static getEdits(e,t,n){const s=[];for(let r=0,a=t.length;r<a;r++)s[r]=new La(t[r],n);const o=VR(n,e);return new aa(o,s,{shouldPushStackElementBefore:BD(e,o),shouldPushStackElementAfter:!1})}}class mHe{static{An(this,"TabOperation")}static getCommands(e,t,n){const s=[];for(let o=0,r=n.length;o<r;o++){const a=n[o];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const d=e.normalizeIndentation(c);if(!l.startsWith(d)){s[o]=new La(new V(a.startLineNumber,1,a.startLineNumber,l.length+1),d,!0);continue}}s[o]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){s[o]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}s[o]=new of(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return s}static _goodIndentForLine(e,t,n){let s=null,o="";const r=Iy(e.autoIndent,t,n,!1,e.languageConfigurationService);if(r)s=r.action,o=r.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const d=t.getLineContent(a);if(nm(d)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=FR(e.autoIndent,t,new V(a,l,a,l),e.languageConfigurationService);c&&(o=c.indentation+c.appendText)}return s&&(s===so.Indent&&(o=FD(e,o)),s===so.Outdent&&(o=Ty(e,o)),o=e.normalizeIndentation(o)),o||null}static _replaceJumpToNextIndent(e,t,n,s){let o="";const r=n.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,r),l=e.indentSize,c=l-a%l;for(let d=0;d<c;d++)o+=" "}else o="	";return new La(n,o,s)}}class G2 extends jk{static{An(this,"BaseTypeWithAutoClosingCommand")}_openCharacter;_closeCharacter;closeCharacterRange;enclosingRange;constructor(e,t,n,s,o,r){super(e,t,n,s),this._openCharacter=o,this._closeCharacter=r,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(e,t,n){return this.closeCharacterRange=new V(t.startLineNumber,t.endColumn-this._closeCharacter.length,t.endLineNumber,t.endColumn),this.enclosingRange=new V(t.startLineNumber,t.endColumn-this._openCharacter.length-this._closeCharacter.length,t.endLineNumber,t.endColumn),super.computeCursorState(e,n)}}class _He extends G2{static{An(this,"TypeWithAutoClosingCommand")}constructor(e,t,n,s){const o=(n?t:"")+s,r=0,a=-s.length;super(e,o,r,a,t,s)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,s,t)}}class bHe extends G2{static{An(this,"TypeWithIndentationAndAutoClosingCommand")}_autoIndentationEdit;_autoClosingEdit;constructor(e,t,n,s){const o=n+s,r=0,a=n.length;super(t,o,r,a,n,s),this._autoIndentationEdit=e,this._autoClosingEdit={range:t,text:o}}getEditOperations(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(e,t){const n=t.getInverseEditOperations();if(n.length!==2)throw new Error("There should be two inverse edit operations!");const s=n[0].range,o=n[1].range,r=s.plusRange(o);return this._computeCursorStateWithRange(e,r,t)}}function VR(i,e){return i===" "?e===Zi.TypingFirstSpace||e===Zi.TypingConsecutiveSpace?Zi.TypingConsecutiveSpace:Zi.TypingFirstSpace:Zi.TypingOther}An(VR,"getTypingOperation");function BD(i,e){return L4(i)&&!L4(e)?!0:i===Zi.TypingFirstSpace?!1:E4(i)!==E4(e)}An(BD,"shouldPushStackElementBetween");function E4(i){return i===Zi.TypingConsecutiveSpace||i===Zi.TypingFirstSpace?"space":i}An(E4,"normalizeOperationType");function L4(i){return i===Zi.TypingOther||i===Zi.TypingFirstSpace||i===Zi.TypingConsecutiveSpace}An(L4,"isTypingOperation");function K2(i,e,t,n,s){if(i.autoClosingOvertype==="never"||!i.autoClosingPairs.autoClosingPairsCloseSingleChar.has(s))return!1;for(let o=0,r=t.length;o<r;o++){const a=t[o];if(!a.isEmpty())return!1;const l=a.getPosition(),c=e.getLineContent(l.lineNumber);if(c.charAt(l.column-1)!==s)return!1;const h=nf(s);if((l.column>2?c.charCodeAt(l.column-2):A.Null)===A.Backslash&&h)return!1;if(i.autoClosingOvertype==="auto"){let f=!1;for(let p=0,m=n.length;p<m;p++){const _=n[p];if(l.lineNumber===_.startLineNumber&&l.column===_.startColumn){f=!0;break}}if(!f)return!1}}return!0}An(K2,"isAutoClosingOvertype");function qf(i,e,t){return t?new mA(i,e,!0):new La(i,e,!0)}An(qf,"typeCommand");function FD(i,e,t){return t=t||1,of.shiftIndent(e,e.length+t,i.tabSize,i.indentSize,i.insertSpaces)}An(FD,"shiftIndent");function Ty(i,e,t){return t=t||1,of.unshiftIndent(e,e.length+t,i.tabSize,i.indentSize,i.insertSpaces)}An(Ty,"unshiftIndent");function j2(i,e){return nf(e)?i.autoSurround==="quotes"||i.autoSurround==="languageDefined":i.autoSurround==="brackets"||i.autoSurround==="languageDefined"}An(j2,"shouldSurroundChar");var vHe=Object.defineProperty,sae=(i,e)=>vHe(i,"name",{value:e,configurable:!0});class y_{static{sae(this,"TypeOperations")}static indent(e,t,n){if(t===null||n===null)return[];const s=[];for(let o=0,r=n.length;o<r;o++)s[o]=new of(n[o],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return s}static outdent(e,t,n){const s=[];for(let o=0,r=n.length;o<r;o++)s[o]=new of(n[o],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return s}static shiftIndent(e,t,n){return FD(e,t,n)}static unshiftIndent(e,t,n){return Ty(e,t,n)}static paste(e,t,n,s,o,r){return gHe.getEdits(e,t,n,s,o,r)}static tab(e,t,n){return mHe.getCommands(e,t,n)}static compositionType(e,t,n,s,o,r,a,l){return fHe.getEdits(e,t,n,s,o,r,a,l)}static compositionEndWithInterceptors(e,t,n,s,o,r){if(!s)return null;let a=null;for(const u of s)if(a===null)a=u.insertedText;else if(a!==u.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const u of s)if(u.deletedText.length!==0){c=!0;break}if(c){if(!j2(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const u=nf(l);for(const m of s)if(m.deletedSelectionStart!==0||m.deletedSelectionEnd!==m.deletedText.length||/^[ \t]+$/.test(m.deletedText)||u&&nf(m.deletedText))return null;const f=[];for(const m of o){if(!m.isEmpty())return null;f.push(m.getPosition())}if(f.length!==s.length)return null;const p=[];for(let m=0,_=f.length;m<_;m++)p.push(new oHe(f[m],s[m].deletedText,t.surroundingPairs[l]));return new aa(Zi.TypingOther,p,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const d=cHe.getEdits(t,n,o,r,l);if(d!==void 0)return d;const h=S4.getEdits(t,n,o,l,!0,!1);return h!==void 0?h:null}static typeWithInterceptors(e,t,n,s,o,r,a){const l=nae.getEdits(n,s,o,a,e);if(l!==void 0)return l;const c=aHe.getEdits(n,s,o,a,e);if(c!==void 0)return c;const d=lHe.getEdits(t,n,s,o,r,a);if(d!==void 0)return d;const h=S4.getEdits(n,s,o,a,!1,e);if(h!==void 0)return h;const u=dHe.getEdits(n,s,o,a,e);if(u!==void 0)return u;const f=hHe.getEdits(t,n,s,o,a,e);return f!==void 0?f:uHe.getEdits(t,o,a)}static typeWithoutInterceptors(e,t,n,s,o){return pHe.getEdits(e,s,o)}}class wHe{constructor(e,t,n,s,o,r){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=n,this.insertedText=s,this.insertedSelectionStart=o,this.insertedSelectionEnd=r}static{sae(this,"CompositionOutcome")}}var CHe=Object.defineProperty,Zn=(i,e)=>CHe(i,"name",{value:e,configurable:!0});const Gt=Ce.EditorCore;class Ln extends wy{static{Zn(this,"CoreEditorCommand")}runEditorCommand(e,t,n){const s=t._getViewModel();s&&this.runCoreEditorCommand(s,n||{})}}var bo;(i=>{const e=Zn(function(n){if(!On(n))return!1;const s=n;return!(!hn(s.to)||!oo(s.by)&&!hn(s.by)||!oo(s.value)&&!Gc(s.value)||!oo(s.revealCursor)&&!WW(s.revealCursor))},"isEditorScrollArgs");i.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},i.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(n){let s;switch(n.to){case i.RawDirection.Up:s=1;break;case i.RawDirection.Right:s=2;break;case i.RawDirection.Down:s=3;break;case i.RawDirection.Left:s=4;break;default:return null}let o;switch(n.by){case i.RawUnit.Line:o=1;break;case i.RawUnit.WrappedLine:o=2;break;case i.RawUnit.Page:o=3;break;case i.RawUnit.HalfPage:o=4;break;case i.RawUnit.Editor:o=5;break;case i.RawUnit.Column:o=6;break;default:o=2}const r=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:s,unit:o,value:r,revealCursor:a,select:!!n.select}}i.parse=t,Zn(t,"parse"),(n=>{n[n.Up=1]="Up",n[n.Right=2]="Right",n[n.Down=3]="Down",n[n.Left=4]="Left"})(i.Direction||(i.Direction={})),(n=>{n[n.Line=1]="Line",n[n.WrappedLine=2]="WrappedLine",n[n.Page=3]="Page",n[n.HalfPage=4]="HalfPage",n[n.Editor=5]="Editor",n[n.Column=6]="Column"})(i.Unit||(i.Unit={}))})(bo||(bo={}));var Rw;(i=>{const e=Zn(function(t){if(!On(t))return!1;const n=t;return!(!Gc(n.lineNumber)&&!hn(n.lineNumber)||!oo(n.at)&&!hn(n.at))},"isRevealLineArgs");i.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},i.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(Rw||(Rw={}));class D4{static{Zn(this,"EditorOrNativeTextInputCommand")}constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const s=t.get(Yb).getFocusedCodeEditor();return s&&s.hasTextFocus()?this._runEditorCommand(t,s,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const s=Lr();return s&&Gd(s)?(this.runDOMCommand(s),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const s=t.get(Yb).getActiveCodeEditor();return s?(s.focus(),this._runEditorCommand(t,s,n)):!1})}_runEditorCommand(e,t,n){const s=this.runEditorCommand(e,t,n);return s||!0}}var Ay=(i=>(i[i.Regular=0]="Regular",i[i.Minimal=1]="Minimal",i[i.None=2]="None",i))(Ay||{}),Bs;(i=>{class e extends Ln{static{Zn(this,"BaseMoveToCommand")}_inSelectionMode;constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,C){if(!C.position)return;b.model.pushStackElement(),b.setCursorStates(C.source,ri.Explicit,[Qo.moveTo(b,b.getPrimaryCursorState(),this._inSelectionMode,C.position,C.viewPosition)])&&C.revealType!==2&&b.revealAllCursors(C.source,!0,!0)}}i.MoveTo=ht(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),i.MoveToSelect=ht(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends Ln{static{Zn(this,"ColumnSelectCommand")}runCoreEditorCommand(b,C){b.model.pushStackElement();const S=this._getColumnSelectResult(b,b.getPrimaryCursorState(),b.getCursorColumnSelectData(),C);S!==null&&(b.setCursorStates(C.source,ri.Explicit,S.viewStates.map(D=>Tt.fromViewState(D))),b.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:S.fromLineNumber,fromViewVisualColumn:S.fromVisualColumn,toViewLineNumber:S.toLineNumber,toViewVisualColumn:S.toVisualColumn}),S.reversed?b.revealTopMostCursor(C.source):b.revealBottomMostCursor(C.source))}}i.ColumnSelect=ht(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(v,b,C,S){if(typeof S.position>"u"||typeof S.viewPosition>"u"||typeof S.mouseColumn>"u")return null;const D=v.model.validatePosition(S.position),T=v.coordinatesConverter.validateViewPosition(new j(S.viewPosition.lineNumber,S.viewPosition.column),D),I=S.doColumnSelect?C.fromViewLineNumber:T.lineNumber,R=S.doColumnSelect?C.fromViewVisualColumn:S.mouseColumn-1;return C_.columnSelect(v.cursorConfig,v,I,R,T.lineNumber,S.mouseColumn-1)}}),i.CursorColumnSelectLeft=ht(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.CtrlCmd|M.Shift|M.Alt|E.LeftArrow,linux:{primary:0}}})}_getColumnSelectResult(v,b,C,S){return C_.columnSelectLeft(v.cursorConfig,v,C)}}),i.CursorColumnSelectRight=ht(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.CtrlCmd|M.Shift|M.Alt|E.RightArrow,linux:{primary:0}}})}_getColumnSelectResult(v,b,C,S){return C_.columnSelectRight(v.cursorConfig,v,C)}});class n extends t{static{Zn(this,"ColumnSelectUpCommand")}_isPaged;constructor(b){super(b),this._isPaged=b.isPaged}_getColumnSelectResult(b,C,S,D){return C_.columnSelectUp(b.cursorConfig,b,S,this._isPaged)}}i.CursorColumnSelectUp=ht(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.CtrlCmd|M.Shift|M.Alt|E.UpArrow,linux:{primary:0}}})),i.CursorColumnSelectPageUp=ht(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.CtrlCmd|M.Shift|M.Alt|E.PageUp,linux:{primary:0}}}));class s extends t{static{Zn(this,"ColumnSelectDownCommand")}_isPaged;constructor(b){super(b),this._isPaged=b.isPaged}_getColumnSelectResult(b,C,S,D){return C_.columnSelectDown(b.cursorConfig,b,S,this._isPaged)}}i.CursorColumnSelectDown=ht(new s({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.CtrlCmd|M.Shift|M.Alt|E.DownArrow,linux:{primary:0}}})),i.CursorColumnSelectPageDown=ht(new s({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.CtrlCmd|M.Shift|M.Alt|E.PageDown,linux:{primary:0}}}));class o extends Ln{static{Zn(this,"CursorMoveImpl")}constructor(){super({id:"cursorMove",precondition:void 0,metadata:lt.metadata})}runCoreEditorCommand(b,C){const S=lt.parse(C);S&&this._runCursorMove(b,C.source,S)}_runCursorMove(b,C,S){b.model.pushStackElement(),b.setCursorStates(C,ri.Explicit,o._move(b,b.getCursorStates(),S)),b.revealAllCursors(C,!0)}static _move(b,C,S){const D=S.select,T=S.value;switch(S.direction){case lt.Direction.Left:case lt.Direction.Right:case lt.Direction.Up:case lt.Direction.Down:case lt.Direction.PrevBlankLine:case lt.Direction.NextBlankLine:case lt.Direction.WrappedLineStart:case lt.Direction.WrappedLineFirstNonWhitespaceCharacter:case lt.Direction.WrappedLineColumnCenter:case lt.Direction.WrappedLineEnd:case lt.Direction.WrappedLineLastNonWhitespaceCharacter:return Qo.simpleMove(b,C,S.direction,D,T,S.unit);case lt.Direction.ViewPortTop:case lt.Direction.ViewPortBottom:case lt.Direction.ViewPortCenter:case lt.Direction.ViewPortIfOutside:return Qo.viewportMove(b,C,S.direction,D,T);default:return null}}}i.CursorMoveImpl=o,i.CursorMove=ht(new o);let r;(v=>{v[v.PAGE_SIZE_MARKER=-1]="PAGE_SIZE_MARKER"})(r||(r={}));class a extends Ln{static{Zn(this,"CursorMoveBasedCommand")}_staticArgs;constructor(b){super(b),this._staticArgs=b.args}runCoreEditorCommand(b,C){let S=this._staticArgs;this._staticArgs.value===-1&&(S={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:C.pageSize||b.cursorConfig.pageSize}),b.model.pushStackElement(),b.setCursorStates(C.source,ri.Explicit,Qo.simpleMove(b,b.getCursorStates(),S.direction,S.select,S.value,S.unit)),b.revealAllCursors(C.source,!0)}}i.CursorLeft=ht(new a({args:{direction:lt.Direction.Left,unit:lt.Unit.None,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:E.LeftArrow,mac:{primary:E.LeftArrow,secondary:[M.WinCtrl|E.KeyB]}}})),i.CursorLeftSelect=ht(new a({args:{direction:lt.Direction.Left,unit:lt.Unit.None,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.Shift|E.LeftArrow}})),i.CursorRight=ht(new a({args:{direction:lt.Direction.Right,unit:lt.Unit.None,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:E.RightArrow,mac:{primary:E.RightArrow,secondary:[M.WinCtrl|E.KeyF]}}})),i.CursorRightSelect=ht(new a({args:{direction:lt.Direction.Right,unit:lt.Unit.None,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.Shift|E.RightArrow}})),i.CursorUp=ht(new a({args:{direction:lt.Direction.Up,unit:lt.Unit.WrappedLine,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:E.UpArrow,mac:{primary:E.UpArrow,secondary:[M.WinCtrl|E.KeyP]}}})),i.CursorUpSelect=ht(new a({args:{direction:lt.Direction.Up,unit:lt.Unit.WrappedLine,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.Shift|E.UpArrow,secondary:[M.CtrlCmd|M.Shift|E.UpArrow],mac:{primary:M.Shift|E.UpArrow},linux:{primary:M.Shift|E.UpArrow}}})),i.CursorPageUp=ht(new a({args:{direction:lt.Direction.Up,unit:lt.Unit.WrappedLine,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:E.PageUp}})),i.CursorPageUpSelect=ht(new a({args:{direction:lt.Direction.Up,unit:lt.Unit.WrappedLine,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.Shift|E.PageUp}})),i.CursorDown=ht(new a({args:{direction:lt.Direction.Down,unit:lt.Unit.WrappedLine,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:E.DownArrow,mac:{primary:E.DownArrow,secondary:[M.WinCtrl|E.KeyN]}}})),i.CursorDownSelect=ht(new a({args:{direction:lt.Direction.Down,unit:lt.Unit.WrappedLine,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.Shift|E.DownArrow,secondary:[M.CtrlCmd|M.Shift|E.DownArrow],mac:{primary:M.Shift|E.DownArrow},linux:{primary:M.Shift|E.DownArrow}}})),i.CursorPageDown=ht(new a({args:{direction:lt.Direction.Down,unit:lt.Unit.WrappedLine,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:E.PageDown}})),i.CursorPageDownSelect=ht(new a({args:{direction:lt.Direction.Down,unit:lt.Unit.WrappedLine,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.Shift|E.PageDown}})),i.CreateCursor=ht(new class extends Ln{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(v,b){if(!b.position)return;let C;b.wholeLine?C=Qo.line(v,v.getPrimaryCursorState(),!1,b.position,b.viewPosition):C=Qo.moveTo(v,v.getPrimaryCursorState(),!1,b.position,b.viewPosition);const S=v.getCursorStates();if(S.length>1){const D=C.modelState?C.modelState.position:null,T=C.viewState?C.viewState.position:null;for(let I=0,R=S.length;I<R;I++){const G=S[I];if(!(D&&!G.modelState.selection.containsPosition(D))&&!(T&&!G.viewState.selection.containsPosition(T))){S.splice(I,1),v.model.pushStackElement(),v.setCursorStates(b.source,ri.Explicit,S);return}}}S.push(C),v.model.pushStackElement(),v.setCursorStates(b.source,ri.Explicit,S)}}),i.LastCursorMoveToSelect=ht(new class extends Ln{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(v,b){if(!b.position)return;const C=v.getLastAddedCursorIndex(),S=v.getCursorStates(),D=S.slice(0);D[C]=Qo.moveTo(v,S[C],!0,b.position,b.viewPosition),v.model.pushStackElement(),v.setCursorStates(b.source,ri.Explicit,D)}});class l extends Ln{static{Zn(this,"HomeCommand")}_inSelectionMode;constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,C){b.model.pushStackElement(),b.setCursorStates(C.source,ri.Explicit,Qo.moveToBeginningOfLine(b,b.getCursorStates(),this._inSelectionMode)),b.revealAllCursors(C.source,!0)}}i.CursorHome=ht(new l({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:E.Home,mac:{primary:E.Home,secondary:[M.CtrlCmd|E.LeftArrow]}}})),i.CursorHomeSelect=ht(new l({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.Shift|E.Home,mac:{primary:M.Shift|E.Home,secondary:[M.CtrlCmd|M.Shift|E.LeftArrow]}}}));class c extends Ln{static{Zn(this,"LineStartCommand")}_inSelectionMode;constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,C){b.model.pushStackElement(),b.setCursorStates(C.source,ri.Explicit,this._exec(b.getCursorStates())),b.revealAllCursors(C.source,!0)}_exec(b){const C=[];for(let S=0,D=b.length;S<D;S++){const T=b[S],I=T.modelState.position.lineNumber;C[S]=Tt.fromModelState(T.modelState.move(this._inSelectionMode,I,1,0))}return C}}i.CursorLineStart=ht(new c({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:0,mac:{primary:M.WinCtrl|E.KeyA}}})),i.CursorLineStartSelect=ht(new c({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:0,mac:{primary:M.WinCtrl|M.Shift|E.KeyA}}}));class d extends Ln{static{Zn(this,"EndCommand")}_inSelectionMode;constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,C){b.model.pushStackElement(),b.setCursorStates(C.source,ri.Explicit,Qo.moveToEndOfLine(b,b.getCursorStates(),this._inSelectionMode,C.sticky||!1)),b.revealAllCursors(C.source,!0)}}i.CursorEnd=ht(new d({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Gt,kbExpr:Ae.textInputFocus,primary:E.End,mac:{primary:E.End,secondary:[M.CtrlCmd|E.RightArrow]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:g("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),i.CursorEndSelect=ht(new d({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Gt,kbExpr:Ae.textInputFocus,primary:M.Shift|E.End,mac:{primary:M.Shift|E.End,secondary:[M.CtrlCmd|M.Shift|E.RightArrow]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:g("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class h extends Ln{static{Zn(this,"LineEndCommand")}_inSelectionMode;constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,C){b.model.pushStackElement(),b.setCursorStates(C.source,ri.Explicit,this._exec(b,b.getCursorStates())),b.revealAllCursors(C.source,!0)}_exec(b,C){const S=[];for(let D=0,T=C.length;D<T;D++){const I=C[D],R=I.modelState.position.lineNumber,G=b.model.getLineMaxColumn(R);S[D]=Tt.fromModelState(I.modelState.move(this._inSelectionMode,R,G,0))}return S}}i.CursorLineEnd=ht(new h({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:0,mac:{primary:M.WinCtrl|E.KeyE}}})),i.CursorLineEndSelect=ht(new h({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:0,mac:{primary:M.WinCtrl|M.Shift|E.KeyE}}}));class u extends Ln{static{Zn(this,"TopCommand")}_inSelectionMode;constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,C){b.model.pushStackElement(),b.setCursorStates(C.source,ri.Explicit,Qo.moveToBeginningOfBuffer(b,b.getCursorStates(),this._inSelectionMode)),b.revealAllCursors(C.source,!0)}}i.CursorTop=ht(new u({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.CtrlCmd|E.Home,mac:{primary:M.CtrlCmd|E.UpArrow}}})),i.CursorTopSelect=ht(new u({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.CtrlCmd|M.Shift|E.Home,mac:{primary:M.CtrlCmd|M.Shift|E.UpArrow}}}));class f extends Ln{static{Zn(this,"BottomCommand")}_inSelectionMode;constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,C){b.model.pushStackElement(),b.setCursorStates(C.source,ri.Explicit,Qo.moveToEndOfBuffer(b,b.getCursorStates(),this._inSelectionMode)),b.revealAllCursors(C.source,!0)}}i.CursorBottom=ht(new f({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.CtrlCmd|E.End,mac:{primary:M.CtrlCmd|E.DownArrow}}})),i.CursorBottomSelect=ht(new f({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.CtrlCmd|M.Shift|E.End,mac:{primary:M.CtrlCmd|M.Shift|E.DownArrow}}}));class p extends Ln{static{Zn(this,"EditorScrollImpl")}constructor(){super({id:"editorScroll",precondition:void 0,metadata:bo.metadata})}determineScrollMethod(b){const C=[6],S=[1,2,3,4,5,6],D=[4,2],T=[1,3];return C.includes(b.unit)&&D.includes(b.direction)?this._runHorizontalEditorScroll.bind(this):S.includes(b.unit)&&T.includes(b.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(b,C){const S=bo.parse(C);if(!S)return;const D=this.determineScrollMethod(S);D&&D(b,C.source,S)}_runVerticalEditorScroll(b,C,S){const D=this._computeDesiredScrollTop(b,S);if(S.revealCursor){const T=b.getCompletelyVisibleViewRangeAtScrollTop(D);b.setCursorStates(C,ri.Explicit,[Qo.findPositionInViewportIfOutside(b,b.getPrimaryCursorState(),T,S.select)])}b.viewLayout.setScrollPosition({scrollTop:D},ot.Smooth)}_computeDesiredScrollTop(b,C){if(C.unit===1){const T=b.viewLayout.getFutureViewport(),I=b.getCompletelyVisibleViewRangeAtScrollTop(T.top),R=b.coordinatesConverter.convertViewRangeToModelRange(I);let G;C.direction===1?G=Math.max(1,R.startLineNumber-C.value):G=Math.min(b.model.getLineCount(),R.startLineNumber+C.value);const K=b.coordinatesConverter.convertModelPositionToViewPosition(new j(G,1));return b.viewLayout.getVerticalOffsetForLineNumber(K.lineNumber)}if(C.unit===5){let T=0;return C.direction===3&&(T=b.model.getLineCount()-b.cursorConfig.pageSize),b.viewLayout.getVerticalOffsetForLineNumber(T)}let S;C.unit===3?S=b.cursorConfig.pageSize*C.value:C.unit===4?S=Math.round(b.cursorConfig.pageSize/2)*C.value:S=C.value;const D=(C.direction===1?-1:1)*S;return b.viewLayout.getCurrentScrollTop()+D*b.cursorConfig.lineHeight}_runHorizontalEditorScroll(b,C,S){const D=this._computeDesiredScrollLeft(b,S);b.viewLayout.setScrollPosition({scrollLeft:D},ot.Smooth)}_computeDesiredScrollLeft(b,C){const S=(C.direction===4?-1:1)*C.value;return b.viewLayout.getCurrentScrollLeft()+S*b.cursorConfig.typicalHalfwidthCharacterWidth}}i.EditorScrollImpl=p,i.EditorScroll=ht(new p),i.ScrollLineUp=ht(new class extends Ln{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.CtrlCmd|E.UpArrow,mac:{primary:M.WinCtrl|E.PageUp}}})}runCoreEditorCommand(v,b){i.EditorScroll.runCoreEditorCommand(v,{to:bo.RawDirection.Up,by:bo.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:b.source})}}),i.ScrollPageUp=ht(new class extends Ln{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.CtrlCmd|E.PageUp,win:{primary:M.Alt|E.PageUp},linux:{primary:M.Alt|E.PageUp}}})}runCoreEditorCommand(v,b){i.EditorScroll.runCoreEditorCommand(v,{to:bo.RawDirection.Up,by:bo.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:b.source})}}),i.ScrollEditorTop=ht(new class extends Ln{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus}})}runCoreEditorCommand(v,b){i.EditorScroll.runCoreEditorCommand(v,{to:bo.RawDirection.Up,by:bo.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:b.source})}}),i.ScrollLineDown=ht(new class extends Ln{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.CtrlCmd|E.DownArrow,mac:{primary:M.WinCtrl|E.PageDown}}})}runCoreEditorCommand(v,b){i.EditorScroll.runCoreEditorCommand(v,{to:bo.RawDirection.Down,by:bo.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:b.source})}}),i.ScrollPageDown=ht(new class extends Ln{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:M.CtrlCmd|E.PageDown,win:{primary:M.Alt|E.PageDown},linux:{primary:M.Alt|E.PageDown}}})}runCoreEditorCommand(v,b){i.EditorScroll.runCoreEditorCommand(v,{to:bo.RawDirection.Down,by:bo.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:b.source})}}),i.ScrollEditorBottom=ht(new class extends Ln{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus}})}runCoreEditorCommand(v,b){i.EditorScroll.runCoreEditorCommand(v,{to:bo.RawDirection.Down,by:bo.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:b.source})}}),i.ScrollLeft=ht(new class extends Ln{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus}})}runCoreEditorCommand(v,b){i.EditorScroll.runCoreEditorCommand(v,{to:bo.RawDirection.Left,by:bo.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:b.source})}}),i.ScrollRight=ht(new class extends Ln{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus}})}runCoreEditorCommand(v,b){i.EditorScroll.runCoreEditorCommand(v,{to:bo.RawDirection.Right,by:bo.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:b.source})}});class m extends Ln{static{Zn(this,"WordCommand")}_inSelectionMode;constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,C){C.position&&(b.model.pushStackElement(),b.setCursorStates(C.source,ri.Explicit,[Qo.word(b,b.getPrimaryCursorState(),this._inSelectionMode,C.position)]),C.revealType!==2&&b.revealAllCursors(C.source,!0,!0))}}i.WordSelect=ht(new m({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),i.WordSelectDrag=ht(new m({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),i.LastCursorWordSelect=ht(new class extends Ln{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(v,b){if(!b.position)return;const C=v.getLastAddedCursorIndex(),S=v.getCursorStates(),D=S.slice(0),T=S[C];D[C]=Qo.word(v,T,T.modelState.hasSelection(),b.position),v.model.pushStackElement(),v.setCursorStates(b.source,ri.Explicit,D)}});class _ extends Ln{static{Zn(this,"LineCommand")}_inSelectionMode;constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,C){C.position&&(b.model.pushStackElement(),b.setCursorStates(C.source,ri.Explicit,[Qo.line(b,b.getPrimaryCursorState(),this._inSelectionMode,C.position,C.viewPosition)]),C.revealType!==2&&b.revealAllCursors(C.source,!1,!0))}}i.LineSelect=ht(new _({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),i.LineSelectDrag=ht(new _({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class w extends Ln{static{Zn(this,"LastCursorLineCommand")}_inSelectionMode;constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,C){if(!C.position)return;const S=b.getLastAddedCursorIndex(),D=b.getCursorStates(),T=D.slice(0);T[S]=Qo.line(b,D[S],this._inSelectionMode,C.position,C.viewPosition),b.model.pushStackElement(),b.setCursorStates(C.source,ri.Explicit,T)}}i.LastCursorLineSelect=ht(new w({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),i.LastCursorLineSelectDrag=ht(new w({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),i.CancelSelection=ht(new class extends Ln{constructor(){super({id:"cancelSelection",precondition:Ae.hasNonEmptySelection,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:E.Escape,secondary:[M.Shift|E.Escape]}})}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates(b.source,ri.Explicit,[Qo.cancelSelection(v,v.getPrimaryCursorState())]),v.revealAllCursors(b.source,!0)}}),i.RemoveSecondaryCursors=ht(new class extends Ln{constructor(){super({id:"removeSecondaryCursors",precondition:Ae.hasMultipleSelections,kbOpts:{weight:Gt+1,kbExpr:Ae.textInputFocus,primary:E.Escape,secondary:[M.Shift|E.Escape]}})}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates(b.source,ri.Explicit,[v.getPrimaryCursorState()]),v.revealAllCursors(b.source,!0),Px(g("removedCursor","Removed secondary cursors"))}}),i.RevealLine=ht(new class extends Ln{constructor(){super({id:"revealLine",precondition:void 0,metadata:Rw.metadata})}runCoreEditorCommand(v,b){const C=b,S=C.lineNumber||0;let D=typeof S=="number"?S+1:parseInt(S)+1;D<1&&(D=1);const T=v.model.getLineCount();D>T&&(D=T);const I=new V(D,1,D,v.model.getLineMaxColumn(D));let R=ei.Simple;if(C.at)switch(C.at){case Rw.RawAtArgument.Top:R=ei.Top;break;case Rw.RawAtArgument.Center:R=ei.Center;break;case Rw.RawAtArgument.Bottom:R=ei.Bottom;break}const G=v.coordinatesConverter.convertModelRangeToViewRange(I);v.revealRange(b.source,!1,G,R,ot.Smooth)}}),i.SelectAll=new class extends D4{constructor(){super(kFe)}runDOMCommand(v){na&&(v.focus(),v.select()),v.ownerDocument.execCommand("selectAll")}runEditorCommand(v,b,C){const S=b._getViewModel();S&&this.runCoreEditorCommand(S,C)}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates("keyboard",ri.Explicit,[Qo.selectAll(v,v.getPrimaryCursorState())])}},i.SetSelection=ht(new class extends Ln{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(v,b){b.selection&&(v.model.pushStackElement(),v.setCursorStates(b.source,ri.Explicit,[Tt.fromModelSelection(b.selection)]))}})})(Bs||(Bs={}));const yHe=Z.and(Ae.textInputFocus,Ae.columnSelection);function Rv(i,e){gt.registerKeybindingRule({id:i,primary:e,when:yHe,weight:Gt+1})}Zn(Rv,"registerColumnSelection");Rv(Bs.CursorColumnSelectLeft.id,M.Shift|E.LeftArrow);Rv(Bs.CursorColumnSelectRight.id,M.Shift|E.RightArrow);Rv(Bs.CursorColumnSelectUp.id,M.Shift|E.UpArrow);Rv(Bs.CursorColumnSelectPageUp.id,M.Shift|E.PageUp);Rv(Bs.CursorColumnSelectDown.id,M.Shift|E.DownArrow);Rv(Bs.CursorColumnSelectPageDown.id,M.Shift|E.PageDown);function I4(i){return i.register(),i}Zn(I4,"registerCommand");var Wz;(i=>{class e extends wy{static{Zn(this,"CoreEditingCommand")}runEditorCommand(n,s,o){const r=s._getViewModel();r&&this.runCoreEditingCommand(s,r,o||{})}}i.CoreEditingCommand=e,i.LineBreakInsert=ht(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:Ae.writable,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:0,mac:{primary:M.WinCtrl|E.KeyO}}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,nae.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection)))}}),i.Outdent=ht(new class extends e{constructor(){super({id:"outdent",precondition:Ae.writable,kbOpts:{weight:Gt,kbExpr:Z.and(Ae.editorTextFocus,Ae.tabDoesNotMoveFocus),primary:M.Shift|E.Tab}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,y_.outdent(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),i.Tab=ht(new class extends e{constructor(){super({id:"tab",precondition:Ae.writable,kbOpts:{weight:Gt,kbExpr:Z.and(Ae.editorTextFocus,Ae.tabDoesNotMoveFocus),primary:E.Tab}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,y_.tab(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),i.DeleteLeft=ht(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:E.Backspace,secondary:[M.Shift|E.Backspace],mac:{primary:E.Backspace,secondary:[M.Shift|E.Backspace,M.WinCtrl|E.KeyH,M.WinCtrl|E.Backspace]}}})}runCoreEditingCommand(t,n,s){const[o,r]=tv.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());o&&t.pushUndoStop(),t.executeCommands(this.id,r),n.setPrevEditOperationType(Zi.DeletingLeft)}}),i.DeleteRight=ht(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:Gt,kbExpr:Ae.textInputFocus,primary:E.Delete,mac:{primary:E.Delete,secondary:[M.WinCtrl|E.KeyD,M.WinCtrl|E.Delete]}}})}runCoreEditingCommand(t,n,s){const[o,r]=tv.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));o&&t.pushUndoStop(),t.executeCommands(this.id,r),n.setPrevEditOperationType(Zi.DeletingRight)}}),i.Undo=new class extends D4{constructor(){super(jse)}runDOMCommand(t){t.ownerDocument.execCommand("undo")}runEditorCommand(t,n,s){if(!(!n.hasModel()||n.getOption(k.readOnly)===!0))return n.getModel().undo()}},i.Redo=new class extends D4{constructor(){super(qse)}runDOMCommand(t){t.ownerDocument.execCommand("redo")}runEditorCommand(t,n,s){if(!(!n.hasModel()||n.getOption(k.readOnly)===!0))return n.getModel().redo()}}})(Wz||(Wz={}));class Hz extends wR{static{Zn(this,"EditorHandlerCommand")}_handlerId;constructor(e,t,n){super({id:e,precondition:void 0,metadata:n}),this._handlerId=t}runCommand(e,t){const n=e.get(Yb).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}function bm(i,e){I4(new Hz("default:"+i,i)),I4(new Hz(i,i,e))}Zn(bm,"registerOverwritableCommand");bm(Ms.Type,{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});bm(Ms.ReplacePreviousChar);bm(Ms.CompositionType);bm(Ms.CompositionStart);bm(Ms.CompositionEnd);bm(Ms.Paste);bm(Ms.Cut);var SHe=Object.defineProperty,EHe=(i,e)=>SHe(i,"name",{value:e,configurable:!0});class WR{static{EHe(this,"ViewUserInputEvents")}onKeyDown=null;onKeyUp=null;onContextMenu=null;onMouseMove=null;onMouseLeave=null;onMouseDown=null;onMouseUp=null;onMouseDrag=null;onMouseDrop=null;onMouseDropCanceled=null;onMouseWheel=null;_coordinatesConverter;constructor(e){this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown?.(e)}emitKeyUp(e){this.onKeyUp?.(e)}emitContextMenu(e){this.onContextMenu?.(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove?.(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave?.(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown?.(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp?.(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag?.(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop?.(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled?.()}emitMouseWheel(e){this.onMouseWheel?.(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return WR.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const n={...e};return n.position&&(n.position=t.convertViewPositionToModelPosition(n.position)),n.range&&(n.range=t.convertViewRangeToModelRange(n.range)),(n.type===Ot.GUTTER_VIEW_ZONE||n.type===Ot.CONTENT_VIEW_ZONE)&&(n.detail=this.convertViewToModelViewZoneData(n.detail,t)),n}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new j(e.afterLineNumber,1)).lineNumber}}}var LHe=Object.defineProperty,DHe=(i,e)=>LHe(i,"name",{value:e,configurable:!0});class IHe{static{DHe(this,"ViewController")}configuration;viewModel;userInputEvents;commandDelegate;constructor(e,t,n,s){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=s}paste(e,t,n,s){this.commandDelegate.paste(e,t,n,s)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,s){this.commandDelegate.compositionType(e,t,n,s)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Bs.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new j(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(k.multiCursorModifier)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(k.multiCursorModifier)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=Gi&&t.get(k.selectionClipboard),s=t.get(k.columnSelection);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):s?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){Bs.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){Bs.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,n){e=this._validateViewColumn(e),Bs.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),Bs.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){Bs.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){Bs.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){Bs.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){Bs.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){Bs.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){Bs.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){Bs.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){Bs.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){Bs.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}var THe=Object.defineProperty,Tp=(i,e)=>THe(i,"name",{value:e,configurable:!0});class q2 extends AD{static{Tp(this,"MouseHandler")}_context;viewController;viewHelper;mouseTargetFactory;_mouseDownOperation;lastMouseLeaveTime;_height;_mouseLeaveMonitor=null;constructor(e,t,n){super(),this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new ir(this._context,n),this._mouseDownOperation=this._register(new AHe(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(r,a)=>this._createMouseTarget(r,a),r=>this._getMouseColumn(r))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(k.layoutInfo).height;const s=new PWe(this.viewHelper.viewDomNode);this._register(s.onContextMenu(this.viewHelper.viewDomNode,r=>this._onContextMenu(r,!0))),this._register(s.onMouseMove(this.viewHelper.viewDomNode,r=>{this._onMouseMove(r),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=F(this.viewHelper.viewDomNode.ownerDocument,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new Jp(a,!1,this.viewHelper.viewDomNode))}))})),this._register(s.onMouseUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(s.onMouseLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r)));let o=0;this._register(s.onPointerDown(this.viewHelper.viewDomNode,(r,a)=>{o=a})),this._register(F(this.viewHelper.viewDomNode,Q.POINTER_UP,r=>{this._mouseDownOperation.onPointerUp()})),this._register(s.onMouseDown(this.viewHelper.viewDomNode,r=>this._onMouseDown(r,o))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=UP.INSTANCE;let t=0,n=r_.getZoomLevel(),s=!1,o=0;const r=Tp(l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(k.mouseWheelZoom))return;const c=new Nb(l);if(e.acceptStandardWheelEvent(c),e.isPhysicalMouseWheel()){if(a(l)){const d=r_.getZoomLevel(),h=c.deltaY>0?1:-1;r_.setZoomLevel(d+h),c.preventDefault(),c.stopPropagation()}}else Date.now()-t>50&&(n=r_.getZoomLevel(),s=a(l),o=0),t=Date.now(),o+=c.deltaY,s&&(r_.setZoomLevel(n+o/5),c.preventDefault(),c.stopPropagation())},"onMouseWheel");this._register(F(this.viewHelper.viewDomNode,Q.MOUSE_WHEEL,r,{capture:!0,passive:!1}));function a(l){return Ue?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}Tp(a,"hasMouseWheelZoomModifiers")}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(k.layoutInfo)){const t=this._context.configuration.options.get(k.layoutInfo).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const s=new fre(e,t).toPageCoordinates(ve(this.viewHelper.viewDomNode)),o=NR(this.viewHelper.viewDomNode);if(s.y<o.y||s.y>o.y+o.height||s.x<o.x||s.x>o.x+o.width)return null;const r=PR(this.viewHelper.viewDomNode,o,s);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),o,s,r,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const s=Pb(this.viewHelper.viewDomNode);s&&(n=s.elementsFromPoint(e.posx,e.posy).find(o=>this.viewHelper.viewDomNode.contains(o)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const n=this._createMouseTarget(e,!0),s=n.type===Ot.CONTENT_TEXT||n.type===Ot.CONTENT_EMPTY,o=n.type===Ot.GUTTER_GLYPH_MARGIN||n.type===Ot.GUTTER_LINE_NUMBERS||n.type===Ot.GUTTER_LINE_DECORATIONS,r=n.type===Ot.GUTTER_LINE_NUMBERS,a=this._context.configuration.options.get(k.selectOnLineNumbers),l=n.type===Ot.CONTENT_VIEW_ZONE||n.type===Ot.GUTTER_VIEW_ZONE,c=n.type===Ot.CONTENT_WIDGET;let d=e.leftButton||e.middleButton;Ue&&e.leftButton&&e.ctrlKey&&(d=!1);const h=Tp(()=>{e.preventDefault(),this.viewHelper.focusTextArea()},"focus");if(d&&(s||r&&a))h(),this._mouseDownOperation.start(n.type,e,t);else if(o)e.preventDefault();else if(l){const u=n.detail;d&&this.viewHelper.shouldSuppressMouseDownOnViewZone(u.viewZoneId)&&(h(),this._mouseDownOperation.start(n.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(n.detail)&&(h(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:n})}_onMouseWheel(e){this.viewController.emitMouseWheel(e)}}class AHe extends ${constructor(e,t,n,s,o,r){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._mouseTargetFactory=s,this._createMouseTarget=o,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new OWe(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new xHe(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._mouseState=new Y2,this._currentSelection=new St(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}static{Tp(this,"MouseDownOperation")}_createMouseTarget;_getMouseColumn;_mouseMoveMonitor;_topBottomDragScrolling;_mouseState;_currentSelection;_isActive;_lastMouseEvent;dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===Ot.OUTSIDE_EDITOR&&(t.outsidePosition==="above"||t.outsidePosition==="below")?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,Ay.Minimal)))}start(e,t,n){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===Ot.GUTTER_LINE_NUMBERS),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const s=this._findMousePosition(t,!0);if(!s||!s.position)return;this._mouseState.trySetCount(t.detail,s.position),t.detail=this._mouseState.count;const o=this._context.configuration.options;if(!o.get(k.readOnly)&&o.get(k.dragAndDrop)&&!o.get(k.columnSelection)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&s.type===Ot.CONTENT_TEXT&&s.position&&this._currentSelection.containsPosition(s.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,r=>this._onMouseDownThenMove(r),r=>{const a=this._findMousePosition(this._lastMouseEvent,!1);Vh(r)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(s,t.shiftKey,Ay.Minimal),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,r=>this._onMouseDownThenMove(r),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.viewModel,s=this._context.viewLayout,o=this._getMouseColumn(e);if(e.posy<t.y){const a=t.y-e.posy,l=Math.max(s.getCurrentScrollTop()-a,0),c=Dy.getZoneAtCoord(this._context,l);if(c){const h=this._helpPositionJumpOverViewZone(c);if(h)return sr.createOutsideEditor(o,h,"above",a)}const d=s.getLineNumberAtVerticalOffset(l);return sr.createOutsideEditor(o,new j(d,1),"above",a)}if(e.posy>t.y+t.height){const a=e.posy-t.y-t.height,l=s.getCurrentScrollTop()+e.relativePos.y,c=Dy.getZoneAtCoord(this._context,l);if(c){const h=this._helpPositionJumpOverViewZone(c);if(h)return sr.createOutsideEditor(o,h,"below",a)}const d=s.getLineNumberAtVerticalOffset(l);return sr.createOutsideEditor(o,new j(d,n.getLineMaxColumn(d)),"below",a)}const r=s.getLineNumberAtVerticalOffset(s.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const a=t.x-e.posx;return sr.createOutsideEditor(o,new j(r,1),"left",a)}if(e.posx>t.x+t.width){const a=e.posx-t.x-t.width;return sr.createOutsideEditor(o,new j(r,n.getLineMaxColumn(r)),"right",a)}return null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const s=this._createMouseTarget(e,t);if(!s.position)return null;if(s.type===Ot.CONTENT_VIEW_ZONE||s.type===Ot.GUTTER_VIEW_ZONE){const r=this._helpPositionJumpOverViewZone(s.detail);if(r)return sr.createViewZone(s.type,s.element,s.mouseColumn,r,s.detail)}return s}_helpPositionJumpOverViewZone(e){const t=new j(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,s=e.positionAfter;return n&&s?n.isBefore(t)?n:s:null}_dispatchMouse(e,t,n){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:n,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===Ot.CONTENT_TEXT&&e.detail.injectedText!==null})}}class xHe extends ${constructor(e,t,n,s){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=n,this._dispatchMouse=s,this._operation=null}static{Tp(this,"TopBottomDragScrolling")}_operation;dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new kHe(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class kHe extends ${constructor(e,t,n,s,o,r){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=n,this._dispatchMouse=s,this._position=o,this._mouseEvent=r,this._lastTime=Date.now(),this._animationFrameDisposable=xo(ve(r.browserEvent),()=>this._execute())}static{Tp(this,"TopBottomDragScrollingOperation")}_position;_mouseEvent;_lastTime;_animationFrameDisposable;dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(k.lineHeight),t=this._context.configuration.options.get(k.layoutInfo).height/e,n=this._position.outsideDistance/e;return n<=1.5?Math.max(30,t*(1+n)):n<=3?Math.max(60,t*(2+n)):Math.max(200,t*(7+n))}_execute(){const e=this._context.configuration.options.get(k.lineHeight),t=this._getScrollSpeed(),n=this._tick(),s=t*(n/1e3)*e,o=this._position.outsidePosition==="above"?-s:s;this._context.viewModel.viewLayout.deltaScrollNow(0,o),this._viewHelper.renderNow();const r=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?r.startLineNumber:r.endLineNumber;let l;{const c=NR(this._viewHelper.viewDomNode),d=this._context.configuration.options.get(k.layoutInfo).horizontalScrollbarHeight,h=new kR(this._mouseEvent.pos.x,c.y+c.height-d-.1),u=PR(this._viewHelper.viewDomNode,c,h);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,h,u,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=sr.createOutsideEditor(this._position.mouseColumn,new j(a,1),"above",this._position.outsideDistance):l=sr.createOutsideEditor(this._position.mouseColumn,new j(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,Ay.None),this._animationFrameDisposable=xo(ve(l.element),()=>this._execute())}}class Y2{static{Tp(this,"MouseDownState")}static CLEAR_MOUSE_DOWN_COUNT_TIME=400;_altKey;get altKey(){return this._altKey}_ctrlKey;get ctrlKey(){return this._ctrlKey}_metaKey;get metaKey(){return this._metaKey}_shiftKey;get shiftKey(){return this._shiftKey}_leftButton;get leftButton(){return this._leftButton}_middleButton;get middleButton(){return this._middleButton}_startedOnLineNumbers;get startedOnLineNumbers(){return this._startedOnLineNumbers}_lastMouseDownPosition;_lastMouseDownPositionEqualCount;_lastMouseDownCount;_lastSetMouseDownCountTime;isDragAndDrop;constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>Y2.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}var NHe=Object.defineProperty,oae=(i,e)=>NHe(i,"name",{value:e,configurable:!0});function Z2(i,e,t,n){const s=i.getPlainTextToCopy(e,t,Nt),o=i.model.getEOL(),r=t&&e.length===1&&e[0].isEmpty(),a=Array.isArray(s)?s:null,l=Array.isArray(s)?s.join(o):s;let c,d=null;if(n&&l.length<65536){const u=i.getRichTextToCopy(e,t);u&&(c=u.html,d=u.mode)}return{isFromEmptySelection:r,multicursorText:a,text:l,html:c,mode:d}}oae(Z2,"getDataToCopy");class uL{static{oae(this,"InMemoryClipboardMetadataManager")}static INSTANCE=new uL;_lastState;constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}var PHe=Object.defineProperty,X2=(i,e)=>PHe(i,"name",{value:e,configurable:!0});class $_{static{X2(this,"PagedScreenReaderStrategy")}static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,s=n+1,o=n+t;return new V(s,1,o+1,1)}static fromEditorSelection(e,t,n,s){const r=$_._getPageOfLine(t.startLineNumber,n),a=$_._getRangeForPage(r,n),l=$_._getPageOfLine(t.endLineNumber,n),c=$_._getRangeForPage(l,n);let d=a.intersectRanges(new V(1,1,t.startLineNumber,t.startColumn));if(s&&e.getValueLengthInRange(d,cn.LF)>500){const w=e.modifyPosition(d.getEndPosition(),-500);d=V.fromPositions(w,d.getEndPosition())}const h=e.getValueInRange(d,cn.LF),u=e.getLineCount(),f=e.getLineMaxColumn(u);let p=c.intersectRanges(new V(t.endLineNumber,t.endColumn,u,f));if(s&&e.getValueLengthInRange(p,cn.LF)>500){const w=e.modifyPosition(p.getStartPosition(),500);p=V.fromPositions(p.getStartPosition(),w)}const m=e.getValueInRange(p,cn.LF);let _;if(r===l||r+1===l)_=e.getValueInRange(t,cn.LF);else{const w=a.intersectRanges(t),v=c.intersectRanges(t);_=e.getValueInRange(w,cn.LF)+""+e.getValueInRange(v,cn.LF)}return s&&_.length>2*500&&(_=_.substring(0,500)+""+_.substring(_.length-500,_.length)),{value:h+_+m,selection:t,selectionStart:h.length,selectionEnd:h.length+_.length,newlineCountBeforeSelection:d.endLineNumber-d.startLineNumber}}}function qk(i,e){if(i.get(k.accessibilitySupport)===rr.Disabled){const n=e.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode")?.getAriaLabel(),s=e.lookupKeybinding("workbench.action.showCommands")?.getAriaLabel(),o=e.lookupKeybinding("workbench.action.openGlobalKeybindings")?.getAriaLabel(),r=g("accessibilityModeOff","The editor is not accessible at this time.");return n?g("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",r,n):s?g("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",r,s):o?g("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",r,o):r}return i.get(k.ariaLabel)}X2(qk,"ariaLabelForScreenReaderContent");function Yk(i){let e=0,t=-1;do{if(t=i.indexOf(`
`,t+1),t===-1)break;e++}while(!0);return e}X2(Yk,"newlinecount");var RHe=Object.defineProperty,OHe=(i,e)=>RHe(i,"name",{value:e,configurable:!0});class Vs{constructor(e,t,n,s,o){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selection=s,this.newlineCountBeforeSelection=o}static{OHe(this,"TextAreaState")}static EMPTY=new Vs("",0,0,null,void 0);toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const n=e.getValue(),s=e.getSelectionStart(),o=e.getSelectionEnd();let r;if(t){const a=n.substring(0,s),l=t.value.substring(0,t.selectionStart);a===l&&(r=t.newlineCountBeforeSelection)}return new Vs(n,s,o,null,r)}collapseSelection(){return this.selectionStart===this.value.length?this:new Vs(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const s=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,s,-1)}if(e>=this.selectionEnd){const s=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,s,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf("")===-1)return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,t,1);const n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,n,-1)}_finishDeduceEditorPosition(e,t,n){let s=0,o=-1;for(;(o=t.indexOf(`
`,o+1))!==-1;)s++;return[e,n*t.length,s]}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const s=Math.min(BA(e.value,t.value),e.selectionStart,t.selectionStart),o=Math.min(FA(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(s,e.value.length-o);const r=t.value.substring(s,t.value.length-o),a=e.selectionStart-s,l=e.selectionEnd-s,c=t.selectionStart-s,d=t.selectionEnd-s;if(c===d){const u=e.selectionStart-s;return{text:r,replacePrevCharCnt:u,replaceNextCharCnt:0,positionDelta:0}}const h=l-a;return{text:r,replacePrevCharCnt:h,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(BA(e.value,t.value),e.selectionEnd),s=Math.min(FA(e.value,t.value),e.value.length-e.selectionEnd),o=e.value.substring(n,e.value.length-s),r=t.value.substring(n,t.value.length-s);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const l=t.selectionEnd-n;return{text:r,replacePrevCharCnt:a,replaceNextCharCnt:o.length-a,positionDelta:l-r.length}}static fromScreenReaderContentState(e){return new Vs(e.value,e.selectionStart,e.selectionEnd,e.selection,e.newlineCountBeforeSelection)}}var rae=Object.defineProperty,MHe=Object.getOwnPropertyDescriptor,Q2=(i,e)=>rae(i,"name",{value:e,configurable:!0}),BHe=(i,e,t,n)=>{for(var s=n>1?void 0:n?MHe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&rae(e,t,s),s},Uz=(i,e)=>(t,n)=>e(t,n,i),Zk;(i=>{i.Tap="-monaco-textarea-synthetic-tap"})(Zk||(Zk={}));class FHe{static{Q2(this,"CompositionContext")}_lastTypeTextLength;constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}let T4=class extends ${constructor(i,e,t,n,s,o){super(),this._host=i,this._textArea=e,this._OS=t,this._browser=n,this._accessibilityService=s,this._logService=o,this._asyncTriggerCut=this._register(new xn(()=>this._onCut.fire(),0)),this._textAreaState=Vs.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(H.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new xn(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let r=null;this._register(this._textArea.onKeyDown(a=>{const l=new Pt(a);(l.keyCode===E.KEY_IN_COMPOSITION||this._currentComposition&&l.keyCode===E.Backspace)&&l.stopPropagation(),l.equals(E.Escape)&&l.preventDefault(),r=l,this._onKeyDown.fire(l)})),this._register(this._textArea.onKeyUp(a=>{const l=new Pt(a);this._onKeyUp.fire(l)})),this._register(this._textArea.onCompositionStart(a=>{const l=new FHe;if(this._currentComposition){this._currentComposition=l;return}if(this._currentComposition=l,this._OS===Ts.Macintosh&&r&&r.equals(E.KEY_IN_COMPOSITION)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===a.data&&(r.code==="ArrowRight"||r.code==="ArrowLeft")){l.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:a.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:a.data});return}this._onCompositionStart.fire({data:a.data})})),this._register(this._textArea.onCompositionUpdate(a=>{const l=this._currentComposition;if(!l)return;if(this._browser.isAndroid){const d=Vs.readFromTextArea(this._textArea,this._textAreaState),h=Vs.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(h),this._onCompositionUpdate.fire(a);return}const c=l.handleCompositionUpdate(a.data);this._textAreaState=Vs.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(c),this._onCompositionUpdate.fire(a)})),this._register(this._textArea.onCompositionEnd(a=>{const l=this._currentComposition;if(!l)return;if(this._currentComposition=null,this._browser.isAndroid){const d=Vs.readFromTextArea(this._textArea,this._textAreaState),h=Vs.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(h),this._onCompositionEnd.fire();return}const c=l.handleCompositionUpdate(a.data);this._textAreaState=Vs.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(c),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(a=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const l=Vs.readFromTextArea(this._textArea,this._textAreaState),c=Vs.deduceInput(this._textAreaState,l,this._OS===Ts.Macintosh);c.replacePrevCharCnt===0&&c.text.length===1&&(Ds(c.text.charCodeAt(0))||c.text.charCodeAt(0)===127)||(this._textAreaState=l,(c.text!==""||c.replacePrevCharCnt!==0||c.replaceNextCharCnt!==0||c.positionDelta!==0)&&this._onType.fire(c))})),this._register(this._textArea.onCut(a=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(a),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(a=>{this._ensureClipboardGetsEditorSelection(a)})),this._register(this._textArea.onPaste(a=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),a.preventDefault(),!a.clipboardData)return;let[l,c]=zz.getTextData(a.clipboardData);l&&(c=c||uL.INSTANCE.get(l),this._onPaste.fire({text:l,metadata:c}))})),this._register(this._textArea.onFocus(()=>{const a=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!a&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new xn(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}static{Q2(this,"TextAreaInput")}_onFocus=this._register(new x);onFocus=this._onFocus.event;_onBlur=this._register(new x);onBlur=this._onBlur.event;_onKeyDown=this._register(new x);onKeyDown=this._onKeyDown.event;_onKeyUp=this._register(new x);onKeyUp=this._onKeyUp.event;_onCut=this._register(new x);onCut=this._onCut.event;_onPaste=this._register(new x);onPaste=this._onPaste.event;_onType=this._register(new x);onType=this._onType.event;_onCompositionStart=this._register(new x);onCompositionStart=this._onCompositionStart.event;_onCompositionUpdate=this._register(new x);onCompositionUpdate=this._onCompositionUpdate.event;_onCompositionEnd=this._register(new x);onCompositionEnd=this._onCompositionEnd.event;_onSelectionChangeRequest=this._register(new x);onSelectionChangeRequest=this._onSelectionChangeRequest.event;_asyncTriggerCut;_asyncFocusGainWriteScreenReaderContent=this._register(new Yi);_textAreaState;get textAreaState(){return this._textAreaState}_selectionChangeListener;_hasFocus;_currentComposition;_initializeFromTest(){this._hasFocus=!0,this._textAreaState=Vs.readFromTextArea(this._textArea,null)}_installSelectionChangeListener(){let i=0;return F(this._textArea.ownerDocument,"selectionchange",e=>{if(Ip.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const t=Date.now(),n=t-i;if(i=t,n<5)return;const s=t-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100||!this._textAreaState.selection)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const r=this._textArea.getSelectionStart(),a=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===r&&this._textAreaState.selectionEnd===a)return;const l=this._textAreaState.deduceEditorPosition(r),c=this._host.deduceModelPosition(l[0],l[1],l[2]),d=this._textAreaState.deduceEditorPosition(a),h=this._host.deduceModelPosition(d[0],d[1],d[2]),u=new St(c.lineNumber,c.column,h.lineNumber,h.column);this._onSelectionChangeRequest.fire(u)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(i){this._hasFocus!==i&&(this._hasFocus=i,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(i,e){this._hasFocus||(e=e.collapseSelection()),e.writeToTextArea(i,this._textArea,this._hasFocus),this._textAreaState=e}writeNativeTextAreaContent(i){!this._accessibilityService.isScreenReaderOptimized()&&i==="render"||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${i})`),this._setAndWriteTextAreaState(i,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(i){const e=this._host.getDataToCopy(),t={version:1,isFromEmptySelection:e.isFromEmptySelection,multicursorText:e.multicursorText,mode:e.mode};uL.INSTANCE.set(this._browser.isFirefox?e.text.replace(/\r\n/g,`
`):e.text,t),i.preventDefault(),i.clipboardData&&zz.setTextData(i.clipboardData,e.text,e.html,t)}};T4=BHe([Uz(4,hf),Uz(5,jo)],T4);const zz={getTextData(i){const e=i.getData(Vb.text);let t=null;const n=i.getData("vscode-editor-data");if(typeof n=="string")try{t=JSON.parse(n),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&i.files.length>0?[Array.prototype.slice.call(i.files,0).map(o=>o.name).join(`
`),null]:[e,t]},setTextData(i,e,t,n){i.setData(Vb.text,e),typeof t=="string"&&i.setData("text/html",t),i.setData("vscode-editor-data",JSON.stringify(n))}};class VHe extends ${constructor(e){super(),this._actual=e,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>Ip.onKeyDown())),this._register(this.onBeforeInput(()=>Ip.onBeforeInput())),this._register(this.onInput(()=>Ip.onInput())),this._register(this.onKeyUp(()=>Ip.onKeyUp())),this._register(F(this._actual,Zk.Tap,()=>this._onSyntheticTap.fire()))}static{Q2(this,"TextAreaWrapper")}onKeyDown=this._register(new Je(this._actual,"keydown")).event;onKeyPress=this._register(new Je(this._actual,"keypress")).event;onKeyUp=this._register(new Je(this._actual,"keyup")).event;onCompositionStart=this._register(new Je(this._actual,"compositionstart")).event;onCompositionUpdate=this._register(new Je(this._actual,"compositionupdate")).event;onCompositionEnd=this._register(new Je(this._actual,"compositionend")).event;onBeforeInput=this._register(new Je(this._actual,"beforeinput")).event;onInput=this._register(new Je(this._actual,"input")).event;onCut=this._register(new Je(this._actual,"cut")).event;onCopy=this._register(new Je(this._actual,"copy")).event;onPaste=this._register(new Je(this._actual,"paste")).event;onFocus=this._register(new Je(this._actual,"focus")).event;onBlur=this._register(new Je(this._actual,"blur")).event;get ownerDocument(){return this._actual.ownerDocument}_onSyntheticTap=this._register(new x);onSyntheticTap=this._onSyntheticTap.event;_ignoreSelectionChangeTime;hasFocus(){const e=Pb(this._actual);return e?e.activeElement===this._actual:this._actual.isConnected?Lr()===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,n){const s=this._actual;let o=null;const r=Pb(s);r?o=r.activeElement:o=Lr();const a=ve(o),l=o===s,c=s.selectionStart,d=s.selectionEnd;if(l&&c===t&&d===n){na&&a.parent!==a&&s.focus();return}if(l){this.setIgnoreSelectionChangeTime("setSelectionRange"),s.setSelectionRange(t,n),na&&a.parent!==a&&s.focus();return}try{const h=Mq(s);this.setIgnoreSelectionChangeTime("setSelectionRange"),s.focus(),s.setSelectionRange(t,n),Bq(s,h)}catch{}}}var WHe=Object.defineProperty,J2=(i,e)=>WHe(i,"name",{value:e,configurable:!0});class HHe extends q2{static{J2(this,"PointerEventHandler")}_lastPointerType;constructor(e,t,n){super(e,t,n),this._register(Gn.addTarget(this.viewHelper.linesContentDomNode)),this._register(F(this.viewHelper.linesContentDomNode,wt.Tap,o=>this.onTap(o))),this._register(F(this.viewHelper.linesContentDomNode,wt.Change,o=>this.onChange(o))),this._register(F(this.viewHelper.linesContentDomNode,wt.Contextmenu,o=>this._onContextMenu(new Jp(o,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(F(this.viewHelper.linesContentDomNode,"pointerdown",o=>{const r=o.pointerType;if(r==="mouse"){this._lastPointerType="mouse";return}else r==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const s=new RWe(this.viewHelper.viewDomNode);this._register(s.onPointerMove(this.viewHelper.viewDomNode,o=>this._onMouseMove(o))),this._register(s.onPointerUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(s.onPointerLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(s.onPointerDown(this.viewHelper.viewDomNode,(o,r)=>this._onMouseDown(o,r)))}onTap(e){!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget)||(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){const n=this._createMouseTarget(new Jp(e,!1,this.viewHelper.viewDomNode),!1);n.position&&this.viewController.dispatchMouse({position:n.position,mouseColumn:n.position.column,startedOnLineNumbers:!1,revealType:Ay.Minimal,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:n.type===Ot.CONTENT_TEXT&&n.detail.injectedText!==null})}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class UHe extends q2{static{J2(this,"TouchHandler")}constructor(e,t,n){super(e,t,n),this._register(Gn.addTarget(this.viewHelper.linesContentDomNode)),this._register(F(this.viewHelper.linesContentDomNode,wt.Tap,s=>this.onTap(s))),this._register(F(this.viewHelper.linesContentDomNode,wt.Change,s=>this.onChange(s))),this._register(F(this.viewHelper.linesContentDomNode,wt.Contextmenu,s=>this._onContextMenu(new Jp(s,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new Jp(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(Zk.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position,Ay.Minimal)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class zHe extends ${static{J2(this,"PointerHandler")}handler;constructor(e,t,n){super(),(ol||dhe&&EG)&&Yy.pointerEvents?this.handler=this._register(new HHe(e,t,n)):_e.TouchEvent?this.handler=this._register(new UHe(e,t,n)):this.handler=this._register(new q2(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}var $He=Object.defineProperty,GHe=(i,e)=>$He(i,"name",{value:e,configurable:!0});class Ov extends AD{static{GHe(this,"DynamicViewOverlay")}}var KHe=Object.defineProperty,gL=(i,e)=>KHe(i,"name",{value:e,configurable:!0});class aae extends ha{static{gL(this,"ViewOverlays")}_visibleLines;domNode;_dynamicOverlays=[];_isFocused=!1;constructor(e){super(e),this._visibleLines=new vre({createLine:gL(()=>new jHe(this._dynamicOverlays),"createLine")}),this.domNode=this._visibleLines.domNode;const n=this._context.configuration.options.get(k.fontInfo);Ao(this.domNode,n),this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const n=this._context.configuration.options.get(k.fontInfo);return Ao(this.domNode,n),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,s=t.length;n<s;n++){const o=t[n];o.prepareRender(e),o.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class jHe{static{gL(this,"ViewOverlayLine")}_dynamicOverlays;_domNode;_renderedContent;constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=Ut(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,t,n,s,o){let r="";for(let a=0,l=this._dynamicOverlays.length;a<l;a++){const c=this._dynamicOverlays[a];r+=c.render(s.startLineNumber,e)}return this._renderedContent===r?!1:(this._renderedContent=r,o.appendString('<div style="top:'),o.appendString(String(t)),o.appendString("px;height:"),o.appendString(String(n)),o.appendString('px;">'),o.appendString(r),o.appendString("</div>"),!0)}layoutLine(e,t,n){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(n))}}class qHe extends aae{static{gL(this,"ContentViewOverlays")}_contentWidth;constructor(e){super(e);const n=this._context.configuration.options.get(k.layoutInfo);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(k.layoutInfo);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class YHe extends aae{static{gL(this,"MarginViewOverlays")}_contentLeft;constructor(e){super(e);const t=this._context.configuration.options,n=t.get(k.layoutInfo);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Ao(this.domNode,t.get(k.fontInfo))}onConfigurationChanged(e){const t=this._context.configuration.options;Ao(this.domNode,t.get(k.fontInfo));const n=t.get(k.layoutInfo);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}var ZHe=Object.defineProperty,XHe=(i,e)=>ZHe(i,"name",{value:e,configurable:!0});class QHe extends ha{static{XHe(this,"BlockDecorations")}domNode;blocks=[];contentWidth=-1;contentLeft=0;constructor(e){super(e),this.domNode=Ut(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const n=this._context.configuration.options.get(k.layoutInfo),s=n.contentWidth-n.verticalScrollbarWidth;this.contentWidth!==s&&(this.contentWidth=s,e=!0);const o=n.contentLeft;return this.contentLeft!==o&&(this.contentLeft=o,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0;const n=e.getDecorationsInViewport();for(const s of n){if(!s.options.blockClassName)continue;let o=this.blocks[t];o||(o=this.blocks[t]=Ut(document.createElement("div")),this.domNode.appendChild(o));let r,a;s.options.blockIsAfterEnd?(r=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!1),a=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0)):(r=e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!0),a=s.range.isEmpty()&&!s.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0));const[l,c,d,h]=s.options.blockPadding??[0,0,0,0];o.setClassName("blockDecorations-block "+s.options.blockClassName),o.setLeft(this.contentLeft-h),o.setWidth(this.contentWidth+h+c),o.setTop(r-e.scrollTop-l),o.setHeight(a-r+l+d),t++}for(let s=t;s<this.blocks.length;s++)this.blocks[s].domNode.remove();this.blocks.length=t}}var JHe=Object.defineProperty,iv=(i,e)=>JHe(i,"name",{value:e,configurable:!0});class e6e extends ha{static{iv(this,"ViewContentWidgets")}_viewDomNode;_widgets;domNode;overflowingContentWidgetsDomNode;constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=Ut(document.createElement("div")),oh.write(this.domNode,Hn.ContentWidgets),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=Ut(document.createElement("div")),oh.write(this.overflowingContentWidgetsDomNode,Hn.OverflowingContentWidgets),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new t6e(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n,s,o){this._widgets[e.getId()].setPosition(t,n,s,o),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const s=n.domNode.domNode;s.remove(),s.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}class t6e{static{iv(this,"Widget")}_context;_viewDomNode;_actual;domNode;id;allowEditorOverflow;suppressMouseDown;_fixedOverflowWidgets;_contentWidth;_contentLeft;_lineHeight;_primaryAnchor=new YS(null,null);_secondaryAnchor=new YS(null,null);_affinity;_preference;_cachedDomNodeOffsetWidth;_cachedDomNodeOffsetHeight;_maxWidth;_isVisible;_renderData;constructor(e,t,n){this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=Ut(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const s=this._context.configuration.options,o=s.get(k.layoutInfo);this._fixedOverflowWidgets=s.get(k.fixedOverflowWidgets),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,this._lineHeight=s.get(k.lineHeight),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(k.lineHeight),e.hasChanged(k.layoutInfo)){const n=t.get(k.layoutInfo);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,n){this._affinity=e,this._primaryAnchor=s(t,this._context.viewModel,this._affinity),this._secondaryAnchor=s(n,this._context.viewModel,this._affinity);function s(o,r,a){if(!o)return new YS(null,null);const l=r.model.validatePosition(o);if(r.coordinatesConverter.modelPositionIsVisible(l)){const c=r.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new YS(o,c)}return new YS(o,null)}iv(s,"getValidPositionPair")}_getMaxWidth(){const e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?t?.innerWidth||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,n,s){this._setPosition(s,e,t),this._preference=n,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,n,s){const o=e.top,r=o,a=e.top+e.height,l=s.viewportHeight-a,c=o-n,d=r>=n,h=a,u=l>=n;let f=e.left;return f+t>s.scrollLeft+s.viewportWidth&&(f=s.scrollLeft+s.viewportWidth-t),f<s.scrollLeft&&(f=s.scrollLeft),{fitsAbove:d,aboveTop:c,fitsBelow:u,belowTop:h,left:f}}_layoutHorizontalSegmentInPage(e,t,n,s){const a=Math.max(15,t.left-s),l=Math.min(t.left+t.width+s,e.width-15),d=this._viewDomNode.domNode.ownerDocument.defaultView;let h=t.left+n-(d?.scrollX??0);if(h+s>l){const u=h-(l-s);h-=u,n-=u}if(h<a){const u=h-a;h-=u,n-=u}return[n,h]}_layoutBoxInPage(e,t,n,s){const o=e.top-n,r=e.top+e.height,a=Xr(this._viewDomNode.domNode),l=this._viewDomNode.domNode.ownerDocument,c=l.defaultView,d=a.top+o-(c?.scrollY??0),h=a.top+r-(c?.scrollY??0),u=$p(l.body),[f,p]=this._layoutHorizontalSegmentInPage(u,a,e.left-s.scrollLeft+this._contentLeft,t),m=22,_=22,w=d>=m,v=h+n<=u.height-_;return this._fixedOverflowWidgets?{fitsAbove:w,aboveTop:Math.max(d,m),fitsBelow:v,belowTop:h,left:p}:{fitsAbove:w,aboveTop:o,fitsBelow:v,belowTop:r,left:f}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new ZS(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){const t=o(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),n=this._secondaryAnchor.viewPosition?.lineNumber===this._primaryAnchor.viewPosition?.lineNumber?this._secondaryAnchor.viewPosition:null,s=o(n,this._affinity,this._lineHeight);return{primary:t,secondary:s};function o(r,a,l){if(!r)return null;const c=e.visibleRangeForPosition(r);if(!c)return null;const d=r.column===1&&a===In.LeftOfInjectedText?0:c.left,h=e.getVerticalOffsetForLineNumber(r.lineNumber)-e.scrollTop;return new $z(h,d,l)}}_reduceAnchorCoordinates(e,t,n){if(!t)return e;const s=this._context.configuration.options.get(k.fontInfo);let o=t.left;return o<e.left?o=Math.max(o,e.left-n+s.typicalFullwidthCharacterWidth):o=Math.min(o,e.left+n-s.typicalFullwidthCharacterWidth),new $z(e.top,o,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:n}=this._getAnchorsCoordinates(e);if(!t)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let r=null;if(typeof this._actual.beforeRender=="function"&&(r=_A(this._actual.beforeRender,this._actual)),r)this._cachedDomNodeOffsetWidth=r.width,this._cachedDomNodeOffsetHeight=r.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const s=this._reduceAnchorCoordinates(t,n,this._cachedDomNodeOffsetWidth);let o;this.allowEditorOverflow?o=this._layoutBoxInPage(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):o=this._layoutBoxInViewport(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let r=1;r<=2;r++)for(const a of this._preference)if(a===t_.ABOVE){if(!o)return null;if(r===2||o.fitsAbove)return{kind:"inViewport",coordinate:new ZS(o.aboveTop,o.left),position:t_.ABOVE}}else if(a===t_.BELOW){if(!o)return null;if(r===2||o.fitsBelow)return{kind:"inViewport",coordinate:new ZS(o.belowTop,o.left),position:t_.BELOW}}else return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new ZS(s.top,s.left)),position:t_.EXACT}:{kind:"inViewport",coordinate:new ZS(s.top,s.left),position:t_.EXACT};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData||this._renderData.kind==="offViewport"){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this._renderData?.kind==="offViewport"&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&_A(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&_A(this._actual.afterRender,this._actual,this._renderData.position)}}class YS{constructor(e,t){this.modelPosition=e,this.viewPosition=t}static{iv(this,"PositionPair")}}class ZS{constructor(e,t){this.top=e,this.left=t}static{iv(this,"Coordinate")}_coordinateBrand=void 0}class $z{constructor(e,t,n){this.top=e,this.left=t,this.height=n}static{iv(this,"AnchorCoordinate")}_anchorCoordinateBrand=void 0}function _A(i,e,...t){try{return i.call(e,...t)}catch{return null}}iv(_A,"safeInvoke");var i6e=Object.defineProperty,e9=(i,e)=>i6e(i,"name",{value:e,configurable:!0});class lae extends Ov{static{e9(this,"AbstractLineHighlightOverlay")}_context;_renderLineHighlight;_wordWrap;_contentLeft;_contentWidth;_selectionIsEmpty;_renderLineHighlightOnlyWhenFocus;_focused;_cursorLineNumbers;_selections;_renderData;constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(k.layoutInfo);this._renderLineHighlight=t.get(k.renderLineHighlight),this._renderLineHighlightOnlyWhenFocus=t.get(k.renderLineHighlightOnlyWhenFocus),this._wordWrap=n.isViewportWrapping,this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new St(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=new Set;for(const o of this._selections)t.add(o.positionLineNumber);const n=Array.from(t);n.sort((o,r)=>o-r),ks(this._cursorLineNumbers,n)||(this._cursorLineNumbers=n,e=!0);const s=this._selections.every(o=>o.isEmpty());return this._selectionIsEmpty!==s&&(this._selectionIsEmpty=s,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(k.layoutInfo);return this._renderLineHighlight=t.get(k.renderLineHighlight),this._renderLineHighlightOnlyWhenFocus=t.get(k.renderLineHighlightOnlyWhenFocus),this._wordWrap=n.isViewportWrapping,this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=[];for(let r=t;r<=n;r++){const a=r-t;s[a]=""}if(this._wordWrap){const r=this._renderOne(e,!1);for(const a of this._cursorLineNumbers){const l=this._context.viewModel.coordinatesConverter,c=l.convertViewPositionToModelPosition(new j(a,1)).lineNumber,d=l.convertModelPositionToViewPosition(new j(c,1)).lineNumber,h=l.convertModelPositionToViewPosition(new j(c,this._context.viewModel.model.getLineMaxColumn(c))).lineNumber,u=Math.max(d,t),f=Math.min(h,n);for(let p=u;p<=f;p++){const m=p-t;s[m]=r}}}const o=this._renderOne(e,!0);for(const r of this._cursorLineNumbers){if(r<t||r>n)continue;const a=r-t;s[a]=o}this._renderData=s}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class n6e extends lae{static{e9(this,"CurrentLineHighlightOverlay")}_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class s6e extends lae{static{e9(this,"CurrentLineMarginHighlightOverlay")}_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}jc((i,e)=>{const t=i.getColor(xX);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||i.defines(K8)){const n=i.getColor(K8);n&&(e.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${n}; }`),Tg(i.type)&&(e.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}});var o6e=Object.defineProperty,r6e=(i,e)=>o6e(i,"name",{value:e,configurable:!0});class a6e extends Ov{static{r6e(this,"DecorationsOverlay")}_context;_typicalHalfwidthCharacterWidth;_renderResult;constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=t.get(k.fontInfo).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(k.fontInfo).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],s=0;for(let l=0,c=t.length;l<c;l++){const d=t[l];d.options.className&&(n[s++]=d)}n=n.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const d=l.options.className,h=c.options.className;return d<h?-1:d>h?1:V.compareRangesUsingStarts(l.range,c.range)});const o=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,a=[];for(let l=o;l<=r;l++){const c=l-o;a[c]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const s=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber;for(let r=0,a=t.length;r<a;r++){const l=t[r];if(!l.options.isWholeLine)continue;const c='<div class="cdr '+l.options.className+'" style="left:0;width:100%;"></div>',d=Math.max(l.range.startLineNumber,s),h=Math.min(l.range.endLineNumber,o);for(let u=d;u<=h;u++){const f=u-s;n[f]+=c}}}_renderNormalDecorations(e,t,n){const s=e.visibleRange.startLineNumber;let o=null,r=!1,a=null,l=!1;for(let c=0,d=t.length;c<d;c++){const h=t[c];if(h.options.isWholeLine)continue;const u=h.options.className,f=!!h.options.showIfCollapsed;let p=h.range;if(f&&p.endColumn===1&&p.endLineNumber!==p.startLineNumber&&(p=new V(p.startLineNumber,p.startColumn,p.endLineNumber-1,this._context.viewModel.getLineMaxColumn(p.endLineNumber-1))),o===u&&r===f&&V.areIntersectingOrTouching(a,p)){a=V.plusRange(a,p);continue}o!==null&&this._renderNormalDecoration(e,a,o,l,r,s,n),o=u,r=f,a=p,l=h.options.shouldFillLineOnLineBreak??!1}o!==null&&this._renderNormalDecoration(e,a,o,l,r,s,n)}_renderNormalDecoration(e,t,n,s,o,r,a){const l=e.linesVisibleRangesForRange(t,n==="findMatch");if(l)for(let c=0,d=l.length;c<d;c++){const h=l[c];if(h.outsideRenderedLine)continue;const u=h.lineNumber-r;if(o&&h.ranges.length===1){const f=h.ranges[0];if(f.width<this._typicalHalfwidthCharacterWidth){const p=Math.round(f.left+f.width/2),m=Math.max(0,Math.round(p-this._typicalHalfwidthCharacterWidth/2));h.ranges[0]=new RR(m,this._typicalHalfwidthCharacterWidth)}}for(let f=0,p=h.ranges.length;f<p;f++){const m=s&&h.continuesOnNextLine&&p===1,_=h.ranges[f],w='<div class="cdr '+n+'" style="left:'+String(_.left)+"px;width:"+(m?"100%;":String(_.width)+"px;")+'"></div>';a[u]+=w}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}var l6e=Object.defineProperty,Gz=(i,e)=>l6e(i,"name",{value:e,configurable:!0});class c6e extends ha{static{Gz(this,"EditorScrollbar")}scrollbar;scrollbarDomNode;constructor(e,t,n,s){super(e);const o=this._context.configuration.options,r=o.get(k.scrollbar),a=o.get(k.mouseWheelScrollSensitivity),l=o.get(k.fastScrollSensitivity),c=o.get(k.scrollPredominantAxis),d={listenOnDomNode:n.domNode,className:"editor-scrollable "+KA(e.theme.type),useShadows:!1,lazyRender:!0,vertical:r.vertical,horizontal:r.horizontal,verticalHasArrows:r.verticalHasArrows,horizontalHasArrows:r.horizontalHasArrows,verticalScrollbarSize:r.verticalScrollbarSize,verticalSliderSize:r.verticalSliderSize,horizontalScrollbarSize:r.horizontalScrollbarSize,horizontalSliderSize:r.horizontalSliderSize,handleMouseWheel:r.handleMouseWheel,alwaysConsumeMouseWheel:r.alwaysConsumeMouseWheel,arrowSize:r.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:r.scrollByPage};this.scrollbar=this._register(new s3(t.domNode,d,this._context.viewLayout.getScrollable())),oh.write(this.scrollbar.getDomNode(),Hn.ScrollableElement),this.scrollbarDomNode=Ut(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const h=Gz((u,f,p)=>{const m={};if(f){const _=u.scrollTop;_&&(m.scrollTop=this._context.viewLayout.getCurrentScrollTop()+_,u.scrollTop=0)}if(p){const _=u.scrollLeft;_&&(m.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+_,u.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(m,ot.Immediate)},"onBrowserDesperateReveal");this._register(F(n.domNode,"scroll",u=>h(n.domNode,!0,!0))),this._register(F(t.domNode,"scroll",u=>h(t.domNode,!0,!1))),this._register(F(s.domNode,"scroll",u=>h(s.domNode,!0,!1))),this._register(F(this.scrollbarDomNode.domNode,"scroll",u=>h(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(k.layoutInfo);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(k.minimap).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(k.scrollbar)||e.hasChanged(k.mouseWheelScrollSensitivity)||e.hasChanged(k.fastScrollSensitivity)){const t=this._context.configuration.options,n=t.get(k.scrollbar),s=t.get(k.mouseWheelScrollSensitivity),o=t.get(k.fastScrollSensitivity),r=t.get(k.scrollPredominantAxis),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:s,fastScrollSensitivity:o,scrollPredominantAxis:r};this.scrollbar.updateOptions(a)}return e.hasChanged(k.layoutInfo)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+KA(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}var d6e=Object.defineProperty,vm=(i,e)=>d6e(i,"name",{value:e,configurable:!0});class A4{constructor(e,t,n,s,o){this.startLineNumber=e,this.endLineNumber=t,this.className=n,this.tooltip=s,this.zIndex=o??0}static{vm(this,"DecorationToRender")}_decorationToRenderBrand=void 0;zIndex}class h6e{constructor(e,t,n){this.className=e,this.zIndex=t,this.tooltip=n}static{vm(this,"LineDecorationToRender")}}class u6e{static{vm(this,"VisibleLineDecorationsToRender")}decorations=[];add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class cae extends Ov{static{vm(this,"DedupOverlay")}_render(e,t,n){const s=[];for(let a=e;a<=t;a++){const l=a-e;s[l]=new u6e}if(n.length===0)return s;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let o=null,r=0;for(let a=0,l=n.length;a<l;a++){const c=n[a],d=c.className,h=c.zIndex;let u=Math.max(c.startLineNumber,e)-e;const f=Math.min(c.endLineNumber,t)-e;o===d?(u=Math.max(r+1,u),r=Math.max(r,f)):(o=d,r=f);for(let p=u;p<=r;p++)s[p].add(new h6e(d,h,c.tooltip))}return s}}class g6e extends ha{static{vm(this,"GlyphMarginWidgets")}domNode;_lineHeight;_glyphMargin;_glyphMarginLeft;_glyphMarginWidth;_glyphMarginDecorationLaneCount;_managedDomNodes;_decorationGlyphsToRender;_widgets={};constructor(e){super(e),this._context=e;const t=this._context.configuration.options,n=t.get(k.layoutInfo);this.domNode=Ut(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(k.lineHeight),this._glyphMargin=t.get(k.glyphMargin),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._glyphMarginDecorationLaneCount=n.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(k.layoutInfo);return this._lineHeight=t.get(k.lineHeight),this._glyphMargin=t.get(k.glyphMargin),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._glyphMarginDecorationLaneCount=n.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=Ut(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference.lane===t.lane&&n.preference.zIndex===t.zIndex&&V.equalsRange(n.preference.range,t.range)?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets[t]){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.remove(),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){const n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,o=e.getDecorationsInViewport();for(const r of o){const a=r.options.glyphMarginClassName;if(!a)continue;const l=Math.max(r.range.startLineNumber,n),c=Math.min(r.range.endLineNumber,s),d=r.options.glyphMargin?.position??_v.Center,h=r.options.zIndex??0;for(let u=l;u<=c;u++){const f=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new j(u,0)),p=this._context.viewModel.glyphLanes.getLanesAtLine(f.lineNumber).indexOf(d);t.push(new f6e(u,p,h,a))}}}_collectWidgetBasedGlyphRenderRequest(e,t){const n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(const o of Object.values(this._widgets)){const r=o.preference.range,{startLineNumber:a,endLineNumber:l}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(V.lift(r));if(!a||!l||l<n||a>s)continue;const c=Math.max(a,n),d=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new j(c,0)),h=this._context.viewModel.glyphLanes.getLanesAtLine(d.lineNumber).indexOf(o.preference.lane);t.push(new p6e(c,h,o.preference.zIndex,o))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((n,s)=>n.lineNumber===s.lineNumber?n.laneIndex===s.laneIndex?n.zIndex===s.zIndex?s.type===n.type?n.type===0&&s.type===0?n.className<s.className?-1:1:0:s.type-n.type:s.zIndex-n.zIndex:n.laneIndex-s.laneIndex:n.lineNumber-s.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const s of Object.values(this._widgets))s.renderInfo=null;const t=new $g(this._collectSortedGlyphRenderRequests(e)),n=[];for(;t.length>0;){const s=t.peek();if(!s)break;const o=t.takeWhile(a=>a.lineNumber===s.lineNumber&&a.laneIndex===s.laneIndex);if(!o||o.length===0)break;const r=o[0];if(r.type===0){const a=[];for(const l of o){if(l.zIndex!==r.zIndex||l.type!==r.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}n.push(r.accept(a.join(" ")))}else r.widget.renderInfo={lineNumber:r.lineNumber,laneIndex:r.laneIndex}}this._decorationGlyphsToRender=n}render(e){if(!this._glyphMargin){for(const n of Object.values(this._widgets))n.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;)this._managedDomNodes.pop()?.domNode.remove();return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const n of Object.values(this._widgets))if(!n.renderInfo)n.domNode.setDisplay("none");else{const s=e.viewportData.relativeVerticalOffset[n.renderInfo.lineNumber-e.viewportData.startLineNumber],o=this._glyphMarginLeft+n.renderInfo.laneIndex*this._lineHeight;n.domNode.setDisplay("block"),n.domNode.setTop(s),n.domNode.setLeft(o),n.domNode.setWidth(t),n.domNode.setHeight(this._lineHeight)}for(let n=0;n<this._decorationGlyphsToRender.length;n++){const s=this._decorationGlyphsToRender[n],o=e.viewportData.relativeVerticalOffset[s.lineNumber-e.viewportData.startLineNumber],r=this._glyphMarginLeft+s.laneIndex*this._lineHeight;let a;n<this._managedDomNodes.length?a=this._managedDomNodes[n]:(a=Ut(document.createElement("div")),this._managedDomNodes.push(a),this.domNode.appendChild(a)),a.setClassName("cgmr codicon "+s.combinedClassName),a.setPosition("absolute"),a.setTop(o),a.setLeft(r),a.setWidth(t),a.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;)this._managedDomNodes.pop()?.domNode.remove()}}class f6e{constructor(e,t,n,s){this.lineNumber=e,this.laneIndex=t,this.zIndex=n,this.className=s}static{vm(this,"DecorationBasedGlyphRenderRequest")}type=0;accept(e){return new m6e(this.lineNumber,this.laneIndex,e)}}class p6e{constructor(e,t,n,s){this.lineNumber=e,this.laneIndex=t,this.zIndex=n,this.widget=s}static{vm(this,"WidgetBasedGlyphRenderRequest")}type=1}class m6e{constructor(e,t,n){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=n}static{vm(this,"DecorationBasedGlyph")}}var _6e=Object.defineProperty,dae=(i,e)=>_6e(i,"name",{value:e,configurable:!0});class b6e extends Ov{static{dae(this,"IndentGuidesOverlay")}_context;_primaryPosition;_spaceWidth;_renderResult;_maxIndentLeft;_bracketPairGuideOptions;constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(k.wrappingInfo),s=t.get(k.fontInfo);this._spaceWidth=s.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(k.guides),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(k.wrappingInfo),s=t.get(k.fontInfo);return this._spaceWidth=s.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(k.guides),!0}onCursorStateChanged(e){const n=e.selections[0].getPosition();return this._primaryPosition?.equals(n)?!1:(this._primaryPosition=n,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=e.scrollWidth,o=this._primaryPosition,r=this.getGuidesByLine(t,Math.min(n+1,this._context.viewModel.getLineCount()),o),a=[];for(let l=t;l<=n;l++){const c=l-t,d=r[c];let h="";const u=e.visibleRangeForPosition(new j(l,1))?.left??0;for(const f of d){const p=f.column===-1?u+(f.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new j(l,f.column)).left;if(p>s||this._maxIndentLeft>0&&p>this._maxIndentLeft)break;const m=f.horizontalLine?f.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",_=f.horizontalLine?(e.visibleRangeForPosition(new j(l,f.horizontalLine.endColumn))?.left??p+this._spaceWidth)-p:this._spaceWidth;h+=`<div class="core-guide ${f.className} ${m}" style="left:${p}px;width:${_}px"></div>`}a[c]=h}this._renderResult=a}getGuidesByLine(e,t,n){const s=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Qw.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Qw.EnabledForActive:Qw.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,o=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let r=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&n){const h=this._context.viewModel.getActiveIndentGuide(n.lineNumber,e,t);r=h.startLineNumber,a=h.endLineNumber,l=h.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),d=[];for(let h=e;h<=t;h++){const u=new Array;d.push(u);const f=s?s[h-e]:[],p=new $g(f),m=o?o[h-e]:0;for(let _=1;_<=m;_++){const w=(_-1)*c+1,v=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||f.length===0)&&r<=h&&h<=a&&_===l;u.push(...p.takeWhile(C=>C.visibleColumn<w)||[]);const b=p.peek();(!b||b.visibleColumn!==w||b.horizontalLine)&&u.push(new T_(w,-1,`core-guide-indent lvl-${(_-1)%30}`+(v?" indent-active":""),null,-1,-1))}u.push(...p.takeWhile(_=>!0)||[])}return d}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}function i_(i){if(!(i&&i.isTransparent()))return i}dae(i_,"transparentToUndefined");jc((i,e)=>{const t=[{bracketColor:PX,guideColor:w0e,guideColorActive:D0e},{bracketColor:RX,guideColor:C0e,guideColorActive:I0e},{bracketColor:OX,guideColor:y0e,guideColorActive:T0e},{bracketColor:MX,guideColor:S0e,guideColorActive:A0e},{bracketColor:BX,guideColor:E0e,guideColorActive:x0e},{bracketColor:FX,guideColor:L0e,guideColorActive:k0e}],n=new $X,s=[{indentColor:t0e,indentColorActive:a0e},{indentColor:i0e,indentColorActive:l0e},{indentColor:n0e,indentColorActive:c0e},{indentColor:s0e,indentColorActive:d0e},{indentColor:o0e,indentColorActive:h0e},{indentColor:r0e,indentColorActive:u0e}],o=t.map(a=>{const l=i.getColor(a.bracketColor),c=i.getColor(a.guideColor),d=i.getColor(a.guideColorActive),h=i_(i_(c)??l?.transparent(.3)),u=i_(i_(d)??l);if(!(!h||!u))return{guideColor:h,guideColorActive:u}}).filter(vb),r=s.map(a=>{const l=i.getColor(a.indentColor),c=i.getColor(a.indentColorActive),d=i_(l),h=i_(c);if(!(!d||!h))return{indentColor:d,indentColorActive:h}}).filter(vb);if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${n.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${n.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${n.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(r.length>0){for(let a=0;a<30;a++){const l=r[a%r.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});var v6e=Object.defineProperty,w6e=(i,e)=>v6e(i,"name",{value:e,configurable:!0});class HR extends Ov{static{w6e(this,"LineNumbersOverlay")}static CLASS_NAME="line-numbers";_context;_lineHeight;_renderLineNumbers;_renderCustomLineNumbers;_renderFinalNewline;_lineNumbersLeft;_lineNumbersWidth;_lastCursorModelPosition;_renderResult;_activeLineNumber;constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new j(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(k.lineHeight);const t=e.get(k.lineNumbers);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(k.renderFinalNewline);const n=e.get(k.layoutInfo);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===l_.Relative||this._renderLineNumbers===l_.Interval)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new j(e,1));if(t.column!==1)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===l_.Relative){const s=Math.abs(this._lastCursorModelPosition.lineNumber-n);return s===0?'<span class="relative-current-line-number">'+n+"</span>":String(s)}if(this._renderLineNumbers===l_.Interval){if(this._lastCursorModelPosition.lineNumber===n||n%10===0)return String(n);const s=this._context.viewModel.getLineCount();return n===s?String(n):""}return String(n)}prepareRender(e){if(this._renderLineNumbers===l_.Off){this._renderResult=null;return}const t=Gi?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,o=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter(c=>!!c.options.lineNumberClassName);o.sort((c,d)=>V.compareRangesUsingEnds(c.range,d.range));let r=0;const a=this._context.viewModel.getLineCount(),l=[];for(let c=n;c<=s;c++){const d=c-n;let h=this._getLineRenderLineNumber(c),u="";for(;r<o.length&&o[r].range.endLineNumber<c;)r++;for(let f=r;f<o.length;f++){const{range:p,options:m}=o[f];p.startLineNumber<=c&&(u+=" "+m.lineNumberClassName)}if(!h&&!u){l[d]="";continue}c===a&&this._context.viewModel.getLineLength(c)===0&&(this._renderFinalNewline==="off"&&(h=""),this._renderFinalNewline==="dimmed"&&(u+=" dimmed-line-number")),c===this._activeLineNumber&&(u+=" active-line-number"),l[d]=`<div class="${HR.CLASS_NAME}${t}${u}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${h}</div>`}this._renderResult=l}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}jc((i,e)=>{const t=i.getColor(Q1e),n=i.getColor(f0e);n?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${n}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});var C6e=Object.defineProperty,y6e=(i,e)=>C6e(i,"name",{value:e,configurable:!0});class x4{static{y6e(this,"ViewLineOptions")}themeType;renderWhitespace;renderControlCharacters;spaceWidth;middotWidth;wsmiddotWidth;useMonospaceOptimizations;canUseHalfwidthRightwardsArrow;lineHeight;stopRenderingLineAfter;fontLigatures;useGpu;constructor(e,t){this.themeType=t;const n=e.options,s=n.get(k.fontInfo);n.get(k.experimentalWhitespaceRendering)==="off"?this.renderWhitespace=n.get(k.renderWhitespace):this.renderWhitespace="none",this.renderControlCharacters=n.get(k.renderControlCharacters),this.spaceWidth=s.spaceWidth,this.middotWidth=s.middotWidth,this.wsmiddotWidth=s.wsmiddotWidth,this.useMonospaceOptimizations=s.isMonospace&&!n.get(k.disableMonospaceOptimizations),this.canUseHalfwidthRightwardsArrow=s.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(k.lineHeight),this.stopRenderingLineAfter=n.get(k.stopRenderingLineAfter),this.fontLigatures=n.get(k.fontLigatures),this.useGpu=n.get(k.experimentalGpuAcceleration)==="on"}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures&&this.useGpu===e.useGpu}}var S6e=Object.defineProperty,fL=(i,e)=>S6e(i,"name",{value:e,configurable:!0});class E6e{static{fL(this,"LastRenderedData")}_currentVisibleRange;constructor(){this._currentVisibleRange=new V(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class L6e{constructor(e,t,n,s,o,r,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=n,this.endColumn=s,this.startScrollTop=o,this.stopScrollTop=r,this.scrollType=a,this.minLineNumber=t,this.maxLineNumber=t}static{fL(this,"HorizontalRevealRangeRequest")}type="range";minLineNumber;maxLineNumber}class D6e{constructor(e,t,n,s,o){this.minimalReveal=e,this.selections=t,this.startScrollTop=n,this.stopScrollTop=s,this.scrollType=o;let r=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const d=t[l];r=Math.min(r,d.startLineNumber),a=Math.max(a,d.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=a}static{fL(this,"HorizontalRevealSelectionsRequest")}type="selections";minLineNumber;maxLineNumber}class t9 extends ha{static{fL(this,"ViewLines")}static HORIZONTAL_EXTRA_PX=30;_linesContent;_textRangeRestingSpot;_visibleLines;domNode;_lineHeight;_typicalHalfwidthCharacterWidth;_isViewportWrapping;_revealHorizontalRightPadding;_cursorSurroundingLines;_cursorSurroundingLinesStyle;_canUseLayerHinting;_viewLineOptions;_maxLineWidth;_asyncUpdateLineWidths;_asyncCheckMonospaceFontAssumptions;_horizontalRevealRequest;_lastRenderedData;_stickyScrollEnabled;_maxNumberStickyLines;constructor(e,t){super(e);const n=this._context.configuration,s=this._context.configuration.options,o=s.get(k.fontInfo),r=s.get(k.wrappingInfo);this._lineHeight=s.get(k.lineHeight),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=s.get(k.revealHorizontalRightPadding),this._cursorSurroundingLines=s.get(k.cursorSurroundingLines),this._cursorSurroundingLinesStyle=s.get(k.cursorSurroundingLinesStyle),this._canUseLayerHinting=!s.get(k.disableLayerHinting),this._viewLineOptions=new x4(n,this._context.theme.type),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new vre({createLine:fL(()=>new hg(this._viewLineOptions),"createLine")}),this.domNode=this._visibleLines.domNode,oh.write(this.domNode,Hn.ViewLines),this.domNode.setClassName(`view-lines ${NC}`),Ao(this.domNode,o),this._maxLineWidth=0,this._asyncUpdateLineWidths=new xn(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new xn(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new E6e,this._horizontalRevealRequest=null,this._stickyScrollEnabled=s.get(k.stickyScroll).enabled,this._maxNumberStickyLines=s.get(k.stickyScroll).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(k.wrappingInfo)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(k.fontInfo),s=t.get(k.wrappingInfo);return this._lineHeight=t.get(k.lineHeight),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=t.get(k.revealHorizontalRightPadding),this._cursorSurroundingLines=t.get(k.cursorSurroundingLines),this._cursorSurroundingLinesStyle=t.get(k.cursorSurroundingLinesStyle),this._canUseLayerHinting=!t.get(k.disableLayerHinting),this._stickyScrollEnabled=t.get(k.stickyScroll).enabled,this._maxNumberStickyLines=t.get(k.stickyScroll).maxLineCount,Ao(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(k.layoutInfo)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new x4(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let o=n;o<=s;o++)this._visibleLines.getVisibleLine(o).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let s=!1;for(let o=t;o<=n;o++)s=this._visibleLines.getVisibleLine(o).onSelectionChanged()||s;return s}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=t;s<=n;s++)this._visibleLines.getVisibleLine(s).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new L6e(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new D6e(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const o=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?ot.Immediate:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(n,o),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const s=this._getLineNumberFor(n);if(s===-1||s<1||s>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(s)===1)return new j(s,1);const o=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(s<o||s>r)return null;let a=this._visibleLines.getVisibleLine(s).getColumnOfNodeOffset(e,t);const l=this._context.viewModel.getLineMinColumn(s);return a<l&&(a=l),new j(s,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===hg.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=t;s<=n;s++){const o=this._visibleLines.getVisibleLine(s);if(e===o.getDomNode())return s}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();if(e<t||e>n)return-1;const s=new uM(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getWidth(s);return this._updateLineWidthsSlowIfDomDidLayout(s),o}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,s=V.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!s)return null;const o=[];let r=0;const a=new uM(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new j(s.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let h=s.startLineNumber;h<=s.endLineNumber;h++){if(h<c||h>d)continue;const u=h===s.startLineNumber?s.startColumn:1,f=h!==s.endLineNumber,p=f?this._context.viewModel.getLineMaxColumn(h):s.endColumn,m=this._visibleLines.getVisibleLine(h).getVisibleRangesForRange(h,u,p,a);if(m){if(t&&h<n){const _=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new j(h+1,1)).lineNumber,_!==l&&(m.ranges[m.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}o[r++]=new zWe(m.outsideRenderedLine,h,RR.from(m.ranges),f)}}return this._updateLineWidthsSlowIfDomDidLayout(a),r===0?null:o}_visibleRangesForLineRange(e,t,n){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const s=new uM(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,s);return this._updateLineWidthsSlowIfDomDidLayout(s),o}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new $We(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let s=1,o=!0;for(let r=t;r<=n;r++){const a=this._visibleLines.getVisibleLine(r);if(e&&!a.getWidthIsFast()){o=!1;continue}s=Math.max(s,a.getWidth(null))}return o&&t===1&&n===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(s),o}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let o=n;o<=s;o++){const r=this._visibleLines.getVisibleLine(o);if(r.needsMonospaceFontCheck()){const a=r.getWidth(null);a>t&&(t=a,e=o)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let o=n;o<=s;o++)this._visibleLines.getVisibleLine(o).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const s=this._computeScrollLeftToReveal(n);s&&(this._isViewportWrapping||this._ensureMaxLineWidth(s.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:s.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),Gi&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let o=n;o<=s;o++)if(this._visibleLines.getVisibleLine(o).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,s,o,r){const a=e.top,l=e.height,c=a+l;let d,h,u;if(o&&o.length>0){let w=o[0].startLineNumber,v=o[0].endLineNumber;for(let b=1,C=o.length;b<C;b++){const S=o[b];w=Math.min(w,S.startLineNumber),v=Math.max(v,S.endLineNumber)}d=!1,h=this._context.viewLayout.getVerticalOffsetForLineNumber(w),u=this._context.viewLayout.getVerticalOffsetForLineNumber(v)+this._lineHeight}else if(s)d=!0,h=this._context.viewLayout.getVerticalOffsetForLineNumber(s.startLineNumber),u=this._context.viewLayout.getVerticalOffsetForLineNumber(s.endLineNumber)+this._lineHeight;else return-1;const f=(t==="mouse"||n)&&this._cursorSurroundingLinesStyle==="default";let p=0,m=0;if(f)n||(p=this._lineHeight);else{const w=l/this._lineHeight,v=Math.max(this._cursorSurroundingLines,this._stickyScrollEnabled?this._maxNumberStickyLines:0),b=Math.min(w/2,v);p=b*this._lineHeight,m=Math.max(0,b-1)*this._lineHeight}n||(r===ei.Simple||r===ei.Bottom)&&(m+=this._lineHeight),h-=p,u+=m;let _;if(u-h>l){if(!d)return-1;_=h}else if(r===ei.NearTop||r===ei.NearTopIfOutsideViewport)if(r===ei.NearTopIfOutsideViewport&&a<=h&&u<=c)_=a;else{const w=Math.max(5*this._lineHeight,l*.2),v=h-w,b=u-l;_=Math.max(b,v)}else if(r===ei.Center||r===ei.CenterIfOutsideViewport)if(r===ei.CenterIfOutsideViewport&&a<=h&&u<=c)_=a;else{const w=(h+u)/2;_=Math.max(0,w-l/2)}else _=this._computeMinimumScrolling(a,c,h,u,r===ei.Top,r===ei.Bottom);return _}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=this._context.configuration.options.get(k.layoutInfo),s=t.left,o=s+t.width-n.verticalScrollbarWidth;let r=fn.MAX_SAFE_SMALL_INTEGER,a=0;if(e.type==="range"){const c=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!c)return null;for(const d of c.ranges)r=Math.min(r,Math.round(d.left)),a=Math.max(a,Math.round(d.left+d.width))}else for(const c of e.selections){if(c.startLineNumber!==c.endLineNumber)return null;const d=this._visibleRangesForLineRange(c.startLineNumber,c.startColumn,c.endColumn);if(!d)return null;for(const h of d.ranges)r=Math.min(r,Math.round(h.left)),a=Math.max(a,Math.round(h.left+h.width))}return e.minimalReveal||(r=Math.max(0,r-t9.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-r>t.width?null:{scrollLeft:this._computeMinimumScrolling(s,o,r,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,n,s,o,r){e=e|0,t=t|0,n=n|0,s=s|0,o=!!o,r=!!r;const a=t-e;if(s-n<a){if(o)return n;if(r)return Math.max(0,s-a);if(n<e)return n;if(s>t)return Math.max(0,s-a)}else return n;return e}}var I6e=Object.defineProperty,T6e=(i,e)=>I6e(i,"name",{value:e,configurable:!0});class A6e extends cae{static{T6e(this,"LinesDecorationsOverlay")}_context;_decorationsLeft;_decorationsWidth;_renderResult;constructor(e){super(),this._context=e;const n=this._context.configuration.options.get(k.layoutInfo);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(k.layoutInfo);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let s=0;for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.options.linesDecorationsClassName,c=a.options.zIndex;l&&(n[s++]=new A4(a.range.startLineNumber,a.range.endLineNumber,l,a.options.linesDecorationsTooltip??null,c));const d=a.options.firstLineDecorationClassName;d&&(n[s++]=new A4(a.range.startLineNumber,a.range.startLineNumber,d,a.options.linesDecorationsTooltip??null,c))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._render(t,n,this._getDecorations(e)),o=this._decorationsLeft.toString(),r=this._decorationsWidth.toString(),a='" style="left:'+o+"px;width:"+r+'px;"></div>',l=[];for(let c=t;c<=n;c++){const d=c-t,h=s[d].getDecorations();let u="";for(const f of h){let p='<div class="cldr '+f.className;f.tooltip!==null&&(p+='" title="'+f.tooltip),p+=a,u+=p}l[d]=u}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}var x6e=Object.defineProperty,k6e=(i,e)=>x6e(i,"name",{value:e,configurable:!0});class pL extends ha{static{k6e(this,"Margin")}static CLASS_NAME="glyph-margin";static OUTER_CLASS_NAME="margin";_domNode;_canUseLayerHinting;_contentLeft;_glyphMarginLeft;_glyphMarginWidth;_glyphMarginBackgroundDomNode;constructor(e){super(e);const t=this._context.configuration.options,n=t.get(k.layoutInfo);this._canUseLayerHinting=!t.get(k.disableLayerHinting),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=Ut(document.createElement("div")),this._domNode.setClassName(pL.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=Ut(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(pL.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(k.layoutInfo);return this._canUseLayerHinting=!t.get(k.disableLayerHinting),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}var N6e=Object.defineProperty,P6e=(i,e)=>N6e(i,"name",{value:e,configurable:!0});class R6e extends cae{static{P6e(this,"MarginViewLineDecorationsOverlay")}_context;_renderResult;constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let s=0;for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.options.marginClassName,c=a.options.zIndex;l&&(n[s++]=new A4(a.range.startLineNumber,a.range.endLineNumber,l,null,c))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._render(t,n,this._getDecorations(e)),o=[];for(let r=t;r<=n;r++){const a=r-t,l=s[a].getDecorations();let c="";for(const d of l)c+='<div class="cmdr '+d.className+'" style=""></div>';o[a]=c}this._renderResult=o}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}var O6e=Object.defineProperty,M6e=(i,e)=>O6e(i,"name",{value:e,configurable:!0});class Fl{static{M6e(this,"RGBA8")}_rgba8Brand=void 0;static Empty=new Fl(0,0,0,0);r;g;b;a;constructor(e,t,n,s){this.r=Fl._clamp(e),this.g=Fl._clamp(t),this.b=Fl._clamp(n),this.a=Fl._clamp(s)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}var B6e=Object.defineProperty,F6e=(i,e)=>B6e(i,"name",{value:e,configurable:!0}),oi=(i=>(i[i.START_CH_CODE=32]="START_CH_CODE",i[i.END_CH_CODE=126]="END_CH_CODE",i[i.UNKNOWN_CODE=65533]="UNKNOWN_CODE",i[i.CHAR_COUNT=96]="CHAR_COUNT",i[i.SAMPLED_CHAR_HEIGHT=16]="SAMPLED_CHAR_HEIGHT",i[i.SAMPLED_CHAR_WIDTH=10]="SAMPLED_CHAR_WIDTH",i[i.BASE_CHAR_HEIGHT=2]="BASE_CHAR_HEIGHT",i[i.BASE_CHAR_WIDTH=1]="BASE_CHAR_WIDTH",i[i.RGBA_CHANNELS_CNT=4]="RGBA_CHANNELS_CNT",i[i.RGBA_SAMPLED_ROW_WIDTH=3840]="RGBA_SAMPLED_ROW_WIDTH",i))(oi||{});const V6e=(()=>{const i=[];for(let e=32;e<=126;e++)i.push(e);return i.push(65533),i})(),W6e=F6e((i,e)=>(i-=32,i<0||i>96?e<=2?(i+96)%96:95:i),"getCharIndex");var H6e=Object.defineProperty,U6e=(i,e)=>H6e(i,"name",{value:e,configurable:!0});class mL{constructor(e,t){this.scale=t,this.charDataNormal=mL.soften(e,12/15),this.charDataLight=mL.soften(e,50/60)}static{U6e(this,"MinimapCharRenderer")}_minimapCharRendererBrand=void 0;charDataNormal;charDataLight;static soften(e,t){const n=new Uint8ClampedArray(e.length);for(let s=0,o=e.length;s<o;s++)n[s]=K0(e[s]*t);return n}renderChar(e,t,n,s,o,r,a,l,c,d,h){const u=oi.BASE_CHAR_WIDTH*this.scale,f=oi.BASE_CHAR_HEIGHT*this.scale,p=h?1:f;if(t+u>e.width||n+p>e.height){console.warn("bad render request outside image data");return}const m=d?this.charDataLight:this.charDataNormal,_=W6e(s,c),w=e.width*oi.RGBA_CHANNELS_CNT,v=a.r,b=a.g,C=a.b,S=o.r-v,D=o.g-b,T=o.b-C,I=Math.max(r,l),R=e.data;let G=_*u*f,K=n*w+t*oi.RGBA_CHANNELS_CNT;for(let X=0;X<p;X++){let we=K;for(let re=0;re<u;re++){const le=m[G++]/255*(r/255);R[we++]=v+S*le,R[we++]=b+D*le,R[we++]=C+T*le,R[we++]=I}K+=w}}blockRenderChar(e,t,n,s,o,r,a,l){const c=oi.BASE_CHAR_WIDTH*this.scale,d=oi.BASE_CHAR_HEIGHT*this.scale,h=l?1:d;if(t+c>e.width||n+h>e.height){console.warn("bad render request outside image data");return}const u=e.width*oi.RGBA_CHANNELS_CNT,f=.5*(o/255),p=r.r,m=r.g,_=r.b,w=s.r-p,v=s.g-m,b=s.b-_,C=p+w*f,S=m+v*f,D=_+b*f,T=Math.max(o,a),I=e.data;let R=n*u+t*oi.RGBA_CHANNELS_CNT;for(let G=0;G<h;G++){let K=R;for(let X=0;X<c;X++)I[K++]=C,I[K++]=S,I[K++]=D,I[K++]=T;R+=u}}}var z6e=Object.defineProperty,$6e=(i,e)=>z6e(i,"name",{value:e,configurable:!0});class UR extends ${static{$6e(this,"MinimapTokensColorTracker")}static _INSTANCE=null;static getInstance(){return this._INSTANCE||(this._INSTANCE=Eb(new UR)),this._INSTANCE}_colors;_backgroundIsLight;_onDidChange=new x;onDidChange=this._onDidChange.event;constructor(){super(),this._updateColorMap(),this._register(lu.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=lu.getColorMap();if(!e){this._colors=[Fl.Empty],this._backgroundIsLight=!0;return}this._colors=[Fl.Empty];for(let n=1;n<e.length;n++){const s=e[n].rgba;this._colors[n]=new Fl(s.r,s.g,s.b,Math.round(s.a*255))}const t=e[oa.DefaultBackground].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=oa.DefaultBackground),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}var G6e=Object.defineProperty,K6e=(i,e)=>G6e(i,"name",{value:e,configurable:!0});const Kz={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},jz=K6e(i=>{const e=new Uint8ClampedArray(i.length/2);for(let t=0;t<i.length;t+=2)e[t>>1]=Kz[i[t]]<<4|Kz[i[t+1]]&15;return e},"decodeData"),qz={1:Bp(()=>jz("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:Bp(()=>jz("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};var j6e=Object.defineProperty,q6e=(i,e)=>j6e(i,"name",{value:e,configurable:!0});class I0{static{q6e(this,"MinimapCharRendererFactory")}static lastCreated;static lastFontFamily;static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return qz[e]?n=new mL(qz[e](),e):n=I0.createFromSampleData(I0.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height=`${oi.SAMPLED_CHAR_HEIGHT}px`,t.height=oi.SAMPLED_CHAR_HEIGHT,t.width=oi.CHAR_COUNT*oi.SAMPLED_CHAR_WIDTH,t.style.width=oi.CHAR_COUNT*oi.SAMPLED_CHAR_WIDTH+"px",n.fillStyle="#ffffff",n.font=`bold ${oi.SAMPLED_CHAR_HEIGHT}px ${e}`,n.textBaseline="middle";let s=0;for(const o of V6e)n.fillText(String.fromCharCode(o),s,oi.SAMPLED_CHAR_HEIGHT/2),s+=oi.SAMPLED_CHAR_WIDTH;return n.getImageData(0,0,oi.CHAR_COUNT*oi.SAMPLED_CHAR_WIDTH,oi.SAMPLED_CHAR_HEIGHT)}static createFromSampleData(e,t){const n=oi.SAMPLED_CHAR_HEIGHT*oi.SAMPLED_CHAR_WIDTH*oi.RGBA_CHANNELS_CNT*oi.CHAR_COUNT;if(e.length!==n)throw new Error("Unexpected source in MinimapCharRenderer");const s=I0._downsample(e,t);return new mL(s,t)}static _downsampleChar(e,t,n,s,o){const r=oi.BASE_CHAR_WIDTH*o,a=oi.BASE_CHAR_HEIGHT*o;let l=s,c=0;for(let d=0;d<a;d++){const h=d/a*oi.SAMPLED_CHAR_HEIGHT,u=(d+1)/a*oi.SAMPLED_CHAR_HEIGHT;for(let f=0;f<r;f++){const p=f/r*oi.SAMPLED_CHAR_WIDTH,m=(f+1)/r*oi.SAMPLED_CHAR_WIDTH;let _=0,w=0;for(let b=h;b<u;b++){const C=t+Math.floor(b)*oi.RGBA_SAMPLED_ROW_WIDTH,S=1-(b-Math.floor(b));for(let D=p;D<m;D++){const T=1-(D-Math.floor(D)),I=C+Math.floor(D)*oi.RGBA_CHANNELS_CNT,R=T*S;w+=R,_+=e[I]*e[I+3]/255*R}}const v=_/w;c=Math.max(c,v),n[l++]=K0(v)}}return c}static _downsample(e,t){const n=oi.BASE_CHAR_HEIGHT*t*oi.BASE_CHAR_WIDTH*t,s=n*oi.CHAR_COUNT,o=new Uint8ClampedArray(s);let r=0,a=0,l=0;for(let c=0;c<oi.CHAR_COUNT;c++)l=Math.max(l,this._downsampleChar(e,a,o,r,t)),r+=n,a+=oi.SAMPLED_CHAR_WIDTH*oi.RGBA_CHANNELS_CNT;if(l>0){const c=255/l;for(let d=0;d<s;d++)o[d]*=c}return o}}const Y6e=Nt?'"Segoe WPC", "Segoe UI", sans-serif':Ue?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif';var Z6e=Object.defineProperty,rh=(i,e)=>Z6e(i,"name",{value:e,configurable:!0});const X6e=140,Q6e=2;class PC{static{rh(this,"MinimapOptions")}renderMinimap;size;minimapHeightIsEditorHeight;scrollBeyondLastLine;paddingTop;paddingBottom;showSlider;autohide;pixelRatio;typicalHalfwidthCharacterWidth;lineHeight;minimapLeft;minimapWidth;minimapHeight;canvasInnerWidth;canvasInnerHeight;canvasOuterWidth;canvasOuterHeight;isSampling;editorHeight;fontScale;minimapLineHeight;minimapCharWidth;sectionHeaderFontFamily;sectionHeaderFontSize;sectionHeaderLetterSpacing;sectionHeaderFontColor;charRenderer;defaultBackgroundColor;backgroundColor;foregroundAlpha;constructor(e,t,n){const s=e.options,o=s.get(k.pixelRatio),r=s.get(k.layoutInfo),a=r.minimap,l=s.get(k.fontInfo),c=s.get(k.minimap);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=s.get(k.scrollBeyondLastLine),this.paddingTop=s.get(k.padding).top,this.paddingBottom=s.get(k.padding).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=o,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=s.get(k.lineHeight),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=r.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=r.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=oi.BASE_CHAR_WIDTH*this.fontScale,this.sectionHeaderFontFamily=Y6e,this.sectionHeaderFontSize=c.sectionHeaderFontSize*o,this.sectionHeaderLetterSpacing=c.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=PC._getSectionHeaderColor(t,n.getColor(oa.DefaultForeground)),this.charRenderer=Bp(()=>I0.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=n.getColor(oa.DefaultBackground),this.backgroundColor=PC._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=PC._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(Pfe);return n?new Fl(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(Rfe);return t?Fl._clamp(Math.round(255*t.rgba.a)):255}static _getSectionHeaderColor(e,t){const n=e.getColor(sm);return n?new Fl(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===e.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class T0{constructor(e,t,n,s,o,r,a,l,c){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=s,this.sliderTop=o,this.sliderHeight=r,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=c}static{rh(this,"MinimapLayout")}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumber,e.endLineNumber);return t>n?null:[t,n]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,n,s,o,r,a,l,c,d,h){const u=e.pixelRatio,f=e.minimapLineHeight,p=Math.floor(e.canvasInnerHeight/f),m=e.lineHeight;if(e.minimapHeightIsEditorHeight){let D=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(D+=Math.max(0,o-e.lineHeight-e.paddingBottom));const T=Math.max(1,Math.floor(o*o/D)),I=Math.max(0,e.minimapHeight-T),R=I/(d-o),G=c*R,K=I>0,X=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),we=Math.floor(e.paddingTop/e.lineHeight);return new T0(c,d,K,R,G,T,we,1,Math.min(a,X))}let _;if(r&&n!==a){const D=n-t+1;_=Math.floor(D*f/u)}else{const D=o/m;_=Math.floor(D*f/u)}const w=Math.floor(e.paddingTop/m);let v=Math.floor(e.paddingBottom/m);if(e.scrollBeyondLastLine){const D=o/m;v=Math.max(v,D-1)}let b;if(v>0){const D=o/m;b=(w+a+v-D-1)*f/u}else b=Math.max(0,(w+a)*f/u-_);b=Math.min(e.minimapHeight-_,b);const C=b/(d-o),S=c*C;if(p>=w+a+v){const D=b>0;return new T0(c,d,D,C,S,_,w,1,a)}else{let D;t>1?D=t+w:D=Math.max(1,c/m);let T,I=Math.max(1,Math.floor(D-S*u/f));I<w?(T=w-I+1,I=1):(T=0,I=Math.max(1,I-w)),h&&h.scrollHeight===d&&(h.scrollTop>c&&(I=Math.min(I,h.startLineNumber),T=Math.max(T,h.topPaddingLineCount)),h.scrollTop<c&&(I=Math.max(I,h.startLineNumber),T=Math.min(T,h.topPaddingLineCount)));const R=Math.min(a,I-T+p-1),G=(c-s)/m;let K;return c>=e.paddingTop?K=(t-I+T+G)*f/u:K=c/e.paddingTop*(T+G)*f/u,new T0(c,d,!0,C,K,_,T,I,R)}}}class zR{static{rh(this,"MinimapLine")}static INVALID=new zR(-1);dy;constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}class Yz{static{rh(this,"RenderData")}renderedLayout;_imageData;_renderedLines;constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new bre({createLine:rh(()=>zR.INVALID,"createLine")}),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let s=0,o=n.length;s<o;s++)if(n[s].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class i9{static{rh(this,"MinimapBuffers")}_backgroundFillData;_buffers;_lastUsedBuffer;constructor(e,t,n,s){this._backgroundFillData=i9._createBackgroundFillData(t,n,s),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const s=n.r,o=n.g,r=n.b,a=n.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let d=0;d<t;d++)for(let h=0;h<e;h++)l[c]=s,l[c+1]=o,l[c+2]=r,l[c+3]=a,c+=4;return l}}class _L{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static{rh(this,"MinimapSamplingState")}static compute(e,t,n){if(e.renderMinimap===pw.None||!e.isSampling)return[null,[]];const{minimapLineCount:s}=qw.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),o=t/s,r=o/2;if(!n||n.minimapLines.length===0){const _=[];if(_[0]=1,s>1){for(let w=0,v=s-1;w<v;w++)_[w]=Math.round(w*o+r);_[s-1]=t}return[new _L(o,_),[]]}const a=n.minimapLines,l=a.length,c=[];let d=0,h=0,u=1;const f=10;let p=[],m=null;for(let _=0;_<s;_++){const w=Math.max(u,Math.round(_*o)),v=Math.max(w,Math.round((_+1)*o));for(;d<l&&a[d]<w;){if(p.length<f){const C=d+1+h;m&&m.type==="deleted"&&m._oldIndex===d-1?m.deleteToLineNumber++:(m={type:"deleted",_oldIndex:d,deleteFromLineNumber:C,deleteToLineNumber:C},p.push(m)),h--}d++}let b;if(d<l&&a[d]<=v)b=a[d],d++;else if(_===0?b=1:_+1===s?b=t:b=Math.round(_*o+r),p.length<f){const C=d+1+h;m&&m.type==="inserted"&&m._i===_-1?m.insertToLineNumber++:(m={type:"inserted",_i:_,insertFromLineNumber:C,insertToLineNumber:C},p.push(m)),h++}c[_]=b,u=b}if(p.length<f)for(;d<l;){const _=d+1+h;m&&m.type==="deleted"&&m._oldIndex===d-1?m.deleteToLineNumber++:(m={type:"deleted",_oldIndex:d,deleteFromLineNumber:_,deleteToLineNumber:_},p.push(m)),h--,d++}else p=[{type:"flush"}];return[new _L(o,c),p]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let s=this.modelLineToMinimapLine(t)-1;for(;s+1<this.minimapLines.length&&this.minimapLines[s+1]<=t;)s++;if(n===s){const o=this.minimapLines[n];if(o<e||o>t)return null}return[n+1,s+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),s=this.modelLineToMinimapLine(t);return e!==t&&s===n&&(s===this.minimapLines.length?n>1&&n--:s++),[n,s]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,s=0;for(let o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]<=e.toLineNumber?(this.minimapLines[o]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,o),s=Math.max(s,o)):this.minimapLines[o]-=t;return[n,s]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}class J6e extends ha{static{rh(this,"Minimap")}tokensColorTracker;_selections;_minimapSelections;options;_samplingState;_shouldCheckSampling;_sectionHeaderCache=new Ry(10,1.5);_actual;constructor(e){super(e),this.tokensColorTracker=UR.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new PC(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=_L.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new Ow(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new PC(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const n of e.ranges){const s=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);s&&t.push({fromLineNumber:s[0],toLineNumber:s[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const s={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(s)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,n]=_L.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const s of n)switch(s.type){case"deleted":this._actual.onLinesDeleted(s.deleteFromLineNumber,s.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(s.insertFromLineNumber,s.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){const s=[];for(let o=0,r=t-e+1;o<r;o++)n[o]?s[o]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+o-1]):s[o]=null;return s}return this._context.viewModel.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new St(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){const n=this._getMinimapDecorationsInViewport(e,t).filter(s=>!s.options.minimap?.sectionHeaderStyle);if(this._samplingState){const s=[];for(const o of n){if(!o.options.minimap)continue;const r=o.range,a=this._samplingState.modelLineToMinimapLine(r.startLineNumber),l=this._samplingState.modelLineToMinimapLine(r.endLineNumber);s.push(new Hse(new V(a,r.startColumn,l,r.endColumn),o.options))}return s}return n}getSectionHeaderDecorationsInViewport(e,t){const n=this.options.minimapLineHeight,o=this.options.sectionHeaderFontSize/n;return e=Math.floor(Math.max(1,e-o)),this._getMinimapDecorationsInViewport(e,t).filter(r=>!!r.options.minimap?.sectionHeaderStyle)}_getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const s=this._samplingState.minimapLines[e-1],o=this._samplingState.minimapLines[t-1];n=new V(s,1,o,this._context.viewModel.getLineMaxColumn(o))}else n=new V(e,1,t,this._context.viewModel.getLineMaxColumn(t));return this._context.viewModel.getMinimapDecorationsInRange(n)}getSectionHeaderText(e,t){const n=e.options.minimap?.sectionHeaderText;if(!n)return null;const s=this._sectionHeaderCache.get(n);if(s)return s;const o=t(n);return this._sectionHeaderCache.set(n,o),o}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new V(e,1,e,1),ei.Center,ot.Smooth)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},ot.Immediate)}}class Ow extends ${static{rh(this,"InnerMinimap")}_theme;_model;_domNode;_shadow;_canvas;_decorationsCanvas;_slider;_sliderHorizontal;_pointerDownListener;_sliderPointerMoveMonitor;_sliderPointerDownListener;_gestureDisposable;_sliderTouchStartListener;_sliderTouchMoveListener;_sliderTouchEndListener;_lastRenderData;_selectionColor;_renderDecorations=!1;_gestureInProgress=!1;_buffers;constructor(e,t){super(),this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(o8),this._domNode=Ut(document.createElement("div")),oh.write(this._domNode,Hn.Minimap),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=Ut(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=Ut(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=Ut(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=Ut(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=Ut(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=Gs(this._domNode.domNode,Q.POINTER_DOWN,n=>{if(n.preventDefault(),this._model.options.renderMinimap===pw.None||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.button===0&&this._lastRenderData){const c=Xr(this._slider.domNode),d=c.top+c.height/2;this._startSliderDragging(n,d,this._lastRenderData.renderedLayout)}return}const o=this._model.options.minimapLineHeight,r=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.offsetY;let l=Math.floor(r/o)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new HP,this._sliderPointerDownListener=Gs(this._slider.domNode,Q.POINTER_DOWN,n=>{n.preventDefault(),n.stopPropagation(),n.button===0&&this._lastRenderData&&this._startSliderDragging(n,n.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Gn.addTarget(this._domNode.domNode),this._sliderTouchStartListener=F(this._domNode.domNode,wt.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=F(this._domNode.domNode,wt.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=Gs(this._domNode.domNode,wt.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n){if(!e.target||!(e.target instanceof Element))return;const s=e.pageX;this._slider.toggleClassName("active",!0);const o=rh((r,a)=>{const l=Xr(this._domNode.domNode),c=Math.min(Math.abs(a-s),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(Nt&&c>X6e){this._model.setScrollTop(n.scrollTop);return}const d=r-t;this._model.setScrollTop(n.getDesiredScrollTopFromDelta(d))},"handlePointerMove");e.pageY!==t&&o(e.pageY,s),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>o(r.pageY,r.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new i9(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData?.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData?.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(o8),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===pw.None){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=T0.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(V.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((u,f)=>(u.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:s,canvasInnerHeight:o}=this._model.options,r=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,s,o);const d=new Zz(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,d,e,r),this._renderDecorationsLineHighlights(c,n,d,e,r);const h=new Zz(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,h,e,r,l,a,s),this._renderDecorationsHighlights(c,n,h,e,r,l,a,s),this._renderSectionHeaders(e)}}_renderSelectionLineHighlights(e,t,n,s,o){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let r=0,a=0;for(const l of t){const c=s.intersectWithViewport(l);if(!c)continue;const[d,h]=c;for(let p=d;p<=h;p++)n.set(p,!0);const u=s.getYForLineNumber(d,o),f=s.getYForLineNumber(h,o);a>=u||(a>r&&e.fillRect(Ah,r,e.canvas.width,a-r),r=u),a=f}a>r&&e.fillRect(Ah,r,e.canvas.width,a-r)}_renderDecorationsLineHighlights(e,t,n,s,o){const r=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==ST.Inline)continue;const d=s.intersectWithViewport(l.range);if(!d)continue;const[h,u]=d,f=c.getColor(this._theme.value);if(!f||f.isTransparent())continue;let p=r.get(f.toString());p||(p=f.transparent(.5).toString(),r.set(f.toString(),p)),e.fillStyle=p;for(let m=h;m<=u;m++){if(n.has(m))continue;n.set(m,!0);const _=s.getYForLineNumber(h,o);e.fillRect(Ah,_,e.canvas.width,o)}}}_renderSelectionsHighlights(e,t,n,s,o,r,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const d=s.intersectWithViewport(c);if(!d)continue;const[h,u]=d;for(let f=h;f<=u;f++)this.renderDecorationOnLine(e,n,c,this._selectionColor,s,f,o,o,r,a,l)}}_renderDecorationsHighlights(e,t,n,s,o,r,a,l){for(const c of t){const d=c.options.minimap;if(!d)continue;const h=s.intersectWithViewport(c.range);if(!h)continue;const[u,f]=h,p=d.getColor(this._theme.value);if(!(!p||p.isTransparent()))for(let m=u;m<=f;m++)switch(d.position){case ST.Inline:this.renderDecorationOnLine(e,n,c.range,p,s,m,o,o,r,a,l);continue;case ST.Gutter:{const _=s.getYForLineNumber(m,o);this.renderDecoration(e,p,2,_,Q6e,o);continue}}}}renderDecorationOnLine(e,t,n,s,o,r,a,l,c,d,h){const u=o.getYForLineNumber(r,l);if(u+a<0||u>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:p}=n,m=f===r?n.startColumn:1,_=p===r?n.endColumn:this._model.getLineMaxColumn(r),w=this.getXOffsetForPosition(t,r,m,c,d,h),v=this.getXOffsetForPosition(t,r,_,c,d,h);this.renderDecoration(e,s,w,u,v-w,a)}getXOffsetForPosition(e,t,n,s,o,r){if(n===1)return Ah;if((n-1)*o>=r)return r;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[Ah];let d=Ah;for(let h=1;h<c.length+1;h++){const u=c.charCodeAt(h-1),f=u===A.Tab?s*o:Kg(u)?2*o:o,p=d+f;if(p>=r){l[h]=r;break}l[h]=p,d=p}e.set(t,l)}return n-1<l.length?l[n-1]:r}renderDecoration(e,t,n,s,o,r){e.fillStyle=t&&t.toString()||"",e.fillRect(n,s,o,r)}_renderSectionHeaders(e){const t=this._model.options.minimapLineHeight,n=this._model.options.sectionHeaderFontSize,s=this._model.options.sectionHeaderLetterSpacing,o=n*1.5,{canvasInnerWidth:r}=this._model.options,a=this._model.options.backgroundColor,l=`rgb(${a.r} ${a.g} ${a.b} / .7)`,c=this._model.options.sectionHeaderFontColor,d=`rgb(${c.r} ${c.g} ${c.b})`,h=d,u=this._decorationsCanvas.domNode.getContext("2d");u.letterSpacing=s+"px",u.font="500 "+n+"px "+this._model.options.sectionHeaderFontFamily,u.strokeStyle=h,u.lineWidth=.2;const f=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);f.sort((m,_)=>m.range.startLineNumber-_.range.startLineNumber);const p=Ow._fitSectionHeader.bind(null,u,r-Ah);for(const m of f){const _=e.getYForLineNumber(m.range.startLineNumber,t)+n,w=_-n,v=w+2,b=this._model.getSectionHeaderText(m,p);Ow._renderSectionLabel(u,b,m.options.minimap?.sectionHeaderStyle===uX.Underlined,l,d,r,w,o,_,v)}}static _fitSectionHeader(e,t,n){if(!n)return n;const s="",o=e.measureText(n).width,r=e.measureText(s).width;if(o<=t||o<=r)return n;const a=n.length,l=o/n.length,c=Math.floor((t-r)/l)-1;let d=Math.ceil(c/2);for(;d>0&&/\s/.test(n[d-1]);)--d;return n.substring(0,d)+s+n.substring(a-(c-d))}static _renderSectionLabel(e,t,n,s,o,r,a,l,c,d){t&&(e.fillStyle=s,e.fillRect(0,a,r,l),e.fillStyle=o,e.fillText(t,Ah,c)),n&&(e.beginPath(),e.moveTo(0,d),e.lineTo(r,d),e.closePath(),e.stroke())}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,s=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const le=this._lastRenderData._get();return new Yz(e,le.imageData,le.lines)}const o=this._getBuffer();if(!o)return null;const[r,a,l]=Ow._renderUntouchedLines(o,e.topPaddingLineCount,t,n,s,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,n,l),d=this._model.getOptions().tabSize,h=this._model.options.defaultBackgroundColor,u=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,p=this._model.tokensColorTracker,m=p.backgroundIsLight(),_=this._model.options.renderMinimap,w=this._model.options.charRenderer(),v=this._model.options.fontScale,b=this._model.options.minimapCharWidth,S=(_===pw.Text?oi.BASE_CHAR_HEIGHT:oi.BASE_CHAR_HEIGHT+1)*v,D=s>S?Math.floor((s-S)/2):0,T=u.a/255,I=new Fl(Math.round((u.r-h.r)*T+h.r),Math.round((u.g-h.g)*T+h.g),Math.round((u.b-h.b)*T+h.b),255);let R=e.topPaddingLineCount*s;const G=[];for(let le=0,Ee=n-t+1;le<Ee;le++)l[le]&&Ow._renderLine(o,I,u.a,m,_,b,p,f,w,R,D,d,c[le],v,s),G[le]=new zR(R),R+=s;const K=r===-1?0:r,we=(a===-1?o.height:a)-K;return this._canvas.domNode.getContext("2d").putImageData(o,0,0,0,K,o.width,we),new Yz(e,o,G)}static _renderUntouchedLines(e,t,n,s,o,r){const a=[];if(!r){for(let R=0,G=s-n+1;R<G;R++)a[R]=!0;return[-1,-1,a]}const l=r._get(),c=l.imageData.data,d=l.rendLineNumberStart,h=l.lines,u=h.length,f=e.width,p=e.data,m=(s-n+1)*o*f*4;let _=-1,w=-1,v=-1,b=-1,C=-1,S=-1,D=t*o;for(let R=n;R<=s;R++){const G=R-n,K=R-d,X=K>=0&&K<u?h[K].dy:-1;if(X===-1){a[G]=!0,D+=o;continue}const we=X*f*4,re=(X+o)*f*4,le=D*f*4,Ee=(D+o)*f*4;b===we&&S===le?(b=re,S=Ee):(v!==-1&&(p.set(c.subarray(v,b),C),_===-1&&v===0&&v===C&&(_=b),w===-1&&b===m&&v===C&&(w=v)),v=we,b=re,C=le,S=Ee),a[G]=!1,D+=o}v!==-1&&(p.set(c.subarray(v,b),C),_===-1&&v===0&&v===C&&(_=b),w===-1&&b===m&&v===C&&(w=v));const T=_===-1?-1:_/(f*4),I=w===-1?-1:w/(f*4);return[T,I,a]}static _renderLine(e,t,n,s,o,r,a,l,c,d,h,u,f,p,m){const _=f.content,w=f.tokens,v=e.width-r,b=m===1;let C=Ah,S=0,D=0;for(let T=0,I=w.getCount();T<I;T++){const R=w.getEndOffset(T),G=w.getForeground(T),K=a.getColor(G);for(;S<R;S++){if(C>v)return;const X=_.charCodeAt(S);if(X===A.Tab){const we=u-(S+D)%u;D+=we-1,C+=we*r}else if(X===A.Space)C+=r;else{const we=Kg(X)?2:1;for(let re=0;re<we;re++)if(o===pw.Blocks?c.blockRenderChar(e,C,d+h,K,l,t,n,b):c.renderChar(e,C,d+h,X,K,l,t,n,p,s,b),C+=r,C>v)return}}}}}class Zz{static{rh(this,"ContiguousLineMap")}_startLineNumber;_endLineNumber;_defaultValue;_values;constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let s=0,o=this._endLineNumber-this._startLineNumber+1;s<o;s++)this._values[s]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}var e3e=Object.defineProperty,t3e=(i,e)=>e3e(i,"name",{value:e,configurable:!0});class i3e extends ha{static{t3e(this,"ViewOverlayWidgets")}_viewDomNode;_widgets;_viewDomNodeRect;_domNode;overflowingOverlayWidgetsDomNode;_verticalScrollbarWidth;_minimapWidth;_horizontalScrollbarHeight;_editorHeight;_editorWidth;constructor(e,t){super(e),this._viewDomNode=t;const s=this._context.configuration.options.get(k.layoutInfo);this._widgets={},this._verticalScrollbarWidth=s.verticalScrollbarWidth,this._minimapWidth=s.minimap.minimapWidth,this._horizontalScrollbarHeight=s.horizontalScrollbarHeight,this._editorHeight=s.height,this._editorWidth=s.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=Ut(document.createElement("div")),oh.write(this._domNode,Hn.OverlayWidgets),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=Ut(document.createElement("div")),oh.write(this.overflowingOverlayWidgetsDomNode,Hn.OverflowingOverlayWidgets),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(k.layoutInfo);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=Ut(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const n=this._widgets[e.getId()],s=t?t.preference:null,o=t?.stackOridinal;return n.preference===s&&n.stack===o?(this._updateMaxMinWidth(),!1):(n.preference=s,n.stack=o,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){let e=0;const t=Object.keys(this._widgets);for(let n=0,s=t.length;n<s;n++){const o=t[n],a=this._widgets[o].widget.getMinContentWidthInPx?.();typeof a<"u"&&(e=Math.max(e,a))}this._context.viewLayout.setOverlayWidgetsMinWidth(e)}_renderWidget(e,t){const n=e.domNode;if(e.preference===null){n.setTop("");return}const s=2*this._verticalScrollbarWidth+this._minimapWidth;if(e.preference===Vf.TOP_RIGHT_CORNER||e.preference===Vf.BOTTOM_RIGHT_CORNER){if(e.preference===Vf.BOTTOM_RIGHT_CORNER){const o=n.domNode.clientHeight;n.setTop(this._editorHeight-o-2*this._horizontalScrollbarHeight)}else n.setTop(0);e.stack!==void 0?(n.setTop(t[e.preference]),t[e.preference]+=n.domNode.clientWidth):n.setRight(s)}else if(e.preference===Vf.TOP_CENTER)n.domNode.style.right="50%",e.stack!==void 0?(n.setTop(t[Vf.TOP_CENTER]),t[Vf.TOP_CENTER]+=n.domNode.clientHeight):n.setTop(0);else{const{top:o,left:r}=e.preference;if(this._context.configuration.options.get(k.fixedOverflowWidgets)&&e.widget.allowEditorOverflow){const l=this._viewDomNodeRect;n.setTop(o+l.top),n.setLeft(r+l.left),n.setPosition("fixed")}else n.setTop(o),n.setLeft(r),n.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=Xr(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets),n=Array.from({length:Vf.TOP_CENTER+1},()=>0);t.sort((s,o)=>(this._widgets[s].stack||0)-(this._widgets[o].stack||0));for(let s=0,o=t.length;s<o;s++){const r=t[s];this._renderWidget(this._widgets[r],n)}}}var n3e=Object.defineProperty,hae=(i,e)=>n3e(i,"name",{value:e,configurable:!0});class s3e{static{hae(this,"Settings")}lineHeight;pixelRatio;overviewRulerLanes;renderBorder;borderColor;hideCursor;cursorColorSingle;cursorColorPrimary;cursorColorSecondary;themeType;backgroundColor;top;right;domWidth;domHeight;canvasWidth;canvasHeight;x;w;constructor(e,t){const n=e.options;this.lineHeight=n.get(k.lineHeight),this.pixelRatio=n.get(k.pixelRatio),this.overviewRulerLanes=n.get(k.overviewRulerLanes),this.renderBorder=n.get(k.overviewRulerBorder);const s=t.getColor(p0e);this.borderColor=s?s.toString():null,this.hideCursor=n.get(k.hideCursorInOverviewRuler);const o=t.getColor(wP);this.cursorColorSingle=o?o.transparent(.7).toString():null;const r=t.getColor(kX);this.cursorColorPrimary=r?r.transparent(.7).toString():null;const a=t.getColor(NX);this.cursorColorSecondary=a?a.transparent(.7).toString():null,this.themeType=t.type;const l=n.get(k.minimap),c=l.enabled,d=l.side,h=t.getColor(m0e),u=lu.getDefaultBackground();h?this.backgroundColor=h:c&&d==="right"?this.backgroundColor=u:this.backgroundColor=null;const p=n.get(k.layoutInfo).overviewRuler;this.top=p.top,this.right=p.right,this.domWidth=p.width,this.domHeight=p.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[m,_]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=m,this.w=_}_initLanes(e,t,n){const s=t-e;if(n>=3){const o=Math.floor(s/3),r=Math.floor(s/3),a=s-o-r,l=e,c=l+o,d=l+o+a;return[[0,l,c,l,d,l,c,l],[0,o,a,o+a,r,o+a+r,a+r,o+a+r]]}else if(n===2){const o=Math.floor(s/2),r=s-o,a=e,l=a+o;return[[0,a,a,a,l,a,a,a],[0,o,o,o,r,o+r,o+r,o+r]]}else{const o=e,r=s;return[[0,o,o,o,o,o,o,o],[0,r,r,r,r,r,r,r]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&U.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class o3e extends ha{static{hae(this,"DecorationsOverviewRuler")}_actualShouldRender=0;_tokensColorTrackerListener;_domNode;_settings;_cursorPositions;_renderedDecorations=[];_renderedCursorPositions=[];constructor(e){super(e),this._domNode=Ut(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=lu.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new j(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new s3e(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++){let s=this._settings.cursorColorSingle;n>1&&(s=t===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:s})}return this._cursorPositions.sort((t,n)=>j.compare(t.position,n.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return e.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return e.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?U.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(sL.compareByRenderingProps),this._actualShouldRender===1&&!sL.equalsArr(this._renderedDecorations,t)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!ks(this._renderedCursorPositions,this._cursorPositions,(p,m)=>p.position.lineNumber===m.position.lineNumber&&p.color===m.color)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const n=this._settings.canvasWidth,s=this._settings.canvasHeight,o=this._settings.lineHeight,r=this._context.viewLayout,a=this._context.viewLayout.getScrollHeight(),l=s/a,c=6*this._settings.pixelRatio|0,d=c/2|0,h=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(h.fillStyle=U.Format.CSS.formatHexA(e),h.fillRect(0,0,n,s)):(h.clearRect(0,0,n,s),h.fillStyle=U.Format.CSS.formatHexA(e),h.fillRect(0,0,n,s)):h.clearRect(0,0,n,s);const u=this._settings.x,f=this._settings.w;for(const p of t){const m=p.color,_=p.data;h.fillStyle=m;let w=0,v=0,b=0;for(let C=0,S=_.length/3;C<S;C++){const D=_[3*C],T=_[3*C+1],I=_[3*C+2];let R=r.getVerticalOffsetForLineNumber(T)*l|0,G=(r.getVerticalOffsetForLineNumber(I)+o)*l|0;if(G-R<c){let X=(R+G)/2|0;X<d?X=d:X+d>s&&(X=s-d),R=X-d,G=X+d}R>b+1||D!==w?(C!==0&&h.fillRect(u[w],v,f[w],b-v),w=D,v=R,b=G):G>b&&(b=G)}h.fillRect(u[w],v,f[w],b-v)}if(!this._settings.hideCursor){const p=2*this._settings.pixelRatio|0,m=p/2|0,_=this._settings.x[7],w=this._settings.w[7];let v=-100,b=-100,C=null;for(let S=0,D=this._cursorPositions.length;S<D;S++){const T=this._cursorPositions[S].color;if(!T)continue;const I=this._cursorPositions[S].position;let R=r.getVerticalOffsetForLineNumber(I.lineNumber)*l|0;R<m?R=m:R+m>s&&(R=s-m);const G=R-m,K=G+p;G>b+1||T!==C?(S!==0&&C&&h.fillRect(_,v,w,b-v),v=G,b=K):K>b&&(b=K),C=T,h.fillStyle=T}C&&h.fillRect(_,v,w,b-v)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,s),h.moveTo(1,0),h.lineTo(n,0),h.stroke())}}var r3e=Object.defineProperty,a3e=(i,e)=>r3e(i,"name",{value:e,configurable:!0});class l3e extends AD{static{a3e(this,"OverviewRuler")}_context;_domNode;_zoneManager;constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=Ut(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new CFe(s=>this._context.viewLayout.getVerticalOffsetForLineNumber(s)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(k.lineHeight)),this._zoneManager.setPixelRatio(n.get(k.pixelRatio)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(k.lineHeight)&&(this._zoneManager.setLineHeight(t.get(k.lineHeight)),this._render()),e.hasChanged(k.pixelRatio)&&(this._zoneManager.setPixelRatio(t.get(k.pixelRatio)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),s=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(o,n,s,e),!0}_renderOneLane(e,t,n,s){let o=0,r=0,a=0;for(const l of t){const c=l.colorId,d=l.from,h=l.to;c!==o?(e.fillRect(0,r,s,a-r),o=c,e.fillStyle=n[o],r=d,a=h):a>=d?a=Math.max(a,h):(e.fillRect(0,r,s,a-r),r=d,a=h)}e.fillRect(0,r,s,a-r)}}var c3e=Object.defineProperty,d3e=(i,e)=>c3e(i,"name",{value:e,configurable:!0});class h3e extends ha{static{d3e(this,"Rulers")}domNode;_renderedRulers;_rulers;_typicalHalfwidthCharacterWidth;constructor(e){super(e),this.domNode=Ut(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(k.rulers),this._typicalHalfwidthCharacterWidth=t.get(k.fontInfo).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(k.rulers),this._typicalHalfwidthCharacterWidth=t.get(k.fontInfo).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:s}=this._context.viewModel.model.getOptions(),o=s;let r=t-e;for(;r>0;){const a=Ut(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(o),this.domNode.appendChild(a),this._renderedRulers.push(a),r--}return}let n=e-t;for(;n>0;){const s=this._renderedRulers.pop();this.domNode.removeChild(s),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const s=this._renderedRulers[t],o=this._rulers[t];s.setBoxShadow(o.color?`1px 0 0 0 ${o.color} inset`:""),s.setHeight(Math.min(e.scrollHeight,1e6)),s.setLeft(o.column*this._typicalHalfwidthCharacterWidth)}}}var u3e=Object.defineProperty,g3e=(i,e)=>u3e(i,"name",{value:e,configurable:!0});class f3e extends ha{static{g3e(this,"ScrollDecorationViewPart")}_domNode;_scrollTop;_width;_shouldShow;_useShadows;constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(k.scrollbar);this._useShadows=n.useShadows,this._domNode=Ut(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(k.layoutInfo);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(k.scrollbar);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}var p3e=Object.defineProperty,ES=(i,e)=>p3e(i,"name",{value:e,configurable:!0});class m3e{static{ES(this,"HorizontalRangeWithStyle")}left;width;startStyle;endStyle;constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class _3e{static{ES(this,"LineVisibleRangesWithStyle")}lineNumber;ranges;constructor(e,t){this.lineNumber=e,this.ranges=t}}function uae(i){return new m3e(i)}ES(uae,"toStyledRange");function gae(i){return new _3e(i.lineNumber,i.ranges.map(uae))}ES(gae,"toStyled");class Qs extends Ov{static{ES(this,"SelectionsOverlay")}static SELECTION_CLASS_NAME="selected-text";static SELECTION_TOP_LEFT="top-left-radius";static SELECTION_BOTTOM_LEFT="bottom-left-radius";static SELECTION_TOP_RIGHT="top-right-radius";static SELECTION_BOTTOM_RIGHT="bottom-right-radius";static EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";static ROUNDED_PIECE_WIDTH=10;_context;_roundedSelection;_typicalHalfwidthCharacterWidth;_selections;_renderResult;constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._roundedSelection=t.get(k.roundedSelection),this._typicalHalfwidthCharacterWidth=t.get(k.fontInfo).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._roundedSelection=t.get(k.roundedSelection),this._typicalHalfwidthCharacterWidth=t.get(k.fontInfo).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const s=this._typicalHalfwidthCharacterWidth/4;let o=null,r=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!o&&c<n.length;c++)n[c].lineNumber===a&&(o=n[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=n.length-1;!r&&c>=0;c--)n[c].lineNumber===l&&(r=n[c].ranges[0]);o&&!o.startStyle&&(o=null),r&&!r.startStyle&&(r=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],d=c.left,h=c.left+c.width,u={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const p=t[a-1].ranges[0].left,m=t[a-1].ranges[0].left+t[a-1].ranges[0].width;R1(d-p)<s?u.top=2:d>p&&(u.top=1),R1(h-m)<s?f.top=2:p<h&&h<m&&(f.top=1)}else o&&(u.top=o.startStyle.top,f.top=o.endStyle.top);if(a+1<l){const p=t[a+1].ranges[0].left,m=t[a+1].ranges[0].left+t[a+1].ranges[0].width;R1(d-p)<s?u.bottom=2:p<d&&d<m&&(u.bottom=1),R1(h-m)<s?f.bottom=2:h<m&&(f.bottom=1)}else r&&(u.bottom=r.startStyle.bottom,f.bottom=r.endStyle.bottom);c.startStyle=u,c.endStyle=f}}_getVisibleRangesWithStyle(e,t,n){const o=(t.linesVisibleRangesForRange(e,!0)||[]).map(gae);return!this._visibleRangesHaveGaps(o)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,o,n),o}_createSelectionPiece(e,t,n,s,o){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+s.toString()+"px;width:"+o.toString()+'px;"></div>'}_actualRenderOneSelection(e,t,n,s){if(s.length===0)return;const o=!!s[0].ranges[0].startStyle,r=s[0].lineNumber,a=s[s.length-1].lineNumber;for(let l=0,c=s.length;l<c;l++){const d=s[l],h=d.lineNumber,u=h-t,f=n&&h===r?1:0,p=n&&h!==r&&h===a?1:0;let m="",_="";for(let w=0,v=d.ranges.length;w<v;w++){const b=d.ranges[w];if(o){const S=b.startStyle,D=b.endStyle;if(S.top===1||S.bottom===1){m+=this._createSelectionPiece(f,p,Qs.SELECTION_CLASS_NAME,b.left-Qs.ROUNDED_PIECE_WIDTH,Qs.ROUNDED_PIECE_WIDTH);let T=Qs.EDITOR_BACKGROUND_CLASS_NAME;S.top===1&&(T+=" "+Qs.SELECTION_TOP_RIGHT),S.bottom===1&&(T+=" "+Qs.SELECTION_BOTTOM_RIGHT),m+=this._createSelectionPiece(f,p,T,b.left-Qs.ROUNDED_PIECE_WIDTH,Qs.ROUNDED_PIECE_WIDTH)}if(D.top===1||D.bottom===1){m+=this._createSelectionPiece(f,p,Qs.SELECTION_CLASS_NAME,b.left+b.width,Qs.ROUNDED_PIECE_WIDTH);let T=Qs.EDITOR_BACKGROUND_CLASS_NAME;D.top===1&&(T+=" "+Qs.SELECTION_TOP_LEFT),D.bottom===1&&(T+=" "+Qs.SELECTION_BOTTOM_LEFT),m+=this._createSelectionPiece(f,p,T,b.left+b.width,Qs.ROUNDED_PIECE_WIDTH)}}let C=Qs.SELECTION_CLASS_NAME;if(o){const S=b.startStyle,D=b.endStyle;S.top===0&&(C+=" "+Qs.SELECTION_TOP_LEFT),S.bottom===0&&(C+=" "+Qs.SELECTION_BOTTOM_LEFT),D.top===0&&(C+=" "+Qs.SELECTION_TOP_RIGHT),D.bottom===0&&(C+=" "+Qs.SELECTION_BOTTOM_RIGHT)}_+=this._createSelectionPiece(f,p,C,b.left,b.width)}e[u][0]+=m,e[u][1]+=_}}_previousFrameVisibleRangesWithStyle=[];prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let r=n;r<=s;r++){const a=r-n;t[a]=["",""]}const o=[];for(let r=0,a=this._selections.length;r<a;r++){const l=this._selections[r];if(l.isEmpty()){o[r]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[r]);o[r]=c,this._actualRenderOneSelection(t,n,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=o,this._renderResult=t.map(([r,a])=>r+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}jc((i,e)=>{const t=i.getColor(wfe);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function R1(i){return i<0?-i:i}ES(R1,"abs");var b3e=Object.defineProperty,Xz=(i,e)=>b3e(i,"name",{value:e,configurable:!0});class Xk extends ha{static{Xz(this,"ViewCursors")}static BLINK_INTERVAL=500;_readOnly;_cursorBlinking;_cursorStyle;_cursorSmoothCaretAnimation;_selectionIsEmpty;_isComposingInput;_isVisible;_domNode;_startCursorBlinkAnimation;_cursorFlatBlinkInterval;_blinkingEnabled;_editorHasFocus;_primaryCursor;_secondaryCursors;_renderData;constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(k.readOnly),this._cursorBlinking=t.get(k.cursorBlinking),this._cursorStyle=t.get(k.cursorStyle),this._cursorSmoothCaretAnimation=t.get(k.cursorSmoothCaretAnimation),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new Fz(this._context,N1.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=Ut(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new NL,this._cursorFlatBlinkInterval=new yq,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(k.readOnly),this._cursorBlinking=t.get(k.cursorBlinking),this._cursorStyle=t.get(k.cursorStyle),this._cursorSmoothCaretAnimation=t.get(k.cursorSmoothCaretAnimation),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,s=this._secondaryCursors.length;n<s;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,n){const s=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&n!==ri.Explicit;if(this._primaryCursor.setPlurality(t.length?N1.MultiPrimary:N1.Single),this._primaryCursor.onCursorPositionChanged(e,s),this._updateBlinking(),this._secondaryCursors.length<t.length){const o=t.length-this._secondaryCursors.length;for(let r=0;r<o;r++){const a=new Fz(this._context,N1.MultiSecondary);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const o=this._secondaryCursors.length-t.length;for(let r=0;r<o;r++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let o=0;o<t.length;o++)this._secondaryCursors[o].onCursorPositionChanged(t[o],s)}onCursorStateChanged(e){const t=[];for(let s=0,o=e.selections.length;s<o;s++)t[s]=e.selections[s].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=Xz(n=>{for(let s=0,o=e.ranges.length;s<o;s++)if(e.ranges[s].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[s].toLineNumber)return!0;return!1},"shouldRender");if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?_c.Hidden:this._readOnly?_c.Solid:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===_c.Hidden,n=e===_c.Solid;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===_c.Blink?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},Xk.BLINK_INTERVAL,ve(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},Xk.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case Tl.Line:e+=" cursor-line-style";break;case Tl.Block:e+=" cursor-block-style";break;case Tl.Underline:e+=" cursor-underline-style";break;case Tl.LineThin:e+=" cursor-line-thin-style";break;case Tl.BlockOutline:e+=" cursor-block-outline-style";break;case Tl.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case _c.Blink:e+=" cursor-blink";break;case _c.Smooth:e+=" cursor-smooth";break;case _c.Phase:e+=" cursor-phase";break;case _c.Expand:e+=" cursor-expand";break;case _c.Solid:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let n=0;const s=this._primaryCursor.render(e);s&&(t[n++]=s);for(let o=0,r=this._secondaryCursors.length;o<r;o++){const a=this._secondaryCursors[o].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}jc((i,e)=>{const t=[{class:".cursor",foreground:wP,background:u6},{class:".cursor-primary",foreground:kX,background:Z1e},{class:".cursor-secondary",foreground:NX,background:X1e}];for(const n of t){const s=i.getColor(n.foreground);if(s){let o=i.getColor(n.background);o||(o=s.opposite()),e.addRule(`.monaco-editor .cursors-layer ${n.class} { background-color: ${s}; border-color: ${s}; color: ${o}; }`),Tg(i.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection ${n.class} { border-left: 1px solid ${o}; border-right: 1px solid ${o}; }`)}}});var v3e=Object.defineProperty,Mw=(i,e)=>v3e(i,"name",{value:e,configurable:!0});const mM=Mw(()=>{throw new Error("Invalid change accessor")},"invalidFunc");class w3e extends ha{static{Mw(this,"ViewZones")}_zones;_lineHeight;_contentWidth;_contentLeft;domNode;marginDomNode;constructor(e){super(e);const t=this._context.configuration.options,n=t.get(k.layoutInfo);this._lineHeight=t.get(k.lineHeight),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=Ut(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=Ut(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const s of e)t.set(s.id,s);let n=!1;return this._context.viewModel.changeWhitespace(s=>{const o=Object.keys(this._zones);for(let r=0,a=o.length;r<a;r++){const l=o[r],c=this._zones[l],d=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=d.isInHiddenArea;const h=t.get(l);h&&(h.afterLineNumber!==d.afterViewLineNumber||h.height!==d.heightInPx)&&(s.changeOneWhitespace(l,d.afterViewLineNumber,d.heightInPx),this._safeCallOnComputedHeight(c.delegate,d.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(k.layoutInfo);return this._lineHeight=t.get(k.lineHeight),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(k.lineHeight)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return e.ordinal??e.afterColumn??1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const r=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new j(r,this._context.viewModel.model.getLineMaxColumn(r))}let n;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),o=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!o,afterViewLineNumber:s.lineNumber,heightInPx:o?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(n=>{const s={addZone:Mw(o=>(t=!0,this._addZone(n,o)),"addZone"),removeZone:Mw(o=>{o&&(t=this._removeZone(n,o)||t)},"removeZone"),layoutZone:Mw(o=>{o&&(t=this._layoutZone(n,o)||t)},"layoutZone")};fae(e,s),s.addZone=mM,s.removeZone=mM,s.layoutZone=mM}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),o={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:Ut(t.domNode),marginDomNode:t.marginDomNode?Ut(t.marginDomNode):null};return this._safeCallOnComputedHeight(o.delegate,n.heightInPx),o.domNode.setPosition("absolute"),o.domNode.domNode.style.width="100%",o.domNode.setDisplay("none"),o.domNode.setAttribute("monaco-view-zone",o.whitespaceId),this.domNode.appendChild(o.domNode),o.marginDomNode&&(o.marginDomNode.setPosition("absolute"),o.marginDomNode.domNode.style.width="100%",o.marginDomNode.setDisplay("none"),o.marginDomNode.setAttribute("monaco-view-zone",o.whitespaceId),this.marginDomNode.appendChild(o.marginDomNode)),this._zones[o.whitespaceId]=o,this.setShouldRender(),o.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.remove(),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],s=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=s.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,s.afterViewLineNumber,s.heightInPx),this._safeCallOnComputedHeight(n.delegate,s.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){Kt(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){Kt(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let s=!1;for(const r of t)this._zones[r.id].isInHiddenArea||(n[r.id]=r,s=!0);const o=Object.keys(this._zones);for(let r=0,a=o.length;r<a;r++){const l=o[r],c=this._zones[l];let d=0,h=0,u="none";n.hasOwnProperty(l)?(d=n[l].verticalOffset-e.bigNumbersDelta,h=n[l].height,u="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(d),c.domNode.setHeight(h),c.domNode.setDisplay(u),c.marginDomNode&&(c.marginDomNode.setTop(d),c.marginDomNode.setHeight(h),c.marginDomNode.setDisplay(u))}s&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function fae(i,e){try{return i(e)}catch(t){Kt(t)}}Mw(fae,"safeInvoke1Arg");var C3e=Object.defineProperty,pae=(i,e)=>C3e(i,"name",{value:e,configurable:!0});class y3e extends Ov{static{pae(this,"WhitespaceOverlay")}_context;_options;_selection;_renderResult;constructor(e){super(),this._context=e,this._options=new Qz(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new Qz(this._context.configuration);return this._options.equals(t)?e.hasChanged(k.layoutInfo):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber-t+1,o=new Array(s);for(let a=0;a<s;a++)o[a]=!0;const r=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,o);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){const l=a-e.viewportData.startLineNumber,c=r.data[l];let d=null;if(this._options.renderWhitespace==="selection"){const h=this._selection;for(const u of h){if(u.endLineNumber<a||u.startLineNumber>a)continue;const f=u.startLineNumber===a?u.startColumn:c.minColumn,p=u.endLineNumber===a?u.endColumn:c.maxColumn;f<p&&(d||(d=[]),d.push(new wre(f-1,p-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,d,c)}}_applyRenderWhitespace(e,t,n,s){if(this._options.renderWhitespace==="selection"&&!n||this._options.renderWhitespace==="trailing"&&s.continuesWithWrappedLine)return"";const o=this._context.theme.getColor(g6),r=this._options.renderWithSVG,a=s.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),c=s.continuesWithWrappedLine,d=s.minColumn-1,h=this._options.renderWhitespace==="boundary",u=this._options.renderWhitespace==="trailing",f=this._options.lineHeight,p=this._options.middotWidth,m=this._options.wsmiddotWidth,_=this._options.spaceWidth,w=Math.abs(m-_),v=Math.abs(p-_),b=w<v?11825:183,C=this._options.canUseHalfwidthRightwardsArrow;let S="",D=!1,T=ia(a),I;T===-1?(D=!0,T=l,I=l):I=nm(a);let R=0,G=n&&n[R],K=0;for(let X=d;X<l;X++){const we=a.charCodeAt(X);if(G&&X>=G.endOffset&&(R++,G=n&&n[R]),we!==A.Tab&&we!==A.Space||u&&!D&&X<=I)continue;if(h&&X>=T&&X<=I&&we===A.Space){const le=X-1>=0?a.charCodeAt(X-1):A.Null,Ee=X+1<l?a.charCodeAt(X+1):A.Null;if(le!==A.Space&&Ee!==A.Space)continue}if(h&&c&&X===l-1){const le=X-1>=0?a.charCodeAt(X-1):A.Null;if(we===A.Space&&le!==A.Space&&le!==A.Tab)continue}if(n&&(!G||G.startOffset>X||G.endOffset<=X))continue;const re=e.visibleRangeForPosition(new j(t,X+1));re&&(r?(K=Math.max(K,re.left),we===A.Tab?S+=this._renderArrow(f,_,re.left):S+=`<circle cx="${(re.left+_/2).toFixed(2)}" cy="${(f/2).toFixed(2)}" r="${(_/7).toFixed(2)}" />`):we===A.Tab?S+=`<div class="mwh" style="left:${re.left}px;height:${f}px;">${C?"":""}</div>`:S+=`<div class="mwh" style="left:${re.left}px;height:${f}px;">${String.fromCharCode(b)}</div>`)}return r?(K=Math.round(K+_),`<svg style="bottom:0;position:absolute;width:${K}px;height:${f}px" viewBox="0 0 ${K} ${f}" xmlns="http://www.w3.org/2000/svg" fill="${o}">`+S+"</svg>"):S}_renderArrow(e,t,n){const s=t/7,o=t,r=e/2,a=n,l={x:0,y:s/2},c={x:100/125*o,y:l.y},d={x:c.x-.2*c.x,y:c.y+.2*c.x},h={x:d.x+.1*c.x,y:d.y+.1*c.x},u={x:h.x+.35*c.x,y:h.y-.35*c.x},f={x:u.x,y:-u.y},p={x:h.x,y:-h.y},m={x:d.x,y:-d.y},_={x:c.x,y:-c.y},w={x:l.x,y:-l.y};return`<path d="M ${[l,c,d,h,u,f,p,m,_,w].map(C=>`${(a+C.x).toFixed(2)} ${(r+C.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class Qz{static{pae(this,"WhitespaceOptions")}renderWhitespace;renderWithSVG;spaceWidth;middotWidth;wsmiddotWidth;canUseHalfwidthRightwardsArrow;lineHeight;stopRenderingLineAfter;constructor(e){const t=e.options,n=t.get(k.fontInfo),s=t.get(k.experimentalWhitespaceRendering);s==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):s==="svg"?(this.renderWhitespace=t.get(k.renderWhitespace),this.renderWithSVG=!0):(this.renderWhitespace=t.get(k.renderWhitespace),this.renderWithSVG=!1),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(k.lineHeight),this.stopRenderingLineAfter=t.get(k.stopRenderingLineAfter)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}var wr=(i=>(i[i.GlyphInfo0=0]="GlyphInfo0",i[i.GlyphInfo1=1]="GlyphInfo1",i[i.Cells=2]="Cells",i[i.TextureSampler=3]="TextureSampler",i[i.Texture=4]="Texture",i[i.ViewportUniform=5]="ViewportUniform",i[i.AtlasDimensionsUniform=6]="AtlasDimensionsUniform",i[i.ScrollOffset=7]="ScrollOffset",i))(wr||{});const S3e=`
struct GlyphInfo {
	position: vec2f,
	size: vec2f,
	origin: vec2f,
};

struct Vertex {
	@location(0) position: vec2f,
};

struct Cell {
	position: vec2f,
	unused1: vec2f,
	glyphIndex: f32,
	textureIndex: f32
};

struct LayoutInfo {
	canvasDims: vec2f,
	viewportOffset: vec2f,
	viewportDims: vec2f,
}

struct ScrollOffset {
	offset: vec2f
}

struct VSOutput {
	@builtin(position) position:   vec4f,
	@location(1)       layerIndex: f32,
	@location(0)       texcoord:   vec2f,
};

// Uniforms
@group(0) @binding(${wr.ViewportUniform})         var<uniform>       layoutInfo:      LayoutInfo;
@group(0) @binding(${wr.AtlasDimensionsUniform})  var<uniform>       atlasDims:       vec2f;
@group(0) @binding(${wr.ScrollOffset})            var<uniform>       scrollOffset:    ScrollOffset;

// Storage buffers
@group(0) @binding(${wr.GlyphInfo0})              var<storage, read> glyphInfo0:      array<GlyphInfo>;
@group(0) @binding(${wr.GlyphInfo1})              var<storage, read> glyphInfo1:      array<GlyphInfo>;
@group(0) @binding(${wr.Cells})                   var<storage, read> cells:           array<Cell>;

@vertex fn vs(
	vert: Vertex,
	@builtin(instance_index) instanceIndex: u32,
	@builtin(vertex_index) vertexIndex : u32
) -> VSOutput {
	let cell = cells[instanceIndex];
	// TODO: Is there a nicer way to init this?
	var glyph = glyphInfo0[0];
	let glyphIndex = u32(cell.glyphIndex);
	if (u32(cell.textureIndex) == 0) {
		glyph = glyphInfo0[glyphIndex];
	} else {
		glyph = glyphInfo1[glyphIndex];
	}

	var vsOut: VSOutput;
	// Multiple vert.position by 2,-2 to get it into clipspace which ranged from -1 to 1
	vsOut.position = vec4f(
		(((vert.position * vec2f(2, -2)) / layoutInfo.canvasDims)) * glyph.size + cell.position + ((glyph.origin * vec2f(2, -2)) / layoutInfo.canvasDims) + (((scrollOffset.offset + layoutInfo.viewportOffset) * 2) / layoutInfo.canvasDims),
		0.0,
		1.0
	);

	vsOut.layerIndex = cell.textureIndex;
	// Textures are flipped from natural direction on the y-axis, so flip it back
	vsOut.texcoord = vert.position;
	vsOut.texcoord = (
		// Glyph offset (0-1)
		(glyph.position / atlasDims) +
		// Glyph coordinate (0-1)
		(vsOut.texcoord * (glyph.size / atlasDims))
	);

	return vsOut;
}

@group(0) @binding(${wr.TextureSampler}) var ourSampler: sampler;
@group(0) @binding(${wr.Texture})        var ourTexture: texture_2d_array<f32>;

@fragment fn fs(vsOut: VSOutput) -> @location(0) vec4f {
	return textureSample(ourTexture, ourSampler, vsOut.texcoord, u32(vsOut.layerIndex));
}
`;var E3e=Object.defineProperty,L3e=(i,e)=>E3e(i,"name",{value:e,configurable:!0});class Oh extends ${constructor(e,t,n,s){super(),this._context=e,this._device=t,this._canvas=n,this._atlas=s;const o=this._context.configuration.options.get(k.fontFamily),r=this._context.configuration.options.get(k.fontSize);this._glyphRasterizer=this._register(new U2(r,o));const a=Oh._lineCount*Oh._columnCount*6*Float32Array.BYTES_PER_ELEMENT;this._cellBindBuffer=this._register(xd.createBuffer(this._device,{label:"Monaco full file cell buffer",size:a,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST})).object,this._cellValueBuffers=[new ArrayBuffer(a),new ArrayBuffer(a)];const l=2;this._scrollOffsetBindBuffer=this._register(xd.createBuffer(this._device,{label:"Monaco scroll offset buffer",size:l*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST})).object,this._scrollOffsetValueBuffers=[new Float32Array(l),new Float32Array(l)]}static{L3e(this,"FullFileRenderStrategy")}static _lineCount=3e3;static _columnCount=200;wgsl=S3e;_glyphRasterizer;_cellBindBuffer;_cellValueBuffers;_activeDoubleBufferIndex=0;_upToDateLines=[new Set,new Set];_visibleObjectCount=0;_scrollOffsetBindBuffer;_scrollOffsetValueBuffers;get bindGroupEntries(){return[{binding:wr.Cells,resource:{buffer:this._cellBindBuffer}},{binding:wr.ScrollOffset,resource:{buffer:this._scrollOffsetBindBuffer}}]}reset(){for(const e of[0,1]){const t=new Float32Array(this._cellValueBuffers[e]);t.fill(0,0,t.length),this._device.queue.writeBuffer(this._cellBindBuffer,0,t.buffer,0,t.byteLength),this._upToDateLines[e].clear()}this._visibleObjectCount=0}update(e,t){let n="",s=0,o=0,r=0,a=0,l=0,c=0,d=0,h=0,u=0,f,p=0,m=0,_=0,w=0,v,b="",C=0,S=0,D;const T=sn(),I=this._context.viewLayout.getCurrentScrollTop()*T.devicePixelRatio,R=this._scrollOffsetValueBuffers[this._activeDoubleBufferIndex];R[1]=I,this._device.queue.writeBuffer(this._scrollOffsetBindBuffer,0,R);const G=new Float32Array(this._cellValueBuffers[this._activeDoubleBufferIndex]),K=Oh._columnCount*6,X=this._upToDateLines[this._activeDoubleBufferIndex];let we=Number.MAX_SAFE_INTEGER,re=0;for(s=e.startLineNumber;s<=e.endLineNumber;s++)if(xl.canRender(t,e,s)){we=Math.min(we,s),re=Math.max(re,s),v=e.getViewLineRenderingData(s),b=v.content,u=0,D=v.tokens,m=v.minColumn-1,_=0;for(let Ee=0,Se=D.getCount();Ee<Se;Ee++)if(_=D.getEndOffset(Ee),!(_<=m)){for(w=D.getMetadata(Ee),o=m;o<_&&!(o>Oh._columnCount);o++)if(n=b.charAt(o),n!==" "){if(n==="	"){u=Rn.nextRenderTabStop(o+u,v.tabSize)-o-1;continue}f=this._atlas.getGlyph(this._glyphRasterizer,n,w),r=Math.round((o+u)*t.spaceWidth*T.devicePixelRatio),a=Math.ceil((e.relativeVerticalOffset[s-e.startLineNumber]+Math.floor((e.lineHeight-this._context.configuration.options.get(k.fontSize))/2))*T.devicePixelRatio),l=r/this._canvas.width,c=a/this._canvas.height,d=l*2-1,h=c*2-1,p=((s-1)*Oh._columnCount+(o+u))*6,G[p+0]=d,G[p+1]=-h,G[p+4]=f.glyphIndex,G[p+5]=f.pageIndex}m=_}C=((s-1)*Oh._columnCount+(_+u))*6,S=s*Oh._columnCount*6,G.fill(0,C,S),X.add(s)}const le=(e.endLineNumber-e.startLineNumber+1)*K;return we<=re&&this._device.queue.writeBuffer(this._cellBindBuffer,(we-1)*K*Float32Array.BYTES_PER_ELEMENT,G.buffer,(we-1)*K*Float32Array.BYTES_PER_ELEMENT,(re-we+1)*K*Float32Array.BYTES_PER_ELEMENT),this._activeDoubleBufferIndex=this._activeDoubleBufferIndex?0:1,this._visibleObjectCount=le,le}draw(e,t){if(this._visibleObjectCount<=0)throw new Et("Attempt to draw 0 objects");e.draw(gA.length/2,this._visibleObjectCount,void 0,(t.startLineNumber-1)*Oh._columnCount)}}var mae=Object.defineProperty,D3e=Object.getOwnPropertyDescriptor,Jz=(i,e)=>mae(i,"name",{value:e,configurable:!0}),I3e=(i,e,t,n)=>{for(var s=n>1?void 0:n?D3e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&mae(e,t,s),s},e$=(i,e)=>(t,n)=>e(t,n,i);let k4=class extends ha{constructor(i,e,t,n){super(i),this._viewGpuContext=e,this._instantiationService=t,this._logService=n,this.canvas=this._viewGpuContext.canvas.domNode,this._register(Li(s=>{this._viewGpuContext.canvasDevicePixelDimensions.read(s)})),this.initWebgpu()}static{Jz(this,"ViewLinesGpu")}canvas;_device;_renderPassDescriptor;_renderPassColorAttachment;_bindGroup;_pipeline;_vertexBuffer;_glyphStorageBuffer=[];_atlasGpuTexture;_atlasGpuTextureVersions=[];_initialized=!1;_renderStrategy;async initWebgpu(){if(this._device=await this._viewGpuContext.device,this._store.isDisposed)return;const i=xl.atlas;this._register(i.onDidDeleteGlyphs(()=>{this._atlasGpuTextureVersions.length=0,this._atlasGpuTextureVersions[0]=0,this._atlasGpuTextureVersions[1]=0,this._renderStrategy.reset()}));const e=navigator.gpu.getPreferredCanvasFormat();this._viewGpuContext.ctx.configure({device:this._device,format:e,alphaMode:"premultiplied"}),this._renderPassColorAttachment={view:null,loadOp:"load",storeOp:"store"},this._renderPassDescriptor={label:"Monaco render pass",colorAttachments:[this._renderPassColorAttachment]};let t;{let o;(l=>{l[l.FloatsPerEntry=6]="FloatsPerEntry",l[l.BytesPerEntry=24]="BytesPerEntry",l[l.Offset_CanvasWidth____=0]="Offset_CanvasWidth____",l[l.Offset_CanvasHeight___=1]="Offset_CanvasHeight___",l[l.Offset_ViewportOffsetX=2]="Offset_ViewportOffsetX",l[l.Offset_ViewportOffsetY=3]="Offset_ViewportOffsetY",l[l.Offset_ViewportWidth__=4]="Offset_ViewportWidth__",l[l.Offset_ViewportHeight_=5]="Offset_ViewportHeight_"})(o||(o={}));const r=new Float32Array(6),a=Jz((l=this.canvas.width,c=this.canvas.height)=>(r[0]=l,r[1]=c,r[2]=Math.ceil(this._context.configuration.options.get(k.layoutInfo).contentLeft*sn().devicePixelRatio),r[3]=0,r[4]=r[0]-r[2],r[5]=r[1]-r[3],r),"updateBufferValues");t=this._register(xd.createBuffer(this._device,{label:"Monaco uniform buffer",size:24,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST},()=>a())).object,this._register(H2(this.canvas,sn(),(l,c)=>{this._device.queue.writeBuffer(t,0,a(l,c))}))}let n;{let o;(r=>{r[r.FloatsPerEntry=2]="FloatsPerEntry",r[r.BytesPerEntry=8]="BytesPerEntry",r[r.Offset_Width_=0]="Offset_Width_",r[r.Offset_Height=1]="Offset_Height"})(o||(o={})),n=this._register(xd.createBuffer(this._device,{label:"Monaco atlas info uniform buffer",size:8,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST},()=>{const r=new Float32Array(2);return r[0]=i.pageSize,r[1]=i.pageSize,r})).object}this._renderStrategy=this._register(this._instantiationService.createInstance(Oh,this._context,this._device,this.canvas,i)),this._glyphStorageBuffer[0]=this._register(xd.createBuffer(this._device,{label:"Monaco glyph storage buffer",size:24*zh.maximumGlyphCount,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST})).object,this._glyphStorageBuffer[1]=this._register(xd.createBuffer(this._device,{label:"Monaco glyph storage buffer",size:24*zh.maximumGlyphCount,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST})).object,this._atlasGpuTextureVersions[0]=0,this._atlasGpuTextureVersions[1]=0,this._atlasGpuTexture=this._register(xd.createTexture(this._device,{label:"Monaco atlas texture",format:"rgba8unorm",size:{width:i.pageSize,height:i.pageSize,depthOrArrayLayers:2},dimension:"2d",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT})).object,this._updateAtlasStorageBufferAndTexture(),this._vertexBuffer=this._register(xd.createBuffer(this._device,{label:"Monaco vertex buffer",size:gA.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST},gA)).object;const s=this._device.createShaderModule({label:"Monaco shader module",code:this._renderStrategy.wgsl});this._pipeline=this._device.createRenderPipeline({label:"Monaco render pipeline",layout:"auto",vertex:{module:s,entryPoint:"vs",buffers:[{arrayStride:2*Float32Array.BYTES_PER_ELEMENT,attributes:[{shaderLocation:0,offset:0,format:"float32x2"}]}]},fragment:{module:s,entryPoint:"fs",targets:[{format:e,blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"}}}]}}),this._bindGroup=this._device.createBindGroup({label:"Monaco bind group",layout:this._pipeline.getBindGroupLayout(0),entries:[{binding:wr.GlyphInfo0,resource:{buffer:this._glyphStorageBuffer[0]}},{binding:wr.GlyphInfo1,resource:{buffer:this._glyphStorageBuffer[1]}},{binding:wr.TextureSampler,resource:this._device.createSampler({label:"Monaco atlas sampler",magFilter:"nearest",minFilter:"nearest"})},{binding:wr.Texture,resource:this._atlasGpuTexture.createView()},{binding:wr.ViewportUniform,resource:{buffer:t}},{binding:wr.AtlasDimensionsUniform,resource:{buffer:n}},...this._renderStrategy.bindGroupEntries]}),this._initialized=!0}_updateAtlasStorageBufferAndTexture(){for(const[i,e]of xl.atlas.pages.entries()){if(e.version===this._atlasGpuTextureVersions[i])continue;this._logService.trace("Updating atlas page[",i,"] from version ",this._atlasGpuTextureVersions[i]," to version ",e.version);const t=new Float32Array(6*zh.maximumGlyphCount);let n=0;for(const s of e.glyphs)t[n+0]=s.x,t[n+0+1]=s.y,t[n+2]=s.w,t[n+2+1]=s.h,t[n+4]=s.originOffsetX,t[n+4+1]=s.originOffsetY,n+=6;if(n/6>zh.maximumGlyphCount)throw new Error(`Attempting to write more glyphs (${n/6}) than the GPUBuffer can hold (${zh.maximumGlyphCount})`);this._device.queue.writeBuffer(this._glyphStorageBuffer[i],0,t),e.usedArea.right-e.usedArea.left>0&&e.usedArea.bottom-e.usedArea.top>0&&this._device.queue.copyExternalImageToTexture({source:e.source},{texture:this._atlasGpuTexture,origin:{x:e.usedArea.left,y:e.usedArea.top,z:i}},{width:e.usedArea.right-e.usedArea.left,height:e.usedArea.bottom-e.usedArea.top}),this._atlasGpuTextureVersions[i]=e.version}}static canRender(i,e,t){return e.getViewLineRenderingData(t).content.indexOf("e")!==-1}prepareRender(i){throw new Et("Should not be called")}render(i){throw new Et("Should not be called")}onLinesChanged(i){return!0}onScrollChanged(i){return!0}renderText(i){if(this._initialized)return this._renderText(i)}_renderText(i){const e=new x4(this._context.configuration,this._context.theme.type),t=this._renderStrategy.update(i,e);this._updateAtlasStorageBufferAndTexture();const n=this._device.createCommandEncoder({label:"Monaco command encoder"});this._renderPassColorAttachment.view=this._viewGpuContext.ctx.getCurrentTexture().createView({label:"Monaco canvas texture view"});const s=n.beginRenderPass(this._renderPassDescriptor);s.setPipeline(this._pipeline),s.setVertexBuffer(0,this._vertexBuffer),s.setBindGroup(0,this._bindGroup),this._renderStrategy?.draw?this._renderStrategy.draw(s,i):s.draw(gA.length/2,t),s.end();const o=n.finish();this._device.queue.submit([o])}};k4=I3e([e$(2,He),e$(3,jo)],k4);var T3e=Object.defineProperty,A3e=(i,e)=>T3e(i,"name",{value:e,configurable:!0});class _ae extends ha{static{A3e(this,"AbstractEditContext")}}var x3e=Object.defineProperty,k3e=(i,e)=>x3e(i,"name",{value:e,configurable:!0});class N3e{static{k3e(this,"IMEImpl")}_onDidChange=new x;onDidChange=this._onDidChange.event;_enabled=!0;get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const t$=new N3e;var bae=Object.defineProperty,P3e=Object.getOwnPropertyDescriptor,wd=(i,e)=>bae(i,"name",{value:e,configurable:!0}),R3e=(i,e,t,n)=>{for(var s=n>1?void 0:n?P3e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&bae(e,t,s),s},i$=(i,e)=>(t,n)=>e(t,n,i);class O3e{constructor(e,t,n,s,o){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=n,this.widthOfHiddenLineTextBefore=s,this.distanceToModelLineEnd=o}static{wd(this,"VisibleTextAreaData")}_visibleTextAreaBrand=void 0;startPosition=null;endPosition=null;visibleTextareaStart=null;visibleTextareaEnd=null;_previousPresentation=null;prepareRender(e){const t=new j(this.modelLineNumber,this.distanceToModelLineStart+1),n=new j(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:oa.DefaultForeground,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const _M=na;let N4=class extends _ae{constructor(i,e,t,n,s){super(i),this._keybindingService=n,this._instantiationService=s,this._viewController=e,this._visibleRangeProvider=t,this._scrollLeft=0,this._scrollTop=0;const o=this._context.configuration.options,r=o.get(k.layoutInfo);this._setAccessibilityOptions(o),this._contentLeft=r.contentLeft,this._contentWidth=r.contentWidth,this._contentHeight=r.height,this._fontInfo=o.get(k.fontInfo),this._lineHeight=o.get(k.lineHeight),this._emptySelectionClipboard=o.get(k.emptySelectionClipboard),this._copyWithSyntaxHighlighting=o.get(k.copyWithSyntaxHighlighting),this._visibleTextArea=null,this._selections=[new St(1,1,1,1)],this._modelSelections=[new St(1,1,1,1)],this._lastRenderPosition=null,this.textArea=Ut(document.createElement("textarea")),oh.write(this.textArea,Hn.TextArea),this.textArea.setClassName(`inputarea ${NC}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:a}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${a*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",qk(o,this._keybindingService)),this.textArea.setAttribute("aria-required",o.get(k.ariaRequired)?"true":"false"),this.textArea.setAttribute("tabindex",String(o.get(k.tabIndex))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",g("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",o.get(k.readOnly)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=Ut(document.createElement("div")),this.textAreaCover.setPosition("absolute");const l={getLineCount:wd(()=>this._context.viewModel.getLineCount(),"getLineCount"),getLineMaxColumn:wd(h=>this._context.viewModel.getLineMaxColumn(h),"getLineMaxColumn"),getValueInRange:wd((h,u)=>this._context.viewModel.getValueInRange(h,u),"getValueInRange"),getValueLengthInRange:wd((h,u)=>this._context.viewModel.getValueLengthInRange(h,u),"getValueLengthInRange"),modifyPosition:wd((h,u)=>this._context.viewModel.modifyPosition(h,u),"modifyPosition")},c={getDataToCopy:wd(()=>Z2(this._context.viewModel,this._modelSelections,this._emptySelectionClipboard,this._copyWithSyntaxHighlighting),"getDataToCopy"),getScreenReaderContent:wd(()=>{if(this._accessibilitySupport===rr.Disabled){const u=this._selections[0];if(Ue&&u.isEmpty()){const p=u.getStartPosition();let m=this._getWordBeforePosition(p);if(m.length===0&&(m=this._getCharacterBeforePosition(p)),m.length>0)return new Vs(m,m.length,m.length,V.fromPositions(p),0)}if(Ue&&!u.isEmpty()&&l.getValueLengthInRange(u,cn.TextDefined)<500){const p=l.getValueInRange(u,cn.TextDefined);return new Vs(p,0,p.length,u,0)}if(Vc&&!u.isEmpty()){const p="vscode-placeholder";return new Vs(p,0,p.length,null,void 0)}return Vs.EMPTY}if(g8){const u=this._selections[0];if(u.isEmpty()){const f=u.getStartPosition(),[p,m]=this._getAndroidWordAtPosition(f);if(p.length>0)return new Vs(p,m,m,V.fromPositions(f),0)}return Vs.EMPTY}const h=$_.fromEditorSelection(l,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===rr.Unknown);return Vs.fromScreenReaderContentState(h)},"getScreenReaderContent"),deduceModelPosition:wd((h,u,f)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(h,u,f),"deduceModelPosition")},d=this._register(new VHe(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(T4,c,d,gp,{isAndroid:g8,isChrome:qy,isFirefox:na,isSafari:Vc})),this._register(this._textAreaInput.onKeyDown(h=>{this._viewController.emitKeyDown(h)})),this._register(this._textAreaInput.onKeyUp(h=>{this._viewController.emitKeyUp(h)})),this._register(this._textAreaInput.onPaste(h=>{let u=!1,f=null,p=null;h.metadata&&(u=this._emptySelectionClipboard&&!!h.metadata.isFromEmptySelection,f=typeof h.metadata.multicursorText<"u"?h.metadata.multicursorText:null,p=h.metadata.mode),this._viewController.paste(h.text,u,f,p)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(h=>{h.replacePrevCharCnt||h.replaceNextCharCnt||h.positionDelta?this._viewController.compositionType(h.text,h.replacePrevCharCnt,h.replaceNextCharCnt,h.positionDelta):this._viewController.type(h.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(h=>{this._viewController.setSelection(h)})),this._register(this._textAreaInput.onCompositionStart(h=>{const u=this.textArea.domNode,f=this._modelSelections[0],{distanceToModelLineStart:p,widthOfHiddenTextBefore:m}=(()=>{const w=u.value.substring(0,Math.min(u.selectionStart,u.selectionEnd)),v=w.lastIndexOf(`
`),b=w.substring(v+1),C=b.lastIndexOf("	"),S=b.length-C-1,D=f.getStartPosition(),T=Math.min(D.column-1,S),I=D.column-1-T,R=b.substring(0,b.length-T),{tabSize:G}=this._context.viewModel.model.getOptions(),K=vae(this.textArea.domNode.ownerDocument,R,this._fontInfo,G);return{distanceToModelLineStart:I,widthOfHiddenTextBefore:K}})(),{distanceToModelLineEnd:_}=(()=>{const w=u.value.substring(Math.max(u.selectionStart,u.selectionEnd)),v=w.indexOf(`
`),b=v===-1?w:w.substring(0,v),C=b.indexOf("	"),S=C===-1?b.length:b.length-C-1,D=f.getEndPosition(),T=Math.min(this._context.viewModel.model.getLineMaxColumn(D.lineNumber)-D.column,S);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(D.lineNumber)-D.column-T}})();this._context.viewModel.revealRange("keyboard",!0,V.fromPositions(this._selections[0].getStartPosition()),ei.Simple,ot.Immediate),this._visibleTextArea=new O3e(this._context,f.startLineNumber,p,m,_),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${NC} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(h=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${NC}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(t$.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}static{wd(this,"TextAreaEditContext")}_viewController;_visibleRangeProvider;_scrollLeft;_scrollTop;_accessibilitySupport;_accessibilityPageSize;_textAreaWrapping;_textAreaWidth;_contentLeft;_contentWidth;_contentHeight;_fontInfo;_lineHeight;_emptySelectionClipboard;_copyWithSyntaxHighlighting;_visibleTextArea;_selections;_modelSelections;_lastRenderPosition;textArea;textAreaCover;_textAreaInput;get domNode(){return this.textArea}appendTo(i){i.appendChild(this.textArea),i.appendChild(this.textAreaCover)}writeScreenReaderContent(i){this._textAreaInput.writeNativeTextAreaContent(i)}dispose(){super.dispose(),this.textArea.domNode.remove(),this.textAreaCover.domNode.remove()}_getAndroidWordAtPosition(i){const e='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',t=this._context.viewModel.getLineContent(i.lineNumber),n=Fb(e,[]);let s=!0,o=i.column,r=!0,a=i.column,l=0;for(;l<50&&(s||r);){if(s&&o<=1&&(s=!1),s){const c=t.charCodeAt(o-2);n.get(c)!==ts.Regular?s=!1:o--}if(r&&a>t.length&&(r=!1),r){const c=t.charCodeAt(a-1);n.get(c)!==ts.Regular?r=!1:a++}l++}return[t.substring(o-1,a-1),i.column-o]}_getWordBeforePosition(i){const e=this._context.viewModel.getLineContent(i.lineNumber),t=Fb(this._context.configuration.options.get(k.wordSeparators),[]);let n=i.column,s=0;for(;n>1;){const o=e.charCodeAt(n-2);if(t.get(o)!==ts.Regular||s>50)return e.substring(n-1,i.column-1);s++,n--}return e.substring(0,i.column-1)}_getCharacterBeforePosition(i){if(i.column>1){const t=this._context.viewModel.getLineContent(i.lineNumber).charAt(i.column-2);if(!Ds(t.charCodeAt(0)))return t}return""}_setAccessibilityOptions(i){this._accessibilitySupport=i.get(k.accessibilitySupport);const e=i.get(k.accessibilityPageSize);this._accessibilitySupport===rr.Enabled&&e===Ku.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=e;const n=i.get(k.layoutInfo).wrappingColumn;if(n!==-1&&this._accessibilitySupport!==rr.Disabled){const s=i.get(k.fontInfo);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(n*s.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=_M?0:1}onConfigurationChanged(i){const e=this._context.configuration.options,t=e.get(k.layoutInfo);this._setAccessibilityOptions(e),this._contentLeft=t.contentLeft,this._contentWidth=t.contentWidth,this._contentHeight=t.height,this._fontInfo=e.get(k.fontInfo),this._lineHeight=e.get(k.lineHeight),this._emptySelectionClipboard=e.get(k.emptySelectionClipboard),this._copyWithSyntaxHighlighting=e.get(k.copyWithSyntaxHighlighting),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:n}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${n*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",qk(e,this._keybindingService)),this.textArea.setAttribute("aria-required",e.get(k.ariaRequired)?"true":"false"),this.textArea.setAttribute("tabindex",String(e.get(k.tabIndex))),(i.hasChanged(k.domReadOnly)||i.hasChanged(k.readOnly))&&this._ensureReadOnlyAttribute(),i.hasChanged(k.accessibilitySupport)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(i){return this._selections=i.selections.slice(0),this._modelSelections=i.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(i){return!0}onFlushed(i){return!0}onLinesChanged(i){return!0}onLinesDeleted(i){return!0}onLinesInserted(i){return!0}onScrollChanged(i){return this._scrollLeft=i.scrollLeft,this._scrollTop=i.scrollTop,!0}onZonesChanged(i){return!0}isFocused(){return this._textAreaInput.isFocused()}focus(){this._textAreaInput.focusTextArea()}refreshFocusState(){this._textAreaInput.refreshFocusState()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(i){i.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",i.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),i.role&&this.textArea.setAttribute("role",i.role)}_ensureReadOnlyAttribute(){const i=this._context.configuration.options;!t$.enabled||i.get(k.domReadOnly)&&i.get(k.readOnly)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}_primaryCursorPosition=new j(1,1);_primaryCursorVisibleRange=null;prepareRender(i){this._primaryCursorPosition=new j(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=i.visibleRangeForPosition(this._primaryCursorPosition),this._visibleTextArea?.prepareRender(i)}render(i){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){if(this._visibleTextArea){const t=this._visibleTextArea.visibleTextareaStart,n=this._visibleTextArea.visibleTextareaEnd,s=this._visibleTextArea.startPosition,o=this._visibleTextArea.endPosition;if(s&&o&&t&&n&&n.left>=this._scrollLeft&&t.left<=this._scrollLeft+this._contentWidth){const r=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,a=Yk(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let l=this._visibleTextArea.widthOfHiddenLineTextBefore,c=this._contentLeft+t.left-this._scrollLeft,d=n.left-t.left+1;if(c<this._contentLeft){const _=this._contentLeft-c;c+=_,l+=_,d-=_}d>this._contentWidth&&(d=this._contentWidth);const h=this._context.viewModel.getViewLineData(s.lineNumber),u=h.tokens.findTokenIndexAtOffset(s.column-1),f=h.tokens.findTokenIndexAtOffset(o.column-1),p=u===f,m=this._visibleTextArea.definePresentation(p?h.tokens.getPresentation(u):null);this.textArea.domNode.scrollTop=a*this._lineHeight,this.textArea.domNode.scrollLeft=l,this._doRender({lastRenderPosition:null,top:r,left:c,width:d,height:this._lineHeight,useCover:!1,color:(lu.getColorMap()||[])[m.foreground],italic:m.italic,bold:m.bold,underline:m.underline,strikethrough:m.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const i=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(i<this._contentLeft||i>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const e=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(e<0||e>this._contentHeight){this._renderAtTopLeft();return}if(Ue||this._accessibilitySupport===rr.Enabled){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:e,left:this._textAreaWrapping?this._contentLeft:i,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const t=this._textAreaInput.textAreaState.newlineCountBeforeSelection??Yk(this.textArea.domNode.value.substring(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=t*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:e,left:this._textAreaWrapping?this._contentLeft:i,width:this._textAreaWidth,height:_M?0:1,useCover:!1})}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:_M?0:1,useCover:!0})}_doRender(i){this._lastRenderPosition=i.lastRenderPosition;const e=this.textArea,t=this.textAreaCover;Ao(e,this._fontInfo),e.setTop(i.top),e.setLeft(i.left),e.setWidth(i.width),e.setHeight(i.height),e.setColor(i.color?U.Format.CSS.formatHex(i.color):""),e.setFontStyle(i.italic?"italic":""),i.bold&&e.setFontWeight("bold"),e.setTextDecoration(`${i.underline?" underline":""}${i.strikethrough?" line-through":""}`),t.setTop(i.useCover?i.top:0),t.setLeft(i.useCover?i.left:0),t.setWidth(i.useCover?i.width:0),t.setHeight(i.useCover?i.height:0);const n=this._context.configuration.options;n.get(k.glyphMargin)?t.setClassName("monaco-editor-background textAreaCover "+pL.OUTER_CLASS_NAME):n.get(k.lineNumbers).renderType!==l_.Off?t.setClassName("monaco-editor-background textAreaCover "+HR.CLASS_NAME):t.setClassName("monaco-editor-background textAreaCover")}};N4=R3e([i$(3,ni),i$(4,He)],N4);function vae(i,e,t,n){if(e.length===0)return 0;const s=i.createElement("div");s.style.position="absolute",s.style.top="-50000px",s.style.width="50000px";const o=i.createElement("span");Ao(o,t),o.style.whiteSpace="pre",o.style.tabSize=`${n*t.spaceWidth}px`,o.append(e),s.appendChild(o),i.body.appendChild(s);const r=o.offsetWidth;return s.remove(),r}wd(vae,"measureText");var M3e=Object.defineProperty,wae=(i,e)=>M3e(i,"name",{value:e,configurable:!0});class B3e extends ${constructor(e,t){super(),this._domNode=e,this._onFocusChange=t,this._register(F(this._domNode,"focus",()=>this._handleFocusedChanged(!0))),this._register(F(this._domNode,"blur",()=>this._handleFocusedChanged(!1)))}static{wae(this,"FocusTracker")}_isFocused=!1;_handleFocusedChanged(e){this._isFocused!==e&&(this._isFocused=e,this._onFocusChange(this._isFocused))}focus(){this._handleFocusedChanged(!0),this._domNode.focus()}get isFocused(){return this._isFocused}}function lw(i,e,t,n){return i.addEventListener(e,t,n),{dispose(){i.removeEventListener(e,t)}}}wae(lw,"editContextAddDisposableListener");var Cae=Object.defineProperty,F3e=Object.getOwnPropertyDescriptor,Yv=(i,e)=>Cae(i,"name",{value:e,configurable:!0}),V3e=(i,e,t,n)=>{for(var s=n>1?void 0:n?F3e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Cae(e,t,s),s},W3e=(i,e)=>(t,n)=>e(t,n,i);let P4=class{constructor(i,e,t){this._domNode=i,this._context=e,this._keybindingService=t,this._updateConfigurationSettings(),this._updateDomAttributes()}static{Yv(this,"ScreenReaderSupport")}_contentLeft=1;_contentWidth=1;_lineHeight=1;_fontInfo;_accessibilitySupport=rr.Unknown;_accessibilityPageSize=1;_primarySelection=new St(1,1,1,1);_screenReaderContentState;onConfigurationChanged(i){this._updateConfigurationSettings(),this._updateDomAttributes(),i.hasChanged(k.accessibilitySupport)&&this.writeScreenReaderContent()}_updateConfigurationSettings(){const i=this._context.configuration.options,e=i.get(k.layoutInfo);this._contentLeft=e.contentLeft,this._contentWidth=e.contentWidth,this._fontInfo=i.get(k.fontInfo),this._lineHeight=i.get(k.lineHeight),this._accessibilitySupport=i.get(k.accessibilitySupport),this._accessibilityPageSize=i.get(k.accessibilityPageSize)}_updateDomAttributes(){const i=this._context.configuration.options;this._domNode.domNode.setAttribute("aria-label",qk(i,this._keybindingService));const e=this._context.viewModel.model.getOptions().tabSize,t=i.get(k.fontInfo).spaceWidth;this._domNode.domNode.style.tabSize=`${e*t}px`}onCursorStateChanged(i){this._primarySelection=i.selections[0]??new St(1,1,1,1)}prepareRender(i){this.writeScreenReaderContent()}render(i){if(!this._screenReaderContentState)return;Ao(this._domNode,this._fontInfo);const e=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primarySelection.positionLineNumber),t=this._context.viewLayout.getCurrentScrollTop(),n=e-t;this._domNode.setTop(n),this._domNode.setLeft(this._contentLeft),this._domNode.setWidth(this._contentWidth),this._domNode.setHeight(this._lineHeight);const s=this._screenReaderContentState.value.substring(0,this._screenReaderContentState.selectionStart),o=Yk(s);this._domNode.domNode.scrollTop=o*this._lineHeight}setAriaOptions(){}writeScreenReaderContent(){const i=sn().document.activeElement;!i||i!==this._domNode.domNode||(this._screenReaderContentState=this._getScreenReaderContentState(),this._screenReaderContentState&&(this._domNode.domNode.textContent!==this._screenReaderContentState.value&&(this._domNode.domNode.textContent=this._screenReaderContentState.value),this._setSelectionOfScreenReaderContent(this._screenReaderContentState.selectionStart,this._screenReaderContentState.selectionEnd)))}_getScreenReaderContentState(){if(this._accessibilitySupport===rr.Disabled)return;const i={getLineCount:Yv(()=>this._context.viewModel.getLineCount(),"getLineCount"),getLineMaxColumn:Yv(e=>this._context.viewModel.getLineMaxColumn(e),"getLineMaxColumn"),getValueInRange:Yv((e,t)=>this._context.viewModel.getValueInRange(e,t),"getValueInRange"),getValueLengthInRange:Yv((e,t)=>this._context.viewModel.getValueLengthInRange(e,t),"getValueLengthInRange"),modifyPosition:Yv((e,t)=>this._context.viewModel.modifyPosition(e,t),"modifyPosition")};return $_.fromEditorSelection(i,this._primarySelection,this._accessibilityPageSize,this._accessibilitySupport===rr.Unknown)}_setSelectionOfScreenReaderContent(i,e){const n=sn().document.getSelection();if(!n)return;const s=this._domNode.domNode.firstChild;if(!s)return;const o=new globalThis.Range;o.setStart(s,i),o.setEnd(s,e),n.removeAllRanges(),n.addRange(o)}};P4=V3e([W3e(2,ni)],P4);var yae=Object.defineProperty,H3e=Object.getOwnPropertyDescriptor,U3e=(i,e)=>yae(i,"name",{value:e,configurable:!0}),z3e=(i,e,t,n)=>{for(var s=n>1?void 0:n?H3e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&yae(e,t,s),s},n$=(i,e)=>(t,n)=>e(t,n,i);let R4=class extends _ae{static{U3e(this,"NativeEditContext")}domNode;_editContext;_screenReaderSupport;_parent;_decorations=[];_renderingContext;_primarySelection=new St(1,1,1,1);_textStartPositionWithinEditor=new j(1,1);_compositionRangeWithinEditor;_focusTracker;constructor(i,e,t,n){super(i),this.domNode=new i3(document.createElement("div")),this.domNode.setClassName("native-edit-context"),this._updateDomAttributes(),this._focusTracker=this._register(new B3e(this.domNode.domNode,s=>this._context.viewModel.setHasFocus(s))),this._editContext=new EditContext,this.domNode.domNode.editContext=this._editContext,this._screenReaderSupport=t.createInstance(P4,this.domNode,i),this._register(F(this.domNode.domNode,"copy",()=>this._ensureClipboardGetsEditorSelection(n))),this._register(F(this.domNode.domNode,"cut",()=>{this._ensureClipboardGetsEditorSelection(n),e.cut()})),this._register(F(this.domNode.domNode,"keyup",s=>e.emitKeyUp(new Pt(s)))),this._register(F(this.domNode.domNode,"keydown",async s=>{const o=new Pt(s);o.keyCode===E.KEY_IN_COMPOSITION&&o.stopPropagation(),e.emitKeyDown(o)})),this._register(F(this.domNode.domNode,"beforeinput",async s=>{s.inputType==="insertParagraph"&&this._onType(e,{text:`
`,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0})})),this._register(lw(this._editContext,"textformatupdate",s=>this._handleTextFormatUpdate(s))),this._register(lw(this._editContext,"characterboundsupdate",s=>this._updateCharacterBounds())),this._register(lw(this._editContext,"textupdate",s=>{const o=this._compositionRangeWithinEditor;if(o){const r=this._context.viewModel.getPrimaryCursorState().modelState.position,a=V.fromPositions(o.getStartPosition(),r);this._compositionRangeWithinEditor=a}this._emitTypeEvent(e,s)})),this._register(lw(this._editContext,"compositionstart",s=>{const o=this._context.viewModel.getPrimaryCursorState().modelState.position,r=V.fromPositions(o,o);this._compositionRangeWithinEditor=r,e.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(lw(this._editContext,"compositionend",s=>{this._compositionRangeWithinEditor=void 0,e.compositionEnd(),this._context.viewModel.onCompositionEnd()}))}dispose(){super.dispose(),this.domNode.domNode.remove()}appendTo(i){i.appendChild(this.domNode),this._parent=i.domNode}setAriaOptions(){this._screenReaderSupport.setAriaOptions()}getLastRenderData(){return this._primarySelection.getPosition()}prepareRender(i){this._renderingContext=i,this._screenReaderSupport.prepareRender(i),this._updateEditContext(),this._updateSelectionAndControlBounds(),this._updateCharacterBounds()}render(i){this._screenReaderSupport.render(i)}onCursorStateChanged(i){return this._primarySelection=i.modelSelections[0]??new St(1,1,1,1),this._screenReaderSupport.onCursorStateChanged(i),!0}onConfigurationChanged(i){return this._screenReaderSupport.onConfigurationChanged(i),this._updateDomAttributes(),!0}writeScreenReaderContent(){this._screenReaderSupport.writeScreenReaderContent()}isFocused(){return this._focusTracker.isFocused}focus(){this._focusTracker.focus()}refreshFocusState(){}_updateDomAttributes(){const i=this._context.configuration.options;this.domNode.domNode.setAttribute("tabindex",String(i.get(k.tabIndex)))}_updateEditContext(){const i=this._getNewEditContextState();this._editContext.updateText(0,Number.MAX_SAFE_INTEGER,i.text),this._editContext.updateSelection(i.selectionStartOffset,i.selectionEndOffset),this._textStartPositionWithinEditor=i.textStartPositionWithinEditor}_emitTypeEvent(i,e){if(!this._editContext)return;const t=this._context.viewModel.model,n=t.getOffsetAt(this._textStartPositionWithinEditor),s=t.getOffsetAt(this._primarySelection.getEndPosition()),o=t.getOffsetAt(this._primarySelection.getStartPosition()),r=s-n,a=o-n;let l=0,c=0;e.updateRangeEnd>r&&(l=e.updateRangeEnd-r),e.updateRangeStart<a&&(c=a-e.updateRangeStart);let d="";a<e.updateRangeStart&&(d+=this._editContext.text.substring(a,e.updateRangeStart)),d+=e.text,r>e.updateRangeEnd&&(d+=this._editContext.text.substring(e.updateRangeEnd,r));const h={text:d,replacePrevCharCnt:c,replaceNextCharCnt:l,positionDelta:0};this._onType(i,h);const u=a-c+d.length;this._updateCursorStatesAfterType(u,e.selectionStart,e.selectionEnd)}_onType(i,e){e.replacePrevCharCnt||e.replaceNextCharCnt||e.positionDelta?i.compositionType(e.text,e.replacePrevCharCnt,e.replaceNextCharCnt,e.positionDelta):i.type(e.text)}_updateCursorStatesAfterType(i,e,t){const n=e-i,s=t-i,a=this._context.viewModel.getCursorStates().map(l=>l.modelState.position).map(l=>{const c=l.lineNumber,d=l.column;return new St(c,d+n,c,d+s)}).map(l=>Tt.fromModelSelection(l));this._context.viewModel.setCursorStates("editContext",ri.Explicit,a)}_getNewEditContextState(){const i=this._primarySelection.startColumn-1;let e=0;for(let r=this._primarySelection.startLineNumber;r<=this._primarySelection.endLineNumber;r++)r===this._primarySelection.endLineNumber?e+=this._primarySelection.endColumn-1:e+=this._context.viewModel.model.getLineMaxColumn(r);const t=this._context.viewModel.model.getLineMaxColumn(this._primarySelection.endLineNumber),n=new V(this._primarySelection.startLineNumber,1,this._primarySelection.endLineNumber,t),s=this._context.viewModel.model.getValueInRange(n,cn.TextDefined),o=n.getStartPosition();return{text:s,selectionStartOffset:i,selectionEndOffset:e,textStartPositionWithinEditor:o}}_handleTextFormatUpdate(i){if(!this._editContext)return;const e=i.getTextFormats(),t=this._textStartPositionWithinEditor,n=[];e.forEach(s=>{const o=this._context.viewModel.model,r=o.getOffsetAt(t),a=o.getPositionAt(r+s.rangeStart),l=o.getPositionAt(r+s.rangeEnd),c=V.fromPositions(a,l),d=["edit-context-format-decoration",`underline-style-${s.underlineStyle.toLowerCase()}`,`underline-thickness-${s.underlineThickness.toLowerCase()}`];n.push({range:c,options:{description:"textFormatDecoration",inlineClassName:d.join(" ")}})}),this._decorations=this._context.viewModel.model.deltaDecorations(this._decorations,n)}_updateSelectionAndControlBounds(){if(!this._parent)return;const i=this._context.configuration.options,e=i.get(k.lineHeight),t=i.get(k.layoutInfo).contentLeft,n=this._parent.getBoundingClientRect(),s=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primarySelection.startLineNumber),o=this._context.viewLayout.getCurrentScrollTop(),r=n.top+s-o,a=(this._primarySelection.endLineNumber-this._primarySelection.startLineNumber+1)*e;let l=n.left+t,c;if(this._primarySelection.isEmpty()){if(this._renderingContext){const u=this._renderingContext.linesVisibleRangesForRange(this._primarySelection,!0)??[];u.length>0&&(l+=Math.min(...u.map(f=>Math.min(...f.ranges.map(p=>p.left)))))}c=i.get(k.fontInfo).typicalHalfwidthCharacterWidth/2}else c=n.width-t;const d=new DOMRect(l,r,c,a),h=d;this._editContext.updateControlBounds(h),this._editContext.updateSelectionBounds(d)}_updateCharacterBounds(){if(!this._parent||!this._compositionRangeWithinEditor)return;const i=this._context.configuration.options,e=i.get(k.lineHeight),t=i.get(k.layoutInfo).contentLeft,n=this._parent.getBoundingClientRect(),s=this._compositionRangeWithinEditor,o=this._context.viewLayout.getVerticalOffsetForLineNumber(s.startLineNumber),r=this._context.viewLayout.getCurrentScrollTop(),a=n.top+o-r,l=[];if(this._renderingContext){const f=this._renderingContext.linesVisibleRangesForRange(s,!0)??[];for(const p of f)for(const m of p.ranges)l.push(new DOMRect(n.left+t+m.left,a,m.width,e))}const c=this._context.viewModel.model,d=c.getOffsetAt(this._textStartPositionWithinEditor),u=c.getOffsetAt(s.getStartPosition())-d;this._editContext.updateCharacterBounds(u,l)}_ensureClipboardGetsEditorSelection(i){const e=this._context.configuration.options,t=e.get(k.emptySelectionClipboard),n=e.get(k.copyWithSyntaxHighlighting),s=this._context.viewModel.getCursorStates().map(a=>a.modelState.selection),o=Z2(this._context.viewModel,s,t,n),r={version:1,isFromEmptySelection:o.isFromEmptySelection,multicursorText:o.multicursorText,mode:o.mode};uL.INSTANCE.set(na?o.text.replace(/\r\n/g,`
`):o.text,r),i.writeText(o.text)}};R4=z3e([n$(2,He),n$(3,D7)],R4);var Sae=Object.defineProperty,$3e=Object.getOwnPropertyDescriptor,bs=(i,e)=>Sae(i,"name",{value:e,configurable:!0}),G3e=(i,e,t,n)=>{for(var s=n>1?void 0:n?$3e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Sae(e,t,s),s},K3e=(i,e)=>(t,n)=>e(t,n,i);let O4=class extends AD{constructor(e,t,n,s,o,r,a){super(),this._instantiationService=a,this._selections=[new St(1,1,1,1)],this._renderAnimationFrame=null,this._viewController=new IHe(t,s,o,e),this._context=new jWe(t,n,s),this._context.addEventHandler(this),this._viewParts=[],this._experimentalEditContextEnabled=this._context.configuration.options.get(k.experimentalEditContextEnabled),this._editContext=this._instantiateEditContext(this._experimentalEditContextEnabled),this._viewParts.push(this._editContext),this._linesContent=Ut(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=Ut(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._context.configuration.options.get(k.experimentalGpuAcceleration)==="on"&&(this._viewGpuContext=this._instantiationService.createInstance(xl)),this._overflowGuardContainer=Ut(document.createElement("div")),oh.write(this._overflowGuardContainer,Hn.OverflowGuard),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new c6e(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new t9(this._context,this._linesContent),this._viewGpuContext&&(this._viewLinesGpu=this._instantiationService.createInstance(k4,this._context,this._viewGpuContext)),this._viewZones=new w3e(this._context),this._viewParts.push(this._viewZones);const l=new o3e(this._context);this._viewParts.push(l);const c=new f3e(this._context);this._viewParts.push(c);const d=new qHe(this._context);this._viewParts.push(d),d.addDynamicOverlay(new n6e(this._context)),d.addDynamicOverlay(new Qs(this._context)),d.addDynamicOverlay(new b6e(this._context)),d.addDynamicOverlay(new a6e(this._context)),d.addDynamicOverlay(new y3e(this._context));const h=new YHe(this._context);this._viewParts.push(h),h.addDynamicOverlay(new s6e(this._context)),h.addDynamicOverlay(new R6e(this._context)),h.addDynamicOverlay(new A6e(this._context)),h.addDynamicOverlay(new HR(this._context)),this._glyphMarginWidgets=new g6e(this._context),this._viewParts.push(this._glyphMarginWidgets);const u=new pL(this._context);u.getDomNode().appendChild(this._viewZones.marginDomNode),u.getDomNode().appendChild(h.getDomNode()),u.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(u),this._contentWidgets=new e6e(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new Xk(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new i3e(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const f=new h3e(this._context);this._viewParts.push(f);const p=new QHe(this._context);this._viewParts.push(p);const m=new J6e(this._context);if(this._viewParts.push(m),l){const _=this._scrollbar.getOverviewRulerLayoutInfo();_.parent.insertBefore(l.getDomNode(),_.insertBefore)}this._linesContent.appendChild(d.getDomNode()),this._linesContent.appendChild(f.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(u.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._viewGpuContext&&this._overflowGuardContainer.appendChild(this._viewGpuContext.canvas),this._overflowGuardContainer.appendChild(c.getDomNode()),this._editContext.appendTo(this._overflowGuardContainer),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(m.getDomNode()),this._overflowGuardContainer.appendChild(p.domNode),this.domNode.appendChild(this._overflowGuardContainer),r?(r.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),r.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new zHe(this._context,this._viewController,this._createPointerHandlerHelper()))}static{bs(this,"View")}_scrollbar;_context;_viewGpuContext;_selections;_viewLines;_viewLinesGpu;_viewZones;_contentWidgets;_overlayWidgets;_glyphMarginWidgets;_viewCursors;_viewParts;_viewController;_experimentalEditContextEnabled;_editContext;_pointerHandler;_linesContent;domNode;_overflowGuardContainer;_shouldRecomputeGlyphMarginLanes=!1;_renderAnimationFrame;_instantiateEditContext(e){return e?this._instantiationService.createInstance(R4,this._context,this._viewController):this._instantiationService.createInstance(N4,this._context,this._viewController,this._createTextAreaHandlerHelper())}_updateEditContext(){const e=this._context.configuration.options.get(k.experimentalEditContextEnabled);if(this._experimentalEditContextEnabled===e)return;this._experimentalEditContextEnabled=e,this._editContext.dispose(),this._editContext=this._instantiateEditContext(e),this._editContext.appendTo(this._overflowGuardContainer);const t=this._viewParts.indexOf(this._editContext);t!==-1&&this._viewParts.splice(t,1,this._editContext)}_computeGlyphMarginLanes(){const e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes;let n=[],s=0;n=n.concat(e.getAllMarginDecorations().map(o=>{const r=o.options.glyphMargin?.position??_v.Center;return s=Math.max(s,o.range.endLineNumber),{range:o.range,lane:r,persist:o.options.glyphMargin?.persistLane}})),n=n.concat(this._glyphMarginWidgets.getWidgets().map(o=>{const r=e.validateRange(o.preference.range);return s=Math.max(s,r.endLineNumber),{range:r,lane:o.preference.lane}})),n.sort((o,r)=>V.compareRangesUsingStarts(o.range,r.range)),t.reset(s);for(const o of n)t.push(o.lane,o.range,o.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:bs(()=>{this.focus()},"focusTextArea"),dispatchTextAreaEvent:bs(e=>{this._editContext.domNode.domNode.dispatchEvent(e)},"dispatchTextAreaEvent"),getLastRenderData:bs(()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._editContext.getLastRenderData();return new M5e(e,t)},"getLastRenderData"),renderNow:bs(()=>{this.render(!0,!1)},"renderNow"),shouldSuppressMouseDownOnViewZone:bs(e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),"shouldSuppressMouseDownOnViewZone"),shouldSuppressMouseDownOnWidget:bs(e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),"shouldSuppressMouseDownOnWidget"),getPositionFromDOMInfo:bs((e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),"getPositionFromDOMInfo"),visibleRangeForPosition:bs((e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new j(e,t))),"visibleRangeForPosition"),getLineWidth:bs(e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e)),"getLineWidth")}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:bs(e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e)),"visibleRangeForPosition")}}_applyLayout(){const t=this._context.configuration.options.get(k.layoutInfo);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(0x1000000),this._linesContent.setHeight(0x1000000)}_getEditorClassName(){const e=this._editContext.isFocused()?" focused":"";return this._context.configuration.options.get(k.editorClassName)+" "+KA(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._updateEditContext(),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewGpuContext?.dispose(),this._viewLines.dispose(),this._viewLinesGpu?.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){if(this._store.isDisposed)throw new Et;if(this._renderAnimationFrame===null){const e=this._createCoordinatedRendering();this._renderAnimationFrame=n9.INSTANCE.scheduleCoordinatedRendering({window:ve(this.domNode?.domNode),prepareRenderText:bs(()=>{if(this._store.isDisposed)throw new Et;try{return e.prepareRenderText()}finally{this._renderAnimationFrame=null}},"prepareRenderText"),renderText:bs(()=>{if(this._store.isDisposed)throw new Et;return e.renderText()},"renderText"),prepareRender:bs((t,n)=>{if(this._store.isDisposed)throw new Et;return e.prepareRender(t,n)},"prepareRender"),render:bs((t,n)=>{if(this._store.isDisposed)throw new Et;return e.render(t,n)},"render")})}}_flushAccumulatedAndRenderNow(){const e=this._createCoordinatedRendering();Sg(()=>e.prepareRenderText());const t=Sg(()=>e.renderText());if(t){const[n,s]=t;Sg(()=>e.prepareRender(n,s)),Sg(()=>e.render(n,s))}}_getViewPartsToRender(){const e=[];let t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_createCoordinatedRendering(){return{prepareRenderText:bs(()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}Ip.onRenderStart()},"prepareRenderText"),renderText:bs(()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return null;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new VWe(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),this._viewLinesGpu?.shouldRender()&&(this._viewLinesGpu.renderText(n),this._viewLinesGpu.onDidRender()),[e,new UWe(this._context.viewLayout,n,this._viewLines)]},"renderText"),prepareRender:bs((e,t)=>{for(const n of e)n.prepareRender(t)},"prepareRender"),render:bs((e,t)=>{for(const n of e)n.render(t),n.onDidRender()},"render")}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},ot.Immediate),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const n=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const o=this._viewLines.visibleRangeForPosition(new j(s.lineNumber,s.column));return o?o.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?WR.convertViewToModelMouseTarget(n,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new l3e(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._editContext.writeScreenReaderContent(e)}focus(){this._editContext.focus()}isFocused(){return this._editContext.isFocused()}refreshFocusState(){this._editContext.refreshFocusState()}setAriaOptions(e){this._editContext.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){this._contentWidgets.setWidgetPosition(e.widget,e.position?.position??null,e.position?.secondaryPosition??null,e.position?.preference??null,e.position?.positionAffinity??null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){this._overlayWidgets.setWidgetPosition(e.widget,e.position)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};O4=G3e([K3e(6,He)],O4);function Sg(i){try{return i()}catch(e){return Kt(e),null}}bs(Sg,"safeInvokeNoArg");class n9{static{bs(this,"EditorRenderingCoordinator")}static INSTANCE=new n9;_coordinatedRenderings=[];_animationFrameRunners=new Map;constructor(){}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:bs(()=>{const t=this._coordinatedRenderings.indexOf(e);if(t!==-1&&(this._coordinatedRenderings.splice(t,1),this._coordinatedRenderings.length===0)){for(const[n,s]of this._animationFrameRunners)s.dispose();this._animationFrameRunners.clear()}},"dispose")}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){const t=bs(()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()},"runner");this._animationFrameRunners.set(e,Cq(e,t,100))}}_onRenderScheduled(){const e=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const n of e)Sg(()=>n.prepareRenderText());const t=[];for(let n=0,s=e.length;n<s;n++){const o=e[n];t[n]=Sg(()=>o.renderText())}for(let n=0,s=e.length;n<s;n++){const o=e[n],r=t[n];if(!r)continue;const[a,l]=r;Sg(()=>o.prepareRender(a,l))}for(let n=0,s=e.length;n<s;n++){const o=e[n],r=t[n];if(!r)continue;const[a,l]=r;Sg(()=>o.render(a,l))}}}var j3e=Object.defineProperty,nu=(i,e)=>j3e(i,"name",{value:e,configurable:!0});const q3e=OD("domLineBreaksComputer",{createHTML:nu(i=>i,"createHTML")});class s9{constructor(e){this.targetWindow=e}static{nu(this,"DOMLineBreaksComputerFactory")}static create(e){return new s9(new WeakRef(e))}createLineBreaksComputer(e,t,n,s,o){const r=[],a=[];return{addRequest:nu((l,c,d)=>{r.push(l),a.push(c)},"addRequest"),finalize:nu(()=>Eae(pt(this.targetWindow.deref()),r,e,t,n,s,o,a),"finalize")}}}function Eae(i,e,t,n,s,o,r,a){function l(R){const G=a[R];if(G){const K=Fc.applyInjectedText(e[R],G),X=G.map(re=>re.options),we=G.map(re=>re.column-1);return new w0(we,X,[K.length],[],0)}else return null}if(nu(l,"createEmptyLineBreakWithPossiblyInjectedText"),s===-1){const R=[];for(let G=0,K=e.length;G<K;G++)R[G]=l(G);return R}const c=Math.round(s*t.typicalHalfwidthCharacterWidth),d=o===nb.DeepIndent?2:o===nb.Indent?1:0,h=Math.round(n*d),u=Math.ceil(t.spaceWidth*h),f=document.createElement("div");Ao(f,t);const p=new JL(1e4),m=[],_=[],w=[],v=[],b=[];for(let R=0;R<e.length;R++){const G=Fc.applyInjectedText(e[R],a[R]);let K=0,X=0,we=c;if(o!==nb.None)if(K=ia(G),K===-1)K=0;else{for(let Se=0;Se<K;Se++){const ue=G.charCodeAt(Se)===A.Tab?n-X%n:1;X+=ue}const Ee=Math.ceil(t.spaceWidth*X);Ee+t.typicalFullwidthCharacterWidth>c?(K=0,X=0):we=c-Ee}const re=G.substr(K),le=Lae(re,X,n,we,p,u);m[R]=K,_[R]=X,w[R]=re,v[R]=le[0],b[R]=le[1]}const C=p.build(),S=q3e?.createHTML(C)??C;f.innerHTML=S,f.style.position="absolute",f.style.top="10000",r==="keepAll"?(f.style.wordBreak="keep-all",f.style.overflowWrap="anywhere"):(f.style.wordBreak="inherit",f.style.overflowWrap="break-word"),i.document.body.appendChild(f);const D=document.createRange(),T=Array.prototype.slice.call(f.children,0),I=[];for(let R=0;R<e.length;R++){const G=T[R],K=Dae(D,G,w[R],v[R]);if(K===null){I[R]=l(R);continue}const X=m[R],we=_[R]+h,re=b[R],le=[];for(let fe=0,$e=K.length;fe<$e;fe++)le[fe]=re[K[fe]];if(X!==0)for(let fe=0,$e=K.length;fe<$e;fe++)K[fe]+=X;let Ee,Se;const ue=a[R];ue?(Ee=ue.map(fe=>fe.options),Se=ue.map(fe=>fe.column-1)):(Ee=null,Se=null),I[R]=new w0(Se,Ee,K,le,we)}return f.remove(),I}nu(Eae,"createLineBreaks");function Lae(i,e,t,n,s,o){if(o!==0){const u=String(o);s.appendString('<div style="text-indent: -'),s.appendString(u),s.appendString("px; padding-left: "),s.appendString(u),s.appendString("px; box-sizing: border-box; width:")}else s.appendString('<div style="width:');s.appendString(String(n)),s.appendString('px;">');const r=i.length;let a=e,l=0;const c=[],d=[];let h=0<r?i.charCodeAt(0):A.Null;s.appendString("<span>");for(let u=0;u<r;u++){u!==0&&u%16384===0&&s.appendString("</span><span>"),c[u]=l,d[u]=a;const f=h;h=u+1<r?i.charCodeAt(u+1):A.Null;let p=1,m=1;switch(f){case A.Tab:p=t-a%t,m=p;for(let _=1;_<=p;_++)_<p?s.appendCharCode(160):s.appendASCIICharCode(A.Space);break;case A.Space:h===A.Space?s.appendCharCode(160):s.appendASCIICharCode(A.Space);break;case A.LessThan:s.appendString("&lt;");break;case A.GreaterThan:s.appendString("&gt;");break;case A.Ampersand:s.appendString("&amp;");break;case A.Null:s.appendString("&#00;");break;case A.UTF8_BOM:case A.LINE_SEPARATOR:case A.PARAGRAPH_SEPARATOR:case A.NEXT_LINE:s.appendCharCode(65533);break;default:Kg(f)&&m++,f<32?s.appendCharCode(9216+f):s.appendCharCode(f)}l+=p,a+=m}return s.appendString("</span>"),c[i.length]=l,d[i.length]=a,s.appendString("</div>"),[c,d]}nu(Lae,"renderLine");function Dae(i,e,t,n){if(t.length<=1)return null;const s=Array.prototype.slice.call(e.children,0),o=[];try{Qk(i,s,n,0,null,t.length-1,null,o)}catch(r){return console.log(r),null}return o.length===0?null:(o.push(t.length),o)}nu(Dae,"readLineBreaks");function Qk(i,e,t,n,s,o,r,a){if(n===o||(s=s||bA(i,e,t[n],t[n+1]),r=r||bA(i,e,t[o],t[o+1]),Math.abs(s[0].top-r[0].top)<=.1))return;if(n+1===o){a.push(o);return}const l=n+(o-n)/2|0,c=bA(i,e,t[l],t[l+1]);Qk(i,e,t,n,s,l,c,a),Qk(i,e,t,l,c,o,r,a)}nu(Qk,"discoverBreaks");function bA(i,e,t,n){return i.setStart(e[t/16384|0].firstChild,t%16384),i.setEnd(e[n/16384|0].firstChild,n%16384),i.getClientRects()}nu(bA,"readClientRect");var Y3e=Object.defineProperty,Z3e=(i,e)=>Y3e(i,"name",{value:e,configurable:!0});class X3e extends ${static{Z3e(this,"CodeEditorContributions")}_editor=null;_instantiationService=null;_instances=this._register(new ah);_pending=new Map;_finishedInstantiation=[];constructor(){super(),this._finishedInstantiation[vl.Eager]=!1,this._finishedInstantiation[vl.AfterFirstRender]=!1,this._finishedInstantiation[vl.BeforeFirstInteraction]=!1,this._finishedInstantiation[vl.Eventually]=!1}initialize(e,t,n){this._editor=e,this._instantiationService=n;for(const s of t){if(this._pending.has(s.id)){Kt(new Error(`Cannot have two contributions with the same id ${s.id}`));continue}this._pending.set(s.id,s)}this._instantiateSome(vl.Eager),this._register(D_(ve(this._editor.getDomNode()),()=>{this._instantiateSome(vl.AfterFirstRender)})),this._register(D_(ve(this._editor.getDomNode()),()=>{this._instantiateSome(vl.BeforeFirstInteraction)})),this._register(D_(ve(this._editor.getDomNode()),()=>{this._instantiateSome(vl.Eventually)},5e3))}saveViewState(){const e={};for(const[t,n]of this._instances)typeof n.saveViewState=="function"&&(e[t]=n.saveViewState());return e}restoreViewState(e){for(const[t,n]of this._instances)typeof n.restoreViewState=="function"&&n.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}set(e,t){this._instances.set(e,t)}onBeforeInteractionEvent(){this._instantiateSome(vl.BeforeFirstInteraction)}onAfterModelAttached(){return D_(ve(this._editor?.getDomNode()),()=>{this._instantiateSome(vl.AfterFirstRender)},50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const n of t)this._instantiateById(n.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,n]of this._pending)n.instantiation===e&&t.push(n);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const n=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,n),typeof n.restoreViewState=="function"&&t.instantiation!==vl.Eager&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(n){Kt(n)}}}}var Q3e=Object.defineProperty,J3e=(i,e)=>Q3e(i,"name",{value:e,configurable:!0});class e7e{constructor(e,t,n,s,o,r,a){this.id=e,this.label=t,this.alias=n,this.metadata=s,this._precondition=o,this._run=r,this._contextKeyService=a}static{J3e(this,"InternalEditorAction")}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}var t7e=Object.defineProperty,$R=(i,e)=>t7e(i,"name",{value:e,configurable:!0});function o9(i){return typeof i=="string"?!1:Array.isArray(i)?i.every(o9):!!i.exclusive}$R(o9,"isExclusive");class s${constructor(e,t,n,s,o){this.uri=e,this.languageId=t,this.notebookUri=n,this.notebookType=s,this.recursive=o}static{$R(this,"MatchCandidate")}equals(e){return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&this.notebookUri?.toString()===e.notebookUri?.toString()&&this.recursive===e.recursive}}class Iae{constructor(e){this._notebookInfoResolver=e}static{$R(this,"LanguageFeatureRegistry")}_clock=0;_entries=[];_onDidChange=new x;onDidChange=this._onDidChange.event;register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),ye(()=>{if(n){const s=this._entries.indexOf(n);s>=0&&(this._entries.splice(s,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e,!1);const t=[];for(const n of this._entries)n._score>0&&t.push(n.provider);return t}allNoModel(){return this._entries.map(e=>e.provider)}ordered(e,t=!1){const n=[];return this._orderedForEach(e,t,s=>n.push(s.provider)),n}orderedGroups(e){const t=[];let n,s;return this._orderedForEach(e,!1,o=>{n&&s===o._score?n.push(o.provider):(s=o._score,n=[o.provider],t.push(n))}),t}_orderedForEach(e,t,n){this._updateScores(e,t);for(const s of this._entries)s._score>0&&n(s)}_lastCandidate;_updateScores(e,t){const n=this._notebookInfoResolver?.(e.uri),s=n?new s$(e.uri,e.getLanguageId(),n.uri,n.type,t):new s$(e.uri,e.getLanguageId(),void 0,void 0,t);if(!this._lastCandidate?.equals(s)){this._lastCandidate=s;for(const o of this._entries)if(o._score=kH(o.selector,s.uri,s.languageId,fX(e),s.notebookUri,s.notebookType),o9(o.selector)&&o._score>0)if(t)o._score=0;else{for(const r of this._entries)r._score=0;o._score=1e3;break}this._entries.sort(Iae._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:Bw(e.selector)&&!Bw(t.selector)?1:!Bw(e.selector)&&Bw(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function Bw(i){return typeof i=="string"?!1:Array.isArray(i)?i.some(Bw):!!i.isBuiltin}$R(Bw,"isBuiltinSelector");const i7e=De("ILanguageFeaturesService");var n7e=Object.defineProperty,su=(i,e)=>n7e(i,"name",{value:e,configurable:!0});class r9{static{su(this,"MonospaceLineBreaksComputerFactory")}static create(e){return new r9(e.get(k.wordWrapBreakBeforeCharacters),e.get(k.wordWrapBreakAfterCharacters))}classifier;constructor(e,t){this.classifier=new s7e(e,t)}createLineBreaksComputer(e,t,n,s,o){const r=[],a=[],l=[];return{addRequest:su((c,d,h)=>{r.push(c),a.push(d),l.push(h)},"addRequest"),finalize:su(()=>{const c=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,d=[];for(let h=0,u=r.length;h<u;h++){const f=a[h],p=l[h];p&&!p.injectionOptions&&!f?d[h]=Tae(this.classifier,p,r[h],t,n,c,s,o):d[h]=Aae(this.classifier,r[h],f,t,n,c,s,o)}return M4.length=0,B4.length=0,d},"finalize")}}}class s7e extends eD{static{su(this,"WrappingCharacterClassifier")}constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let M4=[],B4=[];function Tae(i,e,t,n,s,o,r,a){if(s===-1)return null;const l=t.length;if(l<=1)return null;const c=a==="keepAll",d=e.breakOffsets,h=e.breakOffsetsVisibleColumn,u=a9(t,n,s,o,r),f=s-u,p=M4,m=B4;let _=0,w=0,v=0,b=s;const C=d.length;let S=0;if(S>=0){let D=Math.abs(h[S]-b);for(;S+1<C;){const T=Math.abs(h[S+1]-b);if(T>=D)break;D=T,S++}}for(;S<C;){let D=S<0?0:d[S],T=S<0?0:h[S];w>D&&(D=w,T=v);let I=0,R=0,G=0,K=0;if(T<=b){let we=T,re=D===0?A.Null:t.charCodeAt(D-1),le=D===0?0:i.get(re),Ee=!0;for(let Se=D;Se<l;Se++){const ue=Se,fe=t.charCodeAt(Se);let $e,Ze;if(Ds(fe)?(Se++,$e=0,Ze=2):($e=i.get(fe),Ze=RC(fe,we,n,o)),ue>w&&Jk(re,le,fe,$e,c)&&(I=ue,R=we),we+=Ze,we>b){ue>w?(G=ue,K=we-Ze):(G=Se+1,K=we),we-R>f&&(I=0),Ee=!1;break}re=fe,le=$e}if(Ee){_>0&&(p[_]=d[d.length-1],m[_]=h[d.length-1],_++);break}}if(I===0){let we=T,re=t.charCodeAt(D),le=i.get(re),Ee=!1;for(let Se=D-1;Se>=w;Se--){const ue=Se+1,fe=t.charCodeAt(Se);if(fe===A.Tab){Ee=!0;break}let $e,Ze;if(Db(fe)?(Se--,$e=0,Ze=2):($e=i.get(fe),Ze=Kg(fe)?o:1),we<=b){if(G===0&&(G=ue,K=we),we<=b-f)break;if(Jk(fe,$e,re,le,c)){I=ue,R=we;break}}we-=Ze,re=fe,le=$e}if(I!==0){const Se=f-(K-R);if(Se<=n){const ue=t.charCodeAt(G);let fe;Ds(ue)?fe=2:fe=RC(ue,K,n,o),Se-fe<0&&(I=0)}}if(Ee){S--;continue}}if(I===0&&(I=G,R=K),I<=w){const we=t.charCodeAt(w);Ds(we)?(I=w+2,R=v+2):(I=w+1,R=v+RC(we,v,n,o))}for(w=I,p[_]=I,v=R,m[_]=R,_++,b=R+f;S<0||S<C&&h[S]<R;)S++;let X=Math.abs(h[S]-b);for(;S+1<C;){const we=Math.abs(h[S+1]-b);if(we>=X)break;X=we,S++}}return _===0?null:(p.length=_,m.length=_,M4=e.breakOffsets,B4=e.breakOffsetsVisibleColumn,e.breakOffsets=p,e.breakOffsetsVisibleColumn=m,e.wrappedTextIndentLength=u,e)}su(Tae,"createLineBreaksFromPreviousLineBreaks");function Aae(i,e,t,n,s,o,r,a){const l=Fc.applyInjectedText(e,t);let c,d;if(t&&t.length>0?(c=t.map(R=>R.options),d=t.map(R=>R.column-1)):(c=null,d=null),s===-1)return c?new w0(d,c,[l.length],[],0):null;const h=l.length;if(h<=1)return c?new w0(d,c,[l.length],[],0):null;const u=a==="keepAll",f=a9(l,n,s,o,r),p=s-f,m=[],_=[];let w=0,v=0,b=0,C=s,S=l.charCodeAt(0),D=i.get(S),T=RC(S,0,n,o),I=1;Ds(S)&&(T+=1,S=l.charCodeAt(1),D=i.get(S),I++);for(let R=I;R<h;R++){const G=R,K=l.charCodeAt(R);let X,we;Ds(K)?(R++,X=0,we=2):(X=i.get(K),we=RC(K,T,n,o)),Jk(S,D,K,X,u)&&(v=G,b=T),T+=we,T>C&&((v===0||T-b>p)&&(v=G,b=T-we),m[w]=v,_[w]=b,w++,C=b+p,v=0),S=K,D=X}return w===0&&(!t||t.length===0)?null:(m[w]=h,_[w]=T,new w0(d,c,m,_,f))}su(Aae,"createLineBreaks");function RC(i,e,t,n){return i===A.Tab?t-e%t:Kg(i)||i<32?n:1}su(RC,"computeCharWidth");function F4(i,e){return e-i%e}su(F4,"tabCharacterWidth");function Jk(i,e,t,n,s){return t!==A.Space&&(e===2&&n!==2||e!==1&&n===1||!s&&e===3&&n!==2||!s&&n===3&&e!==1)}su(Jk,"canBreak");function a9(i,e,t,n,s){let o=0;if(s!==nb.None){const r=ia(i);if(r!==-1){for(let l=0;l<r;l++){const c=i.charCodeAt(l)===A.Tab?F4(o,e):1;o+=c}const a=s===nb.DeepIndent?2:s===nb.Indent?1:0;for(let l=0;l<a;l++){const c=F4(o,e);o+=c}o+n>t&&(o=0)}}return o}su(a9,"computeWrappedTextIndentLength");var o7e=Object.defineProperty,r7e=(i,e)=>o7e(i,"name",{value:e,configurable:!0});class o${static{r7e(this,"CursorContext")}_cursorContextBrand=void 0;model;viewModel;coordinatesConverter;cursorConfig;constructor(e,t,n,s){this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=s}}var a7e=Object.defineProperty,l7e=(i,e)=>a7e(i,"name",{value:e,configurable:!0});class eN{static{l7e(this,"Cursor")}modelState;viewState;_selTrackedRange;_trackSelection;constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new no(new V(1,1,1,1),Ga.Simple,0,new j(1,1),0),new no(new V(1,1,1,1),Ga.Simple,0,new j(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,hs.AlwaysGrowsWhenTypingAtEdges))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,hs.AlwaysGrowsWhenTypingAtEdges)}asCursorState(){return new Tt(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?St.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):St.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,s){return t.equals(n)?s:e.normalizePosition(t,In.None)}static _validateViewState(e,t){const n=t.position,s=t.selectionStart.getStartPosition(),o=t.selectionStart.getEndPosition(),r=e.normalizePosition(n,In.None),a=this._validatePositionWithCache(e,s,n,r),l=this._validatePositionWithCache(e,o,s,a);return n.equals(r)&&s.equals(a)&&o.equals(l)?t:new no(V.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+s.column-a.column,r,t.leftoverVisibleColumns+n.column-r.column)}_setState(e,t,n){if(n&&(n=eN._validateViewState(e.viewModel,n)),t){const s=e.model.validateRange(t.selectionStart),o=t.selectionStart.equalsRange(s)?t.selectionStartLeftoverVisibleColumns:0,r=e.model.validatePosition(t.position),a=t.position.equals(r)?t.leftoverVisibleColumns:0;t=new no(s,t.selectionStartKind,o,r,a)}else{if(!n)return;const s=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),o=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new no(s,n.selectionStartKind,n.selectionStartLeftoverVisibleColumns,o,n.leftoverVisibleColumns)}if(n){const s=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),o=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new no(s,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}else{const s=e.coordinatesConverter.convertModelPositionToViewPosition(new j(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),o=e.coordinatesConverter.convertModelPositionToViewPosition(new j(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),r=new V(s.lineNumber,s.column,o.lineNumber,o.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new no(r,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}var c7e=Object.defineProperty,d7e=(i,e)=>c7e(i,"name",{value:e,configurable:!0});class r${static{d7e(this,"CursorCollection")}context;cursors;lastAddedCursorIndex;constructor(e){this.context=e,this.cursors=[new eN(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return eG(this.cursors,zl(e=>e.viewState.position,j.compare)).viewState.position}getBottomMostViewPosition(){return J$(this.cursors,zl(e=>e.viewState.position,j.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(Tt.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,n=e.length;if(t<n){const s=n-t;for(let o=0;o<s;o++)this._addSecondaryCursor()}else if(t>n){const s=t-n;for(let o=0;o<s;o++)this._removeSecondaryCursor(this.cursors.length-2)}for(let s=0;s<n;s++)this.cursors[s+1].setState(this.context,e[s].modelState,e[s].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new eN(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let n=0,s=e.length;n<s;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort(zl(n=>n.selection,V.compareRangesUsingStarts));for(let n=0;n<t.length-1;n++){const s=t[n],o=t[n+1],r=s.selection,a=o.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||r.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(r.getEndPosition()):l=a.getStartPosition().isBefore(r.getEndPosition()),l){const c=s.index<o.index?n:n+1,d=s.index<o.index?n+1:n,h=t[d].index,u=t[c].index,f=t[d].selection,p=t[c].selection;if(!f.equalsSelection(p)){const m=f.plusRange(p),_=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,w=p.selectionStartLineNumber===p.startLineNumber&&p.selectionStartColumn===p.startColumn;let v;h===this.lastAddedCursorIndex?(v=_,this.lastAddedCursorIndex=u):v=w;let b;v?b=new St(m.startLineNumber,m.startColumn,m.endLineNumber,m.endColumn):b=new St(m.endLineNumber,m.endColumn,m.startLineNumber,m.startColumn),t[c].selection=b;const C=Tt.fromModelSelection(b);e[u].setState(this.context,C.modelState,C.viewState)}for(const m of t)m.index>h&&m.index--;e.splice(h,1),t.splice(d,1),this._removeSecondaryCursor(h-1),n--}}}}var h7e=Object.defineProperty,Oa=(i,e)=>h7e(i,"name",{value:e,configurable:!0});class u7e extends ${static{Oa(this,"ViewModelEventDispatcher")}_onEvent=this._register(new x);onEvent=this._onEvent.event;_eventHandlers;_viewEventQueue;_isConsumingViewEventQueue;_collector;_collectorCnt;_outgoingEvents;constructor(){super(),this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++){const s=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(s){this._outgoingEvents[t]=s;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new g7e),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}class g7e{static{Oa(this,"ViewModelEventsCollector")}viewEvents;outgoingEvents;constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}var Ha=(i=>(i[i.ContentSizeChanged=0]="ContentSizeChanged",i[i.FocusChanged=1]="FocusChanged",i[i.ScrollChanged=2]="ScrollChanged",i[i.ViewZonesChanged=3]="ViewZonesChanged",i[i.HiddenAreasChanged=4]="HiddenAreasChanged",i[i.ReadOnlyEditAttempt=5]="ReadOnlyEditAttempt",i[i.CursorStateChanged=6]="CursorStateChanged",i[i.ModelDecorationsChanged=7]="ModelDecorationsChanged",i[i.ModelLanguageChanged=8]="ModelLanguageChanged",i[i.ModelLanguageConfigurationChanged=9]="ModelLanguageConfigurationChanged",i[i.ModelContentChanged=10]="ModelContentChanged",i[i.ModelOptionsChanged=11]="ModelOptionsChanged",i[i.ModelTokensChanged=12]="ModelTokensChanged",i))(Ha||{});class l9{static{Oa(this,"ContentSizeChangedEvent")}kind=0;_oldContentWidth;_oldContentHeight;contentWidth;contentHeight;contentWidthChanged;contentHeightChanged;constructor(e,t,n,s){this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=s,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new l9(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class c9{static{Oa(this,"FocusChangedEvent")}kind=1;oldHasFocus;hasFocus;constructor(e,t){this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new c9(this.oldHasFocus,e.hasFocus)}}class d9{static{Oa(this,"ScrollChangedEvent")}kind=2;_oldScrollWidth;_oldScrollLeft;_oldScrollHeight;_oldScrollTop;scrollWidth;scrollLeft;scrollHeight;scrollTop;scrollWidthChanged;scrollLeftChanged;scrollHeightChanged;scrollTopChanged;constructor(e,t,n,s,o,r,a,l){this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=s,this.scrollWidth=o,this.scrollLeft=r,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new d9(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class f7e{static{Oa(this,"ViewZonesChangedEvent")}kind=3;constructor(){}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class p7e{static{Oa(this,"HiddenAreasChangedEvent")}kind=4;constructor(){}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class tN{static{Oa(this,"CursorStateChangedEvent")}kind=6;oldSelections;selections;oldModelVersionId;modelVersionId;source;reason;reachedMaxCursorCount;constructor(e,t,n,s,o,r,a){this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=s,this.source=o,this.reason=r,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,s=t.length;if(n!==s)return!1;for(let o=0;o<n;o++)if(!e[o].equalsSelection(t[o]))return!1;return!0}isNoOp(){return tN._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new tN(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class m7e{static{Oa(this,"ReadOnlyEditAttemptEvent")}kind=5;constructor(){}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class _7e{constructor(e){this.event=e}static{Oa(this,"ModelDecorationsChangedEvent")}kind=7;isNoOp(){return!1}attemptToMerge(e){return null}}class b7e{constructor(e){this.event=e}static{Oa(this,"ModelLanguageChangedEvent")}kind=8;isNoOp(){return!1}attemptToMerge(e){return null}}class v7e{constructor(e){this.event=e}static{Oa(this,"ModelLanguageConfigurationChangedEvent")}kind=9;isNoOp(){return!1}attemptToMerge(e){return null}}class w7e{constructor(e){this.event=e}static{Oa(this,"ModelContentChangedEvent")}kind=10;isNoOp(){return!1}attemptToMerge(e){return null}}class C7e{constructor(e){this.event=e}static{Oa(this,"ModelOptionsChangedEvent")}kind=11;isNoOp(){return!1}attemptToMerge(e){return null}}class y7e{constructor(e){this.event=e}static{Oa(this,"ModelTokensChangedEvent")}kind=12;isNoOp(){return!1}attemptToMerge(e){return null}}var S7e=Object.defineProperty,kc=(i,e)=>S7e(i,"name",{value:e,configurable:!0});class E7e extends ${static{kc(this,"CursorsController")}_model;_knownModelVersionId;_viewModel;_coordinatesConverter;context;_cursors;_hasFocus;_isHandling;_compositionState;_columnSelectData;_autoClosedActions;_prevEditOperationType;constructor(e,t,n,s){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new o$(this._model,this._viewModel,this._coordinatesConverter,s),this._cursors=new r$(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=Zi.Other}dispose(){this._cursors.dispose(),this._autoClosedActions=ii(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new o$(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",ri.NotSet,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,s){let o=!1;const r=this.context.cursorConfig.multiCursorLimit;s!==null&&s.length>r&&(s=s.slice(0,r),o=!0);const a=A0.from(this._model,this);return this._cursors.setStates(s),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,a,o)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,n,s,o,r){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=V.fromPositions(a[0],a[0]),e.emitViewEvent(new C0(t,n,l,c,s,o,r))}revealPrimary(e,t,n,s,o,r){const l=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new C0(t,n,null,l,s,o,r))}saveState(){const e=[],t=this._cursors.getSelections();for(let n=0,s=t.length;n<s;n++){const o=t[n];e.push({inSelectionMode:!o.isEmpty(),selectionStart:{lineNumber:o.selectionStartLineNumber,column:o.selectionStartColumn},position:{lineNumber:o.positionLineNumber,column:o.positionColumn}})}return e}restoreState(e,t){const n=[];for(let s=0,o=t.length;s<o;s++){const r=t[s];let a=1,l=1;r.position&&r.position.lineNumber&&(a=r.position.lineNumber),r.position&&r.position.column&&(l=r.position.column);let c=a,d=l;r.selectionStart&&r.selectionStart.lineNumber&&(c=r.selectionStart.lineNumber),r.selectionStart&&r.selectionStart.column&&(d=r.selectionStart.column),n.push({selectionStartLineNumber:c,selectionStartColumn:d,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",ri.NotSet,Tt.fromModelSelections(n)),this.revealAll(e,"restoreState",!1,ei.Simple,!0,ot.Immediate)}onModelContentChanged(e,t){if(t instanceof aX){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",ri.NotSet,this.getCursorStates())}finally{this._isHandling=!1}}else{const n=t.rawContentChangedEvent;if(this._knownModelVersionId=n.versionId,this._isHandling)return;const s=n.containsEvent(qu.Flush);if(this._prevEditOperationType=Zi.Other,s)this._cursors.dispose(),this._cursors=new r$(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",ri.ContentFlush,null,!1);else if(this._hasFocus&&n.resultingSelection&&n.resultingSelection.length>0){const o=Tt.fromModelSelections(n.resultingSelection);this.setStates(e,"modelChange",n.isUndoing?ri.Undo:n.isRedoing?ri.Redo:ri.RecoverFromMarkers,o)&&this.revealAll(e,"modelChange",!1,ei.Simple,!0,ot.Smooth)}else{const o=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",ri.RecoverFromMarkers,Tt.fromModelSelections(o))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}getPosition(){return this._cursors.getPrimaryCursor().modelState.position}setSelections(e,t,n,s){this.setStates(e,t,s,Tt.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const n=[],s=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:hs.NeverGrowsWhenTypingAtEdges}}),s.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:hs.NeverGrowsWhenTypingAtEdges}});const o=this._model.deltaDecorations([],n),r=this._model.deltaDecorations([],s);this._autoClosedActions.push(new a$(this._model,o,r))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=L7e.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const n=[],s=[];for(let o=0;o<e.commands.length;o++){const r=e.commands[o];r instanceof G2&&r.enclosingRange&&r.closeCharacterRange&&(n.push(r.closeCharacterRange),s.push(r.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,s),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,s,o){const r=A0.from(this._model,this);if(r.equals(s))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new aFe(l,a,n)),!s||s.cursorState.length!==r.cursorState.length||r.cursorState.some((c,d)=>!c.modelState.equals(s.cursorState[d].modelState))){const c=s?s.cursorState.map(h=>h.modelState.selection):null,d=s?s.modelVersionId:0;e.emitOutgoingEvent(new tN(c,a,d,r.modelVersionId,t||"keyboard",n,o))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let n=0,s=e.length;n<s;n++){const o=e[n];if(!o.text||o.text.indexOf(`
`)>=0)return null;const r=o.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!r)return null;const a=r[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,d=o.text.length-r[2].length-1,h=o.text.lastIndexOf(c,d-1);if(h===-1)return null;t.push([h,d])}return t}executeEdits(e,t,n,s){let o=null;t==="snippet"&&(o=this._findAutoClosingPairs(n)),o&&(n[0]._isTracked=!0);const r=[],a=[],l=this._model.pushEditOperations(this.getSelections(),n,c=>{if(o)for(let h=0,u=o.length;h<u;h++){const[f,p]=o[h],m=c[h],_=m.range.startLineNumber,w=m.range.startColumn-1+f,v=m.range.startColumn-1+p;r.push(new V(_,v+1,_,v+2)),a.push(new V(_,w+1,_,v+2))}const d=s(c);return d&&(this._isHandling=!0),d});l&&(this._isHandling=!1,this.setSelections(e,t,l,ri.NotSet)),r.length>0&&this._pushAutoClosedAction(r,a)}_executeEdit(e,t,n,s=ri.NotSet){if(this.context.cursorConfig.readOnly)return;const o=A0.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(r){Kt(r)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,s,o,!1)&&this.revealAll(t,n,!1,ei.Simple,!0,ot.Smooth)}getAutoClosedCharacters(){return a$.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new x0(this._model,this.getSelections())}endComposition(e,t){const n=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(y_.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,n,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const s=t.length;let o=0;for(;o<s;){const r=FN(t,o),a=t.substr(o,r);this._executeEditOperation(y_.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),o+=r}}else this._executeEditOperation(y_.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,s,o,r){if(t.length===0&&n===0&&s===0){if(o!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new St(c.lineNumber,c.column+o,c.lineNumber,c.column+o)});this.setSelections(e,r,a,ri.NotSet)}return}this._executeEdit(()=>{this._executeEditOperation(y_.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,s,o))},e,r)}paste(e,t,n,s,o){this._executeEdit(()=>{this._executeEditOperation(y_.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,s||[]))},e,o,ri.Paste)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(tv.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new aa(Zi.Other,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new aa(Zi.Other,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}class A0{constructor(e,t){this.modelVersionId=e,this.cursorState=t}static{kc(this,"CursorModelState")}static from(e,t){return new A0(e.getVersionId(),t.getCursorStates())}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class a${static{kc(this,"AutoClosedAction")}static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}_model;_autoClosedCharactersDecorations;_autoClosedEnclosingDecorations;constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){const t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const s=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(s&&(t.push(s),s.startLineNumber!==s.endLineNumber))return!1}t.sort(V.compareRangesUsingStarts),e.sort(V.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}class L7e{static{kc(this,"CommandExecutor")}static executeCommands(e,t,n){const s={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(s,n);for(let r=0,a=s.trackedRanges.length;r<a;r++)s.model._setTrackedRange(s.trackedRanges[r],null,hs.AlwaysGrowsWhenTypingAtEdges);return o}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const s=n.operations,o=this._getLoserCursorMap(s);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const r=[];for(let c=0,d=s.length;c<d;c++)o.hasOwnProperty(s[c].identifier.major.toString())||r.push(s[c]);n.hadTrackedEditOperation&&r.length>0&&(r[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,r,c=>{const d=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f]=[];for(const f of c)f.identifier&&d[f.identifier.major].push(f);const h=kc((f,p)=>f.identifier.minor-p.identifier.minor,"minorBasedSorter"),u=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f].length>0?(d[f].sort(h),u[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:kc(()=>d[f],"getInverseEditOperations"),getTrackedSelection:kc(p=>{const m=parseInt(p,10),_=e.model._getTrackedRange(e.trackedRanges[m]);return e.trackedRangesDirection[m]===uP.LTR?new St(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn):new St(_.endLineNumber,_.endColumn,_.startLineNumber,_.startColumn)},"getTrackedSelection")})):u[f]=e.selectionsBefore[f];return u});a||(a=e.selectionsBefore);const l=[];for(const c in o)o.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,d)=>d-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],s=!1;for(let o=0,r=t.length;o<r;o++){const a=t[o];if(a){const l=this._getEditOperationsFromCommand(e,o,a);n=n.concat(l.operations),s=s||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:s}}static _getEditOperationsFromCommand(e,t,n){const s=[];let o=0;const r=kc((h,u,f=!1)=>{V.isEmpty(h)&&u===""||s.push({identifier:{major:t,minor:o++},range:h,text:u,forceMoveMarkers:f,isAutoWhitespaceEdit:n.insertsAutoWhitespace})},"addEditOperation");let a=!1;const d={addEditOperation:r,addTrackedEditOperation:kc((h,u,f)=>{a=!0,r(h,u,f)},"addTrackedEditOperation"),trackSelection:kc((h,u)=>{const f=St.liftSelection(h);let p;if(f.isEmpty())if(typeof u=="boolean")u?p=hs.GrowsOnlyWhenTypingBefore:p=hs.GrowsOnlyWhenTypingAfter;else{const w=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===w?p=hs.GrowsOnlyWhenTypingBefore:p=hs.GrowsOnlyWhenTypingAfter}else p=hs.NeverGrowsWhenTypingAtEdges;const m=e.trackedRanges.length,_=e.model._setTrackedRange(null,f,p);return e.trackedRanges[m]=_,e.trackedRangesDirection[m]=f.getDirection(),m.toString()},"trackSelection")};try{n.getEditOperations(e.model,d)}catch(h){return Kt(h),{operations:[],hadTrackedEditOperation:!1}}return{operations:s,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,s)=>-V.compareRangesUsingEnds(n.range,s.range));const t={};for(let n=1;n<e.length;n++){const s=e[n-1],o=e[n];if(V.getStartPosition(s.range).isBefore(V.getEndPosition(o.range))){let r;s.identifier.major>o.identifier.major?r=s.identifier.major:r=o.identifier.major,t[r.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===r&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}class D7e{constructor(e,t,n){this.text=e,this.startSelection=t,this.endSelection=n}static{kc(this,"CompositionLineState")}}class x0{static{kc(this,"CompositionState")}_original;static _capture(e,t){const n=[];for(const s of t){if(s.startLineNumber!==s.endLineNumber)return null;n.push(new D7e(e.getLineContent(s.startLineNumber),s.startColumn-1,s.endColumn-1))}return n}constructor(e,t){this._original=x0._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const n=x0._capture(e,t);if(!n||this._original.length!==n.length)return null;const s=[];for(let o=0,r=this._original.length;o<r;o++)s.push(x0._deduceOutcome(this._original[o],n[o]));return s}static _deduceOutcome(e,t){const n=Math.min(e.startSelection,t.startSelection,BA(e.text,t.text)),s=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,FA(e.text,t.text)),o=e.text.substring(n,e.text.length-s),r=t.text.substring(n,t.text.length-s);return new wHe(o,e.startSelection-n,e.endSelection-n,r,t.startSelection-n,t.endSelection-n)}}var I7e=Object.defineProperty,xy=(i,e)=>I7e(i,"name",{value:e,configurable:!0});const V4={getInitialState:xy(()=>hQ,"getInitialState"),tokenizeEncoded:xy((i,e,t)=>y6(wZ.Null,t),"tokenizeEncoded")};function T7e(i,e,t){return iN(e,i.languageIdCodec,lu.get(t)||V4)}xy(T7e,"tokenizeToStringSync");async function A7e(i,e,t){if(!t)return iN(e,i.languageIdCodec,V4);const n=await lu.getOrCreate(t);return iN(e,i.languageIdCodec,n||V4)}xy(A7e,"tokenizeToString");function xae(i,e,t,n,s,o,r){let a="<div>",l=n,c=0,d=!0;for(let h=0,u=e.getCount();h<u;h++){const f=e.getEndOffset(h);if(f<=n)continue;let p="";for(;l<f&&l<s;l++){const m=i.charCodeAt(l);switch(m){case A.Tab:{let _=o-(l+c)%o;for(c+=_-1;_>0;)r&&d?(p+="&#160;",d=!1):(p+=" ",d=!0),_--;break}case A.LessThan:p+="&lt;",d=!1;break;case A.GreaterThan:p+="&gt;",d=!1;break;case A.Ampersand:p+="&amp;",d=!1;break;case A.Null:p+="&#00;",d=!1;break;case A.UTF8_BOM:case A.LINE_SEPARATOR:case A.PARAGRAPH_SEPARATOR:case A.NEXT_LINE:p+="",d=!1;break;case A.CarriageReturn:p+="&#8203",d=!1;break;case A.Space:r&&d?(p+="&#160;",d=!1):(p+=" ",d=!0);break;default:p+=String.fromCharCode(m),d=!1}}if(a+=`<span style="${e.getInlineStyle(h,t)}">${p}</span>`,f>s||l>=s)break}return a+="</div>",a}xy(xae,"tokenizeLineToHTML");function iN(i,e,t){let n='<div class="monaco-tokenized-source">';const s=xL(i);let o=t.getInitialState();for(let r=0,a=s.length;r<a;r++){const l=s[r];r>0&&(n+="<br/>");const c=t.tokenizeEncoded(l,!0,o);ds.convertToEndOffset(c.tokens,l.length);const h=new ds(c.tokens,l,e).inflate();let u=0;for(let f=0,p=h.getCount();f<p;f++){const m=h.getClassName(f),_=h.getEndOffset(f);n+=`<span class="${m}">${Y_(l.substring(u,_))}</span>`,u=_}o=c.endState}return n+="</div>",n}xy(iN,"_tokenizeToString");var x7e=Object.defineProperty,S_=(i,e)=>x7e(i,"name",{value:e,configurable:!0});class k7e{static{S_(this,"PendingChanges")}_hasPending;_inserts;_changes;_removes;constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,s=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,s)}}class N7e{static{S_(this,"EditorWhitespace")}id;afterLineNumber;ordinal;height;minWidth;prefixSum;constructor(e,t,n,s,o){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=s,this.minWidth=o,this.prefixSum=0}}let P7e=class W4{static{S_(this,"LinesLayout")}static INSTANCE_COUNT=0;_instanceId;_pendingChanges;_lastWhitespaceId;_arr;_prefixSumValidIndex;_minWidth;_lineCount;_lineHeight;_paddingTop;_paddingBottom;constructor(e,t,n,s){this._instanceId=f5(++W4.INSTANCE_COUNT),this._pendingChanges=new k7e,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=s}static findInsertionIndex(e,t,n){let s=0,o=e.length;for(;s<o;){const r=s+o>>>1;t===e[r].afterLineNumber?n<e[r].ordinal?o=r:s=r+1:t<e[r].afterLineNumber?o=r:s=r+1}return s}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:S_((s,o,r,a)=>{t=!0,s=s|0,o=o|0,r=r|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new N7e(l,s,o,r,a)),l},"insertWhitespace"),changeOneWhitespace:S_((s,o,r)=>{t=!0,o=o|0,r=r|0,this._pendingChanges.change({id:s,newAfterLineNumber:o,newHeight:r})},"changeOneWhitespace"),removeWhitespace:S_(s=>{t=!0,this._pendingChanges.remove({id:s})},"removeWhitespace")})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of n){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const s=new Set;for(const l of n)s.add(l.id);const o=new Map;for(const l of t)o.set(l.id,l);const r=S_(l=>{const c=[];for(const d of l)if(!s.has(d.id)){if(o.has(d.id)){const h=o.get(d.id);d.afterLineNumber=h.newAfterLineNumber,d.height=h.newHeight}c.push(d)}return c},"applyRemoveAndChange"),a=r(this._arr).concat(r(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=W4.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,s=t.length;n<s;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const s=this._findWhitespaceIndex(e);if(s!==-1&&(this._arr[s].height!==n&&(this._arr[s].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,s-1)),this._arr[s].afterLineNumber!==t)){const o=this._arr[s];this._removeWhitespace(s),o.afterLineNumber=t,this._insertWhitespace(o)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,s=this._arr.length;n<s;n++){const o=this._arr[n].afterLineNumber;e<=o&&o<=t?this._arr[n].afterLineNumber=e-1:o>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,s=this._arr.length;n<s;n++){const o=this._arr[n].afterLineNumber;e<=o&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,s=t.length-1;for(;n<=s;){const r=(s-n|0)/2|0,a=n+r|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else s=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let n;e>1?n=this._lineHeight*(e-1):n=0;const s=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return n+s+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const n=this._lineHeight*e,s=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return n+s+this._paddingTop}hasWhitespace(){return this._checkPendingChanges(),this.getWhitespacesCount()>0}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let s=1,o=t;for(;s<o;){const r=(s+o)/2|0,a=this.getVerticalOffsetForLineNumber(r)|0;if(e>=a+n)s=r+1;else{if(e>=a)return r;o=r}}return s>t?t:s}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,s=this.getLineNumberAtOrAfterVerticalOffset(e)|0,o=this.getVerticalOffsetForLineNumber(s)|0;let r=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(s)|0;const l=this.getWhitespacesCount()|0;let c,d;a===-1?(a=l,d=r+1,c=0):(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let h=o,u=h;const f=5e5;let p=0;o>=f&&(p=Math.floor(o/f)*f,p=Math.floor(p/n)*n,u-=p);const m=[],_=e+(t-e)/2;let w=-1;for(let S=s;S<=r;S++){if(w===-1){const D=h,T=h+n;(D<=_&&_<T||D>_)&&(w=S)}for(h+=n,m[S-s]=u,u+=n;d===S;)u+=c,h+=c,a++,a>=l?d=r+1:(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(h>=t){r=S;break}}w===-1&&(w=r);const v=this.getVerticalOffsetForLineNumber(r)|0;let b=s,C=r;return b<C&&o<e&&b++,b<C&&v+n>t&&C--,{bigNumbersDelta:p,startLineNumber:s,endLineNumber:r,relativeVerticalOffset:m,centeredLineNumber:w,completelyVisibleStartLineNumber:b,completelyVisibleEndLineNumber:C,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let s;return e>0?s=this.getWhitespacesAccumulatedHeight(e-1):s=0,n+s+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const s=this.getVerticalOffsetForWhitespaceIndex(n),o=this.getHeightForWhitespaceIndex(n);if(e>=s+o)return-1;for(;t<n;){const r=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(e>=a+l)t=r+1;else{if(e>=a)return r;n=r}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const s=this.getHeightForWhitespaceIndex(t),o=this.getIdForWhitespaceIndex(t),r=this.getAfterLineNumberForWhitespaceIndex(t);return{id:o,afterLineNumber:r,verticalOffset:n,height:s}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),s=this.getWhitespacesCount()-1;if(n<0)return[];const o=[];for(let r=n;r<=s;r++){const a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(a>=t)break;o.push({id:this.getIdForWhitespaceIndex(r),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(r),verticalOffset:a,height:l})}return o}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}};var R7e=Object.defineProperty,h9=(i,e)=>R7e(i,"name",{value:e,configurable:!0});const O7e=125;class O1{static{h9(this,"EditorScrollDimensions")}width;contentWidth;scrollWidth;height;contentHeight;scrollHeight;constructor(e,t,n,s){e=e|0,t=t|0,n=n|0,s=s|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),s<0&&(s=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=s,this.scrollHeight=Math.max(n,s)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class M7e extends ${static{h9(this,"EditorScrollable")}_scrollable;_dimensions;onDidScroll;_onDidContentSizeChange=this._register(new x);onDidContentSizeChange=this._onDidContentSizeChange.event;constructor(e,t){super(),this._dimensions=new O1(0,0,0,0),this._scrollable=this._register(new qL({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,s=t.contentHeight!==e.contentHeight;(n||s)&&this._onDidContentSizeChange.fire(new l9(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class B7e extends ${static{h9(this,"ViewLayout")}_configuration;_linesLayout;_maxLineWidth;_overlayWidgetsMinWidth;_scrollable;onDidScroll;onDidContentSizeChange;constructor(e,t,n){super(),this._configuration=e;const s=this._configuration.options,o=s.get(k.layoutInfo),r=s.get(k.padding);this._linesLayout=new P7e(t,s.get(k.lineHeight),r.top,r.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new M7e(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new O1(o.contentWidth,0,o.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(k.smoothScrolling)?O7e:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(k.lineHeight)&&this._linesLayout.setLineHeight(t.get(k.lineHeight)),e.hasChanged(k.padding)){const n=t.get(k.padding);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(k.layoutInfo)){const n=t.get(k.layoutInfo),s=n.contentWidth,o=n.height,r=this._scrollable.getScrollDimensions(),a=r.contentWidth;this._scrollable.setScrollDimensions(new O1(s,r.contentWidth,o,this._getContentHeight(s,o,a)))}else this._updateHeight();e.hasChanged(k.smoothScrolling)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const s=this._configuration.options.get(k.scrollbar);return s.horizontal===Bi.Hidden||e>=t?0:s.horizontalScrollbarSize}_getContentHeight(e,t,n){const s=this._configuration.options;let o=this._linesLayout.getLinesTotalHeight();return s.get(k.scrollBeyondLastLine)?o+=Math.max(0,t-s.get(k.lineHeight)-s.get(k.padding).bottom):s.get(k.scrollbar).ignoreHorizontalScrollbarInContentHeight||(o+=this._getHorizontalScrollbarHeight(e,n)),o}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,s=e.contentWidth;this._scrollable.setScrollDimensions(new O1(t,e.contentWidth,n,this._getContentHeight(t,n,s)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new fz(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new fz(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,n=e.get(k.wrappingInfo),s=e.get(k.fontInfo),o=e.get(k.layoutInfo);if(n.isViewportWrapping){const r=e.get(k.minimap);return t>o.contentWidth+s.typicalHalfwidthCharacterWidth&&r.enabled&&r.side==="right"?t+o.verticalScrollbarWidth:t}else{const r=e.get(k.scrollBeyondLastColumn)*s.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+r+o.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new O1(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),s=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-s,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===ot.Immediate?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}var F7e=Object.defineProperty,LS=(i,e)=>F7e(i,"name",{value:e,configurable:!0});function vA(i,e){return i===null?e?GR.INSTANCE:KR.INSTANCE:new V7e(i,e)}LS(vA,"createModelLineProjection");class V7e{static{LS(this,"ModelLineProjection")}_projectionData;_isVisible;constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,n){this._assertVisible();const s=n>0?this._projectionData.breakOffsets[n-1]:0,o=this._projectionData.breakOffsets[n];let r;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,d)=>new Fc(0,0,c+1,this._projectionData.injectionOptions[d],0));r=Fc.applyInjectedText(e.getLineContent(t),a).substring(s,o)}else r=e.getValueInRange({startLineNumber:t,startColumn:s+1,endLineNumber:t,endColumn:o+1});return n>0&&(r=H4(this._projectionData.wrappedTextIndentLength)+r),r}getViewLineLength(e,t,n){return this._assertVisible(),this._projectionData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this._assertVisible(),this._projectionData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this._assertVisible(),this._projectionData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){const s=new Array;return this.getViewLinesData(e,t,n,1,0,[!0],s),s[0]}getViewLinesData(e,t,n,s,o,r,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,d=l.injectionOptions;let h=null;if(c){h=[];let f=0,p=0;for(let m=0;m<l.getOutputLineCount();m++){const _=new Array;h[m]=_;const w=m>0?l.breakOffsets[m-1]:0,v=l.breakOffsets[m];for(;p<c.length;){const b=d[p].content.length,C=c[p]+f,S=C+b;if(C>v)break;if(w<S){const D=d[p];if(D.inlineClassName){const T=m>0?l.wrappedTextIndentLength:0,I=T+Math.max(C-w,0),R=T+Math.min(S-w,v-w);I!==R&&_.push(new vFe(I,R,D.inlineClassName,D.inlineClassNameAffectsLetterSpacing))}}if(S<=v)f+=b,p++;else break}}}let u;if(c){const f=[];for(let p=0;p<c.length;p++){const m=c[p],_=d[p].tokens;_?_.forEach((w,v)=>{f.push({offset:m,text:w.substring(d[p].content),tokenMetadata:v.metadata})}):f.push({offset:m,text:d[p].content,tokenMetadata:ds.defaultTokenMetadata})}u=e.tokenization.getLineTokens(t).withInserted(f)}else u=e.tokenization.getLineTokens(t);for(let f=n;f<n+s;f++){const p=o+f-n;if(!r[p]){a[p]=null;continue}a[p]=this._getViewLineData(u,h?h[f]:null,f)}}_getViewLineData(e,t,n){this._assertVisible();const s=this._projectionData,o=n>0?s.wrappedTextIndentLength:0,r=n>0?s.breakOffsets[n-1]:0,a=s.breakOffsets[n],l=e.sliceAndInflate(r,a,o);let c=l.getLineContent();n>0&&(c=H4(s.wrappedTextIndentLength)+c);const d=this._projectionData.getMinOutputOffset(n)+1,h=c.length+1,u=n+1<this.getViewLineCount(),f=n===0?0:s.breakOffsetsVisibleColumn[n-1];return new r2(c,u,d,h,f,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,n=In.None){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const n=this._projectionData.translateToOutputPosition(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n){const s=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,n).toPosition(s)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class GR{static{LS(this,"IdentityModelLineProjection")}static INSTANCE=new GR;constructor(){}isVisible(){return!0}setVisible(e){return e?this:KR.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){const s=e.tokenization.getLineTokens(t),o=s.getLineContent();return new r2(o,!1,1,o.length+1,0,s.inflate(),null)}getViewLinesData(e,t,n,s,o,r,a){if(!r[o]){a[o]=null;return}a[o]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new j(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}}class KR{static{LS(this,"HiddenModelLineProjection")}static INSTANCE=new KR;constructor(){}isVisible(){return!1}setVisible(e){return e?GR.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,s,o,r,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}const bM=[""];function H4(i){if(i>=bM.length)for(let e=1;e<=i;e++)bM[e]=kae(e);return bM[i]}LS(H4,"spaces");function kae(i){return new Array(i+1).join(" ")}LS(kae,"_makeSpaces");var W7e=Object.defineProperty,u9=(i,e)=>W7e(i,"name",{value:e,configurable:!0});class WGe{static{u9(this,"PrefixSumComputer")}values;prefixSum;prefixSumValidIndex;constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,t){e=Fm(e);const n=this.values,s=this.prefixSum,o=t.length;return o===0?!1:(this.values=new Uint32Array(n.length+o),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+o),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=Fm(e),t=Fm(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=Fm(e),t=Fm(t);const n=this.values,s=this.prefixSum;if(e>=n.length)return!1;const o=n.length-e;return t>=o&&(t=o),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=Fm(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,s=0,o=0,r=0;for(;t<=n;)if(s=t+(n-t)/2|0,o=this.prefixSum[s],r=o-this.values[s],e<r)n=s-1;else if(e>=o)t=s+1;else break;return new Nae(s,e-r)}}class H7e{static{u9(this,"ConstantTimePrefixSumComputer")}_values;_isValid;_validEndIndex;_prefixSum;_indexBySum;constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new Nae(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=Py(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const n=this._values[e],s=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=s+n;for(let o=0;o<n;o++)this._indexBySum[s+o]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class Nae{constructor(e,t){this.index=e,this.remainder=t,this.index=e,this.remainder=t}static{u9(this,"PrefixSumIndexOfResult")}_prefixSumIndexOfResultBrand=void 0}var U7e=Object.defineProperty,Wg=(i,e)=>U7e(i,"name",{value:e,configurable:!0});class z7e{static{Wg(this,"ViewModelLinesFromProjectedModel")}_editorId;model;_validModelVersionId;_domLineBreaksComputerFactory;_monospaceLineBreaksComputerFactory;fontInfo;tabSize;wrappingColumn;wrappingIndent;wordBreak;wrappingStrategy;modelLineProjections;projectedModelLineLineCounts;hiddenAreasDecorationIds;constructor(e,t,n,s,o,r,a,l,c,d){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=s,this.fontInfo=o,this.tabSize=r,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=d,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new $7e(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),s=this.model.getInjectedTextDecorations(this._editorId),o=n.length,r=this.createLineBreaksComputer(),a=new $g(Fc.fromDecorations(s));for(let m=0;m<o;m++){const _=a.takeWhile(w=>w.lineNumber===m+1);r.addRequest(n[m],_,t?t[m]:null)}const l=r.finalize(),c=[],d=this.hiddenAreasDecorationIds.map(m=>this.model.getDecorationRange(m)).sort(V.compareRangesUsingStarts);let h=1,u=0,f=-1,p=f+1<d.length?u+1:o+2;for(let m=0;m<o;m++){const _=m+1;_===p&&(f++,h=d[f].startLineNumber,u=d[f].endLineNumber,p=f+1<d.length?u+1:o+2);const w=_>=h&&_<=u,v=vA(l[m],!w);c[m]=v.getViewLineCount(),this.modelLineProjections[m]=v}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new H7e(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(u=>this.model.validateRange(u)),n=Pae(t),s=this.hiddenAreasDecorationIds.map(u=>this.model.getDecorationRange(u)).sort(V.compareRangesUsingStarts);if(n.length===s.length){let u=!1;for(let f=0;f<n.length;f++)if(!n[f].equalsRange(s[f])){u=!0;break}if(!u)return!1}const o=n.map(u=>({range:u,options:gs.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,o);const r=n;let a=1,l=0,c=-1,d=c+1<r.length?l+1:this.modelLineProjections.length+2,h=!1;for(let u=0;u<this.modelLineProjections.length;u++){const f=u+1;f===d&&(c++,a=r[c].startLineNumber,l=r[c].endLineNumber,d=c+1<r.length?l+1:this.modelLineProjections.length+2);let p=!1;if(f>=a&&f<=l?this.modelLineProjections[u].isVisible()&&(this.modelLineProjections[u]=this.modelLineProjections[u].setVisible(!1),p=!0):(h=!0,this.modelLineProjections[u].isVisible()||(this.modelLineProjections[u]=this.modelLineProjections[u].setVisible(!0),p=!0)),p){const m=this.modelLineProjections[u].getViewLineCount();this.projectedModelLineLineCounts.setValue(u,m)}}return h||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,s,o){const r=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===n,c=this.wrappingIndent===s,d=this.wordBreak===o;if(r&&a&&l&&c&&d)return!1;const h=r&&a&&!l&&c&&d;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=s,this.wordBreak=o;let u=null;if(h){u=[];for(let f=0,p=this.modelLineProjections.length;f<p;f++)u[f]=this.modelLineProjections[f].getProjectionData()}return this._constructLines(!1,u),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;const s=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,o=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new QV(s,o)}onModelLinesInserted(e,t,n,s){if(!e||e<=this._validModelVersionId)return null;const o=t>2&&!this.modelLineProjections[t-2].isVisible(),r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let d=0,h=s.length;d<h;d++){const u=vA(s[d],!o);l.push(u);const f=u.getViewLineCount();a+=f,c[d]=f}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new JV(r,r+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const s=t-1,o=this.modelLineProjections[s].getViewLineCount(),r=this.modelLineProjections[s].isVisible(),a=vA(n,r);this.modelLineProjections[s]=a;const l=this.modelLineProjections[s].getViewLineCount();let c=!1,d=0,h=-1,u=0,f=-1,p=0,m=-1;o>l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+l-1,p=h+1,m=p+(o-l)-1,c=!0):o<l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+o-1,u=h+1,f=u+(l-o)-1,c=!0):(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+l-1),this.projectedModelLineLineCounts.setValue(s,l);const _=d<=h?new Wse(d,h-d+1):null,w=u<=f?new JV(u,f):null,v=p<=m?new QV(p,m):null;return[c,_,w,v]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const s=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),o=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),r=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.guides.getActiveIndentGuide(s.lineNumber,o.lineNumber,r.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,s=t.remainder;return new l$(n+1,s)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new j(e.modelLineNumber,s)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new j(e.modelLineNumber,s)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),s=this.getViewLineInfo(t),o=new Array;let r=this.getModelStartPositionOfViewLine(n),a=new Array;for(let l=n.modelLineNumber;l<=s.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const d=l===n.modelLineNumber?n.modelLineWrappedLineIdx:0,h=l===s.modelLineNumber?s.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let u=d;u<h;u++)a.push(new l$(l,u))}if(!c.isVisible()&&r){const d=new j(l-1,this.model.getLineMaxColumn(l-1)+1),h=V.fromPositions(r,d);o.push(new c$(h,a)),a=[],r=null}else c.isVisible()&&!r&&(r=new j(l,1))}if(r){const l=V.fromPositions(r,this.getModelEndPositionOfViewLine(s));o.push(new c$(l,a))}return o}getViewLinesBracketGuides(e,t,n,s){const o=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,r=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,o,s);for(const d of a.viewLines){const u=c[d.modelLineNumber-l].map(f=>{if(f.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesAfterColumn).lineNumber>=d.modelLineWrappedLineIdx||f.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesBeforeOrAtColumn).lineNumber<d.modelLineWrappedLineIdx)return;if(!f.horizontalLine)return f;let p=-1;if(f.column!==-1){const w=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.column);if(w.lineNumber===d.modelLineWrappedLineIdx)p=w.column;else if(w.lineNumber<d.modelLineWrappedLineIdx)p=this.getMinColumnOfViewLine(d);else if(w.lineNumber>d.modelLineWrappedLineIdx)return}const m=this.convertModelPositionToViewPosition(d.modelLineNumber,f.horizontalLine.endColumn),_=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.horizontalLine.endColumn);return _.lineNumber===d.modelLineWrappedLineIdx?new T_(f.visibleColumn,p,f.className,new q1(f.horizontalLine.top,m.column),-1,-1):_.lineNumber<d.modelLineWrappedLineIdx||f.visibleColumn!==-1?void 0:new T_(f.visibleColumn,p,f.className,new q1(f.horizontalLine.top,this.getMaxColumnOfViewLine(d)),-1,-1)});r.push(u.filter(f=>!!f))}}return r}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let o=[];const r=[],a=[],l=n.lineNumber-1,c=s.lineNumber-1;let d=null;for(let p=l;p<=c;p++){const m=this.modelLineProjections[p];if(m.isVisible()){const _=m.getViewLineNumberOfModelPosition(0,p===l?n.column:1),w=m.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(p+1)),v=w-_+1;let b=0;v>1&&m.getViewLineMinColumn(this.model,p+1,w)===1&&(b=_===0?1:2),r.push(v),a.push(b),d===null&&(d=new j(p+1,0))}else d!==null&&(o=o.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,p)),d=null)}d!==null&&(o=o.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,s.lineNumber)),d=null);const h=t-e+1,u=new Array(h);let f=0;for(let p=0,m=o.length;p<m;p++){let _=o[p];const w=Math.min(h-f,r[p]),v=a[p];let b;v===2?b=0:v===1?b=1:b=w;for(let C=0;C<w;C++)C===b&&(_=0),u[f++]=_}return u}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const s=this.projectedModelLineLineCounts.getIndexOf(e-1);let o=e;const r=s.index,a=s.remainder,l=[];for(let c=r,d=this.model.getLineCount();c<d;c++){const h=this.modelLineProjections[c];if(!h.isVisible())continue;const u=c===r?a:0;let f=h.getViewLineCount()-u,p=!1;if(o+f>t&&(p=!0,f=t-o+1),h.getViewLinesData(this.model,c+1,u,f,o-e,n,l),o+=f,p)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);const s=this.projectedModelLineLineCounts.getIndexOf(e-1),o=s.index,r=s.remainder,a=this.modelLineProjections[o],l=a.getViewLineMinColumn(this.model,o+1,r),c=a.getViewLineMaxColumn(this.model,o+1,r);t<l&&(t=l),t>c&&(t=c);const d=a.getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new j(o+1,d)).equals(n)?new j(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),s=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new V(n.lineNumber,n.column,s.lineNumber,s.column)}convertViewPositionToModelPosition(e,t){const n=this.getViewLineInfo(e),s=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new j(n.modelLineNumber,s))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new V(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=In.None,s=!1,o=!1){const r=this.model.validatePosition(new j(e,t)),a=r.lineNumber,l=r.column;let c=a-1,d=!1;if(o)for(;c<this.modelLineProjections.length&&!this.modelLineProjections[c].isVisible();)c++,d=!0;else for(;c>0&&!this.modelLineProjections[c].isVisible();)c--,d=!0;if(c===0&&!this.modelLineProjections[c].isVisible())return new j(s?0:1,1);const h=1+this.projectedModelLineLineCounts.getPrefixSum(c);let u;return d?o?u=this.modelLineProjections[c].getViewPositionOfModelPosition(h,1,n):u=this.modelLineProjections[c].getViewPositionOfModelPosition(h,this.model.getLineMaxColumn(c+1),n):u=this.modelLineProjections[a-1].getViewPositionOfModelPosition(h,l,n),u}convertModelRangeToViewRange(e,t=In.Left){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return V.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,In.Right),s=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,In.Left);return new V(n.lineNumber,n.column,s.lineNumber,s.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){const o=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(o,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(n===0&&!this.modelLineProjections[n].isVisible())return 1;const s=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(s,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n,s,o){const r=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-r.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new V(r.lineNumber,1,a.lineNumber,a.column),t,n,s,o);let l=[];const c=r.lineNumber-1,d=a.lineNumber-1;let h=null;for(let m=c;m<=d;m++)if(this.modelLineProjections[m].isVisible())h===null&&(h=new j(m+1,m===c?r.column:1));else if(h!==null){const w=this.model.getLineMaxColumn(m);l=l.concat(this.model.getDecorationsInRange(new V(h.lineNumber,h.column,m,w),t,n,s)),h=null}h!==null&&(l=l.concat(this.model.getDecorationsInRange(new V(h.lineNumber,h.column,a.lineNumber,a.column),t,n,s)),h=null),l.sort((m,_)=>{const w=V.compareRangesUsingStarts(m.range,_.range);return w===0?m.id<_.id?-1:m.id>_.id?1:0:w});const u=[];let f=0,p=null;for(const m of l){const _=m.id;p!==_&&(p=_,u[f++]=m)}return u}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function Pae(i){if(i.length===0)return[];const e=i.slice();e.sort(V.compareRangesUsingStarts);const t=[];let n=e[0].startLineNumber,s=e[0].endLineNumber;for(let o=1,r=e.length;o<r;o++){const a=e[o];a.startLineNumber>s+1?(t.push(new V(n,1,s,1)),n=a.startLineNumber,s=a.endLineNumber):a.endLineNumber>s&&(s=a.endLineNumber)}return t.push(new V(n,1,s,1)),t}Wg(Pae,"normalizeLineRanges");class l${constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}static{Wg(this,"ViewLineInfo")}get isWrappedLineContinuation(){return this.modelLineWrappedLineIdx>0}}class c${constructor(e,t){this.modelRange=e,this.viewLines=t}static{Wg(this,"ViewLineInfoGroupedByModelRange")}}class $7e{static{Wg(this,"CoordinatesConverter")}_lines;constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,n,s){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,n,s)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class G7e{static{Wg(this,"ViewModelLinesFromModelAsIs")}model;constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new K7e(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,s){return!1}createLineBreaksComputer(){const e=[];return{addRequest:Wg((t,n,s)=>{e.push(null)},"addRequest"),finalize:Wg(()=>e,"finalize")}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new QV(t,n)}onModelLinesInserted(e,t,n,s){return new JV(t,n)}onModelLineChanged(e,t,n){return[!1,new Wse(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1,s=new Array(n);for(let o=0;o<n;o++)s[o]=0;return s}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),n=t.getLineContent();return new r2(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const s=this.model.getLineCount();e=Math.min(Math.max(1,e),s),t=Math.min(Math.max(1,t),s);const o=[];for(let r=e;r<=t;r++){const a=r-e;o[a]=n[a]?this.getViewLineData(r):null}return o}getDecorationsInRange(e,t,n,s,o){return this.model.getDecorationsInRange(e,t,n,s,o)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class K7e{static{Wg(this,"IdentityCoordinatesConverter")}_lines;constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}modelRangeIsVisible(e){const t=this._lines.model.getLineCount();return!(e.startLineNumber<1||e.startLineNumber>t||e.endLineNumber<1||e.endLineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}var j7e=Object.defineProperty,VD=(i,e)=>j7e(i,"name",{value:e,configurable:!0});class q7e{static{VD(this,"ViewModelDecorations")}editorId;model;configuration;_linesCollection;_coordinatesConverter;_decorationsCache;_cachedModelDecorationsResolver;_cachedModelDecorationsResolverViewRange;constructor(e,t,n,s,o){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=s,this._coordinatesConverter=o,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const s=e.range,o=e.options;let r;if(o.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new j(s.startLineNumber,1),In.Left,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new j(s.endLineNumber,this.model.getLineMaxColumn(s.endLineNumber)),In.Right);r=new V(a.lineNumber,a.column,l.lineNumber,l.column)}else r=this._coordinatesConverter.convertModelRangeToViewRange(s,In.Right);n=new Hse(r,o),this._decorationsCache[t]=n}return n}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,n=!1){const s=new V(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(s,t,n).inlineDecorations[0]}_getDecorationsInRange(e,t,n){const s=this._linesCollection.getDecorationsInRange(e,this.editorId,hE(this.configuration.options),t,n),o=e.startLineNumber,r=e.endLineNumber,a=[];let l=0;const c=[];for(let d=o;d<=r;d++)c[d-o]=[];for(let d=0,h=s.length;d<h;d++){const u=s[d],f=u.options;if(!Rae(this.model,u))continue;const p=this._getOrCreateViewModelDecoration(u),m=p.range;if(a[l++]=p,f.inlineClassName){const _=new y0(m,f.inlineClassName,f.inlineClassNameAffectsLetterSpacing?lr.RegularAffectingLetterSpacing:lr.Regular),w=Math.max(o,m.startLineNumber),v=Math.min(r,m.endLineNumber);for(let b=w;b<=v;b++)c[b-o].push(_)}if(f.beforeContentClassName&&o<=m.startLineNumber&&m.startLineNumber<=r){const _=new y0(new V(m.startLineNumber,m.startColumn,m.startLineNumber,m.startColumn),f.beforeContentClassName,lr.Before);c[m.startLineNumber-o].push(_)}if(f.afterContentClassName&&o<=m.endLineNumber&&m.endLineNumber<=r){const _=new y0(new V(m.endLineNumber,m.endColumn,m.endLineNumber,m.endColumn),f.afterContentClassName,lr.After);c[m.endLineNumber-o].push(_)}}return{decorations:a,inlineDecorations:c}}}function Rae(i,e){return!(e.options.hideInCommentTokens&&Oae(i,e)||e.options.hideInStringTokens&&Mae(i,e))}VD(Rae,"isModelDecorationVisible");function Oae(i,e){return g9(i,e.range,t=>t===Lo.Comment)}VD(Oae,"isModelDecorationInComment");function Mae(i,e){return g9(i,e.range,t=>t===Lo.String)}VD(Mae,"isModelDecorationInString");function g9(i,e,t){for(let n=e.startLineNumber;n<=e.endLineNumber;n++){const s=i.tokenization.getLineTokens(n),o=n===e.startLineNumber,r=n===e.endLineNumber;let a=o?s.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<s.getCount()&&!(r&&s.getStartOffset(a)>e.endColumn-1);){if(!t(s.getStandardTokenType(a)))return!1;a++}}return!0}VD(g9,"testTokensInRange");var Y7e=Object.defineProperty,Z7e=(i,e)=>Y7e(i,"name",{value:e,configurable:!0});const Mm=_v.Right;class X7e{static{Z7e(this,"GlyphMarginLanesModel")}lanes;persist=0;_requiredLanes=1;constructor(e){this.lanes=new Uint8Array(Math.ceil((e+1)*Mm/8))}reset(e){const t=Math.ceil((e+1)*Mm/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,n){n&&(this.persist|=1<<e-1);for(let s=t.startLineNumber;s<=t.endLineNumber;s++){const o=Mm*s+(e-1);this.lanes[o>>>3]|=1<<o%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(s))}}getLanesAtLine(e){const t=[];let n=Mm*e;for(let s=0;s<Mm;s++)(this.persist&1<<s||this.lanes[n>>>3]&1<<n%8)&&t.push(s+1),n++;return t.length?t:[_v.Center]}countAtLine(e){let t=Mm*e,n=0;for(let s=0;s<Mm;s++)(this.persist&1<<s||this.lanes[t>>>3]&1<<t%8)&&n++,t++;return n}}var Q7e=Object.defineProperty,Mv=(i,e)=>Q7e(i,"name",{value:e,configurable:!0});let J7e=class extends ${constructor(e,t,n,s,o,r,a,l,c,d){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=c,this._transactionalTarget=d,this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new u7e,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new Kv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new xn(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=f9.create(this.model),this.glyphLanes=new X7e(0),this.model.isTooLargeForTokenization())this._lines=new G7e(this.model);else{const h=this._configuration.options,u=h.get(k.fontInfo),f=h.get(k.wrappingStrategy),p=h.get(k.wrappingInfo),m=h.get(k.wrappingIndent),_=h.get(k.wordBreak);this._lines=new z7e(this._editorId,this.model,s,o,u,this.model.getOptions().tabSize,f,p.wrappingColumn,m,_)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new E7e(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new B7e(this._configuration,this.getLineCount(),r)),this._register(this.viewLayout.onDidScroll(h=>{h.scrollTopChanged&&this._handleVisibleLinesChanged(),h.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new dFe(h)),this._eventDispatcher.emitOutgoingEvent(new d9(h.oldScrollWidth,h.oldScrollLeft,h.oldScrollHeight,h.oldScrollTop,h.scrollWidth,h.scrollLeft,h.scrollHeight,h.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(h=>{this._eventDispatcher.emitOutgoingEvent(h)})),this._decorations=new q7e(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(h=>{try{const u=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(u,h)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(UR.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new gFe)})),this._register(this._themeService.onDidColorThemeChange(h=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new hFe(h))})),this._updateConfigurationViewLineCountNow()}static{Mv(this,"ViewModel")}_editorId;_configuration;model;_eventDispatcher;onEvent;cursorConfig;_updateConfigurationViewLineCount;_hasFocus;_viewportStart;_lines;coordinatesConverter;viewLayout;_cursor;_decorations;glyphLanes;dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new V(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new lFe(e)),this._eventDispatcher.emitOutgoingEvent(new c9(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new sFe)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new oFe)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new j(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new d$(t,this._viewportStart.startLineDelta)}return new d$(null,0)}_onConfigurationChanged(e,t){const n=this._captureStableViewport(),s=this._configuration.options,o=s.get(k.fontInfo),r=s.get(k.wrappingStrategy),a=s.get(k.wrappingInfo),l=s.get(k.wrappingIndent),c=s.get(k.wordBreak);this._lines.setWrappingSettings(o,r,a.wrappingColumn,l,c)&&(e.emitViewEvent(new BI),e.emitViewEvent(new FI),e.emitViewEvent(new Pm(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(k.readOnly)&&(this._decorations.reset(),e.emitViewEvent(new Pm(null))),t.hasChanged(k.renderValidationDecorations)&&(this._decorations.reset(),e.emitViewEvent(new Pm(null))),e.emitViewEvent(new rFe(t)),this.viewLayout.onConfigurationChanged(t),n.recoverViewportStart(this.coordinatesConverter,this.viewLayout),Kv.shouldRecreate(t)&&(this.cursorConfig=new Kv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const n=this._eventDispatcher.beginEmitViewEvents();let s=!1,o=!1;const r=e instanceof ab?e.rawContentChangedEvent.changes:e.changes,a=e instanceof ab?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const h of r)switch(h.changeType){case qu.LinesInserted:{for(let u=0;u<h.detail.length;u++){const f=h.detail[u];let p=h.injectedTexts[u];p&&(p=p.filter(m=>!m.ownerId||m.ownerId===this._editorId)),l.addRequest(f,p,null)}break}case qu.LineChanged:{let u=null;h.injectedText&&(u=h.injectedText.filter(f=>!f.ownerId||f.ownerId===this._editorId)),l.addRequest(h.detail,u,null);break}}const c=l.finalize(),d=new $g(c);for(const h of r)switch(h.changeType){case qu.Flush:{this._lines.onModelFlushed(),n.emitViewEvent(new BI),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),s=!0;break}case qu.LinesDeleted:{const u=this._lines.onModelLinesDeleted(a,h.fromLineNumber,h.toLineNumber);u!==null&&(n.emitViewEvent(u),this.viewLayout.onLinesDeleted(u.fromLineNumber,u.toLineNumber)),s=!0;break}case qu.LinesInserted:{const u=d.takeCount(h.detail.length),f=this._lines.onModelLinesInserted(a,h.fromLineNumber,h.toLineNumber,u);f!==null&&(n.emitViewEvent(f),this.viewLayout.onLinesInserted(f.fromLineNumber,f.toLineNumber)),s=!0;break}case qu.LineChanged:{const u=d.dequeue(),[f,p,m,_]=this._lines.onModelLineChanged(a,h.lineNumber,u);o=f,p&&n.emitViewEvent(p),m&&(n.emitViewEvent(m),this.viewLayout.onLinesInserted(m.fromLineNumber,m.toLineNumber)),_&&(n.emitViewEvent(_),this.viewLayout.onLinesDeleted(_.fromLineNumber,_.toLineNumber));break}case qu.EOLChanged:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!s&&o&&(n.emitViewEvent(new FI),n.emitViewEvent(new Pm(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const n=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(n){const s=this.coordinatesConverter.convertModelPositionToViewPosition(n.getStartPosition()),o=this.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber);this.viewLayout.setScrollPosition({scrollTop:o+this._viewportStart.startLineDelta},ot.Immediate)}}try{const n=this._eventDispatcher.beginEmitViewEvents();e instanceof ab&&n.emitOutgoingEvent(new w7e(e.contentChangedEvent)),this._cursor.onModelContentChanged(n,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let n=0,s=e.ranges.length;n<s;n++){const o=e.ranges[n],r=this.coordinatesConverter.convertModelPositionToViewPosition(new j(o.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new j(o.toLineNumber,this.model.getLineMaxColumn(o.toLineNumber))).lineNumber;t[n]={fromLineNumber:r,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new uFe(t)),this._eventDispatcher.emitOutgoingEvent(new y7e(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new cFe),this.cursorConfig=new Kv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new v7e(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new Kv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new b7e(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new BI),t.emitViewEvent(new FI),t.emitViewEvent(new Pm(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new Kv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new C7e(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new Pm(e)),this._eventDispatcher.emitOutgoingEvent(new _7e(e))}))}hiddenAreasModel=new t2e;previousHiddenAreas=[];setHiddenAreas(e,t){this.hiddenAreasModel.setHiddenAreas(t,e);const n=this.hiddenAreasModel.getMergedRanges();if(n===this.previousHiddenAreas)return;this.previousHiddenAreas=n;const s=this._captureStableViewport();let o=!1;try{const r=this._eventDispatcher.beginEmitViewEvents();o=this._lines.setHiddenAreas(n),o&&(r.emitViewEvent(new BI),r.emitViewEvent(new FI),r.emitViewEvent(new Pm(null)),this._cursor.onLineMappingChanged(r),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const a=s.viewportStartModelPosition?.lineNumber;a&&n.some(c=>c.startLineNumber<=a&&a<=c.endLineNumber)||s.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),o&&this._eventDispatcher.emitOutgoingEvent(new p7e)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(k.layoutInfo),t=this._configuration.options.get(k.lineHeight),n=Math.max(20,Math.round(e.height/t)),s=this.viewLayout.getLinesViewportData(),o=Math.max(1,s.completelyVisibleStartLineNumber-n),r=Math.min(this.getLineCount(),s.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new V(o,this.getLineMinColumn(o),r,this.getLineMaxColumn(r)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];const s=[];let o=0,r=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let d=0,h=n.length;d<h;d++){const u=n[d].startLineNumber,f=n[d].endLineNumber;f<r||u>l||(r<u&&(s[o++]=new V(r,a,u-1,this.model.getLineMaxColumn(u-1))),r=f+1,a=1)}return(r<l||r===l&&a<c)&&(s[o++]=new V(r,a,l,c)),s}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new V(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,s=t.completelyVisibleEndLineNumber;return new V(n,this.getLineMinColumn(n),s,this.getLineMaxColumn(s))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),s=this.coordinatesConverter.convertViewPositionToModelPosition(new j(n,this.getLineMinColumn(n))),o=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:s,firstPositionDeltaTop:o}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),s=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:s}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,s){return this._lines.getViewLinesBracketGuides(e,t,n,s)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=ia(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=nm(this.getLineContent(e));return t===-1?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const s=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,s)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const n=this.model.mightContainRTL(),s=this.model.mightContainNonBasicASCII(),o=this.getTabSize(),r=this._lines.getViewLineData(e);return r.inlineDecorations&&(t=[...t,...r.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new Xp(r.minColumn,r.maxColumn,r.content,r.continuesWithWrappedLine,n,s,r.tokens,t,o,r.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){const s=this._lines.getViewLinesData(e,t,n);return new bFe(this.getTabSize(),s)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,hE(this._configuration.options)),n=new e2e;for(const s of t){const o=s.options,r=o.overviewRuler;if(!r)continue;const a=r.position;if(a===0)continue;const l=r.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.startLineNumber,s.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.endLineNumber,s.range.endColumn);n.accept(l,o.zIndex,c,d,a)}return n.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e)t.options.overviewRuler?.invalidateCachedColor(),t.options.minimap?.invalidateCachedColor()}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getValueLengthInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(n,t)}modifyPosition(e,t){const n=this.coordinatesConverter.convertViewPositionToModelPosition(e),s=this.model.modifyPosition(n,t);return this.coordinatesConverter.convertModelPositionToViewPosition(s)}deduceModelPositionRelativeToViewPosition(e,t,n){const s=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const r=this.model.getOffsetAt(s)+t;return this.model.getPositionAt(r)}getPlainTextToCopy(e,t,n){const s=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(V.compareRangesUsingStarts);let o=!1,r=!1;for(const l of e)l.isEmpty()?o=!0:r=!0;if(!r){if(!t)return"";const l=e.map(d=>d.startLineNumber);let c="";for(let d=0;d<l.length;d++)d>0&&l[d-1]===l[d]||(c+=this.model.getLineContent(l[d])+s);return c}if(o&&t){const l=[];let c=0;for(const d of e){const h=d.startLineNumber;d.isEmpty()?h!==c&&l.push(this.model.getLineContent(h)):l.push(this.model.getValueInRange(d,n?cn.CRLF:cn.TextDefined)),c=h}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,n?cn.CRLF:cn.TextDefined));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===rb||e.length!==1)return null;let s=e[0];if(s.isEmpty()){if(!t)return null;const d=s.startLineNumber;s=new V(d,this.model.getLineMinColumn(d),d,this.model.getLineMaxColumn(d))}const o=this._configuration.options.get(k.fontInfo),r=this._getColorMap(),l=/[:;\\\/<>]/.test(o.fontFamily)||o.fontFamily===Kl.fontFamily;let c;return l?c=Kl.fontFamily:(c=o.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${Kl.fontFamily}`),{mode:n,html:`<div style="color: ${r[oa.DefaultForeground]};background-color: ${r[oa.DefaultBackground]};font-family: ${c};font-weight: ${o.fontWeight};font-size: ${o.fontSize}px;line-height: ${o.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(s,r)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,s=e.startColumn,o=e.endLineNumber,r=e.endColumn,a=this.getTabSize();let l="";for(let c=n;c<=o;c++){const d=this.model.tokenization.getLineTokens(c),h=d.getLineContent(),u=c===n?s-1:0,f=c===o?r-1:h.length;h===""?l+="<br>":l+=xae(h,d.inflate(),t,u,f,a,Nt)}return l}_getColorMap(){const e=lu.getColorMap(),t=["#000000"];if(e)for(let n=1,s=e.length;n<s;n++)t[n]=U.Format.CSS.formatHex(e[n]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){return this._withViewEventsCollector(s=>this._cursor.setStates(s,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=ri.NotSet){this._withViewEventsCollector(s=>this._cursor.setSelections(s,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new m7e);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(s=>this._cursor.executeEdits(s,e,t,n))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,s,o){this._executeCursorEdit(r=>this._cursor.compositionType(r,e,t,n,s,o))}paste(e,t,n,s){this._executeCursorEdit(o=>this._cursor.paste(o,e,t,n,s))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealAllCursors(e,t,n=!1){this._withViewEventsCollector(s=>this._cursor.revealAll(s,e,n,ei.Simple,t,ot.Smooth))}revealPrimaryCursor(e,t,n=!1){this._withViewEventsCollector(s=>this._cursor.revealPrimary(s,e,n,ei.Simple,t,ot.Smooth))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new V(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new C0(e,!1,n,null,ei.Simple,!0,ot.Smooth)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new V(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new C0(e,!1,n,null,ei.Simple,!0,ot.Smooth)))}revealRange(e,t,n,s,o){this._withViewEventsCollector(r=>r.emitViewEvent(new C0(e,!1,n,null,s,t,o)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new fFe),this._eventDispatcher.emitOutgoingEvent(new f7e))}_withViewEventsCollector(e){return this._transactionalTarget.batchChanges(()=>{try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}})}batchEvents(e){this._withViewEventsCollector(()=>{e()})}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}};class f9{constructor(e,t,n,s,o){this._model=e,this._viewLineNumber=t,this._isValid=n,this._modelTrackedRange=s,this._startLineDelta=o}static{Mv(this,"ViewportStart")}static create(e){const t=e._setTrackedRange(null,new V(1,1,1,1),hs.NeverGrowsWhenTypingAtEdges);return new f9(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,hs.NeverGrowsWhenTypingAtEdges)}update(e,t){const n=e.coordinatesConverter.convertViewPositionToModelPosition(new j(t,e.getLineMinColumn(t))),s=e.model._setTrackedRange(this._modelTrackedRange,new V(n.lineNumber,n.column,n.lineNumber,n.column),hs.NeverGrowsWhenTypingAtEdges),o=e.viewLayout.getVerticalOffsetForLineNumber(t),r=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=s,this._startLineDelta=r-o}invalidate(){this._isValid=!1}}class e2e{static{Mv(this,"OverviewRulerDecorations")}_asMap=Object.create(null);asArray=[];accept(e,t,n,s,o){const r=this._asMap[e];if(r){const a=r.data,l=a[a.length-3],c=a[a.length-1];if(l===o&&c+1>=n){s>c&&(a[a.length-1]=s);return}a.push(o,n,s)}else{const a=new sL(e,t,[o,n,s]);this._asMap[e]=a,this.asArray.push(a)}}}class t2e{static{Mv(this,"HiddenAreasModel")}hiddenAreas=new Map;shouldRecompute=!1;ranges=[];setHiddenAreas(e,t){const n=this.hiddenAreas.get(e);n&&U4(n,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,n)=>Bae(t,n),[]);return U4(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}}function Bae(i,e){const t=[];let n=0,s=0;for(;n<i.length&&s<e.length;){const o=i[n],r=e[s];if(o.endLineNumber<r.startLineNumber-1)t.push(i[n++]);else if(r.endLineNumber<o.startLineNumber-1)t.push(e[s++]);else{const a=Math.min(o.startLineNumber,r.startLineNumber),l=Math.max(o.endLineNumber,r.endLineNumber);t.push(new V(a,1,l,1)),n++,s++}}for(;n<i.length;)t.push(i[n++]);for(;s<e.length;)t.push(e[s++]);return t}Mv(Bae,"mergeLineRangeArray");function U4(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].equalsRange(e[t]))return!1;return!0}Mv(U4,"rangeArraysEqual");class d${constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}static{Mv(this,"StableViewport")}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const n=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),s=t.getVerticalOffsetForLineNumber(n.lineNumber);t.setScrollPosition({scrollTop:s+this.startLineDelta},ot.Immediate)}}var Fae=Object.defineProperty,i2e=Object.getOwnPropertyDescriptor,qi=(i,e)=>Fae(i,"name",{value:e,configurable:!0}),n2e=(i,e,t,n)=>{for(var s=n>1?void 0:n?i2e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Fae(e,t,s),s},Nu=(i,e)=>(t,n)=>e(t,n,i);let dp=class extends ${constructor(i,e,t,n,s,o,r,a,l,c,d,h){super(),this.languageConfigurationService=d,s.willCreateCodeEditor();const u={...e};this._domElement=i,this._overflowWidgetsDomNode=u.overflowWidgetsDomNode,delete u.overflowWidgetsDomNode,this._id=++s2e,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=t.telemetryData,this._configuration=this._register(this._createConfiguration(t.isSimpleWidget||!1,t.contextMenuId??(t.isSimpleWidget?N.SimpleEditorContext:N.EditorContext),u,c)),this._register(this._configuration.onDidChange(m=>{this._onDidChangeConfiguration.fire(m);const _=this._configuration.options;if(m.hasChanged(k.layoutInfo)){const w=_.get(k.layoutInfo);this._onDidLayoutChange.fire(w)}})),this._contextKeyService=this._register(r.createScoped(this._domElement)),this._notificationService=l,this._codeEditorService=s,this._commandService=o,this._themeService=a,this._register(new r2e(this,this._contextKeyService)),this._register(new a2e(this,this._contextKeyService,h)),this._instantiationService=this._register(n.createChild(new av([Ye,this._contextKeyService]))),this._modelData=null,this._focusTracker=new l2e(i,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let f;Array.isArray(t.contributions)?f=t.contributions:f=EC.getEditorContributions(),this._contributions.initialize(this,f,this._instantiationService);for(const m of EC.getEditorActions()){if(this._actions.has(m.id)){Kt(new Error(`Cannot have two actions with the same id ${m.id}`));continue}const _=new e7e(m.id,m.label,m.alias,m.metadata,m.precondition??void 0,w=>this._instantiationService.invokeFunction(v=>Promise.resolve(m.runEditorCommand(v,this,w))),this._contextKeyService);this._actions.set(_.id,_)}const p=qi(()=>!this._configuration.options.get(k.readOnly)&&this._configuration.options.get(k.dropIntoEditor).enabled,"isDropIntoEnabled");this._register(new Rb(this._domElement,{onDragOver:qi(m=>{if(!p())return;const _=this.getTargetAtClientPoint(m.clientX,m.clientY);_?.position&&this.showDropIndicatorAt(_.position)},"onDragOver"),onDrop:qi(async m=>{if(!p()||(this.removeDropIndicator(),!m.dataTransfer))return;const _=this.getTargetAtClientPoint(m.clientX,m.clientY);_?.position&&this._onDropIntoEditor.fire({position:_.position,event:m})},"onDrop"),onDragLeave:qi(()=>{this.removeDropIndicator()},"onDragLeave"),onDragEnd:qi(()=>{this.removeDropIndicator()},"onDragEnd")})),this._codeEditorService.addCodeEditor(this)}static{qi(this,"CodeEditorWidget")}static dropIntoEditorDecorationOptions=gs.register({description:"workbench-dnd-target",className:"dnd-target"});_deliveryQueue=Rue();_contributions=this._register(new X3e);_onDidDispose=this._register(new x);onDidDispose=this._onDidDispose.event;_onDidChangeModelContent=this._register(new x({deliveryQueue:this._deliveryQueue}));onDidChangeModelContent=this._onDidChangeModelContent.event;_onDidChangeModelLanguage=this._register(new x({deliveryQueue:this._deliveryQueue}));onDidChangeModelLanguage=this._onDidChangeModelLanguage.event;_onDidChangeModelLanguageConfiguration=this._register(new x({deliveryQueue:this._deliveryQueue}));onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event;_onDidChangeModelOptions=this._register(new x({deliveryQueue:this._deliveryQueue}));onDidChangeModelOptions=this._onDidChangeModelOptions.event;_onDidChangeModelDecorations=this._register(new x({deliveryQueue:this._deliveryQueue}));onDidChangeModelDecorations=this._onDidChangeModelDecorations.event;_onDidChangeModelTokens=this._register(new x({deliveryQueue:this._deliveryQueue}));onDidChangeModelTokens=this._onDidChangeModelTokens.event;_onDidChangeConfiguration=this._register(new x({deliveryQueue:this._deliveryQueue}));onDidChangeConfiguration=this._onDidChangeConfiguration.event;_onWillChangeModel=this._register(new x({deliveryQueue:this._deliveryQueue}));onWillChangeModel=this._onWillChangeModel.event;_onDidChangeModel=this._register(new x({deliveryQueue:this._deliveryQueue}));onDidChangeModel=this._onDidChangeModel.event;_onDidChangeCursorPosition=this._register(new x({deliveryQueue:this._deliveryQueue}));onDidChangeCursorPosition=this._onDidChangeCursorPosition.event;_onDidChangeCursorSelection=this._register(new x({deliveryQueue:this._deliveryQueue}));onDidChangeCursorSelection=this._onDidChangeCursorSelection.event;_onDidAttemptReadOnlyEdit=this._register(new Jo(this._contributions,this._deliveryQueue));onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event;_onDidLayoutChange=this._register(new x({deliveryQueue:this._deliveryQueue}));onDidLayoutChange=this._onDidLayoutChange.event;_editorTextFocus=this._register(new h$({deliveryQueue:this._deliveryQueue}));onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue;onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse;_editorWidgetFocus=this._register(new h$({deliveryQueue:this._deliveryQueue}));onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue;onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse;_onWillType=this._register(new Jo(this._contributions,this._deliveryQueue));onWillType=this._onWillType.event;_onDidType=this._register(new Jo(this._contributions,this._deliveryQueue));onDidType=this._onDidType.event;_onDidCompositionStart=this._register(new Jo(this._contributions,this._deliveryQueue));onDidCompositionStart=this._onDidCompositionStart.event;_onDidCompositionEnd=this._register(new Jo(this._contributions,this._deliveryQueue));onDidCompositionEnd=this._onDidCompositionEnd.event;_onDidPaste=this._register(new Jo(this._contributions,this._deliveryQueue));onDidPaste=this._onDidPaste.event;_onMouseUp=this._register(new Jo(this._contributions,this._deliveryQueue));onMouseUp=this._onMouseUp.event;_onMouseDown=this._register(new Jo(this._contributions,this._deliveryQueue));onMouseDown=this._onMouseDown.event;_onMouseDrag=this._register(new Jo(this._contributions,this._deliveryQueue));onMouseDrag=this._onMouseDrag.event;_onMouseDrop=this._register(new Jo(this._contributions,this._deliveryQueue));onMouseDrop=this._onMouseDrop.event;_onMouseDropCanceled=this._register(new Jo(this._contributions,this._deliveryQueue));onMouseDropCanceled=this._onMouseDropCanceled.event;_onDropIntoEditor=this._register(new Jo(this._contributions,this._deliveryQueue));onDropIntoEditor=this._onDropIntoEditor.event;_onContextMenu=this._register(new Jo(this._contributions,this._deliveryQueue));onContextMenu=this._onContextMenu.event;_onMouseMove=this._register(new Jo(this._contributions,this._deliveryQueue));onMouseMove=this._onMouseMove.event;_onMouseLeave=this._register(new Jo(this._contributions,this._deliveryQueue));onMouseLeave=this._onMouseLeave.event;_onMouseWheel=this._register(new Jo(this._contributions,this._deliveryQueue));onMouseWheel=this._onMouseWheel.event;_onKeyUp=this._register(new Jo(this._contributions,this._deliveryQueue));onKeyUp=this._onKeyUp.event;_onKeyDown=this._register(new Jo(this._contributions,this._deliveryQueue));onKeyDown=this._onKeyDown.event;_onDidContentSizeChange=this._register(new x({deliveryQueue:this._deliveryQueue}));onDidContentSizeChange=this._onDidContentSizeChange.event;_onDidScrollChange=this._register(new x({deliveryQueue:this._deliveryQueue}));onDidScrollChange=this._onDidScrollChange.event;_onDidChangeViewZones=this._register(new x({deliveryQueue:this._deliveryQueue}));onDidChangeViewZones=this._onDidChangeViewZones.event;_onDidChangeHiddenAreas=this._register(new x({deliveryQueue:this._deliveryQueue}));onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event;_updateCounter=0;_onWillTriggerEditorOperationEvent=this._register(new x);onWillTriggerEditorOperationEvent=this._onWillTriggerEditorOperationEvent.event;_onBeginUpdate=this._register(new x);onBeginUpdate=this._onBeginUpdate.event;_onEndUpdate=this._register(new x);onEndUpdate=this._onEndUpdate.event;get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}_telemetryData;_domElement;_overflowWidgetsDomNode;_id;_configuration;_contributionsDisposable;_actions=new Map;_modelData;_instantiationService;_contextKeyService;get contextKeyService(){return this._contextKeyService}_notificationService;_codeEditorService;_commandService;_themeService;_focusTracker;_contentWidgets;_overlayWidgets;_glyphMarginWidgets;_decorationTypeKeysToIds;_decorationTypeSubtypes;_bannerDomNode=null;_dropIntoEditorDecorations=this.createDecorationsCollection();writeScreenReaderContent(i){this._modelData?.view.writeScreenReaderContent(i)}_createConfiguration(i,e,t,n){return new KV(i,e,t,this._domElement,n)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return bP.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(i){return this._instantiationService.invokeFunction(i)}updateOptions(i){this._configuration.updateOptions(i||{})}getOptions(){return this._configuration.options}getOption(i){return this._configuration.options.get(i)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(i){return this._modelData?pi.getWordAtPosition(this._modelData.model,this._configuration.options.get(k.wordSeparators),this._configuration.options.get(k.wordSegmenterLocales),i):null}getValue(i=null){if(!this._modelData)return"";const e=!!(i&&i.preserveBOM);let t=cn.TextDefined;return i&&i.lineEnding&&i.lineEnding===`
`?t=cn.LF:i&&i.lineEnding&&i.lineEnding===`\r
`&&(t=cn.CRLF),this._modelData.model.getValue(t,e)}setValue(i){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(i)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(i=null){try{this._beginUpdate();const e=i;if(this._modelData===null&&e===null||this._modelData&&this._modelData.model===e)return;const t={oldModelUrl:this._modelData?.model.uri||null,newModelUrl:e?.uri||null};this._onWillChangeModel.fire(t);const n=this.hasTextFocus(),s=this._detachModel();this._attachModel(e),n&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(t),this._postDetachModelCleanup(s),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const i in this._decorationTypeSubtypes){const e=this._decorationTypeSubtypes[i];for(const t in e)this._removeDecorationType(i+"-"+t)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(i,e,t,n){const s=i.model.validatePosition({lineNumber:e,column:t}),o=i.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return i.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(o.lineNumber,n)}getTopForLineNumber(i,e=!1){return this._modelData?dp._getVerticalOffsetForPosition(this._modelData,i,1,e):-1}getTopForPosition(i,e){return this._modelData?dp._getVerticalOffsetForPosition(this._modelData,i,e,!1):-1}static _getVerticalOffsetForPosition(i,e,t,n=!1){const s=i.model.validatePosition({lineNumber:e,column:t}),o=i.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return i.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber,n)}getBottomForLineNumber(i,e=!1){if(!this._modelData)return-1;const t=this._modelData.model.getLineMaxColumn(i);return dp._getVerticalOffsetAfterPosition(this._modelData,i,t,e)}setHiddenAreas(i,e){this._modelData?.viewModel.setHiddenAreas(i.map(t=>V.lift(t)),e)}getVisibleColumnFromPosition(i){if(!this._modelData)return i.column;const e=this._modelData.model.validatePosition(i),t=this._modelData.model.getOptions().tabSize;return Rn.visibleColumnFromColumn(this._modelData.model.getLineContent(e.lineNumber),e.column,t)+1}getStatusbarColumn(i){if(!this._modelData)return i.column;const e=this._modelData.model.validatePosition(i),t=this._modelData.model.getOptions().tabSize;return Rn.toStatusbarColumn(this._modelData.model.getLineContent(e.lineNumber),e.column,t)}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(i,e="api"){if(this._modelData){if(!j.isIPosition(i))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(e,[{selectionStartLineNumber:i.lineNumber,selectionStartColumn:i.column,positionLineNumber:i.lineNumber,positionColumn:i.column}])}}_sendRevealRange(i,e,t,n){if(!this._modelData)return;if(!V.isIRange(i))throw new Error("Invalid arguments");const s=this._modelData.model.validateRange(i),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(s);this._modelData.viewModel.revealRange("api",t,o,e,n)}revealLine(i,e=ot.Smooth){this._revealLine(i,ei.Simple,e)}revealLineInCenter(i,e=ot.Smooth){this._revealLine(i,ei.Center,e)}revealLineInCenterIfOutsideViewport(i,e=ot.Smooth){this._revealLine(i,ei.CenterIfOutsideViewport,e)}revealLineNearTop(i,e=ot.Smooth){this._revealLine(i,ei.NearTop,e)}_revealLine(i,e,t){if(typeof i!="number")throw new Error("Invalid arguments");this._sendRevealRange(new V(i,1,i,1),e,!1,t)}revealPosition(i,e=ot.Smooth){this._revealPosition(i,ei.Simple,!0,e)}revealPositionInCenter(i,e=ot.Smooth){this._revealPosition(i,ei.Center,!0,e)}revealPositionInCenterIfOutsideViewport(i,e=ot.Smooth){this._revealPosition(i,ei.CenterIfOutsideViewport,!0,e)}revealPositionNearTop(i,e=ot.Smooth){this._revealPosition(i,ei.NearTop,!0,e)}_revealPosition(i,e,t,n){if(!j.isIPosition(i))throw new Error("Invalid arguments");this._sendRevealRange(new V(i.lineNumber,i.column,i.lineNumber,i.column),e,t,n)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(i,e="api"){const t=St.isISelection(i),n=V.isIRange(i);if(!t&&!n)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(i,e);else if(n){const s={selectionStartLineNumber:i.startLineNumber,selectionStartColumn:i.startColumn,positionLineNumber:i.endLineNumber,positionColumn:i.endColumn};this._setSelectionImpl(s,e)}}_setSelectionImpl(i,e){if(!this._modelData)return;const t=new St(i.selectionStartLineNumber,i.selectionStartColumn,i.positionLineNumber,i.positionColumn);this._modelData.viewModel.setSelections(e,[t])}revealLines(i,e,t=ot.Smooth){this._revealLines(i,e,ei.Simple,t)}revealLinesInCenter(i,e,t=ot.Smooth){this._revealLines(i,e,ei.Center,t)}revealLinesInCenterIfOutsideViewport(i,e,t=ot.Smooth){this._revealLines(i,e,ei.CenterIfOutsideViewport,t)}revealLinesNearTop(i,e,t=ot.Smooth){this._revealLines(i,e,ei.NearTop,t)}_revealLines(i,e,t,n){if(typeof i!="number"||typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new V(i,1,e,1),t,!1,n)}revealRange(i,e=ot.Smooth,t=!1,n=!0){this._revealRange(i,t?ei.Center:ei.Simple,n,e)}revealRangeInCenter(i,e=ot.Smooth){this._revealRange(i,ei.Center,!0,e)}revealRangeInCenterIfOutsideViewport(i,e=ot.Smooth){this._revealRange(i,ei.CenterIfOutsideViewport,!0,e)}revealRangeNearTop(i,e=ot.Smooth){this._revealRange(i,ei.NearTop,!0,e)}revealRangeNearTopIfOutsideViewport(i,e=ot.Smooth){this._revealRange(i,ei.NearTopIfOutsideViewport,!0,e)}revealRangeAtTop(i,e=ot.Smooth){this._revealRange(i,ei.Top,!0,e)}_revealRange(i,e,t,n){if(!V.isIRange(i))throw new Error("Invalid arguments");this._sendRevealRange(V.lift(i),e,t,n)}setSelections(i,e="api",t=ri.NotSet){if(this._modelData){if(!i||i.length===0)throw new Error("Invalid arguments");for(let n=0,s=i.length;n<s;n++)if(!St.isISelection(i[n]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(e,i,t)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(i,e=ot.Immediate){if(this._modelData){if(typeof i!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:i},e)}}setScrollTop(i,e=ot.Immediate){if(this._modelData){if(typeof i!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:i},e)}}setScrollPosition(i,e=ot.Immediate){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(i,e)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const i=this._contributions.saveViewState(),e=this._modelData.viewModel.saveCursorState(),t=this._modelData.viewModel.saveState();return{cursorState:e,viewState:t,contributionsState:i}}restoreViewState(i){if(!this._modelData||!this._modelData.hasRealView)return;const e=i;if(e&&e.cursorState&&e.viewState){const t=e.cursorState;Array.isArray(t)?t.length>0&&this._modelData.viewModel.restoreCursorState(t):this._modelData.viewModel.restoreCursorState([t]),this._contributions.restoreViewState(e.contributionsState||{});const n=this._modelData.viewModel.reduceRestoreState(e.viewState);this._modelData.view.restoreState(n)}}handleInitialized(){this._getViewModel()?.visibleLinesStabilized()}onVisible(){this._modelData?.view.refreshFocusState()}onHide(){this._modelData?.view.refreshFocusState(),this._focusTracker.refreshState()}getContribution(i){return this._contributions.get(i)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let i=this.getActions();return i=i.filter(e=>e.isSupported()),i}getAction(i){return this._actions.get(i)||null}trigger(i,e,t){t=t||{};try{switch(this._onWillTriggerEditorOperationEvent.fire({source:i,handlerId:e,payload:t}),this._beginUpdate(),e){case Ms.CompositionStart:this._startComposition();return;case Ms.CompositionEnd:this._endComposition(i);return;case Ms.Type:{const s=t;this._type(i,s.text||"");return}case Ms.ReplacePreviousChar:{const s=t;this._compositionType(i,s.text||"",s.replaceCharCnt||0,0,0);return}case Ms.CompositionType:{const s=t;this._compositionType(i,s.text||"",s.replacePrevCharCnt||0,s.replaceNextCharCnt||0,s.positionDelta||0);return}case Ms.Paste:{const s=t;this._paste(i,s.text||"",s.pasteOnNewLine||!1,s.multicursorText||null,s.mode||null,s.clipboardEvent);return}case Ms.Cut:this._cut(i);return}const n=this.getAction(e);if(n){Promise.resolve(n.run(t)).then(void 0,Kt);return}if(!this._modelData||this._triggerEditorCommand(i,e,t))return;this._triggerCommand(e,t)}finally{this._endUpdate()}}_triggerCommand(i,e){this._commandService.executeCommand(i,e)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(i){this._modelData&&(this._modelData.viewModel.endComposition(i),this._onDidCompositionEnd.fire())}_type(i,e){!this._modelData||e.length===0||(i==="keyboard"&&this._onWillType.fire(e),this._modelData.viewModel.type(e,i),i==="keyboard"&&this._onDidType.fire(e))}_compositionType(i,e,t,n,s){this._modelData&&this._modelData.viewModel.compositionType(e,t,n,s,i)}_paste(i,e,t,n,s,o){if(!this._modelData)return;const r=this._modelData.viewModel,a=r.getSelection().getStartPosition();r.paste(e,t,n,i);const l=r.getSelection().getStartPosition();i==="keyboard"&&this._onDidPaste.fire({clipboardEvent:o,range:new V(a.lineNumber,a.column,l.lineNumber,l.column),languageId:s})}_cut(i){this._modelData&&this._modelData.viewModel.cut(i)}_triggerEditorCommand(i,e,t){const n=EC.getEditorCommand(e);return n?(t=t||{},t.source=i,this._instantiationService.invokeFunction(s=>{Promise.resolve(n.runEditorCommand(s,this,t)).then(void 0,Kt)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(k.readOnly)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(k.readOnly)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(i,e,t){if(!this._modelData||this._configuration.options.get(k.readOnly))return!1;let n;return t?Array.isArray(t)?n=qi(()=>t,"cursorStateComputer"):n=t:n=qi(()=>null,"cursorStateComputer"),this._modelData.viewModel.executeEdits(i,e,n),!0}executeCommand(i,e){this._modelData&&this._modelData.viewModel.executeCommand(e,i)}executeCommands(i,e){this._modelData&&this._modelData.viewModel.executeCommands(e,i)}createDecorationsCollection(i){return new c2e(this,i)}changeDecorations(i){return this._modelData?this._modelData.model.changeDecorations(i,this._id):null}getLineDecorations(i){return this._modelData?this._modelData.model.getLineDecorations(i,this._id,hE(this._configuration.options)):null}getDecorationsInRange(i){return this._modelData?this._modelData.model.getDecorationsInRange(i,this._id,hE(this._configuration.options)):null}deltaDecorations(i,e){return this._modelData?i.length===0&&e.length===0?i:this._modelData.model.deltaDecorations(i,e,this._id):[]}removeDecorations(i){!this._modelData||i.length===0||this._modelData.model.changeDecorations(e=>{e.deltaDecorations(i,[])})}setDecorationsByType(i,e,t){const n={},s=this._decorationTypeSubtypes[e]||{};this._decorationTypeSubtypes[e]=n;const o=[];for(const a of t){let l=e;if(a.renderOptions){const d=Jd(a.renderOptions).toString(16);l=e+"-"+d,!s[d]&&!n[d]&&this._registerDecorationType(i,l,a.renderOptions,e),n[d]=!0}const c=this._resolveDecorationOptions(l,!!a.hoverMessage);a.hoverMessage&&(c.hoverMessage=a.hoverMessage),o.push({range:a.range,options:c})}for(const a in s)n[a]||this._removeDecorationType(e+"-"+a);const r=this._decorationTypeKeysToIds[e]||[];this.changeDecorations(a=>this._decorationTypeKeysToIds[e]=a.deltaDecorations(r,o))}setDecorationsByTypeFast(i,e){const t=this._decorationTypeSubtypes[i]||{};for(const r in t)this._removeDecorationType(i+"-"+r);this._decorationTypeSubtypes[i]={};const n=gs.createDynamic(this._resolveDecorationOptions(i,!1)),s=new Array(e.length);for(let r=0,a=e.length;r<a;r++)s[r]={range:e[r],options:n};const o=this._decorationTypeKeysToIds[i]||[];this.changeDecorations(r=>this._decorationTypeKeysToIds[i]=r.deltaDecorations(o,s))}removeDecorationsByType(i){const e=this._decorationTypeKeysToIds[i];e&&this.changeDecorations(t=>t.deltaDecorations(e,[])),this._decorationTypeKeysToIds.hasOwnProperty(i)&&delete this._decorationTypeKeysToIds[i],this._decorationTypeSubtypes.hasOwnProperty(i)&&delete this._decorationTypeSubtypes[i]}getLayoutInfo(){return this._configuration.options.get(k.layoutInfo)}createOverviewRuler(i){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(i)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(i){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(i)}delegateScrollFromMouseWheelEvent(i){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(i)}layout(i,e=!1){this._configuration.observeContainer(i),e||this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(i){const e={widget:i,position:i.getPosition()};this._contentWidgets.hasOwnProperty(i.getId())&&console.warn("Overwriting a content widget with the same id:"+i.getId()),this._contentWidgets[i.getId()]=e,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(e)}layoutContentWidget(i){const e=i.getId();if(this._contentWidgets.hasOwnProperty(e)){const t=this._contentWidgets[e];t.position=i.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(t)}}removeContentWidget(i){const e=i.getId();if(this._contentWidgets.hasOwnProperty(e)){const t=this._contentWidgets[e];delete this._contentWidgets[e],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(t)}}addOverlayWidget(i){const e={widget:i,position:i.getPosition()};this._overlayWidgets.hasOwnProperty(i.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[i.getId()]=e,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(e)}layoutOverlayWidget(i){const e=i.getId();if(this._overlayWidgets.hasOwnProperty(e)){const t=this._overlayWidgets[e];t.position=i.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(t)}}removeOverlayWidget(i){const e=i.getId();if(this._overlayWidgets.hasOwnProperty(e)){const t=this._overlayWidgets[e];delete this._overlayWidgets[e],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(t)}}addGlyphMarginWidget(i){const e={widget:i,position:i.getPosition()};this._glyphMarginWidgets.hasOwnProperty(i.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[i.getId()]=e,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(e)}layoutGlyphMarginWidget(i){const e=i.getId();if(this._glyphMarginWidgets.hasOwnProperty(e)){const t=this._glyphMarginWidgets[e];t.position=i.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(t)}}removeGlyphMarginWidget(i){const e=i.getId();if(this._glyphMarginWidgets.hasOwnProperty(e)){const t=this._glyphMarginWidgets[e];delete this._glyphMarginWidgets[e],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(t)}}changeViewZones(i){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(i)}getTargetAtClientPoint(i,e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(i,e)}getScrolledVisiblePosition(i){if(!this._modelData||!this._modelData.hasRealView)return null;const e=this._modelData.model.validatePosition(i),t=this._configuration.options,n=t.get(k.layoutInfo),s=dp._getVerticalOffsetForPosition(this._modelData,e.lineNumber,e.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(e.lineNumber,e.column)+n.glyphMarginWidth+n.lineNumbersWidth+n.decorationsWidth-this.getScrollLeft();return{top:s,left:o,height:t.get(k.lineHeight)}}getOffsetForColumn(i,e){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(i,e)}render(i=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.viewModel.batchEvents(()=>{this._modelData.view.render(!0,i)})}setAriaOptions(i){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(i)}applyFontInfo(i){Ao(i,this._configuration.options.get(k.fontInfo))}setBanner(i,e){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=i,this._configuration.setReservedHeight(i?e:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(i){if(!i){this._modelData=null;return}const e=[];this._domElement.setAttribute("data-mode-id",i.getLanguageId()),this._configuration.setIsDominatedByLongLines(i.isDominatedByLongLines()),this._configuration.setModelLineCount(i.getLineCount());const t=i.onBeforeAttached(),n=new J7e(this._id,this._configuration,i,s9.create(ve(this._domElement)),r9.create(this._configuration.options),r=>xo(ve(this._domElement),r),this.languageConfigurationService,this._themeService,t,{batchChanges:qi(r=>{try{return this._beginUpdate(),r()}finally{this._endUpdate()}},"batchChanges")});e.push(i.onWillDispose(()=>this.setModel(null))),e.push(n.onEvent(r=>{switch(r.kind){case Ha.ContentSizeChanged:this._onDidContentSizeChange.fire(r);break;case Ha.FocusChanged:this._editorTextFocus.setValue(r.hasFocus);break;case Ha.ScrollChanged:this._onDidScrollChange.fire(r);break;case Ha.ViewZonesChanged:this._onDidChangeViewZones.fire();break;case Ha.HiddenAreasChanged:this._onDidChangeHiddenAreas.fire();break;case Ha.ReadOnlyEditAttempt:this._onDidAttemptReadOnlyEdit.fire();break;case Ha.CursorStateChanged:{if(r.reachedMaxCursorCount){const d=this.getOption(k.multiCursorLimit),h=g("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",d);this._notificationService.prompt(zs.Warning,h,[{label:"Find and Replace",run:qi(()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")},"run")},{label:g("goToSetting","Increase Multi Cursor Limit"),run:qi(()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})},"run")}])}const a=[];for(let d=0,h=r.selections.length;d<h;d++)a[d]=r.selections[d].getPosition();const l={position:a[0],secondaryPositions:a.slice(1),reason:r.reason,source:r.source};this._onDidChangeCursorPosition.fire(l);const c={selection:r.selections[0],secondarySelections:r.selections.slice(1),modelVersionId:r.modelVersionId,oldSelections:r.oldSelections,oldModelVersionId:r.oldModelVersionId,source:r.source,reason:r.reason};this._onDidChangeCursorSelection.fire(c);break}case Ha.ModelDecorationsChanged:this._onDidChangeModelDecorations.fire(r.event);break;case Ha.ModelLanguageChanged:this._domElement.setAttribute("data-mode-id",i.getLanguageId()),this._onDidChangeModelLanguage.fire(r.event);break;case Ha.ModelLanguageConfigurationChanged:this._onDidChangeModelLanguageConfiguration.fire(r.event);break;case Ha.ModelContentChanged:this._onDidChangeModelContent.fire(r.event);break;case Ha.ModelOptionsChanged:this._onDidChangeModelOptions.fire(r.event);break;case Ha.ModelTokensChanged:this._onDidChangeModelTokens.fire(r.event);break}}));const[s,o]=this._createView(n);if(o){this._domElement.appendChild(s.domNode.domNode);let r=Object.keys(this._contentWidgets);for(let a=0,l=r.length;a<l;a++){const c=r[a];s.addContentWidget(this._contentWidgets[c])}r=Object.keys(this._overlayWidgets);for(let a=0,l=r.length;a<l;a++){const c=r[a];s.addOverlayWidget(this._overlayWidgets[c])}r=Object.keys(this._glyphMarginWidgets);for(let a=0,l=r.length;a<l;a++){const c=r[a];s.addGlyphMarginWidget(this._glyphMarginWidgets[c])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",i.uri.toString())}this._modelData=new o2e(i,n,s,o,e,t)}_createView(i){let e;this.isSimpleWidget?e={paste:qi((s,o,r,a)=>{this._paste("keyboard",s,o,r,a)},"paste"),type:qi(s=>{this._type("keyboard",s)},"type"),compositionType:qi((s,o,r,a)=>{this._compositionType("keyboard",s,o,r,a)},"compositionType"),startComposition:qi(()=>{this._startComposition()},"startComposition"),endComposition:qi(()=>{this._endComposition("keyboard")},"endComposition"),cut:qi(()=>{this._cut("keyboard")},"cut")}:e={paste:qi((s,o,r,a)=>{const l={text:s,pasteOnNewLine:o,multicursorText:r,mode:a};this._commandService.executeCommand(Ms.Paste,l)},"paste"),type:qi(s=>{const o={text:s};this._commandService.executeCommand(Ms.Type,o)},"type"),compositionType:qi((s,o,r,a)=>{if(r||a){const l={text:s,replacePrevCharCnt:o,replaceNextCharCnt:r,positionDelta:a};this._commandService.executeCommand(Ms.CompositionType,l)}else{const l={text:s,replaceCharCnt:o};this._commandService.executeCommand(Ms.ReplacePreviousChar,l)}},"compositionType"),startComposition:qi(()=>{this._commandService.executeCommand(Ms.CompositionStart,{})},"startComposition"),endComposition:qi(()=>{this._commandService.executeCommand(Ms.CompositionEnd,{})},"endComposition"),cut:qi(()=>{this._commandService.executeCommand(Ms.Cut,{})},"cut")};const t=new WR(i.coordinatesConverter);return t.onKeyDown=s=>this._onKeyDown.fire(s),t.onKeyUp=s=>this._onKeyUp.fire(s),t.onContextMenu=s=>this._onContextMenu.fire(s),t.onMouseMove=s=>this._onMouseMove.fire(s),t.onMouseLeave=s=>this._onMouseLeave.fire(s),t.onMouseDown=s=>this._onMouseDown.fire(s),t.onMouseUp=s=>this._onMouseUp.fire(s),t.onMouseDrag=s=>this._onMouseDrag.fire(s),t.onMouseDrop=s=>this._onMouseDrop.fire(s),t.onMouseDropCanceled=s=>this._onMouseDropCanceled.fire(s),t.onMouseWheel=s=>this._onMouseWheel.fire(s),[new O4(e,this._configuration,this._themeService.getColorTheme(),i,t,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(i){i?.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(this._contributionsDisposable?.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const i=this._modelData.model,e=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),e&&this._domElement.contains(e)&&e.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),i}_registerDecorationType(i,e,t,n){this._codeEditorService.registerDecorationType(i,e,t,n,this)}_removeDecorationType(i){this._codeEditorService.removeDecorationType(i)}_resolveDecorationOptions(i,e){return this._codeEditorService.resolveDecorationOptions(i,e)}getTelemetryData(){return this._telemetryData}hasModel(){return this._modelData!==null}showDropIndicatorAt(i){const e=[{range:new V(i.lineNumber,i.column,i.lineNumber,i.column),options:dp.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(e),this.revealPosition(i,ot.Immediate)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(i,e){this._contextKeyService.createKey(i,e)}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,this._updateCounter===0&&this._onEndUpdate.fire()}};dp=n2e([Nu(3,He),Nu(4,Yb),Nu(5,Xi),Nu(6,Ye),Nu(7,$t),Nu(8,fs),Nu(9,hf),Nu(10,sD),Nu(11,i7e)],dp);let s2e=0;class o2e{constructor(e,t,n,s,o,r){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=s,this.listenersToRemove=o,this.attachedView=r}static{qi(this,"ModelData")}dispose(){ii(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}class h$ extends ${constructor(e){super(),this._emitterOptions=e,this._value=0}static{qi(this,"BooleanEventEmitter")}_onDidChangeToTrue=this._register(new x(this._emitterOptions));onDidChangeToTrue=this._onDidChangeToTrue.event;_onDidChangeToFalse=this._register(new x(this._emitterOptions));onDidChangeToFalse=this._onDidChangeToFalse.event;_value;setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class Jo extends x{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}static{qi(this,"InteractionEmitter")}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class r2e extends ${static{qi(this,"EditorContextKeysManager")}_editor;_editorSimpleInput;_editorFocus;_textInputFocus;_editorTextFocus;_tabMovesFocus;_editorReadonly;_inDiffEditor;_editorColumnSelection;_hasMultipleSelections;_hasNonEmptySelection;_canUndo;_canRedo;constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=Ae.editorSimpleInput.bindTo(t),this._editorFocus=Ae.focus.bindTo(t),this._textInputFocus=Ae.textInputFocus.bindTo(t),this._editorTextFocus=Ae.editorTextFocus.bindTo(t),this._tabMovesFocus=Ae.tabMovesFocus.bindTo(t),this._editorReadonly=Ae.readOnly.bindTo(t),this._inDiffEditor=Ae.inDiffEditor.bindTo(t),this._editorColumnSelection=Ae.columnSelection.bindTo(t),this._hasMultipleSelections=Ae.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=Ae.hasNonEmptySelection.bindTo(t),this._canUndo=Ae.canUndo.bindTo(t),this._canRedo=Ae.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(Sk.onDidChangeTabFocus(n=>this._tabMovesFocus.set(n))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(Sk.getTabFocusMode()),this._editorReadonly.set(e.get(k.readOnly)),this._inDiffEditor.set(e.get(k.inDiffEditor)),this._editorColumnSelection.set(e.get(k.columnSelection))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class a2e extends ${constructor(e,t,n){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=n,this._langId=Ae.languageId.bindTo(t),this._hasCompletionItemProvider=Ae.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=Ae.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=Ae.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=Ae.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=Ae.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=Ae.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=Ae.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=Ae.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=Ae.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=Ae.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=Ae.hasReferenceProvider.bindTo(t),this._hasRenameProvider=Ae.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=Ae.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=Ae.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=Ae.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=Ae.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=Ae.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=Ae.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInEmbeddedEditor=Ae.isInEmbeddedEditor.bindTo(t);const s=qi(()=>this._update(),"update");this._register(e.onDidChangeModel(s)),this._register(e.onDidChangeModelLanguage(s)),this._register(n.completionProvider.onDidChange(s)),this._register(n.codeActionProvider.onDidChange(s)),this._register(n.codeLensProvider.onDidChange(s)),this._register(n.definitionProvider.onDidChange(s)),this._register(n.declarationProvider.onDidChange(s)),this._register(n.implementationProvider.onDidChange(s)),this._register(n.typeDefinitionProvider.onDidChange(s)),this._register(n.hoverProvider.onDidChange(s)),this._register(n.documentHighlightProvider.onDidChange(s)),this._register(n.documentSymbolProvider.onDidChange(s)),this._register(n.referenceProvider.onDidChange(s)),this._register(n.renameProvider.onDidChange(s)),this._register(n.documentFormattingEditProvider.onDidChange(s)),this._register(n.documentRangeFormattingEditProvider.onDidChange(s)),this._register(n.signatureHelpProvider.onDidChange(s)),this._register(n.inlayHintsProvider.onDidChange(s)),s()}static{qi(this,"EditorModeContext")}_langId;_hasCompletionItemProvider;_hasCodeActionsProvider;_hasCodeLensProvider;_hasDefinitionProvider;_hasDeclarationProvider;_hasImplementationProvider;_hasTypeDefinitionProvider;_hasHoverProvider;_hasDocumentHighlightProvider;_hasDocumentSymbolProvider;_hasReferenceProvider;_hasRenameProvider;_hasDocumentFormattingProvider;_hasDocumentSelectionFormattingProvider;_hasMultipleDocumentFormattingProvider;_hasMultipleDocumentSelectionFormattingProvider;_hasSignatureHelpProvider;_hasInlayHintsProvider;_isInEmbeddedEditor;dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===Ve.walkThroughSnippet||e.uri.scheme===Ve.vscodeChatCodeBlock)})}}class l2e extends ${static{qi(this,"CodeEditorWidgetFocusTracker")}_hasDomElementFocus;_domFocusTracker;_overflowWidgetsDomNode;_onChange=this._register(new x);onChange=this._onChange.event;_overflowWidgetsDomNodeHasFocus;_hadFocus=void 0;constructor(e,t){super(),this._hasDomElementFocus=!1,this._domFocusTracker=this._register(al(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),t&&(this._overflowWidgetsDomNode=this._register(al(t)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){const e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){return this._hadFocus??!1}refreshState(){this._domFocusTracker.refreshState(),this._overflowWidgetsDomNode?.refreshState?.()}}class c2e{constructor(e,t){this._editor=e,Array.isArray(t)&&t.length>0&&this.set(t)}static{qi(this,"EditorDecorationsCollection")}_decorationIds=[];_isChangingDecorations=!1;get length(){return this._decorationIds.length}onDidChange(e,t,n){return this._editor.onDidChangeModelDecorations(s=>{this._isChangingDecorations||e.call(t,s)},n)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const n of this._decorationIds){const s=e.getDecorationRange(n);s&&t.push(s)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(n=>{t=n.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)})}finally{this._isChangingDecorations=!1}return t}}const d2e=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),h2e=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function wA(i){return d2e+encodeURIComponent(i.toString())+h2e}qi(wA,"getSquigglySVGData");const u2e=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),g2e=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function Vae(i){return u2e+encodeURIComponent(i.toString())+g2e}qi(Vae,"getDotDotDotSVGData");jc((i,e)=>{const t=i.getColor(zN);t&&e.addRule(`.monaco-editor .${tw.EditorErrorDecoration} { background: url("data:image/svg+xml,${wA(t)}") repeat-x bottom left; }`);const n=i.getColor(Xd);n&&e.addRule(`.monaco-editor .${tw.EditorWarningDecoration} { background: url("data:image/svg+xml,${wA(n)}") repeat-x bottom left; }`);const s=i.getColor(qg);s&&e.addRule(`.monaco-editor .${tw.EditorInfoDecoration} { background: url("data:image/svg+xml,${wA(s)}") repeat-x bottom left; }`);const o=i.getColor(vfe);o&&e.addRule(`.monaco-editor .${tw.EditorHintDecoration} { background: url("data:image/svg+xml,${Vae(o)}") no-repeat bottom left; }`);const r=i.getColor(_0e);r&&e.addRule(`.monaco-editor.showUnused .${tw.EditorUnnecessaryInlineDecoration} { opacity: ${r.rgba.a}; }`)});var f2e=Object.defineProperty,_n=(i,e)=>f2e(i,"name",{value:e,configurable:!0});function Wae(i,e,t,n){if(i.length===0)return e;if(e.length===0)return i;const s=[];let o=0,r=0;for(;o<i.length&&r<e.length;){const a=i[o],l=e[r],c=t(a),d=t(l);c<d?(s.push(a),o++):c>d?(s.push(l),r++):(s.push(n(a,l)),o++,r++)}for(;o<i.length;)s.push(i[o]),o++;for(;r<e.length;)s.push(e[r]),r++;return s}_n(Wae,"joinCombine");function bL(i,e){const t=new te,n=i.createDecorationsCollection();return t.add(ov({debugName:_n(()=>`Apply decorations from ${e.debugName}`,"debugName")},s=>{const o=e.read(s);n.set(o)})),t.add({dispose:_n(()=>{n.clear()},"dispose")}),t}_n(bL,"applyObservableDecorations");function Fw(i,e){return i.appendChild(e),ye(()=>{e.remove()})}_n(Fw,"appendRemoveOnDispose");function Hae(i,e){return i.prepend(e),ye(()=>{e.remove()})}_n(Hae,"prependRemoveOnDispose");class p2e extends ${static{_n(this,"ObservableElementSizeObserver")}elementSizeObserver;_width;get width(){return this._width}_height;get height(){return this._height}_automaticLayout=!1;get automaticLayout(){return this._automaticLayout}constructor(e,t){super(),this.elementSizeObserver=this._register(new kse(e,t)),this._width=ci(this,this.elementSizeObserver.getWidth()),this._height=ci(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(n=>us(s=>{this._width.set(this.elementSizeObserver.getWidth(),s),this._height.set(this.elementSizeObserver.getHeight(),s)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){this._automaticLayout=e,e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function z4(i,e,t){let n=e.get(),s=n,o=n;const r=ci("animatedValue",n);let a=-1;const l=300;let c;t.add(My({createEmptyChangeSummary:_n(()=>({animate:!1}),"createEmptyChangeSummary"),handleChange:_n((h,u)=>(h.didChange(e)&&(u.animate=u.animate||h.change),!0),"handleChange")},(h,u)=>{c!==void 0&&(i.cancelAnimationFrame(c),c=void 0),s=o,n=e.read(h),a=Date.now()-(u.animate?0:l),d()}));function d(){const h=Date.now()-a;o=Math.floor(Uae(h,s,n-s,l)),h<l?c=i.requestAnimationFrame(d):o=n,r.set(o,void 0)}return _n(d,"update"),r}_n(z4,"animatedObservable");function Uae(i,e,t,n){return i===n?e+t:t*(-Math.pow(2,-10*i/n)+1)+e}_n(Uae,"easeOutExpo");function zae(i,e){const t={};for(const n in i)t[n]=i[n];for(const n in e){const s=e[n];typeof t[n]=="object"&&s&&typeof s=="object"?t[n]=zae(t[n],s):t[n]=s}return t}_n(zae,"deepMerge");class p9 extends ${static{_n(this,"ViewZoneOverlayWidget")}constructor(e,t,n){super(),this._register(new m9(e,n)),this._register(rf(n,{height:t.actualHeight,top:t.actualTop}))}}class Vw{constructor(e,t){this._afterLineNumber=e,this.heightInPx=t}static{_n(this,"PlaceholderViewZone")}domNode=document.createElement("div");_actualTop=ci(this,void 0);_actualHeight=ci(this,void 0);actualTop=this._actualTop;actualHeight=this._actualHeight;showInHiddenAreas=!0;get afterLineNumber(){return this._afterLineNumber.get()}onChange=this._afterLineNumber;onDomNodeTop=_n(e=>{this._actualTop.set(e,void 0)},"onDomNodeTop");onComputedHeight=_n(e=>{this._actualHeight.set(e,void 0)},"onComputedHeight")}class m9{constructor(e,t){this._editor=e,this._domElement=t,this._editor.addOverlayWidget(this._overlayWidget)}static{_n(this,"ManagedOverlayWidget")}static _counter=0;_overlayWidgetId=`managedOverlayWidget-${m9._counter++}`;_overlayWidget={getId:_n(()=>this._overlayWidgetId,"getId"),getDomNode:_n(()=>this._domElement,"getDomNode"),getPosition:_n(()=>null,"getPosition")};dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}}function rf(i,e){return Li(t=>{for(let[n,s]of Object.entries(e))s&&typeof s=="object"&&"read"in s&&(s=s.read(t)),typeof s=="number"&&(s=`${s}px`),n=n.replace(/[A-Z]/g,o=>"-"+o.toLowerCase()),i.style[n]=s})}_n(rf,"applyStyle");function vL(i,e,t,n){const s=new te,o=[];return s.add(Ud((r,a)=>{const l=e.read(r),c=new Map,d=new Map;t&&t(!0),i.changeViewZones(h=>{for(const u of o)h.removeZone(u),n?.delete(u);o.length=0;for(const u of l){const f=h.addZone(u);u.setZoneId&&u.setZoneId(f),o.push(f),n?.add(f),c.set(u,f)}}),t&&t(!1),a.add(My({createEmptyChangeSummary(){return{zoneIds:[]}},handleChange(h,u){const f=d.get(h.changedObservable);return f!==void 0&&u.zoneIds.push(f),!0}},(h,u)=>{for(const f of l)f.onChange&&(d.set(f.onChange,c.get(f)),f.onChange.read(h));t&&t(!0),i.changeViewZones(f=>{for(const p of u.zoneIds)f.layoutZone(p)}),t&&t(!1)}))})),s.add({dispose(){t&&t(!0),i.changeViewZones(r=>{for(const a of o)r.removeZone(a)}),n?.clear(),t&&t(!1)}}),s}_n(vL,"applyViewZones");class UGe extends xr{static{_n(this,"DisposableCancellationTokenSource")}dispose(){super.dispose(!0)}}function $4(i,e){const t=O0(e,s=>s.original.startLineNumber<=i.lineNumber);if(!t)return V.fromPositions(i);if(t.original.endLineNumberExclusive<=i.lineNumber){const s=i.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return V.fromPositions(new j(s,i.column))}if(!t.innerChanges)return V.fromPositions(new j(t.modified.startLineNumber,1));const n=O0(t.innerChanges,s=>s.originalRange.getStartPosition().isBeforeOrEqual(i));if(!n){const s=i.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return V.fromPositions(new j(s,i.column))}if(n.originalRange.containsPosition(i))return n.modifiedRange;{const s=$ae(n.originalRange.getEndPosition(),i);return V.fromPositions(s.addToPosition(n.modifiedRange.getEndPosition()))}}_n($4,"translatePosition");function $ae(i,e){return i.lineNumber===e.lineNumber?new ys(0,e.column-i.column):new ys(e.lineNumber-i.lineNumber,e.column-1)}_n($ae,"lengthBetweenPositions");function Gae(i,e){let t;return i.filter(n=>{const s=e(n,t);return t=n,s})}_n(Gae,"filterWithPrevious");class nN{static{_n(this,"RefCounted")}static create(e,t=void 0){return new vM(e,e,t)}static createWithDisposable(e,t,n=void 0){const s=new te;return s.add(t),s.add(e),new vM(e,s,n)}static createOfNonDisposable(e,t,n=void 0){return new vM(e,t,n)}}class vM extends nN{constructor(e,t,n){super(),this.object=e,this._disposable=t,this._debugOwner=n,n&&this._addOwner(n)}static{_n(this,"BaseRefCounted")}_refCount=1;_isDisposed=!1;_owners=[];_addOwner(e){e&&this._owners.push(e)}createNewRef(e){return this._refCount++,e&&this._addOwner(e),new m2e(this,e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._decreaseRefCount(this._debugOwner))}_decreaseRefCount(e){if(this._refCount--,this._refCount===0&&this._disposable.dispose(),e){const t=this._owners.indexOf(e);t!==-1&&this._owners.splice(t,1)}}}class m2e extends nN{constructor(e,t){super(),this._base=e,this._debugOwner=t}static{_n(this,"ClonedRefCounted")}_isDisposed=!1;get object(){return this._base.object}createNewRef(e){return this._base.createNewRef(e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._base._decreaseRefCount(this._debugOwner))}}var _2e=Object.defineProperty,zf=(i,e)=>_2e(i,"name",{value:e,configurable:!0});function Ww(i){return E_.get(i)}zf(Ww,"observableCodeEditor");class E_ extends ${constructor(e){super(),this.editor=e,this._register(this.editor.onBeginUpdate(()=>this._beginUpdate())),this._register(this.editor.onEndUpdate(()=>this._endUpdate())),this._register(this.editor.onDidChangeModel(()=>{this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidType(t=>{this._beginUpdate();try{this._forceUpdate(),this.onDidType.trigger(this._currentTransaction,t)}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeModelContent(t=>{this._beginUpdate();try{this._versionId.set(this.editor.getModel()?.getVersionId()??null,this._currentTransaction,t),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeCursorSelection(t=>{this._beginUpdate();try{this._selections.set(this.editor.getSelections(),this._currentTransaction,t),this._forceUpdate()}finally{this._endUpdate()}}))}static{zf(this,"ObservableCodeEditor")}static _map=new Map;static get(e){let t=E_._map.get(e);if(!t){t=new E_(e),E_._map.set(e,t);const n=e.onDidDispose(()=>{const s=E_._map.get(e);s&&(E_._map.delete(e),s.dispose(),n.dispose())})}return t}_updateCounter=0;_currentTransaction=void 0;_beginUpdate(){this._updateCounter++,this._updateCounter===1&&(this._currentTransaction=new Fy(()=>{}))}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){const e=this._currentTransaction;this._currentTransaction=void 0,e.finish()}}forceUpdate(e){this._beginUpdate();try{return this._forceUpdate(),e?e(this._currentTransaction):void 0}finally{this._endUpdate()}}_forceUpdate(){this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set(this.editor.getModel()?.getVersionId()??null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}_model=ci(this,this.editor.getModel());model=this._model;isReadonly=pn(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(k.readOnly));_versionId=UM({owner:this,lazy:!0},this.editor.getModel()?.getVersionId()??null);versionId=this._versionId;_selections=UM({owner:this,equalsFn:tT(VM(St.selectionsEqual)),lazy:!0},this.editor.getSelections()??null);selections=this._selections;positions=Ig({owner:this,equalsFn:tT(VM(j.equals))},e=>this.selections.read(e)?.map(t=>t.getStartPosition())??null);isFocused=pn(this,e=>{const t=this.editor.onDidFocusEditorWidget(e),n=this.editor.onDidBlurEditorWidget(e);return{dispose(){t.dispose(),n.dispose()}}},()=>this.editor.hasWidgetFocus());value=kN(this,e=>(this.versionId.read(e),this.model.read(e)?.getValue()??""),(e,t)=>{const n=this.model.get();n!==null&&e!==n.getValue()&&n.setValue(e)});valueIsEmpty=ft(this,e=>(this.versionId.read(e),this.editor.getModel()?.getValueLength()===0));cursorSelection=Ig({owner:this,equalsFn:tT(St.selectionsEqual)},e=>this.selections.read(e)?.[0]??null);cursorPosition=Ig({owner:this,equalsFn:j.equals},e=>this.selections.read(e)?.[0]?.getPosition()??null);onDidType=TL(this);scrollTop=pn(this.editor.onDidScrollChange,()=>this.editor.getScrollTop());scrollLeft=pn(this.editor.onDidScrollChange,()=>this.editor.getScrollLeft());layoutInfo=pn(this.editor.onDidLayoutChange,()=>this.editor.getLayoutInfo());layoutInfoContentLeft=this.layoutInfo.map(e=>e.contentLeft);layoutInfoDecorationsLeft=this.layoutInfo.map(e=>e.decorationsLeft);contentWidth=pn(this.editor.onDidContentSizeChange,()=>this.editor.getContentWidth());getOption(e){return pn(this,t=>this.editor.onDidChangeConfiguration(n=>{n.hasChanged(e)&&t(void 0)}),()=>this.editor.getOption(e))}setDecorations(e){const t=new te,n=this.editor.createDecorationsCollection();return t.add(ov({owner:this,debugName:zf(()=>`Apply decorations from ${e.debugName}`,"debugName")},s=>{const o=e.read(s);n.set(o)})),t.add({dispose:zf(()=>{n.clear()},"dispose")}),t}_overlayWidgetCounter=0;createOverlayWidget(e){const t="observableOverlayWidget"+this._overlayWidgetCounter++,n={getDomNode:zf(()=>e.domNode,"getDomNode"),getPosition:zf(()=>e.position.get(),"getPosition"),getId:zf(()=>t,"getId"),allowEditorOverflow:e.allowEditorOverflow,getMinContentWidthInPx:zf(()=>e.minContentWidthInPx.get(),"getMinContentWidthInPx")};this.editor.addOverlayWidget(n);const s=Li(o=>{e.position.read(o),e.minContentWidthInPx.read(o),this.editor.layoutOverlayWidget(n)});return ye(()=>{s.dispose(),this.editor.removeOverlayWidget(n)})}}var b2e=Object.defineProperty,jR=(i,e)=>b2e(i,"name",{value:e,configurable:!0});class zGe{static{jR(this,"UnicodeTextModelHighlighter")}static computeUnicodeHighlights(e,t,n){const s=n?n.startLineNumber:1,o=n?n.endLineNumber:e.getLineCount(),r=new u$(t),a=r.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${Kae(Array.from(a))}`,"g");const c=new ww(null,l),d=[];let h=!1,u,f=0,p=0,m=0;e:for(let _=s,w=o;_<=w;_++){const v=e.getLineContent(_),b=v.length;c.reset(0);do if(u=c.next(v),u){let C=u.index,S=u.index+u[0].length;if(C>0){const R=v.charCodeAt(C-1);Ds(R)&&C--}if(S+1<b){const R=v.charCodeAt(S-1);Ds(R)&&S++}const D=v.substring(C,S);let T=dE(C+1,wH,v,0);T&&T.endColumn<=C+1&&(T=null);const I=r.shouldHighlightNonBasicASCII(D,T?T.word:null);if(I!==0){if(I===3?f++:I===2?p++:I===1?m++:TN(),d.length>=1e3){h=!0;break e}d.push(new V(_,C+1,_,S+1))}}while(u)}return{ranges:d,hasMore:h,ambiguousCharacterCount:f,invisibleCharacterCount:p,nonBasicAsciiCharacterCount:m}}static computeUnicodeHighlightReason(e,t){const n=new u$(t);switch(n.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const o=e.codePointAt(0),r=n.ambiguousCharacters.getPrimaryConfusable(o),a=mp.getLocales().filter(l=>!mp.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(o));return{kind:0,confusableWith:String.fromCodePoint(r),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function Kae(i,e){return`[${Yd(i.map(n=>String.fromCodePoint(n)).join(""))}]`}jR(Kae,"buildRegExpCharClassExpr");class u${constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=mp.getInstance(new Set(e.allowedLocales))}static{jR(this,"CodePointHighlighter")}allowedCodePoints;ambiguousCharacters;getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of _p.codePoints)G4(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const n=e.codePointAt(0);if(this.allowedCodePoints.has(n))return 0;if(this.options.nonBasicASCII)return 1;let s=!1,o=!1;if(t)for(const r of t){const a=r.codePointAt(0),l=VN(r);s=s||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!_p.isInvisibleCharacter(a)&&(o=!0)}return!s&&o?0:this.options.invisibleCharacters&&!G4(e)&&_p.isInvisibleCharacter(n)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(n)?3:0}}function G4(i){return i===" "||i===`
`||i==="	"}jR(G4,"isAllowedInvisibleCharacter");var v2e=Object.defineProperty,WD=(i,e)=>v2e(i,"name",{value:e,configurable:!0});const g$=new RegExp("\\bMARK:\\s*(.*)$","d"),w2e=/^-+|-+$/g;function C2e(i,e){let t=[];if(e.findRegionSectionHeaders&&e.foldingRules?.markers){const n=jae(i,e);t=t.concat(n)}if(e.findMarkSectionHeaders){const n=qae(i);t=t.concat(n)}return t}WD(C2e,"findSectionHeaders");function jae(i,e){const t=[],n=i.getLineCount();for(let s=1;s<=n;s++){const o=i.getLineContent(s),r=o.match(e.foldingRules.markers.start);if(r){const a={startLineNumber:s,startColumn:r[0].length+1,endLineNumber:s,endColumn:o.length+1};if(a.endColumn>a.startColumn){const l={range:a,..._9(o.substring(r[0].length)),shouldBeInComments:!1};(l.text||l.hasSeparatorLine)&&t.push(l)}}}return t}WD(jae,"collectRegionHeaders");function qae(i){const e=[],t=i.getLineCount();for(let n=1;n<=t;n++){const s=i.getLineContent(n);Yae(s,n,e)}return e}WD(qae,"collectMarkHeaders");function Yae(i,e,t){g$.lastIndex=0;const n=g$.exec(i);if(n){const s=n.indices[1][0]+1,o=n.indices[1][1]+1,r={startLineNumber:e,startColumn:s,endLineNumber:e,endColumn:o};if(r.endColumn>r.startColumn){const a={range:r,..._9(n[1]),shouldBeInComments:!0};(a.text||a.hasSeparatorLine)&&t.push(a)}}}WD(Yae,"addMarkHeaderIfFound");function _9(i){i=i.trim();const e=i.startsWith("-");return i=i.replace(w2e,""),{text:i,hasSeparatorLine:e}}WD(_9,"getHeaderText");const y2e=De("editorWorkerService");var Zae=Object.defineProperty,S2e=Object.getOwnPropertyDescriptor,Xae=(i,e)=>Zae(i,"name",{value:e,configurable:!0}),Qae=(i,e,t,n)=>{for(var s=n>1?void 0:n?S2e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Zae(e,t,s),s},K4=(i,e)=>(t,n)=>e(t,n,i);const Jae=De("diffProviderFactoryService");let j4=class{constructor(i){this.instantiationService=i}static{Xae(this,"WorkerBasedDiffProviderFactoryService")}_serviceBrand;createDiffProvider(i){return this.instantiationService.createInstance(hp,i)}};j4=Qae([K4(0,He)],j4);Rr(Jae,j4,Pr.Delayed);let hp=class{constructor(i,e,t){this.editorWorkerService=e,this.telemetryService=t,this.setOptions(i)}static{Xae(this,"WorkerBasedDocumentDiffProvider")}onDidChangeEventEmitter=new x;onDidChange=this.onDidChangeEventEmitter.event;diffAlgorithm="advanced";diffAlgorithmOnDidChangeSubscription=void 0;static diffCache=new Map;dispose(){this.diffAlgorithmOnDidChangeSubscription?.dispose()}async computeDiff(i,e,t,n){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(i,e,t,n);if(i.isDisposed()||e.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return e.getLineCount()===1&&e.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new Jl(new ct(1,2),new ct(1,e.getLineCount()+1),[new Al(i.getFullModelRange(),e.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const s=JSON.stringify([i.uri.toString(),e.uri.toString()]),o=JSON.stringify([i.id,e.id,i.getAlternativeVersionId(),e.getAlternativeVersionId(),JSON.stringify(t)]),r=hp.diffCache.get(s);if(r&&r.context===o)return r.result;const a=rv.create(),l=await this.editorWorkerService.computeDiff(i.uri,e.uri,t,this.diffAlgorithm),c=a.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:c,timedOut:l?.quitEarly??!0,detectedMoves:t.computeMoves?l?.moves.length??0:-1}),n.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!l)throw new Error("no diff result available");return hp.diffCache.size>10&&hp.diffCache.delete(hp.diffCache.keys().next().value),hp.diffCache.set(s,{result:l,context:o}),l}setOptions(i){let e=!1;i.diffAlgorithm&&this.diffAlgorithm!==i.diffAlgorithm&&(this.diffAlgorithmOnDidChangeSubscription?.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=i.diffAlgorithm,typeof i.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=i.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),e=!0),e&&this.onDidChangeEventEmitter.fire()}};hp=Qae([K4(1,y2e),K4(2,rs)],hp);var E2e=Object.defineProperty,HD=(i,e)=>E2e(i,"name",{value:e,configurable:!0});class Hg{constructor(e,t){this.diffs=e,this.hitTimeout=t}static{HD(this,"DiffAlgorithmResult")}static trivial(e,t){return new Hg([new Es(it.ofLength(e.length),it.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new Hg([new Es(it.ofLength(e.length),it.ofLength(t.length))],!0)}}class Es{constructor(e,t){this.seq1Range=e,this.seq2Range=t}static{HD(this,"SequenceDiff")}static invert(e,t){const n=[];return zW(e,(s,o)=>{n.push(Es.fromOffsetPairs(s?s.getEndExclusives():Hd.zero,o?o.getStarts():new Hd(t,(s?s.seq2Range.endExclusive-s.seq1Range.endExclusive:0)+t)))}),n}static fromOffsetPairs(e,t){return new Es(new it(e.offset1,t.offset1),new it(e.offset2,t.offset2))}static assertSorted(e){let t;for(const n of e){if(t&&!(t.seq1Range.endExclusive<=n.seq1Range.start&&t.seq2Range.endExclusive<=n.seq2Range.start))throw new Et("Sequence diffs must be sorted");t=n}}swap(){return new Es(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new Es(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new Es(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new Es(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new Es(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersectsOrTouches(e){return this.seq1Range.intersectsOrTouches(e.seq1Range)||this.seq2Range.intersectsOrTouches(e.seq2Range)}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),n=this.seq2Range.intersect(e.seq2Range);if(!(!t||!n))return new Es(t,n)}getStarts(){return new Hd(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new Hd(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}class Hd{constructor(e,t){this.offset1=e,this.offset2=t}static{HD(this,"OffsetPair")}static zero=new Hd(0,0);static max=new Hd(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new Hd(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}}class UD{static{HD(this,"InfiniteTimeout")}static instance=new UD;isValid(){return!0}}class L2e{constructor(e){if(this.timeout=e,e<=0)throw new Et("timeout must be positive")}static{HD(this,"DateTimeout")}startTime=Date.now();valid=!0;isValid(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid}disable(){this.timeout=Number.MAX_SAFE_INTEGER,this.isValid=()=>!0,this.valid=!0}}var D2e=Object.defineProperty,b9=(i,e)=>D2e(i,"name",{value:e,configurable:!0});class wM{constructor(e,t){this.width=e,this.height=t,this.array=new Array(e*t)}static{b9(this,"Array2D")}array=[];get(e,t){return this.array[e+t*this.width]}set(e,t,n){this.array[e+t*this.width]=n}}function sN(i){return i===A.Space||i===A.Tab}b9(sN,"isSpace");class wL{constructor(e,t,n){this.range=e,this.lines=t,this.source=n;let s=0;for(let o=e.startLineNumber-1;o<e.endLineNumberExclusive-1;o++){const r=t[o];for(let l=0;l<r.length;l++){s++;const c=r[l],d=wL.getKey(c);this.histogram[d]=(this.histogram[d]||0)+1}s++;const a=wL.getKey(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=s}static{b9(this,"LineRangeFragment")}static chrKeys=new Map;static getKey(e){let t=this.chrKeys.get(e);return t===void 0&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}totalCount;histogram=[];computeSimilarity(e){let t=0;const n=Math.max(this.histogram.length,e.histogram.length);for(let s=0;s<n;s++)t+=Math.abs((this.histogram[s]??0)-(e.histogram[s]??0));return 1-t/(this.totalCount+e.totalCount)}}var I2e=Object.defineProperty,f$=(i,e)=>I2e(i,"name",{value:e,configurable:!0});class T2e{static{f$(this,"DynamicProgrammingDiffing")}compute(e,t,n=UD.instance,s){if(e.length===0||t.length===0)return Hg.trivial(e,t);const o=new wM(e.length,t.length),r=new wM(e.length,t.length),a=new wM(e.length,t.length);for(let p=0;p<e.length;p++)for(let m=0;m<t.length;m++){if(!n.isValid())return Hg.trivialTimedOut(e,t);const _=p===0?0:o.get(p-1,m),w=m===0?0:o.get(p,m-1);let v;e.getElement(p)===t.getElement(m)?(p===0||m===0?v=0:v=o.get(p-1,m-1),p>0&&m>0&&r.get(p-1,m-1)===3&&(v+=a.get(p-1,m-1)),v+=s?s(p,m):1):v=-1;const b=Math.max(_,w,v);if(b===v){const C=p>0&&m>0?a.get(p-1,m-1):0;a.set(p,m,C+1),r.set(p,m,3)}else b===_?(a.set(p,m,0),r.set(p,m,1)):b===w&&(a.set(p,m,0),r.set(p,m,2));o.set(p,m,b)}const l=[];let c=e.length,d=t.length;function h(p,m){(p+1!==c||m+1!==d)&&l.push(new Es(new it(p+1,c),new it(m+1,d))),c=p,d=m}f$(h,"reportDecreasingAligningPositions");let u=e.length-1,f=t.length-1;for(;u>=0&&f>=0;)r.get(u,f)===3?(h(u,f),u--,f--):r.get(u,f)===1?u--:f--;return h(-1,-1),l.reverse(),new Hg(l,!1)}}var A2e=Object.defineProperty,CL=(i,e)=>A2e(i,"name",{value:e,configurable:!0});class ele{static{CL(this,"MyersDiffAlgorithm")}compute(e,t,n=UD.instance){if(e.length===0||t.length===0)return Hg.trivial(e,t);const s=e,o=t;function r(m,_){for(;m<s.length&&_<o.length&&s.getElement(m)===o.getElement(_);)m++,_++;return m}CL(r,"getXAfterSnake");let a=0;const l=new x2e;l.set(0,r(0,0));const c=new k2e;c.set(0,l.get(0)===0?null:new p$(null,0,0,l.get(0)));let d=0;e:for(;;){if(a++,!n.isValid())return Hg.trivialTimedOut(s,o);const m=-Math.min(a,o.length+a%2),_=Math.min(a,s.length+a%2);for(d=m;d<=_;d+=2){const w=d===_?-1:l.get(d+1),v=d===m?-1:l.get(d-1)+1,b=Math.min(Math.max(w,v),s.length),C=b-d;if(b>s.length||C>o.length)continue;const S=r(b,C);l.set(d,S);const D=b===w?c.get(d+1):c.get(d-1);if(c.set(d,S!==b?new p$(D,b,C,S-b):D),l.get(d)===s.length&&l.get(d)-d===o.length)break e}}let h=c.get(d);const u=[];let f=s.length,p=o.length;for(;;){const m=h?h.x+h.length:0,_=h?h.y+h.length:0;if((m!==f||_!==p)&&u.push(new Es(new it(m,f),new it(_,p))),!h)break;f=h.x,p=h.y,h=h.prev}return u.reverse(),new Hg(u,!1)}}class p${constructor(e,t,n,s){this.prev=e,this.x=t,this.y=n,this.length=s}static{CL(this,"SnakePath")}}class x2e{static{CL(this,"FastInt32Array")}positiveArr=new Int32Array(10);negativeArr=new Int32Array(10);get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const n=this.negativeArr;this.negativeArr=new Int32Array(n.length*2),this.negativeArr.set(n)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const n=this.positiveArr;this.positiveArr=new Int32Array(n.length*2),this.positiveArr.set(n)}this.positiveArr[e]=t}}}class k2e{static{CL(this,"FastArrayNegativeIndices")}positiveArr=[];negativeArr=[];get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}var N2e=Object.defineProperty,qR=(i,e)=>N2e(i,"name",{value:e,configurable:!0});class oN{constructor(e,t,n){this.lines=e,this.range=t,this.considerWhitespaceChanges=n,this.firstElementOffsetByLineIdx.push(0);for(let s=this.range.startLineNumber;s<=this.range.endLineNumber;s++){let o=e[s-1],r=0;s===this.range.startLineNumber&&this.range.startColumn>1&&(r=this.range.startColumn-1,o=o.substring(r)),this.lineStartOffsets.push(r);let a=0;if(!n){const c=o.trimStart();a=o.length-c.length,o=c.trimEnd()}this.trimmedWsLengthsByLineIdx.push(a);const l=s===this.range.endLineNumber?Math.min(this.range.endColumn-1-r-a,o.length):o.length;for(let c=0;c<l;c++)this.elements.push(o.charCodeAt(c));s<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}static{qR(this,"LinesSliceCharSequence")}elements=[];firstElementOffsetByLineIdx=[];lineStartOffsets=[];trimmedWsLengthsByLineIdx=[];toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new it(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=Y4(e>0?this.elements[e-1]:-1),n=Y4(e<this.elements.length?this.elements[e]:-1);if(t===7&&n===8)return 0;if(t===8)return 150;let s=0;return t!==n&&(s+=10,t===0&&n===1&&(s+=1)),s+=q4(t),s+=q4(n),s}translateOffset(e,t="right"){const n=Cb(this.firstElementOffsetByLineIdx,o=>o<=e),s=e-this.firstElementOffsetByLineIdx[n];return new j(this.range.startLineNumber+n,1+this.lineStartOffsets[n]+s+(s===0&&t==="left"?0:this.trimmedWsLengthsByLineIdx[n]))}translateRange(e){const t=this.translateOffset(e.start,"right"),n=this.translateOffset(e.endExclusive,"left");return n.isBefore(t)?V.fromPositions(n,n):V.fromPositions(t,n)}findWordContaining(e){if(e<0||e>=this.elements.length||!CA(this.elements[e]))return;let t=e;for(;t>0&&CA(this.elements[t-1]);)t--;let n=e;for(;n<this.elements.length&&CA(this.elements[n]);)n++;return new it(t,n)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){const t=wb(this.firstElementOffsetByLineIdx,s=>s<=e.start)??0,n=X$(this.firstElementOffsetByLineIdx,s=>e.endExclusive<=s)??this.elements.length;return new it(t,n)}}function CA(i){return i>=A.a&&i<=A.z||i>=A.A&&i<=A.Z||i>=A.Digit0&&i<=A.Digit9}qR(CA,"isWordChar");const P2e={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function q4(i){return P2e[i]}qR(q4,"getCategoryBoundaryScore");function Y4(i){return i===A.LineFeed?8:i===A.CarriageReturn?7:sN(i)?6:i>=A.a&&i<=A.z?0:i>=A.A&&i<=A.Z?1:i>=A.Digit0&&i<=A.Digit9?2:i===-1?3:i===A.Comma||i===A.Semicolon?5:4}qR(Y4,"getCategory");var R2e=Object.defineProperty,wm=(i,e)=>R2e(i,"name",{value:e,configurable:!0});function tle(i,e,t,n,s,o){let{moves:r,excludedChanges:a}=nle(i,e,t,o);if(!o.isValid())return[];const l=i.filter(d=>!a.has(d)),c=sle(l,n,s,e,t,o);return LA(r,c),r=ole(r),r=r.filter(d=>{const h=d.original.toOffsetRange().slice(e).map(f=>f.trim());return h.join(`
`).length>=15&&ile(h,f=>f.length>=2)>=2}),r=rle(i,r),r}wm(tle,"computeMovedLines");function ile(i,e){let t=0;for(const n of i)e(n)&&t++;return t}wm(ile,"countWhere");function nle(i,e,t,n){const s=[],o=i.filter(l=>l.modified.isEmpty&&l.original.length>=3).map(l=>new wL(l.original,e,l)),r=new Set(i.filter(l=>l.original.isEmpty&&l.modified.length>=3).map(l=>new wL(l.modified,t,l))),a=new Set;for(const l of o){let c=-1,d;for(const h of r){const u=l.computeSimilarity(h);u>c&&(c=u,d=h)}if(c>.9&&d&&(r.delete(d),s.push(new Er(l.range,d.range)),a.add(l.source),a.add(d.source)),!n.isValid())return{moves:s,excludedChanges:a}}return{moves:s,excludedChanges:a}}wm(nle,"computeMovesFromSimpleDeletionsToSimpleInsertions");function sle(i,e,t,n,s,o){const r=[],a=new LN;for(const u of i)for(let f=u.original.startLineNumber;f<u.original.endLineNumberExclusive-2;f++){const p=`${e[f-1]}:${e[f+1-1]}:${e[f+2-1]}`;a.add(p,{range:new ct(f,f+3)})}const l=[];i.sort(zl(u=>u.modified.startLineNumber,xp));for(const u of i){let f=[];for(let p=u.modified.startLineNumber;p<u.modified.endLineNumberExclusive-2;p++){const m=`${t[p-1]}:${t[p+1-1]}:${t[p+2-1]}`,_=new ct(p,p+3),w=[];a.forEach(m,({range:v})=>{for(const C of f)if(C.originalLineRange.endLineNumberExclusive+1===v.endLineNumberExclusive&&C.modifiedLineRange.endLineNumberExclusive+1===_.endLineNumberExclusive){C.originalLineRange=new ct(C.originalLineRange.startLineNumber,v.endLineNumberExclusive),C.modifiedLineRange=new ct(C.modifiedLineRange.startLineNumber,_.endLineNumberExclusive),w.push(C);return}const b={modifiedLineRange:_,originalLineRange:v};l.push(b),w.push(b)}),f=w}if(!o.isValid())return[]}l.sort(fG(zl(u=>u.modifiedLineRange.length,xp)));const c=new Pl,d=new Pl;for(const u of l){const f=u.modifiedLineRange.startLineNumber-u.originalLineRange.startLineNumber,p=c.subtractFrom(u.modifiedLineRange),m=d.subtractFrom(u.originalLineRange).getWithDelta(f),_=p.getIntersection(m);for(const w of _.ranges){if(w.length<3)continue;const v=w,b=w.delta(-f);r.push(new Er(b,v)),c.addRange(v),d.addRange(b)}}r.sort(zl(u=>u.original.startLineNumber,xp));const h=new _N(i);for(let u=0;u<r.length;u++){const f=r[u],p=h.findLastMonotonous(D=>D.original.startLineNumber<=f.original.startLineNumber),m=wb(i,D=>D.modified.startLineNumber<=f.modified.startLineNumber),_=Math.max(f.original.startLineNumber-p.original.startLineNumber,f.modified.startLineNumber-m.modified.startLineNumber),w=h.findLastMonotonous(D=>D.original.startLineNumber<f.original.endLineNumberExclusive),v=wb(i,D=>D.modified.startLineNumber<f.modified.endLineNumberExclusive),b=Math.max(w.original.endLineNumberExclusive-f.original.endLineNumberExclusive,v.modified.endLineNumberExclusive-f.modified.endLineNumberExclusive);let C;for(C=0;C<_;C++){const D=f.original.startLineNumber-C-1,T=f.modified.startLineNumber-C-1;if(D>n.length||T>s.length||c.contains(T)||d.contains(D)||!Z4(n[D-1],s[T-1],o))break}C>0&&(d.addRange(new ct(f.original.startLineNumber-C,f.original.startLineNumber)),c.addRange(new ct(f.modified.startLineNumber-C,f.modified.startLineNumber)));let S;for(S=0;S<b;S++){const D=f.original.endLineNumberExclusive+S,T=f.modified.endLineNumberExclusive+S;if(D>n.length||T>s.length||c.contains(T)||d.contains(D)||!Z4(n[D-1],s[T-1],o))break}S>0&&(d.addRange(new ct(f.original.endLineNumberExclusive,f.original.endLineNumberExclusive+S)),c.addRange(new ct(f.modified.endLineNumberExclusive,f.modified.endLineNumberExclusive+S))),(C>0||S>0)&&(r[u]=new Er(new ct(f.original.startLineNumber-C,f.original.endLineNumberExclusive+S),new ct(f.modified.startLineNumber-C,f.modified.endLineNumberExclusive+S)))}return r}wm(sle,"computeUnchangedMoves");function Z4(i,e,t){if(i.trim()===e.trim())return!0;if(i.length>300&&e.length>300)return!1;const s=new ele().compute(new oN([i],new V(1,1,1,i.length),!1),new oN([e],new V(1,1,1,e.length),!1),t);let o=0;const r=Es.invert(s.diffs,i.length);for(const d of r)d.seq1Range.forEach(h=>{sN(i.charCodeAt(h))||o++});function a(d){let h=0;for(let u=0;u<i.length;u++)sN(d.charCodeAt(u))||h++;return h}wm(a,"countNonWsChars");const l=a(i.length>e.length?i:e);return o/l>.6&&l>10}wm(Z4,"areLinesSimilar");function ole(i){if(i.length===0)return i;i.sort(zl(t=>t.original.startLineNumber,xp));const e=[i[0]];for(let t=1;t<i.length;t++){const n=e[e.length-1],s=i[t],o=s.original.startLineNumber-n.original.endLineNumberExclusive,r=s.modified.startLineNumber-n.modified.endLineNumberExclusive;if(o>=0&&r>=0&&o+r<=2){e[e.length-1]=n.join(s);continue}e.push(s)}return e}wm(ole,"joinCloseConsecutiveMoves");function rle(i,e){const t=new _N(i);return e=e.filter(n=>{const s=t.findLastMonotonous(a=>a.original.startLineNumber<n.original.endLineNumberExclusive)||new Er(new ct(1,1),new ct(1,1)),o=wb(i,a=>a.modified.startLineNumber<n.modified.endLineNumberExclusive);return s!==o}),e}wm(rle,"removeMovesInSameDiff");var O2e=Object.defineProperty,ale=(i,e)=>O2e(i,"name",{value:e,configurable:!0});class m${constructor(e,t){this.trimmedHash=e,this.lines=t}static{ale(this,"LineSequence")}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:X4(this.lines[e-1]),n=e===this.lines.length?0:X4(this.lines[e]);return 1e3-(t+n)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function X4(i){let e=0;for(;e<i.length&&(i.charCodeAt(e)===A.Space||i.charCodeAt(e)===A.Tab);)e++;return e}ale(X4,"getIndentation");var M2e=Object.defineProperty,sl=(i,e)=>M2e(i,"name",{value:e,configurable:!0});function Q4(i,e,t){let n=t;return n=J4(i,e,n),n=J4(i,e,n),n=lle(i,e,n),n}sl(Q4,"optimizeSequenceDiffs");function J4(i,e,t){if(t.length===0)return t;const n=[];n.push(t[0]);for(let o=1;o<t.length;o++){const r=n[n.length-1];let a=t[o];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-r.seq1Range.endExclusive;let c;for(c=1;c<=l&&!(i.getElement(a.seq1Range.start-c)!==i.getElement(a.seq1Range.endExclusive-c)||e.getElement(a.seq2Range.start-c)!==e.getElement(a.seq2Range.endExclusive-c));c++);if(c--,c===l){n[n.length-1]=new Es(new it(r.seq1Range.start,a.seq1Range.endExclusive-l),new it(r.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-c)}n.push(a)}const s=[];for(let o=0;o<n.length-1;o++){const r=n[o+1];let a=n[o];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=r.seq1Range.start-a.seq1Range.endExclusive;let c;for(c=0;c<l&&!(!i.isStronglyEqual(a.seq1Range.start+c,a.seq1Range.endExclusive+c)||!e.isStronglyEqual(a.seq2Range.start+c,a.seq2Range.endExclusive+c));c++);if(c===l){n[o+1]=new Es(new it(a.seq1Range.start+l,r.seq1Range.endExclusive),new it(a.seq2Range.start+l,r.seq2Range.endExclusive));continue}c>0&&(a=a.delta(c))}s.push(a)}return n.length>0&&s.push(n[n.length-1]),s}sl(J4,"joinSequenceDiffsByShifting");function lle(i,e,t){if(!i.getBoundaryScore||!e.getBoundaryScore)return t;for(let n=0;n<t.length;n++){const s=n>0?t[n-1]:void 0,o=t[n],r=n+1<t.length?t[n+1]:void 0,a=new it(s?s.seq1Range.endExclusive+1:0,r?r.seq1Range.start-1:i.length),l=new it(s?s.seq2Range.endExclusive+1:0,r?r.seq2Range.start-1:e.length);o.seq1Range.isEmpty?t[n]=eW(o,i,e,a,l):o.seq2Range.isEmpty&&(t[n]=eW(o.swap(),e,i,l,a).swap())}return t}sl(lle,"shiftSequenceDiffs");function eW(i,e,t,n,s){let r=1;for(;i.seq1Range.start-r>=n.start&&i.seq2Range.start-r>=s.start&&t.isStronglyEqual(i.seq2Range.start-r,i.seq2Range.endExclusive-r)&&r<100;)r++;r--;let a=0;for(;i.seq1Range.start+a<n.endExclusive&&i.seq2Range.endExclusive+a<s.endExclusive&&t.isStronglyEqual(i.seq2Range.start+a,i.seq2Range.endExclusive+a)&&a<100;)a++;if(r===0&&a===0)return i;let l=0,c=-1;for(let d=-r;d<=a;d++){const h=i.seq2Range.start+d,u=i.seq2Range.endExclusive+d,f=i.seq1Range.start+d,p=e.getBoundaryScore(f)+t.getBoundaryScore(h)+t.getBoundaryScore(u);p>c&&(c=p,l=d)}return i.delta(l)}sl(eW,"shiftDiffToBetterPosition");function cle(i,e,t){const n=[];for(const s of t){const o=n[n.length-1];if(!o){n.push(s);continue}s.seq1Range.start-o.seq1Range.endExclusive<=2||s.seq2Range.start-o.seq2Range.endExclusive<=2?n[n.length-1]=new Es(o.seq1Range.join(s.seq1Range),o.seq2Range.join(s.seq2Range)):n.push(s)}return n}sl(cle,"removeShortMatches");function dle(i,e,t){const n=Es.invert(t,i.length),s=[];let o=new Hd(0,0);function r(l,c){if(l.offset1<o.offset1||l.offset2<o.offset2)return;const d=i.findWordContaining(l.offset1),h=e.findWordContaining(l.offset2);if(!d||!h)return;let u=new Es(d,h);const f=u.intersect(c);let p=f.seq1Range.length,m=f.seq2Range.length;for(;n.length>0;){const _=n[0];if(!(_.seq1Range.intersects(u.seq1Range)||_.seq2Range.intersects(u.seq2Range)))break;const v=i.findWordContaining(_.seq1Range.start),b=e.findWordContaining(_.seq2Range.start),C=new Es(v,b),S=C.intersect(_);if(p+=S.seq1Range.length,m+=S.seq2Range.length,u=u.join(C),u.seq1Range.endExclusive>=_.seq1Range.endExclusive)n.shift();else break}p+m<(u.seq1Range.length+u.seq2Range.length)*2/3&&s.push(u),o=u.getEndExclusives()}for(sl(r,"scanWord");n.length>0;){const l=n.shift();l.seq1Range.isEmpty||(r(l.getStarts(),l),r(l.getEndExclusives().delta(-1),l))}return hle(t,s)}sl(dle,"extendDiffsToEntireWordIfAppropriate");function hle(i,e){const t=[];for(;i.length>0||e.length>0;){const n=i[0],s=e[0];let o;n&&(!s||n.seq1Range.start<s.seq1Range.start)?o=i.shift():o=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=o.seq1Range.start?t[t.length-1]=t[t.length-1].join(o):t.push(o)}return t}sl(hle,"mergeSequenceDiffs");function ule(i,e,t){let n=t;if(n.length===0)return n;let s=0,o;do{o=!1;const r=[n[0]];for(let a=1;a<n.length;a++){let l=function(u,f){const p=new it(d.seq1Range.endExclusive,c.seq1Range.start);return i.getText(p).replace(/\s/g,"").length<=4&&(u.seq1Range.length+u.seq2Range.length>5||f.seq1Range.length+f.seq2Range.length>5)};sl(l,"shouldJoinDiffs");const c=n[a],d=r[r.length-1];l(d,c)?(o=!0,r[r.length-1]=r[r.length-1].join(c)):r.push(c)}n=r}while(s++<10&&o);return n}sl(ule,"removeVeryShortMatchingLinesBetweenDiffs");function gle(i,e,t){let n=t;if(n.length===0)return n;let s=0,o;do{o=!1;const a=[n[0]];for(let l=1;l<n.length;l++){let c=function(f,p){const m=new it(h.seq1Range.endExclusive,d.seq1Range.start);if(i.countLinesIn(m)>5||m.length>500)return!1;const w=i.getText(m).trim();if(w.length>20||w.split(/\r\n|\r|\n/).length>1)return!1;const v=i.countLinesIn(f.seq1Range),b=f.seq1Range.length,C=e.countLinesIn(f.seq2Range),S=f.seq2Range.length,D=i.countLinesIn(p.seq1Range),T=p.seq1Range.length,I=e.countLinesIn(p.seq2Range),R=p.seq2Range.length,G=2*40+50;function K(X){return Math.min(X,G)}return sl(K,"cap"),Math.pow(Math.pow(K(v*40+b),1.5)+Math.pow(K(C*40+S),1.5),1.5)+Math.pow(Math.pow(K(D*40+T),1.5)+Math.pow(K(I*40+R),1.5),1.5)>(G**1.5)**1.5*1.3};sl(c,"shouldJoinDiffs");const d=n[l],h=a[a.length-1];c(h,d)?(o=!0,a[a.length-1]=a[a.length-1].join(d)):a.push(d)}n=a}while(s++<10&&o);const r=[];return rG(n,(a,l,c)=>{let d=l;function h(w){return w.length>0&&w.trim().length<=3&&l.seq1Range.length+l.seq2Range.length>100}sl(h,"shouldMarkAsChanged");const u=i.extendToFullLines(l.seq1Range),f=i.getText(new it(u.start,l.seq1Range.start));h(f)&&(d=d.deltaStart(-f.length));const p=i.getText(new it(l.seq1Range.endExclusive,u.endExclusive));h(p)&&(d=d.deltaEnd(p.length));const m=Es.fromOffsetPairs(a?a.getEndExclusives():Hd.zero,c?c.getStarts():Hd.max),_=d.intersect(m);r.length>0&&_.getStarts().equals(r[r.length-1].getEndExclusives())?r[r.length-1]=r[r.length-1].join(_):r.push(_)}),r}sl(gle,"removeVeryShortMatchingTextBetweenLongDiffs");var B2e=Object.defineProperty,up=(i,e)=>B2e(i,"name",{value:e,configurable:!0});class $Ge{static{up(this,"DefaultLinesDiffComputer")}dynamicProgrammingDiffing=new T2e;myersDiffingAlgorithm=new ele;computeDiff(e,t,n){if(e.length<=1&&ks(e,t,(S,D)=>S===D))return new dA([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new dA([new Jl(new ct(1,e.length+1),new ct(1,t.length+1),[new Al(new V(1,1,e.length,e[e.length-1].length+1),new V(1,1,t.length,t[t.length-1].length+1))])],[],!1);const s=n.maxComputationTimeMs===0?UD.instance:new L2e(n.maxComputationTimeMs),o=!n.ignoreTrimWhitespace,r=new Map;function a(S){let D=r.get(S);return D===void 0&&(D=r.size,r.set(S,D)),D}up(a,"getOrCreateHash");const l=e.map(S=>a(S.trim())),c=t.map(S=>a(S.trim())),d=new m$(l,e),h=new m$(c,t),u=d.length+h.length<1700?this.dynamicProgrammingDiffing.compute(d,h,s,(S,D)=>e[S]===t[D]?t[D].length===0?.1:1+Math.log(1+t[D].length):.99):this.myersDiffingAlgorithm.compute(d,h,s);let f=u.diffs,p=u.hitTimeout;f=Q4(d,h,f),f=ule(d,h,f);const m=[],_=up(S=>{if(o)for(let D=0;D<S;D++){const T=w+D,I=v+D;if(e[T]!==t[I]){const R=this.refineDiff(e,t,new Es(new it(T,T+1),new it(I,I+1)),s,o);for(const G of R.mappings)m.push(G);R.hitTimeout&&(p=!0)}}},"scanForWhitespaceChanges");let w=0,v=0;for(const S of f){Fp(()=>S.seq1Range.start-w===S.seq2Range.start-v);const D=S.seq1Range.start-w;_(D),w=S.seq1Range.endExclusive,v=S.seq2Range.endExclusive;const T=this.refineDiff(e,t,S,s,o);T.hitTimeout&&(p=!0);for(const I of T.mappings)m.push(I)}_(e.length-w);const b=tW(m,e,t);let C=[];return n.computeMoves&&(C=this.computeMoves(b,e,t,l,c,s,o)),Fp(()=>{function S(T,I){if(T.lineNumber<1||T.lineNumber>I.length)return!1;const R=I[T.lineNumber-1];return!(T.column<1||T.column>R.length+1)}up(S,"validatePosition");function D(T,I){return!(T.startLineNumber<1||T.startLineNumber>I.length+1||T.endLineNumberExclusive<1||T.endLineNumberExclusive>I.length+1)}up(D,"validateRange");for(const T of b){if(!T.innerChanges)return!1;for(const I of T.innerChanges)if(!(S(I.modifiedRange.getStartPosition(),t)&&S(I.modifiedRange.getEndPosition(),t)&&S(I.originalRange.getStartPosition(),e)&&S(I.originalRange.getEndPosition(),e)))return!1;if(!D(T.modified,t)||!D(T.original,e))return!1}return!0}),new dA(b,C,p)}computeMoves(e,t,n,s,o,r,a){return tle(e,t,n,s,o,r).map(d=>{const h=this.refineDiff(t,n,new Es(d.original.toOffsetRange(),d.modified.toOffsetRange()),r,a),u=tW(h.mappings,t,n,!0);return new s2(d,u)})}refineDiff(e,t,n,s,o){const a=ple(n).toRangeMapping2(e,t),l=new oN(e,a.originalRange,o),c=new oN(t,a.modifiedRange,o),d=l.length+c.length<500?this.dynamicProgrammingDiffing.compute(l,c,s):this.myersDiffingAlgorithm.compute(l,c,s);let h=d.diffs;return h=Q4(l,c,h),h=dle(l,c,h),h=cle(l,c,h),h=gle(l,c,h),{mappings:h.map(f=>new Al(l.translateRange(f.seq1Range),c.translateRange(f.seq2Range))),hitTimeout:d.hitTimeout}}}function tW(i,e,t,n=!1){const s=[];for(const o of wN(i.map(r=>fle(r,e,t)),(r,a)=>r.original.overlapOrTouch(a.original)||r.modified.overlapOrTouch(a.modified))){const r=o[0],a=o[o.length-1];s.push(new Jl(r.original.join(a.original),r.modified.join(a.modified),o.map(l=>l.innerChanges[0])))}return Fp(()=>!n&&s.length>0&&(s[0].modified.startLineNumber!==s[0].original.startLineNumber||t.length-s[s.length-1].modified.endLineNumberExclusive!==e.length-s[s.length-1].original.endLineNumberExclusive)?!1:AN(s,(o,r)=>r.original.startLineNumber-o.original.endLineNumberExclusive===r.modified.startLineNumber-o.modified.endLineNumberExclusive&&o.original.endLineNumberExclusive<r.original.startLineNumber&&o.modified.endLineNumberExclusive<r.modified.startLineNumber)),s}up(tW,"lineRangeMappingFromRangeMappings");function fle(i,e,t){let n=0,s=0;i.modifiedRange.endColumn===1&&i.originalRange.endColumn===1&&i.originalRange.startLineNumber+n<=i.originalRange.endLineNumber&&i.modifiedRange.startLineNumber+n<=i.modifiedRange.endLineNumber&&(s=-1),i.modifiedRange.startColumn-1>=t[i.modifiedRange.startLineNumber-1].length&&i.originalRange.startColumn-1>=e[i.originalRange.startLineNumber-1].length&&i.originalRange.startLineNumber<=i.originalRange.endLineNumber+s&&i.modifiedRange.startLineNumber<=i.modifiedRange.endLineNumber+s&&(n=1);const o=new ct(i.originalRange.startLineNumber+n,i.originalRange.endLineNumber+1+s),r=new ct(i.modifiedRange.startLineNumber+n,i.modifiedRange.endLineNumber+1+s);return new Jl(o,r,[i])}up(fle,"getLineRangeMapping");function ple(i){return new Er(new ct(i.seq1Range.start+1,i.seq1Range.endExclusive+1),new ct(i.seq2Range.start+1,i.seq2Range.endExclusive+1))}up(ple,"toLineRangeMapping");const F2e={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1};L("diffEditor.move.border","#8b8b8b9c",g("diffEditor.move.border","The border color for text that got moved in the diff editor."));L("diffEditor.moveActive.border","#FFA500",g("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor."));L("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},g("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));const V2e=Vt("diff-insert",ee.add,g("diffInsertIcon","Line decoration for inserts in the diff editor.")),mle=Vt("diff-remove",ee.remove,g("diffRemoveIcon","Line decoration for removals in the diff editor.")),_$=gs.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+Ne.asClassName(V2e),marginClassName:"gutter-insert"}),b$=gs.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+Ne.asClassName(mle),marginClassName:"gutter-delete"}),v$=gs.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),w$=gs.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),C$=gs.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),W2e=gs.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),H2e=gs.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),iW=gs.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),U2e=gs.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),z2e=gs.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});var $2e=Object.defineProperty,$I=(i,e)=>$2e(i,"name",{value:e,configurable:!0});class G2e extends ${constructor(e,t,n,s,o,r,a,l,c){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=n,this._diff=s,this._editor=o,this._viewLineCounts=r,this._originalTextModel=a,this._contextMenuService=l,this._clipboardService=c,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=Ne.asClassName(ee.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const d=this._modifiedEditor.getOption(k.lineHeight);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${d}px`,this._diffActions.style.lineHeight=`${d}px`,this._marginDomNode.appendChild(this._diffActions);let h=0;const u=n.getOption(k.useShadowDOM)&&!ol,f=$I((p,m)=>{this._contextMenuService.showContextMenu({domForShadowRoot:u?n.getDomNode()??void 0:void 0,getAnchor:$I(()=>({x:p,y:m}),"getAnchor"),getActions:$I(()=>{const _=[],w=s.modified.isEmpty;return _.push(new Mt("diff.clipboard.copyDeletedContent",w?s.original.length>1?g("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):g("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):s.original.length>1?g("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):g("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,async()=>{const b=this._originalTextModel.getValueInRange(s.original.toExclusiveRange());await this._clipboardService.writeText(b)})),s.original.length>1&&_.push(new Mt("diff.clipboard.copyDeletedLineContent",w?g("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.original.startLineNumber+h):g("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.original.startLineNumber+h),void 0,!0,async()=>{let b=this._originalTextModel.getLineContent(s.original.startLineNumber+h);b===""&&(b=this._originalTextModel.getEndOfLineSequence()===ag.LF?`
`:`\r
`),await this._clipboardService.writeText(b)})),n.getOption(k.readOnly)||_.push(new Mt("diff.inline.revertChange",g("diff.inline.revertChange.label","Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),_},"getActions"),autoSelectFirstItem:!0})},"showContextMenu");this._register(Gs(this._diffActions,"mousedown",p=>{if(!p.leftButton)return;const{top:m,height:_}=Xr(this._diffActions),w=Math.floor(d/3);p.preventDefault(),f(p.posx,m+_+w)})),this._register(n.onMouseMove(p=>{(p.target.type===Ot.CONTENT_VIEW_ZONE||p.target.type===Ot.GUTTER_VIEW_ZONE)&&p.target.detail.viewZoneId===this._getViewZoneId()?(h=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,d),this.visibility=!0):this.visibility=!1})),this._register(n.onMouseDown(p=>{p.event.leftButton&&(p.target.type===Ot.CONTENT_VIEW_ZONE||p.target.type===Ot.GUTTER_VIEW_ZONE)&&p.target.detail.viewZoneId===this._getViewZoneId()&&(p.event.preventDefault(),h=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,d),f(p.event.posx,p.event.posy+d))}))}static{$I(this,"InlineDiffDeletedCodeMargin")}_diffActions;_visibility=!1;get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}_updateLightBulbPosition(e,t,n){const{top:s}=Xr(e),o=t-s,r=Math.floor(o/n),a=r*n;if(this._diffActions.style.top=`${a}px`,this._viewLineCounts){let l=0;for(let c=0;c<this._viewLineCounts.length;c++)if(l+=this._viewLineCounts[c],r<l)return c}return r}}var K2e=Object.defineProperty,zD=(i,e)=>K2e(i,"name",{value:e,configurable:!0});const y$=OD("diffEditorWidget",{createHTML:zD(i=>i,"createHTML")});function _le(i,e,t,n){Ao(n,e.fontInfo);const s=t.length>0,o=new JL(1e4);let r=0,a=0;const l=[];for(let u=0;u<i.lineTokens.length;u++){const f=u+1,p=i.lineTokens[u],m=i.lineBreakData[u],_=Oc.filter(t,f,1,Number.MAX_SAFE_INTEGER);if(m){let w=0;for(const v of m.breakOffsets){const b=p.sliceAndInflate(w,v,0);r=Math.max(r,nW(a,b,Oc.extractWrapped(_,w,v),s,i.mightContainNonBasicASCII,i.mightContainRTL,e,o)),a++,w=v}l.push(m.breakOffsets.length)}else l.push(1),r=Math.max(r,nW(a,p,_,s,i.mightContainNonBasicASCII,i.mightContainRTL,e,o)),a++}r+=e.scrollBeyondLastColumn;const c=o.build(),d=y$?y$.createHTML(c):c;n.innerHTML=d;const h=r*e.typicalHalfwidthCharacterWidth;return{heightInLines:a,minWidthInPx:h,viewLineCounts:l}}zD(_le,"renderLines");class j2e{constructor(e,t,n,s){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=n,this.mightContainRTL=s}static{zD(this,"LineSource")}}class v9{constructor(e,t,n,s,o,r,a,l,c,d,h){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=n,this.typicalHalfwidthCharacterWidth=s,this.scrollBeyondLastColumn=o,this.lineHeight=r,this.lineDecorationsWidth=a,this.stopRenderingLineAfter=l,this.renderWhitespace=c,this.renderControlCharacters=d,this.fontLigatures=h}static{zD(this,"RenderOptions")}static fromEditor(e){const t=e.getOptions(),n=t.get(k.fontInfo),s=t.get(k.layoutInfo);return new v9(e.getModel()?.getOptions().tabSize||0,n,t.get(k.disableMonospaceOptimizations),n.typicalHalfwidthCharacterWidth,t.get(k.scrollBeyondLastColumn),t.get(k.lineHeight),s.decorationsWidth,t.get(k.stopRenderingLineAfter),t.get(k.renderWhitespace),t.get(k.renderControlCharacters),t.get(k.fontLigatures))}}function nW(i,e,t,n,s,o,r,a){a.appendString('<div class="view-line'),n||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(i*r.lineHeight)),a.appendString('px;width:1000000px;">');const l=e.getLineContent(),c=Xp.isBasicASCII(l,s),d=Xp.containsRTL(l,c,o),h=MR(new V2(r.fontInfo.isMonospace&&!r.disableMonospaceOptimizations,r.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,c,d,0,e,t,r.tabSize,0,r.fontInfo.spaceWidth,r.fontInfo.middotWidth,r.fontInfo.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==kd.OFF,null),a);return a.appendString("</div>"),h.characterMapping.getHorizontalOffset(h.characterMapping.length)}zD(nW,"renderOriginalLine");var ble=Object.defineProperty,q2e=Object.getOwnPropertyDescriptor,Ug=(i,e)=>ble(i,"name",{value:e,configurable:!0}),Y2e=(i,e,t,n)=>{for(var s=n>1?void 0:n?q2e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&ble(e,t,s),s},S$=(i,e)=>(t,n)=>e(t,n,i);let sW=class extends ${constructor(i,e,t,n,s,o,r,a,l,c){super(),this._targetWindow=i,this._editors=e,this._diffModel=t,this._options=n,this._diffEditorWidget=s,this._canIgnoreViewZoneUpdateEvent=o,this._origViewZonesToIgnore=r,this._modViewZonesToIgnore=a,this._clipboardService=l,this._contextMenuService=c;const d=ci("invalidateAlignmentsState",0),h=this._register(new xn(()=>{d.set(d.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(v=>{this._canIgnoreViewZoneUpdateEvent()||h.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(v=>{this._canIgnoreViewZoneUpdateEvent()||h.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(v=>{(v.hasChanged(k.wrappingInfo)||v.hasChanged(k.lineHeight))&&h.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(v=>{(v.hasChanged(k.wrappingInfo)||v.hasChanged(k.lineHeight))&&h.schedule()}));const u=this._diffModel.map(v=>v?pn(this,v.model.original.onDidChangeTokens,()=>v.model.original.tokenization.backgroundTokenizationState===Wb.Completed):void 0).map((v,b)=>v?.read(b)),f=ft(v=>{const b=this._diffModel.read(v),C=b?.diff.read(v);if(!b||!C)return null;d.read(v);const D=this._options.renderSideBySide.read(v);return oW(this._editors.original,this._editors.modified,C.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,D)}),p=ft(v=>{const b=this._diffModel.read(v)?.movedTextToCompare.read(v);if(!b)return null;d.read(v);const C=b.changes.map(S=>new Dle(S));return oW(this._editors.original,this._editors.modified,C,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function m(){const v=document.createElement("div");return v.className="diagonal-fill",v}Ug(m,"createFakeLinesDiv");const _=this._register(new te);this.viewZones=IL(this,(v,b)=>{_.clear();const C=f.read(v)||[],S=[],D=[],T=this._modifiedTopPadding.read(v);T>0&&D.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:T,showInHiddenAreas:!0,suppressMouseDown:!0});const I=this._originalTopPadding.read(v);I>0&&S.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:I,showInHiddenAreas:!0,suppressMouseDown:!0});const R=this._options.renderSideBySide.read(v),G=R?void 0:this._editors.modified._getViewModel()?.createLineBreaksComputer();if(G){const ue=this._editors.original.getModel();for(const fe of C)if(fe.diff)for(let $e=fe.originalRange.startLineNumber;$e<fe.originalRange.endLineNumberExclusive;$e++){if($e>ue.getLineCount())return{orig:S,mod:D};G?.addRequest(ue.getLineContent($e),null,null)}}const K=G?.finalize()??[];let X=0;const we=this._editors.modified.getOption(k.lineHeight),re=this._diffModel.read(v)?.movedTextToCompare.read(v),le=this._editors.original.getModel()?.mightContainNonBasicASCII()??!1,Ee=this._editors.original.getModel()?.mightContainRTL()??!1,Se=v9.fromEditor(this._editors.modified);for(const ue of C)if(ue.diff&&!R&&(!this._options.useTrueInlineDiffRendering.read(v)||!YR(ue.diff))){if(!ue.originalRange.isEmpty){u.read(v);const $e=document.createElement("div");$e.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const Ze=this._editors.original.getModel();if(ue.originalRange.endLineNumberExclusive-1>Ze.getLineCount())return{orig:S,mod:D};const Qt=new j2e(ue.originalRange.mapToLineArray(Sn=>Ze.tokenization.getLineTokens(Sn)),ue.originalRange.mapToLineArray(Sn=>K[X++]),le,Ee),qt=[];for(const Sn of ue.diff.innerChanges||[])qt.push(new y0(Sn.originalRange.delta(-(ue.diff.original.startLineNumber-1)),iW.className,lr.Regular));const en=_le(Qt,Se,qt,$e),as=document.createElement("div");if(as.className="inline-deleted-margin-view-zone",Ao(as,Se.fontInfo),this._options.renderIndicators.read(v))for(let Sn=0;Sn<en.heightInLines;Sn++){const Mr=document.createElement("div");Mr.className=`delete-sign ${Ne.asClassName(mle)}`,Mr.setAttribute("style",`position:absolute;top:${Sn*we}px;width:${Se.lineDecorationsWidth}px;height:${we}px;right:0;`),as.appendChild(Mr)}let Zo;_.add(new G2e(()=>pt(Zo),as,this._editors.modified,ue.diff,this._diffEditorWidget,en.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let Sn=0;Sn<en.viewLineCounts.length;Sn++){const Mr=en.viewLineCounts[Sn];Mr>1&&S.push({afterLineNumber:ue.originalRange.startLineNumber+Sn,domNode:m(),heightInPx:(Mr-1)*we,showInHiddenAreas:!0,suppressMouseDown:!0})}D.push({afterLineNumber:ue.modifiedRange.startLineNumber-1,domNode:$e,heightInPx:en.heightInLines*we,minWidthInPx:en.minWidthInPx,marginDomNode:as,setZoneId(Sn){Zo=Sn},showInHiddenAreas:!0,suppressMouseDown:!0})}const fe=document.createElement("div");fe.className="gutter-delete",S.push({afterLineNumber:ue.originalRange.endLineNumberExclusive-1,domNode:m(),heightInPx:ue.modifiedHeightInPx,marginDomNode:fe,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const fe=ue.modifiedHeightInPx-ue.originalHeightInPx;if(fe>0){if(re?.lineRangeMapping.original.delta(-1).deltaLength(2).contains(ue.originalRange.endLineNumberExclusive-1))continue;S.push({afterLineNumber:ue.originalRange.endLineNumberExclusive-1,domNode:m(),heightInPx:fe,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let $e=function(){const Qt=document.createElement("div");return Qt.className="arrow-revert-change "+Ne.asClassName(ee.arrowRight),b.add(F(Qt,"mousedown",qt=>qt.stopPropagation())),b.add(F(Qt,"click",qt=>{qt.stopPropagation(),s.revert(ue.diff)})),ce("div",{},Qt)};if(Ug($e,"createViewZoneMarginArrow"),re?.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(ue.modifiedRange.endLineNumberExclusive-1))continue;let Ze;ue.diff&&ue.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(v)&&(Ze=$e()),D.push({afterLineNumber:ue.modifiedRange.endLineNumberExclusive-1,domNode:m(),heightInPx:-fe,marginDomNode:Ze,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const ue of p.read(v)??[]){if(!re?.lineRangeMapping.original.intersect(ue.originalRange)||!re?.lineRangeMapping.modified.intersect(ue.modifiedRange))continue;const fe=ue.modifiedHeightInPx-ue.originalHeightInPx;fe>0?S.push({afterLineNumber:ue.originalRange.endLineNumberExclusive-1,domNode:m(),heightInPx:fe,showInHiddenAreas:!0,suppressMouseDown:!0}):D.push({afterLineNumber:ue.modifiedRange.endLineNumberExclusive-1,domNode:m(),heightInPx:-fe,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:S,mod:D}});let w=!1;this._register(this._editors.original.onDidScrollChange(v=>{v.scrollLeftChanged&&!w&&(w=!0,this._editors.modified.setScrollLeft(v.scrollLeft),w=!1)})),this._register(this._editors.modified.onDidScrollChange(v=>{v.scrollLeftChanged&&!w&&(w=!0,this._editors.original.setScrollLeft(v.scrollLeft),w=!1)})),this._originalScrollTop=pn(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=pn(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(Li(v=>{const b=this._originalScrollTop.read(v)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(v))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(v));b!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(b,ot.Immediate)})),this._register(Li(v=>{const b=this._modifiedScrollTop.read(v)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(v))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(v));b!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(b,ot.Immediate)})),this._register(Li(v=>{const b=this._diffModel.read(v)?.movedTextToCompare.read(v);let C=0;if(b){const S=this._editors.original.getTopForLineNumber(b.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();C=this._editors.modified.getTopForLineNumber(b.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-S}C>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(C,void 0)):C<0?(this._modifiedTopPadding.set(-C,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-C,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+C,void 0,!0)}))}static{Ug(this,"DiffEditorViewZones")}_originalTopPadding=ci(this,0);_originalScrollTop;_originalScrollOffset=ci(this,0);_originalScrollOffsetAnimated=z4(this._targetWindow,this._originalScrollOffset,this._store);_modifiedTopPadding=ci(this,0);_modifiedScrollTop;_modifiedScrollOffset=ci(this,0);_modifiedScrollOffsetAnimated=z4(this._targetWindow,this._modifiedScrollOffset,this._store);viewZones};sW=Y2e([S$(8,D7),S$(9,Hi)],sW);function oW(i,e,t,n,s,o){const r=new $g(rW(i,n)),a=new $g(rW(e,s)),l=i.getOption(k.lineHeight),c=e.getOption(k.lineHeight),d=[];let h=0,u=0;function f(p,m){for(;;){let _=r.peek(),w=a.peek();if(_&&_.lineNumber>=p&&(_=void 0),w&&w.lineNumber>=m&&(w=void 0),!_&&!w)break;const v=_?_.lineNumber-h:Number.MAX_VALUE,b=w?w.lineNumber-u:Number.MAX_VALUE;v<b?(r.dequeue(),w={lineNumber:_.lineNumber-h+u,heightInPx:0}):v>b?(a.dequeue(),_={lineNumber:w.lineNumber-u+h,heightInPx:0}):(r.dequeue(),a.dequeue()),d.push({originalRange:ct.ofLength(_.lineNumber,1),modifiedRange:ct.ofLength(w.lineNumber,1),originalHeightInPx:l+_.heightInPx,modifiedHeightInPx:c+w.heightInPx,diff:void 0})}}Ug(f,"handleAlignmentsOutsideOfDiffs");for(const p of t){let m=function(C,S,D=!1){if(C<b||S<v)return;if(w)w=!1;else if(!D&&(C===b||S===v))return;const T=new ct(b,C),I=new ct(v,S);if(T.isEmpty&&I.isEmpty)return;const R=r.takeWhile(K=>K.lineNumber<C)?.reduce((K,X)=>K+X.heightInPx,0)??0,G=a.takeWhile(K=>K.lineNumber<S)?.reduce((K,X)=>K+X.heightInPx,0)??0;d.push({originalRange:T,modifiedRange:I,originalHeightInPx:T.length*l+R,modifiedHeightInPx:I.length*c+G,diff:p.lineRangeMapping}),b=C,v=S};Ug(m,"emitAlignment");const _=p.lineRangeMapping;f(_.original.startLineNumber,_.modified.startLineNumber);let w=!0,v=_.modified.startLineNumber,b=_.original.startLineNumber;if(o)for(const C of _.innerChanges||[]){C.originalRange.startColumn>1&&C.modifiedRange.startColumn>1&&m(C.originalRange.startLineNumber,C.modifiedRange.startLineNumber);const S=i.getModel(),D=C.originalRange.endLineNumber<=S.getLineCount()?S.getLineMaxColumn(C.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;C.originalRange.endColumn<D&&m(C.originalRange.endLineNumber,C.modifiedRange.endLineNumber)}m(_.original.endLineNumberExclusive,_.modified.endLineNumberExclusive,!0),h=_.original.endLineNumberExclusive,u=_.modified.endLineNumberExclusive}return f(Number.MAX_VALUE,Number.MAX_VALUE),d}Ug(oW,"computeRangeAlignment");function rW(i,e){const t=[],n=[],s=i.getOption(k.wrappingInfo).wrappingColumn!==-1,o=i._getViewModel().coordinatesConverter,r=i.getOption(k.lineHeight);if(s)for(let l=1;l<=i.getModel().getLineCount();l++){const c=o.getModelLineViewLineCount(l);c>1&&n.push({lineNumber:l,heightInPx:r*(c-1)})}for(const l of i.getWhitespaces()){if(e.has(l.id))continue;const c=l.afterLineNumber===0?0:o.convertViewPositionToModelPosition(new j(l.afterLineNumber,1)).lineNumber;t.push({lineNumber:c,heightInPx:l.height})}return Wae(t,n,l=>l.lineNumber,(l,c)=>({lineNumber:l.lineNumber,heightInPx:l.heightInPx+c.heightInPx}))}Ug(rW,"getAdditionalLineHeights");function YR(i){return i.innerChanges?i.innerChanges.every(e=>aW(e.modifiedRange)&&aW(e.originalRange)||e.originalRange.equalsRange(new V(1,1,1,1))):!1}Ug(YR,"allowsTrueInlineDiffRendering");function aW(i){return i.startLineNumber===i.endLineNumber}Ug(aW,"rangeIsSingleLine");var vle=Object.defineProperty,Z2e=Object.getOwnPropertyDescriptor,$D=(i,e)=>vle(i,"name",{value:e,configurable:!0}),X2e=(i,e,t,n)=>{for(var s=n>1?void 0:n?Z2e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&vle(e,t,s),s},Q2e=(i,e)=>(t,n)=>e(t,n,i);let lW=class{constructor(i,e){this._accessibilityService=e;const t={...i,...cW(i,F2e)};this._options=ci(this,t)}static{$D(this,"DiffEditorOptions")}_options;get editorOptions(){return this._options}_diffEditorWidth=ci(this,0);_screenReaderMode=pn(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized());couldShowInlineViewBecauseOfSize=ft(this,i=>this._options.read(i).renderSideBySide&&this._diffEditorWidth.read(i)<=this._options.read(i).renderSideBySideInlineBreakpoint);renderOverviewRuler=ft(this,i=>this._options.read(i).renderOverviewRuler);renderSideBySide=ft(this,i=>this.compactMode.read(i)&&this.shouldRenderInlineViewInSmartMode.read(i)?!1:this._options.read(i).renderSideBySide&&!(this._options.read(i).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(i)&&!this._screenReaderMode.read(i)));readOnly=ft(this,i=>this._options.read(i).readOnly);shouldRenderOldRevertArrows=ft(this,i=>!(!this._options.read(i).renderMarginRevertIcon||!this.renderSideBySide.read(i)||this.readOnly.read(i)||this.shouldRenderGutterMenu.read(i)));shouldRenderGutterMenu=ft(this,i=>this._options.read(i).renderGutterMenu);renderIndicators=ft(this,i=>this._options.read(i).renderIndicators);enableSplitViewResizing=ft(this,i=>this._options.read(i).enableSplitViewResizing);splitViewDefaultRatio=ft(this,i=>this._options.read(i).splitViewDefaultRatio);ignoreTrimWhitespace=ft(this,i=>this._options.read(i).ignoreTrimWhitespace);maxComputationTimeMs=ft(this,i=>this._options.read(i).maxComputationTime);showMoves=ft(this,i=>this._options.read(i).experimental.showMoves&&this.renderSideBySide.read(i));isInEmbeddedEditor=ft(this,i=>this._options.read(i).isInEmbeddedEditor);diffWordWrap=ft(this,i=>this._options.read(i).diffWordWrap);originalEditable=ft(this,i=>this._options.read(i).originalEditable);diffCodeLens=ft(this,i=>this._options.read(i).diffCodeLens);accessibilityVerbose=ft(this,i=>this._options.read(i).accessibilityVerbose);diffAlgorithm=ft(this,i=>this._options.read(i).diffAlgorithm);showEmptyDecorations=ft(this,i=>this._options.read(i).experimental.showEmptyDecorations);onlyShowAccessibleDiffViewer=ft(this,i=>this._options.read(i).onlyShowAccessibleDiffViewer);compactMode=ft(this,i=>this._options.read(i).compactMode);trueInlineDiffRenderingEnabled=ft(this,i=>this._options.read(i).experimental.useTrueInlineView);useTrueInlineDiffRendering=ft(this,i=>!this.renderSideBySide.read(i)&&this.trueInlineDiffRenderingEnabled.read(i));hideUnchangedRegions=ft(this,i=>this._options.read(i).hideUnchangedRegions.enabled);hideUnchangedRegionsRevealLineCount=ft(this,i=>this._options.read(i).hideUnchangedRegions.revealLineCount);hideUnchangedRegionsContextLineCount=ft(this,i=>this._options.read(i).hideUnchangedRegions.contextLineCount);hideUnchangedRegionsMinimumLineCount=ft(this,i=>this._options.read(i).hideUnchangedRegions.minimumLineCount);updateOptions(i){const e=cW(i,this._options.get()),t={...this._options.get(),...i,...e};this._options.set(t,void 0,{changedOptions:i})}setWidth(i){this._diffEditorWidth.set(i,void 0)}_model=ci(this,void 0);setModel(i){this._model.set(i,void 0)}shouldRenderInlineViewInSmartMode=this._model.map(this,i=>cK(this,e=>{const t=i?.diff.read(e);return t?wle(t,this.trueInlineDiffRenderingEnabled.read(e)):void 0})).flatten().map(this,i=>!!i);inlineViewHideOriginalLineNumbers=this.compactMode};lW=X2e([Q2e(1,hf)],lW);function wle(i,e){return i.mappings.every(t=>Cle(t.lineRangeMapping)||yle(t.lineRangeMapping)||e&&YR(t.lineRangeMapping))}$D(wle,"isSimpleDiff");function Cle(i){return i.original.length===0}$D(Cle,"isInsertion");function yle(i){return i.modified.length===0}$D(yle,"isDeletion");function cW(i,e){return{enableSplitViewResizing:xe(i.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:jY(i.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:xe(i.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:xe(i.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:Kf(i.maxComputationTime,e.maxComputationTime,0,fn.MAX_SAFE_SMALL_INTEGER),maxFileSize:Kf(i.maxFileSize,e.maxFileSize,0,fn.MAX_SAFE_SMALL_INTEGER),ignoreTrimWhitespace:xe(i.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:xe(i.renderIndicators,e.renderIndicators),originalEditable:xe(i.originalEditable,e.originalEditable),diffCodeLens:xe(i.diffCodeLens,e.diffCodeLens),renderOverviewRuler:xe(i.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:ln(i.diffWordWrap,e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:ln(i.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:xe(i.accessibilityVerbose,e.accessibilityVerbose),experimental:{showMoves:xe(i.experimental?.showMoves,e.experimental.showMoves),showEmptyDecorations:xe(i.experimental?.showEmptyDecorations,e.experimental.showEmptyDecorations),useTrueInlineView:xe(i.experimental?.useTrueInlineView,e.experimental.useTrueInlineView)},hideUnchangedRegions:{enabled:xe(i.hideUnchangedRegions?.enabled??i.experimental?.collapseUnchangedRegions,e.hideUnchangedRegions.enabled),contextLineCount:Kf(i.hideUnchangedRegions?.contextLineCount,e.hideUnchangedRegions.contextLineCount,0,fn.MAX_SAFE_SMALL_INTEGER),minimumLineCount:Kf(i.hideUnchangedRegions?.minimumLineCount,e.hideUnchangedRegions.minimumLineCount,0,fn.MAX_SAFE_SMALL_INTEGER),revealLineCount:Kf(i.hideUnchangedRegions?.revealLineCount,e.hideUnchangedRegions.revealLineCount,0,fn.MAX_SAFE_SMALL_INTEGER)},isInEmbeddedEditor:xe(i.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:xe(i.onlyShowAccessibleDiffViewer,e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:Kf(i.renderSideBySideInlineBreakpoint,e.renderSideBySideInlineBreakpoint,0,fn.MAX_SAFE_SMALL_INTEGER),useInlineViewWhenSpaceIsLimited:xe(i.useInlineViewWhenSpaceIsLimited,e.useInlineViewWhenSpaceIsLimited),renderGutterMenu:xe(i.renderGutterMenu,e.renderGutterMenu),compactMode:xe(i.compactMode,e.compactMode)}}$D(cW,"validateDiffEditorOptions");var Sle=Object.defineProperty,J2e=Object.getOwnPropertyDescriptor,af=(i,e)=>Sle(i,"name",{value:e,configurable:!0}),e9e=(i,e,t,n)=>{for(var s=n>1?void 0:n?J2e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Sle(e,t,s),s},t9e=(i,e)=>(t,n)=>e(t,n,i);let dW=class extends ${constructor(i,e,t){super(),this.model=i,this._options=e,this._diffProviderFactoryService=t,this._register(ye(()=>this._cancellationTokenSource.cancel()));const n=TL("contentChangedSignal"),s=this._register(new xn(()=>n.trigger(void 0),200));this._register(Li(r=>{const a=this._unchangedRegions.read(r);if(!a||a.regions.some(f=>f.isDragged.read(r)))return;const l=a.originalDecorationIds.map(f=>i.original.getDecorationRange(f)).map(f=>f?ct.fromRangeInclusive(f):void 0),c=a.modifiedDecorationIds.map(f=>i.modified.getDecorationRange(f)).map(f=>f?ct.fromRangeInclusive(f):void 0),d=a.regions.map((f,p)=>!l[p]||!c[p]?void 0:new Ap(l[p].startLineNumber,c[p].startLineNumber,l[p].length,f.visibleLineCountTop.read(r),f.visibleLineCountBottom.read(r))).filter(vb),h=[];let u=!1;for(const f of wN(d,(p,m)=>p.getHiddenModifiedRange(r).endLineNumberExclusive===m.getHiddenModifiedRange(r).startLineNumber))if(f.length>1){u=!0;const p=f.reduce((_,w)=>_+w.lineCount,0),m=new Ap(f[0].originalLineNumber,f[0].modifiedLineNumber,p,f[0].visibleLineCountTop.get(),f[f.length-1].visibleLineCountBottom.get());h.push(m)}else h.push(f[0]);if(u){const f=i.original.deltaDecorations(a.originalDecorationIds,h.map(m=>({range:m.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),p=i.modified.deltaDecorations(a.modifiedDecorationIds,h.map(m=>({range:m.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));us(m=>{this._unchangedRegions.set({regions:h,originalDecorationIds:f,modifiedDecorationIds:p},m)})}}));const o=af((r,a,l)=>{const c=Ap.fromDiffs(r.changes,i.original.getLineCount(),i.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(l),this._options.hideUnchangedRegionsContextLineCount.read(l));let d;const h=this._unchangedRegions.get();if(h){const m=h.originalDecorationIds.map(b=>i.original.getDecorationRange(b)).map(b=>b?ct.fromRangeInclusive(b):void 0),_=h.modifiedDecorationIds.map(b=>i.modified.getDecorationRange(b)).map(b=>b?ct.fromRangeInclusive(b):void 0);let v=Gae(h.regions.map((b,C)=>{if(!m[C]||!_[C])return;const S=m[C].length;return new Ap(m[C].startLineNumber,_[C].startLineNumber,S,Math.min(b.visibleLineCountTop.get(),S),Math.min(b.visibleLineCountBottom.get(),S-b.visibleLineCountTop.get()))}).filter(vb),(b,C)=>!C||b.modifiedLineNumber>=C.modifiedLineNumber+C.lineCount&&b.originalLineNumber>=C.originalLineNumber+C.lineCount).map(b=>new Er(b.getHiddenOriginalRange(l),b.getHiddenModifiedRange(l)));v=Er.clip(v,ct.ofLength(1,i.original.getLineCount()),ct.ofLength(1,i.modified.getLineCount())),d=Er.inverse(v,i.original.getLineCount(),i.modified.getLineCount())}const u=[];if(d)for(const m of c){const _=d.filter(w=>w.original.intersectsStrict(m.originalUnchangedRange)&&w.modified.intersectsStrict(m.modifiedUnchangedRange));u.push(...m.setVisibleRanges(_,a))}else u.push(...c);const f=i.original.deltaDecorations(h?.originalDecorationIds||[],u.map(m=>({range:m.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),p=i.modified.deltaDecorations(h?.modifiedDecorationIds||[],u.map(m=>({range:m.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:u,originalDecorationIds:f,modifiedDecorationIds:p},a)},"updateUnchangedRegions");this._register(i.modified.onDidChangeContent(r=>{if(this._diff.get()){const l=pg.fromModelContentChanges(r.changes);this._lastDiff,i.original,i.modified}this._isDiffUpToDate.set(!1,void 0),s.schedule()})),this._register(i.original.onDidChangeContent(r=>{if(this._diff.get()){const l=pg.fromModelContentChanges(r.changes);this._lastDiff,i.original,i.modified}this._isDiffUpToDate.set(!1,void 0),s.schedule()})),this._register(Ud(async(r,a)=>{this._options.hideUnchangedRegionsMinimumLineCount.read(r),this._options.hideUnchangedRegionsContextLineCount.read(r),s.cancel(),n.read(r);const l=this._diffProvider.read(r);l.onChangeSignal.read(r),this._isDiffUpToDate.set(!1,void 0);let c=[];a.add(i.original.onDidChangeContent(u=>{const f=pg.fromModelContentChanges(u.changes);c=CE(c,f)}));let d=[];a.add(i.modified.onDidChangeContent(u=>{const f=pg.fromModelContentChanges(u.changes);d=CE(d,f)}));let h=await l.diffProvider.computeDiff(i.original,i.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(r),maxComputationTimeMs:this._options.maxComputationTimeMs.read(r),computeMoves:this._options.showMoves.read(r)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||i.original.isDisposed()||i.modified.isDisposed()||(h=Ele(h,i.original,i.modified),h=(i.original,i.modified,void 0)??h,h=(i.original,i.modified,void 0)??h,us(u=>{o(h,u),this._lastDiff=h;const f=w9.fromDiffResult(h);this._diff.set(f,u),this._isDiffUpToDate.set(!0,u);const p=this.movedTextToCompare.get();this.movedTextToCompare.set(p?this._lastDiff.moves.find(m=>m.lineRangeMapping.modified.intersect(p.lineRangeMapping.modified)):void 0,u)}))}))}static{af(this,"DiffEditorViewModel")}_isDiffUpToDate=ci(this,!1);isDiffUpToDate=this._isDiffUpToDate;_lastDiff;_diff=ci(this,void 0);diff=this._diff;_unchangedRegions=ci(this,void 0);unchangedRegions=ft(this,i=>this._options.hideUnchangedRegions.read(i)?this._unchangedRegions.read(i)?.regions??[]:(us(e=>{for(const t of this._unchangedRegions.get()?.regions||[])t.collapseAll(e)}),[]));movedTextToCompare=ci(this,void 0);_activeMovedText=ci(this,void 0);_hoveredMovedText=ci(this,void 0);activeMovedText=ft(this,i=>this.movedTextToCompare.read(i)??this._hoveredMovedText.read(i)??this._activeMovedText.read(i));setActiveMovedText(i){this._activeMovedText.set(i,void 0)}setHoveredMovedText(i){this._hoveredMovedText.set(i,void 0)}_cancellationTokenSource=new xr;_diffProvider=ft(this,i=>{const e=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(i)}),t=kl("onDidChange",e.onDidChange);return{diffProvider:e,onChangeSignal:t}});ensureModifiedLineIsVisible(i,e,t){if(this.diff.get()?.mappings.length===0)return;const n=this._unchangedRegions.get()?.regions||[];for(const s of n)if(s.getHiddenModifiedRange(void 0).contains(i)){s.showModifiedLine(i,e,t);return}}ensureOriginalLineIsVisible(i,e,t){if(this.diff.get()?.mappings.length===0)return;const n=this._unchangedRegions.get()?.regions||[];for(const s of n)if(s.getHiddenOriginalRange(void 0).contains(i)){s.showOriginalLine(i,e,t);return}}async waitForDiff(){await SK(this.isDiffUpToDate,i=>i)}serializeState(){return{collapsedRegions:this._unchangedRegions.get()?.regions.map(e=>({range:e.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(i){const e=i.collapsedRegions?.map(n=>ct.deserialize(n.range)),t=this._unchangedRegions.get();!t||!e||us(n=>{for(const s of t.regions)for(const o of e)if(s.modifiedUnchangedRange.intersect(o)){s.setHiddenModifiedRange(o,n);break}})}};dW=e9e([t9e(2,Jae)],dW);function Ele(i,e,t){return{changes:i.changes.map(n=>new Jl(n.original,n.modified,n.innerChanges?n.innerChanges.map(s=>Lle(s,e,t)):void 0)),moves:i.moves,identical:i.identical,quitEarly:i.quitEarly}}af(Ele,"normalizeDocumentDiff");function Lle(i,e,t){let n=i.originalRange,s=i.modifiedRange;return n.startColumn===1&&s.startColumn===1&&(n.endColumn!==1||s.endColumn!==1)&&n.endColumn===e.getLineMaxColumn(n.endLineNumber)&&s.endColumn===t.getLineMaxColumn(s.endLineNumber)&&n.endLineNumber<e.getLineCount()&&s.endLineNumber<t.getLineCount()&&(n=n.setEndPosition(n.endLineNumber+1,1),s=s.setEndPosition(s.endLineNumber+1,1)),new Al(n,s)}af(Lle,"normalizeRangeMapping");class w9{constructor(e,t,n,s){this.mappings=e,this.movedTexts=t,this.identical=n,this.quitEarly=s}static{af(this,"DiffState")}static fromDiffResult(e){return new w9(e.changes.map(t=>new Dle(t)),e.moves||[],e.identical,e.quitEarly)}}class Dle{constructor(e){this.lineRangeMapping=e}static{af(this,"DiffMapping")}}class Ap{constructor(e,t,n,s,o){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=n;const r=Math.max(Math.min(s,this.lineCount),0),a=Math.max(Math.min(o,this.lineCount-s),0);FM(s===r),FM(o===a),this._visibleLineCountTop.set(r,void 0),this._visibleLineCountBottom.set(a,void 0)}static{af(this,"UnchangedRegion")}static fromDiffs(e,t,n,s,o){const r=Jl.inverse(e,t,n),a=[];for(const l of r){let c=l.original.startLineNumber,d=l.modified.startLineNumber,h=l.original.length;const u=c===1&&d===1,f=c+h===t+1&&d+h===n+1;(u||f)&&h>=o+s?(u&&!f&&(h-=o),f&&!u&&(c+=o,d+=o,h-=o),a.push(new Ap(c,d,h,0,0))):h>=o*2+s&&(c+=o,d+=o,h-=o*2,a.push(new Ap(c,d,h,0,0)))}return a}get originalUnchangedRange(){return ct.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return ct.ofLength(this.modifiedLineNumber,this.lineCount)}_visibleLineCountTop=ci(this,0);visibleLineCountTop=this._visibleLineCountTop;_visibleLineCountBottom=ci(this,0);visibleLineCountBottom=this._visibleLineCountBottom;_shouldHideControls=ft(this,e=>this.visibleLineCountTop.read(e)+this.visibleLineCountBottom.read(e)===this.lineCount&&!this.isDragged.read(e));isDragged=ci(this,void 0);setVisibleRanges(e,t){const n=[],s=new Pl(e.map(l=>l.modified)).subtractFrom(this.modifiedUnchangedRange);let o=this.originalLineNumber,r=this.modifiedLineNumber;const a=this.modifiedLineNumber+this.lineCount;if(s.ranges.length===0)this.showAll(t),n.push(this);else{let l=0;for(const c of s.ranges){const d=l===s.ranges.length-1;l++;const h=(d?a:c.endLineNumberExclusive)-r,u=new Ap(o,r,h,0,0);u.setHiddenModifiedRange(c,t),n.push(u),o=u.originalUnchangedRange.endLineNumberExclusive,r=u.modifiedUnchangedRange.endLineNumberExclusive}}return n}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return ct.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return ct.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const n=e.startLineNumber-this.modifiedLineNumber,s=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(n,s,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){const n=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,n),t)}showMoreBelow(e=10,t){const n=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,n),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,n){const s=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),o=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;t===0&&s<o||t===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+s,n):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+o,n)}showOriginalLine(e,t,n){const s=e-this.originalLineNumber,o=this.originalLineNumber+this.lineCount-e;t===0&&s<o||t===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+o-s,this.getMaxVisibleLineCountTop()),n):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+s-o,this.getMaxVisibleLineCountBottom()),n)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,n){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,n),this._visibleLineCountBottom.set(t,n)}}var n_=(i=>(i[i.FromCloserSide=0]="FromCloserSide",i[i.FromTop=1]="FromTop",i[i.FromBottom=2]="FromBottom",i))(n_||{});function i9e(i,e,t,n){}af(i9e,"applyOriginalEdits");function n9e(i,e,t,n){}af(n9e,"applyModifiedEdits");var Ile=Object.defineProperty,s9e=Object.getOwnPropertyDescriptor,E$=(i,e)=>Ile(i,"name",{value:e,configurable:!0}),o9e=(i,e,t,n)=>{for(var s=n>1?void 0:n?s9e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Ile(e,t,s),s},r9e=(i,e)=>(t,n)=>e(t,n,i);let ya=class extends ${constructor(i,e,t,n,s,o,r){super(),this._editors=i,this._rootElement=e,this._diffModel=t,this._rootWidth=n,this._rootHeight=s,this._modifiedEditorLayoutInfo=o,this._themeService=r;const a=pn(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),l=ft(h=>{const u=a.read(h),f=u.getColor(Efe)||(u.getColor(yfe)||XM).transparent(2),p=u.getColor(Lfe)||(u.getColor(Sfe)||QM).transparent(2);return{insertColor:f,removeColor:p}}),c=Ut(document.createElement("div"));c.setClassName("diffViewport"),c.setPosition("absolute");const d=Oi("div.diffOverview",{style:{position:"absolute",top:"0px",width:ya.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(Fw(d,c.domNode)),this._register(Gs(d,Q.POINTER_DOWN,h=>{this._editors.modified.delegateVerticalScrollbarPointerDown(h)})),this._register(F(d,Q.MOUSE_WHEEL,h=>{this._editors.modified.delegateScrollFromMouseWheelEvent(h)},{passive:!1})),this._register(Fw(this._rootElement,d)),this._register(Ud((h,u)=>{const f=this._diffModel.read(h),p=this._editors.original.createOverviewRuler("original diffOverviewRuler");p&&(u.add(p),u.add(Fw(d,p.getDomNode())));const m=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(m&&(u.add(m),u.add(Fw(d,m.getDomNode()))),!p||!m)return;const _=kl("viewZoneChanged",this._editors.original.onDidChangeViewZones),w=kl("viewZoneChanged",this._editors.modified.onDidChangeViewZones),v=kl("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),b=kl("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);u.add(Li(C=>{_.read(C),w.read(C),v.read(C),b.read(C);const S=l.read(C),D=f?.diff.read(C)?.mappings;function T(G,K,X){const we=X._getViewModel();return we?G.filter(re=>re.length>0).map(re=>{const le=we.coordinatesConverter.convertModelPositionToViewPosition(new j(re.startLineNumber,1)),Ee=we.coordinatesConverter.convertModelPositionToViewPosition(new j(re.endLineNumberExclusive,1)),Se=Ee.lineNumber-le.lineNumber;return new Use(le.lineNumber,Ee.lineNumber,Se,K.toString())}):[]}E$(T,"createZones");const I=T((D||[]).map(G=>G.lineRangeMapping.original),S.removeColor,this._editors.original),R=T((D||[]).map(G=>G.lineRangeMapping.modified),S.insertColor,this._editors.modified);p?.setZones(I),m?.setZones(R)})),u.add(Li(C=>{const S=this._rootHeight.read(C),D=this._rootWidth.read(C),T=this._modifiedEditorLayoutInfo.read(C);if(T){const I=ya.ENTIRE_DIFF_OVERVIEW_WIDTH-2*ya.ONE_OVERVIEW_WIDTH;p.setLayout({top:0,height:S,right:I+ya.ONE_OVERVIEW_WIDTH,width:ya.ONE_OVERVIEW_WIDTH}),m.setLayout({top:0,height:S,right:0,width:ya.ONE_OVERVIEW_WIDTH});const R=this._editors.modifiedScrollTop.read(C),G=this._editors.modifiedScrollHeight.read(C),K=this._editors.modified.getOption(k.scrollbar),X=new ny(K.verticalHasArrows?K.arrowSize:0,K.verticalScrollbarSize,0,T.height,G,R);c.setTop(X.getSliderPosition()),c.setHeight(X.getSliderSize())}else c.setTop(0),c.setHeight(0);d.style.height=S+"px",d.style.left=D-ya.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",c.setWidth(ya.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}static{E$(this,"OverviewRulerFeature")}static ONE_OVERVIEW_WIDTH=15;static ENTIRE_DIFF_OVERVIEW_WIDTH=this.ONE_OVERVIEW_WIDTH*2;width=ya.ENTIRE_DIFF_OVERVIEW_WIDTH};ya=o9e([r9e(6,$t)],ya);var Tle=Object.defineProperty,a9e=Object.getOwnPropertyDescriptor,CM=(i,e)=>Tle(i,"name",{value:e,configurable:!0}),l9e=(i,e,t,n)=>{for(var s=n>1?void 0:n?a9e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Tle(e,t,s),s},L$=(i,e)=>(t,n)=>e(t,n,i);let hW=class extends ${constructor(i,e,t,n,s,o,r){super(),this.originalEditorElement=i,this.modifiedEditorElement=e,this._options=t,this._argCodeEditorWidgetOptions=n,this._createInnerEditor=s,this._instantiationService=o,this._keybindingService=r,this._argCodeEditorWidgetOptions=null,this._register(My({createEmptyChangeSummary:CM(()=>({}),"createEmptyChangeSummary"),handleChange:CM((a,l)=>(a.didChange(t.editorOptions)&&Object.assign(l,a.change.changedOptions),!0),"handleChange")},(a,l)=>{t.editorOptions.read(a),this._options.renderSideBySide.read(a),this.modified.updateOptions(this._adjustOptionsForRightHandSide(a,l)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(a,l))}))}static{CM(this,"DiffEditorEditors")}original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{}));modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{}));_onDidContentSizeChange=this._register(new x);get onDidContentSizeChange(){return this._onDidContentSizeChange.event}modifiedScrollTop=pn(this,this.modified.onDidScrollChange,()=>this.modified.getScrollTop());modifiedScrollHeight=pn(this,this.modified.onDidScrollChange,()=>this.modified.getScrollHeight());modifiedObs=Ww(this.modified);originalObs=Ww(this.original);modifiedModel=this.modifiedObs.model;modifiedSelections=pn(this,this.modified.onDidChangeCursorSelection,()=>this.modified.getSelections()??[]);modifiedCursor=Ig({owner:this,equalsFn:j.equals},i=>this.modifiedSelections.read(i)[0]?.getPosition()??new j(1,1));originalCursor=pn(this,this.original.onDidChangeCursorPosition,()=>this.original.getPosition()??new j(1,1));isOriginalFocused=Ww(this.original).isFocused;isModifiedFocused=Ww(this.modified).isFocused;isFocused=ft(this,i=>this.isOriginalFocused.read(i)||this.isModifiedFocused.read(i));_createLeftHandSideEditor(i,e){const t=this._adjustOptionsForLeftHandSide(void 0,i),n=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,t,e);return n.setContextValue("isInDiffLeftEditor",!0),n}_createRightHandSideEditor(i,e){const t=this._adjustOptionsForRightHandSide(void 0,i),n=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,t,e);return n.setContextValue("isInDiffRightEditor",!0),n}_constructInnerEditor(i,e,t,n){const s=this._createInnerEditor(i,e,t,n);return this._register(s.onDidContentSizeChange(o=>{const r=this.original.getContentWidth()+this.modified.getContentWidth()+ya.ENTIRE_DIFF_OVERVIEW_WIDTH,a=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:r,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),s}_adjustOptionsForLeftHandSide(i,e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide.get()?(t.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},t.wordWrapOverride1=this._options.diffWordWrap.get()):(t.wordWrapOverride1="off",t.wordWrapOverride2="off",t.stickyScroll={enabled:!1},t.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),t.glyphMargin=this._options.renderSideBySide.get(),e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.ariaLabel=this._updateAriaLabel(t.ariaLabel),t.readOnly=!this._options.originalEditable.get(),t.dropIntoEditor={enabled:!t.readOnly},t.extraEditorClassName="original-in-monaco-diff-editor",t}_adjustOptionsForRightHandSide(i,e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.ariaLabel=this._updateAriaLabel(t.ariaLabel),t.wordWrapOverride1=this._options.diffWordWrap.get(),t.revealHorizontalRightPadding=Ku.revealHorizontalRightPadding.defaultValue+ya.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",t}_adjustOptionsForSubEditor(i){const e={...i,dimension:{height:0,width:0}};return e.inDiffEditor=!0,e.automaticLayout=!1,e.scrollbar={...e.scrollbar||{}},e.folding=!1,e.codeLens=this._options.diffCodeLens.get(),e.fixedOverflowWidgets=!0,e.minimap={...e.minimap||{}},e.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?e.stickyScroll={enabled:!1}:e.stickyScroll=this._options.editorOptions.get().stickyScroll,e}_updateAriaLabel(i){i||(i="");const e=g("diff-aria-navigation-tip"," use {0} to open the accessibility help.",this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp")?.getAriaLabel());return this._options.accessibilityVerbose.get()?i+e:i?i.replaceAll(e,""):""}};hW=l9e([L$(5,He),L$(6,ni)],hW);var Ale=Object.defineProperty,c9e=Object.getOwnPropertyDescriptor,$c=(i,e)=>Ale(i,"name",{value:e,configurable:!0}),C9=(i,e,t,n)=>{for(var s=n>1?void 0:n?c9e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Ale(e,t,s),s},y9=(i,e)=>(t,n)=>e(t,n,i);const d9e=Vt("diff-review-insert",ee.add,g("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),h9e=Vt("diff-review-remove",ee.remove,g("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),u9e=Vt("diff-review-close",ee.close,g("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));let G_=class extends ${constructor(i,e,t,n,s,o,r,a,l){super(),this._parentNode=i,this._visible=e,this._setVisible=t,this._canClose=n,this._width=s,this._height=o,this._diffs=r,this._models=a,this._instantiationService=l}static{$c(this,"AccessibleDiffViewer")}static _ttPolicy=OD("diffReview",{createHTML:$c(i=>i,"createHTML")});_state=IL(this,(i,e)=>{const t=this._visible.read(i);if(this._parentNode.style.visibility=t?"visible":"hidden",!t)return null;const n=e.add(this._instantiationService.createInstance(uW,this._diffs,this._models,this._setVisible,this._canClose)),s=e.add(this._instantiationService.createInstance(gW,this._parentNode,n,this._width,this._height,this._models));return{model:n,view:s}}).recomputeInitiallyAndOnChange(this._store);next(){us(i=>{const e=this._visible.get();this._setVisible(!0,i),e&&this._state.get().model.nextGroup(i)})}prev(){us(i=>{this._setVisible(!0,i),this._state.get().model.previousGroup(i)})}close(){us(i=>{this._setVisible(!1,i)})}};G_=C9([y9(8,He)],G_);let uW=class extends ${constructor(i,e,t,n,s){super(),this._diffs=i,this._models=e,this._setVisible=t,this.canClose=n,this._accessibilitySignalService=s,this._register(Li(o=>{const r=this._diffs.read(o);if(!r){this._groups.set([],void 0);return}const a=xle(r,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());us(l=>{const c=this._models.getModifiedPosition();if(c){const d=a.findIndex(h=>c?.lineNumber<h.range.modified.endLineNumberExclusive);d!==-1&&this._currentGroupIdx.set(d,l)}this._groups.set(a,l)})})),this._register(Li(o=>{const r=this.currentElement.read(o);r?.type===2?this._accessibilitySignalService.playSignal(Yt.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):r?.type===3&&this._accessibilitySignalService.playSignal(Yt.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(Li(o=>{const r=this.currentElement.read(o);if(r&&r.type!==0){const a=r.modifiedLineNumber??r.diff.modified.startLineNumber;this._models.modifiedSetSelection(V.fromPositions(new j(a,1)))}}))}static{$c(this,"ViewModel")}_groups=ci(this,[]);_currentGroupIdx=ci(this,0);_currentElementIdx=ci(this,0);groups=this._groups;currentGroup=this._currentGroupIdx.map((i,e)=>this._groups.read(e)[i]);currentGroupIndex=this._currentGroupIdx;currentElement=this._currentElementIdx.map((i,e)=>this.currentGroup.read(e)?.lines[i]);_goToGroupDelta(i,e){const t=this.groups.get();!t||t.length<=1||PN(e,n=>{this._currentGroupIdx.set(it.ofLength(t.length).clipCyclic(this._currentGroupIdx.get()+i),n),this._currentElementIdx.set(0,n)})}nextGroup(i){this._goToGroupDelta(1,i)}previousGroup(i){this._goToGroupDelta(-1,i)}_goToLineDelta(i){const e=this.currentGroup.get();!e||e.lines.length<=1||us(t=>{this._currentElementIdx.set(it.ofLength(e.lines.length).clip(this._currentElementIdx.get()+i),t)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(i){const e=this.currentGroup.get();if(!e)return;const t=e.lines.indexOf(i);t!==-1&&us(n=>{this._currentElementIdx.set(t,n)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const i=this.currentElement.get();i&&(i.type===2?this._models.originalReveal(V.fromPositions(new j(i.originalLineNumber,1))):this._models.modifiedReveal(i.type!==0?V.fromPositions(new j(i.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};uW=C9([y9(4,_S)],uW);const XS=3;function xle(i,e,t){const n=[];for(const s of wN(i,(o,r)=>r.modified.startLineNumber-o.modified.endLineNumberExclusive<2*XS)){const o=[];o.push(new f9e);const r=new ct(Math.max(1,s[0].original.startLineNumber-XS),Math.min(s[s.length-1].original.endLineNumberExclusive+XS,e+1)),a=new ct(Math.max(1,s[0].modified.startLineNumber-XS),Math.min(s[s.length-1].modified.endLineNumberExclusive+XS,t+1));zW(s,(d,h)=>{const u=new ct(d?d.original.endLineNumberExclusive:r.startLineNumber,h?h.original.startLineNumber:r.endLineNumberExclusive),f=new ct(d?d.modified.endLineNumberExclusive:a.startLineNumber,h?h.modified.startLineNumber:a.endLineNumberExclusive);u.forEach(p=>{o.push(new _9e(p,f.startLineNumber+(p-u.startLineNumber)))}),h&&(h.original.forEach(p=>{o.push(new p9e(h,p))}),h.modified.forEach(p=>{o.push(new m9e(h,p))}))});const l=s[0].modified.join(s[s.length-1].modified),c=s[0].original.join(s[s.length-1].original);n.push(new g9e(new Er(l,c),o))}return n}$c(xle,"computeViewElementGroups");class g9e{constructor(e,t){this.range=e,this.lines=t}static{$c(this,"ViewElementGroup")}}class f9e{static{$c(this,"HeaderViewElement")}type=0}class p9e{constructor(e,t){this.diff=e,this.originalLineNumber=t}static{$c(this,"DeletedLineViewElement")}type=2;modifiedLineNumber=void 0}class m9e{constructor(e,t){this.diff=e,this.modifiedLineNumber=t}static{$c(this,"AddedLineViewElement")}type=3;originalLineNumber=void 0}class _9e{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t}static{$c(this,"UnchangedLineViewElement")}type=1}let gW=class extends ${constructor(i,e,t,n,s,o){super(),this._element=i,this._model=e,this._width=t,this._height=n,this._models=s,this._languageService=o,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const r=document.createElement("div");r.className="diff-review-actions",this._actionBar=this._register(new td(r)),this._register(Li(a=>{this._actionBar.clear(),this._model.canClose.read(a)&&this._actionBar.push(new Mt("diffreview.close",g("label.close","Close"),"close-diff-review "+Ne.asClassName(u9e),!0,async()=>e.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new hD(this._content,{})),dr(this.domNode,this._scrollbar.getDomNode(),r),this._register(Li(a=>{this._height.read(a),this._width.read(a),this._scrollbar.scanDomNode()})),this._register(ye(()=>{dr(this.domNode)})),this._register(rf(this.domNode,{width:this._width,height:this._height})),this._register(rf(this._content,{width:this._width,height:this._height})),this._register(Ud((a,l)=>{this._model.currentGroup.read(a),this._render(l)})),this._register(Gs(this.domNode,"keydown",a=>{(a.equals(E.DownArrow)||a.equals(M.CtrlCmd|E.DownArrow)||a.equals(M.Alt|E.DownArrow))&&(a.preventDefault(),this._model.goToNextLine()),(a.equals(E.UpArrow)||a.equals(M.CtrlCmd|E.UpArrow)||a.equals(M.Alt|E.UpArrow))&&(a.preventDefault(),this._model.goToPreviousLine()),(a.equals(E.Escape)||a.equals(M.CtrlCmd|E.Escape)||a.equals(M.Alt|E.Escape)||a.equals(M.Shift|E.Escape))&&(a.preventDefault(),this._model.close()),(a.equals(E.Space)||a.equals(E.Enter))&&(a.preventDefault(),this._model.revealCurrentElementInEditor())}))}static{$c(this,"View")}domNode;_content;_scrollbar;_actionBar;_render(i){const e=this._models.getOriginalOptions(),t=this._models.getModifiedOptions(),n=document.createElement("div");n.className="diff-review-table",n.setAttribute("role","list"),n.setAttribute("aria-label",g("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),Ao(n,t.get(k.fontInfo)),dr(this._content,n);const s=this._models.getOriginalModel(),o=this._models.getModifiedModel();if(!s||!o)return;const r=s.getOptions(),a=o.getOptions(),l=t.get(k.lineHeight),c=this._model.currentGroup.get();for(const d of c?.lines||[]){if(!c)break;let h;if(d.type===0){const f=document.createElement("div");f.className="diff-review-row",f.setAttribute("role","listitem");const p=c.range,m=this._model.currentGroupIndex.get(),_=this._model.groups.get().length,w=$c(S=>S===0?g("no_lines_changed","no lines changed"):S===1?g("one_line_changed","1 line changed"):g("more_lines_changed","{0} lines changed",S),"getAriaLines"),v=w(p.original.length),b=w(p.modified.length);f.setAttribute("aria-label",g({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",m+1,_,p.original.startLineNumber,v,p.modified.startLineNumber,b));const C=document.createElement("div");C.className="diff-review-cell diff-review-summary",C.appendChild(document.createTextNode(`${m+1}/${_}: @@ -${p.original.startLineNumber},${p.original.length} +${p.modified.startLineNumber},${p.modified.length} @@`)),f.appendChild(C),h=f}else h=this._createRow(d,l,this._width.get(),e,s,r,t,o,a);n.appendChild(h);const u=ft(f=>this._model.currentElement.read(f)===d);i.add(Li(f=>{const p=u.read(f);h.tabIndex=p?0:-1,p&&h.focus()})),i.add(F(h,"focus",()=>{this._model.goToLine(d)}))}this._scrollbar.scanDomNode()}_createRow(i,e,t,n,s,o,r,a,l){const c=n.get(k.layoutInfo),d=c.glyphMarginWidth+c.lineNumbersWidth,h=r.get(k.layoutInfo),u=10+h.glyphMarginWidth+h.lineNumbersWidth;let f="diff-review-row",p="";const m="diff-review-spacer";let _=null;switch(i.type){case 3:f="diff-review-row line-insert",p=" char-insert",_=d9e;break;case 2:f="diff-review-row line-delete",p=" char-delete",_=h9e;break}const w=document.createElement("div");w.style.minWidth=t+"px",w.className=f,w.setAttribute("role","listitem"),w.ariaLevel="";const v=document.createElement("div");v.className="diff-review-cell",v.style.height=`${e}px`,w.appendChild(v);const b=document.createElement("span");b.style.width=d+"px",b.style.minWidth=d+"px",b.className="diff-review-line-number"+p,i.originalLineNumber!==void 0?b.appendChild(document.createTextNode(String(i.originalLineNumber))):b.innerText="\xa0",v.appendChild(b);const C=document.createElement("span");C.style.width=u+"px",C.style.minWidth=u+"px",C.style.paddingRight="10px",C.className="diff-review-line-number"+p,i.modifiedLineNumber!==void 0?C.appendChild(document.createTextNode(String(i.modifiedLineNumber))):C.innerText="\xa0",v.appendChild(C);const S=document.createElement("span");if(S.className=m,_){const I=document.createElement("span");I.className=Ne.asClassName(_),I.innerText="\xa0\xa0",S.appendChild(I)}else S.innerText="\xa0\xa0";v.appendChild(S);let D;if(i.modifiedLineNumber!==void 0){let I=this._getLineHtml(a,r,l.tabSize,i.modifiedLineNumber,this._languageService.languageIdCodec);G_._ttPolicy&&(I=G_._ttPolicy.createHTML(I)),v.insertAdjacentHTML("beforeend",I),D=a.getLineContent(i.modifiedLineNumber)}else{let I=this._getLineHtml(s,n,o.tabSize,i.originalLineNumber,this._languageService.languageIdCodec);G_._ttPolicy&&(I=G_._ttPolicy.createHTML(I)),v.insertAdjacentHTML("beforeend",I),D=s.getLineContent(i.originalLineNumber)}D.length===0&&(D=g("blankLine","blank"));let T="";switch(i.type){case 1:i.originalLineNumber===i.modifiedLineNumber?T=g({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",D,i.originalLineNumber):T=g("equalLine","{0} original line {1} modified line {2}",D,i.originalLineNumber,i.modifiedLineNumber);break;case 3:T=g("insertLine","+ {0} modified line {1}",D,i.modifiedLineNumber);break;case 2:T=g("deleteLine","- {0} original line {1}",D,i.originalLineNumber);break}return w.setAttribute("aria-label",T),w}_getLineHtml(i,e,t,n,s){const o=i.getLineContent(n),r=e.get(k.fontInfo),a=ds.createEmpty(o,s),l=Xp.isBasicASCII(o,i.mightContainNonBasicASCII()),c=Xp.containsRTL(o,l,i.mightContainRTL());return yre(new V2(r.isMonospace&&!e.get(k.disableMonospaceOptimizations),r.canUseHalfwidthRightwardsArrow,o,!1,l,c,0,a,[],t,0,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,e.get(k.stopRenderingLineAfter),e.get(k.renderWhitespace),e.get(k.renderControlCharacters),e.get(k.fontLigatures)!==kd.OFF,null)).html}};gW=C9([y9(5,Ra)],gW);class b9e{constructor(e){this.editors=e}static{$c(this,"AccessibleDiffViewerModelFromEditors")}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){return this.editors.modified.getPosition()??void 0}}var v9e=Object.defineProperty,Hw=(i,e)=>v9e(i,"name",{value:e,configurable:!0});class mb extends ${constructor(e,t,n,s,o){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=n,this._modifiedEditorLayoutInfo=s,this._editors=o,this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(ye(()=>this._element.remove())),this._register(Li(d=>{const h=this._originalEditorLayoutInfo.read(d),u=this._modifiedEditorLayoutInfo.read(d);!h||!u||(this._element.style.left=`${h.width-h.verticalScrollbarWidth}px`,this._element.style.height=`${h.height}px`,this._element.style.width=`${h.verticalScrollbarWidth+h.contentLeft-mb.movedCodeBlockPadding+this.width.read(d)}px`)})),this._register(NN(this._state));const r=ft(d=>{const u=this._diffModel.read(d)?.diff.read(d);return u?u.movedTexts.map(f=>({move:f,original:new Vw($0(f.lineRangeMapping.original.startLineNumber-1),18),modified:new Vw($0(f.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register(vL(this._editors.original,r.map(d=>d.map(h=>h.original)))),this._register(vL(this._editors.modified,r.map(d=>d.map(h=>h.modified)))),this._register(Ud((d,h)=>{const u=r.read(d);for(const f of u)h.add(new D$(this._editors.original,f.original,f.move,"original",this._diffModel.get())),h.add(new D$(this._editors.modified,f.modified,f.move,"modified",this._diffModel.get()))}));const a=kl("original.onDidFocusEditorWidget",d=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>d(void 0),0))),l=kl("modified.onDidFocusEditorWidget",d=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>d(void 0),0)));let c="modified";this._register(My({createEmptyChangeSummary:Hw(()=>{},"createEmptyChangeSummary"),handleChange:Hw((d,h)=>(d.didChange(a)&&(c="original"),d.didChange(l)&&(c="modified"),!0),"handleChange")},d=>{a.read(d),l.read(d);const h=this._diffModel.read(d);if(!h)return;const u=h.diff.read(d);let f;if(u&&c==="original"){const p=this._editors.originalCursor.read(d);p&&(f=u.movedTexts.find(m=>m.lineRangeMapping.original.contains(p.lineNumber)))}if(u&&c==="modified"){const p=this._editors.modifiedCursor.read(d);p&&(f=u.movedTexts.find(m=>m.lineRangeMapping.modified.contains(p.lineNumber)))}f!==h.movedTextToCompare.get()&&h.movedTextToCompare.set(void 0,void 0),h.setActiveMovedText(f)}))}static{Hw(this,"MovedBlocksLinesFeature")}static movedCodeBlockPadding=4;_element;_originalScrollTop=pn(this,this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop());_modifiedScrollTop=pn(this,this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop());_viewZonesChanged=kl("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones);width=ci(this,0);_modifiedViewZonesChangedSignal=kl("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones);_originalViewZonesChangedSignal=kl("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones);_state=IL(this,(e,t)=>{this._element.replaceChildren();const n=this._diffModel.read(e),s=n?.diff.read(e)?.movedTexts;if(!s||s.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(e);const o=this._originalEditorLayoutInfo.read(e),r=this._modifiedEditorLayoutInfo.read(e);if(!o||!r){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(e),this._originalViewZonesChangedSignal.read(e);const a=s.map(p=>{function m(I,R){const G=R.getTopForLineNumber(I.startLineNumber,!0),K=R.getTopForLineNumber(I.endLineNumberExclusive,!0);return(G+K)/2}Hw(m,"computeLineStart");const _=m(p.lineRangeMapping.original,this._editors.original),w=this._originalScrollTop.read(e),v=m(p.lineRangeMapping.modified,this._editors.modified),b=this._modifiedScrollTop.read(e),C=_-w,S=v-b,D=Math.min(_,v),T=Math.max(_,v);return{range:new it(D,T),from:C,to:S,fromWithoutScroll:_,toWithoutScroll:v,move:p}});a.sort(gG(zl(p=>p.fromWithoutScroll>p.toWithoutScroll,$de),zl(p=>p.fromWithoutScroll>p.toWithoutScroll?p.fromWithoutScroll:-p.toWithoutScroll,xp)));const l=S9.compute(a.map(p=>p.range)),c=10,d=o.verticalScrollbarWidth,h=(l.getTrackCount()-1)*10+c*2,u=d+h+(r.contentLeft-mb.movedCodeBlockPadding);let f=0;for(const p of a){const m=l.getTrack(f),_=d+c+m*10,w=15,v=15,b=u,C=r.glyphMarginWidth+r.lineNumbersWidth,S=18,D=document.createElementNS("http://www.w3.org/2000/svg","rect");D.classList.add("arrow-rectangle"),D.setAttribute("x",`${b-C}`),D.setAttribute("y",`${p.to-S/2}`),D.setAttribute("width",`${C}`),D.setAttribute("height",`${S}`),this._element.appendChild(D);const T=document.createElementNS("http://www.w3.org/2000/svg","g"),I=document.createElementNS("http://www.w3.org/2000/svg","path");I.setAttribute("d",`M 0 ${p.from} L ${_} ${p.from} L ${_} ${p.to} L ${b-v} ${p.to}`),I.setAttribute("fill","none"),T.appendChild(I);const R=document.createElementNS("http://www.w3.org/2000/svg","polygon");R.classList.add("arrow"),t.add(Li(G=>{I.classList.toggle("currentMove",p.move===n.activeMovedText.read(G)),R.classList.toggle("currentMove",p.move===n.activeMovedText.read(G))})),R.setAttribute("points",`${b-v},${p.to-w/2} ${b},${p.to} ${b-v},${p.to+w/2}`),T.appendChild(R),this._element.appendChild(T),f++}this.width.set(h,void 0)})}class S9{constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}static{Hw(this,"LinesLayout")}static compute(e){const t=[],n=[];for(const s of e){let o=t.findIndex(r=>!r.intersectsStrict(s));o===-1&&(t.length>=6?o=tG(t,zl(a=>a.intersectWithRangeLength(s),xp)):(o=t.length,t.push(new NH))),t[o].addRange(s),n.push(o)}return new S9(t.length,n)}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class D$ extends p9{constructor(e,t,n,s,o){const r=Oi("div.diff-hidden-lines-widget");super(e,t,r.root),this._editor=e,this._move=n,this._kind=s,this._diffModel=o,r.root.appendChild(this._nodes.root);const a=pn(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(rf(this._nodes.root,{paddingRight:a.map(u=>u.verticalScrollbarWidth)}));let l;n.changes.length>0?l=this._kind==="original"?g("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):g("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):l=this._kind==="original"?g("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):g("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const c=this._register(new td(this._nodes.actionBar,{highlightToggledItems:!0})),d=new Mt("",l,"",!1);c.push(d,{icon:!1,label:!0});const h=new Mt("","Compare",Ne.asClassName(ee.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===n?void 0:this._move,void 0)});this._register(Li(u=>{const f=this._diffModel.movedTextToCompare.read(u)===n;h.checked=f})),c.push(h,{icon:!1,label:!0})}static{Hw(this,"MovedBlockOverlayWidget")}_nodes=Oi("div.diff-moved-code-block",{style:{marginRight:"4px"}},[Oi("div.text-content@textContent"),Oi("div.action-bar@actionBar")])}var w9e=Object.defineProperty,C9e=(i,e)=>w9e(i,"name",{value:e,configurable:!0});class y9e extends ${constructor(e,t,n,s){super(),this._editors=e,this._diffModel=t,this._options=n,this._register(bL(this._editors.original,this._decorations.map(o=>o?.originalDecorations||[]))),this._register(bL(this._editors.modified,this._decorations.map(o=>o?.modifiedDecorations||[])))}static{C9e(this,"DiffEditorDecorations")}_decorations=ft(this,e=>{const t=this._diffModel.read(e),n=t?.diff.read(e);if(!n)return null;const s=this._diffModel.read(e).movedTextToCompare.read(e),o=this._options.renderIndicators.read(e),r=this._options.showEmptyDecorations.read(e),a=[],l=[];if(!s)for(const d of n.mappings)if(d.lineRangeMapping.original.isEmpty||a.push({range:d.lineRangeMapping.original.toInclusiveRange(),options:o?b$:w$}),d.lineRangeMapping.modified.isEmpty||l.push({range:d.lineRangeMapping.modified.toInclusiveRange(),options:o?_$:v$}),d.lineRangeMapping.modified.isEmpty||d.lineRangeMapping.original.isEmpty)d.lineRangeMapping.original.isEmpty||a.push({range:d.lineRangeMapping.original.toInclusiveRange(),options:U2e}),d.lineRangeMapping.modified.isEmpty||l.push({range:d.lineRangeMapping.modified.toInclusiveRange(),options:W2e});else{const h=this._options.useTrueInlineDiffRendering.read(e)&&YR(d.lineRangeMapping);for(const u of d.lineRangeMapping.innerChanges||[])if(d.lineRangeMapping.original.contains(u.originalRange.startLineNumber)&&a.push({range:u.originalRange,options:u.originalRange.isEmpty()&&r?z2e:iW}),d.lineRangeMapping.modified.contains(u.modifiedRange.startLineNumber)&&l.push({range:u.modifiedRange,options:u.modifiedRange.isEmpty()&&r&&!h?H2e:C$}),h){const f=t.model.original.getValueInRange(u.originalRange);l.push({range:u.modifiedRange,options:{description:"deleted-text",before:{content:f,inlineClassName:"inline-deleted-text"},zIndex:1e5,showIfCollapsed:!0}})}}if(s)for(const d of s.changes){const h=d.original.toInclusiveRange();h&&a.push({range:h,options:o?b$:w$});const u=d.modified.toInclusiveRange();u&&l.push({range:u,options:o?_$:v$});for(const f of d.innerChanges||[])a.push({range:f.originalRange,options:iW}),l.push({range:f.modifiedRange,options:C$})}const c=this._diffModel.read(e).activeMovedText.read(e);for(const d of n.movedTexts)a.push({range:d.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(d===c?" currentMove":""),blockPadding:[mb.movedCodeBlockPadding,0,mb.movedCodeBlockPadding,mb.movedCodeBlockPadding]}}),l.push({range:d.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(d===c?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:a,modifiedDecorations:l}})}var S9e=Object.defineProperty,M1=(i,e)=>S9e(i,"name",{value:e,configurable:!0});class E9e{constructor(e,t){this._options=e,this.dimensions=t}static{M1(this,"SashLayout")}sashLeft=kN(this,e=>{const t=this._sashRatio.read(e)??this._options.splitViewDefaultRatio.read(e);return this._computeSashLeft(t,e)},(e,t)=>{const n=this.dimensions.width.get();this._sashRatio.set(e/n,t)});_sashRatio=ci(this,void 0);resetSash(){this._sashRatio.set(void 0,void 0)}_computeSashLeft(e,t){const n=this.dimensions.width.read(t),s=Math.floor(this._options.splitViewDefaultRatio.read(t)*n),o=this._options.enableSplitViewResizing.read(t)?Math.floor(e*n):s,r=100;return n<=r*2?s:o<r?r:o>n-r?n-r:o}}class kle extends ${constructor(e,t,n,s,o,r){super(),this._domNode=e,this._dimensions=t,this._enabled=n,this._boundarySashes=s,this.sashLeft=o,this._resetSash=r,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(a=>{this.sashLeft.set(this._startSashPosition+(a.currentX-a.startX),void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._resetSash())),this._register(Li(a=>{const l=this._boundarySashes.read(a);l&&(this._sash.orthogonalEndSash=l.bottom)})),this._register(Li(a=>{const l=this._enabled.read(a);this._sash.state=l?eg.Enabled:eg.Disabled,this.sashLeft.read(a),this._dimensions.height.read(a),this._sash.layout()}))}static{M1(this,"DiffEditorSash")}_sash=this._register(new El(this._domNode,{getVerticalSashTop:M1(e=>0,"getVerticalSashTop"),getVerticalSashLeft:M1(e=>this.sashLeft.get(),"getVerticalSashLeft"),getVerticalSashHeight:M1(e=>this._dimensions.height.get(),"getVerticalSashHeight")},{orientation:ke.VERTICAL}));_startSashPosition=void 0}var L9e=Object.defineProperty,D9e=(i,e)=>L9e(i,"name",{value:e,configurable:!0});class E9 extends ${static{D9e(this,"DelegatingEditor")}static idCounter=0;_id=++E9.idCounter;_onDidDispose=this._register(new x);onDidDispose=this._onDidDispose.event;getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getStatusbarColumn(e){return this._targetEditor.getStatusbarColumn(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=ot.Smooth){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=ot.Smooth){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=ot.Smooth){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=ot.Smooth){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=ot.Smooth){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=ot.Smooth){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=ot.Smooth){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=ot.Smooth){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,n=ot.Smooth){this._targetEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=ot.Smooth){this._targetEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=ot.Smooth){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=ot.Smooth){this._targetEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=ot.Smooth,n=!1,s=!0){this._targetEditor.revealRange(e,t,n,s)}revealRangeInCenter(e,t=ot.Smooth){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=ot.Smooth){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=ot.Smooth){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=ot.Smooth){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=ot.Smooth){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,n){this._targetEditor.trigger(e,t,n)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}}var I9e=Object.defineProperty,T9e=(i,e)=>I9e(i,"name",{value:e,configurable:!0});class I$ extends n2{constructor(e){super(),this._textModel=e}static{T9e(this,"TextModelText")}getValueOfRange(e){return this._textModel.getValueInRange(e)}get length(){const e=this._textModel.getLineCount(),t=this._textModel.getLineLength(e);return new ys(e-1,t)}}var A9e=Object.defineProperty,x9e=(i,e)=>A9e(i,"name",{value:e,configurable:!0});class k9e extends nc{constructor(e){super(),this._getContext=e}static{x9e(this,"ActionRunnerWithContext")}runAction(e,t){const n=this._getContext();return super.runAction(e,n)}}var N9e=Object.defineProperty,Nle=(i,e)=>N9e(i,"name",{value:e,configurable:!0});class P9e extends ${constructor(e,t,n){super(),this._editor=e,this._domNode=t,this.itemProvider=n,this._domNode.className="gutter monaco-editor";const s=this._domNode.appendChild(Oi("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),o=new ResizeObserver(()=>{us(r=>{this.domNodeSizeChanged.trigger(r)})});o.observe(this._domNode),this._register(ye(()=>o.disconnect())),this._register(Li(r=>{s.className=this.isScrollTopZero.read(r)?"":"scroll-decoration"})),this._register(Li(r=>this.render(r)))}static{Nle(this,"EditorGutter")}scrollTop=pn(this,this._editor.onDidScrollChange,e=>this._editor.getScrollTop());isScrollTopZero=this.scrollTop.map(e=>e===0);modelAttached=pn(this,this._editor.onDidChangeModel,e=>this._editor.hasModel());editorOnDidChangeViewZones=kl("onDidChangeViewZones",this._editor.onDidChangeViewZones);editorOnDidContentSizeChange=kl("onDidContentSizeChange",this._editor.onDidContentSizeChange);domNodeSizeChanged=TL("domNodeSizeChanged");dispose(){super.dispose(),dr(this._domNode)}views=new Map;render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const t=this.scrollTop.read(e),n=this._editor.getVisibleRanges(),s=new Set(this.views.keys()),o=it.ofStartAndLength(0,this._domNode.clientHeight);if(!o.isEmpty)for(const r of n){const a=new ct(r.startLineNumber,r.endLineNumber+1),l=this.itemProvider.getIntersectingGutterItems(a,e);us(c=>{for(const d of l){if(!d.range.intersect(a))continue;s.delete(d.id);let h=this.views.get(d.id);if(h)h.item.set(d,c);else{const m=document.createElement("div");this._domNode.appendChild(m);const _=ci("item",d),w=this.itemProvider.createView(_,m);h=new R9e(_,w,m),this.views.set(d.id,h)}const u=d.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(d.range.startLineNumber,!0)-t:this._editor.getBottomForLineNumber(d.range.startLineNumber-1,!1)-t,p=(d.range.endLineNumberExclusive===1?Math.max(u,this._editor.getTopForLineNumber(d.range.startLineNumber,!1)-t):Math.max(u,this._editor.getBottomForLineNumber(d.range.endLineNumberExclusive-1,!0)-t))-u;h.domNode.style.top=`${u}px`,h.domNode.style.height=`${p}px`,h.gutterItemView.layout(it.ofStartAndLength(u,p),o)}})}for(const r of s){const a=this.views.get(r);a.gutterItemView.dispose(),a.domNode.remove(),this.views.delete(r)}}}class R9e{constructor(e,t,n){this.item=e,this.gutterItemView=t,this.domNode=n}static{Nle(this,"ManagedGutterItemView")}}var Ple=Object.defineProperty,O9e=Object.getOwnPropertyDescriptor,OC=(i,e)=>Ple(i,"name",{value:e,configurable:!0}),Rle=(i,e,t,n)=>{for(var s=n>1?void 0:n?O9e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Ple(e,t,s),s},yA=(i,e)=>(t,n)=>e(t,n,i);const yM=[],GI=35;let fW=class extends ${constructor(i,e,t,n,s,o,r,a,l){super(),this._diffModel=e,this._editors=t,this._options=n,this._sashLayout=s,this._boundarySashes=o,this._instantiationService=r,this._contextKeyService=a,this._menuService=l,this._register(Hae(i,this.elements.root)),this._register(F(this.elements.root,"click",()=>{this._editors.modified.focus()})),this._register(rf(this.elements.root,{display:this._hasActions.map(d=>d?"block":"none")})),Cd(this,d=>this._showSash.read(d)?new kle(i,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,kN(this,u=>this._sashLayout.sashLeft.read(u)-GI,(u,f)=>this._sashLayout.sashLeft.set(u+GI,f)),()=>this._sashLayout.resetSash()):void 0).recomputeInitiallyAndOnChange(this._store);const c=ft(this,d=>{const h=this._diffModel.read(d);if(!h)return[];const u=h.diff.read(d);if(!u)return[];const f=this._selectedDiffs.read(d);if(f.length>0){const m=Jl.fromRangeMappings(f.flatMap(_=>_.rangeMappings));return[new T$(m,!0,N.DiffEditorSelectionToolbar,void 0,h.model.original.uri,h.model.modified.uri)]}const p=this._currentDiff.read(d);return u.mappings.map(m=>new T$(m.lineRangeMapping.withInnerChangesFromLineRanges(),m.lineRangeMapping===p?.lineRangeMapping,N.DiffEditorHunkToolbar,void 0,h.model.original.uri,h.model.modified.uri))});this._register(new P9e(this._editors.modified,this.elements.root,{getIntersectingGutterItems:OC((d,h)=>c.read(h),"getIntersectingGutterItems"),createView:OC((d,h)=>this._instantiationService.createInstance(pW,d,h,this),"createView")})),this._register(F(this.elements.gutter,Q.MOUSE_WHEEL,d=>{this._editors.modified.getOption(k.scrollbar).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(d)},{passive:!1}))}static{OC(this,"DiffEditorGutter")}_menu=this._register(this._menuService.createMenu(N.DiffEditorHunkToolbar,this._contextKeyService));_actions=pn(this,this._menu.onDidChange,()=>this._menu.getActions());_hasActions=this._actions.map(i=>i.length>0);_showSash=ft(this,i=>this._options.renderSideBySide.read(i)&&this._hasActions.read(i));width=ft(this,i=>this._hasActions.read(i)?GI:0);elements=Oi("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:GI+"px"}},[]);computeStagedValue(i){const e=i.innerChanges??[],t=new I$(this._editors.modifiedModel.get()),n=new I$(this._editors.original.getModel());return new b0(e.map(r=>r.toTextEdit(t))).apply(n)}_currentDiff=ft(this,i=>{const e=this._diffModel.read(i);if(!e)return;const t=e.diff.read(i)?.mappings,n=this._editors.modifiedCursor.read(i);if(n)return t?.find(s=>s.lineRangeMapping.modified.contains(n.lineNumber))});_selectedDiffs=ft(this,i=>{const t=this._diffModel.read(i)?.diff.read(i);if(!t)return yM;const n=this._editors.modifiedSelections.read(i);if(n.every(a=>a.isEmpty()))return yM;const s=new Pl(n.map(a=>ct.fromRangeInclusive(a))),r=t.mappings.filter(a=>a.lineRangeMapping.innerChanges&&s.intersects(a.lineRangeMapping.modified)).map(a=>({mapping:a,rangeMappings:a.lineRangeMapping.innerChanges.filter(l=>n.some(c=>V.areIntersecting(l.modifiedRange,c)))}));return r.length===0||r.every(a=>a.rangeMappings.length===0)?yM:r});layout(i){this.elements.gutter.style.left=i+"px"}};fW=Rle([yA(6,He),yA(7,Ye),yA(8,No)],fW);class T${constructor(e,t,n,s,o,r){this.mapping=e,this.showAlways=t,this.menuId=n,this.rangeOverride=s,this.originalUri=o,this.modifiedUri=r}static{OC(this,"DiffGutterItem")}get id(){return this.mapping.modified.toString()}get range(){return this.rangeOverride??this.mapping.modified}}let pW=class extends ${constructor(i,e,t,n){super(),this._item=i;const s=this._register(n.createInstance(qE,"element",!0,{position:{hoverPosition:zc.RIGHT}}));this._register(Fw(e,this._elements.root)),this._register(Li(o=>{const r=this._showAlways.read(o);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",r),setTimeout(()=>{this._elements.root.classList.toggle("noTransition",!1)},0)})),this._register(Ud((o,r)=>{this._elements.buttons.replaceChildren();const a=r.add(n.createInstance(tL,this._elements.buttons,this._menuId.read(o),{orientation:Ns.VERTICAL,hoverDelegate:s,toolbarOptions:{primaryGroup:OC(l=>l.startsWith("primary"),"primaryGroup")},overflowBehavior:{maxItems:this._isSmall.read(o)?1:3},hiddenItemStrategy:Av.Ignore,actionRunner:new k9e(()=>{const l=this._item.get(),c=l.mapping;return{mapping:c,originalWithModifiedChanges:t.computeStagedValue(c),originalUri:l.originalUri,modifiedUri:l.modifiedUri}}),menuOptions:{shouldForwardArgs:!0}}));r.add(a.onDidChangeMenuItems(()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)}))}))}static{OC(this,"DiffToolBar")}_elements=Oi("div.gutterItem",{style:{height:"20px",width:"34px"}},[Oi("div.background@background",{},[]),Oi("div.buttons@buttons",{},[])]);_showAlways=this._item.map(this,i=>i.showAlways);_menuId=this._item.map(this,i=>i.menuId);_isSmall=ci(this,!1);_lastItemRange=void 0;_lastViewRange=void 0;layout(i,e){this._lastItemRange=i,this._lastViewRange=e;let t=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&i.length<30,void 0),t=this._elements.buttons.clientHeight;const n=i.length/2-t/2,s=t;let o=i.start+n;const r=it.tryCreate(s,e.endExclusive-s-t),a=it.tryCreate(i.start+s,i.endExclusive-t-s);a&&r&&a.start<a.endExclusive&&(o=r.clip(o),o=a.clip(o)),this._elements.buttons.style.top=`${o-i.start}px`}};pW=Rle([yA(3,He)],pW);var Ole=Object.defineProperty,M9e=Object.getOwnPropertyDescriptor,rN=(i,e)=>Ole(i,"name",{value:e,configurable:!0}),B9e=(i,e,t,n)=>{for(var s=n>1?void 0:n?M9e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Ole(e,t,s),s},F9e=(i,e)=>(t,n)=>e(t,n,i);let yL=class extends ${constructor(i,e,t,n){super(),this._editors=i,this._diffModel=e,this._options=t,this._instantiationService=n,this._register(this._editors.original.onDidChangeCursorPosition(a=>{if(a.reason===ri.ContentFlush)return;const l=this._diffModel.get();us(c=>{for(const d of this._editors.original.getSelections()||[])l?.ensureOriginalLineIsVisible(d.getStartPosition().lineNumber,n_.FromCloserSide,c),l?.ensureOriginalLineIsVisible(d.getEndPosition().lineNumber,n_.FromCloserSide,c)})})),this._register(this._editors.modified.onDidChangeCursorPosition(a=>{if(a.reason===ri.ContentFlush)return;const l=this._diffModel.get();us(c=>{for(const d of this._editors.modified.getSelections()||[])l?.ensureModifiedLineIsVisible(d.getStartPosition().lineNumber,n_.FromCloserSide,c),l?.ensureModifiedLineIsVisible(d.getEndPosition().lineNumber,n_.FromCloserSide,c)})}));const s=this._diffModel.map((a,l)=>{const c=a?.unchangedRegions.read(l)??[];return c.length===1&&c[0].modifiedLineNumber===1&&c[0].lineCount===this._editors.modifiedModel.read(l)?.getLineCount()?[]:c});this.viewZones=IL(this,(a,l)=>{const c=this._modifiedOutlineSource.read(a);if(!c)return{origViewZones:[],modViewZones:[]};const d=[],h=[],u=this._options.renderSideBySide.read(a),f=this._options.compactMode.read(a),p=s.read(a);for(let m=0;m<p.length;m++){const _=p[m];if(!_.shouldHideControls(a)&&!(f&&(m===0||m===p.length-1)))if(f){{const w=ft(this,b=>_.getHiddenOriginalRange(b).startLineNumber-1),v=new Vw(w,12);d.push(v),l.add(new A$(this._editors.original,v,_,!u))}{const w=ft(this,b=>_.getHiddenModifiedRange(b).startLineNumber-1),v=new Vw(w,12);h.push(v),l.add(new A$(this._editors.modified,v,_))}}else{{const w=ft(this,b=>_.getHiddenOriginalRange(b).startLineNumber-1),v=new Vw(w,24);d.push(v),l.add(new x$(this._editors.original,v,_,_.originalUnchangedRange,!u,c,b=>this._diffModel.get().ensureModifiedLineIsVisible(b,n_.FromBottom,void 0),this._options))}{const w=ft(this,b=>_.getHiddenModifiedRange(b).startLineNumber-1),v=new Vw(w,24);h.push(v),l.add(new x$(this._editors.modified,v,_,_.modifiedUnchangedRange,!1,c,b=>this._diffModel.get().ensureModifiedLineIsVisible(b,n_.FromBottom,void 0),this._options))}}}return{origViewZones:d,modViewZones:h}});const o={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},r={description:"Fold Unchanged",glyphMarginHoverMessage:new mH(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(g("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+Ne.asClassName(ee.fold),zIndex:10001};this._register(bL(this._editors.original,ft(this,a=>{const l=s.read(a),c=l.map(d=>({range:d.originalUnchangedRange.toInclusiveRange(),options:o}));for(const d of l)d.shouldHideControls(a)&&c.push({range:V.fromPositions(new j(d.originalLineNumber,1)),options:r});return c}))),this._register(bL(this._editors.modified,ft(this,a=>{const l=s.read(a),c=l.map(d=>({range:d.modifiedUnchangedRange.toInclusiveRange(),options:o}));for(const d of l)d.shouldHideControls(a)&&c.push({range:ct.ofLength(d.modifiedLineNumber,1).toInclusiveRange(),options:r});return c}))),this._register(Li(a=>{const l=s.read(a);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(l.map(c=>c.getHiddenOriginalRange(a).toInclusiveRange()).filter(vb)),this._editors.modified.setHiddenAreas(l.map(c=>c.getHiddenModifiedRange(a).toInclusiveRange()).filter(vb))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(a=>{if(!a.event.rightButton&&a.target.position&&a.target.element?.className.includes("fold-unchanged")){const l=a.target.position.lineNumber,c=this._diffModel.get();if(!c)return;const d=c.unchangedRegions.get().find(h=>h.modifiedUnchangedRange.includes(l));if(!d)return;d.collapseAll(void 0),a.event.stopPropagation(),a.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(a=>{if(!a.event.rightButton&&a.target.position&&a.target.element?.className.includes("fold-unchanged")){const l=a.target.position.lineNumber,c=this._diffModel.get();if(!c)return;const d=c.unchangedRegions.get().find(h=>h.originalUnchangedRange.includes(l));if(!d)return;d.collapseAll(void 0),a.event.stopPropagation(),a.event.preventDefault()}}))}static{rN(this,"HideUnchangedRegionsFeature")}static _breadcrumbsSourceFactory=ci(yL,()=>({dispose(){},getBreadcrumbItems(i,e){return[]}}));static setBreadcrumbsSourceFactory(i){this._breadcrumbsSourceFactory.set(i,void 0)}_modifiedOutlineSource=Cd(this,i=>{const e=this._editors.modifiedModel.read(i),t=yL._breadcrumbsSourceFactory.read(i);return!e||!t?void 0:t(e,this._instantiationService)});viewZones;_isUpdatingHiddenAreas=!1;get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}};yL=B9e([F9e(3,He)],yL);class A$ extends p9{constructor(e,t,n,s=!1){const o=Oi("div.diff-hidden-lines-widget");super(e,t,o.root),this._unchangedRegion=n,this._hide=s,o.root.appendChild(this._nodes.root),this._hide&&this._nodes.root.replaceChildren(),this._register(Li(r=>{if(!this._hide){const a=this._unchangedRegion.getHiddenModifiedRange(r).length,l=g("hiddenLines","{0} hidden lines",a);this._nodes.text.innerText=l}}))}static{rN(this,"CompactCollapsedCodeOverlayWidget")}_nodes=Oi("div.diff-hidden-lines-compact",[Oi("div.line-left",[]),Oi("div.text@text",[]),Oi("div.line-right",[])])}class x$ extends p9{constructor(e,t,n,s,o,r,a,l){const c=Oi("div.diff-hidden-lines-widget");super(e,t,c.root),this._editor=e,this._unchangedRegion=n,this._unchangedRegionRange=s,this._hide=o,this._modifiedOutlineSource=r,this._revealModifiedHiddenLine=a,this._options=l,c.root.appendChild(this._nodes.root),this._hide?dr(this._nodes.first):this._register(rf(this._nodes.first,{width:Ww(this._editor).layoutInfoContentLeft})),this._register(Li(h=>{const u=this._unchangedRegion.visibleLineCountTop.read(h)+this._unchangedRegion.visibleLineCountBottom.read(h)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!u),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(h)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(h)>0),this._nodes.top.classList.toggle("canMoveBottom",!u);const f=this._unchangedRegion.isDragged.read(h),p=this._editor.getDomNode();p&&(p.classList.toggle("draggingUnchangedRegion",!!f),f==="top"?(p.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(h)>0),p.classList.toggle("canMoveBottom",!u)):f==="bottom"?(p.classList.toggle("canMoveTop",!u),p.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(h)>0)):(p.classList.toggle("canMoveTop",!1),p.classList.toggle("canMoveBottom",!1)))}));const d=this._editor;this._register(F(this._nodes.top,"mousedown",h=>{if(h.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),h.preventDefault();const u=h.clientY;let f=!1;const p=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const m=ve(this._nodes.top),_=F(m,"mousemove",v=>{const C=v.clientY-u;f=f||Math.abs(C)>2;const S=Math.round(C/d.getOption(k.lineHeight)),D=Math.max(0,Math.min(p+S,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(D,void 0)}),w=F(m,"mouseup",v=>{f||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),_.dispose(),w.dispose()})})),this._register(F(this._nodes.bottom,"mousedown",h=>{if(h.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),h.preventDefault();const u=h.clientY;let f=!1;const p=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const m=ve(this._nodes.bottom),_=F(m,"mousemove",v=>{const C=v.clientY-u;f=f||Math.abs(C)>2;const S=Math.round(C/d.getOption(k.lineHeight)),D=Math.max(0,Math.min(p-S,this._unchangedRegion.getMaxVisibleLineCountBottom())),T=this._unchangedRegionRange.endLineNumberExclusive>d.getModel().getLineCount()?d.getContentHeight():d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(D,void 0);const I=this._unchangedRegionRange.endLineNumberExclusive>d.getModel().getLineCount()?d.getContentHeight():d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);d.setScrollTop(d.getScrollTop()+(I-T))}),w=F(m,"mouseup",v=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!f){const b=d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const C=d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);d.setScrollTop(d.getScrollTop()+(C-b))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),_.dispose(),w.dispose()})})),this._register(Li(h=>{const u=[];if(!this._hide){const f=n.getHiddenModifiedRange(h).length,p=g("hiddenLines","{0} hidden lines",f),m=ce("span",{title:g("diff.hiddenLines.expandAll","Double click to unfold")},p);m.addEventListener("dblclick",v=>{v.button===0&&(v.preventDefault(),this._unchangedRegion.showAll(void 0))}),u.push(m);const _=this._unchangedRegion.getHiddenModifiedRange(h),w=this._modifiedOutlineSource.getBreadcrumbItems(_,h);if(w.length>0){u.push(ce("span",void 0,"\xa0\xa0|\xa0\xa0"));for(let v=0;v<w.length;v++){const b=w[v],C=BB.toIcon(b.kind),S=Oi("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[Yp(C),"\xa0",b.name,...v===w.length-1?[]:[Yp(ee.chevronRight)]]).root;u.push(S),S.onclick=()=>{this._revealModifiedHiddenLine(b.startLineNumber)}}}}dr(this._nodes.others,...u)}))}static{rN(this,"CollapsedCodeOverlayWidget")}_nodes=Oi("div.diff-hidden-lines",[Oi("div.top@top",{title:g("diff.hiddenLines.top","Click or drag to show more above")}),Oi("div.center@content",{style:{display:"flex"}},[Oi("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[ce("a",{title:g("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:rN(()=>{this._unchangedRegion.showAll(void 0)},"onclick")},...eu("$(unfold)"))]),Oi("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),Oi("div.bottom@bottom",{title:g("diff.bottom","Click or drag to show more below"),role:"button"})])}var V9e=Object.defineProperty,Mle=(i,e)=>V9e(i,"name",{value:e,configurable:!0});const SM=[];class W9e extends ${constructor(e,t,n,s){super(),this._editors=e,this._diffModel=t,this._options=n,this._widget=s,this._register(Ud((o,r)=>{if(!this._options.shouldRenderOldRevertArrows.read(o))return;const a=this._diffModel.read(o),l=a?.diff.read(o);if(!a||!l||a.movedTextToCompare.read(o))return;const c=[],d=this._selectedDiffs.read(o),h=new Set(d.map(u=>u.mapping));if(d.length>0){const u=this._editors.modifiedSelections.read(o),f=r.add(new aN(u[u.length-1].positionLineNumber,this._widget,d.flatMap(p=>p.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(f),c.push(f)}for(const u of l.mappings)if(!h.has(u)&&!u.lineRangeMapping.modified.isEmpty&&u.lineRangeMapping.innerChanges){const f=r.add(new aN(u.lineRangeMapping.modified.startLineNumber,this._widget,u.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(f),c.push(f)}r.add(ye(()=>{for(const u of c)this._editors.modified.removeGlyphMarginWidget(u)}))}))}static{Mle(this,"RevertButtonsFeature")}_selectedDiffs=ft(this,e=>{const n=this._diffModel.read(e)?.diff.read(e);if(!n)return SM;const s=this._editors.modifiedSelections.read(e);if(s.every(l=>l.isEmpty()))return SM;const o=new Pl(s.map(l=>ct.fromRangeInclusive(l))),a=n.mappings.filter(l=>l.lineRangeMapping.innerChanges&&o.intersects(l.lineRangeMapping.modified)).map(l=>({mapping:l,rangeMappings:l.lineRangeMapping.innerChanges.filter(c=>s.some(d=>V.areIntersecting(c.modifiedRange,d)))}));return a.length===0||a.every(l=>l.rangeMappings.length===0)?SM:a})}class aN extends ${constructor(e,t,n,s){super(),this._lineNumber=e,this._widget=t,this._diffs=n,this._revertSelection=s,this._register(F(this._domNode,Q.MOUSE_DOWN,o=>{o.button!==2&&(o.stopPropagation(),o.preventDefault())})),this._register(F(this._domNode,Q.MOUSE_UP,o=>{o.stopPropagation(),o.preventDefault()})),this._register(F(this._domNode,Q.CLICK,o=>{this._diffs instanceof Er?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),o.stopPropagation(),o.preventDefault()}))}static{Mle(this,"RevertButton")}static counter=0;_id=`revertButton${aN.counter++}`;getId(){return this._id}_domNode=Oi("div.revertButton",{title:this._revertSelection?g("revertSelectedChanges","Revert Selected Changes"):g("revertChange","Revert Change")},[Yp(ee.arrowRight)]).root;getDomNode(){return this._domNode}getPosition(){return{lane:_v.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}}var Ble=Object.defineProperty,H9e=Object.getOwnPropertyDescriptor,Fle=(i,e)=>Ble(i,"name",{value:e,configurable:!0}),U9e=(i,e,t,n)=>{for(var s=n>1?void 0:n?H9e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Ble(e,t,s),s},QS=(i,e)=>(t,n)=>e(t,n,i);let lN=class extends E9{constructor(i,e,t,n,s,o,r,a){super(),this._domElement=i,this._parentContextKeyService=n,this._parentInstantiationService=s,this._accessibilitySignalService=r,this._editorProgressService=a,o.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(ye(()=>this.elements.root.remove())),this._rootSizeObserver=this._register(new p2e(this.elements.root,e.dimension)),this._rootSizeObserver.setAutomaticLayout(e.automaticLayout??!1),this._options=this._instantiationService.createInstance(lW,e),this._register(Li(b=>{this._options.setWidth(this._rootSizeObserver.width.read(b))})),this._contextKeyService.createKey(Ae.isEmbeddedDiffEditor.key,!1),this._register(xh(Ae.isEmbeddedDiffEditor,this._contextKeyService,b=>this._options.isInEmbeddedEditor.read(b))),this._register(xh(Ae.comparingMovedCode,this._contextKeyService,b=>!!this._diffModel.read(b)?.movedTextToCompare.read(b))),this._register(xh(Ae.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,b=>this._options.couldShowInlineViewBecauseOfSize.read(b))),this._register(xh(Ae.diffEditorInlineMode,this._contextKeyService,b=>!this._options.renderSideBySide.read(b))),this._register(xh(Ae.hasChanges,this._contextKeyService,b=>(this._diffModel.read(b)?.diff.read(b)?.mappings.length??0)>0)),this._editors=this._register(this._instantiationService.createInstance(hW,this.elements.original,this.elements.modified,this._options,t,(b,C,S,D)=>this._createInnerEditor(b,C,S,D))),this._register(xh(Ae.diffEditorOriginalWritable,this._contextKeyService,b=>this._options.originalEditable.read(b))),this._register(xh(Ae.diffEditorModifiedWritable,this._contextKeyService,b=>!this._options.readOnly.read(b))),this._register(xh(Ae.diffEditorOriginalUri,this._contextKeyService,b=>this._diffModel.read(b)?.model.original.uri.toString()??"")),this._register(xh(Ae.diffEditorModifiedUri,this._contextKeyService,b=>this._diffModel.read(b)?.model.modified.uri.toString()??"")),this._overviewRulerPart=Cd(this,b=>this._options.renderOverviewRuler.read(b)?this._instantiationService.createInstance($u(ya),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(C=>C.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store);const l={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((b,C)=>b-(this._overviewRulerPart.read(C)?.width??0))};this._sashLayout=new E9e(this._options,l),this._sash=Cd(this,b=>{const C=this._options.renderSideBySide.read(b);return this.elements.root.classList.toggle("side-by-side",C),C?new kle(this.elements.root,l,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,()=>this._sashLayout.resetSash()):void 0}).recomputeInitiallyAndOnChange(this._store);const c=Cd(this,b=>this._instantiationService.createInstance($u(yL),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);Cd(this,b=>this._instantiationService.createInstance($u(y9e),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);const d=new Set,h=new Set;let u=!1;const f=Cd(this,b=>this._instantiationService.createInstance($u(sW),ve(this._domElement),this._editors,this._diffModel,this._options,this,()=>u||c.get().isUpdatingHiddenAreas,d,h)).recomputeInitiallyAndOnChange(this._store),p=ft(this,b=>{const C=f.read(b).viewZones.read(b).orig,S=c.read(b).viewZones.read(b).origViewZones;return C.concat(S)}),m=ft(this,b=>{const C=f.read(b).viewZones.read(b).mod,S=c.read(b).viewZones.read(b).modViewZones;return C.concat(S)});this._register(vL(this._editors.original,p,b=>{u=b},d));let _;this._register(vL(this._editors.modified,m,b=>{u=b,u?_=Uk.capture(this._editors.modified):(_?.restore(this._editors.modified),_=void 0)},h)),this._accessibleDiffViewer=Cd(this,b=>this._instantiationService.createInstance($u(G_),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(C,S)=>this._accessibleDiffViewerShouldBeVisible.set(C,S),this._options.onlyShowAccessibleDiffViewer.map(C=>!C),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((C,S)=>C?.diff.read(S)?.mappings.map(D=>D.lineRangeMapping)),new b9e(this._editors))).recomputeInitiallyAndOnChange(this._store);const w=this._accessibleDiffViewerVisible.map(b=>b?"hidden":"visible");this._register(rf(this.elements.modified,{visibility:w})),this._register(rf(this.elements.original,{visibility:w})),this._createDiffEditorContributions(),o.addDiffEditor(this),this._gutter=Cd(this,b=>this._options.shouldRenderGutterMenu.read(b)?this._instantiationService.createInstance($u(fW),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0),this._register(NN(this._layoutInfo)),Cd(this,b=>new($u(mb))(this.elements.root,this._diffModel,this._layoutInfo.map(C=>C.originalEditor),this._layoutInfo.map(C=>C.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,b=>{this._movedBlocksLinesPart.set(b,void 0)}),this._register(H.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,b=>this._handleCursorPositionChange(b,!0))),this._register(H.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,b=>this._handleCursorPositionChange(b,!1)));const v=this._diffModel.map(this,(b,C)=>{if(b)return b.diff.read(C)===void 0&&!b.isDiffUpToDate.read(C)});this._register(Ud((b,C)=>{if(v.read(b)===!0){const S=this._editorProgressService.show(!0,1e3);C.add(ye(()=>S.done()))}})),this._register(Ud((b,C)=>{C.add(new($u(W9e))(this._editors,this._diffModel,this._options,this))})),this._register(Ud((b,C)=>{const S=this._diffModel.read(b);if(S)for(const D of[S.model.original,S.model.modified])C.add(D.onWillDispose(T=>{Kt(new Et("TextModel got disposed before DiffEditorWidget model got reset")),this.setModel(null)}))})),this._register(Li(b=>{this._options.setModel(this._diffModel.read(b))}))}static{Fle(this,"DiffEditorWidget")}static ENTIRE_DIFF_OVERVIEW_WIDTH=ya.ENTIRE_DIFF_OVERVIEW_WIDTH;elements=Oi("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[Oi("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),Oi("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),Oi("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]);_diffModelSrc=this._register(yK(this,void 0));_diffModel=ft(this,i=>this._diffModelSrc.read(i)?.object);onDidChangeModel=H.fromObservableLight(this._diffModel);get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}_contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement));_instantiationService=this._register(this._parentInstantiationService.createChild(new av([Ye,this._contextKeyService])));_rootSizeObserver;_sashLayout;_sash;_boundarySashes=ci(this,void 0);_accessibleDiffViewerShouldBeVisible=ci(this,!1);_accessibleDiffViewerVisible=ft(this,i=>this._options.onlyShowAccessibleDiffViewer.read(i)?!0:this._accessibleDiffViewerShouldBeVisible.read(i));_accessibleDiffViewer;_options;_editors;_overviewRulerPart;_movedBlocksLinesPart=ci(this,void 0);_gutter;get collapseUnchangedRegions(){return this._options.hideUnchangedRegions.get()}getViewWidth(){return this._rootSizeObserver.width.get()}getContentHeight(){return this._editors.modified.getContentHeight()}_createInnerEditor(i,e,t,n){return i.createInstance(dp,e,t,n)}_layoutInfo=ft(this,i=>{const e=this._rootSizeObserver.width.read(i),t=this._rootSizeObserver.height.read(i);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=t+"px";const n=this._sash.read(i),s=this._gutter.read(i),o=s?.width.read(i)??0,r=this._overviewRulerPart.read(i)?.width??0;let a,l,c,d,h;if(!!n){const f=n.sashLeft.read(i),p=this._movedBlocksLinesPart.read(i)?.width.read(i)??0;a=0,l=f-o-p,h=f-o,c=f,d=e-c-r}else{h=0;const f=this._options.inlineViewHideOriginalLineNumbers.read(i);a=o,f?l=0:l=Math.max(5,this._editors.originalObs.layoutInfoDecorationsLeft.read(i)),c=o+l,d=e-c-r}return this.elements.original.style.left=a+"px",this.elements.original.style.width=l+"px",this._editors.original.layout({width:l,height:t},!0),s?.layout(h),this.elements.modified.style.left=c+"px",this.elements.modified.style.width=d+"px",this._editors.modified.layout({width:d,height:t},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}});_createDiffEditorContributions(){const i=EC.getDiffEditorContributions();for(const e of i)try{this._register(this._instantiationService.createInstance(e.ctor,this))}catch(t){Kt(t)}}get _targetEditor(){return this._editors.modified}getEditorType(){return bP.IDiffEditor}onVisible(){this._editors.original.onVisible(),this._editors.modified.onVisible()}onHide(){this._editors.original.onHide(),this._editors.modified.onHide()}layout(i){this._rootSizeObserver.observe(i)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){const i=this._editors.original.saveViewState(),e=this._editors.modified.saveViewState();return{original:i,modified:e,modelState:this._diffModel.get()?.serializeState()}}restoreViewState(i){if(i&&i.original&&i.modified){const e=i;this._editors.original.restoreViewState(e.original),this._editors.modified.restoreViewState(e.modified),e.modelState&&this._diffModel.get()?.restoreSerializedState(e.modelState)}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(i){return this._instantiationService.createInstance(dW,i,this._options)}getModel(){return this._diffModel.get()?.model??null}setModel(i){const e=i?"model"in i?nN.create(i).createNewRef(this):nN.create(this.createViewModel(i),this):null;this.setDiffModel(e)}setDiffModel(i,e){const t=this._diffModel.get();!i&&t&&this._accessibleDiffViewer.get().close(),this._diffModel.get()!==i?.object&&PN(e,n=>{const s=i?.object;pn.batchEventsGlobally(n,()=>{this._editors.original.setModel(s?s.model.original:null),this._editors.modified.setModel(s?s.model.modified:null)});const o=this._diffModelSrc.get()?.createNewRef(this);this._diffModelSrc.set(i?.createNewRef(this),n),setTimeout(()=>{o?.dispose()},0)})}updateOptions(i){this._options.updateOptions(i)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}setBoundarySashes(i){this._boundarySashes.set(i,void 0)}_diffValue=this._diffModel.map((i,e)=>i?.diff.read(e));onDidUpdateDiff=H.fromObservableLight(this._diffValue);get ignoreTrimWhitespace(){return this._options.ignoreTrimWhitespace.get()}get maxComputationTime(){return this._options.maxComputationTimeMs.get()}get renderSideBySide(){return this._options.renderSideBySide.get()}getLineChanges(){const i=this._diffModel.get()?.diff.get();return i?Vle(i):null}getDiffComputationResult(){const i=this._diffModel.get()?.diff.get();return i?{changes:this.getLineChanges(),changes2:i.mappings.map(e=>e.lineRangeMapping),identical:i.identical,quitEarly:i.quitEarly}:null}revert(i){const e=this._diffModel.get();!e||!e.isDiffUpToDate.get()||this._editors.modified.executeEdits("diffEditor",[{range:i.modified.toExclusiveRange(),text:e.model.original.getValueInRange(i.original.toExclusiveRange())}])}revertRangeMappings(i){const e=this._diffModel.get();if(!e||!e.isDiffUpToDate.get())return;const t=i.map(n=>({range:n.modifiedRange,text:e.model.original.getValueInRange(n.originalRange)}));this._editors.modified.executeEdits("diffEditor",t)}_goTo(i){this._editors.modified.setPosition(new j(i.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(i.lineRangeMapping.modified.toExclusiveRange())}goToDiff(i){const e=this._diffModel.get()?.diff.get()?.mappings;if(!e||e.length===0)return;const t=this._editors.modified.getPosition().lineNumber;let n;i==="next"?n=e.find(s=>s.lineRangeMapping.modified.startLineNumber>t)??e[0]:n=O0(e,s=>s.lineRangeMapping.modified.startLineNumber<t)??e[e.length-1],this._goTo(n),n.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Yt.diffLineDeleted,{source:"diffEditor.goToDiff"}):n.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Yt.diffLineInserted,{source:"diffEditor.goToDiff"}):n&&this._accessibilitySignalService.playSignal(Yt.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const i=this._diffModel.get();i&&this.waitForDiff().then(()=>{const e=i.diff.get()?.mappings;!e||e.length===0||this._goTo(e[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const i=this._diffModel.get();i&&await i.waitForDiff()}mapToOtherSide(){const i=this._editors.modified.hasWidgetFocus(),e=i?this._editors.modified:this._editors.original,t=i?this._editors.original:this._editors.modified;let n;const s=e.getSelection();if(s){const o=this._diffModel.get()?.diff.get()?.mappings.map(r=>i?r.lineRangeMapping.flip():r.lineRangeMapping);if(o){const r=$4(s.getStartPosition(),o),a=$4(s.getEndPosition(),o);n=V.plusRange(r,a)}}return{destination:t,destinationSelection:n}}switchSide(){const{destination:i,destinationSelection:e}=this.mapToOtherSide();i.focus(),e&&i.setSelection(e)}exitCompareMove(){const i=this._diffModel.get();i&&i.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){const i=this._diffModel.get()?.unchangedRegions.get();i&&us(e=>{for(const t of i)t.collapseAll(e)})}showAllUnchangedRegions(){const i=this._diffModel.get()?.unchangedRegions.get();i&&us(e=>{for(const t of i)t.showAll(e)})}_handleCursorPositionChange(i,e){if(i?.reason===ri.Explicit){const t=this._diffModel.get()?.diff.get()?.mappings.find(n=>e?n.lineRangeMapping.modified.contains(i.position.lineNumber):n.lineRangeMapping.original.contains(i.position.lineNumber));t?.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Yt.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):t?.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Yt.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):t&&this._accessibilitySignalService.playSignal(Yt.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};lN=U9e([QS(3,Ye),QS(4,He),QS(5,Yb),QS(6,_S),QS(7,YQ)],lN);function Vle(i){return i.mappings.map(e=>{const t=e.lineRangeMapping;let n,s,o,r,a=t.innerChanges;return t.original.isEmpty?(n=t.original.startLineNumber-1,s=0,a=void 0):(n=t.original.startLineNumber,s=t.original.endLineNumberExclusive-1),t.modified.isEmpty?(o=t.modified.startLineNumber-1,r=0,a=void 0):(o=t.modified.startLineNumber,r=t.modified.endLineNumberExclusive-1),{originalStartLineNumber:n,originalEndLineNumber:s,modifiedStartLineNumber:o,modifiedEndLineNumber:r,charChanges:a?.map(l=>({originalStartLineNumber:l.originalRange.startLineNumber,originalStartColumn:l.originalRange.startColumn,originalEndLineNumber:l.originalRange.endLineNumber,originalEndColumn:l.originalRange.endColumn,modifiedStartLineNumber:l.modifiedRange.startLineNumber,modifiedStartColumn:l.modifiedRange.startColumn,modifiedEndLineNumber:l.modifiedRange.endLineNumber,modifiedEndColumn:l.modifiedRange.endColumn}))}})}Fle(Vle,"toLineChanges");var Wle=Object.defineProperty,z9e=Object.getOwnPropertyDescriptor,$9e=(i,e)=>Wle(i,"name",{value:e,configurable:!0}),G9e=(i,e,t,n)=>{for(var s=n>1?void 0:n?z9e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Wle(e,t,s),s},Pu=(i,e)=>(t,n)=>e(t,n,i);let _b=class extends Wk{constructor(i,e,t,n,s,o,r,a,l,c){super(_b.ID,i,e,t,n,s,r,o,a,l),this.preferencesService=c}static{$9e(this,"TextDiffEditor")}static ID=TJ;diffEditorControl=void 0;inputLifecycleStopWatch=void 0;get scopedContextKeyService(){if(!this.diffEditorControl)return;const i=this.diffEditorControl.getOriginalEditor(),e=this.diffEditorControl.getModifiedEditor();return(i.hasTextFocus()?i:e).invokeWithinContext(t=>t.get(Ye))}getTitle(){return this.input?this.input.getName():g("textDiffEditor","Text Diff Editor")}createEditorControl(i,e){this.diffEditorControl=this._register(this.instantiationService.createInstance(lN,i,e,{}))}updateEditorControlOptions(i){this.diffEditorControl?.updateOptions(i)}getMainControl(){return this.diffEditorControl?.getModifiedEditor()}_previousViewModel=null;async setInput(i,e,t,n){this._previousViewModel&&(this._previousViewModel.dispose(),this._previousViewModel=null),this.inputLifecycleStopWatch=void 0,await super.setInput(i,e,t,n);try{const s=await i.resolve();if(n.isCancellationRequested)return;if(!(s instanceof are)){this.openAsBinary(i,e);return}const o=pt(this.diffEditorControl),r=s,a=r.textDiffEditorModel?o.createViewModel(r.textDiffEditorModel):null;this._previousViewModel=a,await a?.waitForDiff(),o.setModel(a);let l=!1;MP(e?.viewState)||(l=this.restoreTextDiffEditorViewState(i,e,t,o));let c=!1;e&&(c=_4(e,o,ot.Immediate)),!c&&!l&&o.revealFirstDiff(),o.updateOptions({...this.getReadonlyConfiguration(r.modifiedModel?.isReadonly()),originalEditable:!r.originalModel?.isReadonly()}),o.handleInitialized(),this.inputLifecycleStopWatch=new rv(!1)}catch(s){await this.handleSetInputError(s,i,e)}}async handleSetInputError(i,e,t){if(this.isFileBinaryError(i))return this.openAsBinary(e,t);if(i.fileOperationResult===Sl.FILE_TOO_LARGE){let n;throw i instanceof b1e?n=g("fileTooLargeForHeapErrorWithSize","At least one file is not displayed in the text compare editor because it is very large ({0}).",to.formatSize(i.size)):n=g("fileTooLargeForHeapErrorWithoutSize","At least one file is not displayed in the text compare editor because it is very large."),NJ(this.group,e,t,n,this.preferencesService)}throw i}restoreTextDiffEditorViewState(i,e,t,n){const s=this.loadEditorViewState(i,t);return s?(e?.selection&&s.modified&&(s.modified.cursorState=[]),n.restoreViewState(s),e?.revealIfVisible&&n.revealFirstDiff(),!0):!1}openAsBinary(i,e){const t=i.original,n=i.modified,s=this.instantiationService.createInstance(qa,i.getName(),i.getDescription(),t,n,!0),o=Xt.as(jp.EditorFactory).getFileEditorFactory();o.isFileEditor(t)&&t.setForceOpenAsBinary(),o.isFileEditor(n)&&n.setForceOpenAsBinary(),this.group.replaceEditors([{editor:i,replacement:s,options:{...e,activation:e6.PRESERVE,pinned:this.group.isPinned(i),sticky:this.group.isSticky(i)}}])}setOptions(i){super.setOptions(i),i&&_4(i,pt(this.diffEditorControl),ot.Smooth)}shouldHandleConfigurationChangeEvent(i,e){return super.shouldHandleConfigurationChangeEvent(i,e)?!0:i.affectsConfiguration(e,"diffEditor")||i.affectsConfiguration(e,"accessibility.verbosity.diffEditor")}computeConfiguration(i){const e=super.computeConfiguration(i);if(On(i.diffEditor)){const n=tS(i.diffEditor);n.diffCodeLens=n.codeLens,delete n.codeLens,n.diffWordWrap=n.wordWrap,delete n.wordWrap,Object.assign(e,n)}const t=i.accessibility?.verbosity?.diffEditor??!1;return e.accessibilityVerbose=t,e}getConfigurationOverrides(i){return{...super.getConfigurationOverrides(i),...this.getReadonlyConfiguration(this.input?.isReadonly()),originalEditable:this.input instanceof qa&&!this.input.original.isReadonly(),lineDecorationsWidth:"2ch"}}updateReadonly(i){i instanceof qa?this.diffEditorControl?.updateOptions({...this.getReadonlyConfiguration(i.isReadonly()),originalEditable:!i.original.isReadonly()}):super.updateReadonly(i)}isFileBinaryError(i){return Array.isArray(i)?i.some(t=>this.isFileBinaryError(t)):i.textFileOperationResult===rJ.FILE_IS_BINARY}clearInput(){this._previousViewModel&&(this._previousViewModel.dispose(),this._previousViewModel=null),super.clearInput();const i=this.inputLifecycleStopWatch?.elapsed();this.inputLifecycleStopWatch=void 0,typeof i=="number"&&this.logInputLifecycleTelemetry(i,this.getControl()?.getModel()?.modified?.getLanguageId()),this.diffEditorControl?.setModel(null)}logInputLifecycleTelemetry(i,e){let t=!1;this.diffEditorControl instanceof lN&&(t=this.diffEditorControl.collapseUnchangedRegions),this.telemetryService.publicLog2("diffEditor.editorVisibleTime",{editorVisibleTimeMs:i,languageId:e??"",collapseUnchangedRegions:t})}getControl(){return this.diffEditorControl}focus(){super.focus(),this.diffEditorControl?.focus()}hasFocus(){return this.diffEditorControl?.hasTextFocus()||super.hasFocus()}setEditorVisible(i){super.setEditorVisible(i),i?this.diffEditorControl?.onVisible():this.diffEditorControl?.onHide()}layout(i){this.diffEditorControl?.layout(i)}setBoundarySashes(i){this.diffEditorControl?.setBoundarySashes(i)}tracksEditorViewState(i){return i instanceof qa}computeEditorViewState(i){if(!this.diffEditorControl)return;const e=this.diffEditorControl.getModel();if(!e||!e.modified||!e.original)return;const t=this.toEditorViewStateResource(e);if(t&&Ta(t,i))return this.diffEditorControl.saveViewState()??void 0}toEditorViewStateResource(i){let e,t;if(i instanceof qa?(e=i.original.resource,t=i.modified.resource):ho(i)||(e=i.original.uri,t=i.modified.uri),!(!e||!t))return ne.from({scheme:"diff",path:`${sE(e.toString())}${sE(t.toString())}`})}};_b=G9e([Pu(1,rs),Pu(2,He),Pu(3,Si),Pu(4,Xg),Pu(5,nt),Pu(6,$t),Pu(7,Ge),Pu(8,la),Pu(9,RP)],_b);var K9e=Object.defineProperty,Hle=(i,e)=>K9e(i,"name",{value:e,configurable:!0});function SA(i,e,t=fF){if(t===fF||t===Hb)return t;let n=i.getGroups(tl.GRID_APPEARANCE)[t];if(!n&&t<9){for(let s=0;s<=t;s++){const o=i.getGroups(tl.GRID_APPEARANCE);o[s]||i.addGroup(o[s-1],wv(e))}n=i.getGroups(tl.GRID_APPEARANCE)[t]}return n?.id??Hb}Hle(SA,"columnToEditorGroup");function j9e(i,e){const t=typeof e=="number"?i.getGroup(e):e;return i.getGroups(tl.GRID_APPEARANCE).indexOf(t??i.activeGroup)}Hle(j9e,"editorGroupToColumn");var Ule=Object.defineProperty,q9e=Object.getOwnPropertyDescriptor,Y9e=(i,e)=>Ule(i,"name",{value:e,configurable:!0}),Z9e=(i,e,t,n)=>{for(var s=n>1?void 0:n?q9e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Ule(e,t,s),s},EM=(i,e)=>(t,n)=>e(t,n,i);const zle=De("pathService");let mW=class{constructor(i,e,t,n){this.localUserHome=i,this.remoteAgentService=e,this.environmentService=t,this.contextService=n,this.resolveOS=(async()=>(await this.remoteAgentService.getEnvironment())?.os||gp)(),this.resolveUserHome=(async()=>{const s=await this.remoteAgentService.getEnvironment();return this.maybeUnresolvedUserHome=s?.userHome??i})()}static{Y9e(this,"AbstractPathService")}resolveOS;resolveUserHome;maybeUnresolvedUserHome;hasValidBasename(i,e,t){return typeof e=="string"||typeof e>"u"?this.resolveOS.then(n=>this.doHasValidBasename(i,n,e)):this.doHasValidBasename(i,e,t)}doHasValidBasename(i,e,t){return i.scheme===Ve.file||i.scheme===Ve.vscodeRemote?$K(t??lh(i),e===Ts.Windows):!0}get defaultUriScheme(){return mW.findDefaultUriScheme(this.environmentService,this.contextService)}static findDefaultUriScheme(i,e){if(i.remoteAuthority)return Ve.vscodeRemote;const t=I2(e.getWorkspace());if(t)return t;const n=e.getWorkspace().folders[0];if(n)return n.uri.scheme;const s=e.getWorkspace().configuration;return s?s.scheme:Ve.file}userHome(i){return i?.preferLocal?this.localUserHome:this.resolveUserHome}get resolvedUserHome(){return this.maybeUnresolvedUserHome}get path(){return this.resolveOS.then(i=>i===Ts.Windows?Jn:kt)}async fileURI(i){let e="";if(await this.resolveOS===Ts.Windows&&(i=i.replace(/\\/g,"/")),i[0]==="/"&&i[1]==="/"){const n=i.indexOf("/",2);n===-1?(e=i.substring(2),i="/"):(e=i.substring(2,n),i=i.substring(n)||"/")}return ne.from({scheme:Ve.file,authority:e,path:i,query:"",fragment:""})}};mW=Z9e([EM(1,fie),EM(2,id),EM(3,po)],mW);var X9e=Object.defineProperty,ba=(i,e)=>X9e(i,"name",{value:e,configurable:!0});const k$="toggle.diff.renderSideBySide",N$="workbench.action.compareEditor.nextChange",P$="workbench.action.compareEditor.previousChange",$le="workbench.action.compareEditor.focusPrimarySide",Gle="workbench.action.compareEditor.focusSecondarySide",Kle="workbench.action.compareEditor.focusOtherSide",Q9e="workbench.action.compareEditor.openSide",J9e="toggle.diff.ignoreTrimWhitespace",R$="workbench.action.compareEditor.swapSides";function jle(){gt.registerCommandAndKeybindingRule({id:N$,weight:Ce.WorkbenchContrib,when:OU,primary:M.Alt|E.F5,handler:ba((a,...l)=>e(a,l,!0),"handler")}),xt.appendMenuItem(N.CommandPalette,{command:{id:N$,title:W("compare.nextChange","Go to Next Change")}}),gt.registerCommandAndKeybindingRule({id:P$,weight:Ce.WorkbenchContrib,when:OU,primary:M.Alt|M.Shift|E.F5,handler:ba((a,...l)=>e(a,l,!1),"handler")}),xt.appendMenuItem(N.CommandPalette,{command:{id:P$,title:W("compare.previousChange","Go to Previous Change")}});function i(a,l){const c=a.get(nt),d=l.length>0&&l[0]instanceof ne?l[0]:void 0;for(const h of[c.activeEditorPane,...c.visibleEditorPanes])if(h instanceof _b&&(!d||h.input instanceof qa&&Ta(h.input.primary.resource,d)))return h}ba(i,"getActiveTextDiffEditor");function e(a,l,c){const d=i(a,l);d&&d.getControl()?.goToDiff(c?"next":"previous")}ba(e,"navigateInDiffEditor");let t;(a=>{a[a.Original=0]="Original",a[a.Modified=1]="Modified",a[a.Toggle=2]="Toggle"})(t||(t={}));function n(a,l,c){const d=i(a,l);if(d)switch(c){case 0:d.getControl()?.getOriginalEditor().focus();break;case 1:d.getControl()?.getModifiedEditor().focus();break;case 2:return d.getControl()?.getModifiedEditor().hasWidgetFocus()?n(a,l,0):n(a,l,1)}}ba(n,"focusInDiffEditor");function s(a,l){const c=a.get(Xg),h=i(a,l)?.getControl()?.getModifiedEditor()?.getModel();if(!h)return;const u="diffEditor.renderSideBySide",f=c.getValue(h.uri,u);c.updateValue(h.uri,u,!f)}ba(s,"toggleDiffSideBySide");function o(a,l){const c=a.get(Xg),h=i(a,l)?.getControl()?.getModifiedEditor()?.getModel();if(!h)return;const u="diffEditor.ignoreTrimWhitespace",f=c.getValue(h.uri,u);c.updateValue(h.uri,u,!f)}ba(o,"toggleDiffIgnoreTrimWhitespace");async function r(a,l){const c=a.get(nt),d=i(a,l),h=d?.group,u=d?.input;if(!d||typeof h>"u"||!(u instanceof qa)||!u.modified.resource)return;const f=u.toUntyped({preserveViewState:h.id,preserveResource:!0});f&&(u.modified.isModified()&&c.findEditors({resource:u.modified.resource,typeId:u.modified.typeId,editorId:u.modified.editorId}).length===0&&await c.openEditor({...f.modified,options:{...f.modified.options,pinned:!0,inactive:!0}},h),await c.replaceEditors([{editor:u,replacement:{...f,original:f.modified,modified:f.original,options:{...f.options,pinned:!0}}}],h))}ba(r,"swapDiffSides"),gt.registerCommandAndKeybindingRule({id:k$,weight:Ce.WorkbenchContrib,when:void 0,primary:void 0,handler:ba((a,...l)=>s(a,l),"handler")}),gt.registerCommandAndKeybindingRule({id:$le,weight:Ce.WorkbenchContrib,when:void 0,primary:void 0,handler:ba((a,...l)=>n(a,l,1),"handler")}),gt.registerCommandAndKeybindingRule({id:Gle,weight:Ce.WorkbenchContrib,when:void 0,primary:void 0,handler:ba((a,...l)=>n(a,l,0),"handler")}),gt.registerCommandAndKeybindingRule({id:Kle,weight:Ce.WorkbenchContrib,when:void 0,primary:void 0,handler:ba((a,...l)=>n(a,l,2),"handler")}),gt.registerCommandAndKeybindingRule({id:J9e,weight:Ce.WorkbenchContrib,when:void 0,primary:void 0,handler:ba((a,...l)=>o(a,l),"handler")}),gt.registerCommandAndKeybindingRule({id:R$,weight:Ce.WorkbenchContrib,when:void 0,primary:void 0,handler:ba((a,...l)=>r(a,l),"handler")}),xt.appendMenuItem(N.CommandPalette,{command:{id:k$,title:W("toggleInlineView","Toggle Inline View"),category:g("compare","Compare")},when:l0}),xt.appendMenuItem(N.CommandPalette,{command:{id:R$,title:W("swapDiffSides","Swap Left and Right Editor Side"),category:g("compare","Compare")},when:Z.and(l0,fPe)})}ba(jle,"registerDiffEditorCommands");var e8e=Object.defineProperty,Cm=(i,e)=>e8e(i,"name",{value:e,configurable:!0});function io(i,e,t,n){const s=qle(i,e,t,n),o=s.length&&s[0].preserveFocus||!1,r={groupedEditors:[],preserveFocus:o};for(const a of s){const l=Xle(a,t);if(!l)continue;const{group:c,editor:d}=l;let h;for(const u of r.groupedEditors)if(u.group.id===c.id){h=u;break}h||(h={group:c,editors:[]},r.groupedEditors.push(h)),d&&h.editors.push(d)}return r}Cm(io,"resolveCommandsContext");function qle(i,e,t,n){const s=n.lastFocusedList;let o=s instanceof fl&&s.getHTMLElement()===Lr(),r=Zle(i,o,e,t,n);if(!r){const l=t.activeGroup,c=l.activeEditor;r={groupId:l.id,editorIndex:c?l.getIndexOfEditor(c):void 0},o=!1}const a=L9(r,o,e,t,n);return Yle(r,a)}Cm(qle,"getCommandsContext");function Yle(i,e){if(e.length<=1)return e;const t=e.findIndex(n=>n.groupId===i.groupId&&n.editorIndex===i.editorIndex);if(t!==-1)e.splice(t,1),e.unshift(i);else if(i.editorIndex===void 0)e.unshift(i);else throw new Error("Editor context not found in multi editor context");return e}Cm(Yle,"moveCurrentEditorContextToFront");function Zle(i,e,t,n,s){const o=i.filter(r=>NF(r)||ne.isUri(r));for(const r of o)if(NF(r))return r;for(const r of o){const a=t.findEditors(r);if(a.length){const l=a[0],c=n.getGroup(l.groupId);return{groupId:l.groupId,editorIndex:c?.getIndexOfEditor(l.editor)}}}if(e){const r=s.lastFocusedList;for(const a of r.getFocusedElements())if(D9(a))return cN(a,void 0,n)}}Cm(Zle,"getEditorContextFromCommandArgs");function L9(i,e,t,n,s){if(e){const r=s.lastFocusedList.getSelectedElements().filter(D9);if(r.length>1)return r.map(a=>cN(a,i.preserveFocus,n));if(r.length===0)return L9(i,!1,t,n,s)}else{const o=n.getGroup(i.groupId),r=i.editorIndex!==void 0?o?.getEditorByIndex(i.editorIndex):o?.activeEditor;if(o&&r&&o.isSelected(r))return o.selectedEditors.map(a=>cN({editor:a,groupId:o.id},i.preserveFocus,n))}return[i]}Cm(L9,"getMultiSelectContext");function cN(i,e,t){if(AP(i))return{groupId:i.id,editorIndex:void 0,preserveFocus:e};const n=t.getGroup(i.groupId);return{groupId:i.groupId,editorIndex:n?n.getIndexOfEditor(i.editor):-1,preserveFocus:e}}Cm(cN,"groupOrEditorToEditorContext");function D9(i){return AP(i)||Ax(i)}Cm(D9,"isGroupOrEditor");function Xle(i,e){const t=e.getGroup(i.groupId);if(!t)return;if(i.editorIndex===void 0)return{group:t,editor:void 0};const n=t.getEditorByIndex(i.editorIndex);return{group:t,editor:n}}Cm(Xle,"getEditorAndGroupFromContext");var t8e=Object.defineProperty,Ft=(i,e)=>t8e(i,"name",{value:e,configurable:!0});const i8e="workbench.action.closeUnmodifiedEditors",n8e="workbench.action.closeEditorsInGroup",s8e="workbench.action.closeEditorsAndGroup",o8e="workbench.action.closeEditorsToTheRight",ZR="workbench.action.closeActiveEditor",r8e="workbench.action.closeActivePinnedEditor",a8e="workbench.action.closeGroup",l8e="workbench.action.closeOtherEditors",_h="moveActiveEditor",Sf="copyActiveEditor",Ef="layoutEditorGroups",c8e="workbench.action.keepEditor",d8e="workbench.action.toggleKeepEditors",h8e="workbench.action.toggleEditorGroupLock",u8e="workbench.action.lockEditorGroup",XR="workbench.action.unlockEditorGroup",g8e="workbench.action.showEditorsInGroup",f8e="workbench.action.reopenWithEditor",p8e="workbench.action.pinEditor",I9="workbench.action.unpinEditor",Qle="workbench.action.splitEditor",_W="workbench.action.splitEditorUp",bW="workbench.action.splitEditorDown",vW="workbench.action.splitEditorLeft",wW="workbench.action.splitEditorRight",Jle="workbench.action.toggleMaximizeEditorGroup",m8e="workbench.action.splitEditorInGroup",_8e="workbench.action.toggleSplitEditorInGroup",b8e="workbench.action.joinEditorInGroup",v8e="workbench.action.toggleSplitEditorInGroupLayout",w8e="workbench.action.focusFirstSideEditor",C8e="workbench.action.focusSecondSideEditor",y8e="workbench.action.focusOtherSideEditor",S8e="workbench.action.focusLeftGroupWithoutWrap",E8e="workbench.action.focusRightGroupWithoutWrap",L8e="workbench.action.focusAboveGroupWithoutWrap",D8e="workbench.action.focusBelowGroupWithoutWrap",O$="workbench.action.openEditorAtIndex",I8e="workbench.action.moveEditorToNewWindow",T8e="workbench.action.copyEditorToNewWindow",A8e="workbench.action.moveEditorGroupToNewWindow",x8e="workbench.action.copyEditorGroupToNewWindow",k8e="workbench.action.newEmptyEditorWindow",M$="_workbench.open",B$="_workbench.diff",N8e="_workbench.openWith",ece=[Qle,ZR,I9,XR,Jle],F$=Ft(function(i){return!(!On(i)||!hn(i.to)||!oo(i.by)&&!hn(i.by)||!oo(i.value)&&!Gc(i.value))},"isActiveEditorMoveCopyArg");function tce(){const i={type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right"]},by:{type:"string",enum:["tab","group"]},value:{type:"number"}}};gt.registerCommandAndKeybindingRule({id:_h,weight:Ce.WorkbenchContrib,when:Ae.editorTextFocus,primary:0,handler:Ft((s,o)=>e(!0,o,s),"handler"),metadata:{description:g("editorCommand.activeEditorMove.description","Move the active editor by tabs or groups"),args:[{name:g("editorCommand.activeEditorMove.arg.name","Active editor move argument"),description:g("editorCommand.activeEditorMove.arg.description",`Argument Properties:
	* 'to': String value providing where to move.
	* 'by': String value providing the unit for move (by tab or by group).
	* 'value': Number value providing how many positions or an absolute position to move.`),constraint:F$,schema:i}]}}),gt.registerCommandAndKeybindingRule({id:Sf,weight:Ce.WorkbenchContrib,when:Ae.editorTextFocus,primary:0,handler:Ft((s,o)=>e(!1,o,s),"handler"),metadata:{description:g("editorCommand.activeEditorCopy.description","Copy the active editor by groups"),args:[{name:g("editorCommand.activeEditorCopy.arg.name","Active editor copy argument"),description:g("editorCommand.activeEditorCopy.arg.description",`Argument Properties:
	* 'to': String value providing where to copy.
	* 'value': Number value providing how many positions or an absolute position to copy.`),constraint:F$,schema:i}]}});function e(s,o=Object.create(null),r){o.to=o.to||"right",o.by=o.by||"tab",o.value=typeof o.value=="number"?o.value:1;const a=r.get(nt).activeEditorPane;if(a)switch(o.by){case"tab":if(s)return t(o,a);break;case"group":return n(s,o,a,r)}}Ft(e,"moveCopyActiveEditor");function t(s,o){const r=o.group;let a=r.getIndexOfEditor(o.input);switch(s.to){case"first":a=0;break;case"last":a=r.count-1;break;case"left":a=a-(s.value??1);break;case"right":a=a+(s.value??1);break;case"center":a=Math.round(r.count/2)-1;break;case"position":a=(s.value??1)-1;break}a=a<0?0:a>=r.count?r.count-1:a,r.moveEditor(o.input,r,{index:a})}Ft(t,"moveActiveTab");function n(s,o,r,a){const l=a.get(Ge),c=a.get(Pe),d=r.group;let h;switch(o.to){case"left":h=l.findGroup({direction:Bt.LEFT},d),h||(h=l.addGroup(d,Bt.LEFT));break;case"right":h=l.findGroup({direction:Bt.RIGHT},d),h||(h=l.addGroup(d,Bt.RIGHT));break;case"up":h=l.findGroup({direction:Bt.UP},d),h||(h=l.addGroup(d,Bt.UP));break;case"down":h=l.findGroup({direction:Bt.DOWN},d),h||(h=l.addGroup(d,Bt.DOWN));break;case"first":h=l.findGroup({location:Hl.FIRST},d);break;case"last":h=l.findGroup({location:Hl.LAST},d);break;case"previous":h=l.findGroup({location:Hl.PREVIOUS},d);break;case"next":h=l.findGroup({location:Hl.NEXT},d),h||(h=l.addGroup(d,wv(c)));break;case"center":h=l.getGroups(tl.GRID_APPEARANCE)[l.count/2-1];break;case"position":h=l.getGroups(tl.GRID_APPEARANCE)[(o.value??1)-1];break}h&&(s?d.moveEditor(r.input,h):d.id!==h.id&&d.copyEditor(r.input,h),h.focus())}Ft(n,"moveCopyActiveEditorToGroup")}Ft(tce,"registerActiveEditorMoveCopyCommand");function ice(){function i(e,t){if(!t||typeof t!="object")return;e.get(Ge).applyLayout(t)}Ft(i,"applyEditorLayout"),Mi.registerCommand(Ef,(e,t)=>{i(e,t)}),Mi.registerCommand({id:"vscode.setEditorLayout",handler:Ft((e,t)=>i(e,t),"handler"),metadata:{description:"Set Editor Layout",args:[{name:"args",schema:{type:"object",required:["groups"],properties:{orientation:{type:"number",default:0,enum:[0,1]},groups:{$ref:"#/definitions/editorGroupsSchema",default:[{},{}]}}}}]}}),Mi.registerCommand({id:"vscode.getEditorLayout",handler:Ft(e=>e.get(Ge).getLayout(),"handler"),metadata:{description:"Get Editor Layout",args:[],returns:"An editor layout object, in the same format as vscode.setEditorLayout"}})}Ft(ice,"registerEditorGroupsLayoutCommands");function nce(){function i(e,t,n){return e?[{...e.editorOptions,...t??Object.create(null)},e.sideBySide?Hb:n]:[t,n]}Ft(i,"mixinContext"),Mi.registerCommand({id:"vscode.open",handler:Ft((e,t)=>{e.get(Xi).executeCommand(M$,t)},"handler"),metadata:{description:"Opens the provided resource in the editor.",args:[{name:"Uri"}]}}),Mi.registerCommand(M$,async function(e,t,n,s,o){const r=e.get(nt),a=e.get(Ge),l=e.get(Lv),c=e.get(zle),d=e.get(Pe),h=e.get(jQ),u=typeof t=="string"?t:ne.from(t,!0),[f,p]=n??[];if(p||typeof f=="number"||Z_(u,Ve.untitled)){const[m,_]=i(o,p,f),w=ne.isUri(u)?u:ne.parse(u);let v;h.isUntitledWithAssociatedResource(w)?v={resource:w.with({scheme:c.defaultUriScheme}),forceUntitled:!0,options:m,label:s}:v={resource:w,options:m,label:s},await r.openEditor(v,SA(a,d,_))}else{if(Z_(u,Ve.command))return;await l.open(u,{openToSide:o?.sideBySide,editorOptions:o?.editorOptions})}}),Mi.registerCommand({id:"vscode.diff",handler:Ft((e,t,n,s)=>{e.get(Xi).executeCommand(B$,t,n,s)},"handler"),metadata:{description:"Opens the provided resources in the diff editor to compare their contents.",args:[{name:"left",description:"Left-hand side resource of the diff editor"},{name:"right",description:"Right-hand side resource of the diff editor"},{name:"title",description:"Human readable title for the diff editor"}]}}),Mi.registerCommand(B$,async function(e,t,n,s,o,r){const a=e.get(nt),l=e.get(Ge),c=e.get(Pe),[d,h]=o??[],[u,f]=i(r,h,d);let p,m;typeof s=="string"?p=s:s&&(p=s.label,m=s.description),await a.openEditor({original:{resource:ne.from(t,!0)},modified:{resource:ne.from(n,!0)},label:p,description:m,options:u},SA(l,c,f))}),Mi.registerCommand(N8e,async(e,t,n,s)=>{const o=e.get(nt),r=e.get(Ge),a=e.get(Pe),[l,c]=s??[];await o.openEditor({resource:ne.from(t,!0),options:{...c,pinned:!0,override:n}},SA(r,a,l))}),Mi.registerCommand({id:"vscode.changes",handler:Ft((e,t,n)=>{e.get(Xi).executeCommand("_workbench.changes",t,n)},"handler"),metadata:{description:"Opens a list of resources in the changes editor to compare their contents.",args:[{name:"title",description:"Human readable title for the diff editor"},{name:"resources",description:"List of resources to open in the changes editor"}]}}),Mi.registerCommand("_workbench.changes",async(e,t,n)=>{const s=e.get(nt),o=[];for(const[r,a,l]of n)o.push({resource:ne.revive(r),original:{resource:ne.revive(a)},modified:{resource:ne.revive(l)}});await s.openEditor({resources:o,label:t})}),Mi.registerCommand("_workbench.openMultiDiffEditor",async(e,t)=>{await e.get(nt).openEditor({multiDiffSource:t.multiDiffSourceUri?ne.revive(t.multiDiffSourceUri):void 0,resources:t.resources?.map(s=>({original:{resource:ne.revive(s.originalUri)},modified:{resource:ne.revive(s.modifiedUri)}})),label:t.title})})}Ft(nce,"registerOpenEditorAPICommands");function sce(){const i=Ft((t,n)=>{const s=t.get(nt),o=s.activeEditorPane;if(o){const r=o.group.getEditorByIndex(n);r&&s.openEditor(r)}},"openEditorAtIndex");Mi.registerCommand({id:O$,handler:i});for(let t=0;t<9;t++){const n=t,s=t+1;gt.registerCommandAndKeybindingRule({id:O$+s,weight:Ce.WorkbenchContrib,when:void 0,primary:M.Alt|e(s),mac:{primary:M.WinCtrl|e(s)},handler:Ft(o=>i(o,n),"handler")})}function e(t){switch(t){case 0:return E.Digit0;case 1:return E.Digit1;case 2:return E.Digit2;case 3:return E.Digit3;case 4:return E.Digit4;case 5:return E.Digit5;case 6:return E.Digit6;case 7:return E.Digit7;case 8:return E.Digit8;case 9:return E.Digit9}throw new Error("invalid index")}Ft(e,"toKeyCode")}Ft(sce,"registerOpenEditorAtIndexCommands");function oce(){for(let t=1;t<8;t++)gt.registerCommandAndKeybindingRule({id:i(t),weight:Ce.WorkbenchContrib,when:void 0,primary:M.CtrlCmd|e(t),handler:Ft(n=>{const s=n.get(Ge),o=n.get(Pe);if(t>s.count)return;const r=s.getGroups(tl.GRID_APPEARANCE);if(r[t])return r[t].focus();const a=wv(o),l=s.findGroup({location:Hl.LAST});if(!l)return;s.addGroup(l,a).focus()},"handler")});function i(t){switch(t){case 1:return"workbench.action.focusSecondEditorGroup";case 2:return"workbench.action.focusThirdEditorGroup";case 3:return"workbench.action.focusFourthEditorGroup";case 4:return"workbench.action.focusFifthEditorGroup";case 5:return"workbench.action.focusSixthEditorGroup";case 6:return"workbench.action.focusSeventhEditorGroup";case 7:return"workbench.action.focusEighthEditorGroup"}throw new Error("Invalid index")}Ft(i,"toCommandId");function e(t){switch(t){case 1:return E.Digit2;case 2:return E.Digit3;case 3:return E.Digit4;case 4:return E.Digit5;case 5:return E.Digit6;case 6:return E.Digit7;case 7:return E.Digit8}throw new Error("Invalid index")}Ft(e,"toKeyCode")}Ft(oce,"registerFocusEditorGroupAtIndexCommands");function T9(i,e,t){if(!t.groupedEditors.length)return;const{group:n,editors:s}=t.groupedEditors[0],o=t.preserveFocus,r=i.addGroup(n,e);for(const a of s)a&&!a.hasCapability(Wo.Singleton)&&n.copyEditor(a,r,{preserveFocus:o});r.focus()}Ft(T9,"splitEditor");function rce(){[{id:_W,direction:Bt.UP},{id:bW,direction:Bt.DOWN},{id:vW,direction:Bt.LEFT},{id:wW,direction:Bt.RIGHT}].forEach(({id:i,direction:e})=>{Mi.registerCommand(i,function(t,...n){const s=io(n,t.get(nt),t.get(Ge),t.get(xi));T9(t.get(Ge),e,s)})})}Ft(rce,"registerSplitEditorCommands");function ace(){function i(e,t,...n){const s=e.get(Ge),o=e.get(nt);let r;if(t||n.length?r=!1:r=s.partOptions.preventPinnedEditorClose==="keyboard"||s.partOptions.preventPinnedEditorClose==="keyboardAndMouse",r){const c=s.activeGroup,d=c.activeEditor;if(d&&c.isSticky(d)){const h=c.getEditors(mn.MOST_RECENTLY_ACTIVE,{excludeSticky:!0})[0];if(h)return c.openEditor(h);const u=o.getEditors(mn.MOST_RECENTLY_ACTIVE,{excludeSticky:!0})[0];if(u)return Promise.resolve(s.getGroup(u.groupId)?.openEditor(u.editor))}}const a=io(n,e.get(nt),e.get(Ge),e.get(xi)),l=a.preserveFocus;return Promise.all(a.groupedEditors.map(async({group:c,editors:d})=>{const h=d.filter(u=>!r||!c.isSticky(u));await c.closeEditors(h,{preserveFocus:l})}))}Ft(i,"closeEditorHandler"),gt.registerCommandAndKeybindingRule({id:ZR,weight:Ce.WorkbenchContrib,when:void 0,primary:M.CtrlCmd|E.KeyW,win:{primary:M.CtrlCmd|E.F4,secondary:[M.CtrlCmd|E.KeyW]},handler:Ft((e,...t)=>i(e,!1,...t),"handler")}),Mi.registerCommand(r8e,(e,...t)=>i(e,!0,...t)),gt.registerCommandAndKeybindingRule({id:n8e,weight:Ce.WorkbenchContrib,when:void 0,primary:di(M.CtrlCmd|E.KeyK,E.KeyW),handler:Ft((e,...t)=>{const n=io(t,e.get(nt),e.get(Ge),e.get(xi));return Promise.all(n.groupedEditors.map(async({group:s})=>{await s.closeAllEditors({excludeSticky:!0})}))},"handler")}),gt.registerCommandAndKeybindingRule({id:a8e,weight:Ce.WorkbenchContrib,when:Z.and(lR,SD),primary:M.CtrlCmd|E.KeyW,win:{primary:M.CtrlCmd|E.F4,secondary:[M.CtrlCmd|E.KeyW]},handler:Ft((e,...t)=>{const n=e.get(Ge),s=io(t,e.get(nt),n,e.get(xi));s.groupedEditors.length&&n.removeGroup(s.groupedEditors[0].group)},"handler")}),gt.registerCommandAndKeybindingRule({id:i8e,weight:Ce.WorkbenchContrib,when:void 0,primary:di(M.CtrlCmd|E.KeyK,E.KeyU),handler:Ft((e,...t)=>{const n=io(t,e.get(nt),e.get(Ge),e.get(xi));return Promise.all(n.groupedEditors.map(async({group:s})=>{await s.closeEditors({savedOnly:!0,excludeSticky:!0},{preserveFocus:n.preserveFocus})}))},"handler")}),gt.registerCommandAndKeybindingRule({id:l8e,weight:Ce.WorkbenchContrib,when:void 0,primary:void 0,mac:{primary:M.CtrlCmd|M.Alt|E.KeyT},handler:Ft((e,...t)=>{const n=io(t,e.get(nt),e.get(Ge),e.get(xi));return Promise.all(n.groupedEditors.map(async({group:s,editors:o})=>{const r=s.getEditors(mn.SEQUENTIAL,{excludeSticky:!0}).filter(a=>!o.includes(a));for(const a of o)a&&s.pinEditor(a);await s.closeEditors(r,{preserveFocus:n.preserveFocus})}))},"handler")}),gt.registerCommandAndKeybindingRule({id:o8e,weight:Ce.WorkbenchContrib,when:void 0,primary:void 0,handler:Ft(async(e,...t)=>{const n=io(t,e.get(nt),e.get(Ge),e.get(xi));if(n.groupedEditors.length){const{group:s,editors:o}=n.groupedEditors[0];s.activeEditor&&s.pinEditor(s.activeEditor),await s.closeEditors({direction:q6.RIGHT,except:o[0],excludeSticky:!0},{preserveFocus:n.preserveFocus})}},"handler")}),gt.registerCommandAndKeybindingRule({id:f8e,weight:Ce.WorkbenchContrib,when:void 0,primary:void 0,handler:Ft(async(e,...t)=>{const n=e.get(nt),s=e.get(aR),o=e.get(rs),r=io(t,n,e.get(Ge),e.get(xi)),a=new Map;for(const{group:l,editors:c}of r.groupedEditors)for(const d of c){const h=d.toUntyped();if(!h)return;h.options={...n.activeEditorPane?.options,override:mX.PICK};const u=await s.resolveEditor(h,l);if(!RJ(u))return;let f=a.get(l);f||(f=[],a.set(l,f)),f.push({editor:d,replacement:u.editor,forceReplaceDirty:d.resource?.scheme===Ve.untitled,options:u.options}),o.publicLog2("workbenchEditorReopen",{scheme:d.resource?.scheme??"",ext:d.resource?v5(d.resource):"",from:d.editorId??"",to:u.editor.editorId??""})}for(const[l,c]of a)await l.replaceEditors(c),await l.openEditor(c[0].replacement)},"handler")}),Mi.registerCommand(s8e,async(e,...t)=>{const n=e.get(Ge),s=io(t,e.get(nt),n,e.get(xi));if(s.groupedEditors.length){const{group:o}=s.groupedEditors[0];await o.closeAllEditors(),o.count===0&&n.getGroup(o.id)&&n.removeGroup(o)}})}Ft(ace,"registerCloseEditorCommands");function lce(){const i=[{id:S8e,direction:Bt.LEFT},{id:E8e,direction:Bt.RIGHT},{id:L8e,direction:Bt.UP},{id:D8e,direction:Bt.DOWN}];for(const e of i)Mi.registerCommand(e.id,async t=>{const n=t.get(Ge);n.findGroup({direction:e.direction},n.activeGroup,!1)?.focus()})}Ft(lce,"registerFocusEditorGroupWihoutWrapCommands");function cce(){async function i(t,n){const s=t.get(He);if(!n.groupedEditors.length)return;const{group:o,editors:r}=n.groupedEditors[0],a=r[0];a&&await o.replaceEditors([{editor:a,replacement:s.createInstance(zo,void 0,void 0,a,a),forceReplaceDirty:!0}])}Ft(i,"splitEditorInGroup"),Oe(class extends ge{constructor(){super({id:m8e,title:W("splitEditorInGroup","Split Editor in Group"),category:oe.View,precondition:tA,f1:!0,keybinding:{weight:Ce.WorkbenchContrib,when:tA,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|M.Shift|E.Backslash)}})}run(t,...n){return i(t,io(n,t.get(nt),t.get(Ge),t.get(xi)))}});async function e(t){if(!t.groupedEditors.length)return;const{group:n,editors:s}=t.groupedEditors[0],o=s[0];if(!o||!(o instanceof zo))return;let r;const a=n.activeEditorPane;if(a instanceof Bl&&n.activeEditor===o){for(const l of[a.getPrimaryEditorPane(),a.getSecondaryEditorPane()])if(l?.hasFocus()){r={viewState:l.getViewState()};break}}await n.replaceEditors([{editor:o,replacement:o.primary,options:r}])}Ft(e,"joinEditorInGroup"),Oe(class extends ge{constructor(){super({id:b8e,title:W("joinEditorInGroup","Join Editor in Group"),category:oe.View,precondition:Ep,f1:!0,keybinding:{weight:Ce.WorkbenchContrib,when:Ep,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|M.Shift|E.Backslash)}})}run(t,...n){return e(io(n,t.get(nt),t.get(Ge),t.get(xi)))}}),Oe(class extends ge{constructor(){super({id:_8e,title:W("toggleJoinEditorInGroup","Toggle Split Editor in Group"),category:oe.View,precondition:Z.or(tA,Ep),f1:!0})}async run(t,...n){const s=io(n,t.get(nt),t.get(Ge),t.get(xi));if(!s.groupedEditors.length)return;const{editors:o}=s.groupedEditors[0];o[0]instanceof zo?await e(s):o[0]&&await i(t,s)}}),Oe(class extends ge{constructor(){super({id:v8e,title:W("toggleSplitEditorInGroupLayout","Toggle Layout of Split Editor in Group"),category:oe.View,precondition:Ep,f1:!0})}async run(t){const n=t.get(Pe),s=n.getValue(Bl.SIDE_BY_SIDE_LAYOUT_SETTING);let o;return s!=="horizontal"?o="horizontal":o="vertical",n.updateValue(Bl.SIDE_BY_SIDE_LAYOUT_SETTING,o)}})}Ft(cce,"registerSplitEditorInGroupCommands");function dce(){Oe(class extends ge{constructor(){super({id:w8e,title:W("focusLeftSideEditor","Focus First Side in Active Editor"),category:oe.View,precondition:Z.or(Ep,l0),f1:!0})}async run(i){const e=i.get(nt),t=i.get(Xi),n=e.activeEditorPane;n instanceof Bl?n.getSecondaryEditorPane()?.focus():n instanceof _b&&await t.executeCommand(Gle)}}),Oe(class extends ge{constructor(){super({id:C8e,title:W("focusRightSideEditor","Focus Second Side in Active Editor"),category:oe.View,precondition:Z.or(Ep,l0),f1:!0})}async run(i){const e=i.get(nt),t=i.get(Xi),n=e.activeEditorPane;n instanceof Bl?n.getPrimaryEditorPane()?.focus():n instanceof _b&&await t.executeCommand($le)}}),Oe(class extends ge{constructor(){super({id:y8e,title:W("focusOtherSideEditor","Focus Other Side in Active Editor"),category:oe.View,precondition:Z.or(Ep,l0),f1:!0})}async run(i){const e=i.get(nt),t=i.get(Xi),n=e.activeEditorPane;n instanceof Bl?n.getPrimaryEditorPane()?.hasFocus()?n.getSecondaryEditorPane()?.focus():n.getPrimaryEditorPane()?.focus():n instanceof _b&&await t.executeCommand(Kle)}})}Ft(dce,"registerFocusSideEditorsCommands");function hce(){gt.registerCommandAndKeybindingRule({id:c8e,weight:Ce.WorkbenchContrib,when:void 0,primary:di(M.CtrlCmd|E.KeyK,E.Enter),handler:Ft(async(e,...t)=>{const n=io(t,e.get(nt),e.get(Ge),e.get(xi));for(const{group:s,editors:o}of n.groupedEditors)for(const r of o)s.pinEditor(r)},"handler")}),Mi.registerCommand({id:d8e,handler:Ft(e=>{const t=e.get(Pe),s=t.getValue("workbench.editor.enablePreview")!==!0;t.updateValue("workbench.editor.enablePreview",s)},"handler")});function i(e,t,...n){const o=io(n,e.get(nt),e.get(Ge),e.get(xi)).groupedEditors[0]?.group;o?.lock(t??!o.isLocked)}Ft(i,"setEditorGroupLock"),Oe(class extends ge{constructor(){super({id:h8e,title:W("toggleEditorGroupLock","Toggle Editor Group Lock"),category:oe.View,f1:!0})}async run(e,...t){i(e,void 0,...t)}}),Oe(class extends ge{constructor(){super({id:u8e,title:W("lockEditorGroup","Lock Editor Group"),category:oe.View,precondition:Qx.toNegated(),f1:!0})}async run(e,...t){i(e,!0,...t)}}),Oe(class extends ge{constructor(){super({id:XR,title:W("unlockEditorGroup","Unlock Editor Group"),precondition:Qx,category:oe.View,f1:!0})}async run(e,...t){i(e,!1,...t)}}),gt.registerCommandAndKeybindingRule({id:p8e,weight:Ce.WorkbenchContrib,when:aV.toNegated(),primary:di(M.CtrlCmd|E.KeyK,M.Shift|E.Enter),handler:Ft(async(e,...t)=>{const n=io(t,e.get(nt),e.get(Ge),e.get(xi));for(const{group:s,editors:o}of n.groupedEditors)for(const r of o)s.stickEditor(r)},"handler")}),gt.registerCommandAndKeybindingRule({id:Q9e,weight:Ce.WorkbenchContrib,when:Ae.inDiffEditor,primary:di(M.CtrlCmd|E.KeyK,M.Shift|E.KeyO),handler:Ft(async e=>{const t=e.get(nt),n=e.get(Ge),s=t.activeEditor,o=t.activeTextEditorControl;if(!kD(o)||!(s instanceof qa))return;let r;return o.getOriginalEditor().hasTextFocus()?r=s.original:r=s.modified,n.activeGroup.openEditor(r)},"handler")}),gt.registerCommandAndKeybindingRule({id:I9,weight:Ce.WorkbenchContrib,when:aV,primary:di(M.CtrlCmd|E.KeyK,M.Shift|E.Enter),handler:Ft(async(e,...t)=>{const n=io(t,e.get(nt),e.get(Ge),e.get(xi));for(const{group:s,editors:o}of n.groupedEditors)for(const r of o)s.unstickEditor(r)},"handler")}),gt.registerCommandAndKeybindingRule({id:g8e,weight:Ce.WorkbenchContrib,when:void 0,primary:void 0,handler:Ft((e,...t)=>{const n=e.get(Ge),s=e.get(ca),r=io(t,e.get(nt),n,e.get(xi)).groupedEditors[0]?.group;return r&&n.activateGroup(r),s.quickAccess.show(Jb.PREFIX)},"handler")})}Ft(hce,"registerOtherEditorCommands");function P8e(){tce(),ice(),jle(),nce(),sce(),ace(),hce(),cce(),dce(),oce(),rce(),lce()}Ft(P8e,"setup");var R8e=Object.defineProperty,uce=(i,e)=>R8e(i,"name",{value:e,configurable:!0});class O8e{static{uce(this,"TreeViewsDnDService")}_serviceBrand;_dragOperations=new Map;removeDragOperationTransfer(e){if(e&&this._dragOperations.has(e)){const t=this._dragOperations.get(e);return this._dragOperations.delete(e),t}}addDragOperationTransfer(e,t){this._dragOperations.set(e,t)}}class LM{constructor(e){this.identifier=e}static{uce(this,"DraggedTreeItemsIdentifier")}}var M8e=Object.defineProperty,B8e=(i,e)=>M8e(i,"name",{value:e,configurable:!0});class bb extends ${constructor(e,t){super(),this.options=t,this.supportIcons=t?.supportIcons??!1,this.domNode=Le(e,ce("span.monaco-highlighted-label"))}static{B8e(this,"HighlightedLabel")}domNode;text="";title="";highlights=[];supportIcons;didEverRender=!1;customHover;get element(){return this.domNode}set(e,t=[],n="",s){e||(e=""),s&&(e=bb.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&lo(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const r=this.text.substring(t,n.start);this.supportIcons?e.push(...eu(r)):e.push(r),t=n.start}const s=this.text.substring(t,n.end),o=ce("span.highlight",void 0,...this.supportIcons?eu(s):[s]);n.extraClasses&&o.classList.add(...n.extraClasses),e.push(o),t=n.end}if(t<this.text.length){const n=this.text.substring(t);this.supportIcons?e.push(...eu(n)):e.push(n)}if(dr(this.domNode,...e),this.options?.hoverDelegate?.showNativeHover)this.domNode.title=this.title;else if(!this.customHover&&this.title!==""){const n=this.options?.hoverDelegate??bn("mouse");this.customHover=this._register(pl().setupManagedHover(n,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(e,t){let n=0,s=0;return e.replace(/\r\n|\r|\n/g,(o,r)=>{s=o===`\r
`?-1:0,r+=n;for(const a of t)a.end<=r||(a.start>=r&&(a.start+=s),a.end>=r&&(a.end+=s));return n+=s,""})}}var F8e=Object.defineProperty,ky=(i,e)=>F8e(i,"name",{value:e,configurable:!0});class JS{constructor(e){this._element=e}static{ky(this,"FastLabelNode")}disposed;_textContent;_classNames;_empty;get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set classNames(e){this.disposed||lo(e,this._classNames)||(this._classNames=e,this._element.classList.value="",this._element.classList.add(...e))}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class V8e extends ${static{ky(this,"IconLabel")}creationOptions;domNode;nameContainer;nameNode;descriptionNode;suffixNode;labelContainer;hoverDelegate;customHovers=new Map;constructor(e,t){super(),this.creationOptions=t,this.domNode=this._register(new JS(Le(e,ce(".monaco-icon-label")))),this.labelContainer=Le(this.domNode.element,ce(".monaco-icon-label-container")),this.nameContainer=Le(this.labelContainer,ce("span.monaco-icon-name-container")),t?.supportHighlights||t?.supportIcons?this.nameNode=this._register(new H8e(this.nameContainer,!!t.supportIcons)):this.nameNode=new W8e(this.nameContainer),this.hoverDelegate=t?.hoverDelegate??bn("mouse")}get element(){return this.domNode.element}setLabel(e,t,n){const s=["monaco-icon-label"],o=["monaco-icon-label-container"];let r="";n&&(n.extraClasses&&s.push(...n.extraClasses),n.italic&&s.push("italic"),n.strikethrough&&s.push("strikethrough"),n.disabledCommand&&o.push("disabled"),n.title&&(typeof n.title=="string"?r+=n.title:r+=e));const a=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(n?.iconPath){let l;!a||!xs(a)?(l=ce(".monaco-icon-label-iconpath"),this.domNode.element.prepend(l)):l=a,l.style.backgroundImage=Zg(n?.iconPath)}else a&&a.remove();if(this.domNode.classNames=s,this.domNode.element.setAttribute("aria-label",r),this.labelContainer.classList.value="",this.labelContainer.classList.add(...o),this.setupHover(n?.descriptionTitle?this.labelContainer:this.element,n?.title),this.nameNode.setLabel(e,n),t||this.descriptionNode){const l=this.getOrCreateDescriptionNode();l instanceof bb?(l.set(t||"",n?n.descriptionMatches:void 0,void 0,n?.labelEscapeNewLines),this.setupHover(l.element,n?.descriptionTitle)):(l.textContent=t&&n?.labelEscapeNewLines?bb.escapeNewLines(t,[]):t||"",this.setupHover(l.element,n?.descriptionTitle||""),l.empty=!t)}if(n?.suffix||this.suffixNode){const l=this.getOrCreateSuffixNode();l.textContent=n?.suffix??""}}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(this.hoverDelegate.showNativeHover){let s=function(o,r){hn(r)?o.title=pH(r):r?.markdownNotSupportedFallback?o.title=r.markdownNotSupportedFallback:o.removeAttribute("title")};ky(s,"setupNativeHover"),s(e,t)}else{const s=pl().setupManagedHover(this.hoverDelegate,e,t);s&&this.customHovers.set(e,s)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const e=this._register(new JS(Q5(this.nameContainer,ce("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new JS(Le(e.element,ce("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){if(!this.descriptionNode){const e=this._register(new JS(Le(this.labelContainer,ce("span.monaco-icon-description-container"))));this.creationOptions?.supportDescriptionHighlights?this.descriptionNode=this._register(new bb(Le(e.element,ce("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new JS(Le(e.element,ce("span.label-description"))))}return this.descriptionNode}}class W8e{constructor(e){this.container=e}static{ky(this,"Label")}label=void 0;singleLabel=void 0;options;setLabel(e,t){if(!(this.label===e&&lo(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=Le(this.container,ce("a.label-name",{id:t?.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const s=e[n],o=t?.domId&&`${t?.domId}_${n}`;Le(this.container,ce("a.label-name",{id:o,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},s)),n<e.length-1&&Le(this.container,ce("span.label-separator",void 0,t?.separator||"/"))}}}}function gce(i,e,t){if(!t)return;let n=0;return i.map(s=>{const o={start:n,end:n+s.length},r=t.map(a=>Mo.intersect(o,a)).filter(a=>!Mo.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=o.end+e.length,r})}ky(gce,"splitMatches");class H8e extends ${constructor(e,t){super(),this.container=e,this.supportIcons=t}static{ky(this,"LabelWithHighlights")}label=void 0;singleLabel=void 0;options;setLabel(e,t){if(!(this.label===e&&lo(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new bb(Le(this.container,ce("a.label-name",{id:t?.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,t?.matches,void 0,t?.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=t?.separator||"/",s=gce(e,n,t?.matches);for(let o=0;o<e.length;o++){const r=e[o],a=s?s[o]:void 0,l=t?.domId&&`${t?.domId}_${o}`,c=ce("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":o,role:"treeitem"});this._register(new bb(Le(this.container,c),{supportIcons:this.supportIcons})).set(r,a,void 0,t?.labelEscapeNewLines),o<e.length-1&&Le(c,ce("span.label-separator",void 0,n))}}}}const A9=De("IFileDecorationsService");var U8e=Object.defineProperty,GD=(i,e)=>U8e(i,"name",{value:e,configurable:!0});const fce=De("notebookDocumentService"),CW=["W","X","Y","Z","a","b","c","d","e","f"],z8e=new RegExp(`^[${CW.join("")}]+`),pce=7;function mce(i){if(i.scheme!==Ve.vscodeNotebookCell)return;const e=i.fragment.indexOf("s");if(e<0)return;const t=parseInt(i.fragment.substring(0,e).replace(z8e,""),pce),n=SH(i.fragment.substring(e+1)).toString();if(!isNaN(t))return{handle:t,notebook:i.with({scheme:n,fragment:null})}}GD(mce,"parse");function $8e(i,e){const t=e.toString(pce),s=`${t.length<CW.length?CW[t.length-1]:"z"}${t}s${EH(mt.fromString(i.scheme),!0,!0)}`;return i.with({scheme:Ve.vscodeNotebookCell,fragment:s})}GD($8e,"generate");function G8e(i){if(i.scheme!==Ve.vscodeNotebookMetadata)return;const e=SH(i.fragment).toString();return i.with({scheme:e,fragment:null})}GD(G8e,"parseMetadataUri");function K8e(i){const e=`${EH(mt.fromString(i.scheme),!0,!0)}`;return i.with({scheme:Ve.vscodeNotebookMetadata,fragment:e})}GD(K8e,"generateMetadataUri");class j8e{static{GD(this,"NotebookDocumentWorkbenchService")}_documents=new ro;getNotebook(e){if(e.scheme===Ve.vscodeNotebookCell){const t=mce(e);if(t){const n=this._documents.get(t.notebook);if(n)return n}}return this._documents.get(e)}addNotebookDocument(e){this._documents.set(e.uri,e)}removeNotebookDocument(e){this._documents.delete(e.uri)}}Rr(fce,j8e,Pr.Delayed);var _ce=Object.defineProperty,q8e=Object.getOwnPropertyDescriptor,sg=(i,e)=>_ce(i,"name",{value:e,configurable:!0}),x9=(i,e,t,n)=>{for(var s=n>1?void 0:n?q8e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&_ce(e,t,s),s},ns=(i,e)=>(t,n)=>e(t,n,i);function gd(i){if(!(!i||!i.resource))return ne.isUri(i.resource)?i.resource:i.resource.primary}sg(gd,"toResource");const QR={onDidChangeVisibility:H.None};let Ny=class extends ${constructor(i,e,t,n,s,o,r,a,l,c){super(),this.instantiationService=e,this.configurationService=t,this.modelService=n,this.workspaceService=s,this.languageService=o,this.decorationsService=r,this.themeService=a,this.labelService=l,this.textFileService=c,this.registerListeners(i)}static{sg(this,"ResourceLabels")}_onDidChangeDecorations=this._register(new x);onDidChangeDecorations=this._onDidChangeDecorations.event;widgets=[];labels=[];registerListeners(i){this._register(i.onDidChangeVisibility(e=>{this.widgets.forEach(t=>t.notifyVisibilityChanged(e))})),this._register(this.languageService.onDidChange(()=>this.widgets.forEach(e=>e.notifyExtensionsRegistered()))),this._register(this.modelService.onModelLanguageChanged(e=>{e.model.uri&&this.widgets.forEach(t=>t.notifyModelLanguageChanged(e.model))})),this._register(this.modelService.onModelAdded(e=>{e.uri&&this.widgets.forEach(t=>t.notifyModelAdded(e))})),this._register(this.workspaceService.onDidChangeWorkspaceFolders(()=>{this.widgets.forEach(e=>e.notifyWorkspaceFoldersChange())})),this._register(this.decorationsService.onDidChangeDecorations(e=>{let t=!1;this.widgets.forEach(n=>{n.notifyFileDecorationsChanges(e)&&(t=!0)}),t&&this._onDidChangeDecorations.fire()})),this._register(this.themeService.onDidColorThemeChange(()=>this.widgets.forEach(e=>e.notifyThemeChange()))),this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(w1e)&&this.widgets.forEach(t=>t.notifyFileAssociationsChange())})),this._register(this.labelService.onDidChangeFormatters(e=>{this.widgets.forEach(t=>t.notifyFormattersChange(e.scheme))})),this._register(this.textFileService.untitled.onDidChangeLabel(e=>{this.widgets.forEach(t=>t.notifyUntitledLabelChange(e.resource))}))}get(i){return this.labels[i]}create(i,e){const t=this.instantiationService.createInstance(SW,i,e),n={element:t.element,onDidRender:t.onDidRender,setLabel:sg((s,o,r)=>t.setLabel(s,o,r),"setLabel"),setResource:sg((s,o)=>t.setResource(s,o),"setResource"),setFile:sg((s,o)=>t.setFile(s,o),"setFile"),clear:sg(()=>t.clear(),"clear"),dispose:sg(()=>this.disposeWidget(t),"dispose")};return this.labels.push(n),this.widgets.push(t),n}disposeWidget(i){const e=this.widgets.indexOf(i);e>-1&&(this.widgets.splice(e,1),this.labels.splice(e,1)),ii(i)}clear(){this.widgets=ii(this.widgets),this.labels=[]}dispose(){super.dispose(),this.clear()}};Ny=x9([ns(1,He),ns(2,Pe),ns(3,Zc),ns(4,po),ns(5,Ra),ns(6,A9),ns(7,$t),ns(8,bu),ns(9,cD)],Ny);let yW=class extends Ny{static{sg(this,"ResourceLabel")}label;get element(){return this.label}constructor(i,e,t,n,s,o,r,a,l,c,d){super(QR,t,n,s,o,r,a,l,c,d),this.label=this._register(this.create(i,e))}};yW=x9([ns(2,He),ns(3,Pe),ns(4,Zc),ns(5,po),ns(6,Ra),ns(7,A9),ns(8,$t),ns(9,bu),ns(10,cD)],yW);let SW=class extends V8e{constructor(i,e,t,n,s,o,r,a,l){super(i,e),this.languageService=t,this.modelService=n,this.decorationsService=s,this.labelService=o,this.textFileService=r,this.contextService=a,this.notebookDocumentService=l}static{sg(this,"ResourceLabelWidget")}_onDidRender=this._register(new x);onDidRender=this._onDidRender.event;label=void 0;decoration=this._register(new Yi);options=void 0;computedIconClasses=void 0;computedLanguageId=void 0;computedPathLabel=void 0;computedWorkspaceFolderLabel=void 0;needsRedraw=void 0;isHidden=!1;notifyVisibilityChanged(i){i===this.isHidden&&(this.isHidden=!i,i&&this.needsRedraw&&(this.render({updateIcon:this.needsRedraw===2,updateDecoration:this.needsRedraw===2}),this.needsRedraw=void 0))}notifyModelLanguageChanged(i){this.handleModelEvent(i)}notifyModelAdded(i){this.handleModelEvent(i)}handleModelEvent(i){const e=gd(this.label);e&&Ta(i.uri,e)&&this.computedLanguageId!==i.getLanguageId()&&(this.computedLanguageId=i.getLanguageId(),this.render({updateIcon:!0,updateDecoration:!1}))}notifyFileDecorationsChanges(i){if(!this.options)return!1;const e=gd(this.label);return e&&this.options.fileDecorations&&i.affectsResource(e)?this.render({updateIcon:!1,updateDecoration:!0}):!1}notifyExtensionsRegistered(){this.render({updateIcon:!0,updateDecoration:!1})}notifyThemeChange(){this.render({updateIcon:!1,updateDecoration:!1})}notifyFileAssociationsChange(){this.render({updateIcon:!0,updateDecoration:!1})}notifyFormattersChange(i){gd(this.label)?.scheme===i&&this.render({updateIcon:!1,updateDecoration:!1})}notifyUntitledLabelChange(i){Ta(i,gd(this.label))&&this.render({updateIcon:!1,updateDecoration:!1})}notifyWorkspaceFoldersChange(){if(typeof this.computedWorkspaceFolderLabel=="string"){const i=gd(this.label);ne.isUri(i)&&this.label?.name===this.computedWorkspaceFolderLabel&&this.setFile(i,this.options)}}setFile(i,e){const t=e?.hideLabel;let n;if(!t){if(e?.fileKind===Do.ROOT_FOLDER){const o=this.contextService.getWorkspaceFolder(i);o&&(n=o.name,this.computedWorkspaceFolderLabel=n)}n||(n=DP(b5(i)))}let s;if(!e?.hidePath){const o=this.labelService.getUriLabel(zy(i),{relative:!0});o&&o!=="."&&(s=o)}this.setResource({resource:i,name:n,description:s,range:e?.range},e)}setResource(i,e=Object.create(null)){const t=gd(i),n=i?.resource&&!ne.isUri(i.resource);if(!e.forceLabel&&!n&&t?.scheme===Ve.untitled){const l=this.textFileService.untitled.get(t);if(l&&!l.hasAssociatedFilePath){if(typeof i.name=="string"&&(i.name=l.name),typeof i.description=="string"){const d=l.resource.path;i.name!==d?i.description=d:i.description=void 0}const c=l.resource.path;l.name!==c?e.title=`${l.name}  ${c}`:e.title=c}}if(!e.forceLabel&&!n&&t?.scheme===Ve.vscodeNotebookCell){const l=this.notebookDocumentService.getNotebook(t),c=l?.getCellIndex(t);l&&c!==void 0&&typeof i.name=="string"&&(e.title=g("notebookCellLabel","{0}  Cell {1}",i.name,`${c+1}`)),typeof i.name=="string"&&l&&c!==void 0&&typeof i.name=="string"&&(i.name=g("notebookCellLabel","{0}  Cell {1}",i.name,`${c+1}`))}const s=this.hasResourceChanged(i),o=s||this.hasPathLabelChanged(i),r=this.hasFileKindChanged(e),a=this.hasIconChanged(e);this.label=i,this.options=e,s&&(this.computedLanguageId=void 0),o&&(this.computedPathLabel=void 0),this.render({updateIcon:s||r||a,updateDecoration:s||r})}hasFileKindChanged(i){const e=i?.fileKind,t=this.options?.fileKind;return e!==t}hasResourceChanged(i){const e=gd(i),t=gd(this.label);return e&&t?e.toString()!==t.toString():!(!e&&!t)}hasPathLabelChanged(i){const e=gd(i);return!!e&&this.computedPathLabel!==this.labelService.getUriLabel(e)}hasIconChanged(i){return this.options?.icon!==i?.icon}clear(){this.label=void 0,this.options=void 0,this.computedLanguageId=void 0,this.computedIconClasses=void 0,this.computedPathLabel=void 0,this.setLabel("")}render(i){if(this.isHidden)return this.needsRedraw!==2&&(this.needsRedraw=i.updateIcon||i.updateDecoration?2:1),!1;if(i.updateIcon&&(this.computedIconClasses=void 0),!this.label)return!1;const e={title:"",italic:this.options?.italic,strikethrough:this.options?.strikethrough,matches:this.options?.matches,descriptionMatches:this.options?.descriptionMatches,extraClasses:[],separator:this.options?.separator,domId:this.options?.domId,disabledCommand:this.options?.disabledCommand,labelEscapeNewLines:this.options?.labelEscapeNewLines,descriptionTitle:this.options?.descriptionTitle},t=gd(this.label);if(this.options?.title!==void 0&&(e.title=this.options.title),t&&t.scheme!==Ve.data&&(!this.options?.title||typeof this.options.title!="string"&&!this.options.title.markdownNotSupportedFallback)&&(this.computedPathLabel||(this.computedPathLabel=this.labelService.getUriLabel(t)),!e.title||typeof e.title=="string"?e.title=this.computedPathLabel:e.title.markdownNotSupportedFallback||(e.title.markdownNotSupportedFallback=this.computedPathLabel)),this.options&&!this.options.hideIcon&&(this.computedIconClasses||(this.computedIconClasses=TC(this.modelService,this.languageService,t,this.options.fileKind,this.options.icon)),ne.isUri(this.options.icon)&&(e.iconPath=this.options.icon),e.extraClasses=this.computedIconClasses.slice(0)),this.options?.extraClasses&&e.extraClasses.push(...this.options.extraClasses),this.options?.fileDecorations&&t){i.updateDecoration&&(this.decoration.value=this.decorationsService.getDecoration(t,this.options.fileKind!==Do.FILE));const n=this.decoration.value;if(n){if(n.tooltip){if(typeof e.title=="string")e.title=`${e.title}  ${n.tooltip}`;else if(typeof e.title?.markdown=="string"){const s=`${e.title.markdown}  ${n.tooltip}`;e.title={markdown:s,markdownNotSupportedFallback:s}}}n.strikethrough&&(e.strikethrough=!0),this.options.fileDecorations.colors&&e.extraClasses.push(n.labelClassName),this.options.fileDecorations.badges&&(e.extraClasses.push(n.badgeClassName),e.extraClasses.push(n.iconClassName))}}return this.label.range&&(e.suffix=this.label.range.startLineNumber!==this.label.range.endLineNumber?`:${this.label.range.startLineNumber}-${this.label.range.endLineNumber}`:`:${this.label.range.startLineNumber}`),this.setLabel(this.label.name??"",this.label.description,e),this._onDidRender.fire(),!0}dispose(){super.dispose(),this.label=void 0,this.options=void 0,this.computedLanguageId=void 0,this.computedIconClasses=void 0,this.computedPathLabel=void 0,this.computedWorkspaceFolderLabel=void 0}};SW=x9([ns(2,Ra),ns(3,Zc),ns(4,A9),ns(5,bu),ns(6,cD),ns(7,po),ns(8,fce)],SW);var Y8e=Object.defineProperty,EW=(i,e)=>Y8e(i,"name",{value:e,configurable:!0});const Su=De("IEditorBreadcrumbsService");class Z8e{static{EW(this,"BreadcrumbsService")}_map=new Map;register(e,t){if(this._map.has(e))throw new Error(`group (${e}) has already a widget`);return this._map.set(e,t),{dispose:EW(()=>this._map.delete(e),"dispose")}}getWidget(e){return this._map.get(e)}}Rr(Su,Z8e,Pr.Delayed);class Vo{static{EW(this,"BreadcrumbsConfig")}constructor(){}static IsEnabled=Vo._stub("breadcrumbs.enabled");static UseQuickPick=Vo._stub("breadcrumbs.useQuickPick");static FilePath=Vo._stub("breadcrumbs.filePath");static SymbolPath=Vo._stub("breadcrumbs.symbolPath");static SymbolSortOrder=Vo._stub("breadcrumbs.symbolSortOrder");static Icons=Vo._stub("breadcrumbs.icons");static TitleScrollbarSizing=Vo._stub("workbench.editor.titleScrollbarSizing");static FileExcludes=Vo._stub("files.exclude");static _stub(e){return{bindTo(t){const n=new x,s=t.onDidChangeConfiguration(o=>{o.affectsConfiguration(e)&&n.fire(void 0)});return new class{name=e;onDidChange=n.event;getValue(o){return o?t.getValue(e,o):t.getValue(e)}updateValue(o,r){return r?t.updateValue(e,o,r):t.updateValue(e,o)}dispose(){s.dispose(),n.dispose()}}}}}}Xt.as(uf.Configuration).registerConfiguration({id:"breadcrumbs",title:g("title","Breadcrumb Navigation"),order:101,type:"object",properties:{"breadcrumbs.enabled":{description:g("enabled","Enable/disable navigation breadcrumbs."),type:"boolean",default:!0},"breadcrumbs.filePath":{description:g("filepath","Controls whether and how file paths are shown in the breadcrumbs view."),type:"string",default:"on",enum:["on","off","last"],enumDescriptions:[g("filepath.on","Show the file path in the breadcrumbs view."),g("filepath.off","Do not show the file path in the breadcrumbs view."),g("filepath.last","Only show the last element of the file path in the breadcrumbs view.")]},"breadcrumbs.symbolPath":{description:g("symbolpath","Controls whether and how symbols are shown in the breadcrumbs view."),type:"string",default:"on",enum:["on","off","last"],enumDescriptions:[g("symbolpath.on","Show all symbols in the breadcrumbs view."),g("symbolpath.off","Do not show symbols in the breadcrumbs view."),g("symbolpath.last","Only show the current symbol in the breadcrumbs view.")]},"breadcrumbs.symbolSortOrder":{description:g("symbolSortOrder","Controls how symbols are sorted in the breadcrumbs outline view."),type:"string",default:"position",scope:vt.LANGUAGE_OVERRIDABLE,enum:["position","name","type"],enumDescriptions:[g("symbolSortOrder.position","Show symbol outline in file position order."),g("symbolSortOrder.name","Show symbol outline in alphabetical order."),g("symbolSortOrder.type","Show symbol outline in symbol type order.")]},"breadcrumbs.icons":{description:g("icons","Render breadcrumb items with icons."),type:"boolean",default:!0},"breadcrumbs.showFiles":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.file","When enabled breadcrumbs show `file`-symbols.")},"breadcrumbs.showModules":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.module","When enabled breadcrumbs show `module`-symbols.")},"breadcrumbs.showNamespaces":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.namespace","When enabled breadcrumbs show `namespace`-symbols.")},"breadcrumbs.showPackages":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.package","When enabled breadcrumbs show `package`-symbols.")},"breadcrumbs.showClasses":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.class","When enabled breadcrumbs show `class`-symbols.")},"breadcrumbs.showMethods":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.method","When enabled breadcrumbs show `method`-symbols.")},"breadcrumbs.showProperties":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.property","When enabled breadcrumbs show `property`-symbols.")},"breadcrumbs.showFields":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.field","When enabled breadcrumbs show `field`-symbols.")},"breadcrumbs.showConstructors":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.constructor","When enabled breadcrumbs show `constructor`-symbols.")},"breadcrumbs.showEnums":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.enum","When enabled breadcrumbs show `enum`-symbols.")},"breadcrumbs.showInterfaces":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.interface","When enabled breadcrumbs show `interface`-symbols.")},"breadcrumbs.showFunctions":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.function","When enabled breadcrumbs show `function`-symbols.")},"breadcrumbs.showVariables":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.variable","When enabled breadcrumbs show `variable`-symbols.")},"breadcrumbs.showConstants":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.constant","When enabled breadcrumbs show `constant`-symbols.")},"breadcrumbs.showStrings":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.string","When enabled breadcrumbs show `string`-symbols.")},"breadcrumbs.showNumbers":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.number","When enabled breadcrumbs show `number`-symbols.")},"breadcrumbs.showBooleans":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.boolean","When enabled breadcrumbs show `boolean`-symbols.")},"breadcrumbs.showArrays":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.array","When enabled breadcrumbs show `array`-symbols.")},"breadcrumbs.showObjects":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.object","When enabled breadcrumbs show `object`-symbols.")},"breadcrumbs.showKeys":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.key","When enabled breadcrumbs show `key`-symbols.")},"breadcrumbs.showNull":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.null","When enabled breadcrumbs show `null`-symbols.")},"breadcrumbs.showEnumMembers":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.enumMember","When enabled breadcrumbs show `enumMember`-symbols.")},"breadcrumbs.showStructs":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.struct","When enabled breadcrumbs show `struct`-symbols.")},"breadcrumbs.showEvents":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.event","When enabled breadcrumbs show `event`-symbols.")},"breadcrumbs.showOperators":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.operator","When enabled breadcrumbs show `operator`-symbols.")},"breadcrumbs.showTypeParameters":{type:"boolean",default:!0,scope:vt.LANGUAGE_OVERRIDABLE,markdownDescription:g("filteredTypes.typeParameter","When enabled breadcrumbs show `typeParameter`-symbols.")}}});const X8e=De("IOutlineService");var bce=(i=>(i[i.OutlinePane=1]="OutlinePane",i[i.Breadcrumbs=2]="Breadcrumbs",i[i.QuickPick=4]="QuickPick",i))(bce||{}),vce=Object.defineProperty,Q8e=Object.getOwnPropertyDescriptor,k9=(i,e)=>vce(i,"name",{value:e,configurable:!0}),J8e=(i,e,t,n)=>{for(var s=n>1?void 0:n?Q8e(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&vce(e,t,s),s},DM=(i,e)=>(t,n)=>e(t,n,i);class dN{constructor(e,t){this.uri=e,this.kind=t}static{k9(this,"FileElement")}}class LW{constructor(e,t){this.element=e,this.outline=t}static{k9(this,"OutlineElement2")}}let DW=class{constructor(i,e,t,n,s){this.resource=i,this._workspaceService=n,this._outlineService=s,this._cfgFilePath=Vo.FilePath.bindTo(t),this._cfgSymbolPath=Vo.SymbolPath.bindTo(t),this._disposables.add(this._cfgFilePath.onDidChange(o=>this._onDidUpdate.fire(this))),this._disposables.add(this._cfgSymbolPath.onDidChange(o=>this._onDidUpdate.fire(this))),this._workspaceService.onDidChangeWorkspaceFolders(this._onDidChangeWorkspaceFolders,this,this._disposables),this._fileInfo=this._initFilePathInfo(i),e&&(this._bindToEditor(e),this._disposables.add(s.onDidChange(()=>this._bindToEditor(e))),this._disposables.add(e.onDidChangeControl(()=>this._bindToEditor(e)))),this._onDidUpdate.fire(this)}static{k9(this,"BreadcrumbsModel")}_disposables=new te;_fileInfo;_cfgFilePath;_cfgSymbolPath;_currentOutline=new Yi;_outlineDisposables=new te;_onDidUpdate=new x;onDidUpdate=this._onDidUpdate.event;dispose(){this._disposables.dispose(),this._cfgFilePath.dispose(),this._cfgSymbolPath.dispose(),this._currentOutline.dispose(),this._outlineDisposables.dispose(),this._onDidUpdate.dispose()}isRelative(){return!!this._fileInfo.folder}getElements(){let i=[];if(this._cfgFilePath.getValue()==="on"?i=i.concat(this._fileInfo.path):this._cfgFilePath.getValue()==="last"&&this._fileInfo.path.length>0&&(i=i.concat(this._fileInfo.path.slice(-1))),this._cfgSymbolPath.getValue()==="off"||!this._currentOutline.value)return i;const e=this._currentOutline.value.config.breadcrumbsDataSource.getBreadcrumbElements();for(let t=this._cfgSymbolPath.getValue()==="last"&&e.length>0?e.length-1:0;t<e.length;t++)i.push(new LW(e[t],this._currentOutline.value));return e.length===0&&!this._currentOutline.value.isEmpty&&i.push(new LW(this._currentOutline.value,this._currentOutline.value)),i}_initFilePathInfo(i){if(YK(i,Ve.untitled,Ve.data))return{folder:void 0,path:[]};const e={folder:this._workspaceService.getWorkspaceFolder(i)??void 0,path:[]};let t=i;for(;t&&t.path!=="/"&&!(e.folder&&Ta(e.folder.uri,t));){e.path.unshift(new dN(t,e.path.length===0?Do.FILE:Do.FOLDER));const n=t.path.length;if(t=zy(t),t.path.length===n)break}return e.folder&&this._workspaceService.getWorkbenchState()===Mc.WORKSPACE&&e.path.unshift(new dN(e.folder.uri,Do.ROOT_FOLDER)),e}_onDidChangeWorkspaceFolders(){this._fileInfo=this._initFilePathInfo(this.resource),this._onDidUpdate.fire(this)}_bindToEditor(i){const e=new xr;this._currentOutline.clear(),this._outlineDisposables.clear(),this._outlineDisposables.add(ye(()=>e.dispose(!0))),this._outlineService.createOutline(i,bce.Breadcrumbs,e.token).then(t=>{e.token.isCancellationRequested&&(t?.dispose(),t=void 0),this._currentOutline.value=t,this._onDidUpdate.fire(this),t&&this._outlineDisposables.add(t.onDidChange(()=>this._onDidUpdate.fire(this)))}).catch(t=>{this._onDidUpdate.fire(this),Kt(t)})}};DW=J8e([DM(2,Pe),DM(3,po),DM(4,X8e)],DW);var wce=Object.defineProperty,eUe=Object.getOwnPropertyDescriptor,hl=(i,e)=>wce(i,"name",{value:e,configurable:!0}),DS=(i,e,t,n)=>{for(var s=n>1?void 0:n?eUe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&wce(e,t,s),s},Vl=(i,e)=>(t,n)=>e(t,n,i);let hN=class{constructor(i,e,t,n,s){this.resource=e,this._instantiationService=t,this._themeService=n,this._configurationService=s,this._domNode=document.createElement("div"),this._domNode.className="monaco-breadcrumbs-picker show-file-icons",i.appendChild(this._domNode)}static{hl(this,"BreadcrumbsPicker")}_disposables=new te;_domNode;_arrow;_treeContainer;_tree;_fakeEvent=new UIEvent("fakeEvent");_layoutInfo;_onWillPickElement=new x;onWillPickElement=this._onWillPickElement.event;_previewDispoables=new Yi;dispose(){this._disposables.dispose(),this._previewDispoables.dispose(),this._onWillPickElement.dispose(),this._domNode.remove(),setTimeout(()=>this._tree.dispose(),0)}async show(i,e,t,n,s){const r=this._themeService.getColorTheme().getColor(Cj);this._arrow=document.createElement("div"),this._arrow.className="arrow",this._arrow.style.borderColor=`transparent transparent ${r?r.toString():""}`,this._domNode.appendChild(this._arrow),this._treeContainer=document.createElement("div"),this._treeContainer.style.background=r?r.toString():"",this._treeContainer.style.paddingTop="2px",this._treeContainer.style.borderRadius="3px",this._treeContainer.style.boxShadow=`0 0 8px 2px ${this._themeService.getColorTheme().getColor(lv)}`,this._treeContainer.style.border=`1px solid ${this._themeService.getColorTheme().getColor(X0)}`,this._domNode.appendChild(this._treeContainer),this._layoutInfo={maxHeight:e,width:t,arrowSize:n,arrowOffset:s,inputHeight:0},this._tree=this._createTree(this._treeContainer,i),this._disposables.add(this._tree.onDidOpen(async a=>{const{element:l,editorOptions:c,sideBySide:d}=a;await this._revealElement(l,{...c,preserveFocus:!1},d)})),this._disposables.add(this._tree.onDidChangeFocus(a=>{this._previewDispoables.value=this._previewElement(a.elements[0])})),this._disposables.add(this._tree.onDidChangeContentHeight(()=>{this._layout()})),this._domNode.focus();try{await this._setInput(i),this._layout()}catch(a){Kt(a)}}_layout(){const i=2*this._layoutInfo.arrowSize,e=Math.min(this._layoutInfo.maxHeight-i,this._tree.contentHeight),t=e+i;this._domNode.style.height=`${t}px`,this._domNode.style.width=`${this._layoutInfo.width}px`,this._arrow.style.top=`-${2*this._layoutInfo.arrowSize}px`,this._arrow.style.borderWidth=`${this._layoutInfo.arrowSize}px`,this._arrow.style.marginLeft=`${this._layoutInfo.arrowOffset}px`,this._treeContainer.style.height=`${e}px`,this._treeContainer.style.width=`${this._layoutInfo.width}px`,this._tree.layout(e,this._layoutInfo.width)}restoreViewState(){}};hN=DS([Vl(2,He),Vl(3,$t),Vl(4,Pe)],hN);class tUe{static{hl(this,"FileVirtualDelegate")}getHeight(e){return 22}getTemplateId(e){return"FileStat"}}class iUe{static{hl(this,"FileIdentityProvider")}getId(e){return ne.isUri(e)?e.toString():lx(e)?e.id:au(e)?e.uri.toString():e.resource.toString()}}let IW=class{constructor(i){this._fileService=i}static{hl(this,"FileDataSource")}hasChildren(i){return ne.isUri(i)||lx(i)||au(i)||i.isDirectory}async getChildren(i){if(lx(i))return i.folders;let e;return au(i)?e=i.uri:ne.isUri(i)?e=i:e=i.resource,(await this._fileService.resolve(e)).children??[]}};IW=DS([Vl(0,la)],IW);let TW=class{constructor(i,e){this._labels=i,this._configService=e}static{hl(this,"FileRenderer")}templateId="FileStat";renderTemplate(i){return this._labels.create(i,{supportHighlights:!0})}renderElement(i,e,t){const n=this._configService.getValue("explorer.decorations"),{element:s}=i;let o,r;au(s)?(o=s.uri,r=Do.ROOT_FOLDER):(o=s.resource,r=s.isDirectory?Do.FOLDER:Do.FILE),t.setFile(o,{fileKind:r,hidePath:!0,fileDecorations:n,matches:cP(i.filterData),extraClasses:["picker-item"]})}disposeTemplate(i){i.dispose()}};TW=DS([Vl(1,Pe)],TW);class nUe{static{hl(this,"FileNavigationLabelProvider")}getKeyboardNavigationLabel(e){return e.name}}class sUe{static{hl(this,"FileAccessibilityProvider")}getWidgetAriaLabel(){return g("breadcrumbs","Breadcrumbs")}getAriaLabel(e){return e.name}}let AW=class{constructor(i,e){this._workspaceService=i;const t=Vo.FileExcludes.bindTo(e),n=hl(()=>{i.getWorkspace().folders.forEach(s=>{const o=t.getValue({resource:s.uri});if(!o)return;const r={};for(const a in o){if(typeof o[a]!="boolean")continue;const l=a.indexOf("**/")!==0?kt.join(s.uri.path,a):a;r[l]=o[a]}this._cachedExpressions.set(s.uri.toString(),gE(r))})},"update");n(),this._disposables.add(t),this._disposables.add(t.onDidChange(n)),this._disposables.add(i.onDidChangeWorkspaceFolders(n))}static{hl(this,"FileFilter")}_cachedExpressions=new Map;_disposables=new te;dispose(){this._disposables.dispose()}filter(i,e){if(au(i))return!0;const t=this._workspaceService.getWorkspaceFolder(i.resource);return!t||!this._cachedExpressions.has(t.uri.toString())?!0:!this._cachedExpressions.get(t.uri.toString())(PG(t.uri.path,i.resource.path),lh(i.resource))}};AW=DS([Vl(0,po),Vl(1,Pe)],AW);class oUe{static{hl(this,"FileSorter")}compare(e,t){return au(e)&&au(t)?e.index-t.index:e.isDirectory===t.isDirectory?cR(e.name,t.name):e.isDirectory?-1:1}}let xW=class extends hN{constructor(i,e,t,n,s,o,r){super(i,e,t,n,s),this._workspaceService=o,this._editorService=r}static{hl(this,"BreadcrumbsFilePicker")}_createTree(i){this._treeContainer.classList.add("file-icon-themable-tree"),this._treeContainer.classList.add("show-file-icons");const e=hl(n=>{this._treeContainer.classList.toggle("align-icons-and-twisties",n.hasFileIcons&&!n.hasFolderIcons),this._treeContainer.classList.toggle("hide-arrows",n.hidesExplorerArrows===!0)},"onFileIconThemeChange");this._disposables.add(this._themeService.onDidFileIconThemeChange(e)),e(this._themeService.getFileIconTheme());const t=this._instantiationService.createInstance(Ny,QR);return this._disposables.add(t),this._instantiationService.createInstance(Zx,"BreadcrumbsFilePicker",i,new tUe,[this._instantiationService.createInstance(TW,t)],this._instantiationService.createInstance(IW),{multipleSelectionSupport:!1,sorter:new oUe,filter:this._instantiationService.createInstance(AW),identityProvider:new iUe,keyboardNavigationLabelProvider:new nUe,accessibilityProvider:this._instantiationService.createInstance(sUe),showNotFoundMessage:!1,overrideStyles:{listBackground:Cj}})}async _setInput(i){const{uri:e,kind:t}=i;let n;t===Do.ROOT_FOLDER?n=this._workspaceService.getWorkspace():n=zy(e);const s=this._tree;await s.setInput(n);let o;for(const{element:r}of s.getNode().children)if(au(r)&&Ta(r.uri,e)){o=r;break}else if(Ta(r.resource,e)){o=r;break}o&&(s.reveal(o,.5),s.setFocus([o],this._fakeEvent)),s.domFocus()}_previewElement(i){return $.None}async _revealElement(i,e,t){return!au(i)&&i.isFile?(this._onWillPickElement.fire(),await this._editorService.openEditor({resource:i.resource,options:e},t?Hb:void 0),!0):!1}};xW=DS([Vl(2,He),Vl(3,$t),Vl(4,Pe),Vl(5,po),Vl(6,nt)],xW);let kW=class{constructor(i,e,t){this.comparator=i,this._order=t.getValue(e,"breadcrumbs.symbolSortOrder")}static{hl(this,"OutlineTreeSorter")}_order;compare(i,e){return this._order==="name"?this.comparator.compareByName(i,e):this._order==="type"?this.comparator.compareByType(i,e):this.comparator.compareByPosition(i,e)}};kW=DS([Vl(2,Xg)],kW);class rUe extends hN{static{hl(this,"BreadcrumbsOutlinePicker")}_createTree(e,t){const{config:n}=t.outline;return this._instantiationService.createInstance(Yx,"BreadcrumbsOutlinePicker",e,n.delegate,n.renderers,n.treeDataSource,{...n.options,sorter:this._instantiationService.createInstance(kW,n.comparator,void 0),collapseByDefault:!0,expandOnlyOnTwistieClick:!0,multipleSelectionSupport:!1,showNotFoundMessage:!1})}_setInput(e){const t=e.outline.captureViewState();this.restoreViewState=()=>{t.dispose()};const n=this._tree;return n.setInput(e.outline),e.element!==e.outline&&(n.reveal(e.element,.5),n.setFocus([e.element],this._fakeEvent)),n.domFocus(),Promise.resolve()}_previewElement(e){return this._tree.getInput().preview(e)}async _revealElement(e,t,n){return this._onWillPickElement.fire(),await this._tree.getInput().reveal(e,t,n,!1),!0}}var Cce=Object.defineProperty,aUe=Object.getOwnPropertyDescriptor,Sa=(i,e)=>Cce(i,"name",{value:e,configurable:!0}),yce=(i,e,t,n)=>{for(var s=n>1?void 0:n?aUe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Cce(e,t,s),s},Ic=(i,e)=>(t,n)=>e(t,n,i);class uN extends H3{constructor(e,t,n){super(),this.model=e,this.element=t,this.options=n}static{Sa(this,"OutlineItem")}_disposables=new te;dispose(){this._disposables.dispose()}equals(e){return e instanceof uN?this.element.element===e.element.element&&this.options.showFileIcons===e.options.showFileIcons&&this.options.showSymbolIcons===e.options.showSymbolIcons:!1}render(e){const{element:t,outline:n}=this.element;if(t===n){const a=ce("span",void 0,"");e.appendChild(a);return}const s=n.config.delegate.getTemplateId(t),o=n.config.renderers.find(a=>a.templateId===s);if(!o){e.innerText="<<NO RENDERER>>";return}const r=o.renderTemplate(e);o.renderElement({element:t,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:0,collapsible:!1,collapsed:!1,visible:!0,filterData:void 0},0,r,void 0),this._disposables.add(ye(()=>{o.disposeTemplate(r)}))}}class gN extends H3{constructor(e,t,n,s,o){super(),this.model=e,this.element=t,this.options=n,this._labels=s,this._hoverDelegate=o}static{Sa(this,"FileItem")}_disposables=new te;dispose(){this._disposables.dispose()}equals(e){return e instanceof gN?bi.isEqual(this.element.uri,e.element.uri)&&this.options.showFileIcons===e.options.showFileIcons&&this.options.showSymbolIcons===e.options.showSymbolIcons:!1}render(e){const t=this._labels.create(e,{hoverDelegate:this._hoverDelegate});t.setFile(this.element.uri,{hidePath:!0,hideIcon:this.element.kind===Do.FOLDER||!this.options.showFileIcons,fileKind:this.element.kind,fileDecorations:{colors:this.options.showDecorationColors,badges:!1}}),e.classList.add(Do[this.element.kind].toLowerCase()),this._disposables.add(t)}}const lUe=Vt("breadcrumb-separator",ee.chevronRight,g("separatorIcon","Icon for the separator in the breadcrumbs."));let ki=class{constructor(i,e,t,n,s,o,r,a,l,c,d,h){this._options=e,this._editorGroup=t,this._contextKeyService=n,this._contextViewService=s,this._instantiationService=o,this._quickInputService=r,this._fileService=a,this._editorService=l,this._labelService=c,this.domNode=document.createElement("div"),this.domNode.classList.add("breadcrumbs-control"),Le(i,this.domNode),this._cfUseQuickPick=Vo.UseQuickPick.bindTo(d),this._cfShowIcons=Vo.Icons.bindTo(d),this._cfTitleScrollbarSizing=Vo.TitleScrollbarSizing.bindTo(d),this._labels=this._instantiationService.createInstance(Ny,QR);const u=this._cfTitleScrollbarSizing.getValue()??"default",f=e.widgetStyles??$3;this._widget=new Ike(this.domNode,ki.SCROLLBAR_SIZES[u],lUe,f),this._widget.onDidSelectItem(this._onSelectEvent,this,this._disposables),this._widget.onDidFocusItem(this._onFocusEvent,this,this._disposables),this._widget.onDidChangeFocus(this._updateCkBreadcrumbsActive,this,this._disposables),this._ckBreadcrumbsPossible=ki.CK_BreadcrumbsPossible.bindTo(this._contextKeyService),this._ckBreadcrumbsVisible=ki.CK_BreadcrumbsVisible.bindTo(this._contextKeyService),this._ckBreadcrumbsActive=ki.CK_BreadcrumbsActive.bindTo(this._contextKeyService),this._hoverDelegate=bn("mouse"),this._disposables.add(h.register(this._editorGroup.id,this._widget)),this.hide()}static{Sa(this,"BreadcrumbsControl")}static HEIGHT=22;static SCROLLBAR_SIZES={default:3,large:8};static Payload_Reveal={};static Payload_RevealAside={};static Payload_Pick={};static CK_BreadcrumbsPossible=new ie("breadcrumbsPossible",!1,g("breadcrumbsPossible","Whether the editor can show breadcrumbs"));static CK_BreadcrumbsVisible=new ie("breadcrumbsVisible",!1,g("breadcrumbsVisible","Whether breadcrumbs are currently visible"));static CK_BreadcrumbsActive=new ie("breadcrumbsActive",!1,g("breadcrumbsActive","Whether breadcrumbs have focus"));_ckBreadcrumbsPossible;_ckBreadcrumbsVisible;_ckBreadcrumbsActive;_cfUseQuickPick;_cfShowIcons;_cfTitleScrollbarSizing;domNode;_widget;_disposables=new te;_breadcrumbsDisposables=new te;_labels;_model=new Yi;_breadcrumbsPickerShowing=!1;_breadcrumbsPickerIgnoreOnceItem;_hoverDelegate;_onDidVisibilityChange=this._disposables.add(new x);get onDidVisibilityChange(){return this._onDidVisibilityChange.event}dispose(){this._disposables.dispose(),this._breadcrumbsDisposables.dispose(),this._ckBreadcrumbsPossible.reset(),this._ckBreadcrumbsVisible.reset(),this._ckBreadcrumbsActive.reset(),this._cfUseQuickPick.dispose(),this._cfShowIcons.dispose(),this._widget.dispose(),this._labels.dispose(),this.domNode.remove()}get model(){return this._model.value}layout(i){this._widget.layout(i)}isHidden(){return this.domNode.classList.contains("hidden")}hide(){const i=this.isHidden();this._breadcrumbsDisposables.clear(),this._ckBreadcrumbsVisible.set(!1),this.domNode.classList.toggle("hidden",!0),i||this._onDidVisibilityChange.fire()}show(){const i=this.isHidden();this._ckBreadcrumbsVisible.set(!0),this.domNode.classList.toggle("hidden",!1),i&&this._onDidVisibilityChange.fire()}revealLast(){this._widget.revealLast()}update(){this._breadcrumbsDisposables.clear();const i=Io.getCanonicalUri(this._editorGroup.activeEditor,{supportSideBySide:Is.PRIMARY}),e=this.isHidden();if(!i||!this._fileService.hasProvider(i))return this._ckBreadcrumbsPossible.set(!1),e?!1:(this.hide(),!0);const t=Io.getOriginalUri(this._editorGroup.activeEditor,{supportSideBySide:Is.PRIMARY});this.show(),this._ckBreadcrumbsPossible.set(!0);const n=this._instantiationService.createInstance(DW,t??i,this._editorGroup.activeEditorPane);this._model.value=n,this.domNode.classList.toggle("backslash-path",this._labelService.getSeparator(i.scheme,i.authority)==="\\");const s=Sa(()=>{this.domNode.classList.toggle("relative-path",n.isRelative());const c=this._cfShowIcons.getValue(),d={...this._options,showFileIcons:this._options.showFileIcons&&c,showSymbolIcons:this._options.showSymbolIcons&&c},h=n.getElements().map(u=>u instanceof dN?new gN(n,u,d,this._labels,this._hoverDelegate):new uN(n,u,d));h.length===0?(this._widget.setEnabled(!1),this._widget.setItems([new class extends H3{render(u){u.innerText=g("empty","no elements")}equals(u){return u===this}dispose(){}}])):(this._widget.setEnabled(!0),this._widget.setItems(h),this._widget.reveal(h[h.length-1]))},"updateBreadcrumbs"),o=n.onDidUpdate(s),r=this._cfShowIcons.onDidChange(s);s(),this._breadcrumbsDisposables.clear(),this._breadcrumbsDisposables.add(o),this._breadcrumbsDisposables.add(ye(()=>this._model.clear())),this._breadcrumbsDisposables.add(r),this._breadcrumbsDisposables.add(ye(()=>this._widget.setItems([])));const a=Sa(()=>{const c=this._cfTitleScrollbarSizing.getValue()??"default";this._widget.setHorizontalScrollbarSize(ki.SCROLLBAR_SIZES[c])},"updateScrollbarSizing");a();const l=this._cfTitleScrollbarSizing.onDidChange(a);return this._breadcrumbsDisposables.add(l),this._breadcrumbsDisposables.add({dispose:Sa(()=>{this._breadcrumbsPickerShowing&&this._contextViewService.hideContextView({source:this})},"dispose")}),e!==this.isHidden()}_onFocusEvent(i){i.item&&this._breadcrumbsPickerShowing&&(this._breadcrumbsPickerIgnoreOnceItem=void 0,this._widget.setSelection(i.item))}_onSelectEvent(i){if(!i.item)return;if(i.item===this._breadcrumbsPickerIgnoreOnceItem){this._breadcrumbsPickerIgnoreOnceItem=void 0,this._widget.setFocused(void 0),this._widget.setSelection(void 0);return}const{element:e}=i.item;this._editorGroup.focus();const t=this._getEditorGroup(i.payload);if(t!==void 0){this._widget.setFocused(void 0),this._widget.setSelection(void 0),this._revealInEditor(i,e,t);return}if(this._cfUseQuickPick.getValue()){this._widget.setFocused(void 0),this._widget.setSelection(void 0),this._quickInputService.quickAccess.show(e instanceof LW?"@":"");return}let n,s;this._contextViewService.showContextView({render:Sa(o=>{i.item instanceof gN?n=this._instantiationService.createInstance(xW,o,i.item.model.resource):i.item instanceof uN&&(n=this._instantiationService.createInstance(rUe,o,i.item.model.resource));const r=n.onWillPickElement(()=>this._contextViewService.hideContextView({source:this,didPick:!0})),a=by.getInstance(ve(this.domNode)).onDidChange(()=>this._contextViewService.hideContextView({source:this})),l=al(o),c=l.onDidBlur(()=>{this._breadcrumbsPickerIgnoreOnceItem=this._widget.isDOMFocused()?i.item:void 0,this._contextViewService.hideContextView({source:this})});return this._breadcrumbsPickerShowing=!0,this._updateCkBreadcrumbsActive(),Ia(n,r,a,l,c)},"render"),getAnchor:Sa(()=>{if(!s){const o=ve(this.domNode),r=o.innerWidth-8;let a=Math.min(o.innerHeight*.7,300);const l=Math.min(r,Math.max(240,r/4.17)),c=8;let d;const h=Xr(i.node.firstChild),u=h.top+h.height+c;u+a>=o.innerHeight&&(a=o.innerHeight-u-30);let f=h.left;if(f+l>=r&&(f=r-l),i.payload instanceof $n){const p=l-2*c;d=i.payload.posx-f,d>p&&(f=Math.min(r-l,f+d-p),d=p)}else d=h.left+h.width*.3-f;n.show(e,a,l,c,Math.max(0,d)),s={x:f,y:u}}return s},"getAnchor"),onHide:Sa(o=>{o?.didPick||n.restoreViewState(),this._breadcrumbsPickerShowing=!1,this._updateCkBreadcrumbsActive(),o?.source===this&&(this._widget.setFocused(void 0),this._widget.setSelection(void 0)),n.dispose()},"onHide")})}_updateCkBreadcrumbsActive(){const i=this._widget.isDOMFocused()||this._breadcrumbsPickerShowing;this._ckBreadcrumbsActive.set(i)}async _revealInEditor(i,e,t,n=!1){if(e instanceof dN)if(e.kind===Do.FILE)await this._editorService.openEditor({resource:e.uri,options:{pinned:n}},t);else{const s=this._widget.getItems(),o=s.indexOf(i.item);this._widget.setFocused(s[o+1]),this._widget.setSelection(s[o+1],ki.Payload_Pick)}else e.outline.reveal(e,{pinned:n},t===Hb,!1)}_getEditorGroup(i){return i===ki.Payload_RevealAside?Hb:i===ki.Payload_Reveal?fF:void 0}};ki=yce([Ic(3,Ye),Ic(4,XP),Ic(5,He),Ic(6,ca),Ic(7,la),Ic(8,nt),Ic(9,bu),Ic(10,Pe),Ic(11,Su)],ki);let fN=class{constructor(i,e,t,n,s,o){this._container=i,this._editorGroup=e,this._options=t,this._instantiationService=s;const r=this._disposables.add(Vo.IsEnabled.bindTo(n));this._disposables.add(r.onDidChange(()=>{const a=r.getValue();!a&&this._control?(this._controlDisposables.clear(),this._control=void 0,this._onDidEnablementChange.fire()):a&&!this._control&&(this._control=this.createControl(),this._control.update(),this._onDidEnablementChange.fire())})),r.getValue()&&(this._control=this.createControl()),this._disposables.add(o.onDidChangeFileSystemProviderRegistrations(a=>{this._control?.model&&this._control.model.resource.scheme!==a.scheme||this._control?.update()&&this._onDidEnablementChange.fire()}))}static{Sa(this,"BreadcrumbsControlFactory")}_disposables=new te;_controlDisposables=new te;_control;get control(){return this._control}_onDidEnablementChange=this._disposables.add(new x);get onDidEnablementChange(){return this._onDidEnablementChange.event}_onDidVisibilityChange=this._disposables.add(new x);get onDidVisibilityChange(){return this._onDidVisibilityChange.event}createControl(){const i=this._controlDisposables.add(this._instantiationService.createInstance(ki,this._container,this._options,this._editorGroup));return this._controlDisposables.add(i.onDidVisibilityChange(()=>this._onDidVisibilityChange.fire())),i}dispose(){this._disposables.dispose(),this._controlDisposables.dispose()}};fN=yce([Ic(3,Pe),Ic(4,He),Ic(5,la)],fN);Oe(class extends ge{static{Sa(this,"ToggleBreadcrumb")}constructor(){super({id:"breadcrumbs.toggle",title:{...W("cmd.toggle","Toggle Breadcrumbs"),mnemonicTitle:g({key:"miBreadcrumbs",comment:["&& denotes a mnemonic"]},"Toggle &&Breadcrumbs")},category:oe.View,toggled:{condition:Z.equals("config.breadcrumbs.enabled",!0),title:g("cmd.toggle2","Toggle Breadcrumbs"),mnemonicTitle:g({key:"miBreadcrumbs2",comment:["&& denotes a mnemonic"]},"Toggle &&Breadcrumbs")},menu:[{id:N.CommandPalette},{id:N.MenubarAppearanceMenu,group:"4_editor",order:2},{id:N.NotebookToolbar,group:"notebookLayout",order:2},{id:N.StickyScrollContext},{id:N.NotebookStickyScrollContext,group:"notebookView",order:2}]})}run(e){const t=e.get(Pe),n=Vo.IsEnabled.bindTo(t).getValue();Vo.IsEnabled.bindTo(t).updateValue(!n)}});function JR(i,e){const t=i.get(Ge),s=i.get(Su).getWidget(t.activeGroup.id);if(s){const o=Ur(s.getItems());s.setFocused(o),e&&s.setSelection(o,ki.Payload_Pick)}}Sa(JR,"focusAndSelectHandler");Oe(class extends ge{static{Sa(this,"FocusAndSelectBreadcrumbs")}constructor(){super({id:"breadcrumbs.focusAndSelect",title:W("cmd.focusAndSelect","Focus and Select Breadcrumbs"),precondition:ki.CK_BreadcrumbsVisible,keybinding:{weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|M.Shift|E.Period,when:ki.CK_BreadcrumbsPossible},f1:!0})}run(e,...t){JR(e,!0)}});Oe(class extends ge{static{Sa(this,"FocusBreadcrumbs")}constructor(){super({id:"breadcrumbs.focus",title:W("cmd.focus","Focus Breadcrumbs"),precondition:ki.CK_BreadcrumbsVisible,keybinding:{weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|M.Shift|E.Semicolon,when:ki.CK_BreadcrumbsPossible},f1:!0})}run(e,...t){JR(e,!1)}});gt.registerCommandAndKeybindingRule({id:"breadcrumbs.toggleToOn",weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|M.Shift|E.Period,when:Z.not("config.breadcrumbs.enabled"),handler:Sa(async i=>{const e=i.get(He),t=i.get(Pe),n=Vo.IsEnabled.bindTo(t);return n.getValue()||(await n.updateValue(!0),await xa(50)),e.invokeFunction(JR,!0)},"handler")});gt.registerCommandAndKeybindingRule({id:"breadcrumbs.focusNext",weight:Ce.WorkbenchContrib,primary:E.RightArrow,secondary:[M.CtrlCmd|E.RightArrow],mac:{primary:E.RightArrow,secondary:[M.Alt|E.RightArrow]},when:Z.and(ki.CK_BreadcrumbsVisible,ki.CK_BreadcrumbsActive),handler(i){const e=i.get(Ge),n=i.get(Su).getWidget(e.activeGroup.id);n&&n.focusNext()}});gt.registerCommandAndKeybindingRule({id:"breadcrumbs.focusPrevious",weight:Ce.WorkbenchContrib,primary:E.LeftArrow,secondary:[M.CtrlCmd|E.LeftArrow],mac:{primary:E.LeftArrow,secondary:[M.Alt|E.LeftArrow]},when:Z.and(ki.CK_BreadcrumbsVisible,ki.CK_BreadcrumbsActive),handler(i){const e=i.get(Ge),n=i.get(Su).getWidget(e.activeGroup.id);n&&n.focusPrev()}});gt.registerCommandAndKeybindingRule({id:"breadcrumbs.focusNextWithPicker",weight:Ce.WorkbenchContrib+1,primary:M.CtrlCmd|E.RightArrow,mac:{primary:M.Alt|E.RightArrow},when:Z.and(ki.CK_BreadcrumbsVisible,ki.CK_BreadcrumbsActive,G3),handler(i){const e=i.get(Ge),n=i.get(Su).getWidget(e.activeGroup.id);n&&n.focusNext()}});gt.registerCommandAndKeybindingRule({id:"breadcrumbs.focusPreviousWithPicker",weight:Ce.WorkbenchContrib+1,primary:M.CtrlCmd|E.LeftArrow,mac:{primary:M.Alt|E.LeftArrow},when:Z.and(ki.CK_BreadcrumbsVisible,ki.CK_BreadcrumbsActive,G3),handler(i){const e=i.get(Ge),n=i.get(Su).getWidget(e.activeGroup.id);n&&n.focusPrev()}});gt.registerCommandAndKeybindingRule({id:"breadcrumbs.selectFocused",weight:Ce.WorkbenchContrib,primary:E.Enter,secondary:[E.DownArrow],when:Z.and(ki.CK_BreadcrumbsVisible,ki.CK_BreadcrumbsActive),handler(i){const e=i.get(Ge),n=i.get(Su).getWidget(e.activeGroup.id);n&&n.setSelection(n.getFocused(),ki.Payload_Pick)}});gt.registerCommandAndKeybindingRule({id:"breadcrumbs.revealFocused",weight:Ce.WorkbenchContrib,primary:E.Space,secondary:[M.CtrlCmd|E.Enter],when:Z.and(ki.CK_BreadcrumbsVisible,ki.CK_BreadcrumbsActive),handler(i){const e=i.get(Ge),n=i.get(Su).getWidget(e.activeGroup.id);n&&n.setSelection(n.getFocused(),ki.Payload_Reveal)}});gt.registerCommandAndKeybindingRule({id:"breadcrumbs.selectEditor",weight:Ce.WorkbenchContrib+1,primary:E.Escape,when:Z.and(ki.CK_BreadcrumbsVisible,ki.CK_BreadcrumbsActive),handler(i){const e=i.get(Ge),n=i.get(Su).getWidget(e.activeGroup.id);n&&(n.setFocused(void 0),n.setSelection(void 0),e.activeGroup.activeEditorPane?.focus())}});gt.registerCommandAndKeybindingRule({id:"breadcrumbs.revealFocusedFromTreeAside",weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|E.Enter,when:Z.and(ki.CK_BreadcrumbsVisible,ki.CK_BreadcrumbsActive,G3),handler(i){const e=i.get(nt),n=i.get(xi).lastFocusedList;if(!(n instanceof Yx)&&!(n instanceof Zx))return;const s=n.getFocus()[0];if(ne.isUri(s?.resource))return e.openEditor({resource:s.resource,options:{pinned:!0}},Hb);const o=n.getInput();if(o&&typeof o.outlineKind=="string")return o.reveal(s,{pinned:!0,preserveFocus:!1},!0,!1)}});const gr=De("historyService");var od=(i=>(i[i.NONE=0]="NONE",i[i.EDITS=1]="EDITS",i[i.NAVIGATION=2]="NAVIGATION",i))(od||{}),Sce=Object.defineProperty,cUe=Object.getOwnPropertyDescriptor,me=(i,e)=>Sce(i,"name",{value:e,configurable:!0}),N9=(i,e,t,n)=>{for(var s=n>1?void 0:n?cUe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Sce(e,t,s),s},P9=(i,e)=>(t,n)=>e(t,n,i);class yn extends ge{constructor(e,t,n){super(e),this.commandId=t,this.commandArgs=n}static{me(this,"ExecuteCommandAction")}run(e){return e.get(Xi).executeCommand(this.commandId,this.commandArgs)}}class Ece extends ge{static{me(this,"AbstractSplitEditorAction")}getDirection(e){return wv(e)}async run(e,...t){const n=e.get(Ge),s=e.get(Pe),o=this.getDirection(s),r=io(t,e.get(nt),n,e.get(xi));T9(n,o,r)}}class Lce extends Ece{static{me(this,"SplitEditorAction")}static ID=Qle;constructor(){super({id:Lce.ID,title:W("splitEditor","Split Editor"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|E.Backslash},category:oe.View})}}class qGe extends Ece{static{me(this,"SplitEditorOrthogonalAction")}constructor(){super({id:"workbench.action.splitEditorOrthogonal",title:W("splitEditorOrthogonal","Split Editor Orthogonal"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|E.Backslash)},category:oe.View})}getDirection(e){return wv(e)===Bt.RIGHT?Bt.DOWN:Bt.RIGHT}}class YGe extends yn{static{me(this,"SplitEditorLeftAction")}constructor(){super({id:vW,title:W("splitEditorGroupLeft","Split Editor Left"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|E.Backslash)},category:oe.View},vW)}}class ZGe extends yn{static{me(this,"SplitEditorRightAction")}constructor(){super({id:wW,title:W("splitEditorGroupRight","Split Editor Right"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|E.Backslash)},category:oe.View},wW)}}class XGe extends yn{static{me(this,"SplitEditorUpAction")}static LABEL=g("splitEditorGroupUp","Split Editor Up");constructor(){super({id:_W,title:W("splitEditorGroupUp","Split Editor Up"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|E.Backslash)},category:oe.View},_W)}}class QGe extends yn{static{me(this,"SplitEditorDownAction")}static LABEL=g("splitEditorGroupDown","Split Editor Down");constructor(){super({id:bW,title:W("splitEditorGroupDown","Split Editor Down"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|E.Backslash)},category:oe.View},bW)}}class JGe extends ge{static{me(this,"JoinTwoGroupsAction")}constructor(){super({id:"workbench.action.joinTwoGroups",title:W("joinTwoGroups","Join Editor Group with Next Group"),f1:!0,category:oe.View})}async run(e,t){const n=e.get(Ge);let s;if(t&&typeof t.groupId=="number"?s=n.getGroup(t.groupId):s=n.activeGroup,s){const o=[Bt.RIGHT,Bt.DOWN,Bt.LEFT,Bt.UP];for(const r of o){const a=n.findGroup({direction:r},s);if(a&&s!==a){n.mergeGroup(s,a);break}}}}}class eKe extends ge{static{me(this,"JoinAllGroupsAction")}constructor(){super({id:"workbench.action.joinAllGroups",title:W("joinAllGroups","Join All Editor Groups"),f1:!0,category:oe.View})}async run(e){const t=e.get(Ge);t.mergeAllGroups(t.activeGroup)}}class tKe extends ge{static{me(this,"NavigateBetweenGroupsAction")}constructor(){super({id:"workbench.action.navigateEditorGroups",title:W("navigateEditorGroups","Navigate Between Editor Groups"),f1:!0,category:oe.View})}async run(e){const t=e.get(Ge);t.findGroup({location:Hl.NEXT},t.activeGroup,!0)?.focus()}}class iKe extends ge{static{me(this,"FocusActiveGroupAction")}constructor(){super({id:"workbench.action.focusActiveEditorGroup",title:W("focusActiveEditorGroup","Focus Active Editor Group"),f1:!0,category:oe.View})}async run(e){e.get(Ge).activeGroup.focus()}}class ym extends ge{constructor(e,t){super(e),this.scope=t}static{me(this,"AbstractFocusGroupAction")}async run(e){const t=e.get(Ge);t.findGroup(this.scope,t.activeGroup,!0)?.focus()}}class nKe extends ym{static{me(this,"FocusFirstGroupAction")}constructor(){super({id:"workbench.action.focusFirstEditorGroup",title:W("focusFirstEditorGroup","Focus First Editor Group"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|E.Digit1},category:oe.View},{location:Hl.FIRST})}}class sKe extends ym{static{me(this,"FocusLastGroupAction")}constructor(){super({id:"workbench.action.focusLastEditorGroup",title:W("focusLastEditorGroup","Focus Last Editor Group"),f1:!0,category:oe.View},{location:Hl.LAST})}}class oKe extends ym{static{me(this,"FocusNextGroup")}constructor(){super({id:"workbench.action.focusNextGroup",title:W("focusNextGroup","Focus Next Editor Group"),f1:!0,category:oe.View},{location:Hl.NEXT})}}class rKe extends ym{static{me(this,"FocusPreviousGroup")}constructor(){super({id:"workbench.action.focusPreviousGroup",title:W("focusPreviousGroup","Focus Previous Editor Group"),f1:!0,category:oe.View},{location:Hl.PREVIOUS})}}class aKe extends ym{static{me(this,"FocusLeftGroup")}constructor(){super({id:"workbench.action.focusLeftGroup",title:W("focusLeftGroup","Focus Left Editor Group"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|E.LeftArrow)},category:oe.View},{direction:Bt.LEFT})}}class lKe extends ym{static{me(this,"FocusRightGroup")}constructor(){super({id:"workbench.action.focusRightGroup",title:W("focusRightGroup","Focus Right Editor Group"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|E.RightArrow)},category:oe.View},{direction:Bt.RIGHT})}}class cKe extends ym{static{me(this,"FocusAboveGroup")}constructor(){super({id:"workbench.action.focusAboveGroup",title:W("focusAboveGroup","Focus Editor Group Above"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|E.UpArrow)},category:oe.View},{direction:Bt.UP})}}class dKe extends ym{static{me(this,"FocusBelowGroup")}constructor(){super({id:"workbench.action.focusBelowGroup",title:W("focusBelowGroup","Focus Editor Group Below"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|E.DownArrow)},category:oe.View},{direction:Bt.DOWN})}}let V$=class extends Mt{constructor(i,e,t){super(i,e,Ne.asClassName(ee.close)),this.commandService=t}static{me(this,"CloseEditorAction")}static ID="workbench.action.closeActiveEditor";static LABEL=g("closeEditor","Close Editor");run(i){return this.commandService.executeCommand(ZR,void 0,i)}};V$=N9([P9(2,Xi)],V$);let k0=class extends Mt{constructor(i,e,t){super(i,e,Ne.asClassName(ee.pinned)),this.commandService=t}static{me(this,"UnpinEditorAction")}static ID="workbench.action.unpinActiveEditor";static LABEL=g("unpinEditor","Unpin Editor");run(i){return this.commandService.executeCommand(I9,void 0,i)}};k0=N9([P9(2,Xi)],k0);let N0=class extends Mt{constructor(i,e,t){super(i,e,Ne.asClassName(ee.close)),this.editorGroupService=t}static{me(this,"CloseEditorTabAction")}static ID="workbench.action.closeActiveEditor";static LABEL=g("closeOneEditor","Close");async run(i){const e=i?this.editorGroupService.getGroup(i.groupId):this.editorGroupService.activeGroup;if(!e)return;const t=i?.editorIndex!==void 0?e.getEditorByIndex(i.editorIndex):e.activeEditor;if(!t)return;const n=[];e.isSelected(t)?n.push(...e.selectedEditors):n.push(t);for(const s of n)await e.closeEditor(s,{preserveFocus:i?.preserveFocus})}};N0=N9([P9(2,Ge)],N0);class hKe extends ge{static{me(this,"RevertAndCloseEditorAction")}constructor(){super({id:"workbench.action.revertAndCloseActiveEditor",title:W("revertAndCloseActiveEditor","Revert and Close Editor"),f1:!0,category:oe.View})}async run(e){const t=e.get(nt),n=e.get(jo),s=t.activeEditorPane;if(s){const o=s.input,r=s.group;try{await t.revert({editor:o,groupId:r.id})}catch(a){n.error(a),await t.revert({editor:o,groupId:r.id},{soft:!0})}await r.closeEditor(o)}}}class uKe extends ge{static{me(this,"CloseLeftEditorsInGroupAction")}constructor(){super({id:"workbench.action.closeEditorsToTheLeft",title:W("closeEditorsToTheLeft","Close Editors to the Left in Group"),f1:!0,category:oe.View})}async run(e,t){const n=e.get(Ge),{group:s,editor:o}=this.getTarget(n,t);s&&o&&await s.closeEditors({direction:q6.LEFT,except:o,excludeSticky:!0})}getTarget(e,t){return t?{editor:t.editor,group:e.getGroup(t.groupId)}:{group:e.activeGroup,editor:e.activeGroup.activeEditor}}}class Dce extends ge{static{me(this,"AbstractCloseAllAction")}groupsToClose(e){const t=[],n=e.getGroups(tl.GRID_APPEARANCE);for(let s=n.length-1;s>=0;s--)t.push(n[s]);return t}async run(e){const t=e.get(nt),n=e.get(jo),s=e.get(O6),o=e.get(Ge),r=e.get(B6),a=e.get(qEe),l=new Set,c=new Set,d=new Set,h=new Map;for(const{editor:u,groupId:f}of t.getEditors(mn.SEQUENTIAL,{excludeSticky:this.excludeSticky})){let p=!1;if(u.closeHandler?p=u.closeHandler.showConfirm():p=u.isDirty()&&!u.isSaving(),!!p)if(typeof u.closeHandler?.confirm=="function"){let m=h.get(u.typeId);m||(m=new Set,h.set(u.typeId,m)),m.add({editor:u,groupId:f})}else!u.hasCapability(Wo.Untitled)&&r.getAutoSaveMode(u).mode===bF.ON_FOCUS_CHANGE?c.add({editor:u,groupId:f}):ao&&(Nt||Gi)&&!u.hasCapability(Wo.Untitled)&&r.getAutoSaveMode(u).mode===bF.ON_WINDOW_CHANGE?d.add({editor:u,groupId:f}):l.add({editor:u,groupId:f})}if(l.size>0){const u=Array.from(l.values());switch(await this.revealEditorsToConfirm(u,o),await a.showSaveConfirm(u.map(({editor:p})=>p instanceof zo?p.primary.getName():p.getName()))){case jm.CANCEL:return;case jm.DONT_SAVE:await this.revertEditors(t,n,s,u);break;case jm.SAVE:await t.save(u,{reason:wo.EXPLICIT});break}}for(const[,u]of h){const f=Array.from(u.values());await this.revealEditorsToConfirm(f,o);const p=await f.at(0)?.editor.closeHandler?.confirm?.(f);if(typeof p=="number")switch(p){case jm.CANCEL:return;case jm.DONT_SAVE:await this.revertEditors(t,n,s,f);break;case jm.SAVE:await t.save(f,{reason:wo.EXPLICIT});break}}if(c.size>0){const u=Array.from(c.values());await t.save(u,{reason:wo.FOCUS_CHANGE})}if(d.size>0){const u=Array.from(d.values());await t.save(u,{reason:wo.WINDOW_CHANGE})}return this.doCloseAll(o)}revertEditors(e,t,n,s){return n.withProgress({location:M6.Window,delay:800,title:g("reverting","Reverting Editors...")},()=>this.doRevertEditors(e,t,s))}async doRevertEditors(e,t,n){try{await e.revert(n)}catch(s){t.error(s),await e.revert(n,{soft:!0})}}async revealEditorsToConfirm(e,t){try{const n=new Set;for(const{editor:s,groupId:o}of e){if(n.has(o))continue;n.add(o),await t.getGroup(o)?.openEditor(s)}}catch{}}async doCloseAll(e){await Promise.all(this.groupsToClose(e).map(t=>t.closeAllEditors({excludeSticky:this.excludeSticky})))}}class NW extends Dce{static{me(this,"CloseAllEditorsAction")}static ID="workbench.action.closeAllEditors";static LABEL=W("closeAllEditors","Close All Editors");constructor(){super({id:NW.ID,title:NW.LABEL,f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|E.KeyW)},icon:ee.closeAll,category:oe.View})}get excludeSticky(){return!0}}class gKe extends Dce{static{me(this,"CloseAllEditorGroupsAction")}constructor(){super({id:"workbench.action.closeAllGroups",title:W("closeAllGroups","Close All Editor Groups"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|M.Shift|E.KeyW)},category:oe.View})}get excludeSticky(){return!1}async doCloseAll(e){await super.doCloseAll(e);for(const t of this.groupsToClose(e))e.removeGroup(t)}}class fKe extends ge{static{me(this,"CloseEditorsInOtherGroupsAction")}constructor(){super({id:"workbench.action.closeEditorsInOtherGroups",title:W("closeEditorsInOtherGroups","Close Editors in Other Groups"),f1:!0,category:oe.View})}async run(e,t){const n=e.get(Ge),s=t?n.getGroup(t.groupId):n.activeGroup;await Promise.all(n.getGroups(tl.MOST_RECENTLY_ACTIVE).map(async o=>{if(!(s&&o.id===s.id))return o.closeAllEditors({excludeSticky:!0})}))}}class pKe extends ge{static{me(this,"CloseEditorInAllGroupsAction")}constructor(){super({id:"workbench.action.closeEditorInAllGroups",title:W("closeEditorInAllGroups","Close Editor in All Groups"),f1:!0,category:oe.View})}async run(e){const t=e.get(nt),n=e.get(Ge),s=t.activeEditor;s&&await Promise.all(n.getGroups(tl.MOST_RECENTLY_ACTIVE).map(o=>o.closeEditor(s)))}}class Ice extends ge{constructor(e,t,n){super(e),this.direction=t,this.isMove=n}static{me(this,"AbstractMoveCopyGroupAction")}async run(e,t){const n=e.get(Ge);let s;if(t&&typeof t.groupId=="number"?s=n.getGroup(t.groupId):s=n.activeGroup,s){let o;if(this.isMove){const r=this.findTargetGroup(n,s);r&&(o=n.moveGroup(s,r,this.direction))}else o=n.copyGroup(s,s,this.direction);o&&n.activateGroup(o)}}findTargetGroup(e,t){const n=[this.direction];switch(this.direction){case Bt.LEFT:case Bt.RIGHT:n.push(Bt.UP,Bt.DOWN);break;case Bt.UP:case Bt.DOWN:n.push(Bt.LEFT,Bt.RIGHT);break}for(const s of n){const o=e.findGroup({direction:s},t);if(o)return o}}}class eO extends Ice{static{me(this,"AbstractMoveGroupAction")}constructor(e,t){super(e,t,!0)}}class mKe extends eO{static{me(this,"MoveGroupLeftAction")}constructor(){super({id:"workbench.action.moveActiveEditorGroupLeft",title:W("moveActiveGroupLeft","Move Editor Group Left"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,E.LeftArrow)},category:oe.View},Bt.LEFT)}}class _Ke extends eO{static{me(this,"MoveGroupRightAction")}constructor(){super({id:"workbench.action.moveActiveEditorGroupRight",title:W("moveActiveGroupRight","Move Editor Group Right"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,E.RightArrow)},category:oe.View},Bt.RIGHT)}}class bKe extends eO{static{me(this,"MoveGroupUpAction")}constructor(){super({id:"workbench.action.moveActiveEditorGroupUp",title:W("moveActiveGroupUp","Move Editor Group Up"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,E.UpArrow)},category:oe.View},Bt.UP)}}class vKe extends eO{static{me(this,"MoveGroupDownAction")}constructor(){super({id:"workbench.action.moveActiveEditorGroupDown",title:W("moveActiveGroupDown","Move Editor Group Down"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,E.DownArrow)},category:oe.View},Bt.DOWN)}}class tO extends Ice{static{me(this,"AbstractDuplicateGroupAction")}constructor(e,t){super(e,t,!1)}}class wKe extends tO{static{me(this,"DuplicateGroupLeftAction")}constructor(){super({id:"workbench.action.duplicateActiveEditorGroupLeft",title:W("duplicateActiveGroupLeft","Duplicate Editor Group Left"),f1:!0,category:oe.View},Bt.LEFT)}}class CKe extends tO{static{me(this,"DuplicateGroupRightAction")}constructor(){super({id:"workbench.action.duplicateActiveEditorGroupRight",title:W("duplicateActiveGroupRight","Duplicate Editor Group Right"),f1:!0,category:oe.View},Bt.RIGHT)}}class yKe extends tO{static{me(this,"DuplicateGroupUpAction")}constructor(){super({id:"workbench.action.duplicateActiveEditorGroupUp",title:W("duplicateActiveGroupUp","Duplicate Editor Group Up"),f1:!0,category:oe.View},Bt.UP)}}class SKe extends tO{static{me(this,"DuplicateGroupDownAction")}constructor(){super({id:"workbench.action.duplicateActiveEditorGroupDown",title:W("duplicateActiveGroupDown","Duplicate Editor Group Down"),f1:!0,category:oe.View},Bt.DOWN)}}class EKe extends ge{static{me(this,"MinimizeOtherGroupsAction")}constructor(){super({id:"workbench.action.minimizeOtherEditors",title:W("minimizeOtherEditorGroups","Expand Editor Group"),f1:!0,category:oe.View,precondition:SD})}async run(e){e.get(Ge).arrangeGroups(aD.EXPAND)}}class LKe extends ge{static{me(this,"MinimizeOtherGroupsHideSidebarAction")}constructor(){super({id:"workbench.action.minimizeOtherEditorsHideSidebar",title:W("minimizeOtherEditorGroupsHideSidebar","Expand Editor Group and Hide Side Bars"),f1:!0,category:oe.View,precondition:Z.or(SD,vg,Og)})}async run(e){const t=e.get(Ge),n=e.get(yt);n.setPartHidden(!0,Y.SIDEBAR_PART),n.setPartHidden(!0,Y.AUXILIARYBAR_PART),t.arrangeGroups(aD.EXPAND)}}class DKe extends ge{static{me(this,"ResetGroupSizesAction")}constructor(){super({id:"workbench.action.evenEditorWidths",title:W("evenEditorGroups","Reset Editor Group Sizes"),f1:!0,category:oe.View})}async run(e){e.get(Ge).arrangeGroups(aD.EVEN)}}class IKe extends ge{static{me(this,"ToggleGroupSizesAction")}constructor(){super({id:"workbench.action.toggleEditorWidths",title:W("toggleEditorWidths","Toggle Editor Group Sizes"),f1:!0,category:oe.View})}async run(e){e.get(Ge).toggleExpandGroup()}}class TKe extends ge{static{me(this,"MaximizeGroupHideSidebarAction")}constructor(){super({id:"workbench.action.maximizeEditorHideSidebar",title:W("maximizeEditorHideSidebar","Maximize Editor Group and Hide Side Bars"),f1:!0,category:oe.View,precondition:Z.or(Z.and(D1.negate(),_7),vg,Og)})}async run(e){const t=e.get(yt),n=e.get(Ge);e.get(nt).activeEditor&&(t.setPartHidden(!0,Y.SIDEBAR_PART),t.setPartHidden(!0,Y.AUXILIARYBAR_PART),n.arrangeGroups(aD.MAXIMIZE))}}class AKe extends ge{static{me(this,"ToggleMaximizeEditorGroupAction")}constructor(){super({id:Jle,title:W("toggleMaximizeEditorGroup","Toggle Maximize Editor Group"),f1:!0,category:oe.View,precondition:Z.or(_7,D1),keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|E.KeyM)},menu:[{id:N.EditorTitle,order:-1e4,group:"navigation",when:D1},{id:N.EmptyEditorGroup,order:-1e4,group:"navigation",when:D1}],icon:ee.screenFull,toggled:D1})}async run(e,...t){const n=e.get(Ge),s=io(t,e.get(nt),n,e.get(xi));s.groupedEditors.length&&n.toggleMaximizeGroup(s.groupedEditors[0].group)}}class IS extends ge{static{me(this,"AbstractNavigateEditorAction")}async run(e){const t=e.get(Ge),n=this.navigate(t);if(!n)return;const{groupId:s,editor:o}=n;if(!o)return;const r=t.getGroup(s);r&&await r.openEditor(o)}}class xKe extends IS{static{me(this,"OpenNextEditor")}constructor(){super({id:"workbench.action.nextEditor",title:W("openNextEditor","Open Next Editor"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|E.PageDown,mac:{primary:M.CtrlCmd|M.Alt|E.RightArrow,secondary:[M.CtrlCmd|M.Shift|E.BracketRight]}},category:oe.View})}navigate(e){const t=e.activeGroup,n=t.getEditors(mn.SEQUENTIAL),s=t.activeEditor?n.indexOf(t.activeEditor):-1;if(s+1<n.length)return{editor:n[s+1],groupId:t.id};const o=new Set;let r=e.activeGroup;for(;r&&!o.has(r.id);)if(r=e.findGroup({location:Hl.NEXT},r,!0),r){o.add(r.id);const a=r.getEditors(mn.SEQUENTIAL);if(a.length>0)return{editor:a[0],groupId:r.id}}}}class kKe extends IS{static{me(this,"OpenPreviousEditor")}constructor(){super({id:"workbench.action.previousEditor",title:W("openPreviousEditor","Open Previous Editor"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|E.PageUp,mac:{primary:M.CtrlCmd|M.Alt|E.LeftArrow,secondary:[M.CtrlCmd|M.Shift|E.BracketLeft]}},category:oe.View})}navigate(e){const t=e.activeGroup,n=t.getEditors(mn.SEQUENTIAL),s=t.activeEditor?n.indexOf(t.activeEditor):-1;if(s>0)return{editor:n[s-1],groupId:t.id};const o=new Set;let r=e.activeGroup;for(;r&&!o.has(r.id);)if(r=e.findGroup({location:Hl.PREVIOUS},r,!0),r){o.add(r.id);const a=r.getEditors(mn.SEQUENTIAL);if(a.length>0)return{editor:a[a.length-1],groupId:r.id}}}}class NKe extends IS{static{me(this,"OpenNextEditorInGroup")}constructor(){super({id:"workbench.action.nextEditorInGroup",title:W("nextEditorInGroup","Open Next Editor in Group"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|E.PageDown),mac:{primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|M.Alt|E.RightArrow)}},category:oe.View})}navigate(e){const t=e.activeGroup,n=t.getEditors(mn.SEQUENTIAL),s=t.activeEditor?n.indexOf(t.activeEditor):-1;return{editor:s+1<n.length?n[s+1]:n[0],groupId:t.id}}}class PKe extends IS{static{me(this,"OpenPreviousEditorInGroup")}constructor(){super({id:"workbench.action.previousEditorInGroup",title:W("openPreviousEditorInGroup","Open Previous Editor in Group"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|E.PageUp),mac:{primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|M.Alt|E.LeftArrow)}},category:oe.View})}navigate(e){const t=e.activeGroup,n=t.getEditors(mn.SEQUENTIAL),s=t.activeEditor?n.indexOf(t.activeEditor):-1;return{editor:s>0?n[s-1]:n[n.length-1],groupId:t.id}}}class RKe extends IS{static{me(this,"OpenFirstEditorInGroup")}constructor(){super({id:"workbench.action.firstEditorInGroup",title:W("firstEditorInGroup","Open First Editor in Group"),f1:!0,category:oe.View})}navigate(e){const t=e.activeGroup;return{editor:t.getEditors(mn.SEQUENTIAL)[0],groupId:t.id}}}class OKe extends IS{static{me(this,"OpenLastEditorInGroup")}constructor(){super({id:"workbench.action.lastEditorInGroup",title:W("lastEditorInGroup","Open Last Editor in Group"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:M.Alt|E.Digit0,secondary:[M.CtrlCmd|E.Digit9],mac:{primary:M.WinCtrl|E.Digit0,secondary:[M.CtrlCmd|E.Digit9]}},category:oe.View})}navigate(e){const t=e.activeGroup,n=t.getEditors(mn.SEQUENTIAL);return{editor:n[n.length-1],groupId:t.id}}}class Tce extends ge{static{me(this,"NavigateForwardAction")}static ID="workbench.action.navigateForward";static LABEL=g("navigateForward","Go Forward");constructor(){super({id:Tce.ID,title:{...W("navigateForward","Go Forward"),mnemonicTitle:g({key:"miForward",comment:["&& denotes a mnemonic"]},"&&Forward")},f1:!0,icon:ee.arrowRight,precondition:Z.has("canNavigateForward"),keybinding:{weight:Ce.WorkbenchContrib,win:{primary:M.Alt|E.RightArrow},mac:{primary:M.WinCtrl|M.Shift|E.Minus},linux:{primary:M.CtrlCmd|M.Shift|E.Minus}},menu:[{id:N.MenubarGoMenu,group:"1_history_nav",order:2},{id:N.CommandCenter,order:2}]})}async run(e){await e.get(gr).goForward(od.NONE)}}class Ace extends ge{static{me(this,"NavigateBackwardsAction")}static ID="workbench.action.navigateBack";static LABEL=g("navigateBack","Go Back");constructor(){super({id:Ace.ID,title:{...W("navigateBack","Go Back"),mnemonicTitle:g({key:"miBack",comment:["&& denotes a mnemonic"]},"&&Back")},f1:!0,precondition:Z.has("canNavigateBack"),icon:ee.arrowLeft,keybinding:{weight:Ce.WorkbenchContrib,win:{primary:M.Alt|E.LeftArrow},mac:{primary:M.WinCtrl|E.Minus},linux:{primary:M.CtrlCmd|M.Alt|E.Minus}},menu:[{id:N.MenubarGoMenu,group:"1_history_nav",order:1},{id:N.CommandCenter,order:1}]})}async run(e){await e.get(gr).goBack(od.NONE)}}class MKe extends ge{static{me(this,"NavigatePreviousAction")}constructor(){super({id:"workbench.action.navigateLast",title:W("navigatePrevious","Go Previous"),f1:!0})}async run(e){await e.get(gr).goPrevious(od.NONE)}}class BKe extends ge{static{me(this,"NavigateForwardInEditsAction")}constructor(){super({id:"workbench.action.navigateForwardInEditLocations",title:W("navigateForwardInEdits","Go Forward in Edit Locations"),f1:!0})}async run(e){await e.get(gr).goForward(od.EDITS)}}class FKe extends ge{static{me(this,"NavigateBackwardsInEditsAction")}constructor(){super({id:"workbench.action.navigateBackInEditLocations",title:W("navigateBackInEdits","Go Back in Edit Locations"),f1:!0})}async run(e){await e.get(gr).goBack(od.EDITS)}}class VKe extends ge{static{me(this,"NavigatePreviousInEditsAction")}constructor(){super({id:"workbench.action.navigatePreviousInEditLocations",title:W("navigatePreviousInEdits","Go Previous in Edit Locations"),f1:!0})}async run(e){await e.get(gr).goPrevious(od.EDITS)}}class WKe extends ge{static{me(this,"NavigateToLastEditLocationAction")}constructor(){super({id:"workbench.action.navigateToLastEditLocation",title:W("navigateToLastEditLocation","Go to Last Edit Location"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|E.KeyQ)}})}async run(e){await e.get(gr).goLast(od.EDITS)}}class HKe extends ge{static{me(this,"NavigateForwardInNavigationsAction")}constructor(){super({id:"workbench.action.navigateForwardInNavigationLocations",title:W("navigateForwardInNavigations","Go Forward in Navigation Locations"),f1:!0})}async run(e){await e.get(gr).goForward(od.NAVIGATION)}}class UKe extends ge{static{me(this,"NavigateBackwardsInNavigationsAction")}constructor(){super({id:"workbench.action.navigateBackInNavigationLocations",title:W("navigateBackInNavigations","Go Back in Navigation Locations"),f1:!0})}async run(e){await e.get(gr).goBack(od.NAVIGATION)}}class zKe extends ge{static{me(this,"NavigatePreviousInNavigationsAction")}constructor(){super({id:"workbench.action.navigatePreviousInNavigationLocations",title:W("navigatePreviousInNavigationLocations","Go Previous in Navigation Locations"),f1:!0})}async run(e){await e.get(gr).goPrevious(od.NAVIGATION)}}class $Ke extends ge{static{me(this,"NavigateToLastNavigationLocationAction")}constructor(){super({id:"workbench.action.navigateToLastNavigationLocation",title:W("navigateToLastNavigationLocation","Go to Last Navigation Location"),f1:!0})}async run(e){await e.get(gr).goLast(od.NAVIGATION)}}class xce extends ge{static{me(this,"ReopenClosedEditorAction")}static ID="workbench.action.reopenClosedEditor";constructor(){super({id:xce.ID,title:W("reopenClosedEditor","Reopen Closed Editor"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|M.Shift|E.KeyT},category:oe.View})}async run(e){await e.get(gr).reopenLastClosedEditor()}}class kce extends ge{static{me(this,"ClearRecentFilesAction")}static ID="workbench.action.clearRecentFiles";constructor(){super({id:kce.ID,title:W("clearRecentFiles","Clear Recently Opened..."),f1:!0,category:oe.File})}async run(e){const t=e.get(gh),n=e.get(gR),s=e.get(gr),{confirmed:o}=await t.confirm({type:"warning",message:g("confirmClearRecentsMessage","Do you want to clear all recently opened files and workspaces?"),detail:g("confirmClearDetail","This action is irreversible!"),primaryButton:g({key:"clearButtonLabel",comment:["&& denotes a mnemonic"]},"&&Clear")});o&&(n.clearRecentlyOpened(),s.clearRecentlyOpened())}}class Nce extends ge{static{me(this,"ShowEditorsInActiveGroupByMostRecentlyUsedAction")}static ID="workbench.action.showEditorsInActiveGroup";constructor(){super({id:Nce.ID,title:W("showEditorsInActiveGroup","Show Editors in Active Group By Most Recently Used"),f1:!0,category:oe.View})}async run(e){e.get(ca).quickAccess.show(Jb.PREFIX)}}class Pce extends ge{static{me(this,"ShowAllEditorsByAppearanceAction")}static ID="workbench.action.showAllEditors";constructor(){super({id:Pce.ID,title:W("showAllEditors","Show All Editors By Appearance"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|E.KeyP),mac:{primary:M.CtrlCmd|M.Alt|E.Tab}},category:oe.File})}async run(e){e.get(ca).quickAccess.show(Fk.PREFIX)}}class Rce extends ge{static{me(this,"ShowAllEditorsByMostRecentlyUsedAction")}static ID="workbench.action.showAllEditorsByMostRecentlyUsed";constructor(){super({id:Rce.ID,title:W("showAllEditorsByMostRecentlyUsed","Show All Editors By Most Recently Used"),f1:!0,category:oe.View})}async run(e){e.get(ca).quickAccess.show(Ly.PREFIX)}}class iO extends ge{constructor(e,t,n){super(e),this.prefix=t,this.itemActivation=n}static{me(this,"AbstractQuickAccessEditorAction")}async run(e){const t=e.get(ni),n=e.get(ca),s=t.lookupKeybindings(this.desc.id);n.quickAccess.show(this.prefix,{quickNavigateConfiguration:{keybindings:s},itemActivation:this.itemActivation})}}class GKe extends iO{static{me(this,"QuickAccessPreviousRecentlyUsedEditorAction")}constructor(){super({id:"workbench.action.quickOpenPreviousRecentlyUsedEditor",title:W("quickOpenPreviousRecentlyUsedEditor","Quick Open Previous Recently Used Editor"),f1:!0,category:oe.View},Ly.PREFIX,void 0)}}class KKe extends iO{static{me(this,"QuickAccessLeastRecentlyUsedEditorAction")}constructor(){super({id:"workbench.action.quickOpenLeastRecentlyUsedEditor",title:W("quickOpenLeastRecentlyUsedEditor","Quick Open Least Recently Used Editor"),f1:!0,category:oe.View},Ly.PREFIX,void 0)}}class jKe extends iO{static{me(this,"QuickAccessPreviousRecentlyUsedEditorInGroupAction")}constructor(){super({id:"workbench.action.quickOpenPreviousRecentlyUsedEditorInGroup",title:W("quickOpenPreviousRecentlyUsedEditorInGroup","Quick Open Previous Recently Used Editor in Group"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|E.Tab,mac:{primary:M.WinCtrl|E.Tab}},precondition:lR.toNegated(),category:oe.View},Jb.PREFIX,void 0)}}class qKe extends iO{static{me(this,"QuickAccessLeastRecentlyUsedEditorInGroupAction")}constructor(){super({id:"workbench.action.quickOpenLeastRecentlyUsedEditorInGroup",title:W("quickOpenLeastRecentlyUsedEditorInGroup","Quick Open Least Recently Used Editor in Group"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|M.Shift|E.Tab,mac:{primary:M.WinCtrl|M.Shift|E.Tab}},precondition:lR.toNegated(),category:oe.View},Jb.PREFIX,E7.LAST)}}class PW extends ge{static{me(this,"QuickAccessPreviousEditorFromHistoryAction")}static ID="workbench.action.openPreviousEditorFromHistory";constructor(){super({id:PW.ID,title:W("navigateEditorHistoryByInput","Quick Open Previous Editor from History"),f1:!0})}async run(e){const t=e.get(ni),n=e.get(ca),s=e.get(Ge),o=t.lookupKeybindings(PW.ID);let r;s.activeGroup.count===0&&(r=E7.FIRST),n.quickAccess.show("",{quickNavigateConfiguration:{keybindings:o},itemActivation:r})}}class YKe extends ge{static{me(this,"OpenNextRecentlyUsedEditorAction")}constructor(){super({id:"workbench.action.openNextRecentlyUsedEditor",title:W("openNextRecentlyUsedEditor","Open Next Recently Used Editor"),f1:!0,category:oe.View})}async run(e){e.get(gr).openNextRecentlyUsedEditor()}}class ZKe extends ge{static{me(this,"OpenPreviousRecentlyUsedEditorAction")}constructor(){super({id:"workbench.action.openPreviousRecentlyUsedEditor",title:W("openPreviousRecentlyUsedEditor","Open Previous Recently Used Editor"),f1:!0,category:oe.View})}async run(e){e.get(gr).openPreviouslyUsedEditor()}}class XKe extends ge{static{me(this,"OpenNextRecentlyUsedEditorInGroupAction")}constructor(){super({id:"workbench.action.openNextRecentlyUsedEditorInGroup",title:W("openNextRecentlyUsedEditorInGroup","Open Next Recently Used Editor In Group"),f1:!0,category:oe.View})}async run(e){const t=e.get(gr),n=e.get(Ge);t.openNextRecentlyUsedEditor(n.activeGroup.id)}}class QKe extends ge{static{me(this,"OpenPreviousRecentlyUsedEditorInGroupAction")}constructor(){super({id:"workbench.action.openPreviousRecentlyUsedEditorInGroup",title:W("openPreviousRecentlyUsedEditorInGroup","Open Previous Recently Used Editor In Group"),f1:!0,category:oe.View})}async run(e){const t=e.get(gr),n=e.get(Ge);t.openPreviouslyUsedEditor(n.activeGroup.id)}}class JKe extends ge{static{me(this,"ClearEditorHistoryAction")}constructor(){super({id:"workbench.action.clearEditorHistory",title:W("clearEditorHistory","Clear Editor History"),f1:!0})}async run(e){const t=e.get(gh),n=e.get(gr),{confirmed:s}=await t.confirm({type:"warning",message:g("confirmClearEditorHistoryMessage","Do you want to clear the history of recently opened editors?"),detail:g("confirmClearDetail","This action is irreversible!"),primaryButton:g({key:"clearButtonLabel",comment:["&& denotes a mnemonic"]},"&&Clear")});s&&n.clear()}}class eje extends yn{static{me(this,"MoveEditorLeftInGroupAction")}constructor(){super({id:"workbench.action.moveEditorLeftInGroup",title:W("moveEditorLeft","Move Editor Left"),keybinding:{weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|M.Shift|E.PageUp,mac:{primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|M.Shift|E.LeftArrow)}},f1:!0,category:oe.View},_h,{to:"left"})}}class tje extends yn{static{me(this,"MoveEditorRightInGroupAction")}constructor(){super({id:"workbench.action.moveEditorRightInGroup",title:W("moveEditorRight","Move Editor Right"),keybinding:{weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|M.Shift|E.PageDown,mac:{primary:di(M.CtrlCmd|E.KeyK,M.CtrlCmd|M.Shift|E.RightArrow)}},f1:!0,category:oe.View},_h,{to:"right"})}}class ije extends yn{static{me(this,"MoveEditorToPreviousGroupAction")}constructor(){super({id:"workbench.action.moveEditorToPreviousGroup",title:W("moveEditorToPreviousGroup","Move Editor into Previous Group"),keybinding:{weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|M.Alt|E.LeftArrow,mac:{primary:M.CtrlCmd|M.WinCtrl|E.LeftArrow}},f1:!0,category:oe.View},_h,{to:"previous",by:"group"})}}class nje extends yn{static{me(this,"MoveEditorToNextGroupAction")}constructor(){super({id:"workbench.action.moveEditorToNextGroup",title:W("moveEditorToNextGroup","Move Editor into Next Group"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:M.CtrlCmd|M.Alt|E.RightArrow,mac:{primary:M.CtrlCmd|M.WinCtrl|E.RightArrow}},category:oe.View},_h,{to:"next",by:"group"})}}class sje extends yn{static{me(this,"MoveEditorToAboveGroupAction")}constructor(){super({id:"workbench.action.moveEditorToAboveGroup",title:W("moveEditorToAboveGroup","Move Editor into Group Above"),f1:!0,category:oe.View},_h,{to:"up",by:"group"})}}class oje extends yn{static{me(this,"MoveEditorToBelowGroupAction")}constructor(){super({id:"workbench.action.moveEditorToBelowGroup",title:W("moveEditorToBelowGroup","Move Editor into Group Below"),f1:!0,category:oe.View},_h,{to:"down",by:"group"})}}class rje extends yn{static{me(this,"MoveEditorToLeftGroupAction")}constructor(){super({id:"workbench.action.moveEditorToLeftGroup",title:W("moveEditorToLeftGroup","Move Editor into Left Group"),f1:!0,category:oe.View},_h,{to:"left",by:"group"})}}class aje extends yn{static{me(this,"MoveEditorToRightGroupAction")}constructor(){super({id:"workbench.action.moveEditorToRightGroup",title:W("moveEditorToRightGroup","Move Editor into Right Group"),f1:!0,category:oe.View},_h,{to:"right",by:"group"})}}class lje extends yn{static{me(this,"MoveEditorToFirstGroupAction")}constructor(){super({id:"workbench.action.moveEditorToFirstGroup",title:W("moveEditorToFirstGroup","Move Editor into First Group"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:M.Shift|M.Alt|E.Digit1,mac:{primary:M.CtrlCmd|M.WinCtrl|E.Digit1}},category:oe.View},_h,{to:"first",by:"group"})}}class cje extends yn{static{me(this,"MoveEditorToLastGroupAction")}constructor(){super({id:"workbench.action.moveEditorToLastGroup",title:W("moveEditorToLastGroup","Move Editor into Last Group"),f1:!0,keybinding:{weight:Ce.WorkbenchContrib,primary:M.Shift|M.Alt|E.Digit9,mac:{primary:M.CtrlCmd|M.WinCtrl|E.Digit9}},category:oe.View},_h,{to:"last",by:"group"})}}class dje extends yn{static{me(this,"SplitEditorToPreviousGroupAction")}constructor(){super({id:"workbench.action.splitEditorToPreviousGroup",title:W("splitEditorToPreviousGroup","Split Editor into Previous Group"),f1:!0,category:oe.View},Sf,{to:"previous",by:"group"})}}class hje extends yn{static{me(this,"SplitEditorToNextGroupAction")}constructor(){super({id:"workbench.action.splitEditorToNextGroup",title:W("splitEditorToNextGroup","Split Editor into Next Group"),f1:!0,category:oe.View},Sf,{to:"next",by:"group"})}}class uje extends yn{static{me(this,"SplitEditorToAboveGroupAction")}constructor(){super({id:"workbench.action.splitEditorToAboveGroup",title:W("splitEditorToAboveGroup","Split Editor into Group Above"),f1:!0,category:oe.View},Sf,{to:"up",by:"group"})}}class gje extends yn{static{me(this,"SplitEditorToBelowGroupAction")}constructor(){super({id:"workbench.action.splitEditorToBelowGroup",title:W("splitEditorToBelowGroup","Split Editor into Group Below"),f1:!0,category:oe.View},Sf,{to:"down",by:"group"})}}class fje extends yn{static{me(this,"SplitEditorToLeftGroupAction")}static ID="workbench.action.splitEditorToLeftGroup";static LABEL=g("splitEditorToLeftGroup","Split Editor into Left Group");constructor(){super({id:"workbench.action.splitEditorToLeftGroup",title:W("splitEditorToLeftGroup","Split Editor into Left Group"),f1:!0,category:oe.View},Sf,{to:"left",by:"group"})}}class pje extends yn{static{me(this,"SplitEditorToRightGroupAction")}constructor(){super({id:"workbench.action.splitEditorToRightGroup",title:W("splitEditorToRightGroup","Split Editor into Right Group"),f1:!0,category:oe.View},Sf,{to:"right",by:"group"})}}class mje extends yn{static{me(this,"SplitEditorToFirstGroupAction")}constructor(){super({id:"workbench.action.splitEditorToFirstGroup",title:W("splitEditorToFirstGroup","Split Editor into First Group"),f1:!0,category:oe.View},Sf,{to:"first",by:"group"})}}class _je extends yn{static{me(this,"SplitEditorToLastGroupAction")}constructor(){super({id:"workbench.action.splitEditorToLastGroup",title:W("splitEditorToLastGroup","Split Editor into Last Group"),f1:!0,category:oe.View},Sf,{to:"last",by:"group"})}}class Oce extends yn{static{me(this,"EditorLayoutSingleAction")}static ID="workbench.action.editorLayoutSingle";constructor(){super({id:Oce.ID,title:W("editorLayoutSingle","Single Column Editor Layout"),f1:!0,category:oe.View},Ef,{groups:[{}],orientation:mf.HORIZONTAL})}}class Mce extends yn{static{me(this,"EditorLayoutTwoColumnsAction")}static ID="workbench.action.editorLayoutTwoColumns";constructor(){super({id:Mce.ID,title:W("editorLayoutTwoColumns","Two Columns Editor Layout"),f1:!0,category:oe.View},Ef,{groups:[{},{}],orientation:mf.HORIZONTAL})}}class Bce extends yn{static{me(this,"EditorLayoutThreeColumnsAction")}static ID="workbench.action.editorLayoutThreeColumns";constructor(){super({id:Bce.ID,title:W("editorLayoutThreeColumns","Three Columns Editor Layout"),f1:!0,category:oe.View},Ef,{groups:[{},{},{}],orientation:mf.HORIZONTAL})}}class Fce extends yn{static{me(this,"EditorLayoutTwoRowsAction")}static ID="workbench.action.editorLayoutTwoRows";constructor(){super({id:Fce.ID,title:W("editorLayoutTwoRows","Two Rows Editor Layout"),f1:!0,category:oe.View},Ef,{groups:[{},{}],orientation:mf.VERTICAL})}}class Vce extends yn{static{me(this,"EditorLayoutThreeRowsAction")}static ID="workbench.action.editorLayoutThreeRows";constructor(){super({id:Vce.ID,title:W("editorLayoutThreeRows","Three Rows Editor Layout"),f1:!0,category:oe.View},Ef,{groups:[{},{},{}],orientation:mf.VERTICAL})}}class Wce extends yn{static{me(this,"EditorLayoutTwoByTwoGridAction")}static ID="workbench.action.editorLayoutTwoByTwoGrid";constructor(){super({id:Wce.ID,title:W("editorLayoutTwoByTwoGrid","Grid Editor Layout (2x2)"),f1:!0,category:oe.View},Ef,{groups:[{groups:[{},{}]},{groups:[{},{}]}],orientation:mf.HORIZONTAL})}}class Hce extends yn{static{me(this,"EditorLayoutTwoColumnsBottomAction")}static ID="workbench.action.editorLayoutTwoColumnsBottom";constructor(){super({id:Hce.ID,title:W("editorLayoutTwoColumnsBottom","Two Columns Bottom Editor Layout"),f1:!0,category:oe.View},Ef,{groups:[{},{groups:[{},{}]}],orientation:mf.VERTICAL})}}class Uce extends yn{static{me(this,"EditorLayoutTwoRowsRightAction")}static ID="workbench.action.editorLayoutTwoRowsRight";constructor(){super({id:Uce.ID,title:W("editorLayoutTwoRowsRight","Two Rows Right Editor Layout"),f1:!0,category:oe.View},Ef,{groups:[{},{groups:[{},{}]}],orientation:mf.HORIZONTAL})}}class nO extends ge{constructor(e,t){super(e),this.direction=t}static{me(this,"AbstractCreateEditorGroupAction")}async run(e){const t=e.get(Ge),n=e.get(yt),s=om(),o=n.hasFocus(Y.EDITOR_PART)||s.activeElement===s.body,r=t.addGroup(t.activeGroup,this.direction);t.activateGroup(r),o&&r.focus()}}class bje extends nO{static{me(this,"NewEditorGroupLeftAction")}constructor(){super({id:"workbench.action.newGroupLeft",title:W("newGroupLeft","New Editor Group to the Left"),f1:!0,category:oe.View},Bt.LEFT)}}class vje extends nO{static{me(this,"NewEditorGroupRightAction")}constructor(){super({id:"workbench.action.newGroupRight",title:W("newGroupRight","New Editor Group to the Right"),f1:!0,category:oe.View},Bt.RIGHT)}}class wje extends nO{static{me(this,"NewEditorGroupAboveAction")}constructor(){super({id:"workbench.action.newGroupAbove",title:W("newGroupAbove","New Editor Group Above"),f1:!0,category:oe.View},Bt.UP)}}class Cje extends nO{static{me(this,"NewEditorGroupBelowAction")}constructor(){super({id:"workbench.action.newGroupBelow",title:W("newGroupBelow","New Editor Group Below"),f1:!0,category:oe.View},Bt.DOWN)}}class yje extends ge{static{me(this,"ToggleEditorTypeAction")}constructor(){super({id:"workbench.action.toggleEditorType",title:W("toggleEditorType","Toggle Editor Type"),f1:!0,category:oe.View,precondition:m7})}async run(e){const t=e.get(nt),n=e.get(aR),s=t.activeEditorPane;if(!s)return;const o=Io.getCanonicalUri(s.input);if(!o)return;const r=n.getEditors(o).map(a=>a.id).filter(a=>a!==s.input.editorId);r.length!==0&&await t.replaceEditors([{editor:s.input,replacement:{resource:o,options:{override:r[0]}}}],s.group)}}class Sje extends ge{static{me(this,"ReOpenInTextEditorAction")}constructor(){super({id:"workbench.action.reopenTextEditor",title:W("reopenTextEditor","Reopen Editor With Text Editor"),f1:!0,category:oe.View,precondition:m7})}async run(e){const t=e.get(nt),n=t.activeEditorPane;if(!n)return;const s=Io.getCanonicalUri(n.input);s&&await t.replaceEditors([{editor:n.input,replacement:{resource:s,options:{override:OP.id}}}],n.group)}}class zce extends ge{constructor(e,t,n,s){super({id:e,title:t,category:oe.View,precondition:pPe,keybinding:n,f1:!0}),this.move=s}static{me(this,"BaseMoveCopyEditorToNewWindowAction")}async run(e,...t){const n=e.get(Ge),s=io(t,e.get(nt),n,e.get(xi));if(!s.groupedEditors.length)return;const o=await n.createAuxiliaryEditorPart(),{group:r,editors:a}=s.groupedEditors[0],l={preserveFocus:s.preserveFocus},c=a.map(d=>({editor:d,options:l}));this.move?r.moveEditors(c,o.activeGroup):r.copyEditors(c,o.activeGroup),o.activeGroup.focus()}}class Eje extends zce{static{me(this,"MoveEditorToNewWindowAction")}constructor(){super(I8e,{...W("moveEditorToNewWindow","Move Editor into New Window"),mnemonicTitle:g({key:"miMoveEditorToNewWindow",comment:["&& denotes a mnemonic"]},"&&Move Editor into New Window")},void 0,!0)}}class Lje extends zce{static{me(this,"CopyEditorToNewindowAction")}constructor(){super(T8e,{...W("copyEditorToNewWindow","Copy Editor into New Window"),mnemonicTitle:g({key:"miCopyEditorToNewWindow",comment:["&& denotes a mnemonic"]},"&&Copy Editor into New Window")},{primary:di(M.CtrlCmd|E.KeyK,E.KeyO),weight:Ce.WorkbenchContrib},!1)}}class $ce extends ge{constructor(e,t,n){super({id:e,title:t,category:oe.View,f1:!0}),this.move=n}static{me(this,"BaseMoveCopyEditorGroupToNewWindowAction")}async run(e){const t=e.get(Ge),n=t.activeGroup,s=await t.createAuxiliaryEditorPart();t.mergeGroup(n,s.activeGroup,{mode:this.move?JC.MOVE_EDITORS:JC.COPY_EDITORS}),s.activeGroup.focus()}}class Dje extends $ce{static{me(this,"MoveEditorGroupToNewWindowAction")}constructor(){super(A8e,{...W("moveEditorGroupToNewWindow","Move Editor Group into New Window"),mnemonicTitle:g({key:"miMoveEditorGroupToNewWindow",comment:["&& denotes a mnemonic"]},"&&Move Editor Group into New Window")},!0)}}class Ije extends $ce{static{me(this,"CopyEditorGroupToNewWindowAction")}constructor(){super(x8e,{...W("copyEditorGroupToNewWindow","Copy Editor Group into New Window"),mnemonicTitle:g({key:"miCopyEditorGroupToNewWindow",comment:["&& denotes a mnemonic"]},"&&Copy Editor Group into New Window")},!1)}}class Tje extends ge{static{me(this,"RestoreEditorsToMainWindowAction")}constructor(){super({id:"workbench.action.restoreEditorsToMainWindow",title:{...W("restoreEditorsToMainWindow","Restore Editors into Main Window"),mnemonicTitle:g({key:"miRestoreEditorsToMainWindow",comment:["&& denotes a mnemonic"]},"&&Restore Editors into Main Window")},f1:!0,precondition:dc,category:oe.View})}async run(e){const t=e.get(Ge);t.mergeAllGroups(t.mainPart.activeGroup)}}class Aje extends ge{static{me(this,"NewEmptyEditorWindowAction")}constructor(){super({id:k8e,title:{...W("newEmptyEditorWindow","New Empty Editor Window"),mnemonicTitle:g({key:"miNewEmptyEditorWindow",comment:["&& denotes a mnemonic"]},"&&New Empty Editor Window")},f1:!0,category:oe.View})}async run(e){(await e.get(Ge).createAuxiliaryEditorPart()).activeGroup.focus()}}const Gce=De("treeViewsDndService");Rr(Gce,O8e,Pr.Delayed);var dUe=Object.defineProperty,R9=(i,e)=>dUe(i,"name",{value:e,configurable:!0});class Kce extends ${constructor(e){super(),this.model=e,this._register(this.model.onDidModelChange(t=>{const n=t.editorIndex??t.editor;n!==void 0&&!this.filter(n)||this._onDidModelChange.fire(t)}))}static{R9(this,"FilteredEditorGroupModel")}_onDidModelChange=this._register(new x);onDidModelChange=this._onDidModelChange.event;get id(){return this.model.id}get isLocked(){return this.model.isLocked}get stickyCount(){return this.model.stickyCount}get activeEditor(){return this.model.activeEditor&&this.filter(this.model.activeEditor)?this.model.activeEditor:null}get previewEditor(){return this.model.previewEditor&&this.filter(this.model.previewEditor)?this.model.previewEditor:null}get selectedEditors(){return this.model.selectedEditors.filter(e=>this.filter(e))}isPinned(e){return this.model.isPinned(e)}isTransient(e){return this.model.isTransient(e)}isSticky(e){return this.model.isSticky(e)}isActive(e){return this.model.isActive(e)}isSelected(e){return this.model.isSelected(e)}isFirst(e){return this.model.isFirst(e,this.getEditors(mn.SEQUENTIAL))}isLast(e){return this.model.isLast(e,this.getEditors(mn.SEQUENTIAL))}getEditors(e,t){return this.model.getEditors(e,t).filter(s=>this.filter(s))}findEditor(e,t){const n=this.model.findEditor(e,t);if(n)return this.filter(n[1])?n:void 0}}class jce extends Kce{static{R9(this,"StickyEditorGroupModel")}get count(){return this.model.stickyCount}getEditors(e,t){return t?.excludeSticky?[]:e===mn.SEQUENTIAL?this.model.getEditors(mn.SEQUENTIAL).slice(0,this.model.stickyCount):super.getEditors(e,t)}isSticky(e){return!0}getEditorByIndex(e){return e<this.count?this.model.getEditorByIndex(e):void 0}indexOf(e,t,n){const s=this.model.indexOf(e,t,n);return s<0||s>=this.model.stickyCount?-1:s}contains(e,t){const n=this.model.indexOf(e,void 0,t);return n>=0&&n<this.model.stickyCount}filter(e){return this.model.isSticky(e)}}class qce extends Kce{static{R9(this,"UnstickyEditorGroupModel")}get count(){return this.model.count-this.model.stickyCount}get stickyCount(){return 0}isSticky(e){return!1}getEditors(e,t){return e===mn.SEQUENTIAL?this.model.getEditors(mn.SEQUENTIAL).slice(this.model.stickyCount):super.getEditors(e,t)}getEditorByIndex(e){return e>=0?this.model.getEditorByIndex(e+this.model.stickyCount):void 0}indexOf(e,t,n){const s=this.model.indexOf(e,t,n);return s<this.model.stickyCount||s>=this.model.count?-1:s-this.model.stickyCount}contains(e,t){const n=this.model.indexOf(e,void 0,t);return n>=this.model.stickyCount&&n<this.model.count}filter(e){return!this.model.isSticky(e)}}var Yce=Object.defineProperty,hUe=Object.getOwnPropertyDescriptor,es=(i,e)=>Yce(i,"name",{value:e,configurable:!0}),uUe=(i,e,t,n)=>{for(var s=n>1?void 0:n?hUe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Yce(e,t,s),s},mc=(i,e)=>(t,n)=>e(t,n,i);let $r=class extends nv{constructor(i,e,t,n,s,o,r,a,l,c,d,h,u,f,p,m,_){super(i,e,t,n,s,o,r,a,l,c,d,h,m,_),this.editorService=u,this.pathService=f,this.treeViewsDragAndDropService=p,(async()=>this.path=await this.pathService.path)(),this._register(this.tabResourceLabels.onDidChangeDecorations(()=>this.doHandleDecorationsChange()))}static{es(this,"MultiEditorTabsControl")}static SCROLLBAR_SIZES={default:3,large:10};static TAB_WIDTH={compact:38,shrink:80,fit:120};static DRAG_OVER_OPEN_TAB_THRESHOLD=1500;static MOUSE_WHEEL_EVENT_THRESHOLD=150;static MOUSE_WHEEL_DISTANCE_THRESHOLD=1.5;titleContainer;tabsAndActionsContainer;tabsContainer;tabsScrollbar;tabSizingFixedDisposables;closeEditorAction=this._register(this.instantiationService.createInstance(N0,N0.ID,N0.LABEL));unpinEditorAction=this._register(this.instantiationService.createInstance(k0,k0.ID,k0.LABEL));tabResourceLabels=this._register(this.instantiationService.createInstance(Ny,QR));tabLabels=[];activeTabLabel;tabActionBars=[];tabDisposables=[];dimensions={container:Lt.None,available:Lt.None};layoutScheduler=this._register(new Yi);blockRevealActiveTab;path=Nt?Jn:kt;lastMouseWheelEventTime=0;isMouseOverTabs=!1;create(i){super.create(i),this.titleContainer=i,this.tabsAndActionsContainer=document.createElement("div"),this.tabsAndActionsContainer.classList.add("tabs-and-actions-container"),this.titleContainer.appendChild(this.tabsAndActionsContainer),this.tabsContainer=document.createElement("div"),this.tabsContainer.setAttribute("role","tablist"),this.tabsContainer.draggable=!0,this.tabsContainer.classList.add("tabs-container"),this._register(Gn.addTarget(this.tabsContainer)),this.tabSizingFixedDisposables=this._register(new te),this.updateTabSizing(!1),this.tabsScrollbar=this.createTabsScrollbar(this.tabsContainer),this.tabsAndActionsContainer.appendChild(this.tabsScrollbar.getDomNode()),this.registerTabsContainerListeners(this.tabsContainer,this.tabsScrollbar),this.createEditorActionsToolBar(this.tabsAndActionsContainer,["editor-actions"]),this.updateTabsControlVisibility()}createTabsScrollbar(i){const e=this._register(new YJ(i,{horizontal:Bi.Auto,horizontalScrollbarSize:this.getTabsScrollbarSizing(),vertical:Bi.Hidden,scrollYToX:!0,useShadows:!1}));return this._register(e.onScroll(t=>{t.scrollLeftChanged&&(i.scrollLeft=t.scrollLeft)})),e}updateTabsScrollbarSizing(){this.tabsScrollbar?.updateOptions({horizontalScrollbarSize:this.getTabsScrollbarSizing()})}updateTabSizing(i){const[e,t]=Rd(this.tabsContainer,this.tabSizingFixedDisposables);t.clear();const n=this.groupsView.partOptions;n.tabSizing==="fixed"?(e.style.setProperty("--tab-sizing-fixed-min-width",`${n.tabSizingFixedMinWidth}px`),e.style.setProperty("--tab-sizing-fixed-max-width",`${n.tabSizingFixedMaxWidth}px`),t.add(F(e,Q.MOUSE_ENTER,()=>{this.isMouseOverTabs=!0})),t.add(F(e,Q.MOUSE_LEAVE,()=>{this.isMouseOverTabs=!1,this.updateTabsFixedWidth(!1)}))):i&&(e.style.removeProperty("--tab-sizing-fixed-min-width"),e.style.removeProperty("--tab-sizing-fixed-max-width"),this.updateTabsFixedWidth(!1))}updateTabsFixedWidth(i){this.forEachTab((e,t,n)=>{if(i){const{width:s}=n.getBoundingClientRect();n.style.setProperty("--tab-sizing-current-width",`${s}px`)}else n.style.removeProperty("--tab-sizing-current-width")})}getTabsScrollbarSizing(){return this.groupsView.partOptions.titleScrollbarSizing!=="large"?$r.SCROLLBAR_SIZES.default:$r.SCROLLBAR_SIZES.large}registerTabsContainerListeners(i,e){this._register(F(i,Q.SCROLL,()=>{i.classList.contains("scroll")&&e.setScrollPosition({scrollLeft:i.scrollLeft})}));for(const o of[wt.Tap,Q.DBLCLICK])this._register(F(i,o,r=>{if(o===Q.DBLCLICK){if(r.target!==i)return}else if(r.tapCount!==2||r.initialTarget!==i)return;Fe.stop(r),this.editorService.openEditor({resource:void 0,options:{pinned:!0,index:this.groupView.count,override:OP.id}},this.groupView.id)}));this._register(F(i,Q.MOUSE_DOWN,o=>{o.button===1&&o.preventDefault()})),Gi&&this._register(F(i,Q.MOUSE_UP,o=>{o.button===1&&o.preventDefault()}));let t,n=!1;this._register(new Rb(i,{onDragStart:es(o=>{n=this.onGroupDragStart(o,i)},"onDragStart"),onDrag:es(o=>{t=o},"onDrag"),onDragEnter:es(o=>{if(i.classList.add("scroll"),o.target===i){if(!this.isSupportedDropTransfer(o)){o.dataTransfer&&(o.dataTransfer.dropEffect="none");return}this.editorTransfer.hasData(Eh.prototype)||o.dataTransfer&&(o.dataTransfer.dropEffect="copy"),this.updateDropFeedback(i,!0,o)}},"onDragEnter"),onDragLeave:es(o=>{this.updateDropFeedback(i,!1,o),i.classList.remove("scroll")},"onDragLeave"),onDragEnd:es(o=>{this.updateDropFeedback(i,!1,o),i.classList.remove("scroll"),this.onGroupDragEnd(o,t,i,n)},"onDragEnd"),onDrop:es(o=>{if(this.updateDropFeedback(i,!1,o),i.classList.remove("scroll"),o.target===i){const r=this.groupTransfer.hasData(tg.prototype);this.onDrop(o,r?this.groupView.count:this.tabsModel.count,i)}},"onDrop")})),this._register(F(i,Q.MOUSE_WHEEL,o=>{const r=this.groupView.activeEditor;if(!r||this.groupView.count<2)return;if(this.groupsView.partOptions.scrollToSwitchTabs===!0){if(o.shiftKey)return}else if(!o.shiftKey)return;const a=Date.now();if(a-this.lastMouseWheelEventTime<$r.MOUSE_WHEEL_EVENT_THRESHOLD-2*(Math.abs(o.deltaX)+Math.abs(o.deltaY)))return;this.lastMouseWheelEventTime=a;let l;if(o.deltaX+o.deltaY<-$r.MOUSE_WHEEL_DISTANCE_THRESHOLD)l=-1;else if(o.deltaX+o.deltaY>$r.MOUSE_WHEEL_DISTANCE_THRESHOLD)l=1;else return;const c=this.groupView.getEditorByIndex(this.groupView.getIndexOfEditor(r)+l);c&&(this.groupView.openEditor(c),Fe.stop(o,!0))}));const s=es(o=>{Fe.stop(o);let r=i;gg(o)&&(r=new $n(ve(this.parent),o)),this.contextMenuService.showContextMenu({getAnchor:es(()=>r,"getAnchor"),menuId:N.EditorTabsBarContext,contextKeyService:this.contextKeyService,menuActionOptions:{shouldForwardArgs:!0},getActionsContext:es(()=>({groupId:this.groupView.id}),"getActionsContext"),getKeyBinding:es(a=>this.getKeybinding(a),"getKeyBinding"),onHide:es(()=>this.groupView.focus(),"onHide")})},"showContextMenu");this._register(F(i,wt.Contextmenu,o=>s(o))),this._register(F(i,Q.CONTEXT_MENU,o=>s(o)))}doHandleDecorationsChange(){this.layout(this.dimensions)}updateEditorActionsToolbar(){super.updateEditorActionsToolbar(),this.layout(this.dimensions)}openEditor(i,e){const t=this.handleOpenedEditors();return e?.focusTabControl&&this.withTab(i,(n,s,o)=>o.focus()),t}openEditors(i){return this.handleOpenedEditors()}handleOpenedEditors(){this.updateTabsControlVisibility();const[i,e]=Rd(this.tabsContainer,this.tabsScrollbar);for(let r=i.children.length;r<this.tabsModel.count;r++)i.appendChild(this.createTab(r,i,e));const t=this.didActiveEditorChange(),n=this.activeTabLabel,s=this.tabLabels.length;this.computeTabLabels();let o=!1;return t||s!==this.tabLabels.length||!this.equalsEditorInputLabel(n,this.activeTabLabel)?(this.redraw({forceRevealActiveTab:!0}),o=!0):this.layout(this.dimensions,{forceRevealActiveTab:!0}),o}didActiveEditorChange(){return!!(!this.activeTabLabel?.editor&&this.tabsModel.activeEditor||this.activeTabLabel?.editor&&!this.tabsModel.activeEditor||!this.activeTabLabel?.editor||!this.tabsModel.isActive(this.activeTabLabel.editor))}equalsEditorInputLabel(i,e){return i===e?!0:!i||!e?!1:i.name===e.name&&i.description===e.description&&i.forceDescription===e.forceDescription&&i.title===e.title&&i.ariaLabel===e.ariaLabel}beforeCloseEditor(i){if(this.isMouseOverTabs&&this.groupsView.partOptions.tabSizing==="fixed"){const e=this.tabsModel.isLast(i);this.updateTabsFixedWidth(!e)}}closeEditor(i){this.handleClosedEditors()}closeEditors(i){this.handleClosedEditors()}handleClosedEditors(){if(this.tabsModel.count){const i=pt(this.tabsContainer);for(;i.children.length>this.tabsModel.count;)i.lastChild?.remove(),ii(this.tabDisposables.pop());this.computeTabLabels(),this.redraw({forceRevealActiveTab:!0})}else this.tabsContainer&&Mn(this.tabsContainer),this.tabDisposables=ii(this.tabDisposables),this.tabResourceLabels.clear(),this.tabLabels=[],this.activeTabLabel=void 0,this.tabActionBars=[],this.clearEditorActionsToolbar(),this.updateTabsControlVisibility()}moveEditor(i,e,t){const n=this.tabLabels[e];this.tabLabels.splice(e,1),this.tabLabels.splice(t,0,n),this.forEachTab((s,o,r,a,l,c)=>{this.redrawTab(s,o,r,a,l,c)},Math.min(e,t),Math.max(e,t)),this.layout(this.dimensions,{forceRevealActiveTab:!0})}pinEditor(i){this.withTab(i,(e,t,n,s,o)=>this.redrawTabLabel(e,t,n,s,o))}stickEditor(i){this.doHandleStickyEditorChange(i)}unstickEditor(i){this.doHandleStickyEditorChange(i)}doHandleStickyEditorChange(i){this.withTab(i,(e,t,n,s,o,r)=>this.redrawTab(e,t,n,s,o,r)),this.forEachTab((e,t,n,s,o)=>{this.redrawTabBorders(t,n)}),this.layout(this.dimensions,{forceRevealActiveTab:!0})}setActive(i){this.forEachTab((e,t,n,s,o,r)=>{this.redrawTabSelectedActiveAndDirty(i,e,n,r)}),this.updateEditorActionsToolbar(),this.layout(this.dimensions,{forceRevealActiveTab:!0})}updateEditorSelections(){this.forEachTab((i,e,t,n,s,o)=>{this.redrawTabSelectedActiveAndDirty(this.groupsView.activeGroup===this.groupView,i,t,o)})}updateEditorLabelScheduler=this._register(new xn(()=>this.doUpdateEditorLabels(),0));updateEditorLabel(i){this.updateEditorLabelScheduler.schedule()}doUpdateEditorLabels(){this.computeTabLabels(),this.forEachTab((i,e,t,n,s)=>{this.redrawTabLabel(i,e,t,n,s)}),this.layout(this.dimensions)}updateEditorDirty(i){this.withTab(i,(e,t,n,s,o,r)=>this.redrawTabSelectedActiveAndDirty(this.groupsView.activeGroup===this.groupView,e,n,r))}updateOptions(i,e){super.updateOptions(i,e),i.labelFormat!==e.labelFormat&&this.computeTabLabels(),i.titleScrollbarSizing!==e.titleScrollbarSizing&&this.updateTabsScrollbarSizing(),i.alwaysShowEditorActions!==e.alwaysShowEditorActions&&this.updateEditorActionsToolbar(),(i.tabSizingFixedMinWidth!==e.tabSizingFixedMinWidth||i.tabSizingFixedMaxWidth!==e.tabSizingFixedMaxWidth||i.tabSizing!==e.tabSizing)&&this.updateTabSizing(!0),(i.labelFormat!==e.labelFormat||i.tabActionLocation!==e.tabActionLocation||i.tabActionCloseVisibility!==e.tabActionCloseVisibility||i.tabActionUnpinVisibility!==e.tabActionUnpinVisibility||i.tabSizing!==e.tabSizing||i.pinnedTabSizing!==e.pinnedTabSizing||i.showIcons!==e.showIcons||i.hasIcons!==e.hasIcons||i.highlightModifiedTabs!==e.highlightModifiedTabs||i.wrapTabs!==e.wrapTabs||!lo(i.decorations,e.decorations))&&this.redraw()}updateStyles(){this.redraw()}forEachTab(i,e,t){this.tabsModel.getEditors(mn.SEQUENTIAL).forEach((n,s)=>{typeof e=="number"&&e>s||typeof t=="number"&&t<s||this.doWithTab(s,n,i)})}withTab(i,e){this.doWithTab(this.tabsModel.indexOf(i),i,e)}doWithTab(i,e,t){const s=pt(this.tabsContainer).children[i],o=this.tabResourceLabels.get(i),r=this.tabLabels[i],a=this.tabActionBars[i];s&&o&&r&&t(e,i,s,o,r,a)}createTab(i,e,t){const n=document.createElement("div");n.draggable=!0,n.setAttribute("role","tab"),n.classList.add("tab"),this._register(Gn.addTarget(n));const s=document.createElement("div");s.classList.add("tab-border-top-container"),n.appendChild(s);const o=this.tabResourceLabels.create(n,{hoverDelegate:this.getHoverDelegate()}),r=document.createElement("div");r.classList.add("tab-actions"),n.appendChild(r);const a=this,l=new O9({groupId:this.groupView.id,get editorIndex(){return a.toEditorIndex(i)}}),c=new td(r,{ariaLabel:g("ariaLabelTabActions","Tab actions"),actionRunner:l}),d=c.onWillRun(m=>{m.action.id===this.closeEditorAction.id&&this.blockRevealActiveTabOnce()}),h=Ia(c,d,ye(CN(this.tabActionBars,c))),u=document.createElement("div");u.classList.add("tab-fade-hider"),n.appendChild(u);const f=document.createElement("div");f.classList.add("tab-border-bottom-container"),n.appendChild(f);const p=this.registerTabListeners(n,i,e,t);return this.tabDisposables.push(Ia(p,h,l,o)),n}toEditorIndex(i){const e=pt(this.tabsModel.getEditorByIndex(i));return this.groupView.getIndexOfEditor(e)}lastSingleSelectSelectedEditor;registerTabListeners(i,e,t,n){const s=new te,o=es(async(c,d)=>{if(i.blur(),gg(c)&&(c.button!==0||Ue&&c.ctrlKey)){c.button===1&&c.preventDefault();return}if(this.originatesFromTabActionBar(c))return;const h=this.tabsModel.getEditorByIndex(e);if(h)if(c.shiftKey){let u;if(this.lastSingleSelectSelectedEditor&&this.tabsModel.isSelected(this.lastSingleSelectSelectedEditor))u=this.lastSingleSelectSelectedEditor;else{const f=pt(this.groupView.activeEditor);this.lastSingleSelectSelectedEditor=f,u=f}await this.selectEditorsBetween(h,u)}else if(c.ctrlKey&&!Ue||c.metaKey&&Ue)this.tabsModel.isSelected(h)?await this.unselectEditor(h):(await this.selectEditor(h),this.lastSingleSelectSelectedEditor=h);else{const u=this.tabsModel.isSelected(h)?this.groupView.selectedEditors.filter(f=>!f.matches(h)):[];await this.groupView.openEditor(h,{preserveFocus:d,activation:e6.ACTIVATE},{inactiveSelection:u,focusTabControl:!0})}},"handleClickOrTouch"),r=es(c=>{Fe.stop(c);const d=this.tabsModel.getEditorByIndex(e);d&&this.onTabContextMenu(d,c,i)},"showContextMenu");s.add(F(i,Q.MOUSE_DOWN,c=>o(c,!1))),s.add(F(i,wt.Tap,c=>o(c,!0))),s.add(F(i,wt.Change,c=>{n.setScrollPosition({scrollLeft:n.getScrollPosition().scrollLeft-c.translationX})})),s.add(F(i,Q.MOUSE_UP,async c=>{if(Fe.stop(c),i.blur(),gg(c)&&(c.button!==0||Ue&&c.ctrlKey)||this.originatesFromTabActionBar(c))return;!(c.ctrlKey&&!Ue||c.metaKey&&Ue)&&!c.shiftKey&&this.groupView.selectedEditors.length>1&&await this.unselectAllEditors()})),s.add(F(i,Q.AUXCLICK,c=>{if(c.button===1){Fe.stop(c,!0);const d=this.tabsModel.getEditorByIndex(e);if(d){if(j6(this.tabsModel,d,K6.MOUSE,this.groupsView.partOptions))return;this.blockRevealActiveTabOnce(),this.closeEditorAction.run({groupId:this.groupView.id,editorIndex:this.groupView.getIndexOfEditor(d)})}}})),s.add(F(i,Q.KEY_DOWN,c=>{const d=new Pt(c);d.shiftKey&&d.keyCode===E.F10&&r(c)})),s.add(F(i,wt.Contextmenu,c=>{r(c)})),s.add(F(i,Q.KEY_UP,c=>{const d=new Pt(c);let h=!1;if(d.equals(E.Enter)||d.equals(E.Space)){h=!0;const u=this.tabsModel.getEditorByIndex(e);u&&this.groupView.openEditor(u)}else if([E.LeftArrow,E.RightArrow,E.UpArrow,E.DownArrow,E.Home,E.End].some(u=>d.equals(u))){let u=this.toEditorIndex(e);d.equals(E.LeftArrow)||d.equals(E.UpArrow)?u=u-1:d.equals(E.RightArrow)||d.equals(E.DownArrow)?u=u+1:d.equals(E.Home)?u=0:u=this.groupView.count-1;const f=this.groupView.getEditorByIndex(u);f&&(h=!0,this.groupView.openEditor(f,{preserveFocus:!0},{focusTabControl:!0}))}h&&Fe.stop(c,!0),n.setScrollPosition({scrollLeft:t.scrollLeft})}));for(const c of[wt.Tap,Q.DBLCLICK])s.add(F(i,c,d=>{if(c===Q.DBLCLICK)Fe.stop(d);else if(d.tapCount!==2)return;const h=this.tabsModel.getEditorByIndex(e);if(h&&this.tabsModel.isPinned(h))switch(this.groupsView.partOptions.doubleClickTabToToggleEditorGroupSizes){case"maximize":this.groupsView.toggleMaximizeGroup(this.groupView);break;case"expand":this.groupsView.toggleExpandGroup(this.groupView);break}else this.groupView.pinEditor(h)}));s.add(F(i,Q.CONTEXT_MENU,c=>{Fe.stop(c,!0);const d=this.tabsModel.getEditorByIndex(e);d&&this.onTabContextMenu(d,c,i)},!0));let a,l=!1;return s.add(new Rb(i,{onDragStart:es(c=>{const d=this.tabsModel.getEditorByIndex(e);if(!d)return;l=this.isNewWindowOperation(c);const h=this.groupView.selectedEditors;if(this.editorTransfer.setData(h.map(u=>new Eh({editor:u,groupId:this.groupView.id})),Eh.prototype),c.dataTransfer)if(c.dataTransfer.effectAllowed="copyMove",h.length>1){const u=`${d.getName()} + ${h.length-1}`;_3(c,u,"monaco-editor-group-drag-image",this.getColor(Wl),this.getColor(Up))}else c.dataTransfer.setDragImage(i,0,0);this.doFillResourceDataTransfers(h,c,l),xo(ve(this.parent),()=>this.updateDropFeedback(i,!1,c,e))},"onDragStart"),onDrag:es(c=>{a=c},"onDrag"),onDragEnter:es(c=>{if(!this.isSupportedDropTransfer(c)){c.dataTransfer&&(c.dataTransfer.dropEffect="none");return}this.editorTransfer.hasData(Eh.prototype)||c.dataTransfer&&(c.dataTransfer.dropEffect="copy"),this.updateDropFeedback(i,!0,c,e)},"onDragEnter"),onDragOver:es((c,d)=>{if(d>=$r.DRAG_OVER_OPEN_TAB_THRESHOLD){const h=this.tabsModel.getEditorByIndex(e);h&&this.tabsModel.activeEditor!==h&&this.groupView.openEditor(h,{preserveFocus:!0})}this.updateDropFeedback(i,!0,c,e)},"onDragOver"),onDragEnd:es(async c=>{this.updateDropFeedback(i,!1,c,e);const d=this.editorTransfer.getData(Eh.prototype);if(this.editorTransfer.clearData(Eh.prototype),!l||M7()||!d||d.length===0)return;const h=await this.maybeCreateAuxiliaryEditorPartAt(c,i);if(!h)return;const u=h.activeGroup,f=d.map(p=>({editor:p.identifier.editor}));this.isMoveOperation(a??c,u.id,d[0].identifier.editor)?this.groupView.moveEditors(f,u):this.groupView.copyEditors(f,u),u.focus()},"onDragEnd"),onDrop:es(c=>{this.updateDropFeedback(i,!1,c,e);let d=e;this.getTabDragOverLocation(c,i)==="right"&&d++,this.onDrop(c,d,t)},"onDrop")})),s}isSupportedDropTransfer(i){if(this.groupTransfer.hasData(tg.prototype)){const e=this.groupTransfer.getData(tg.prototype);return!(Array.isArray(e)&&e.length>0&&e[0].identifier===this.groupView.id)}return!!(this.editorTransfer.hasData(Eh.prototype)||i.dataTransfer&&i.dataTransfer.types.length>0)}updateDropFeedback(i,e,t,n){const s=typeof n=="number";let o;e?s?o=this.computeDropTarget(t,n,i):o={leftElement:i.lastElementChild,rightElement:void 0}:o=void 0,this.updateDropTarget(o)}dropTarget;updateDropTarget(i){const e=this.dropTarget;if(e===i||e&&i&&e.leftElement===i.leftElement&&e.rightElement===i.rightElement)return;const t="drop-target-left",n="drop-target-right";e&&(e.leftElement?.classList.remove(t),e.rightElement?.classList.remove(n)),i&&(i.leftElement?.classList.add(t),i.rightElement?.classList.add(n)),this.dropTarget=i}getTabDragOverLocation(i,e){const t=e.getBoundingClientRect();return i.clientX-t.left<=t.width/2?"left":"right"}computeDropTarget(i,e,t){const n=this.getTabDragOverLocation(i,t)==="left",s=e===this.tabsModel.count-1;if(n&&e===0)return{leftElement:void 0,rightElement:t};if(!n&&s)return{leftElement:t,rightElement:void 0};const r=n?t.previousElementSibling:t,a=n?t:t.nextElementSibling;return{leftElement:r,rightElement:a}}async selectEditor(i){this.groupView.isActive(i)||await this.groupView.setSelection(i,this.groupView.selectedEditors)}async selectEditorsBetween(i,e){const t=this.groupView.getIndexOfEditor(i);if(t===-1)throw new Et;const n=this.groupView.getIndexOfEditor(e);if(n===-1)throw new Et;let s=this.groupView.selectedEditors,o=n;for(;o>=0&&o<=this.groupView.count-1;){o=n<t?o-1:o+1;const d=this.groupView.getEditorByIndex(o);if(!d||!this.groupView.isSelected(d))break;s=s.filter(h=>!h.matches(d))}const r=n<t?n:t,a=n<t?t:n,l=this.groupView.getEditors(mn.SEQUENTIAL).slice(r,a+1);for(const d of l)this.groupView.isSelected(d)||s.push(d);const c=s.filter(d=>!d.matches(i));await this.groupView.setSelection(i,c)}async unselectEditor(i){const e=this.groupView.isActive(i);if(e&&this.groupView.selectedEditors.length===1)return;let t=pt(this.groupView.activeEditor);if(e){const s=this.groupView.getEditors(mn.MOST_RECENTLY_ACTIVE);for(let o=1;o<s.length;o++){const r=s[o];if(this.groupView.isSelected(r)){t=r;break}}}const n=this.groupView.selectedEditors.filter(s=>!s.matches(i)&&!s.matches(t));await this.groupView.setSelection(t,n)}async unselectAllEditors(){if(this.groupView.selectedEditors.length>1){const i=pt(this.groupView.activeEditor);await this.groupView.setSelection(i,[])}}computeTabLabels(){const{labelFormat:i}=this.groupsView.partOptions,{verbosity:e,shortenDuplicates:t}=this.getLabelConfigFlags(i),n=[];let s=-1;this.tabsModel.getEditors(mn.SEQUENTIAL).forEach((o,r)=>{n.push({editor:o,name:o.getName(),description:o.getDescription(e),forceDescription:o.hasCapability(Wo.ForceDescription),title:o.getTitle(Ii.LONG),ariaLabel:B2(o,r,this.groupView,this.editorPartsView.count)}),o===this.tabsModel.activeEditor&&(s=r)}),t&&this.shortenTabLabels(n),this.tabLabels=n,this.activeTabLabel=n[s]}shortenTabLabels(i){const e=new Map;for(const t of i)typeof t.description=="string"?q_(e,t.name,[]).push(t):t.description="";for(const[,t]of e){if(t.length===1&&!t[0].forceDescription){t[0].description="";continue}const n=new Map;for(const a of t)q_(n,a.description,[]).push(a);let s=!1;for(const[,a]of n)if(!s&&a.length>1){const[l,...c]=a.map(({editor:d})=>d.getDescription(Ii.LONG));s=c.some(d=>d!==l)}if(s){n.clear();for(const a of t)a.description=a.editor.getDescription(Ii.LONG),q_(n,a.description,[]).push(a)}const o=[];for(const[a]of n)o.push(a);if(o.length===1){for(const a of n.get(o[0])||[])a.forceDescription||(a.description="");continue}const r=L6(o,this.path.sep);o.forEach((a,l)=>{for(const c of n.get(a)||[])c.description=r[l]})}}getLabelConfigFlags(i){switch(i){case"short":return{verbosity:Ii.SHORT,shortenDuplicates:!1};case"medium":return{verbosity:Ii.MEDIUM,shortenDuplicates:!1};case"long":return{verbosity:Ii.LONG,shortenDuplicates:!1};default:return{verbosity:Ii.MEDIUM,shortenDuplicates:!0}}}redraw(i){if(this.tabsAndActionsContainer){let e=this.getColor(hme);!e&&Tg(this.theme.type)&&(e=this.getColor(oB)||this.getColor(Re)),e?(this.tabsAndActionsContainer.classList.add("tabs-border-bottom"),this.tabsAndActionsContainer.style.setProperty("--tabs-border-bottom-color",e.toString())):(this.tabsAndActionsContainer.classList.remove("tabs-border-bottom"),this.tabsAndActionsContainer.style.removeProperty("--tabs-border-bottom-color"))}this.forEachTab((e,t,n,s,o,r)=>{this.redrawTab(e,t,n,s,o,r)}),this.updateEditorActionsToolbar(),this.layout(this.dimensions,i)}redrawTab(i,e,t,n,s,o){const r=this.tabsModel.isSticky(e),a=this.groupsView.partOptions;this.redrawTabLabel(i,e,t,n,s);const l=r&&a.tabActionUnpinVisibility,c=!l&&a.tabActionCloseVisibility,d=l||c;let h;d?h=l?this.unpinEditorAction:this.closeEditorAction:h=r?this.unpinEditorAction:this.closeEditorAction,o.hasAction(h)||(o.isEmpty()||o.clear(),o.push(h,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(h)})),t.classList.toggle("pinned-action-off",r&&!l),t.classList.toggle("close-action-off",!l&&!c);for(const f of["left","right"])t.classList.toggle(`tab-actions-${f}`,d&&a.tabActionLocation===f);const u=r&&a.pinnedTabSizing==="shrink"?"shrink":a.tabSizing;for(const f of["fit","shrink","fixed"])t.classList.toggle(`sizing-${f}`,u===f);t.classList.toggle("has-icon",a.showIcons&&a.hasIcons),t.classList.toggle("sticky",r);for(const f of["normal","compact","shrink"])t.classList.toggle(`sticky-${f}`,r&&a.pinnedTabSizing===f);if(!a.wrapTabs&&r&&a.pinnedTabSizing!=="normal"){let f=0;switch(a.pinnedTabSizing){case"compact":f=$r.TAB_WIDTH.compact;break;case"shrink":f=$r.TAB_WIDTH.shrink;break}t.style.left=`${e*f}px`}else t.style.left="auto";this.redrawTabBorders(e,t),this.redrawTabSelectedActiveAndDirty(this.groupsView.activeGroup===this.groupView,i,t,o)}redrawTabLabel(i,e,t,n,s){const o=this.groupsView.partOptions;let r,a=!1,l=!!o.decorations?.badges;const c=!!o.decorations?.colors;let d;o.pinnedTabSizing==="compact"&&this.tabsModel.isSticky(e)?(r=o.showIcons&&o.hasIcons?"":s.name?.charAt(0).toUpperCase(),d="",a=!0,l=!1):(r=s.name,d=s.description||""),s.ariaLabel&&(t.setAttribute("aria-label",s.ariaLabel),t.setAttribute("aria-description","")),n.setResource({name:r,description:d,resource:Io.getOriginalUri(i,{supportSideBySide:Is.BOTH})},{title:this.getHoverTitle(i),extraClasses:To(["tab-label",l?"tab-label-has-badge":void 0].concat(i.getLabelExtraClasses())),italic:!this.tabsModel.isPinned(i),forceLabel:a,fileDecorations:{colors:c,badges:l},icon:i.getIcon(),hideIcon:o.showIcons===!1});const h=Io.getOriginalUri(i,{supportSideBySide:Is.PRIMARY});h?t.setAttribute("data-resource-name",b5(h)):t.removeAttribute("data-resource-name")}redrawTabSelectedActiveAndDirty(i,e,t,n){const s=this.tabsModel.isActive(e),o=this.doRedrawTabDirty(i,s,e,t);this.doRedrawTabActive(i,!o,e,t,n)}doRedrawTabActive(i,e,t,n,s){const o=this.tabsModel.isActive(t),r=this.tabsModel.isSelected(t);if(n.classList.toggle("active",o),n.classList.toggle("selected",r),n.setAttribute("aria-selected",o?"true":"false"),n.tabIndex=o?0:-1,s.setFocusable(o),o){const l=this.getColor(i?rB:sme);n.classList.toggle("tab-border-bottom",!!l),n.style.setProperty("--tab-border-bottom-color",l??"")}let a=null;e&&(o&&(a=this.getColor(i?jA:ome)),a===null&&r&&(a=this.getColor(rme))),n.classList.toggle("tab-border-top",!!a),n.style.setProperty("--tab-border-top-color",a??"")}doRedrawTabDirty(i,e,t,n){let s=!1;if(t.isDirty()&&!t.isSaving())if(n.classList.add("dirty"),this.groupsView.partOptions.highlightModifiedTabs){let o;i&&e?o=this.getColor(Q0):i&&!e?o=this.getColor(lB):!i&&e?o=this.getColor(lme):o=this.getColor(cme),o&&(s=!0,n.classList.add("dirty-border-top"),n.style.setProperty("--tab-dirty-border-top-color",o))}else n.classList.remove("dirty-border-top"),n.style.removeProperty("--tab-dirty-border-top-color");else n.classList.remove("dirty","dirty-border-top"),n.style.removeProperty("--tab-dirty-border-top-color");return s}redrawTabBorders(i,e){const n=this.tabsModel.isSticky(i)&&this.tabsModel.stickyCount===i+1,s=this.tabsModel.stickyCount!==this.tabsModel.count,o=(n&&s?this.getColor(nme):void 0)||this.getColor(oB)||this.getColor(Re);e.style.borderRight=o?`1px solid ${o}`:"",e.style.outlineColor=this.getColor(Vi)||""}prepareEditorActions(i){return this.groupsView.activeGroup===this.groupView?i:{primary:this.groupsView.partOptions.alwaysShowEditorActions?i.primary:i.primary.filter(t=>t.id===XR),secondary:i.secondary}}getHeight(){return this.dimensions.used?this.dimensions.used.height:this.computeHeight()}computeHeight(){let i;return this.visible?this.groupsView.partOptions.wrapTabs&&this.tabsAndActionsContainer?.classList.contains("wrapping")?i=this.tabsAndActionsContainer.offsetHeight:i=this.tabHeight:i=0,i}layout(i,e){if(Object.assign(this.dimensions,i),this.visible){if(!this.layoutScheduler.value){const t=xo(ve(this.parent),()=>{this.doLayout(this.dimensions,this.layoutScheduler.value?.options),this.layoutScheduler.clear()});this.layoutScheduler.value={options:e,dispose:es(()=>t.dispose(),"dispose")}}e?.forceRevealActiveTab&&(this.layoutScheduler.value.options={...this.layoutScheduler.value.options,forceRevealActiveTab:!0})}return this.dimensions.used||(this.dimensions.used=new Lt(i.container.width,this.computeHeight())),this.dimensions.used}doLayout(i,e){i.container!==Lt.None&&i.available!==Lt.None&&this.doLayoutTabs(i,e);const t=this.dimensions.used,n=this.dimensions.used=new Lt(i.container.width,this.computeHeight());t&&t.height!==n.height&&this.groupView.relayout()}doLayoutTabs(i,e){this.doLayoutTabsWrapping(i)||this.doLayoutTabsNonWrapping(e)}doLayoutTabsWrapping(i){const[e,t,n,s]=Rd(this.tabsAndActionsContainer,this.tabsContainer,this.editorActionsToolbarContainer,this.tabsScrollbar),o=e.classList.contains("wrapping");let r=o;function a(l){r=l,e.classList.toggle("wrapping",r),t.style.setProperty("--last-tab-margin-right",r?`${n.offsetWidth}px`:"0");for(const c of t.children)c.classList.remove("last-in-row")}if(es(a,"updateTabsWrapping"),this.groupsView.partOptions.wrapTabs){const l=t.offsetWidth,c=t.scrollWidth,d=es(()=>{const h=this.getLastTab();return h?!(h.offsetWidth+n.offsetWidth-i.available.width>1):!0},"lastTabFitsWrapped");(r||c>l&&d())&&a(!0),r&&(t.offsetHeight>i.available.height||c===l&&t.offsetHeight===this.tabHeight||!d())&&a(!1)}else o&&a(!1);if(r&&!o){const l=t.offsetWidth;s.setScrollDimensions({width:l,scrollWidth:l})}if(r){const l=new Map;let c,d;for(const h of t.children){const u=h,f=u.offsetTop;f!==c&&(c=f,d&&l.set(d,!0)),d=u,l.set(u,!1)}d&&l.set(d,!0);for(const[h,u]of l)h.classList.toggle("last-in-row",u)}return r}doLayoutTabsNonWrapping(i){const[e,t]=Rd(this.tabsContainer,this.tabsScrollbar),n=e.offsetWidth,s=e.scrollWidth;let o=0;if(this.tabsModel.stickyCount>0){let b=0;switch(this.groupsView.partOptions.pinnedTabSizing){case"compact":b=$r.TAB_WIDTH.compact;break;case"shrink":b=$r.TAB_WIDTH.shrink;break}o=this.tabsModel.stickyCount*b}const r=this.tabsModel.activeEditor?this.getTabAndIndex(this.tabsModel.activeEditor):void 0,[a,l]=r??[void 0,void 0];let c=this.groupsView.partOptions.pinnedTabSizing!=="normal"&&typeof l=="number"&&this.tabsModel.isSticky(l),d=n-o;this.tabsModel.stickyCount>0&&d<$r.TAB_WIDTH.fit?(e.classList.add("disable-sticky-tabs"),d=n,o=0,c=!1):e.classList.remove("disable-sticky-tabs");let h,u;!this.blockRevealActiveTab&&a&&(h=a.offsetLeft,u=a.offsetWidth);const{width:f,scrollWidth:p}=t.getScrollDimensions();t.setScrollDimensions({width:n,scrollWidth:s});const m=f!==n||p!==s;if(this.blockRevealActiveTab||typeof h!="number"||typeof u!="number"||c||!m&&!i?.forceRevealActiveTab){this.blockRevealActiveTab=!1;return}const _=t.getScrollPosition().scrollLeft,w=u<=d,v=h-o;w&&_+d<v+u?t.setScrollPosition({scrollLeft:_+(v+u-(_+d))}):(_>v||!w)&&t.setScrollPosition({scrollLeft:v})}updateTabsControlVisibility(){pt(this.tabsAndActionsContainer).classList.toggle("empty",!this.visible),!this.visible&&this.dimensions&&(this.dimensions.used=void 0)}get visible(){return this.tabsModel.count>0}getTabAndIndex(i){const e=this.tabsModel.indexOf(i),t=this.getTabAtIndex(e);if(t)return[t,e]}getTabAtIndex(i){if(i>=0)return pt(this.tabsContainer).children[i]}getLastTab(){return this.getTabAtIndex(this.tabsModel.count-1)}blockRevealActiveTabOnce(){this.blockRevealActiveTab=!0}originatesFromTabActionBar(i){let e;return gg(i)?e=i.target||i.srcElement:e=i.initialTarget,!!$5(e,"action-item","tab")}async onDrop(i,e,t){Fe.stop(i,!0),this.updateDropFeedback(t,!1,i,e),t.classList.remove("scroll");let n=this.tabsModel instanceof qce?e+this.groupView.stickyCount:e;const s={sticky:this.tabsModel instanceof jce&&this.tabsModel.stickyCount===n,index:n};if(this.groupTransfer.hasData(tg.prototype)){const o=this.groupTransfer.getData(tg.prototype);if(Array.isArray(o)&&o.length>0){const r=this.editorPartsView.getGroup(o[0].identifier);if(r){const a={index:n};this.isMoveOperation(i,r.id)||(a.mode=JC.COPY_EDITORS),this.groupsView.mergeGroup(r,this.groupView,a)}this.groupView.focus(),this.groupTransfer.clearData(tg.prototype)}}else if(this.editorTransfer.hasData(Eh.prototype)){const o=this.editorTransfer.getData(Eh.prototype);if(Array.isArray(o)&&o.length>0){const r=this.editorPartsView.getGroup(o[0].identifier.groupId);if(r)for(const a of o){const l=a.identifier.editor;if(r.id!==a.identifier.groupId)continue;const c=r.getIndexOfEditor(l);r===this.groupView&&c<n&&n--,this.isMoveOperation(i,a.identifier.groupId,l)?r.moveEditor(l,this.groupView,{...s,index:n}):r.copyEditor(l,this.groupView,{...s,index:n}),n++}}this.groupView.focus(),this.editorTransfer.clearData(Eh.prototype)}else if(this.treeItemsTransfer.hasData(LM.prototype)){const o=this.treeItemsTransfer.getData(LM.prototype);if(Array.isArray(o)&&o.length>0){const r=[];for(const a of o){const l=await this.treeViewsDragAndDropService.removeDragOperationTransfer(a.identifier);if(l){const c=await Dne(l);r.push(...c.map(d=>({...d,options:{...d.options,pinned:!0,index:n}})))}}this.editorService.openEditors(r,this.groupView,{validateTrust:!0})}this.treeItemsTransfer.clearData(LM.prototype)}else this.instantiationService.createInstance(TV,{allowWorkspaceOpen:!1}).handleDrop(i,ve(this.parent),()=>this.groupView,()=>this.groupView.focus(),s)}dispose(){super.dispose(),this.tabDisposables=ii(this.tabDisposables)}};$r=uUe([mc(5,Hi),mc(6,He),mc(7,Ye),mc(8,ni),mc(9,fs),mc(10,ca),mc(11,$t),mc(12,nt),mc(13,zle),mc(14,Gce),mc(15,aR),mc(16,hr)],$r);jc((i,e)=>{const t=i.getColor(oB);t&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container > .title > .tabs-and-actions-container.wrapping .tabs-container > .tab {
				border-bottom: 1px solid ${t};
			}
		`);const n=i.getColor(Vi);n&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active,
			.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active:hover  {
				outline: 1px solid;
				outline-offset: -5px;
			}

			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.selected:not(.active):not(:hover)  {
				outline: 1px dotted;
				outline-offset: -5px;
			}

			.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active:focus {
				outline-style: dashed;
			}

			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active {
				outline: 1px dotted;
				outline-offset: -5px;
			}

			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover  {
				outline: 1px dashed;
				outline-offset: -5px;
			}

			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active > .tab-actions .action-label,
			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active:hover > .tab-actions .action-label,
			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.dirty > .tab-actions .action-label,
			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.sticky > .tab-actions .action-label,
			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover > .tab-actions .action-label {
				opacity: 1 !important;
			}
		`);const s=i.getColor(Re);s&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container > .title .editor-actions {
				outline: 1px solid ${s}
			}
		`);const o=i.getColor(nB);o&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:not(.selected):hover {
				background-color: ${o} !important;
			}
		`);const r=i.getColor(tme);r&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:not(.selected):hover  {
				background-color: ${r} !important;
			}
		`);const a=i.getColor(sB);a&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:not(.selected):hover  {
				color: ${a} !important;
			}
		`);const l=i.getColor(ime);l&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:not(.selected):hover  {
				color: ${l} !important;
			}
		`);const c=i.getColor(aB);c&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:hover > .tab-border-bottom-container {
				display: block;
				position: absolute;
				left: 0;
				pointer-events: none;
				width: 100%;
				z-index: 10;
				bottom: 0;
				height: 1px;
				background-color: ${c};
			}
		`);const d=i.getColor(ame);if(d&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover > .tab-border-bottom-container  {
				display: block;
				position: absolute;
				left: 0;
				pointer-events: none;
				width: 100%;
				z-index: 10;
				bottom: 0;
				height: 1px;
				background-color: ${d};
			}
		`),!Tg(i.type)&&!Vc&&!n){const h=GN(i),u=i.getColor(Zd),f=i.getColor(dme),p=i.getColor(KN);let m;f&&u&&(m=f.flatten(u,u,h));let _;f&&u&&p&&u&&(_=f.flatten(u,p,u,h));const w=es((T,I,R=!1)=>`
			.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${R?".active":""} > .title .tabs-container > .tab.sizing-shrink:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after,
			.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${R?".active":""} > .title .tabs-container > .tab.sizing-fixed:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after {
				background: linear-gradient(to left, ${T}, transparent) !important;
			}

			.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${R?".active":""} > .title .tabs-container > .tab.sizing-shrink:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after,
			.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${R?".active":""} > .title .tabs-container > .tab.sizing-fixed:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after {
				background: linear-gradient(to left, ${I}, transparent) !important;
			}
		`,"makeTabHoverBackgroundRule");if(o&&m&&_){const T=o.flatten(m),I=o.flatten(_);e.addRule(w(T,I,!0))}if(r&&m&&_){const T=r.flatten(m),I=r.flatten(_);e.addRule(w(T,I))}if(p&&_){const T=p.flatten(_);e.addRule(`
				.monaco-workbench .part.editor > .content.dragged-over .editor-group-container.active > .title .tabs-container > .tab.sizing-shrink.dragged-over:not(.active):not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,
				.monaco-workbench .part.editor > .content.dragged-over .editor-group-container:not(.active) > .title .tabs-container > .tab.sizing-shrink.dragged-over:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,
				.monaco-workbench .part.editor > .content.dragged-over .editor-group-container.active > .title .tabs-container > .tab.sizing-fixed.dragged-over:not(.active):not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,
				.monaco-workbench .part.editor > .content.dragged-over .editor-group-container:not(.active) > .title .tabs-container > .tab.sizing-fixed.dragged-over:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {
					background: linear-gradient(to left, ${T}, transparent) !important;
				}
		`)}const v=es((T,I,R,G)=>`
				.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${R?".active":":not(.active)"} > .title .tabs-container > .tab.sizing-shrink${G?".active":""}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,
				.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${R?".active":":not(.active)"} > .title .tabs-container > .tab.sizing-fixed${G?".active":""}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {
					background: linear-gradient(to left, ${T}, transparent);
				}

				.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${R?".active":":not(.active)"} > .title .tabs-container > .tab.sizing-shrink${G?".active":""}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,
				.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${R?".active":":not(.active)"} > .title .tabs-container > .tab.sizing-fixed${G?".active":""}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {
					background: linear-gradient(to left, ${I}, transparent);
				}
		`,"makeTabBackgroundRule"),b=i.getColor(I5);if(b&&m&&_){const T=b.flatten(m),I=b.flatten(_);e.addRule(v(T,I,!0,!0))}const C=i.getColor(Qpe);if(C&&m&&_){const T=C.flatten(m),I=C.flatten(_);e.addRule(v(T,I,!1,!0))}const S=i.getColor(Mj);if(S&&m&&_){const T=S.flatten(m),I=S.flatten(_);e.addRule(v(T,I,!0,!1))}const D=i.getColor(Jpe);if(D&&m&&_){const T=D.flatten(m),I=D.flatten(_);e.addRule(v(T,I,!1,!1))}}});var gUe=Object.defineProperty,KI=(i,e)=>gUe(i,"name",{value:e,configurable:!0});class fUe extends nv{static{KI(this,"SingleEditorTabsControl")}titleContainer;editorLabel;activeLabel=Object.create(null);breadcrumbsControlFactory;get breadcrumbsControl(){return this.breadcrumbsControlFactory?.control}create(e){super.create(e);const t=this.titleContainer=e;t.draggable=!0,this.registerContainerListeners(t),this._register(Gn.addTarget(t));const n=document.createElement("div");n.classList.add("label-container"),t.appendChild(n),this.editorLabel=this._register(this.instantiationService.createInstance(yW,n,{hoverDelegate:this.getHoverDelegate()})).element,this._register(F(this.editorLabel.element,Q.CLICK,s=>this.onTitleLabelClick(s))),this.breadcrumbsControlFactory=this._register(this.instantiationService.createInstance(fN,n,this.groupView,{showFileIcons:!1,showSymbolIcons:!0,showDecorationColors:!1,widgetStyles:{...$3,breadcrumbsBackground:U.transparent.toString()},showPlaceholder:!1})),this._register(this.breadcrumbsControlFactory.onDidEnablementChange(()=>this.handleBreadcrumbsEnablementChange())),t.classList.toggle("breadcrumbs",!!this.breadcrumbsControl),this._register(ye(()=>t.classList.remove("breadcrumbs"))),this.createEditorActionsToolBar(t,["title-actions"])}registerContainerListeners(e){let t,n=!1;this._register(new Rb(e,{onDragStart:KI(s=>{n=this.onGroupDragStart(s,e)},"onDragStart"),onDrag:KI(s=>{t=s},"onDrag"),onDragEnd:KI(s=>{this.onGroupDragEnd(s,t,e,n)},"onDragEnd")})),this._register(F(e,Q.DBLCLICK,s=>this.onTitleDoubleClick(s))),this._register(F(e,Q.AUXCLICK,s=>this.onTitleAuxClick(s))),this._register(F(e,wt.Tap,s=>this.onTitleTap(s)));for(const s of[Q.CONTEXT_MENU,wt.Contextmenu])this._register(F(e,s,o=>{this.tabsModel.activeEditor&&this.onTabContextMenu(this.tabsModel.activeEditor,o,e)}))}onTitleLabelClick(e){Fe.stop(e,!1),setTimeout(()=>this.quickInputService.quickAccess.show())}onTitleDoubleClick(e){Fe.stop(e),this.groupView.pinEditor()}onTitleAuxClick(e){e.button===1&&this.tabsModel.activeEditor&&(Fe.stop(e,!0),j6(this.tabsModel,this.tabsModel.activeEditor,K6.MOUSE,this.groupsView.partOptions)||this.groupView.closeEditor(this.tabsModel.activeEditor))}onTitleTap(e){const t=e.initialTarget;!xs(t)||!this.editorLabel||!As(t,this.editorLabel.element)||setTimeout(()=>this.quickInputService.quickAccess.show(),50)}openEditor(e){return this.doHandleOpenEditor()}openEditors(e){return this.doHandleOpenEditor()}doHandleOpenEditor(){const e=this.ifActiveEditorChanged(()=>this.redraw());return e||this.ifActiveEditorPropertiesChanged(()=>this.redraw()),e}beforeCloseEditor(e){}closeEditor(e){this.ifActiveEditorChanged(()=>this.redraw())}closeEditors(e){this.ifActiveEditorChanged(()=>this.redraw())}moveEditor(e,t,n){this.ifActiveEditorChanged(()=>this.redraw())}pinEditor(e){this.ifEditorIsActive(e,()=>this.redraw())}stickEditor(e){}unstickEditor(e){}setActive(e){this.redraw()}updateEditorSelections(){}updateEditorLabel(e){this.ifEditorIsActive(e,()=>this.redraw())}updateEditorDirty(e){this.ifEditorIsActive(e,()=>{const t=pt(this.titleContainer);e.isDirty()&&!e.isSaving()?t.classList.add("dirty"):t.classList.remove("dirty")})}updateOptions(e,t){super.updateOptions(e,t),(e.labelFormat!==t.labelFormat||!lo(e.decorations,t.decorations))&&this.redraw()}updateStyles(){this.redraw()}handleBreadcrumbsEnablementChange(){pt(this.titleContainer).classList.toggle("breadcrumbs",!!this.breadcrumbsControl),this.redraw()}ifActiveEditorChanged(e){return!this.activeLabel.editor&&this.tabsModel.activeEditor||this.activeLabel.editor&&!this.tabsModel.activeEditor||!this.activeLabel.editor||!this.tabsModel.isActive(this.activeLabel.editor)?(e(),!0):!1}ifActiveEditorPropertiesChanged(e){!this.activeLabel.editor||!this.tabsModel.activeEditor||this.activeLabel.pinned!==this.tabsModel.isPinned(this.tabsModel.activeEditor)&&e()}ifEditorIsActive(e,t){this.tabsModel.isActive(e)&&t()}redraw(){const e=this.tabsModel.activeEditor??void 0,t=this.groupsView.partOptions,n=e?this.tabsModel.isPinned(e):!1,s=this.groupsView.activeGroup===this.groupView;this.activeLabel={editor:e,pinned:n},this.breadcrumbsControl&&(s?(this.breadcrumbsControl.update(),this.breadcrumbsControl.domNode.classList.toggle("preview",!n)):this.breadcrumbsControl.hide());const[o,r]=Rd(this.titleContainer,this.editorLabel);if(!e)o.classList.remove("dirty"),r.clear(),this.clearEditorActionsToolbar();else{this.updateEditorDirty(e);const{labelFormat:a}=this.groupsView.partOptions;let l;this.breadcrumbsControl&&!this.breadcrumbsControl.isHidden()||a==="default"&&!s?l="":l=e.getDescription(this.getVerbosity(a))||"",r.setResource({resource:Io.getOriginalUri(e,{supportSideBySide:Is.BOTH}),name:e.getName(),description:l},{title:this.getHoverTitle(e),italic:!n,extraClasses:["single-tab","title-label"].concat(e.getLabelExtraClasses()),fileDecorations:{colors:!!t.decorations?.colors,badges:!!t.decorations?.badges},icon:e.getIcon(),hideIcon:t.showIcons===!1}),s?o.style.color=this.getColor(zp)||"":o.style.color=this.getColor(eme)||"",this.updateEditorActionsToolbar()}}getVerbosity(e){switch(e){case"short":return Ii.SHORT;case"long":return Ii.LONG;default:return Ii.MEDIUM}}prepareEditorActions(e){return this.groupsView.activeGroup===this.groupView?e:{primary:this.groupsView.partOptions.alwaysShowEditorActions?e.primary:e.primary.filter(n=>n.id===ZR||n.id===XR),secondary:e.secondary}}getHeight(){return this.tabHeight}layout(e){return this.breadcrumbsControl?.layout(void 0),new Lt(e.container.width,this.getHeight())}}var Zce=Object.defineProperty,pUe=Object.getOwnPropertyDescriptor,mUe=(i,e)=>Zce(i,"name",{value:e,configurable:!0}),_Ue=(i,e,t,n)=>{for(var s=n>1?void 0:n?pUe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Zce(e,t,s),s},bUe=(i,e)=>(t,n)=>e(t,n,i);let RW=class extends ${constructor(i,e,t,n,s,o){super(),this.parent=i,this.groupsView=t,this.groupView=n,this.model=s,this.instantiationService=o;const r=this._register(new jce(this.model)),a=this._register(new qce(this.model));this.stickyEditorTabsControl=this._register(this.instantiationService.createInstance($r,this.parent,e,this.groupsView,this.groupView,r)),this.unstickyEditorTabsControl=this._register(this.instantiationService.createInstance($r,this.parent,e,this.groupsView,this.groupView,a)),this.handleTabBarsStateChange()}static{mUe(this,"MultiRowEditorControl")}stickyEditorTabsControl;unstickyEditorTabsControl;activeControl;handleTabBarsStateChange(){this.activeControl=this.model.activeEditor?this.getEditorTabsController(this.model.activeEditor):void 0,this.handleTabBarsLayoutChange()}handleTabBarsLayoutChange(){if(this.groupView.count===0)return;const i=this.parent.classList.contains("two-tab-bars"),e=this.groupView.count!==this.groupView.stickyCount&&this.groupView.stickyCount>0;this.parent.classList.toggle("two-tab-bars",e),i!==e&&this.groupView.relayout()}didActiveControlChange(){return this.activeControl!==(this.model.activeEditor?this.getEditorTabsController(this.model.activeEditor):void 0)}getEditorTabsController(i){return this.model.isSticky(i)?this.stickyEditorTabsControl:this.unstickyEditorTabsControl}openEditor(i,e){const t=this.didActiveControlChange(),s=this.getEditorTabsController(i).openEditor(i,e)||t;return s&&this.handleOpenedEditors(),s}openEditors(i){const e=i.filter(a=>this.model.isSticky(a)),t=i.filter(a=>!this.model.isSticky(a)),n=this.didActiveControlChange(),s=this.stickyEditorTabsControl.openEditors(e),o=this.unstickyEditorTabsControl.openEditors(t),r=s||o||n;return r&&this.handleOpenedEditors(),r}handleOpenedEditors(){this.handleTabBarsStateChange()}beforeCloseEditor(i){this.getEditorTabsController(i).beforeCloseEditor(i)}closeEditor(i){this.stickyEditorTabsControl.closeEditor(i),this.unstickyEditorTabsControl.closeEditor(i),this.handleClosedEditors()}closeEditors(i){const e=i.filter(n=>this.model.isSticky(n)),t=i.filter(n=>!this.model.isSticky(n));this.stickyEditorTabsControl.closeEditors(e),this.unstickyEditorTabsControl.closeEditors(t),this.handleClosedEditors()}handleClosedEditors(){this.handleTabBarsStateChange()}moveEditor(i,e,t,n){n?(this.model.isSticky(i)?(this.stickyEditorTabsControl.openEditor(i),this.unstickyEditorTabsControl.closeEditor(i)):(this.stickyEditorTabsControl.closeEditor(i),this.unstickyEditorTabsControl.openEditor(i)),this.handleTabBarsStateChange()):this.model.isSticky(i)?this.stickyEditorTabsControl.moveEditor(i,e,t,n):this.unstickyEditorTabsControl.moveEditor(i,e-this.model.stickyCount,t-this.model.stickyCount,n)}pinEditor(i){this.getEditorTabsController(i).pinEditor(i)}stickEditor(i){this.unstickyEditorTabsControl.closeEditor(i),this.stickyEditorTabsControl.openEditor(i),this.handleTabBarsStateChange()}unstickEditor(i){this.stickyEditorTabsControl.closeEditor(i),this.unstickyEditorTabsControl.openEditor(i),this.handleTabBarsStateChange()}setActive(i){this.stickyEditorTabsControl.setActive(i),this.unstickyEditorTabsControl.setActive(i)}updateEditorSelections(){this.stickyEditorTabsControl.updateEditorSelections(),this.unstickyEditorTabsControl.updateEditorSelections()}updateEditorLabel(i){this.getEditorTabsController(i).updateEditorLabel(i)}updateEditorDirty(i){this.getEditorTabsController(i).updateEditorDirty(i)}updateOptions(i,e){this.stickyEditorTabsControl.updateOptions(i,e),this.unstickyEditorTabsControl.updateOptions(i,e)}layout(i){const e=this.stickyEditorTabsControl.layout(i),t={container:i.container,available:new Lt(i.available.width,i.available.height-e.height)},n=this.unstickyEditorTabsControl.layout(t);return new Lt(i.container.width,e.height+n.height)}getHeight(){return this.stickyEditorTabsControl.getHeight()+this.unstickyEditorTabsControl.getHeight()}dispose(){this.parent.classList.toggle("two-tab-bars",!1),super.dispose()}};RW=_Ue([bUe(5,He)],RW);var vUe=Object.defineProperty,wUe=(i,e)=>vUe(i,"name",{value:e,configurable:!0});class CUe extends nv{static{wUe(this,"NoEditorTabsControl")}activeEditor=null;prepareEditorActions(e){return{primary:[],secondary:[]}}openEditor(e){return this.handleOpenedEditors()}openEditors(e){return this.handleOpenedEditors()}handleOpenedEditors(){const e=this.activeEditorChanged();return this.activeEditor=this.tabsModel.activeEditor,e}activeEditorChanged(){return!!(!this.activeEditor&&this.tabsModel.activeEditor||this.activeEditor&&!this.tabsModel.activeEditor||!this.activeEditor||!this.tabsModel.isActive(this.activeEditor))}beforeCloseEditor(e){}closeEditor(e){this.handleClosedEditors()}closeEditors(e){this.handleClosedEditors()}handleClosedEditors(){this.activeEditor=this.tabsModel.activeEditor}moveEditor(e,t,n){}pinEditor(e){}stickEditor(e){}unstickEditor(e){}setActive(e){}updateEditorSelections(){}updateEditorLabel(e){}updateEditorDirty(e){}getHeight(){return 0}layout(e){return new Lt(e.container.width,this.getHeight())}}var Xce=Object.defineProperty,yUe=Object.getOwnPropertyDescriptor,SUe=(i,e)=>Xce(i,"name",{value:e,configurable:!0}),EUe=(i,e,t,n)=>{for(var s=n>1?void 0:n?yUe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Xce(e,t,s),s},W$=(i,e)=>(t,n)=>e(t,n,i);let H$=class extends Ky{constructor(i,e,t,n,s,o,r){super(r),this.parent=i,this.editorPartsView=e,this.groupsView=t,this.groupView=n,this.model=s,this.instantiationService=o,this.editorTabsControl=this.createEditorTabsControl(),this.breadcrumbsControlFactory=this.createBreadcrumbsControl()}static{SUe(this,"EditorTitleControl")}editorTabsControl;editorTabsControlDisposable=this._register(new te);breadcrumbsControlFactory;breadcrumbsControlDisposables=this._register(new te);get breadcrumbsControl(){return this.breadcrumbsControlFactory?.control}createEditorTabsControl(){let i;switch(this.groupsView.partOptions.showTabs){case"none":i=CUe;break;case"single":i=fUe;break;case"multiple":default:i=this.groupsView.partOptions.pinnedTabsOnSeparateRow?RW:$r;break}const e=this.instantiationService.createInstance(i,this.parent,this.editorPartsView,this.groupsView,this.groupView,this.model);return this.editorTabsControlDisposable.add(e)}createBreadcrumbsControl(){if(this.groupsView.partOptions.showTabs==="single")return;const i=document.createElement("div");i.classList.add("breadcrumbs-below-tabs"),this.parent.appendChild(i);const e=this.breadcrumbsControlDisposables.add(this.instantiationService.createInstance(fN,i,this.groupView,{showFileIcons:!0,showSymbolIcons:!0,showDecorationColors:!1,showPlaceholder:!0}));return this.breadcrumbsControlDisposables.add(e.onDidEnablementChange(()=>this.groupView.relayout())),this.breadcrumbsControlDisposables.add(e.onDidVisibilityChange(()=>this.groupView.relayout())),e}openEditor(i,e){const t=this.editorTabsControl.openEditor(i,e);this.handleOpenedEditors(t)}openEditors(i){const e=this.editorTabsControl.openEditors(i);this.handleOpenedEditors(e)}handleOpenedEditors(i){i?this.breadcrumbsControl?.update():this.breadcrumbsControl?.revealLast()}beforeCloseEditor(i){return this.editorTabsControl.beforeCloseEditor(i)}closeEditor(i){this.editorTabsControl.closeEditor(i),this.handleClosedEditors()}closeEditors(i){this.editorTabsControl.closeEditors(i),this.handleClosedEditors()}handleClosedEditors(){this.groupView.activeEditor||this.breadcrumbsControl?.update()}moveEditor(i,e,t,n){return this.editorTabsControl.moveEditor(i,e,t,n)}pinEditor(i){return this.editorTabsControl.pinEditor(i)}stickEditor(i){return this.editorTabsControl.stickEditor(i)}unstickEditor(i){return this.editorTabsControl.unstickEditor(i)}setActive(i){return this.editorTabsControl.setActive(i)}updateEditorSelections(){this.editorTabsControl.updateEditorSelections()}updateEditorLabel(i){return this.editorTabsControl.updateEditorLabel(i)}updateEditorDirty(i){return this.editorTabsControl.updateEditorDirty(i)}updateOptions(i,e){i.showTabs!==e.showTabs||e.showTabs!=="single"&&i.pinnedTabsOnSeparateRow!==e.pinnedTabsOnSeparateRow?(this.editorTabsControlDisposable.clear(),this.breadcrumbsControlDisposables.clear(),Mn(this.parent),this.editorTabsControl=this.createEditorTabsControl(),this.breadcrumbsControlFactory=this.createBreadcrumbsControl()):this.editorTabsControl.updateOptions(i,e)}layout(i){const e=this.editorTabsControl.layout(i);let t;return this.breadcrumbsControl?.isHidden()===!1&&(t=new Lt(i.container.width,ki.HEIGHT),this.breadcrumbsControl.layout(t)),new Lt(i.container.width,e.height+(t?t.height:0))}getHeight(){const i=this.editorTabsControl.getHeight(),e=this.breadcrumbsControl?.isHidden()===!1?ki.HEIGHT:0;return{total:i+e,offset:i}}};H$=EUe([W$(5,He),W$(6,$t)],H$);var Qce=Object.defineProperty,LUe=Object.getOwnPropertyDescriptor,Gu=(i,e)=>Qce(i,"name",{value:e,configurable:!0}),DUe=(i,e,t,n)=>{for(var s=n>1?void 0:n?LUe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&Qce(e,t,s),s},Ru=(i,e)=>(t,n)=>e(t,n,i);class O9 extends nc{constructor(e){super(),this.context=e}static{Gu(this,"EditorCommandsContextActionRunner")}run(e,t){let n=this.context;return t?.preserveFocus&&(n={...this.context,preserveFocus:!0}),super.run(e,n)}}let nv=class extends Ky{constructor(i,e,t,n,s,o,r,a,l,c,d,h,u,f){super(h),this.parent=i,this.editorPartsView=e,this.groupsView=t,this.groupView=n,this.tabsModel=s,this.contextMenuService=o,this.instantiationService=r,this.contextKeyService=a,this.keybindingService=l,this.notificationService=c,this.quickInputService=d,this.editorResolverService=u,this.hostService=f,this.contextMenuContextKeyService=this._register(this.contextKeyService.createScoped(i));const p=this._register(this.instantiationService.createChild(new av([Ye,this.contextMenuContextKeyService])));this.resourceContext=this._register(p.createInstance(Lc)),this.editorPinnedContext=hPe.bindTo(this.contextMenuContextKeyService),this.editorIsFirstContext=uPe.bindTo(this.contextMenuContextKeyService),this.editorIsLastContext=gPe.bindTo(this.contextMenuContextKeyService),this.editorStickyContext=aV.bindTo(this.contextMenuContextKeyService),this.editorAvailableEditorIds=m7.bindTo(this.contextMenuContextKeyService),this.editorCanSplitInGroupContext=tA.bindTo(this.contextMenuContextKeyService),this.sideBySideEditorContext=Ep.bindTo(this.contextMenuContextKeyService),this.groupLockedContext=Qx.bindTo(this.contextMenuContextKeyService),this.renderDropdownAsChildElement=!1,this.tabsHoverDelegate=bn("mouse"),this.create(i)}static{Gu(this,"EditorTabsControl")}editorTransfer=db.getInstance();groupTransfer=db.getInstance();treeItemsTransfer=db.getInstance();static EDITOR_TAB_HEIGHT={normal:35,compact:22};editorActionsToolbarContainer;editorActionsToolbar;editorActionsToolbarDisposables=this._register(new te);editorActionsDisposables=this._register(new te);contextMenuContextKeyService;resourceContext;editorPinnedContext;editorIsFirstContext;editorIsLastContext;editorStickyContext;editorAvailableEditorIds;editorCanSplitInGroupContext;sideBySideEditorContext;groupLockedContext;renderDropdownAsChildElement;tabsHoverDelegate;create(i){this.updateTabHeight()}get editorActionsEnabled(){return this.groupsView.partOptions.editorActionsLocation==="default"&&this.groupsView.partOptions.showTabs!=="none"}createEditorActionsToolBar(i,e){this.editorActionsToolbarContainer=document.createElement("div"),this.editorActionsToolbarContainer.classList.add(...e),i.appendChild(this.editorActionsToolbarContainer),this.handleEditorActionToolBarVisibility(this.editorActionsToolbarContainer)}handleEditorActionToolBarVisibility(i){const e=this.editorActionsEnabled,t=!!this.editorActionsToolbar;e&&!t?this.doCreateEditorActionsToolBar(i):!e&&t&&(this.editorActionsToolbar?.getElement().remove(),this.editorActionsToolbar=void 0,this.editorActionsToolbarDisposables.clear(),this.editorActionsDisposables.clear()),i.classList.toggle("hidden",!e)}doCreateEditorActionsToolBar(i){const e={groupId:this.groupView.id};this.editorActionsToolbar=this.editorActionsToolbarDisposables.add(this.instantiationService.createInstance(fu,i,{actionViewItemProvider:Gu((t,n)=>this.actionViewItemProvider(t,n),"actionViewItemProvider"),orientation:Ns.HORIZONTAL,ariaLabel:g("ariaLabelEditorActions","Editor actions"),getKeyBinding:Gu(t=>this.getKeybinding(t),"getKeyBinding"),actionRunner:this.editorActionsToolbarDisposables.add(new O9(e)),anchorAlignmentProvider:Gu(()=>cu.RIGHT,"anchorAlignmentProvider"),renderDropdownAsChildElement:this.renderDropdownAsChildElement,telemetrySource:"editorPart",resetMenu:N.EditorTitle,overflowBehavior:{maxItems:9,exempted:ece},highlightToggledItems:!0})),this.editorActionsToolbar.context=e,this.editorActionsToolbarDisposables.add(this.editorActionsToolbar.actionRunner.onDidRun(t=>{t.error&&!lf(t.error)&&this.notificationService.error(t.error)}))}actionViewItemProvider(i,e){const t=this.groupView.activeEditorPane;if(t instanceof gb){const n=t.getActionViewItem(i,e);if(n)return n}return fm(this.instantiationService,i,{...e,menuAsChild:this.renderDropdownAsChildElement})}updateEditorActionsToolbar(){if(!this.editorActionsEnabled)return;this.editorActionsDisposables.clear();const i=this.groupView.createEditorActions(this.editorActionsDisposables);this.editorActionsDisposables.add(i.onDidChange(()=>this.updateEditorActionsToolbar()));const e=pt(this.editorActionsToolbar),{primary:t,secondary:n}=this.prepareEditorActions(i.actions);e.setActions(sc(t),sc(n))}getEditorPaneAwareContextKeyService(){return this.groupView.activeEditorPane?.scopedContextKeyService??this.contextKeyService}clearEditorActionsToolbar(){if(!this.editorActionsEnabled)return;pt(this.editorActionsToolbar).setActions([],[])}onGroupDragStart(i,e){if(i.target!==e)return!1;const t=this.isNewWindowOperation(i);this.groupTransfer.setData([new tg(this.groupView.id)],tg.prototype),i.dataTransfer&&(i.dataTransfer.effectAllowed="copyMove");let n=!1;if(this.groupsView.partOptions.showTabs==="multiple"?n=this.doFillResourceDataTransfers(this.groupView.getEditors(mn.SEQUENTIAL),i,t):this.groupView.activeEditor&&(n=this.doFillResourceDataTransfers([this.groupView.activeEditor],i,t)),!n&&na&&i.dataTransfer?.setData(Yh.TEXT,String(this.groupView.label)),this.groupView.activeEditor){let s=this.groupView.activeEditor.getName();this.groupsView.partOptions.showTabs==="multiple"&&this.groupView.count>1&&(s=g("draggedEditorGroup","{0} (+{1})",s,this.groupView.count-1)),_3(i,s,"monaco-editor-group-drag-image",this.getColor(Wl),this.getColor(Up))}return t}async onGroupDragEnd(i,e,t,n){if(this.groupTransfer.clearData(tg.prototype),i.target!==t||!n||M7())return;const s=await this.maybeCreateAuxiliaryEditorPartAt(i,t);if(!s)return;const o=s.activeGroup;this.groupsView.mergeGroup(this.groupView,o.id,{mode:this.isMoveOperation(e??i,o.id)?JC.MOVE_EDITORS:JC.COPY_EDITORS}),o.focus()}async maybeCreateAuxiliaryEditorPartAt(i,e){const{point:t,display:n}=await this.hostService.getCursorScreenPoint()??{point:{x:i.screenX,y:i.screenY}},s=sn();if(s.document.visibilityState==="visible"&&s.document.hasFocus()&&t.x>=s.screenX&&t.x<=s.screenX+s.outerWidth&&t.y>=s.screenY&&t.y<=s.screenY+s.outerHeight)return;const o=e.offsetWidth/2,r=30+e.offsetHeight/2,a={x:t.x-o,y:t.y-r};return n&&(a.x<n.x&&(a.x=n.x),a.y<n.y&&(a.y=n.y)),this.editorPartsView.createAuxiliaryEditorPart({bounds:a})}isNewWindowOperation(i){return this.groupsView.partOptions.dragToOpenWindow?!i.altKey:i.altKey}isMoveOperation(i,e,t){return t?.hasCapability(Wo.Singleton)?!0:!(i.ctrlKey&&!Ue||i.altKey&&Ue)||e===this.groupView.id}doFillResourceDataTransfers(i,e,t){return i.length?(this.instantiationService.invokeFunction(R7,i.map(n=>({editor:n,groupId:this.groupView.id})),e,{disableStandardTransfer:t}),!0):!1}onTabContextMenu(i,e,t){this.resourceContext.set(Io.getOriginalUri(i,{supportSideBySide:Is.PRIMARY})),this.editorPinnedContext.set(this.tabsModel.isPinned(i)),this.editorIsFirstContext.set(this.tabsModel.isFirst(i)),this.editorIsLastContext.set(this.tabsModel.isLast(i)),this.editorStickyContext.set(this.tabsModel.isSticky(i)),this.groupLockedContext.set(this.tabsModel.isLocked),this.editorCanSplitInGroupContext.set(i.hasCapability(Wo.CanSplitInGroup)),this.sideBySideEditorContext.set(i.typeId===zo.ID),wie(this.editorAvailableEditorIds,i,this.editorResolverService);let n=t;gg(e)&&(n=new $n(ve(t),e)),this.contextMenuService.showContextMenu({getAnchor:Gu(()=>n,"getAnchor"),menuId:N.EditorTitleContext,menuActionOptions:{shouldForwardArgs:!0,arg:this.resourceContext.get()},contextKeyService:this.contextMenuContextKeyService,getActionsContext:Gu(()=>({groupId:this.groupView.id,editorIndex:this.groupView.getIndexOfEditor(i)}),"getActionsContext"),getKeyBinding:Gu(s=>this.keybindingService.lookupKeybinding(s.id,this.contextMenuContextKeyService),"getKeyBinding"),onHide:Gu(()=>this.groupsView.activeGroup.focus(),"onHide")})}getKeybinding(i){return this.keybindingService.lookupKeybinding(i.id,this.getEditorPaneAwareContextKeyService())}getKeybindingLabel(i){const e=this.getKeybinding(i);return e?e.getLabel()??void 0:void 0}get tabHeight(){return this.groupsView.partOptions.tabHeight!=="compact"?nv.EDITOR_TAB_HEIGHT.normal:nv.EDITOR_TAB_HEIGHT.compact}getHoverTitle(i){const e=i.getTitle(Ii.LONG);return this.tabsModel.isPinned(i)?e:{markdown:new mH("",{supportThemeIcons:!0,isTrusted:!0}).appendText(e).appendMarkdown(' (_preview_ [$(gear)](command:workbench.action.openSettings?%5B%22workbench.editor.enablePreview%22%5D "Configure Preview Mode"))'),markdownNotSupportedFallback:e+" (preview)"}}getHoverDelegate(){return this.tabsHoverDelegate}updateTabHeight(){this.parent.style.setProperty("--editor-group-tab-height",`${this.tabHeight}px`)}updateOptions(i,e){i.tabHeight!==e.tabHeight&&this.updateTabHeight(),(i.editorActionsLocation!==e.editorActionsLocation||i.showTabs!==e.showTabs)&&this.editorActionsToolbarContainer&&(this.handleEditorActionToolBarVisibility(this.editorActionsToolbarContainer),this.updateEditorActionsToolbar())}};nv=DUe([Ru(5,Hi),Ru(6,He),Ru(7,Ye),Ru(8,ni),Ru(9,fs),Ru(10,ca),Ru(11,$t),Ru(12,aR),Ru(13,hr)],nv);var IUe=Object.defineProperty,rd=(i,e)=>IUe(i,"name",{value:e,configurable:!0});class Jce extends ge{constructor(e,t,n,s,o){const r=o?dc.toNegated():Z.true();super({id:`toggle.${e}`,title:t,metadata:n?{description:n}:void 0,toggled:Z.equals(`config.${e}`,!0),menu:[{id:N.TitleBarContext,when:r,order:s,group:"2_config"},{id:N.TitleBarTitleContext,when:r,order:s,group:"2_config"}]}),this.section=e}static{rd(this,"ToggleConfigAction")}run(e,...t){const n=e.get(Pe),s=n.getValue(this.section);n.updateValue(this.section,!s)}}Oe(class extends Jce{static{rd(this,"ToggleCommandCenter")}constructor(){super(rt.COMMAND_CENTER,g("toggle.commandCenter","Command Center"),g("toggle.commandCenterDescription","Toggle visibility of the Command Center in title bar"),1,!1)}});Oe(class extends Jce{static{rd(this,"ToggleLayoutControl")}constructor(){super("workbench.layoutControl.enabled",g("toggle.layout","Layout Controls"),g("toggle.layoutDescription","Toggle visibility of the Layout Controls in title bar"),2,!0)}});Oe(class extends ge{static{rd(this,"ToggleCustomTitleBar")}constructor(){super({id:`toggle.${Ho.CUSTOM_TITLE_BAR_VISIBILITY}`,title:g("toggle.hideCustomTitleBar","Hide Custom Title Bar"),menu:[{id:N.TitleBarContext,order:0,when:Z.equals(zE.key,LE.NATIVE),group:"3_toggle"},{id:N.TitleBarTitleContext,order:0,when:Z.equals(zE.key,LE.NATIVE),group:"3_toggle"}]})}run(e,...t){e.get(Pe).updateValue(Ho.CUSTOM_TITLE_BAR_VISIBILITY,Cr.NEVER)}});Oe(class extends ge{static{rd(this,"ToggleCustomTitleBarWindowed")}constructor(){super({id:`toggle.${Ho.CUSTOM_TITLE_BAR_VISIBILITY}.windowed`,title:g("toggle.hideCustomTitleBarInFullScreen","Hide Custom Title Bar In Full Screen"),menu:[{id:N.TitleBarContext,order:1,when:ef,group:"3_toggle"},{id:N.TitleBarTitleContext,order:1,when:ef,group:"3_toggle"}]})}run(e,...t){e.get(Pe).updateValue(Ho.CUSTOM_TITLE_BAR_VISIBILITY,Cr.WINDOWED)}});class TUe extends ge{static{rd(this,"ToggleCustomTitleBar")}constructor(){super({id:"toggle.toggleCustomTitleBar",title:g("toggle.customTitleBar","Custom Title Bar"),toggled:ED,menu:[{id:N.MenubarAppearanceMenu,order:6,when:Z.or(Z.and(Z.equals(zE.key,LE.NATIVE),Z.and(Z.equals("config.workbench.layoutControl.enabled",!1),Z.equals("config.window.commandCenter",!1),Z.notEquals("config.workbench.editor.editorActionsLocation","titleBar"),Z.notEquals("config.workbench.activityBar.location","top"),Z.notEquals("config.workbench.activityBar.location","bottom"))?.negate()),ef),group:"2_workbench_layout"}]})}run(e,...t){const n=e.get(Pe),s=e.get(Ye);switch(n.getValue(Ho.CUSTOM_TITLE_BAR_VISIBILITY)){case Cr.NEVER:n.updateValue(Ho.CUSTOM_TITLE_BAR_VISIBILITY,Cr.AUTO);break;case Cr.WINDOWED:{ef.evaluate(s.getContext(null))?n.updateValue(Ho.CUSTOM_TITLE_BAR_VISIBILITY,Cr.AUTO):n.updateValue(Ho.CUSTOM_TITLE_BAR_VISIBILITY,Cr.NEVER);break}case Cr.AUTO:default:n.updateValue(Ho.CUSTOM_TITLE_BAR_VISIBILITY,Cr.NEVER);break}}}Oe(TUe);Oe(class extends ge{static{rd(this,"ShowCustomTitleBar")}constructor(){super({id:"showCustomTitleBar",title:W("showCustomTitleBar","Show Custom Title Bar"),precondition:ED.negate(),f1:!0})}run(e,...t){e.get(Pe).updateValue(Ho.CUSTOM_TITLE_BAR_VISIBILITY,Cr.AUTO)}});Oe(class extends ge{static{rd(this,"HideCustomTitleBar")}constructor(){super({id:"hideCustomTitleBar",title:W("hideCustomTitleBar","Hide Custom Title Bar"),precondition:ED,f1:!0})}run(e,...t){e.get(Pe).updateValue(Ho.CUSTOM_TITLE_BAR_VISIBILITY,Cr.NEVER)}});Oe(class extends ge{static{rd(this,"HideCustomTitleBar")}constructor(){super({id:"hideCustomTitleBarInFullScreen",title:W("hideCustomTitleBarInFullScreen","Hide Custom Title Bar In Full Screen"),precondition:Z.and(ED,ef),f1:!0})}run(e,...t){e.get(Pe).updateValue(Ho.CUSTOM_TITLE_BAR_VISIBILITY,Cr.WINDOWED)}});Oe(class fd extends ge{static{rd(this,"ToggleEditorActions")}static settingsID="workbench.editor.editorActionsLocation";constructor(){const e=Z.and(Z.equals("config.workbench.editor.showTabs","none").negate(),Z.equals(`config.${fd.settingsID}`,"default"))?.negate();super({id:`toggle.${fd.settingsID}`,title:g("toggle.editorActions","Editor Actions"),toggled:Z.equals(`config.${fd.settingsID}`,"hidden").negate(),menu:[{id:N.TitleBarContext,order:3,when:e,group:"2_config"},{id:N.TitleBarTitleContext,order:3,when:e,group:"2_config"}]})}run(e,...t){const n=e.get(Pe),s=e.get(Si),o=n.getValue(fd.settingsID);if(o==="hidden"){if(n.getValue(rt.EDITOR_TABS_MODE)!=="none")n.updateValue(fd.settingsID,"titleBar");else{const a=s.get(fd.settingsID,Be.PROFILE);n.updateValue(fd.settingsID,a??"default")}s.remove(fd.settingsID,Be.PROFILE)}else n.updateValue(fd.settingsID,"hidden"),s.store(fd.settingsID,o,Be.PROFILE,ai.USER)}});const AUe={id:Ey,label:g("accounts","Accounts"),tooltip:g("accounts","Accounts"),class:void 0,enabled:!0,run:rd(function(){},"run")},xUe={id:Sy,label:g("manage","Manage"),tooltip:g("manage","Manage"),class:void 0,enabled:!0,run:rd(function(){},"run")};var ede=Object.defineProperty,kUe=Object.getOwnPropertyDescriptor,Il=(i,e)=>ede(i,"name",{value:e,configurable:!0}),sO=(i,e,t,n)=>{for(var s=n>1?void 0:n?kUe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&ede(e,t,s),s},li=(i,e)=>(t,n)=>e(t,n,i);let U$=class extends ree{constructor(i,e,t){super("workbench.titleService",t,e),this.instantiationService=i,this._register(this.registerPart(this.mainPart)),this.registerActions(),this.registerAPICommands()}static{Il(this,"BrowserTitleService")}mainPart=this._register(this.createMainTitlebarPart());createMainTitlebarPart(){return this.instantiationService.createInstance(OW)}registerActions(){const i=this;this._register(Oe(class extends ge{static{Il(this,"FocusTitleBar")}constructor(){super({id:"workbench.action.focusTitleBar",title:W("focusTitleBar","Focus Title Bar"),category:oe.View,f1:!0})}run(){i.getPartByDocument(om()).focus()}}))}registerAPICommands(){this._register(Mi.registerCommand({id:"registerWindowTitleVariable",handler:Il((i,e,t)=>{this.registerVariables([{name:e,contextKey:t}])},"handler"),metadata:{description:"Registers a new title variable",args:[{name:"name",schema:{type:"string"},description:"The name of the variable to register"},{name:"contextKey",schema:{type:"string"},description:"The context key to use for the value of the variable"}]}}))}createAuxiliaryTitlebarPart(i,e){const t=document.createElement("div");t.classList.add("part","titlebar"),t.setAttribute("role","none"),t.style.position="relative",i.insertBefore(t,i.firstChild);const n=new te,s=this.doCreateAuxiliaryTitlebarPart(t,e);return n.add(this.registerPart(s)),n.add(H.runAndSubscribe(s.onDidChange,()=>t.style.height=`${s.height}px`)),s.create(t),this.properties&&s.updateProperties(this.properties),this.variables.size&&s.registerVariables(Array.from(this.variables.values())),H.once(s.onWillDispose)(()=>n.dispose()),s}doCreateAuxiliaryTitlebarPart(i,e){return this.instantiationService.createInstance(mN,i,e,this.mainPart)}onMenubarVisibilityChange=this.mainPart.onMenubarVisibilityChange;properties=void 0;updateProperties(i){this.properties=i;for(const e of this.parts)e.updateProperties(i)}variables=new Map;registerVariables(i){const e=[];for(const t of i)this.variables.has(t.name)||(this.variables.set(t.name,t),e.push(t));for(const t of this.parts)t.registerVariables(e)}};U$=sO([li(0,He),li(1,Si),li(2,$t)],U$);let pN=class extends gD{constructor(i,e,t,n,s,o,r,a,l,c,d,h,u,f,p,m){super(i,{hasTitle:!1},a,l,c),this.contextMenuService=n,this.configurationService=s,this.environmentService=o,this.instantiationService=r,this.storageService=l,this.contextKeyService=d,this.hostService=h,this.editorGroupService=u,this.menuService=p,this.keybindingService=m,this.isAuxiliary=t!=="main",this.editorService=f.createScoped(t,this._store),this.editorGroupsContainer=t==="main"?u.mainPart:t,this.windowTitle=this._register(r.createInstance(ng,e,t)),this.hoverDelegate=this._register(cm()),this.registerListeners(Ng(e))}static{Il(this,"BrowserTitlebarPart")}minimumWidth=0;maximumWidth=Number.POSITIVE_INFINITY;get minimumHeight(){const i=ui&&J0();let e=this.isCommandCenterVisible||i?_Le:30;return i&&(e=Math.max(e,Qj(ve(this.element))?.height??0)),e/(this.preventZoom?Kw(ve(this.element)):1)}get maximumHeight(){return this.minimumHeight}_onMenubarVisibilityChange=this._register(new x);onMenubarVisibilityChange=this._onMenubarVisibilityChange.event;_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;rootContainer;windowControlsContainer;dragRegion;title;leftContent;centerContent;rightContent;customMenubar;appIcon;appIconBadge;menubar;lastLayoutDimensions;actionToolBar;actionToolBarDisposable=this._register(new te);editorActionsChangeDisposable=this._register(new te);actionToolBarElement;layoutToolbarMenu;editorToolbarMenuDisposables=this._register(new te);layoutToolbarMenuDisposables=this._register(new te);activityToolbarDisposables=this._register(new te);hoverDelegate;titleDisposables=this._register(new te);titleBarStyle=TP(this.configurationService);isInactive=!1;isAuxiliary;windowTitle;editorService;editorGroupsContainer;registerListeners(i){this._register(this.hostService.onDidChangeFocus(e=>e?this.onFocus():this.onBlur())),this._register(this.hostService.onDidChangeActiveWindow(e=>e===i?this.onFocus():this.onBlur())),this._register(this.configurationService.onDidChangeConfiguration(e=>this.onConfigurationChanged(e))),this._register(this.editorGroupService.onDidChangeEditorPartOptions(e=>this.onEditorPartConfigurationChange(e)))}onBlur(){this.isInactive=!0,this.updateStyles()}onFocus(){this.isInactive=!1,this.updateStyles()}onEditorPartConfigurationChange({oldPartOptions:i,newPartOptions:e}){(i.editorActionsLocation!==e.editorActionsLocation||i.showTabs!==e.showTabs)&&Cw(this.configurationService,this.titleBarStyle)&&this.actionToolBar&&(this.createActionToolBar(),this.createActionToolBarMenus({editorActions:!0}),this._onDidChange.fire(void 0))}onConfigurationChanged(i){if(!this.isAuxiliary&&!Rc(this.configurationService,this.titleBarStyle)&&(!Ue||ui)&&i.affectsConfiguration("window.menuBarVisibility")&&(this.currentMenubarVisibility==="compact"?this.uninstallMenubar():this.installMenubar()),Cw(this.configurationService,this.titleBarStyle)&&this.actionToolBar){const e=i.affectsConfiguration(rt.LAYOUT_ACTIONS),t=i.affectsConfiguration(rt.ACTIVITY_BAR_LOCATION);(e||t)&&(this.createActionToolBarMenus({layoutActions:e,activityActions:t}),this._onDidChange.fire(void 0))}i.affectsConfiguration(rt.COMMAND_CENTER)&&(this.createTitle(),this._onDidChange.fire(void 0))}installMenubar(){this.menubar||(this.customMenubar=this._register(this.instantiationService.createInstance(Nk)),this.menubar=Le(this.leftContent,ce("div.menubar")),this.menubar.setAttribute("role","menubar"),this._register(this.customMenubar.onVisibilityChange(i=>this.onMenubarVisibilityChanged(i))),this.customMenubar.create(this.menubar))}uninstallMenubar(){this.customMenubar?.dispose(),this.customMenubar=void 0,this.menubar?.remove(),this.menubar=void 0,this.onMenubarVisibilityChanged(!1)}onMenubarVisibilityChanged(i){(ui||Nt||Gi)&&(this.lastLayoutDimensions&&this.layout(this.lastLayoutDimensions.width,this.lastLayoutDimensions.height),this._onMenubarVisibilityChange.fire(i))}updateProperties(i){this.windowTitle.updateProperties(i)}registerVariables(i){this.windowTitle.registerVariables(i)}createContentArea(i){if(this.element=i,this.rootContainer=Le(i,ce(".titlebar-container")),this.leftContent=Le(this.rootContainer,ce(".titlebar-left")),this.centerContent=Le(this.rootContainer,ce(".titlebar-center")),this.rightContent=Le(this.rootContainer,ce(".titlebar-right")),!Ue&&!ui&&!Rc(this.configurationService,this.titleBarStyle)&&(this.appIcon=jC(this.leftContent,ce("a.window-appicon")),!this.isAuxiliary&&ui)){const e=this.environmentService.options?.homeIndicator;if(e){const t=xj().getIcon(e.icon)?{id:e.icon}:ee.code;this.appIcon.setAttribute("href",e.href),this.appIcon.classList.add(...Ne.asClassNameArray(t)),this.appIconBadge=document.createElement("div"),this.appIconBadge.classList.add("home-bar-icon-badge"),this.appIcon.appendChild(this.appIconBadge)}}if(this.dragRegion=jC(this.rootContainer,ce("div.titlebar-drag-region")),!this.isAuxiliary&&!Rc(this.configurationService,this.titleBarStyle)&&(!Ue||ui)&&this.currentMenubarVisibility!=="compact"&&this.installMenubar(),this.title=Le(this.centerContent,ce("div.window-title")),this.createTitle(),Cw(this.configurationService,this.titleBarStyle)&&(this.actionToolBarElement=Le(this.rightContent,ce("div.action-toolbar-container")),this.createActionToolBar(),this.createActionToolBarMenus()),!Rc(this.configurationService,this.titleBarStyle)){let e=Ue?"left":"right";Ue&&ao&&new Intl.Locale(rhe)?.textInfo?.direction==="rtl"&&(e="right"),Ue&&ao&&e==="left"||(this.windowControlsContainer=Le(e==="left"?this.leftContent:this.rightContent,ce("div.window-controls-container")),ui&&Le(e==="left"?this.rightContent:this.leftContent,ce("div.window-controls-container")),J0()&&this.windowControlsContainer.classList.add("wco-enabled"))}return this._register(F(this.rootContainer,Q.CONTEXT_MENU,e=>{Fe.stop(e);let t;Ue&&xs(e.target)&&As(e.target,this.title)?t=N.TitleBarTitleContext:t=N.TitleBarContext,this.onContextMenu(e,t)})),Ue&&this._register(F(this.title,Q.MOUSE_DOWN,e=>{e.metaKey&&(Fe.stop(e,!0),this.onContextMenu(e,N.TitleBarTitleContext))},!0)),this.updateStyles(),this.element}createTitle(){if(this.titleDisposables.clear(),!this.isCommandCenterVisible)this.title.innerText=this.windowTitle.value,this.titleDisposables.add(this.windowTitle.onDidChange(()=>{this.title.innerText=this.windowTitle.value}));else{const i=this.instantiationService.createInstance(f4,this.windowTitle,this.hoverDelegate);dr(this.title,i.element),this.titleDisposables.add(i)}}actionViewItemProvider(i,e){if(!this.isAuxiliary){if(i.id===Sy)return this.instantiationService.createInstance(g4,{position:Il(()=>zc.BELOW,"position")},e);if(i.id===Ey)return this.instantiationService.createInstance(u4,{position:Il(()=>zc.BELOW,"position")},e)}const t=this.editorGroupsContainer.activeGroup?.activeEditorPane;if(t&&t instanceof gb){const n=t.getActionViewItem(i,e);if(n)return n}return fm(this.instantiationService,i,{...e,menuAsChild:!1})}getKeybinding(i){const e=this.editorGroupsContainer.activeGroup?.activeEditorPane?.scopedContextKeyService??this.contextKeyService;return this.keybindingService.lookupKeybinding(i.id,e)}createActionToolBar(){this.actionToolBarDisposable.clear(),this.actionToolBar=this.actionToolBarDisposable.add(this.instantiationService.createInstance(fu,this.actionToolBarElement,{contextMenu:N.TitleBarContext,orientation:Ns.HORIZONTAL,ariaLabel:g("ariaLabelTitleActions","Title actions"),getKeyBinding:Il(i=>this.getKeybinding(i),"getKeyBinding"),overflowBehavior:{maxItems:9,exempted:[Ey,Sy,...ece]},anchorAlignmentProvider:Il(()=>cu.RIGHT,"anchorAlignmentProvider"),telemetrySource:"titlePart",highlightToggledItems:this.editorActionsEnabled,actionViewItemProvider:Il((i,e)=>this.actionViewItemProvider(i,e),"actionViewItemProvider"),hoverDelegate:this.hoverDelegate})),this.editorActionsEnabled&&this.actionToolBarDisposable.add(this.editorGroupsContainer.onDidChangeActiveGroup(()=>this.createActionToolBarMenus({editorActions:!0})))}createActionToolBarMenus(i=!0){i===!0&&(i={editorActions:!0,layoutActions:!0,activityActions:!0});const e=Il(()=>{const t={primary:[],secondary:[]};if(this.editorActionsEnabled){this.editorActionsChangeDisposable.clear();const n=this.editorGroupsContainer.activeGroup;if(n){const s=n.createEditorActions(this.editorActionsChangeDisposable);t.primary.push(...s.actions.primary),t.secondary.push(...s.actions.secondary),this.editorActionsChangeDisposable.add(s.onDidChange(()=>e()))}}this.layoutToolbarMenu&&Dv(this.layoutToolbarMenu,{},t,()=>!this.editorActionsEnabled),this.activityActionsEnabled&&(rL(this.storageService)&&t.primary.push(AUe),t.primary.push(xUe)),this.actionToolBar.setActions(sc(t.primary),sc(t.secondary))},"updateToolBarActions");if(i.editorActions)if(this.editorToolbarMenuDisposables.clear(),this.editorActionsEnabled&&this.editorService.activeEditor!==void 0){const t={groupId:this.editorGroupsContainer.activeGroup.id};this.actionToolBar.actionRunner=new O9(t),this.actionToolBar.context=t,this.editorToolbarMenuDisposables.add(this.actionToolBar.actionRunner)}else this.actionToolBar.actionRunner=new nc,this.actionToolBar.context=void 0,this.editorToolbarMenuDisposables.add(this.actionToolBar.actionRunner);i.layoutActions&&(this.layoutToolbarMenuDisposables.clear(),this.layoutControlEnabled?(this.layoutToolbarMenu=this.menuService.createMenu(N.LayoutControlMenu,this.contextKeyService),this.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu),this.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu.onDidChange(()=>e()))):this.layoutToolbarMenu=void 0),i.activityActions&&(this.activityToolbarDisposables.clear(),this.activityActionsEnabled&&this.activityToolbarDisposables.add(this.storageService.onDidChangeValue(Be.PROFILE,Qp.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,this._store)(()=>e()))),e()}updateStyles(){if(super.updateStyles(),this.element){this.isInactive?this.element.classList.add("inactive"):this.element.classList.remove("inactive");const i=this.getColor(this.isInactive?Hme:YA,(n,s)=>n.isOpaque()?n:n.makeOpaque(GN(s)))||"";this.element.style.backgroundColor=i,this.appIconBadge&&(this.appIconBadge.style.backgroundColor=i),i&&U.fromHex(i).isLighter()?this.element.classList.add("light"):this.element.classList.remove("light");const e=this.getColor(this.isInactive?A5:Md);this.element.style.color=e||"";const t=this.getColor(Ume);this.element.style.borderBottom=t?`1px solid ${t}`:""}}onContextMenu(i,e){const t=new $n(ve(this.element),i);this.contextMenuService.showContextMenu({getAnchor:Il(()=>t,"getAnchor"),menuId:e,contextKeyService:this.contextKeyService,domForShadowRoot:Ue&&ao?t.target:void 0})}get currentMenubarVisibility(){return this.isAuxiliary?"hidden":Jh(this.configurationService)}get layoutControlEnabled(){return!this.isAuxiliary&&this.configurationService.getValue(rt.LAYOUT_ACTIONS)!==!1}get isCommandCenterVisible(){return this.configurationService.getValue(rt.COMMAND_CENTER)!==!1}get editorActionsEnabled(){return this.editorGroupService.partOptions.editorActionsLocation===Uc.TITLEBAR||this.editorGroupService.partOptions.editorActionsLocation===Uc.DEFAULT&&this.editorGroupService.partOptions.showTabs===ra.NONE}get activityActionsEnabled(){const i=this.configurationService.getValue(rt.ACTIVITY_BAR_LOCATION);return!this.isAuxiliary&&(i===ti.TOP||i===ti.BOTTOM)}get hasZoomableElements(){const i=!(this.currentMenubarVisibility==="hidden"||this.currentMenubarVisibility==="compact"||!ui&&Ue),e=this.isCommandCenterVisible,t=this.layoutControlEnabled||this.editorActionsEnabled||this.activityActionsEnabled;return i||e||t}get preventZoom(){return Kw(ve(this.element))<1||!this.hasZoomableElements}layout(i,e){this.updateLayout(new Lt(i,e)),super.layoutContents(i,e)}updateLayout(i){if(this.lastLayoutDimensions=i,Cw(this.configurationService,this.titleBarStyle)){const e=Kw(ve(this.element));if(this.element.style.setProperty("--zoom-factor",e.toString()),this.rootContainer.classList.toggle("counter-zoom",this.preventZoom),this.customMenubar){const t=new Lt(0,i.height);this.customMenubar.layout(t)}}}focus(){this.customMenubar?this.customMenubar.toggleFocus():this.element.querySelector('[tabindex]:not([tabindex="-1"])').focus()}toJSON(){return{type:Y.TITLEBAR_PART}}dispose(){this._onWillDispose.fire(),super.dispose()}};pN=sO([li(3,Hi),li(4,Pe),li(5,Tv),li(6,He),li(7,$t),li(8,Si),li(9,yt),li(10,Ye),li(11,hr),li(12,Ge),li(13,nt),li(14,No),li(15,ni)],pN);let OW=class extends pN{static{Il(this,"MainBrowserTitlebarPart")}constructor(i,e,t,n,s,o,r,a,l,c,d,h,u){super(Y.TITLEBAR_PART,_e,"main",i,e,t,n,s,o,r,a,l,c,d,h,u)}};OW=sO([li(0,Hi),li(1,Pe),li(2,Tv),li(3,He),li(4,$t),li(5,Si),li(6,yt),li(7,Ye),li(8,hr),li(9,Ge),li(10,nt),li(11,No),li(12,ni)],OW);let mN=class extends pN{constructor(i,e,t,n,s,o,r,a,l,c,d,h,u,f,p,m){const _=mN.COUNTER++;super(`workbench.parts.auxiliaryTitle.${_}`,ve(i),e,n,s,o,r,a,l,c,d,h,u,f,p,m),this.container=i,this.mainTitlebar=t}static{Il(this,"AuxiliaryBrowserTitlebarPart")}static COUNTER=1;get height(){return this.minimumHeight}get preventZoom(){return Kw(ve(this.element))<1||!this.mainTitlebar.hasZoomableElements}};mN=sO([li(3,Hi),li(4,Pe),li(5,Tv),li(6,He),li(7,$t),li(8,Si),li(9,yt),li(10,Ye),li(11,hr),li(12,Ge),li(13,nt),li(14,No),li(15,ni)],mN);const NUe=De("titleService"),PUe=De("bannerService");var tde=Object.defineProperty,RUe=Object.getOwnPropertyDescriptor,Ou=(i,e)=>tde(i,"name",{value:e,configurable:!0}),OUe=(i,e,t,n)=>{for(var s=n>1?void 0:n?RUe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&tde(e,t,s),s},Fa=(i,e)=>(t,n)=>e(t,n,i);let K_=class extends yy{constructor(i,e,t,n,s,o,r,a,l,c,d,h,u,f){super(Y.AUXILIARYBAR_PART,{hasTitle:!0,borderWidth:Ou(()=>this.getColor(qA)||this.getColor(Re)?1:0,"borderWidth")},K_.activePanelSettingsKey,SPe.bindTo(c),EPe.bindTo(c),"auxiliarybar","auxiliarybar",void 0,i,e,t,n,s,o,r,a,l,c,d,u),this.commandService=h,this.configurationService=f,this._register(f.onDidChangeConfiguration(p=>{p.affectsConfiguration(rt.ACTIVITY_BAR_LOCATION)&&this.onDidChangeActivityBarLocation()}))}static{Ou(this,"AuxiliaryBarPart")}static activePanelSettingsKey="workbench.auxiliarybar.activepanelid";static pinnedPanelsKey="workbench.auxiliarybar.pinnedPanels";static placeholdeViewContainersKey="workbench.auxiliarybar.placeholderPanels";static viewContainersWorkspaceStateKey="workbench.auxiliarybar.viewContainersWorkspaceState";minimumWidth=170;maximumWidth=Number.POSITIVE_INFINITY;minimumHeight=0;maximumHeight=Number.POSITIVE_INFINITY;get preferredHeight(){return this.layoutService.mainContainerDimension.height*.4}get preferredWidth(){const i=this.getActivePaneComposite();if(!i)return;const e=i.getOptimalWidth();if(typeof e=="number")return Math.max(e,300)}priority=Fh.Low;onDidChangeActivityBarLocation(){this.updateCompositeBar();const i=this.getActiveComposite()?.getId();i&&this.onTitleAreaUpdate(i)}updateStyles(){super.updateStyles();const i=pt(this.getContainer());i.style.backgroundColor=this.getColor(kg)||"";const e=this.getColor(qA)||this.getColor(Re),t=this.layoutService.getSideBarPosition()===Ht.RIGHT;i.style.color=this.getColor(jN)||"",i.style.borderLeftColor=e??"",i.style.borderRightColor=e??"",i.style.borderLeftStyle=e&&!t?"solid":"none",i.style.borderRightStyle=e&&t?"solid":"none",i.style.borderLeftWidth=e&&!t?"1px":"0px",i.style.borderRightWidth=e&&t?"1px":"0px"}getCompositeBarOptions(){const i=this;return{partContainerClass:"auxiliarybar",pinnedViewContainersKey:K_.pinnedPanelsKey,placeholderViewContainersKey:K_.placeholdeViewContainersKey,viewContainersWorkspaceStateKey:K_.viewContainersWorkspaceStateKey,icon:!0,orientation:Ns.HORIZONTAL,recomputeSizes:!0,activityHoverOptions:{position:Ou(()=>this.getCompositeBarPosition()===_r.BOTTOM?zc.ABOVE:zc.BELOW,"position")},fillExtraContextMenuActions:Ou(e=>this.fillExtraContextMenuActions(e),"fillExtraContextMenuActions"),compositeSize:0,iconSize:16,get overflowActionSize(){return i.getCompositeBarPosition()===_r.TITLE?40:30},colors:Ou(e=>({activeBackgroundColor:e.getColor(kg),inactiveBackgroundColor:e.getColor(kg),get activeBorderBottomColor(){return i.getCompositeBarPosition()===_r.TITLE?e.getColor(Vj):e.getColor($j)},get activeForegroundColor(){return i.getCompositeBarPosition()===_r.TITLE?e.getColor(Tb):e.getColor(xb)},get inactiveForegroundColor(){return i.getCompositeBarPosition()===_r.TITLE?e.getColor(Fj):e.getColor(Gj)},badgeBackground:e.getColor(dv),badgeForeground:e.getColor(hv),get dragAndDropBorder(){return i.getCompositeBarPosition()===_r.TITLE?e.getColor(Wj):e.getColor(Kj)}}),"colors"),compact:!0}}fillExtraContextMenuActions(i){const e=this.layoutService.getSideBarPosition()===Ht.LEFT,t=this.getViewsSubmenuAction();t&&(i.push(new zt),i.push(t));const n=this.menuService.getMenuActions(N.ActivityBarPositionMenu,this.contextKeyService,{shouldForwardArgs:!0,renderShortTitle:!0}),s=[];fy(n,{primary:[],secondary:s}),i.push(new zt,new ll("workbench.action.panel.position",g("activity bar position","Activity Bar Position"),s),Ei({id:Yr.ID,label:e?g("move second side bar left","Move Secondary Side Bar Left"):g("move second side bar right","Move Secondary Side Bar Right"),run:Ou(()=>this.commandService.executeCommand(Yr.ID),"run")}),Ei({id:qd.ID,label:g("hide second side bar","Hide Secondary Side Bar"),run:Ou(()=>this.commandService.executeCommand(qd.ID),"run")}))}shouldShowCompositeBar(){return this.configurationService.getValue(rt.ACTIVITY_BAR_LOCATION)!==ti.HIDDEN}getCompositeBarPosition(){switch(this.configurationService.getValue(rt.ACTIVITY_BAR_LOCATION)){case ti.TOP:return _r.TOP;case ti.BOTTOM:return _r.BOTTOM;case ti.HIDDEN:return _r.TITLE;case ti.DEFAULT:return _r.TITLE;default:return _r.TITLE}}createHeaderArea(){const i=super.createHeaderArea(),e=ce(".auxiliary-bar-global-header"),t=this.headerFooterCompositeBarDispoables.add(this.instantiationService.createInstance(my,N.AuxiliaryBarHeader,void 0,void 0)),n=this.headerFooterCompositeBarDispoables.add(this.instantiationService.createInstance(fu,e,{actionViewItemProvider:Ou((s,o)=>this.headerActionViewItemProvider(s,o),"actionViewItemProvider"),orientation:Ns.HORIZONTAL,hiddenItemStrategy:Av.NoHide,getKeyBinding:Ou(s=>this.keybindingService.lookupKeybinding(s.id),"getKeyBinding")}));return n.setActions(sc(t.getPrimaryActions())),this.headerFooterCompositeBarDispoables.add(t.onDidChange(()=>n.setActions(sc(t.getPrimaryActions())))),i.appendChild(e),i}headerActionViewItemProvider(i,e){if(i.id===qd.ID)return this.instantiationService.createInstance(_D,void 0,i,e)}toJSON(){return{type:Y.AUXILIARYBAR_PART}}};K_=OUe([Fa(0,fs),Fa(1,Si),Fa(2,Hi),Fa(3,yt),Fa(4,ni),Fa(5,Po),Fa(6,He),Fa(7,$t),Fa(8,Ro),Fa(9,Ye),Fa(10,nd),Fa(11,Xi),Fa(12,No),Fa(13,Pe)],K_);var MUe=Object.defineProperty,$h=(i,e)=>MUe(i,"name",{value:e,configurable:!0});const BUe=[rt.ACTIVITY_BAR_LOCATION,rt.COMMAND_CENTER,rt.EDITOR_ACTIONS_LOCATION,rt.LAYOUT_ACTIONS,"window.menuBarVisibility",Ho.TITLE_BAR_STYLE,Ho.CUSTOM_TITLE_BAR_VISIBILITY];class FUe extends ${constructor(e){super(),this.parent=e}static{$h(this,"Layout")}_onDidChangeZenMode=this._register(new x);onDidChangeZenMode=this._onDidChangeZenMode.event;_onDidChangeMainEditorCenteredLayout=this._register(new x);onDidChangeMainEditorCenteredLayout=this._onDidChangeMainEditorCenteredLayout.event;_onDidChangePanelAlignment=this._register(new x);onDidChangePanelAlignment=this._onDidChangePanelAlignment.event;_onDidChangeWindowMaximized=this._register(new x);onDidChangeWindowMaximized=this._onDidChangeWindowMaximized.event;_onDidChangePanelPosition=this._register(new x);onDidChangePanelPosition=this._onDidChangePanelPosition.event;_onDidChangePartVisibility=this._register(new x);onDidChangePartVisibility=this._onDidChangePartVisibility.event;_onDidChangeNotificationsVisibility=this._register(new x);onDidChangeNotificationsVisibility=this._onDidChangeNotificationsVisibility.event;_onDidLayoutMainContainer=this._register(new x);onDidLayoutMainContainer=this._onDidLayoutMainContainer.event;_onDidLayoutActiveContainer=this._register(new x);onDidLayoutActiveContainer=this._onDidLayoutActiveContainer.event;_onDidLayoutContainer=this._register(new x);onDidLayoutContainer=this._onDidLayoutContainer.event;_onDidAddContainer=this._register(new x);onDidAddContainer=this._onDidAddContainer.event;_onDidChangeActiveContainer=this._register(new x);onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;mainContainer=document.createElement("div");get activeContainer(){return this.getContainerFromDocument(om())}get containers(){const e=[];for(const{window:t}of tE())e.push(this.getContainerFromDocument(t.document));return e}getContainerFromDocument(e){return e===this.mainContainer.ownerDocument?this.mainContainer:e.body.getElementsByClassName("monaco-workbench")[0]}containerStylesLoaded=new Map;whenContainerStylesLoaded(e){return this.containerStylesLoaded.get(e.vscodeWindowId)}_mainContainerDimension;get mainContainerDimension(){return this._mainContainerDimension}get activeContainerDimension(){return this.getContainerDimension(this.activeContainer)}getContainerDimension(e){return e===this.mainContainer?this.mainContainerDimension:$p(e)}get mainContainerOffset(){return this.computeContainerOffset(_e)}get activeContainerOffset(){return this.computeContainerOffset(ve(this.activeContainer))}computeContainerOffset(e){let t=0,n=0;this.isVisible(Y.BANNER_PART)&&(t=this.getPart(Y.BANNER_PART).maximumHeight,n=t);const s=this.isVisible(Y.TITLEBAR_PART,e);return s&&(t+=this.getPart(Y.TITLEBAR_PART).maximumHeight,n=t),s&&this.configurationService.getValue(rt.COMMAND_CENTER)!==!1&&(n=6),{top:t,quickPickTop:n}}parts=new Map;initialized=!1;workbenchGrid;titleBarPartView;bannerPartView;activityBarPartView;sideBarPartView;panelPartView;auxiliaryBarPartView;editorPartView;statusBarPartView;environmentService;extensionService;configurationService;storageService;hostService;editorService;mainPartEditorService;editorGroupService;paneCompositeService;titleService;viewDescriptorService;contextService;workingCopyBackupService;notificationService;themeService;statusBarService;logService;telemetryService;auxiliaryWindowService;state;stateModel;disposed=!1;initLayout(e){this.environmentService=e.get(Tv),this.configurationService=e.get(Pe),this.hostService=e.get(hr),this.contextService=e.get(po),this.storageService=e.get(Si),this.workingCopyBackupService=e.get(s6),this.themeService=e.get($t),this.extensionService=e.get(nd),this.logService=e.get(jo),this.telemetryService=e.get(rs),this.auxiliaryWindowService=e.get(jne),this.editorService=e.get(nt),this.mainPartEditorService=this.editorService.createScoped("main",this._store),this.editorGroupService=e.get(Ge),this.paneCompositeService=e.get(Cf),this.viewDescriptorService=e.get(Ro),this.titleService=e.get(NUe),this.notificationService=e.get(fs),this.statusBarService=e.get(yf),e.get(PUe),this.registerLayoutListeners(),this.initLayoutState(e.get(eh),e.get(la))}registerLayoutListeners(){const e=$h(()=>{this.isVisible(Y.EDITOR_PART,_e)||this.toggleMaximizedPanel()},"showEditorIfHidden");this.editorGroupService.whenRestored.then(()=>{this._register(this.mainPartEditorService.onDidVisibleEditorsChange(e)),this._register(this.editorGroupService.mainPart.onDidActivateGroup(e)),this._register(this.mainPartEditorService.onDidActiveEditorChange(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(he.MAIN_EDITOR_CENTERED))))}),this._register(this.configurationService.onDidChangeConfiguration(n=>{if([...BUe,"workbench.sideBar.location","workbench.statusBar.visible"].some(s=>n.affectsConfiguration(s))){const s=n.affectsConfiguration(rt.EDITOR_ACTIONS_LOCATION)&&this.configurationService.getValue(rt.EDITOR_ACTIONS_LOCATION)===Uc.TITLEBAR;let o=!1;if(n.affectsConfiguration(rt.ACTIVITY_BAR_LOCATION)){const r=this.configurationService.getValue(rt.ACTIVITY_BAR_LOCATION);o=r===ti.TOP||r===ti.BOTTOM}(o||s)&&this.configurationService.getValue(Ho.CUSTOM_TITLE_BAR_VISIBILITY)===Cr.NEVER&&this.configurationService.updateValue(Ho.CUSTOM_TITLE_BAR_VISIBILITY,Cr.AUTO),this.doUpdateLayoutConfiguration()}})),this._register(P5(n=>this.onFullscreenChanged(n))),this._register(this.editorGroupService.mainPart.onDidAddGroup(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(he.MAIN_EDITOR_CENTERED)))),this._register(this.editorGroupService.mainPart.onDidRemoveGroup(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(he.MAIN_EDITOR_CENTERED)))),this._register(this.editorGroupService.mainPart.onDidChangeGroupMaximized(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(he.MAIN_EDITOR_CENTERED)))),this._register(F(this.mainContainer,Q.SCROLL,()=>this.mainContainer.scrollTop=0)),(Nt||Gi||ui)&&!Rc(this.configurationService)&&this._register(this.titleService.onMenubarVisibilityChange(n=>this.onMenubarToggled(n))),this._register(this.themeService.onDidColorThemeChange(()=>this.updateWindowsBorder())),this._register(this.hostService.onDidChangeFocus(n=>this.onWindowFocusChanged(n))),this._register(this.hostService.onDidChangeActiveWindow(()=>this.onActiveWindowChanged())),ui&&typeof navigator.windowControlsOverlay=="object"&&this._register(F(navigator.windowControlsOverlay,"geometrychange",()=>this.onDidChangeWCO())),this._register(this.auxiliaryWindowService.onDidOpenAuxiliaryWindow(({window:n,disposables:s})=>{const o=n.window.vscodeWindowId;this.containerStylesLoaded.set(o,n.whenStylesHaveLoaded),n.whenStylesHaveLoaded.then(()=>this.containerStylesLoaded.delete(o)),s.add(ye(()=>this.containerStylesLoaded.delete(o)));const r=s.add(new te);this._onDidAddContainer.fire({container:n.container,disposables:r}),s.add(n.onDidLayout(a=>this.handleContainerDidLayout(n.container,a)))}))}onMenubarToggled(e){if(e!==this.state.runtime.menuBar.toggled){this.state.runtime.menuBar.toggled=e;const t=Jh(this.configurationService);ui&&t==="toggle"?this.workbenchGrid.setViewVisible(this.titleBarPartView,Mf(this.configurationService,_e,this.state.runtime.menuBar.toggled,this.isZenModeActive())):this.state.runtime.mainWindowFullscreen&&(t==="toggle"||t==="classic")&&this.workbenchGrid.setViewVisible(this.titleBarPartView,Mf(this.configurationService,_e,this.state.runtime.menuBar.toggled,this.isZenModeActive())),this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)}}handleContainerDidLayout(e,t){e===this.mainContainer&&this._onDidLayoutMainContainer.fire(t),QA(e)&&this._onDidLayoutActiveContainer.fire(t),this._onDidLayoutContainer.fire({container:e,dimension:t})}onFullscreenChanged(e){e===_e.vscodeWindowId&&(this.state.runtime.mainWindowFullscreen=kb(_e),this.state.runtime.mainWindowFullscreen?this.mainContainer.classList.add("fullscreen"):(this.mainContainer.classList.remove("fullscreen"),this.stateModel.getRuntimeValue(he.ZEN_MODE_EXIT_INFO).transitionedToFullScreen&&this.isZenModeActive()&&this.toggleZenMode()),this.workbenchGrid.edgeSnapping=this.state.runtime.mainWindowFullscreen,Cw(this.configurationService)&&(this.workbenchGrid.setViewVisible(this.titleBarPartView,Mf(this.configurationService,_e,this.state.runtime.menuBar.toggled,this.isZenModeActive())),this.updateWindowsBorder(!0)))}onActiveWindowChanged(){const e=this.getActiveContainerId();this.state.runtime.activeContainerId!==e&&(this.state.runtime.activeContainerId=e,this.updateWindowsBorder(),this._onDidChangeActiveContainer.fire())}onWindowFocusChanged(e){this.state.runtime.hasFocus!==e&&(this.state.runtime.hasFocus=e,this.updateWindowsBorder())}getActiveContainerId(){const e=this.activeContainer;return ve(e).vscodeWindowId}doUpdateLayoutConfiguration(e){this.updateCustomTitleBarVisibility(),this.updateMenubarVisibility(!!e),this.editorGroupService.whenRestored.then(()=>{this.centerMainEditorLayout(this.stateModel.getRuntimeValue(he.MAIN_EDITOR_CENTERED),e)})}setSideBarPosition(e){const t=this.getPart(Y.ACTIVITYBAR_PART),n=this.getPart(Y.SIDEBAR_PART),s=this.getPart(Y.AUXILIARYBAR_PART),o=e===Ht.LEFT?"left":"right",r=e===Ht.RIGHT?"left":"right",a=this.getPanelAlignment(),l=this.getPanelPosition();this.stateModel.setRuntimeValue(he.SIDEBAR_POSITON,e);const c=pt(t.getContainer()),d=pt(n.getContainer()),h=pt(s.getContainer());c.classList.remove(r),d.classList.remove(r),c.classList.add(o),d.classList.add(o),h.classList.remove(o),h.classList.add(r),t.updateStyles(),n.updateStyles(),s.updateStyles(),this.adjustPartPositions(e,a,l)}updateWindowsBorder(e=!1){if(ui||Nt||RQ(this.configurationService)||Rc(this.configurationService))return;const t=this.themeService.getColorTheme(),n=t.getColor(jme),s=t.getColor(qme),o=this.hasMainWindowBorder();for(const r of this.containers){const a=r===this.mainContainer,l=this.activeContainer===r,c=Ng(ve(r));let d=!1;if(!this.state.runtime.mainWindowFullscreen&&!this.state.runtime.maximized.has(c)&&(n||s)){d=!0;const h=l&&this.state.runtime.hasFocus?n:s??n;r.style.setProperty("--window-border-color",h?.toString()??"transparent")}a&&(this.state.runtime.mainWindowBorder=d),r.classList.toggle("border",d)}!e&&o!==this.hasMainWindowBorder()&&this.layout()}initLayoutState(e,t){this.stateModel=new P0(this.storageService,this.configurationService,this.contextService,this.parent),this.stateModel.load(),this.stateModel.getRuntimeValue(he.PANEL_HIDDEN)&&this.stateModel.getRuntimeValue(he.EDITOR_HIDDEN)&&this.stateModel.setRuntimeValue(he.EDITOR_HIDDEN,!1),this._register(this.stateModel.onDidChangeState(l=>{l.key===he.ACTIVITYBAR_HIDDEN&&this.setActivityBarHidden(l.value),l.key===he.STATUSBAR_HIDDEN&&this.setStatusBarHidden(l.value),l.key===he.SIDEBAR_POSITON&&this.setSideBarPosition(l.value),l.key===he.PANEL_POSITION&&this.setPanelPosition(l.value),l.key===he.PANEL_ALIGNMENT&&this.setPanelAlignment(l.value),this.doUpdateLayoutConfiguration()}));const n=this.getInitialEditorsState();n&&this.logService.trace("Initial editor state",n);const s={layout:{editors:n?.layout},editor:{restoreEditors:this.shouldRestoreEditors(this.contextService,n),editorsToOpen:this.resolveEditorsToOpen(t,n)},views:{defaults:this.getDefaultLayoutViews(this.environmentService,this.storageService),containerToRestore:{}}},o={activeContainerId:this.getActiveContainerId(),mainWindowFullscreen:kb(_e),hasFocus:this.hostService.hasFocus,maximized:new Set,mainWindowBorder:!1,menuBar:{toggled:!1},zenMode:{transitionDisposables:new ah}};this.state={initialization:s,runtime:o};const r=e.startupKind===eb.NewWindow,a=this.configurationService.getValue(rt.ACTIVITY_BAR_LOCATION)!==ti.DEFAULT;if(this.isVisible(Y.SIDEBAR_PART)){let l;!this.environmentService.isBuilt||e.startupKind===eb.ReloadedWindow||this.environmentService.isExtensionDevelopment&&!this.environmentService.extensionTestsLocationURI?l=this.storageService.get(lL.activeViewletSettingsKey,Be.WORKSPACE,this.viewDescriptorService.getDefaultViewContainer(Te.Sidebar)?.id):l=this.viewDescriptorService.getDefaultViewContainer(Te.Sidebar)?.id,l?this.state.initialization.views.containerToRestore.sideBar=l:this.stateModel.setRuntimeValue(he.SIDEBAR_HIDDEN,!0)}else if(r&&a){const l=this.storageService.get(lL.activeViewletSettingsKey,Be.WORKSPACE,this.viewDescriptorService.getDefaultViewContainer(Te.Sidebar)?.id);l&&(this.state.initialization.views.containerToRestore.sideBar=l,this.stateModel.setRuntimeValue(he.SIDEBAR_HIDDEN,!1))}if(this.isVisible(Y.PANEL_PART)){const l=this.storageService.get(Mk.activePanelSettingsKey,Be.WORKSPACE,this.viewDescriptorService.getDefaultViewContainer(Te.Panel)?.id);l?this.state.initialization.views.containerToRestore.panel=l:this.stateModel.setRuntimeValue(he.PANEL_HIDDEN,!0)}if(this.isVisible(Y.AUXILIARYBAR_PART)){const l=this.storageService.get(K_.activePanelSettingsKey,Be.WORKSPACE,this.viewDescriptorService.getDefaultViewContainer(Te.AuxiliaryBar)?.id);l?this.state.initialization.views.containerToRestore.auxiliaryBar=l:this.stateModel.setRuntimeValue(he.AUXILIARYBAR_HIDDEN,!0)}this.updateWindowsBorder(!0)}getDefaultLayoutViews(e,t){const n=e.options?.defaultLayout;if(!n||!n.force&&!t.isNew(Be.WORKSPACE))return;const{views:s}=n;if(s?.length)return s.map(o=>o.id)}shouldRestoreEditors(e,t){return ZL(e.getWorkspace())?!1:!!(this.configurationService.getValue("window.restoreWindows")==="preserve")||t===void 0}willRestoreEditors(){return this.state.initialization.editor.restoreEditors}async resolveEditorsToOpen(e,t){if(t){const n=To(await WT(t.filesToMerge,e,this.logService));if(n.length===4&&yw(n[0])&&yw(n[1])&&yw(n[2])&&yw(n[3]))return[{editor:{input1:{resource:n[0].resource},input2:{resource:n[1].resource},base:{resource:n[2].resource},result:{resource:n[3].resource},options:{pinned:!0}}}];const s=To(await WT(t.filesToDiff,e,this.logService));if(s.length===2)return[{editor:{original:{resource:s[0].resource},modified:{resource:s[1].resource},options:{pinned:!0}}}];const o=[],r=await WT(t.filesToOpenOrCreate,e,this.logService);for(let a=0;a<r.length;a++){const l=r[a];l&&o.push({editor:l,viewColumn:t.filesToOpenOrCreate?.[a].viewColumn})}return o}else if(this.contextService.getWorkbenchState()===Mc.EMPTY&&this.configurationService.getValue("workbench.startupEditor")==="newUntitledFile")return this.editorGroupService.hasRestorableState?[]:await this.workingCopyBackupService.hasBackups()?[]:[{editor:{resource:void 0}}];return[]}_openedDefaultEditors=!1;get openedDefaultEditors(){return this._openedDefaultEditors}getInitialEditorsState(){const e=this.environmentService.options?.defaultLayout;if((e?.editors?.length||e?.layout?.editors)&&(e.force||this.storageService.isNew(Be.WORKSPACE)))return this._openedDefaultEditors=!0,{layout:e.layout?.editors,filesToOpenOrCreate:e?.editors?.map(o=>({viewColumn:o.viewColumn,fileUri:ne.revive(o.uri),openOnlyIfExists:o.openOnlyIfExists,options:o.options}))};const{filesToOpenOrCreate:t,filesToDiff:n,filesToMerge:s}=this.environmentService;if(t||n||s)return{filesToOpenOrCreate:t,filesToDiff:n,filesToMerge:s}}whenReadyPromise=new jg;whenReady=this.whenReadyPromise.p;whenRestoredPromise=new jg;whenRestored=this.whenRestoredPromise.p;restored=!1;isRestored(){return this.restored}restoreParts(){const e=[],t=[];e.push((async()=>{_i("code/willRestoreEditors"),await this.editorGroupService.whenReady,_i("code/restoreEditors/editorGroupsReady"),this.state.initialization.layout?.editors&&this.editorGroupService.mainPart.applyLayout(this.state.initialization.layout.editors);const r=await this.state.initialization.editor.editorsToOpen;_i("code/restoreEditors/editorsToOpenResolved");let a;if(r.length){const l=this.editorGroupService.mainPart.getGroups(tl.GRID_APPEARANCE),c=new Map;for(const d of r){const h=l[(d.viewColumn??1)-1];let u=c.get(h.id);u||(u=new Set,c.set(h.id,u)),u.add(d.editor)}a=Promise.all(Array.from(c).map(async([d,h])=>{try{await this.editorService.openEditors(Array.from(h),d,{validateTrust:!0})}catch(u){this.logService.error(u)}}))}t.push(Promise.all([a?.finally(()=>_i("code/restoreEditors/editorsOpened")),this.editorGroupService.whenRestored.finally(()=>_i("code/restoreEditors/editorGroupsRestored"))]).finally(()=>{_i("code/didRestoreEditors")}))})());const n=(async()=>{if(this.state.initialization.views.defaults?.length){_i("code/willOpenDefaultViews");const r=[],a=$h(d=>{const h=this.viewDescriptorService.getViewLocationById(d.id);if(h!==null){const u=this.viewDescriptorService.getViewContainerByViewId(d.id);if(u){d.order>=(r?.[h]?.order??0)&&(r[h]={id:u.id,order:d.order});const f=this.viewDescriptorService.getViewContainerModel(u);return f.setCollapsed(d.id,!1),f.setVisible(d.id,!0),!0}}return!1},"tryOpenView"),l=[...this.state.initialization.views.defaults].reverse().map((d,h)=>({id:d,order:h}));let c=l.length;for(;c;)c--,a(l[c])&&l.splice(c,1);if(l.length){await this.extensionService.whenInstalledExtensionsRegistered();let d=l.length;for(;d;)d--,a(l[d])&&l.splice(d,1)}r[Te.Sidebar]&&(this.state.initialization.views.containerToRestore.sideBar=r[Te.Sidebar].id),r[Te.Panel]&&(this.state.initialization.views.containerToRestore.panel=r[Te.Panel].id),r[Te.AuxiliaryBar]&&(this.state.initialization.views.containerToRestore.auxiliaryBar=r[Te.AuxiliaryBar].id),_i("code/didOpenDefaultViews")}})();e.push(n),e.push((async()=>{if(await n,!this.state.initialization.views.containerToRestore.sideBar)return;_i("code/willRestoreViewlet"),await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.sideBar,Te.Sidebar)||await this.paneCompositeService.openPaneComposite(this.viewDescriptorService.getDefaultViewContainer(Te.Sidebar)?.id,Te.Sidebar),_i("code/didRestoreViewlet")})()),e.push((async()=>{if(await n,!this.state.initialization.views.containerToRestore.panel)return;_i("code/willRestorePanel"),await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.panel,Te.Panel)||await this.paneCompositeService.openPaneComposite(this.viewDescriptorService.getDefaultViewContainer(Te.Panel)?.id,Te.Panel),_i("code/didRestorePanel")})()),e.push((async()=>{if(await n,!this.state.initialization.views.containerToRestore.auxiliaryBar)return;_i("code/willRestoreAuxiliaryBar"),await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.auxiliaryBar,Te.AuxiliaryBar)||await this.paneCompositeService.openPaneComposite(this.viewDescriptorService.getDefaultViewContainer(Te.AuxiliaryBar)?.id,Te.AuxiliaryBar),_i("code/didRestoreAuxiliaryBar")})());const s=this.isZenModeActive(),o=MW(this.configurationService).restore;s&&(this.setZenModeActive(!o),this.toggleZenMode(!1,!0)),this.stateModel.getRuntimeValue(he.MAIN_EDITOR_CENTERED)&&this.centerMainEditorLayout(!0,!0),Ka.settled(e).finally(()=>{this.whenReadyPromise.complete(),Ka.settled(t).finally(()=>{this.restored=!0,this.whenRestoredPromise.complete()})})}registerPart(e){const t=e.getId();return this.parts.set(t,e),ye(()=>this.parts.delete(t))}getPart(e){const t=this.parts.get(e);if(!t)throw new Error(`Unknown part ${e}`);return t}registerNotifications(e){this._register(e.onDidChangeNotificationsVisibility(t=>this._onDidChangeNotificationsVisibility.fire(t)))}hasFocus(e){const t=this.getContainer(sn(),e);if(!t)return!1;const n=Lr();return n?Tq(n,t):!1}focusPart(e,t=_e){const n=this.getContainer(t,e)??this.mainContainer;switch(e){case Y.EDITOR_PART:this.editorGroupService.getPart(n).activeGroup.focus();break;case Y.PANEL_PART:{this.paneCompositeService.getActivePaneComposite(Te.Panel)?.focus();break}case Y.SIDEBAR_PART:{this.paneCompositeService.getActivePaneComposite(Te.Sidebar)?.focus();break}case Y.AUXILIARYBAR_PART:{this.paneCompositeService.getActivePaneComposite(Te.AuxiliaryBar)?.focus();break}case Y.ACTIVITYBAR_PART:this.getPart(Y.SIDEBAR_PART).focusActivityBar();break;case Y.STATUSBAR_PART:this.statusBarService.getPart(n).focus();break;default:n?.focus()}}getContainer(e,t){if(typeof t>"u")return this.getContainerFromDocument(e.document);if(e===_e)return this.getPart(t).getContainer();let n;if(t===Y.EDITOR_PART?n=this.editorGroupService.getPart(this.getContainerFromDocument(e.document)):t===Y.STATUSBAR_PART?n=this.statusBarService.getPart(this.getContainerFromDocument(e.document)):t===Y.TITLEBAR_PART&&(n=this.titleService.getPart(this.getContainerFromDocument(e.document))),n instanceof gD)return n.getContainer()}isVisible(e,t=_e){if(t!==_e&&e===Y.EDITOR_PART)return!0;if(this.initialized)switch(e){case Y.TITLEBAR_PART:return this.workbenchGrid.isViewVisible(this.titleBarPartView);case Y.SIDEBAR_PART:return!this.stateModel.getRuntimeValue(he.SIDEBAR_HIDDEN);case Y.PANEL_PART:return!this.stateModel.getRuntimeValue(he.PANEL_HIDDEN);case Y.AUXILIARYBAR_PART:return!this.stateModel.getRuntimeValue(he.AUXILIARYBAR_HIDDEN);case Y.STATUSBAR_PART:return!this.stateModel.getRuntimeValue(he.STATUSBAR_HIDDEN);case Y.ACTIVITYBAR_PART:return!this.stateModel.getRuntimeValue(he.ACTIVITYBAR_HIDDEN);case Y.EDITOR_PART:return!this.stateModel.getRuntimeValue(he.EDITOR_HIDDEN);case Y.BANNER_PART:return this.workbenchGrid.isViewVisible(this.bannerPartView);default:return!1}switch(e){case Y.TITLEBAR_PART:return Mf(this.configurationService,_e,this.state.runtime.menuBar.toggled,this.isZenModeActive());case Y.SIDEBAR_PART:return!this.stateModel.getRuntimeValue(he.SIDEBAR_HIDDEN);case Y.PANEL_PART:return!this.stateModel.getRuntimeValue(he.PANEL_HIDDEN);case Y.AUXILIARYBAR_PART:return!this.stateModel.getRuntimeValue(he.AUXILIARYBAR_HIDDEN);case Y.STATUSBAR_PART:return!this.stateModel.getRuntimeValue(he.STATUSBAR_HIDDEN);case Y.ACTIVITYBAR_PART:return!this.stateModel.getRuntimeValue(he.ACTIVITYBAR_HIDDEN);case Y.EDITOR_PART:return!this.stateModel.getRuntimeValue(he.EDITOR_HIDDEN);default:return!1}}shouldShowBannerFirst(){return ui&&!J0()}focus(){this.focusPart(Y.EDITOR_PART,ve(this.activeContainer))}focusPanelOrEditor(){const e=this.paneCompositeService.getActivePaneComposite(Te.Panel);(this.hasFocus(Y.PANEL_PART)||!this.isVisible(Y.EDITOR_PART))&&e?e.focus():this.focus()}getMaximumEditorDimensions(e){const t=ve(e),n=this.getContainerDimension(e);if(e===this.mainContainer){const s=vo(this.getPanelPosition()),o=(this.isVisible(Y.ACTIVITYBAR_PART)?this.activityBarPartView.minimumWidth:0)+(this.isVisible(Y.SIDEBAR_PART)?this.sideBarPartView.minimumWidth:0)+(this.isVisible(Y.PANEL_PART)&&!s?this.panelPartView.minimumWidth:0)+(this.isVisible(Y.AUXILIARYBAR_PART)?this.auxiliaryBarPartView.minimumWidth:0),r=(this.isVisible(Y.TITLEBAR_PART,t)?this.titleBarPartView.minimumHeight:0)+(this.isVisible(Y.STATUSBAR_PART,t)?this.statusBarPartView.minimumHeight:0)+(this.isVisible(Y.PANEL_PART)&&s?this.panelPartView.minimumHeight:0),a=n.width-o,l=n.height-r;return{width:a,height:l}}else{const s=(this.isVisible(Y.TITLEBAR_PART,t)?this.titleBarPartView.minimumHeight:0)+(this.isVisible(Y.STATUSBAR_PART,t)?this.statusBarPartView.minimumHeight:0);return{width:n.width,height:n.height-s}}}isZenModeActive(){return this.stateModel.getRuntimeValue(he.ZEN_MODE_ACTIVE)}setZenModeActive(e){this.stateModel.setRuntimeValue(he.ZEN_MODE_ACTIVE,e)}toggleZenMode(e,t=!1){this.setZenModeActive(!this.isZenModeActive()),this.state.runtime.zenMode.transitionDisposables.clearAndDisposeAll();const n=$h(a=>{for(const l of this.mainPartEditorService.visibleTextEditorControls){if(!a&&vy(l)&&l.hasModel()){const c=l.getModel();a=this.configurationService.getValue("editor.lineNumbers",{resource:c.uri,overrideIdentifier:c.getLanguageId()})}a||(a=this.configurationService.getValue("editor.lineNumbers")),l.updateOptions({lineNumbers:a})}},"setLineNumbers");let s=!1;const o=MW(this.configurationService),r=this.stateModel.getRuntimeValue(he.ZEN_MODE_EXIT_INFO);this.isZenModeActive()?(s=!this.state.runtime.mainWindowFullscreen&&o.fullScreen&&!ol,t||(r.transitionedToFullScreen=s,r.transitionedToCenteredEditorLayout=!this.isMainEditorLayoutCentered()&&o.centerLayout,r.handleNotificationsDoNotDisturbMode=this.notificationService.getFilter()===Ci.OFF,r.wasVisible.sideBar=this.isVisible(Y.SIDEBAR_PART),r.wasVisible.panel=this.isVisible(Y.PANEL_PART),r.wasVisible.auxiliaryBar=this.isVisible(Y.AUXILIARYBAR_PART),this.stateModel.setRuntimeValue(he.ZEN_MODE_EXIT_INFO,r)),this.setPanelHidden(!0,!0),this.setAuxiliaryBarHidden(!0,!0),this.setSideBarHidden(!0,!0),o.hideActivityBar&&this.setActivityBarHidden(!0,!0),o.hideStatusBar&&this.setStatusBarHidden(!0,!0),o.hideLineNumbers&&(n("off"),this.state.runtime.zenMode.transitionDisposables.set(vs.HIDE_LINENUMBERS,this.mainPartEditorService.onDidVisibleEditorsChange(()=>n("off")))),o.showTabs!==this.editorGroupService.partOptions.showTabs&&this.state.runtime.zenMode.transitionDisposables.set(vs.SHOW_TABS,this.editorGroupService.mainPart.enforcePartOptions({showTabs:o.showTabs})),o.silentNotifications&&r.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(Ci.ERROR),o.centerLayout&&this.centerMainEditorLayout(!0,!0),this.state.runtime.zenMode.transitionDisposables.set("configurationChange",this.configurationService.onDidChangeConfiguration(a=>{if(a.affectsConfiguration(vs.HIDE_ACTIVITYBAR)){const l=this.configurationService.getValue(vs.HIDE_ACTIVITYBAR);this.setActivityBarHidden(l,!0)}if(a.affectsConfiguration(vs.HIDE_STATUSBAR)){const l=this.configurationService.getValue(vs.HIDE_STATUSBAR);this.setStatusBarHidden(l,!0)}if(a.affectsConfiguration(vs.CENTER_LAYOUT)){const l=this.configurationService.getValue(vs.CENTER_LAYOUT);this.centerMainEditorLayout(l,!0)}if(a.affectsConfiguration(vs.SHOW_TABS)){const l=this.configurationService.getValue(vs.SHOW_TABS)??"multiple";this.state.runtime.zenMode.transitionDisposables.set(vs.SHOW_TABS,this.editorGroupService.mainPart.enforcePartOptions({showTabs:l}))}if(a.affectsConfiguration(vs.SILENT_NOTIFICATIONS)){const l=!!this.configurationService.getValue(vs.SILENT_NOTIFICATIONS);r.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(l?Ci.ERROR:Ci.OFF)}if(a.affectsConfiguration(vs.HIDE_LINENUMBERS)){const l=this.configurationService.getValue(vs.HIDE_LINENUMBERS)?"off":void 0;n(l),this.state.runtime.zenMode.transitionDisposables.set(vs.HIDE_LINENUMBERS,this.mainPartEditorService.onDidVisibleEditorsChange(()=>n(l)))}}))):(r.wasVisible.panel&&this.setPanelHidden(!1,!0),r.wasVisible.auxiliaryBar&&this.setAuxiliaryBarHidden(!1,!0),r.wasVisible.sideBar&&this.setSideBarHidden(!1,!0),this.stateModel.getRuntimeValue(he.ACTIVITYBAR_HIDDEN,!0)||this.setActivityBarHidden(!1,!0),this.stateModel.getRuntimeValue(he.STATUSBAR_HIDDEN,!0)||this.setStatusBarHidden(!1,!0),r.transitionedToCenteredEditorLayout&&this.centerMainEditorLayout(!1,!0),r.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(Ci.OFF),n(),this.focus(),s=r.transitionedToFullScreen&&this.state.runtime.mainWindowFullscreen),e||this.layout(),s&&this.hostService.toggleFullScreen(_e),this._onDidChangeZenMode.fire(this.isZenModeActive())}setStatusBarHidden(e,t){this.stateModel.setRuntimeValue(he.STATUSBAR_HIDDEN,e),e?this.mainContainer.classList.add("nostatusbar"):this.mainContainer.classList.remove("nostatusbar"),this.workbenchGrid.setViewVisible(this.statusBarPartView,!e)}createWorkbenchLayout(){const e=this.getPart(Y.TITLEBAR_PART),t=this.getPart(Y.BANNER_PART),n=this.getPart(Y.EDITOR_PART),s=this.getPart(Y.ACTIVITYBAR_PART),o=this.getPart(Y.PANEL_PART),r=this.getPart(Y.AUXILIARYBAR_PART),a=this.getPart(Y.SIDEBAR_PART),l=this.getPart(Y.STATUSBAR_PART);this.titleBarPartView=e,this.bannerPartView=t,this.sideBarPartView=a,this.activityBarPartView=s,this.editorPartView=n,this.panelPartView=o,this.auxiliaryBarPartView=r,this.statusBarPartView=l;const c={[Y.ACTIVITYBAR_PART]:this.activityBarPartView,[Y.BANNER_PART]:this.bannerPartView,[Y.TITLEBAR_PART]:this.titleBarPartView,[Y.EDITOR_PART]:this.editorPartView,[Y.PANEL_PART]:this.panelPartView,[Y.SIDEBAR_PART]:this.sideBarPartView,[Y.STATUSBAR_PART]:this.statusBarPartView,[Y.AUXILIARYBAR_PART]:this.auxiliaryBarPartView},d=$h(({type:u})=>c[u],"fromJSON"),h=Sw.deserialize(this.createGridDescriptor(),{fromJSON:d},{proportionalLayout:!1});this.mainContainer.prepend(h.element),this.mainContainer.setAttribute("role","application"),this.workbenchGrid=h,this.workbenchGrid.edgeSnapping=this.state.runtime.mainWindowFullscreen;for(const u of[e,n,s,o,a,l,r,t])this._register(u.onDidVisibilityChange(f=>{u===a?this.setSideBarHidden(!f,!0):u===o?this.setPanelHidden(!f,!0):u===r?this.setAuxiliaryBarHidden(!f,!0):u===n&&this.setEditorHidden(!f,!0),this._onDidChangePartVisibility.fire(),this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)}));this._register(this.storageService.onWillSaveState(u=>{const f=this.stateModel.getRuntimeValue(he.SIDEBAR_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.sideBarPartView):this.workbenchGrid.getViewSize(this.sideBarPartView).width;this.stateModel.setInitializationValue(he.SIDEBAR_SIZE,f);const p=this.stateModel.getRuntimeValue(he.PANEL_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView):vo(this.stateModel.getRuntimeValue(he.PANEL_POSITION))?this.workbenchGrid.getViewSize(this.panelPartView).height:this.workbenchGrid.getViewSize(this.panelPartView).width;this.stateModel.setInitializationValue(he.PANEL_SIZE,p);const m=this.stateModel.getRuntimeValue(he.AUXILIARYBAR_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.auxiliaryBarPartView):this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width;this.stateModel.setInitializationValue(he.AUXILIARYBAR_SIZE,m),this.stateModel.save(!0,!0)}))}layout(){this.disposed||(this._mainContainerDimension=$p(this.state.runtime.mainWindowFullscreen?_e.document.body:this.parent),this.logService.trace(`Layout#layout, height: ${this._mainContainerDimension.height}, width: ${this._mainContainerDimension.width}`),H5(this.mainContainer,0,0,0,0,"relative"),W5(this.mainContainer,this._mainContainerDimension.width,this._mainContainerDimension.height),this.workbenchGrid.layout(this._mainContainerDimension.width,this._mainContainerDimension.height),this.initialized=!0,this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension))}isMainEditorLayoutCentered(){return this.stateModel.getRuntimeValue(he.MAIN_EDITOR_CENTERED)}centerMainEditorLayout(e,t){this.stateModel.setRuntimeValue(he.MAIN_EDITOR_CENTERED,e);const n=this.mainPartEditorService.activeEditor;let s=!1;n instanceof qa?s=this.configurationService.getValue("diffEditor.renderSideBySide"):n?.hasCapability(Wo.MultipleEditors)&&(s=!0),this.configurationService.getValue("workbench.editor.centeredLayoutAutoResize")&&(this.editorGroupService.mainPart.groups.length>1&&!this.editorGroupService.mainPart.hasMaximizedGroup()||s)&&(e=!1),this.editorGroupService.mainPart.isLayoutCentered()!==e&&(this.editorGroupService.mainPart.centerLayout(e),t||this.layout()),this._onDidChangeMainEditorCenteredLayout.fire(this.stateModel.getRuntimeValue(he.MAIN_EDITOR_CENTERED))}resizePart(e,t,n){const s=Math.sign(t)*nE(sn(),Math.abs(t)),o=Math.sign(n)*nE(sn(),Math.abs(n));let r;switch(e){case Y.SIDEBAR_PART:r=this.workbenchGrid.getViewSize(this.sideBarPartView),this.workbenchGrid.resizeView(this.sideBarPartView,{width:r.width+s,height:r.height});break;case Y.PANEL_PART:r=this.workbenchGrid.getViewSize(this.panelPartView),this.workbenchGrid.resizeView(this.panelPartView,{width:r.width+(vo(this.getPanelPosition())?0:s),height:r.height+(vo(this.getPanelPosition())?o:0)});break;case Y.AUXILIARYBAR_PART:r=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView),this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{width:r.width+s,height:r.height});break;case Y.EDITOR_PART:if(r=this.workbenchGrid.getViewSize(this.editorPartView),this.editorGroupService.mainPart.count===1)this.workbenchGrid.resizeView(this.editorPartView,{width:r.width+s,height:r.height+o});else{const a=this.editorGroupService.mainPart.activeGroup,{width:l,height:c}=this.editorGroupService.mainPart.getSize(a);this.editorGroupService.mainPart.setSize(a,{width:l+s,height:c+o});const{width:d,height:h}=this.editorGroupService.mainPart.getSize(a);(o&&c===h||s&&l===d)&&this.workbenchGrid.resizeView(this.editorPartView,{width:r.width+(s&&l===d?s:0),height:r.height+(o&&c===h?o:0)})}break;default:return}}setActivityBarHidden(e,t){this.stateModel.setRuntimeValue(he.ACTIVITYBAR_HIDDEN,e),this.workbenchGrid.setViewVisible(this.activityBarPartView,!e)}setBannerHidden(e){this.workbenchGrid.setViewVisible(this.bannerPartView,!e)}setEditorHidden(e,t){this.stateModel.setRuntimeValue(he.EDITOR_HIDDEN,e),e?this.mainContainer.classList.add("nomaineditorarea"):this.mainContainer.classList.remove("nomaineditorarea"),this.workbenchGrid.setViewVisible(this.editorPartView,!e),e&&!this.isVisible(Y.PANEL_PART)&&this.setPanelHidden(!1,!0)}getLayoutClasses(){return To([this.isVisible(Y.SIDEBAR_PART)?void 0:"nosidebar",this.isVisible(Y.EDITOR_PART,_e)?void 0:"nomaineditorarea",this.isVisible(Y.PANEL_PART)?void 0:"nopanel",this.isVisible(Y.AUXILIARYBAR_PART)?void 0:"noauxiliarybar",this.isVisible(Y.STATUSBAR_PART)?void 0:"nostatusbar",this.state.runtime.mainWindowFullscreen?"fullscreen":void 0])}setSideBarHidden(e,t){if(this.stateModel.setRuntimeValue(he.SIDEBAR_HIDDEN,e),e?this.mainContainer.classList.add("nosidebar"):this.mainContainer.classList.remove("nosidebar"),e&&this.paneCompositeService.getActivePaneComposite(Te.Sidebar))this.paneCompositeService.hideActivePaneComposite(Te.Sidebar),this.focusPanelOrEditor();else if(!e&&!this.paneCompositeService.getActivePaneComposite(Te.Sidebar)){const n=this.paneCompositeService.getLastActivePaneCompositeId(Te.Sidebar);n&&(this.paneCompositeService.openPaneComposite(n,Te.Sidebar,!0)||this.paneCompositeService.openPaneComposite(this.viewDescriptorService.getDefaultViewContainer(Te.Sidebar)?.id,Te.Sidebar,!0))}this.workbenchGrid.setViewVisible(this.sideBarPartView,!e)}hasViews(e){const t=this.viewDescriptorService.getViewContainerById(e);if(!t)return!1;const n=this.viewDescriptorService.getViewContainerModel(t);return n?n.activeViewDescriptors.length>=1:!1}adjustPartPositions(e,t,n){const s=!vo(n),o=s||!(t==="center"||e===Ht.LEFT&&t==="right"||e===Ht.RIGHT&&t==="left"),r=s||!(t==="center"||e===Ht.RIGHT&&t==="right"||e===Ht.LEFT&&t==="left"),a=this.isVisible(Y.PANEL_PART)?this.workbenchGrid.getViewSize(this.panelPartView).width:tp.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView)??this.panelPartView.minimumWidth),l=this.isVisible(Y.PANEL_PART)?this.workbenchGrid.getViewSize(this.panelPartView).height:tp.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView)??this.panelPartView.minimumHeight),c=this.isVisible(Y.SIDEBAR_PART)?this.workbenchGrid.getViewSize(this.sideBarPartView).width:tp.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.sideBarPartView)??this.sideBarPartView.minimumWidth),d=this.isVisible(Y.AUXILIARYBAR_PART)?this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width:tp.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.auxiliaryBarPartView)??this.auxiliaryBarPartView.minimumWidth);e===Ht.LEFT?(this.workbenchGrid.moveViewTo(this.activityBarPartView,[2,0]),this.workbenchGrid.moveView(this.sideBarPartView,c,o?this.editorPartView:this.activityBarPartView,o?Wr.Left:Wr.Right),r?this.workbenchGrid.moveView(this.auxiliaryBarPartView,d,this.editorPartView,Wr.Right):this.workbenchGrid.moveViewTo(this.auxiliaryBarPartView,[2,-1])):(this.workbenchGrid.moveViewTo(this.activityBarPartView,[2,-1]),this.workbenchGrid.moveView(this.sideBarPartView,c,o?this.editorPartView:this.activityBarPartView,o?Wr.Right:Wr.Left),r?this.workbenchGrid.moveView(this.auxiliaryBarPartView,d,this.editorPartView,Wr.Left):this.workbenchGrid.moveViewTo(this.auxiliaryBarPartView,[2,0])),s&&(this.workbenchGrid.moveView(this.panelPartView,a,this.editorPartView,n===Ht.LEFT?Wr.Left:Wr.Right),this.workbenchGrid.resizeView(this.panelPartView,{height:l,width:a})),this.isVisible(Y.SIDEBAR_PART)&&this.workbenchGrid.resizeView(this.sideBarPartView,{height:this.workbenchGrid.getViewSize(this.sideBarPartView).height,width:c}),this.isVisible(Y.AUXILIARYBAR_PART)&&this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{height:this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).height,width:d})}setPanelAlignment(e,t){vo(this.getPanelPosition())||this.setPanelPosition(Ht.BOTTOM),e!=="center"&&this.isPanelMaximized()&&this.toggleMaximizedPanel(),this.stateModel.setRuntimeValue(he.PANEL_ALIGNMENT,e),this.adjustPartPositions(this.getSideBarPosition(),e,this.getPanelPosition()),this._onDidChangePanelAlignment.fire(e)}setPanelHidden(e,t){if(!this.workbenchGrid)return;const n=!this.isVisible(Y.PANEL_PART);this.stateModel.setRuntimeValue(he.PANEL_HIDDEN,e);const s=this.isPanelMaximized(),o=this.panelOpensMaximized();e?this.mainContainer.classList.add("nopanel"):this.mainContainer.classList.remove("nopanel");let r=!1;if(e&&this.paneCompositeService.getActivePaneComposite(Te.Panel))this.paneCompositeService.hideActivePaneComposite(Te.Panel),r=!ol;else if(!e&&!this.paneCompositeService.getActivePaneComposite(Te.Panel)){let a=this.paneCompositeService.getLastActivePaneCompositeId(Te.Panel);if((!a||!this.hasViews(a))&&(a=this.viewDescriptorService.getViewContainersByLocation(Te.Panel).find(l=>this.hasViews(l.id))?.id),a){const l=!t;this.paneCompositeService.openPaneComposite(a,Te.Panel,l)}}e&&s&&this.toggleMaximizedPanel(),n!==e&&(this.workbenchGrid.setViewVisible(this.panelPartView,!e),e?this.stateModel.setRuntimeValue(he.PANEL_WAS_LAST_MAXIMIZED,s):!t&&s!==o&&this.toggleMaximizedPanel(),r&&this.editorGroupService.mainPart.activeGroup.focus())}toggleMaximizedPanel(){const e=this.workbenchGrid.getViewSize(this.panelPartView),t=this.getPanelPosition(),n=this.isPanelMaximized();n?(this.setEditorHidden(!1),this.workbenchGrid.resizeView(this.panelPartView,{width:vo(t)?e.width:this.stateModel.getRuntimeValue(he.PANEL_LAST_NON_MAXIMIZED_WIDTH),height:vo(t)?this.stateModel.getRuntimeValue(he.PANEL_LAST_NON_MAXIMIZED_HEIGHT):e.height})):(this.isVisible(Y.PANEL_PART)&&(vo(t)?this.stateModel.setRuntimeValue(he.PANEL_LAST_NON_MAXIMIZED_HEIGHT,e.height):this.stateModel.setRuntimeValue(he.PANEL_LAST_NON_MAXIMIZED_WIDTH,e.width)),this.setEditorHidden(!0)),this.stateModel.setRuntimeValue(he.PANEL_WAS_LAST_MAXIMIZED,!n)}panelOpensMaximized(){if(this.getPanelAlignment()!=="center"&&vo(this.getPanelPosition()))return!1;const e=aee(this.configurationService.getValue("workbench.panel.opensMaximized")),t=this.stateModel.getRuntimeValue(he.PANEL_WAS_LAST_MAXIMIZED);return e===BF.ALWAYS||e===BF.REMEMBER_LAST&&t}setAuxiliaryBarHidden(e,t){if(this.stateModel.setRuntimeValue(he.AUXILIARYBAR_HIDDEN,e),e?this.mainContainer.classList.add("noauxiliarybar"):this.mainContainer.classList.remove("noauxiliarybar"),e&&this.paneCompositeService.getActivePaneComposite(Te.AuxiliaryBar))this.paneCompositeService.hideActivePaneComposite(Te.AuxiliaryBar),this.focusPanelOrEditor();else if(!e&&!this.paneCompositeService.getActivePaneComposite(Te.AuxiliaryBar)){let n=this.paneCompositeService.getLastActivePaneCompositeId(Te.AuxiliaryBar);if((!n||!this.hasViews(n))&&(n=this.viewDescriptorService.getViewContainersByLocation(Te.AuxiliaryBar).find(s=>this.hasViews(s.id))?.id),n){const s=!t;this.paneCompositeService.openPaneComposite(n,Te.AuxiliaryBar,s)}}this.workbenchGrid.setViewVisible(this.auxiliaryBarPartView,!e)}setPartHidden(e,t,n=_e){switch(t){case Y.ACTIVITYBAR_PART:return this.setActivityBarHidden(e);case Y.SIDEBAR_PART:return this.setSideBarHidden(e);case Y.EDITOR_PART:return this.setEditorHidden(e);case Y.BANNER_PART:return this.setBannerHidden(e);case Y.AUXILIARYBAR_PART:return this.setAuxiliaryBarHidden(e);case Y.PANEL_PART:return this.setPanelHidden(e)}}hasMainWindowBorder(){return this.state.runtime.mainWindowBorder}getMainWindowBorderRadius(){return this.state.runtime.mainWindowBorder&&Ue?"5px":void 0}isPanelMaximized(){return(this.getPanelAlignment()==="center"||!vo(this.getPanelPosition()))&&!this.isVisible(Y.EDITOR_PART,_e)}getSideBarPosition(){return this.stateModel.getRuntimeValue(he.SIDEBAR_POSITON)}getPanelAlignment(){return this.stateModel.getRuntimeValue(he.PANEL_ALIGNMENT)}updateMenubarVisibility(e){const t=Mf(this.configurationService,_e,this.state.runtime.menuBar.toggled,this.isZenModeActive());!e&&this.workbenchGrid&&t!==this.isVisible(Y.TITLEBAR_PART,_e)&&this.workbenchGrid.setViewVisible(this.titleBarPartView,t)}updateCustomTitleBarVisibility(){const e=Mf(this.configurationService,_e,this.state.runtime.menuBar.toggled,this.isZenModeActive()),t=this.isVisible(Y.TITLEBAR_PART);e!==t&&this.workbenchGrid.setViewVisible(this.titleBarPartView,e)}toggleMenuBar(){let e=Jh(this.configurationService);typeof e!="string"&&(e="classic");let t;e==="visible"||e==="classic"?t=Rc(this.configurationService)?"toggle":"compact":t="classic",this.configurationService.updateValue("window.menuBarVisibility",t)}getPanelPosition(){return this.stateModel.getRuntimeValue(he.PANEL_POSITION)}setPanelPosition(e){this.isVisible(Y.PANEL_PART)||this.setPanelHidden(!1);const t=this.getPart(Y.PANEL_PART),n=Qa(this.getPanelPosition()),s=Qa(e),o=pt(t.getContainer());o.classList.remove(n),o.classList.add(s),t.updateStyles();const r=this.workbenchGrid.getViewSize(this.panelPartView),a=this.workbenchGrid.getViewSize(this.sideBarPartView),l=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView);let c=!this.isVisible(Y.EDITOR_PART,_e);s!==n&&!c&&(vo(e)?this.stateModel.setRuntimeValue(he.PANEL_LAST_NON_MAXIMIZED_WIDTH,r.width):vo(t0(n))&&this.stateModel.setRuntimeValue(he.PANEL_LAST_NON_MAXIMIZED_HEIGHT,r.height)),vo(e)&&this.getPanelAlignment()!=="center"&&c&&(this.toggleMaximizedPanel(),c=!1),this.stateModel.setRuntimeValue(he.PANEL_POSITION,e);const d=this.isVisible(Y.SIDEBAR_PART),h=this.isVisible(Y.AUXILIARYBAR_PART);e===Ht.BOTTOM?this.workbenchGrid.moveView(this.panelPartView,c?r.height:this.stateModel.getRuntimeValue(he.PANEL_LAST_NON_MAXIMIZED_HEIGHT),this.editorPartView,Wr.Down):e===Ht.TOP?this.workbenchGrid.moveView(this.panelPartView,c?r.height:this.stateModel.getRuntimeValue(he.PANEL_LAST_NON_MAXIMIZED_HEIGHT),this.editorPartView,Wr.Up):e===Ht.RIGHT?this.workbenchGrid.moveView(this.panelPartView,c?r.width:this.stateModel.getRuntimeValue(he.PANEL_LAST_NON_MAXIMIZED_WIDTH),this.editorPartView,Wr.Right):this.workbenchGrid.moveView(this.panelPartView,c?r.width:this.stateModel.getRuntimeValue(he.PANEL_LAST_NON_MAXIMIZED_WIDTH),this.editorPartView,Wr.Left),this.workbenchGrid.resizeView(this.sideBarPartView,a),d||this.setSideBarHidden(!0),this.workbenchGrid.resizeView(this.auxiliaryBarPartView,l),h||this.setAuxiliaryBarHidden(!0),vo(e)&&this.adjustPartPositions(this.getSideBarPosition(),this.getPanelAlignment(),e),this._onDidChangePanelPosition.fire(s)}isWindowMaximized(e){return this.state.runtime.maximized.has(Ng(e))}updateWindowMaximizedState(e,t){this.mainContainer.classList.toggle("maximized",t);const n=Ng(e);t!==this.state.runtime.maximized.has(n)&&(t?this.state.runtime.maximized.add(n):this.state.runtime.maximized.delete(n),this.updateWindowsBorder(),this._onDidChangeWindowMaximized.fire({windowId:n,maximized:t}))}getVisibleNeighborPart(e,t){if(!this.workbenchGrid||!this.isVisible(e,_e))return;const n=this.workbenchGrid.getNeighborViews(this.getPart(e),t,!1);if(n)for(const s of n){const o=[Y.ACTIVITYBAR_PART,Y.EDITOR_PART,Y.PANEL_PART,Y.AUXILIARYBAR_PART,Y.SIDEBAR_PART,Y.STATUSBAR_PART,Y.TITLEBAR_PART].find(r=>this.getPart(r)===s&&this.isVisible(r,_e));if(o!==void 0)return o}}onDidChangeWCO(){const e=this.workbenchGrid.getNeighborViews(this.titleBarPartView,Wr.Up,!1).length>0,t=this.shouldShowBannerFirst();e!==t&&this.workbenchGrid.moveView(this.bannerPartView,tp.Distribute,this.titleBarPartView,t?Wr.Up:Wr.Down),this.workbenchGrid.setViewVisible(this.titleBarPartView,Mf(this.configurationService,_e,this.state.runtime.menuBar.toggled,this.isZenModeActive()))}arrangeEditorNodes(e,t,n){if(!e.sideBar&&!e.auxiliaryBar)return e.editor.size=t,e.editor;const s=[e.editor];return e.editor.size=n,e.sideBar&&(this.stateModel.getRuntimeValue(he.SIDEBAR_POSITON)===Ht.LEFT?s.splice(0,0,e.sideBar):s.push(e.sideBar),e.editor.size-=this.stateModel.getRuntimeValue(he.SIDEBAR_HIDDEN)?0:e.sideBar.size),e.auxiliaryBar&&(this.stateModel.getRuntimeValue(he.SIDEBAR_POSITON)===Ht.RIGHT?s.splice(0,0,e.auxiliaryBar):s.push(e.auxiliaryBar),e.editor.size-=this.stateModel.getRuntimeValue(he.AUXILIARYBAR_HIDDEN)?0:e.auxiliaryBar.size),{type:"branch",data:s,size:t}}arrangeMiddleSectionNodes(e,t,n){const s=this.stateModel.getRuntimeValue(he.ACTIVITYBAR_HIDDEN)?0:e.activityBar.size,o=this.stateModel.getRuntimeValue(he.SIDEBAR_HIDDEN)?0:e.sideBar.size,r=this.stateModel.getRuntimeValue(he.AUXILIARYBAR_HIDDEN)?0:e.auxiliaryBar.size,a=this.stateModel.getInitializationValue(he.PANEL_SIZE)?0:e.panel.size,l=this.stateModel.getRuntimeValue(he.PANEL_POSITION),c=this.stateModel.getRuntimeValue(he.SIDEBAR_POSITON),d=[];if(!vo(l))d.push(e.editor),e.editor.size=t-s-o-a-r,l===Ht.RIGHT?d.push(e.panel):d.splice(0,0,e.panel),c===Ht.LEFT?(d.push(e.auxiliaryBar),d.splice(0,0,e.sideBar),d.splice(0,0,e.activityBar)):(d.splice(0,0,e.auxiliaryBar),d.push(e.sideBar),d.push(e.activityBar));else{const h=this.stateModel.getRuntimeValue(he.PANEL_ALIGNMENT),u=!(h==="center"||c===Ht.LEFT&&h==="right"||c===Ht.RIGHT&&h==="left"),f=!(h==="center"||c===Ht.RIGHT&&h==="right"||c===Ht.LEFT&&h==="left"),p=t-s-(u?0:o)-(f?0:r),m=this.arrangeEditorNodes({editor:e.editor,sideBar:u?e.sideBar:void 0,auxiliaryBar:f?e.auxiliaryBar:void 0},n-a,p);d.push({type:"branch",data:l===Ht.BOTTOM?[m,e.panel]:[e.panel,m],size:p}),u||(c===Ht.LEFT?d.splice(0,0,e.sideBar):d.push(e.sideBar)),f||(c===Ht.RIGHT?d.splice(0,0,e.auxiliaryBar):d.push(e.auxiliaryBar)),c===Ht.LEFT?d.splice(0,0,e.activityBar):d.push(e.activityBar)}return d}createGridDescriptor(){const{width:e,height:t}=this.stateModel.getInitializationValue(he.GRID_SIZE),n=this.stateModel.getInitializationValue(he.SIDEBAR_SIZE),s=this.stateModel.getInitializationValue(he.AUXILIARYBAR_SIZE),o=this.stateModel.getInitializationValue(he.PANEL_SIZE),r=this.titleBarPartView.minimumHeight,a=this.bannerPartView.minimumHeight,l=this.statusBarPartView.minimumHeight,c=this.activityBarPartView.minimumWidth,d=t-r-l,h=[{type:"leaf",data:{type:Y.TITLEBAR_PART},size:r,visible:this.isVisible(Y.TITLEBAR_PART,_e)},{type:"leaf",data:{type:Y.BANNER_PART},size:a,visible:!1}],u={type:"leaf",data:{type:Y.ACTIVITYBAR_PART},size:c,visible:!this.stateModel.getRuntimeValue(he.ACTIVITYBAR_HIDDEN)},f={type:"leaf",data:{type:Y.SIDEBAR_PART},size:n,visible:!this.stateModel.getRuntimeValue(he.SIDEBAR_HIDDEN)},p={type:"leaf",data:{type:Y.AUXILIARYBAR_PART},size:s,visible:this.isVisible(Y.AUXILIARYBAR_PART)},m={type:"leaf",data:{type:Y.EDITOR_PART},size:0,visible:!this.stateModel.getRuntimeValue(he.EDITOR_HIDDEN)},_={type:"leaf",data:{type:Y.PANEL_PART},size:o,visible:!this.stateModel.getRuntimeValue(he.PANEL_HIDDEN)},w=this.arrangeMiddleSectionNodes({activityBar:u,auxiliaryBar:p,editor:m,panel:_,sideBar:f},e,d),v={root:{type:"branch",size:e,data:[...this.shouldShowBannerFirst()?h.reverse():h,{type:"branch",data:w,size:d},{type:"leaf",data:{type:Y.STATUSBAR_PART},size:l,visible:!this.stateModel.getRuntimeValue(he.STATUSBAR_HIDDEN)}]},orientation:ke.VERTICAL,width:e,height:t},b={activityBarVisible:!this.stateModel.getRuntimeValue(he.ACTIVITYBAR_HIDDEN),sideBarVisible:!this.stateModel.getRuntimeValue(he.SIDEBAR_HIDDEN),auxiliaryBarVisible:!this.stateModel.getRuntimeValue(he.AUXILIARYBAR_HIDDEN),panelVisible:!this.stateModel.getRuntimeValue(he.PANEL_HIDDEN),statusbarVisible:!this.stateModel.getRuntimeValue(he.STATUSBAR_HIDDEN),sideBarPosition:Qa(this.stateModel.getRuntimeValue(he.SIDEBAR_POSITON)),panelPosition:Qa(this.stateModel.getRuntimeValue(he.PANEL_POSITION))};return this.telemetryService.publicLog2("startupLayout",b),v}dispose(){super.dispose(),this.disposed=!0}}function MW(i){return i.getValue("zenMode")}$h(MW,"getZenModeConfiguration");class ide{constructor(e,t,n,s){this.name=e,this.scope=t,this.target=n,this.defaultValue=s}static{$h(this,"WorkbenchLayoutStateKey")}}class pr extends ide{constructor(e,t,n,s,o){super(e,t,n,s),this.zenModeIgnore=o}static{$h(this,"RuntimeStateKey")}runtime=!0}class jI extends ide{static{$h(this,"InitializationStateKey")}runtime=!1}const he={MAIN_EDITOR_CENTERED:new pr("editor.centered",Be.WORKSPACE,ai.MACHINE,!1),ZEN_MODE_ACTIVE:new pr("zenMode.active",Be.WORKSPACE,ai.MACHINE,!1),ZEN_MODE_EXIT_INFO:new pr("zenMode.exitInfo",Be.WORKSPACE,ai.MACHINE,{transitionedToCenteredEditorLayout:!1,transitionedToFullScreen:!1,handleNotificationsDoNotDisturbMode:!1,wasVisible:{auxiliaryBar:!1,panel:!1,sideBar:!1}}),GRID_SIZE:new jI("grid.size",Be.PROFILE,ai.MACHINE,{width:800,height:600}),SIDEBAR_SIZE:new jI("sideBar.size",Be.PROFILE,ai.MACHINE,200),AUXILIARYBAR_SIZE:new jI("auxiliaryBar.size",Be.PROFILE,ai.MACHINE,200),PANEL_SIZE:new jI("panel.size",Be.PROFILE,ai.MACHINE,300),PANEL_LAST_NON_MAXIMIZED_HEIGHT:new pr("panel.lastNonMaximizedHeight",Be.PROFILE,ai.MACHINE,300),PANEL_LAST_NON_MAXIMIZED_WIDTH:new pr("panel.lastNonMaximizedWidth",Be.PROFILE,ai.MACHINE,300),PANEL_WAS_LAST_MAXIMIZED:new pr("panel.wasLastMaximized",Be.WORKSPACE,ai.MACHINE,!1),SIDEBAR_POSITON:new pr("sideBar.position",Be.WORKSPACE,ai.MACHINE,Ht.LEFT),PANEL_POSITION:new pr("panel.position",Be.WORKSPACE,ai.MACHINE,Ht.BOTTOM),PANEL_ALIGNMENT:new pr("panel.alignment",Be.PROFILE,ai.USER,"center"),ACTIVITYBAR_HIDDEN:new pr("activityBar.hidden",Be.WORKSPACE,ai.MACHINE,!1,!0),SIDEBAR_HIDDEN:new pr("sideBar.hidden",Be.WORKSPACE,ai.MACHINE,!1),EDITOR_HIDDEN:new pr("editor.hidden",Be.WORKSPACE,ai.MACHINE,!1),PANEL_HIDDEN:new pr("panel.hidden",Be.WORKSPACE,ai.MACHINE,!0),AUXILIARYBAR_HIDDEN:new pr("auxiliaryBar.hidden",Be.WORKSPACE,ai.MACHINE,!0),STATUSBAR_HIDDEN:new pr("statusBar.hidden",Be.WORKSPACE,ai.MACHINE,!1,!0)};class P0 extends ${constructor(e,t,n,s){super(),this.storageService=e,this.configurationService=t,this.contextService=n,this.container=s,this._register(this.configurationService.onDidChangeConfiguration(o=>this.updateStateFromLegacySettings(o)))}static{$h(this,"LayoutStateModel")}static STORAGE_PREFIX="workbench.";_onDidChangeState=this._register(new x);onDidChangeState=this._onDidChangeState.event;stateCache=new Map;updateStateFromLegacySettings(e){e.affectsConfiguration(rt.ACTIVITY_BAR_LOCATION)&&this.setRuntimeValueAndFire(he.ACTIVITYBAR_HIDDEN,this.isActivityBarHidden()),e.affectsConfiguration("workbench.statusBar.visible")&&this.setRuntimeValueAndFire(he.STATUSBAR_HIDDEN,!this.configurationService.getValue("workbench.statusBar.visible")),e.affectsConfiguration("workbench.sideBar.location")&&this.setRuntimeValueAndFire(he.SIDEBAR_POSITON,t0(this.configurationService.getValue("workbench.sideBar.location")??"left"))}updateLegacySettingsFromState(e,t){const n=this.getRuntimeValue(he.ZEN_MODE_ACTIVE);e.zenModeIgnore&&n||(e===he.ACTIVITYBAR_HIDDEN?this.configurationService.updateValue(rt.ACTIVITY_BAR_LOCATION,t?ti.HIDDEN:void 0):e===he.STATUSBAR_HIDDEN?this.configurationService.updateValue("workbench.statusBar.visible",!t):e===he.SIDEBAR_POSITON&&this.configurationService.updateValue("workbench.sideBar.location",Qa(t)))}load(){let e;for(e in he){const n=he[e],s=this.loadKeyFromStorage(n);s!==void 0&&this.stateCache.set(n.name,s)}this.stateCache.set(he.ACTIVITYBAR_HIDDEN.name,this.isActivityBarHidden()),this.stateCache.set(he.STATUSBAR_HIDDEN.name,!this.configurationService.getValue("workbench.statusBar.visible")),this.stateCache.set(he.SIDEBAR_POSITON.name,t0(this.configurationService.getValue("workbench.sideBar.location")??"left"));const t=$p(this.container);he.PANEL_POSITION.defaultValue=t0(this.configurationService.getValue("workbench.panel.defaultLocation")??"bottom"),he.GRID_SIZE.defaultValue={height:t.height,width:t.width},he.SIDEBAR_SIZE.defaultValue=Math.min(300,t.width/4),he.AUXILIARYBAR_SIZE.defaultValue=Math.min(300,t.width/4),he.PANEL_SIZE.defaultValue=this.stateCache.get(he.PANEL_POSITION.name)??vo(he.PANEL_POSITION.defaultValue)?t.height/3:t.width/4,he.SIDEBAR_HIDDEN.defaultValue=this.contextService.getWorkbenchState()===Mc.EMPTY;for(e in he){const n=he[e];this.stateCache.get(n.name)===void 0&&this.stateCache.set(n.name,n.defaultValue)}this._register(this.storageService.onDidChangeValue(Be.PROFILE,void 0,this._register(new te))(n=>{let s;for(s in he){const o=he[s];if(o instanceof pr&&o.scope===Be.PROFILE&&o.target===ai.USER&&`${P0.STORAGE_PREFIX}${o.name}`===n.key){const r=this.loadKeyFromStorage(o)??o.defaultValue;this.stateCache.get(o.name)!==r&&(this.stateCache.set(o.name,r),this._onDidChangeState.fire({key:o,value:r}))}}}))}save(e,t){let n;const s=this.getRuntimeValue(he.ZEN_MODE_ACTIVE);for(n in he){const o=he[n];if(e&&o.scope===Be.WORKSPACE||t&&o.scope===Be.PROFILE){if(s&&o instanceof pr&&o.zenModeIgnore)continue;this.saveKeyToStorage(o)}}}getInitializationValue(e){return this.stateCache.get(e.name)}setInitializationValue(e,t){this.stateCache.set(e.name,t)}getRuntimeValue(e,t){if(t)switch(e){case he.ACTIVITYBAR_HIDDEN:this.stateCache.set(e.name,this.isActivityBarHidden());break;case he.STATUSBAR_HIDDEN:this.stateCache.set(e.name,!this.configurationService.getValue("workbench.statusBar.visible"));break;case he.SIDEBAR_POSITON:this.stateCache.set(e.name,this.configurationService.getValue("workbench.sideBar.location")??"left");break}return this.stateCache.get(e.name)}setRuntimeValue(e,t){this.stateCache.set(e.name,t);const n=this.getRuntimeValue(he.ZEN_MODE_ACTIVE);e.scope===Be.PROFILE&&(!n||!e.zenModeIgnore)&&(this.saveKeyToStorage(e),this.updateLegacySettingsFromState(e,t))}isActivityBarHidden(){const e=this.configurationService.getValue("workbench.activityBar.visible");return e!==void 0?!e:this.configurationService.getValue(rt.ACTIVITY_BAR_LOCATION)!==ti.DEFAULT}setRuntimeValueAndFire(e,t){this.stateCache.get(e.name)!==t&&(this.setRuntimeValue(e,t),this._onDidChangeState.fire({key:e,value:t}))}saveKeyToStorage(e){const t=this.stateCache.get(e.name);this.storageService.store(`${P0.STORAGE_PREFIX}${e.name}`,typeof t=="object"?JSON.stringify(t):t,e.scope,e.target)}loadKeyFromStorage(e){let t=this.storageService.get(`${P0.STORAGE_PREFIX}${e.name}`,e.scope);if(t!==void 0)switch(typeof e.defaultValue){case"boolean":t=t==="true";break;case"number":t=parseInt(t);break;case"object":t=JSON.parse(t);break}return t}}var nde=Object.defineProperty,VUe=Object.getOwnPropertyDescriptor,WUe=(i,e)=>nde(i,"name",{value:e,configurable:!0}),HUe=(i,e,t,n)=>{for(var s=n>1?void 0:n?VUe(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(s=(n?r(e,t,s):r(s))||s);return n&&s&&nde(e,t,s),s},UUe=(i,e)=>(t,n)=>e(t,n,i);const zUe=5e3;let BW=class extends ${constructor(i,e,t){super(),this._accessibilitySignalService=t,this._scheduler=new xn(()=>{this._signalLoop=this._accessibilitySignalService.playSignalLoop(Yt.progress,e??zUe)},i),this._scheduler.schedule()}static{WUe(this,"AccessibilityProgressSignalScheduler")}_scheduler;_signalLoop;dispose(){super.dispose(),this._signalLoop?.dispose(),this._scheduler.dispose()}};BW=HUe([UUe(2,_S)],BW);var $Ue=Object.defineProperty,sde=(i,e)=>$Ue(i,"name",{value:e,configurable:!0});const GUe=De("accessibleViewService");var ode=(i=>(i.Terminal="terminal",i.TerminalChat="terminal-chat",i.TerminalHelp="terminal-help",i.DiffEditor="diffEditor",i.Chat="panelChat",i.InlineChat="inlineChat",i.InlineCompletions="inlineCompletions",i.KeybindingsEditor="keybindingsEditor",i.Notebook="notebook",i.Editor="editor",i.Hover="hover",i.Notification="notification",i.EmptyEditorHint="emptyEditorHint",i.Comments="comments",i.Repl="repl",i.ReplHelp="replHelp",i.RunAndDebug="runAndDebug",i.Walkthrough="walkthrough",i))(ode||{}),FW=(i=>(i.Help="help",i.View="view",i))(FW||{});class KUe extends ${constructor(e,t,n,s,o,r,a,l,c,d,h,u,f){super(),this.id=e,this.options=t,this.provideContent=n,this.onClose=s,this.verbositySettingKey=o,this.onOpen=r,this.actions=a,this.provideNextContent=l,this.providePreviousContent=c,this.onDidChangeContent=d,this.onKeyDown=h,this.getSymbols=u,this.onDidRequestClearLastProvider=f}static{sde(this,"AccessibleContentProvider")}}class Fje extends ${constructor(e,t,n,s,o,r,a,l,c){super(),this.id=e,this.options=t,this.provideContent=n,this.onClose=s,this.onOpen=o,this.provideNextContent=r,this.providePreviousContent=a,this.actions=l,this.onDidChangeContent=c}static{sde(this,"ExtensionContentProvider")}}var jUe=Object.defineProperty,z$=(i,e)=>jUe(i,"name",{value:e,configurable:!0});const qUe=new class{static{z$(this,"AccessibleViewRegistry")}_implementations=[];register(e){return this._implementations.push(e),{dispose:z$(()=>{const t=this._implementations.indexOf(e);t!==-1&&this._implementations.splice(t,1)},"dispose")}}getImplementations(){return this._implementations}};var YUe=Object.defineProperty,Uw=(i,e)=>YUe(i,"name",{value:e,configurable:!0});class ZUe{static{Uw(this,"NotificationAccessibleView")}priority=90;name="notifications";when=Cc;type=FW.View;getProvider(e){const t=e.get(GUe),n=e.get(xi),s=e.get(Xi),o=e.get(_S);function r(){const a=op(n);if(!a)return;s.executeCommand("notifications.showList");let l;const c=n.lastFocusedList;if(c instanceof FE&&(l=c.indexOf(a)),l===void 0)return;function d(){if(s.executeCommand("notifications.showList"),c&&l!==void 0){c.domFocus();try{c.setFocus([l])}catch{}}}Uw(d,"focusList");function h(){const f=op(n),p=f?.message.original.toString();if(f)return f.source?g("notification.accessibleViewSrc","{0} Source: {1}",p,f.source):g("notification.accessibleView","{0}",p)}Uw(h,"getContentForNotification");const u=h();if(u)return a.onDidClose(()=>t.next()),new KUe(ode.Notification,{type:FW.View},()=>u,()=>d(),"accessibility.verbosity.notification",void 0,rde(a,o),()=>{if(c)return d(),c.focusNext(),h()},()=>{if(c)return d(),c.focusPrevious(),h()})}return Uw(r,"getProvider"),r()}}function rde(i,e){let t;if(i.actions&&(t=[],i.actions.primary&&t.push(...i.actions.primary),i.actions.secondary&&t.push(...i.actions.secondary)),t)for(const s of t){s.class=Ne.asClassName(ee.bell);const o=s.run;s.run=()=>{o(),i.close()}}const n=t?.find(s=>s.label.includes("Manage Extension"));return n&&(n.class=Ne.asClassName(ee.gear)),t&&t.push({id:"clearNotification",label:g("clearNotification","Clear Notification"),tooltip:g("clearNotification","Clear Notification"),run:Uw(()=>{i.close(),e.playSignal(Yt.clear)},"run"),enabled:!0,class:Ne.asClassName(ee.clearAll)}),t}Uw(rde,"getActionsFromNotification");var XUe=Object.defineProperty,$$=(i,e)=>XUe(i,"name",{value:e,configurable:!0});class Wje extends FUe{constructor(e,t,n,s){super(e),this.options=t,this.serviceCollection=n,_i("code/willStartWorkbench"),this.registerErrorHandler(s)}static{$$(this,"Workbench")}_onWillShutdown=this._register(new x);onWillShutdown=this._onWillShutdown.event;_onDidShutdown=this._register(new x);onDidShutdown=this._onDidShutdown.event;registerErrorHandler(e){_e.addEventListener("unhandledrejection",t=>{Kt(t.reason),t.preventDefault()}),iG(t=>this.handleUnexpectedError(t,e))}previousUnexpectedError={message:void 0,time:0};handleUnexpectedError(e,t){const n=hh(e,!0);if(!n)return;const s=Date.now();n===this.previousUnexpectedError.message&&s-this.previousUnexpectedError.time<=1e3||(this.previousUnexpectedError.time=s,this.previousUnexpectedError.message=n,t.error(n))}startup(){try{this._register(LK(175));const e=this.initServices(this.serviceCollection);return e.invokeFunction(t=>{const n=t.get(eh),s=t.get(Si),o=t.get(Pe),r=t.get(hr),a=t.get(Po),l=t.get(gh),c=t.get(fs);Fee((d,h)=>e.createInstance(qE,d,h,{})),Mee(a),this.initLayout(t),Xt.as(xE.Workbench).start(t),Xt.as(jp.EditorFactory).start(t),this._register(e.createInstance(r4)),this.registerListeners(n,s,o,r,l),this.renderWorkbench(e,c,s,o),this.createWorkbenchLayout(),this.layout(),this.restore(n)}),e}catch(e){throw Kt(e),e}}initServices(e){e.set(yt,this);const t=eX();for(const[s,o]of t)e.set(s,o);const n=new Ak(e,!0);return n.invokeFunction(s=>{const o=s.get(eh),r=s.get(Pe);typeof r.acquireInstantiationService=="function"&&r.acquireInstantiationService(n),o.phase=an.Ready}),n}registerListeners(e,t,n,s,o){this._register(n.onDidChangeConfiguration(r=>this.updateFontAliasing(r,n))),ao?this._register(t.onWillSaveState(r=>{r.reason===rC.SHUTDOWN&&this.storeFontInfo(t)})):this._register(e.onWillShutdown(()=>this.storeFontInfo(t))),this._register(e.onWillShutdown(r=>this._onWillShutdown.fire(r))),this._register(e.onDidShutdown(()=>{this._onDidShutdown.fire(),this.dispose()})),this._register(s.onDidChangeFocus(r=>{r||t.flush()})),this._register(o.onWillShowDialog(()=>this.mainContainer.classList.add("modal-dialog-visible"))),this._register(o.onDidShowDialog(()=>this.mainContainer.classList.remove("modal-dialog-visible")))}fontAliasing;updateFontAliasing(e,t){if(!Ue||e&&!e.affectsConfiguration("workbench.fontAliasing"))return;const n=t.getValue("workbench.fontAliasing");if(this.fontAliasing===n)return;this.fontAliasing=n;const s=["antialiased","none","auto"];this.mainContainer.classList.remove(...s.map(o=>`monaco-font-aliasing-${o}`)),s.some(o=>o===n)&&this.mainContainer.classList.add(`monaco-font-aliasing-${n}`)}restoreFontInfo(e,t){const n=e.get("editorFontInfo",Be.APPLICATION);if(n)try{const s=JSON.parse(n);Array.isArray(s)&&_0.restoreFontInfo(_e,s)}catch{}_0.readFontInfo(_e,wp.createFromRawSettings(t.getValue("editor"),by.getInstance(_e).value))}storeFontInfo(e){const t=_0.serializeFontInfo(_e);t&&e.store("editorFontInfo",JSON.stringify(t),Be.APPLICATION,ai.MACHINE)}renderWorkbench(e,t,n,s){bee(this.mainContainer),Wte((a,l)=>e.createInstance(BW,a,l));const o=Nt?"windows":Gi?"linux":"mac",r=To(["monaco-workbench",o,ui?"web":void 0,qy?"chromium":na?"firefox":Vc?"safari":void 0,...this.getLayoutClasses(),...this.options?.extraClasses?this.options.extraClasses:[]]);this.mainContainer.classList.add(...r),_e.document.body.classList.add(o),ui&&_e.document.body.classList.add("web"),this.updateFontAliasing(void 0,s),this.restoreFontInfo(n,s);for(const{id:a,role:l,classes:c,options:d}of[{id:Y.TITLEBAR_PART,role:"none",classes:["titlebar"]},{id:Y.BANNER_PART,role:"banner",classes:["banner"]},{id:Y.ACTIVITYBAR_PART,role:"none",classes:["activitybar",this.getSideBarPosition()===Ht.LEFT?"left":"right"]},{id:Y.SIDEBAR_PART,role:"none",classes:["sidebar",this.getSideBarPosition()===Ht.LEFT?"left":"right"]},{id:Y.EDITOR_PART,role:"main",classes:["editor"],options:{restorePreviousState:this.willRestoreEditors()}},{id:Y.PANEL_PART,role:"none",classes:["panel","basepanel",Qa(this.getPanelPosition())]},{id:Y.AUXILIARYBAR_PART,role:"none",classes:["auxiliarybar","basepanel",this.getSideBarPosition()===Ht.LEFT?"right":"left"]},{id:Y.STATUSBAR_PART,role:"status",classes:["statusbar"]}]){const h=this.createPart(a,l,c);_i(`code/willCreatePart/${a}`),this.getPart(a).create(h,d),_i(`code/didCreatePart/${a}`)}this.createNotificationsHandlers(e,t),this.parent.appendChild(this.mainContainer)}createPart(e,t,n){const s=document.createElement(t==="status"?"footer":"div");return s.classList.add("part",...n),s.id=e,s.setAttribute("role",t),t==="status"&&s.setAttribute("aria-live","off"),s}createNotificationsHandlers(e,t){const n=this._register(e.createInstance(W_,this.mainContainer,t.model)),s=this._register(e.createInstance(lp,this.mainContainer,t.model));this._register(e.createInstance(DRe,t.model));const o=e.createInstance(s4,t.model);this._register(e.createInstance(tV)),this._register(n.onDidChangeVisibility(()=>{o.update(n.isVisible,s.isVisible),s.update(n.isVisible)})),this._register(s.onDidChangeVisibility(()=>{o.update(n.isVisible,s.isVisible)})),Uie(n,s,t.model),qUe.register(new ZUe),this.registerNotifications({onDidChangeNotificationsVisibility:H.map(H.any(s.onDidChangeVisibility,n.onDidChangeVisibility),()=>s.isVisible||n.isVisible)})}restore(e){try{this.restoreParts()}catch(t){Kt(t)}this.whenReady.finally(()=>Promise.race([this.whenRestored,xa(2e3)]).finally(()=>{function t(){_i("code/didStartWorkbench"),performance.measure("perf: workbench create & restore","code/didLoadWorkbenchMain","code/didStartWorkbench")}$$(t,"markDidStartWorkbench"),this.isRestored()?t():this.whenRestored.finally(()=>t()),e.phase=an.Restored,this._register(new xn(()=>{this._register(D_(_e,()=>e.phase=an.Eventually,2500))},2500)).schedule()}))}}});var_d1c327a3_222e_5848_9624_72a5b2936f12=QUe()})();export{var_d1c327a3_222e_5848_9624_72a5b2936f12 as default,__tla};